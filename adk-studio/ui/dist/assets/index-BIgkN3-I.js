(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Rl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $d={exports:{}},Ms={},Hd={exports:{}},Ke={};var Yw;function aR(){if(Yw)return Ke;Yw=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function _(B,Y,F){this.props=B,this.context=Y,this.refs=x,this.updater=F||v}_.prototype.isReactComponent={},_.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},_.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function k(){}k.prototype=_.prototype;function S(B,Y,F){this.props=B,this.context=Y,this.refs=x,this.updater=F||v}var N=S.prototype=new k;N.constructor=S,b(N,_.prototype),N.isPureReactComponent=!0;var T=Array.isArray,A=Object.prototype.hasOwnProperty,C={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function O(B,Y,F){var K,J={},te=null,re=null;if(Y!=null)for(K in Y.ref!==void 0&&(re=Y.ref),Y.key!==void 0&&(te=""+Y.key),Y)A.call(Y,K)&&!P.hasOwnProperty(K)&&(J[K]=Y[K]);var V=arguments.length-2;if(V===1)J.children=F;else if(1<V){for(var ne=Array(V),de=0;de<V;de++)ne[de]=arguments[de+2];J.children=ne}if(B&&B.defaultProps)for(K in V=B.defaultProps,V)J[K]===void 0&&(J[K]=V[K]);return{$$typeof:e,type:B,key:te,ref:re,props:J,_owner:C.current}}function I(B,Y){return{$$typeof:e,type:B.type,key:Y,ref:B.ref,props:B.props,_owner:B._owner}}function H(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function D(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(F){return Y[F]})}var z=/\/+/g;function W(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?D(""+B.key):Y.toString(36)}function L(B,Y,F,K,J){var te=typeof B;(te==="undefined"||te==="boolean")&&(B=null);var re=!1;if(B===null)re=!0;else switch(te){case"string":case"number":re=!0;break;case"object":switch(B.$$typeof){case e:case t:re=!0}}if(re)return re=B,J=J(re),B=K===""?"."+W(re,0):K,T(J)?(F="",B!=null&&(F=B.replace(z,"$&/")+"/"),L(J,Y,F,"",function(de){return de})):J!=null&&(H(J)&&(J=I(J,F+(!J.key||re&&re.key===J.key?"":(""+J.key).replace(z,"$&/")+"/")+B)),Y.push(J)),1;if(re=0,K=K===""?".":K+":",T(B))for(var V=0;V<B.length;V++){te=B[V];var ne=K+W(te,V);re+=L(te,Y,F,ne,J)}else if(ne=g(B),typeof ne=="function")for(B=ne.call(B),V=0;!(te=B.next()).done;)te=te.value,ne=K+W(te,V++),re+=L(te,Y,F,ne,J);else if(te==="object")throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return re}function q(B,Y,F){if(B==null)return B;var K=[],J=0;return L(B,K,"","",function(te){return Y.call(F,te,J++)}),K}function $(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(F){(B._status===0||B._status===-1)&&(B._status=1,B._result=F)},function(F){(B._status===0||B._status===-1)&&(B._status=2,B._result=F)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var G={current:null},U={transition:null},X={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:U,ReactCurrentOwner:C};function R(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:q,forEach:function(B,Y,F){q(B,function(){Y.apply(this,arguments)},F)},count:function(B){var Y=0;return q(B,function(){Y++}),Y},toArray:function(B){return q(B,function(Y){return Y})||[]},only:function(B){if(!H(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ke.Component=_,Ke.Fragment=n,Ke.Profiler=o,Ke.PureComponent=S,Ke.StrictMode=r,Ke.Suspense=d,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Ke.act=R,Ke.cloneElement=function(B,Y,F){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var K=b({},B.props),J=B.key,te=B.ref,re=B._owner;if(Y!=null){if(Y.ref!==void 0&&(te=Y.ref,re=C.current),Y.key!==void 0&&(J=""+Y.key),B.type&&B.type.defaultProps)var V=B.type.defaultProps;for(ne in Y)A.call(Y,ne)&&!P.hasOwnProperty(ne)&&(K[ne]=Y[ne]===void 0&&V!==void 0?V[ne]:Y[ne])}var ne=arguments.length-2;if(ne===1)K.children=F;else if(1<ne){V=Array(ne);for(var de=0;de<ne;de++)V[de]=arguments[de+2];K.children=V}return{$$typeof:e,type:B.type,key:J,ref:te,props:K,_owner:re}},Ke.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},Ke.createElement=O,Ke.createFactory=function(B){var Y=O.bind(null,B);return Y.type=B,Y},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(B){return{$$typeof:u,render:B}},Ke.isValidElement=H,Ke.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:$}},Ke.memo=function(B,Y){return{$$typeof:p,type:B,compare:Y===void 0?null:Y}},Ke.startTransition=function(B){var Y=U.transition;U.transition={};try{B()}finally{U.transition=Y}},Ke.unstable_act=R,Ke.useCallback=function(B,Y){return G.current.useCallback(B,Y)},Ke.useContext=function(B){return G.current.useContext(B)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(B){return G.current.useDeferredValue(B)},Ke.useEffect=function(B,Y){return G.current.useEffect(B,Y)},Ke.useId=function(){return G.current.useId()},Ke.useImperativeHandle=function(B,Y,F){return G.current.useImperativeHandle(B,Y,F)},Ke.useInsertionEffect=function(B,Y){return G.current.useInsertionEffect(B,Y)},Ke.useLayoutEffect=function(B,Y){return G.current.useLayoutEffect(B,Y)},Ke.useMemo=function(B,Y){return G.current.useMemo(B,Y)},Ke.useReducer=function(B,Y,F){return G.current.useReducer(B,Y,F)},Ke.useRef=function(B){return G.current.useRef(B)},Ke.useState=function(B){return G.current.useState(B)},Ke.useSyncExternalStore=function(B,Y,F){return G.current.useSyncExternalStore(B,Y,F)},Ke.useTransition=function(){return G.current.useTransition()},Ke.version="18.3.1",Ke}var Qw;function fa(){return Qw||(Qw=1,Hd.exports=aR()),Hd.exports}var Xw;function lR(){if(Xw)return Ms;Xw=1;var e=fa(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,p){var f,m={},g=null,v=null;p!==void 0&&(g=""+p),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(v=d.ref);for(f in d)r.call(d,f)&&!a.hasOwnProperty(f)&&(m[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:t,type:u,key:g,ref:v,props:m,_owner:o.current}}return Ms.Fragment=n,Ms.jsx=l,Ms.jsxs=l,Ms}var Jw;function cR(){return Jw||(Jw=1,$d.exports=lR()),$d.exports}var s=cR(),j=fa();const Lt=Wi(j);var Ol={},Vd={exports:{}},on={},Ud={exports:{}},Wd={};var Zw;function uR(){return Zw||(Zw=1,(function(e){function t(U,X){var R=U.length;U.push(X);e:for(;0<R;){var B=R-1>>>1,Y=U[B];if(0<o(Y,X))U[B]=X,U[R]=Y,R=B;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var X=U[0],R=U.pop();if(R!==X){U[0]=R;e:for(var B=0,Y=U.length,F=Y>>>1;B<F;){var K=2*(B+1)-1,J=U[K],te=K+1,re=U[te];if(0>o(J,R))te<Y&&0>o(re,J)?(U[B]=re,U[te]=R,B=te):(U[B]=J,U[K]=R,B=K);else if(te<Y&&0>o(re,R))U[B]=re,U[te]=R,B=te;else break e}}return X}function o(U,X){var R=U.sortIndex-X.sortIndex;return R!==0?R:U.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],p=[],f=1,m=null,g=3,v=!1,b=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(U){for(var X=n(p);X!==null;){if(X.callback===null)r(p);else if(X.startTime<=U)r(p),X.sortIndex=X.expirationTime,t(d,X);else break;X=n(p)}}function T(U){if(x=!1,N(U),!b)if(n(d)!==null)b=!0,$(A);else{var X=n(p);X!==null&&G(T,X.startTime-U)}}function A(U,X){b=!1,x&&(x=!1,k(O),O=-1),v=!0;var R=g;try{for(N(X),m=n(d);m!==null&&(!(m.expirationTime>X)||U&&!D());){var B=m.callback;if(typeof B=="function"){m.callback=null,g=m.priorityLevel;var Y=B(m.expirationTime<=X);X=e.unstable_now(),typeof Y=="function"?m.callback=Y:m===n(d)&&r(d),N(X)}else r(d);m=n(d)}if(m!==null)var F=!0;else{var K=n(p);K!==null&&G(T,K.startTime-X),F=!1}return F}finally{m=null,g=R,v=!1}}var C=!1,P=null,O=-1,I=5,H=-1;function D(){return!(e.unstable_now()-H<I)}function z(){if(P!==null){var U=e.unstable_now();H=U;var X=!0;try{X=P(!0,U)}finally{X?W():(C=!1,P=null)}}else C=!1}var W;if(typeof S=="function")W=function(){S(z)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,q=L.port2;L.port1.onmessage=z,W=function(){q.postMessage(null)}}else W=function(){_(z,0)};function $(U){P=U,C||(C=!0,W())}function G(U,X){O=_(function(){U(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,$(A))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(U){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var R=g;g=X;try{return U()}finally{g=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,X){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var R=g;g=U;try{return X()}finally{g=R}},e.unstable_scheduleCallback=function(U,X,R){var B=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?B+R:B):R=B,U){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=R+Y,U={id:f++,callback:X,priorityLevel:U,startTime:R,expirationTime:Y,sortIndex:-1},R>B?(U.sortIndex=R,t(p,U),n(d)===null&&U===n(p)&&(x?(k(O),O=-1):x=!0,G(T,R-B))):(U.sortIndex=Y,t(d,U),b||v||(b=!0,$(A))),U},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(U){var X=g;return function(){var R=g;g=X;try{return U.apply(this,arguments)}finally{g=R}}}})(Wd)),Wd}var e0;function dR(){return e0||(e0=1,Ud.exports=uR()),Ud.exports}var t0;function pR(){if(t0)return on;t0=1;var e=fa(),t=dR();function n(i){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function a(i,c){l(i,c),l(i+"Capture",c)}function l(i,c){for(o[i]=c,i=0;i<c.length;i++)r.add(c[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(i){return d.call(m,i)?!0:d.call(f,i)?!1:p.test(i)?m[i]=!0:(f[i]=!0,!1)}function v(i,c,h,y){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,c,h,y){if(c===null||typeof c>"u"||v(i,c,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function x(i,c,h,y,w,E,M){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=i,this.type=c,this.sanitizeURL=E,this.removeEmptyString=M}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){_[i]=new x(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var c=i[0];_[c]=new x(c,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){_[i]=new x(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){_[i]=new x(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){_[i]=new x(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){_[i]=new x(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){_[i]=new x(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){_[i]=new x(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){_[i]=new x(i,5,!1,i.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function S(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var c=i.replace(k,S);_[c]=new x(c,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var c=i.replace(k,S);_[c]=new x(c,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var c=i.replace(k,S);_[c]=new x(c,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){_[i]=new x(i,1,!1,i.toLowerCase(),null,!1,!1)}),_.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){_[i]=new x(i,1,!1,i.toLowerCase(),null,!0,!0)});function N(i,c,h,y){var w=_.hasOwnProperty(c)?_[c]:null;(w!==null?w.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,h,w,y)&&(h=null),y||w===null?g(c)&&(h===null?i.removeAttribute(c):i.setAttribute(c,""+h)):w.mustUseProperty?i[w.propertyName]=h===null?w.type===3?!1:"":h:(c=w.attributeName,y=w.attributeNamespace,h===null?i.removeAttribute(c):(w=w.type,h=w===3||w===4&&h===!0?"":""+h,y?i.setAttributeNS(y,c,h):i.setAttribute(c,h))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),C=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),D=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),U=Symbol.iterator;function X(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var R=Object.assign,B;function Y(i){if(B===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);B=c&&c[1]||""}return`
`+B+i}var F=!1;function K(i,c){if(!i||F)return"";F=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(se){var y=se}Reflect.construct(i,[],c)}else{try{c.call()}catch(se){y=se}i.call(c.prototype)}else{try{throw Error()}catch(se){y=se}i()}}catch(se){if(se&&y&&typeof se.stack=="string"){for(var w=se.stack.split(`
`),E=y.stack.split(`
`),M=w.length-1,Q=E.length-1;1<=M&&0<=Q&&w[M]!==E[Q];)Q--;for(;1<=M&&0<=Q;M--,Q--)if(w[M]!==E[Q]){if(M!==1||Q!==1)do if(M--,Q--,0>Q||w[M]!==E[Q]){var Z=`
`+w[M].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=M&&0<=Q);break}}}finally{F=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?Y(i):""}function J(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=K(i.type,!1),i;case 11:return i=K(i.type.render,!1),i;case 1:return i=K(i.type,!0),i;default:return""}}function te(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case C:return"Portal";case I:return"Profiler";case O:return"StrictMode";case W:return"Suspense";case L:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case D:return(i.displayName||"Context")+".Consumer";case H:return(i._context.displayName||"Context")+".Provider";case z:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case q:return c=i.displayName||null,c!==null?c:te(i.type)||"Memo";case $:c=i._payload,i=i._init;try{return te(i(c))}catch{}}return null}function re(i){var c=i.type;switch(i.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=c.render,i=i.displayName||i.name||"",c.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(c);case 8:return c===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function V(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ne(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function de(i){var c=ne(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,c),y=""+i[c];if(!i.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,E=h.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return w.call(this)},set:function(M){y=""+M,E.call(this,M)}}),Object.defineProperty(i,c,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(M){y=""+M},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function ve(i){i._valueTracker||(i._valueTracker=de(i))}function le(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return i&&(y=ne(i)?i.checked?"true":"false":i.value),i=y,i!==h?(c.setValue(i),!0):!1}function ge(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function _e(i,c){var h=c.checked;return R({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function we(i,c){var h=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;h=V(c.value!=null?c.value:h),i._wrapperState={initialChecked:y,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Ce(i,c){c=c.checked,c!=null&&N(i,"checked",c,!1)}function Se(i,c){Ce(i,c);var h=V(c.value),y=c.type;if(h!=null)y==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(y==="submit"||y==="reset"){i.removeAttribute("value");return}c.hasOwnProperty("value")?Oe(i,c.type,h):c.hasOwnProperty("defaultValue")&&Oe(i,c.type,V(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(i.defaultChecked=!!c.defaultChecked)}function Qe(i,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+i._wrapperState.initialValue,h||c===i.value||(i.value=c),i.defaultValue=c}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function Oe(i,c,h){(c!=="number"||ge(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var he=Array.isArray;function Ee(i,c,h,y){if(i=i.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<i.length;h++)w=c.hasOwnProperty("$"+i[h].value),i[h].selected!==w&&(i[h].selected=w),w&&y&&(i[h].defaultSelected=!0)}else{for(h=""+V(h),c=null,w=0;w<i.length;w++){if(i[w].value===h){i[w].selected=!0,y&&(i[w].defaultSelected=!0);return}c!==null||i[w].disabled||(c=i[w])}c!==null&&(c.selected=!0)}}function Ae(i,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return R({},c,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ve(i,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(n(92));if(he(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),h=c}i._wrapperState={initialValue:V(h)}}function lt(i,c){var h=V(c.value),y=V(c.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),c.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),y!=null&&(i.defaultValue=""+y)}function ot(i){var c=i.textContent;c===i._wrapperState.initialValue&&c!==""&&c!==null&&(i.value=c)}function ae(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(i,c){return i==null||i==="http://www.w3.org/1999/xhtml"?ae(c):i==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ke,ze=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,y,w){MSApp.execUnsafeLocalFunction(function(){return i(c,h,y,w)})}:i})(function(i,c){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=c;else{for(ke=ke||document.createElement("div"),ke.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=ke.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;c.firstChild;)i.appendChild(c.firstChild)}});function Le(i,c){if(c){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=c;return}}i.textContent=c}var nt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},At=["Webkit","ms","Moz","O"];Object.keys(nt).forEach(function(i){At.forEach(function(c){c=c+i.charAt(0).toUpperCase()+i.substring(1),nt[c]=nt[i]})});function et(i,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||nt.hasOwnProperty(i)&&nt[i]?(""+c).trim():c+"px"}function yt(i,c){i=i.style;for(var h in c)if(c.hasOwnProperty(h)){var y=h.indexOf("--")===0,w=et(h,c[h],y);h==="float"&&(h="cssFloat"),y?i.setProperty(h,w):i[h]=w}}var fn=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ct(i,c){if(c){if(fn[i]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Rt(i,c){if(i.indexOf("-")===-1)return typeof c.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var St=null;function Cn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Hn=null,hn=null,Tn=null;function Lr(i){if(i=bs(i)){if(typeof Hn!="function")throw Error(n(280));var c=i.stateNode;c&&(c=Ga(c),Hn(i.stateNode,i.type,c))}}function qr(i){hn?Tn?Tn.push(i):Tn=[i]:hn=i}function Fr(){if(hn){var i=hn,c=Tn;if(Tn=hn=null,Lr(i),c)for(i=0;i<c.length;i++)Lr(c[i])}}function xr(i,c){return i(c)}function zr(){}var br=!1;function mn(i,c,h){if(br)return i(c,h);br=!0;try{return xr(i,c,h)}finally{br=!1,(hn!==null||Tn!==null)&&(zr(),Fr())}}function Kt(i,c){var h=i.stateNode;if(h===null)return null;var y=Ga(h);if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(i=i.type,y=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!y;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(n(231,c,typeof h));return h}var pe=!1;if(u)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){pe=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch{pe=!1}function He(i,c,h,y,w,E,M,Q,Z){var se=Array.prototype.slice.call(arguments,3);try{c.apply(h,se)}catch(me){this.onError(me)}}var Ze=!1,wt=null,gn=!1,An=null,yo={onError:function(i){Ze=!0,wt=i}};function vo(i,c,h,y,w,E,M,Q,Z){Ze=!1,wt=null,He.apply(yo,arguments)}function Qo(i,c,h,y,w,E,M,Q,Z){if(vo.apply(this,arguments),Ze){if(Ze){var se=wt;Ze=!1,wt=null}else throw Error(n(198));gn||(gn=!0,An=se)}}function kt(i){var c=i,h=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(h=c.return),i=c.return;while(i)}return c.tag===3?h:null}function Vn(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function xo(i){if(kt(i)!==i)throw Error(n(188))}function Xo(i){var c=i.alternate;if(!c){if(c=kt(i),c===null)throw Error(n(188));return c!==i?null:i}for(var h=i,y=c;;){var w=h.return;if(w===null)break;var E=w.alternate;if(E===null){if(y=w.return,y!==null){h=y;continue}break}if(w.child===E.child){for(E=w.child;E;){if(E===h)return xo(w),i;if(E===y)return xo(w),c;E=E.sibling}throw Error(n(188))}if(h.return!==y.return)h=w,y=E;else{for(var M=!1,Q=w.child;Q;){if(Q===h){M=!0,h=w,y=E;break}if(Q===y){M=!0,y=w,h=E;break}Q=Q.sibling}if(!M){for(Q=E.child;Q;){if(Q===h){M=!0,h=E,y=w;break}if(Q===y){M=!0,y=E,h=w;break}Q=Q.sibling}if(!M)throw Error(n(189))}}if(h.alternate!==y)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?i:c}function Jo(i){return i=Xo(i),i!==null?Zo(i):null}function Zo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var c=Zo(i);if(c!==null)return c;i=i.sibling}return null}var ei=t.unstable_scheduleCallback,wr=t.unstable_cancelCallback,ts=t.unstable_shouldYield,ti=t.unstable_requestPaint,ut=t.unstable_now,rt=t.unstable_getCurrentPriorityLevel,Nt=t.unstable_ImmediatePriority,Gt=t.unstable_UserBlockingPriority,Yt=t.unstable_NormalPriority,bo=t.unstable_LowPriority,Aa=t.unstable_IdlePriority,wo=null,Pn=null;function su(i){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(wo,i,void 0,(i.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:cu,au=Math.log,lu=Math.LN2;function cu(i){return i>>>=0,i===0?32:31-(au(i)/lu|0)|0}var ni=64,ri=4194304;function Br(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function oi(i,c){var h=i.pendingLanes;if(h===0)return 0;var y=0,w=i.suspendedLanes,E=i.pingedLanes,M=h&268435455;if(M!==0){var Q=M&~w;Q!==0?y=Br(Q):(E&=M,E!==0&&(y=Br(E)))}else M=h&~w,M!==0?y=Br(M):E!==0&&(y=Br(E));if(y===0)return 0;if(c!==0&&c!==y&&(c&w)===0&&(w=y&-y,E=c&-c,w>=E||w===16&&(E&4194240)!==0))return c;if((y&4)!==0&&(y|=h&16),c=i.entangledLanes,c!==0)for(i=i.entanglements,c&=y;0<c;)h=31-yn(c),w=1<<h,y|=i[h],c&=~w;return y}function Pa(i,c){switch(i){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uu(i,c){for(var h=i.suspendedLanes,y=i.pingedLanes,w=i.expirationTimes,E=i.pendingLanes;0<E;){var M=31-yn(E),Q=1<<M,Z=w[M];Z===-1?((Q&h)===0||(Q&y)!==0)&&(w[M]=Pa(Q,c)):Z<=c&&(i.expiredLanes|=Q),E&=~Q}}function ns(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ii(){var i=ni;return ni<<=1,(ni&4194240)===0&&(ni=64),i}function rs(i){for(var c=[],h=0;31>h;h++)c.push(i);return c}function _o(i,c,h){i.pendingLanes|=c,c!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,c=31-yn(c),i[c]=h}function Ia(i,c){var h=i.pendingLanes&~c;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=c,i.mutableReadLanes&=c,i.entangledLanes&=c,c=i.entanglements;var y=i.eventTimes;for(i=i.expirationTimes;0<h;){var w=31-yn(h),E=1<<w;c[w]=0,y[w]=-1,i[w]=-1,h&=~E}}function du(i,c){var h=i.entangledLanes|=c;for(i=i.entanglements;h;){var y=31-yn(h),w=1<<y;w&c|i[y]&c&&(i[y]|=c),h&=~w}}var tt=0;function Ex(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Cx,pu,Tx,Ax,Px,fu=!1,Ra=[],$r=null,Hr=null,Vr=null,os=new Map,is=new Map,Ur=[],T2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ix(i,c){switch(i){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":os.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(c.pointerId)}}function ss(i,c,h,y,w,E){return i===null||i.nativeEvent!==E?(i={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:E,targetContainers:[w]},c!==null&&(c=bs(c),c!==null&&pu(c)),i):(i.eventSystemFlags|=y,c=i.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),i)}function A2(i,c,h,y,w){switch(c){case"focusin":return $r=ss($r,i,c,h,y,w),!0;case"dragenter":return Hr=ss(Hr,i,c,h,y,w),!0;case"mouseover":return Vr=ss(Vr,i,c,h,y,w),!0;case"pointerover":var E=w.pointerId;return os.set(E,ss(os.get(E)||null,i,c,h,y,w)),!0;case"gotpointercapture":return E=w.pointerId,is.set(E,ss(is.get(E)||null,i,c,h,y,w)),!0}return!1}function Rx(i){var c=So(i.target);if(c!==null){var h=kt(c);if(h!==null){if(c=h.tag,c===13){if(c=Vn(h),c!==null){i.blockedOn=c,Px(i.priority,function(){Tx(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Oa(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var h=mu(i.domEventName,i.eventSystemFlags,c[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var y=new h.constructor(h.type,h);St=y,h.target.dispatchEvent(y),St=null}else return c=bs(h),c!==null&&pu(c),i.blockedOn=h,!1;c.shift()}return!0}function Ox(i,c,h){Oa(i)&&h.delete(c)}function P2(){fu=!1,$r!==null&&Oa($r)&&($r=null),Hr!==null&&Oa(Hr)&&(Hr=null),Vr!==null&&Oa(Vr)&&(Vr=null),os.forEach(Ox),is.forEach(Ox)}function as(i,c){i.blockedOn===c&&(i.blockedOn=null,fu||(fu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,P2)))}function ls(i){function c(w){return as(w,i)}if(0<Ra.length){as(Ra[0],i);for(var h=1;h<Ra.length;h++){var y=Ra[h];y.blockedOn===i&&(y.blockedOn=null)}}for($r!==null&&as($r,i),Hr!==null&&as(Hr,i),Vr!==null&&as(Vr,i),os.forEach(c),is.forEach(c),h=0;h<Ur.length;h++)y=Ur[h],y.blockedOn===i&&(y.blockedOn=null);for(;0<Ur.length&&(h=Ur[0],h.blockedOn===null);)Rx(h),h.blockedOn===null&&Ur.shift()}var si=T.ReactCurrentBatchConfig,Ma=!0;function I2(i,c,h,y){var w=tt,E=si.transition;si.transition=null;try{tt=1,hu(i,c,h,y)}finally{tt=w,si.transition=E}}function R2(i,c,h,y){var w=tt,E=si.transition;si.transition=null;try{tt=4,hu(i,c,h,y)}finally{tt=w,si.transition=E}}function hu(i,c,h,y){if(Ma){var w=mu(i,c,h,y);if(w===null)Iu(i,c,y,Da,h),Ix(i,y);else if(A2(w,i,c,h,y))y.stopPropagation();else if(Ix(i,y),c&4&&-1<T2.indexOf(i)){for(;w!==null;){var E=bs(w);if(E!==null&&Cx(E),E=mu(i,c,h,y),E===null&&Iu(i,c,y,Da,h),E===w)break;w=E}w!==null&&y.stopPropagation()}else Iu(i,c,y,null,h)}}var Da=null;function mu(i,c,h,y){if(Da=null,i=Cn(y),i=So(i),i!==null)if(c=kt(i),c===null)i=null;else if(h=c.tag,h===13){if(i=Vn(c),i!==null)return i;i=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null);return Da=i,null}function Mx(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rt()){case Nt:return 1;case Gt:return 4;case Yt:case bo:return 16;case Aa:return 536870912;default:return 16}default:return 16}}var Wr=null,gu=null,La=null;function Dx(){if(La)return La;var i,c=gu,h=c.length,y,w="value"in Wr?Wr.value:Wr.textContent,E=w.length;for(i=0;i<h&&c[i]===w[i];i++);var M=h-i;for(y=1;y<=M&&c[h-y]===w[E-y];y++);return La=w.slice(i,1<y?1-y:void 0)}function qa(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function Fa(){return!0}function Lx(){return!1}function vn(i){function c(h,y,w,E,M){this._reactName=h,this._targetInst=w,this.type=y,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var Q in i)i.hasOwnProperty(Q)&&(h=i[Q],this[Q]=h?h(E):E[Q]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Fa:Lx,this.isPropagationStopped=Lx,this}return R(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Fa)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Fa)},persist:function(){},isPersistent:Fa}),c}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yu=vn(ai),cs=R({},ai,{view:0,detail:0}),O2=vn(cs),vu,xu,us,za=R({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==us&&(us&&i.type==="mousemove"?(vu=i.screenX-us.screenX,xu=i.screenY-us.screenY):xu=vu=0,us=i),vu)},movementY:function(i){return"movementY"in i?i.movementY:xu}}),qx=vn(za),M2=R({},za,{dataTransfer:0}),D2=vn(M2),L2=R({},cs,{relatedTarget:0}),bu=vn(L2),q2=R({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),F2=vn(q2),z2=R({},ai,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),B2=vn(z2),$2=R({},ai,{data:0}),Fx=vn($2),H2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function W2(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=U2[i])?!!c[i]:!1}function wu(){return W2}var K2=R({},cs,{key:function(i){if(i.key){var c=H2[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=qa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?V2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wu,charCode:function(i){return i.type==="keypress"?qa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?qa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),G2=vn(K2),Y2=R({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zx=vn(Y2),Q2=R({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wu}),X2=vn(Q2),J2=R({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z2=vn(J2),eI=R({},za,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tI=vn(eI),nI=[9,13,27,32],_u=u&&"CompositionEvent"in window,ds=null;u&&"documentMode"in document&&(ds=document.documentMode);var rI=u&&"TextEvent"in window&&!ds,Bx=u&&(!_u||ds&&8<ds&&11>=ds),$x=" ",Hx=!1;function Vx(i,c){switch(i){case"keyup":return nI.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ux(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var li=!1;function oI(i,c){switch(i){case"compositionend":return Ux(c);case"keypress":return c.which!==32?null:(Hx=!0,$x);case"textInput":return i=c.data,i===$x&&Hx?null:i;default:return null}}function iI(i,c){if(li)return i==="compositionend"||!_u&&Vx(i,c)?(i=Dx(),La=gu=Wr=null,li=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Bx&&c.locale!=="ko"?null:c.data;default:return null}}var sI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wx(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!sI[i.type]:c==="textarea"}function Kx(i,c,h,y){qr(y),c=Ua(c,"onChange"),0<c.length&&(h=new yu("onChange","change",null,h,y),i.push({event:h,listeners:c}))}var ps=null,fs=null;function aI(i){db(i,0)}function Ba(i){var c=fi(i);if(le(c))return i}function lI(i,c){if(i==="change")return c}var Gx=!1;if(u){var Su;if(u){var ku="oninput"in document;if(!ku){var Yx=document.createElement("div");Yx.setAttribute("oninput","return;"),ku=typeof Yx.oninput=="function"}Su=ku}else Su=!1;Gx=Su&&(!document.documentMode||9<document.documentMode)}function Qx(){ps&&(ps.detachEvent("onpropertychange",Xx),fs=ps=null)}function Xx(i){if(i.propertyName==="value"&&Ba(fs)){var c=[];Kx(c,fs,i,Cn(i)),mn(aI,c)}}function cI(i,c,h){i==="focusin"?(Qx(),ps=c,fs=h,ps.attachEvent("onpropertychange",Xx)):i==="focusout"&&Qx()}function uI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ba(fs)}function dI(i,c){if(i==="click")return Ba(c)}function pI(i,c){if(i==="input"||i==="change")return Ba(c)}function fI(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var Un=typeof Object.is=="function"?Object.is:fI;function hs(i,c){if(Un(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var h=Object.keys(i),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var w=h[y];if(!d.call(c,w)||!Un(i[w],c[w]))return!1}return!0}function Jx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Zx(i,c){var h=Jx(i);i=0;for(var y;h;){if(h.nodeType===3){if(y=i+h.textContent.length,i<=c&&y>=c)return{node:h,offset:c-i};i=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Jx(h)}}function eb(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?eb(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function tb(){for(var i=window,c=ge();c instanceof i.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)i=c.contentWindow;else break;c=ge(i.document)}return c}function Nu(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}function hI(i){var c=tb(),h=i.focusedElem,y=i.selectionRange;if(c!==h&&h&&h.ownerDocument&&eb(h.ownerDocument.documentElement,h)){if(y!==null&&Nu(h)){if(c=y.start,i=y.end,i===void 0&&(i=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(i,h.value.length);else if(i=(c=h.ownerDocument||document)&&c.defaultView||window,i.getSelection){i=i.getSelection();var w=h.textContent.length,E=Math.min(y.start,w);y=y.end===void 0?E:Math.min(y.end,w),!i.extend&&E>y&&(w=y,y=E,E=w),w=Zx(h,E);var M=Zx(h,y);w&&M&&(i.rangeCount!==1||i.anchorNode!==w.node||i.anchorOffset!==w.offset||i.focusNode!==M.node||i.focusOffset!==M.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),i.removeAllRanges(),E>y?(i.addRange(c),i.extend(M.node,M.offset)):(c.setEnd(M.node,M.offset),i.addRange(c)))}}for(c=[],i=h;i=i.parentNode;)i.nodeType===1&&c.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)i=c[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var mI=u&&"documentMode"in document&&11>=document.documentMode,ci=null,ju=null,ms=null,Eu=!1;function nb(i,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Eu||ci==null||ci!==ge(y)||(y=ci,"selectionStart"in y&&Nu(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),ms&&hs(ms,y)||(ms=y,y=Ua(ju,"onSelect"),0<y.length&&(c=new yu("onSelect","select",null,c,h),i.push({event:c,listeners:y}),c.target=ci)))}function $a(i,c){var h={};return h[i.toLowerCase()]=c.toLowerCase(),h["Webkit"+i]="webkit"+c,h["Moz"+i]="moz"+c,h}var ui={animationend:$a("Animation","AnimationEnd"),animationiteration:$a("Animation","AnimationIteration"),animationstart:$a("Animation","AnimationStart"),transitionend:$a("Transition","TransitionEnd")},Cu={},rb={};u&&(rb=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function Ha(i){if(Cu[i])return Cu[i];if(!ui[i])return i;var c=ui[i],h;for(h in c)if(c.hasOwnProperty(h)&&h in rb)return Cu[i]=c[h];return i}var ob=Ha("animationend"),ib=Ha("animationiteration"),sb=Ha("animationstart"),ab=Ha("transitionend"),lb=new Map,cb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(i,c){lb.set(i,c),a(c,[i])}for(var Tu=0;Tu<cb.length;Tu++){var Au=cb[Tu],gI=Au.toLowerCase(),yI=Au[0].toUpperCase()+Au.slice(1);Kr(gI,"on"+yI)}Kr(ob,"onAnimationEnd"),Kr(ib,"onAnimationIteration"),Kr(sb,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(ab,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vI=new Set("cancel close invalid load scroll toggle".split(" ").concat(gs));function ub(i,c,h){var y=i.type||"unknown-event";i.currentTarget=h,Qo(y,c,void 0,i),i.currentTarget=null}function db(i,c){c=(c&4)!==0;for(var h=0;h<i.length;h++){var y=i[h],w=y.event;y=y.listeners;e:{var E=void 0;if(c)for(var M=y.length-1;0<=M;M--){var Q=y[M],Z=Q.instance,se=Q.currentTarget;if(Q=Q.listener,Z!==E&&w.isPropagationStopped())break e;ub(w,Q,se),E=Z}else for(M=0;M<y.length;M++){if(Q=y[M],Z=Q.instance,se=Q.currentTarget,Q=Q.listener,Z!==E&&w.isPropagationStopped())break e;ub(w,Q,se),E=Z}}}if(gn)throw i=An,gn=!1,An=null,i}function dt(i,c){var h=c[qu];h===void 0&&(h=c[qu]=new Set);var y=i+"__bubble";h.has(y)||(pb(c,i,2,!1),h.add(y))}function Pu(i,c,h){var y=0;c&&(y|=4),pb(h,i,y,c)}var Va="_reactListening"+Math.random().toString(36).slice(2);function ys(i){if(!i[Va]){i[Va]=!0,r.forEach(function(h){h!=="selectionchange"&&(vI.has(h)||Pu(h,!1,i),Pu(h,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[Va]||(c[Va]=!0,Pu("selectionchange",!1,c))}}function pb(i,c,h,y){switch(Mx(c)){case 1:var w=I2;break;case 4:w=R2;break;default:w=hu}h=w.bind(null,c,h,i),w=void 0,!pe||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),y?w!==void 0?i.addEventListener(c,h,{capture:!0,passive:w}):i.addEventListener(c,h,!0):w!==void 0?i.addEventListener(c,h,{passive:w}):i.addEventListener(c,h,!1)}function Iu(i,c,h,y,w){var E=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var M=y.tag;if(M===3||M===4){var Q=y.stateNode.containerInfo;if(Q===w||Q.nodeType===8&&Q.parentNode===w)break;if(M===4)for(M=y.return;M!==null;){var Z=M.tag;if((Z===3||Z===4)&&(Z=M.stateNode.containerInfo,Z===w||Z.nodeType===8&&Z.parentNode===w))return;M=M.return}for(;Q!==null;){if(M=So(Q),M===null)return;if(Z=M.tag,Z===5||Z===6){y=E=M;continue e}Q=Q.parentNode}}y=y.return}mn(function(){var se=E,me=Cn(h),ye=[];e:{var fe=lb.get(i);if(fe!==void 0){var Ne=yu,Pe=i;switch(i){case"keypress":if(qa(h)===0)break e;case"keydown":case"keyup":Ne=G2;break;case"focusin":Pe="focus",Ne=bu;break;case"focusout":Pe="blur",Ne=bu;break;case"beforeblur":case"afterblur":Ne=bu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=qx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=D2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=X2;break;case ob:case ib:case sb:Ne=F2;break;case ab:Ne=Z2;break;case"scroll":Ne=O2;break;case"wheel":Ne=tI;break;case"copy":case"cut":case"paste":Ne=B2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=zx}var Ie=(c&4)!==0,_t=!Ie&&i==="scroll",oe=Ie?fe!==null?fe+"Capture":null:fe;Ie=[];for(var ee=se,ie;ee!==null;){ie=ee;var be=ie.stateNode;if(ie.tag===5&&be!==null&&(ie=be,oe!==null&&(be=Kt(ee,oe),be!=null&&Ie.push(vs(ee,be,ie)))),_t)break;ee=ee.return}0<Ie.length&&(fe=new Ne(fe,Pe,null,h,me),ye.push({event:fe,listeners:Ie}))}}if((c&7)===0){e:{if(fe=i==="mouseover"||i==="pointerover",Ne=i==="mouseout"||i==="pointerout",fe&&h!==St&&(Pe=h.relatedTarget||h.fromElement)&&(So(Pe)||Pe[_r]))break e;if((Ne||fe)&&(fe=me.window===me?me:(fe=me.ownerDocument)?fe.defaultView||fe.parentWindow:window,Ne?(Pe=h.relatedTarget||h.toElement,Ne=se,Pe=Pe?So(Pe):null,Pe!==null&&(_t=kt(Pe),Pe!==_t||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(Ne=null,Pe=se),Ne!==Pe)){if(Ie=qx,be="onMouseLeave",oe="onMouseEnter",ee="mouse",(i==="pointerout"||i==="pointerover")&&(Ie=zx,be="onPointerLeave",oe="onPointerEnter",ee="pointer"),_t=Ne==null?fe:fi(Ne),ie=Pe==null?fe:fi(Pe),fe=new Ie(be,ee+"leave",Ne,h,me),fe.target=_t,fe.relatedTarget=ie,be=null,So(me)===se&&(Ie=new Ie(oe,ee+"enter",Pe,h,me),Ie.target=ie,Ie.relatedTarget=_t,be=Ie),_t=be,Ne&&Pe)t:{for(Ie=Ne,oe=Pe,ee=0,ie=Ie;ie;ie=di(ie))ee++;for(ie=0,be=oe;be;be=di(be))ie++;for(;0<ee-ie;)Ie=di(Ie),ee--;for(;0<ie-ee;)oe=di(oe),ie--;for(;ee--;){if(Ie===oe||oe!==null&&Ie===oe.alternate)break t;Ie=di(Ie),oe=di(oe)}Ie=null}else Ie=null;Ne!==null&&fb(ye,fe,Ne,Ie,!1),Pe!==null&&_t!==null&&fb(ye,_t,Pe,Ie,!0)}}e:{if(fe=se?fi(se):window,Ne=fe.nodeName&&fe.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&fe.type==="file")var Re=lI;else if(Wx(fe))if(Gx)Re=pI;else{Re=uI;var qe=cI}else(Ne=fe.nodeName)&&Ne.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Re=dI);if(Re&&(Re=Re(i,se))){Kx(ye,Re,h,me);break e}qe&&qe(i,fe,se),i==="focusout"&&(qe=fe._wrapperState)&&qe.controlled&&fe.type==="number"&&Oe(fe,"number",fe.value)}switch(qe=se?fi(se):window,i){case"focusin":(Wx(qe)||qe.contentEditable==="true")&&(ci=qe,ju=se,ms=null);break;case"focusout":ms=ju=ci=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,nb(ye,h,me);break;case"selectionchange":if(mI)break;case"keydown":case"keyup":nb(ye,h,me)}var Fe;if(_u)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else li?Vx(i,h)&&(Be="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(Be="onCompositionStart");Be&&(Bx&&h.locale!=="ko"&&(li||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&li&&(Fe=Dx()):(Wr=me,gu="value"in Wr?Wr.value:Wr.textContent,li=!0)),qe=Ua(se,Be),0<qe.length&&(Be=new Fx(Be,i,null,h,me),ye.push({event:Be,listeners:qe}),Fe?Be.data=Fe:(Fe=Ux(h),Fe!==null&&(Be.data=Fe)))),(Fe=rI?oI(i,h):iI(i,h))&&(se=Ua(se,"onBeforeInput"),0<se.length&&(me=new Fx("onBeforeInput","beforeinput",null,h,me),ye.push({event:me,listeners:se}),me.data=Fe))}db(ye,c)})}function vs(i,c,h){return{instance:i,listener:c,currentTarget:h}}function Ua(i,c){for(var h=c+"Capture",y=[];i!==null;){var w=i,E=w.stateNode;w.tag===5&&E!==null&&(w=E,E=Kt(i,h),E!=null&&y.unshift(vs(i,E,w)),E=Kt(i,c),E!=null&&y.push(vs(i,E,w))),i=i.return}return y}function di(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function fb(i,c,h,y,w){for(var E=c._reactName,M=[];h!==null&&h!==y;){var Q=h,Z=Q.alternate,se=Q.stateNode;if(Z!==null&&Z===y)break;Q.tag===5&&se!==null&&(Q=se,w?(Z=Kt(h,E),Z!=null&&M.unshift(vs(h,Z,Q))):w||(Z=Kt(h,E),Z!=null&&M.push(vs(h,Z,Q)))),h=h.return}M.length!==0&&i.push({event:c,listeners:M})}var xI=/\r\n?/g,bI=/\u0000|\uFFFD/g;function hb(i){return(typeof i=="string"?i:""+i).replace(xI,`
`).replace(bI,"")}function Wa(i,c,h){if(c=hb(c),hb(i)!==c&&h)throw Error(n(425))}function Ka(){}var Ru=null,Ou=null;function Mu(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Du=typeof setTimeout=="function"?setTimeout:void 0,wI=typeof clearTimeout=="function"?clearTimeout:void 0,mb=typeof Promise=="function"?Promise:void 0,_I=typeof queueMicrotask=="function"?queueMicrotask:typeof mb<"u"?function(i){return mb.resolve(null).then(i).catch(SI)}:Du;function SI(i){setTimeout(function(){throw i})}function Lu(i,c){var h=c,y=0;do{var w=h.nextSibling;if(i.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"){if(y===0){i.removeChild(w),ls(c);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=w}while(h);ls(c)}function Gr(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return i}function gb(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return i;c--}else h==="/$"&&c++}i=i.previousSibling}return null}var pi=Math.random().toString(36).slice(2),ar="__reactFiber$"+pi,xs="__reactProps$"+pi,_r="__reactContainer$"+pi,qu="__reactEvents$"+pi,kI="__reactListeners$"+pi,NI="__reactHandles$"+pi;function So(i){var c=i[ar];if(c)return c;for(var h=i.parentNode;h;){if(c=h[_r]||h[ar]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(i=gb(i);i!==null;){if(h=i[ar])return h;i=gb(i)}return c}i=h,h=i.parentNode}return null}function bs(i){return i=i[ar]||i[_r],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function fi(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Ga(i){return i[xs]||null}var Fu=[],hi=-1;function Yr(i){return{current:i}}function pt(i){0>hi||(i.current=Fu[hi],Fu[hi]=null,hi--)}function it(i,c){hi++,Fu[hi]=i.current,i.current=c}var Qr={},Bt=Yr(Qr),Zt=Yr(!1),ko=Qr;function mi(i,c){var h=i.type.contextTypes;if(!h)return Qr;var y=i.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var w={},E;for(E in h)w[E]=c[E];return y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=c,i.__reactInternalMemoizedMaskedChildContext=w),w}function en(i){return i=i.childContextTypes,i!=null}function Ya(){pt(Zt),pt(Bt)}function yb(i,c,h){if(Bt.current!==Qr)throw Error(n(168));it(Bt,c),it(Zt,h)}function vb(i,c,h){var y=i.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var w in y)if(!(w in c))throw Error(n(108,re(i)||"Unknown",w));return R({},h,y)}function Qa(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Qr,ko=Bt.current,it(Bt,i),it(Zt,Zt.current),!0}function xb(i,c,h){var y=i.stateNode;if(!y)throw Error(n(169));h?(i=vb(i,c,ko),y.__reactInternalMemoizedMergedChildContext=i,pt(Zt),pt(Bt),it(Bt,i)):pt(Zt),it(Zt,h)}var Sr=null,Xa=!1,zu=!1;function bb(i){Sr===null?Sr=[i]:Sr.push(i)}function jI(i){Xa=!0,bb(i)}function Xr(){if(!zu&&Sr!==null){zu=!0;var i=0,c=tt;try{var h=Sr;for(tt=1;i<h.length;i++){var y=h[i];do y=y(!0);while(y!==null)}Sr=null,Xa=!1}catch(w){throw Sr!==null&&(Sr=Sr.slice(i+1)),ei(Nt,Xr),w}finally{tt=c,zu=!1}}return null}var gi=[],yi=0,Ja=null,Za=0,In=[],Rn=0,No=null,kr=1,Nr="";function jo(i,c){gi[yi++]=Za,gi[yi++]=Ja,Ja=i,Za=c}function wb(i,c,h){In[Rn++]=kr,In[Rn++]=Nr,In[Rn++]=No,No=i;var y=kr;i=Nr;var w=32-yn(y)-1;y&=~(1<<w),h+=1;var E=32-yn(c)+w;if(30<E){var M=w-w%5;E=(y&(1<<M)-1).toString(32),y>>=M,w-=M,kr=1<<32-yn(c)+w|h<<w|y,Nr=E+i}else kr=1<<E|h<<w|y,Nr=i}function Bu(i){i.return!==null&&(jo(i,1),wb(i,1,0))}function $u(i){for(;i===Ja;)Ja=gi[--yi],gi[yi]=null,Za=gi[--yi],gi[yi]=null;for(;i===No;)No=In[--Rn],In[Rn]=null,Nr=In[--Rn],In[Rn]=null,kr=In[--Rn],In[Rn]=null}var xn=null,bn=null,ht=!1,Wn=null;function _b(i,c){var h=Ln(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=i,c=i.deletions,c===null?(i.deletions=[h],i.flags|=16):c.push(h)}function Sb(i,c){switch(i.tag){case 5:var h=i.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(i.stateNode=c,xn=i,bn=Gr(c.firstChild),!0):!1;case 6:return c=i.pendingProps===""||c.nodeType!==3?null:c,c!==null?(i.stateNode=c,xn=i,bn=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=No!==null?{id:kr,overflow:Nr}:null,i.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Ln(18,null,null,0),h.stateNode=c,h.return=i,i.child=h,xn=i,bn=null,!0):!1;default:return!1}}function Hu(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Vu(i){if(ht){var c=bn;if(c){var h=c;if(!Sb(i,c)){if(Hu(i))throw Error(n(418));c=Gr(h.nextSibling);var y=xn;c&&Sb(i,c)?_b(y,h):(i.flags=i.flags&-4097|2,ht=!1,xn=i)}}else{if(Hu(i))throw Error(n(418));i.flags=i.flags&-4097|2,ht=!1,xn=i}}}function kb(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xn=i}function el(i){if(i!==xn)return!1;if(!ht)return kb(i),ht=!0,!1;var c;if((c=i.tag!==3)&&!(c=i.tag!==5)&&(c=i.type,c=c!=="head"&&c!=="body"&&!Mu(i.type,i.memoizedProps)),c&&(c=bn)){if(Hu(i))throw Nb(),Error(n(418));for(;c;)_b(i,c),c=Gr(c.nextSibling)}if(kb(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(c===0){bn=Gr(i.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}i=i.nextSibling}bn=null}}else bn=xn?Gr(i.stateNode.nextSibling):null;return!0}function Nb(){for(var i=bn;i;)i=Gr(i.nextSibling)}function vi(){bn=xn=null,ht=!1}function Uu(i){Wn===null?Wn=[i]:Wn.push(i)}var EI=T.ReactCurrentBatchConfig;function ws(i,c,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var y=h.stateNode}if(!y)throw Error(n(147,i));var w=y,E=""+i;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===E?c.ref:(c=function(M){var Q=w.refs;M===null?delete Q[E]:Q[E]=M},c._stringRef=E,c)}if(typeof i!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,i))}return i}function tl(i,c){throw i=Object.prototype.toString.call(c),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i))}function jb(i){var c=i._init;return c(i._payload)}function Eb(i){function c(oe,ee){if(i){var ie=oe.deletions;ie===null?(oe.deletions=[ee],oe.flags|=16):ie.push(ee)}}function h(oe,ee){if(!i)return null;for(;ee!==null;)c(oe,ee),ee=ee.sibling;return null}function y(oe,ee){for(oe=new Map;ee!==null;)ee.key!==null?oe.set(ee.key,ee):oe.set(ee.index,ee),ee=ee.sibling;return oe}function w(oe,ee){return oe=io(oe,ee),oe.index=0,oe.sibling=null,oe}function E(oe,ee,ie){return oe.index=ie,i?(ie=oe.alternate,ie!==null?(ie=ie.index,ie<ee?(oe.flags|=2,ee):ie):(oe.flags|=2,ee)):(oe.flags|=1048576,ee)}function M(oe){return i&&oe.alternate===null&&(oe.flags|=2),oe}function Q(oe,ee,ie,be){return ee===null||ee.tag!==6?(ee=Dd(ie,oe.mode,be),ee.return=oe,ee):(ee=w(ee,ie),ee.return=oe,ee)}function Z(oe,ee,ie,be){var Re=ie.type;return Re===P?me(oe,ee,ie.props.children,be,ie.key):ee!==null&&(ee.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===$&&jb(Re)===ee.type)?(be=w(ee,ie.props),be.ref=ws(oe,ee,ie),be.return=oe,be):(be=Nl(ie.type,ie.key,ie.props,null,oe.mode,be),be.ref=ws(oe,ee,ie),be.return=oe,be)}function se(oe,ee,ie,be){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ie.containerInfo||ee.stateNode.implementation!==ie.implementation?(ee=Ld(ie,oe.mode,be),ee.return=oe,ee):(ee=w(ee,ie.children||[]),ee.return=oe,ee)}function me(oe,ee,ie,be,Re){return ee===null||ee.tag!==7?(ee=Oo(ie,oe.mode,be,Re),ee.return=oe,ee):(ee=w(ee,ie),ee.return=oe,ee)}function ye(oe,ee,ie){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Dd(""+ee,oe.mode,ie),ee.return=oe,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return ie=Nl(ee.type,ee.key,ee.props,null,oe.mode,ie),ie.ref=ws(oe,null,ee),ie.return=oe,ie;case C:return ee=Ld(ee,oe.mode,ie),ee.return=oe,ee;case $:var be=ee._init;return ye(oe,be(ee._payload),ie)}if(he(ee)||X(ee))return ee=Oo(ee,oe.mode,ie,null),ee.return=oe,ee;tl(oe,ee)}return null}function fe(oe,ee,ie,be){var Re=ee!==null?ee.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return Re!==null?null:Q(oe,ee,""+ie,be);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case A:return ie.key===Re?Z(oe,ee,ie,be):null;case C:return ie.key===Re?se(oe,ee,ie,be):null;case $:return Re=ie._init,fe(oe,ee,Re(ie._payload),be)}if(he(ie)||X(ie))return Re!==null?null:me(oe,ee,ie,be,null);tl(oe,ie)}return null}function Ne(oe,ee,ie,be,Re){if(typeof be=="string"&&be!==""||typeof be=="number")return oe=oe.get(ie)||null,Q(ee,oe,""+be,Re);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case A:return oe=oe.get(be.key===null?ie:be.key)||null,Z(ee,oe,be,Re);case C:return oe=oe.get(be.key===null?ie:be.key)||null,se(ee,oe,be,Re);case $:var qe=be._init;return Ne(oe,ee,ie,qe(be._payload),Re)}if(he(be)||X(be))return oe=oe.get(ie)||null,me(ee,oe,be,Re,null);tl(ee,be)}return null}function Pe(oe,ee,ie,be){for(var Re=null,qe=null,Fe=ee,Be=ee=0,Dt=null;Fe!==null&&Be<ie.length;Be++){Fe.index>Be?(Dt=Fe,Fe=null):Dt=Fe.sibling;var Xe=fe(oe,Fe,ie[Be],be);if(Xe===null){Fe===null&&(Fe=Dt);break}i&&Fe&&Xe.alternate===null&&c(oe,Fe),ee=E(Xe,ee,Be),qe===null?Re=Xe:qe.sibling=Xe,qe=Xe,Fe=Dt}if(Be===ie.length)return h(oe,Fe),ht&&jo(oe,Be),Re;if(Fe===null){for(;Be<ie.length;Be++)Fe=ye(oe,ie[Be],be),Fe!==null&&(ee=E(Fe,ee,Be),qe===null?Re=Fe:qe.sibling=Fe,qe=Fe);return ht&&jo(oe,Be),Re}for(Fe=y(oe,Fe);Be<ie.length;Be++)Dt=Ne(Fe,oe,Be,ie[Be],be),Dt!==null&&(i&&Dt.alternate!==null&&Fe.delete(Dt.key===null?Be:Dt.key),ee=E(Dt,ee,Be),qe===null?Re=Dt:qe.sibling=Dt,qe=Dt);return i&&Fe.forEach(function(so){return c(oe,so)}),ht&&jo(oe,Be),Re}function Ie(oe,ee,ie,be){var Re=X(ie);if(typeof Re!="function")throw Error(n(150));if(ie=Re.call(ie),ie==null)throw Error(n(151));for(var qe=Re=null,Fe=ee,Be=ee=0,Dt=null,Xe=ie.next();Fe!==null&&!Xe.done;Be++,Xe=ie.next()){Fe.index>Be?(Dt=Fe,Fe=null):Dt=Fe.sibling;var so=fe(oe,Fe,Xe.value,be);if(so===null){Fe===null&&(Fe=Dt);break}i&&Fe&&so.alternate===null&&c(oe,Fe),ee=E(so,ee,Be),qe===null?Re=so:qe.sibling=so,qe=so,Fe=Dt}if(Xe.done)return h(oe,Fe),ht&&jo(oe,Be),Re;if(Fe===null){for(;!Xe.done;Be++,Xe=ie.next())Xe=ye(oe,Xe.value,be),Xe!==null&&(ee=E(Xe,ee,Be),qe===null?Re=Xe:qe.sibling=Xe,qe=Xe);return ht&&jo(oe,Be),Re}for(Fe=y(oe,Fe);!Xe.done;Be++,Xe=ie.next())Xe=Ne(Fe,oe,Be,Xe.value,be),Xe!==null&&(i&&Xe.alternate!==null&&Fe.delete(Xe.key===null?Be:Xe.key),ee=E(Xe,ee,Be),qe===null?Re=Xe:qe.sibling=Xe,qe=Xe);return i&&Fe.forEach(function(sR){return c(oe,sR)}),ht&&jo(oe,Be),Re}function _t(oe,ee,ie,be){if(typeof ie=="object"&&ie!==null&&ie.type===P&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case A:e:{for(var Re=ie.key,qe=ee;qe!==null;){if(qe.key===Re){if(Re=ie.type,Re===P){if(qe.tag===7){h(oe,qe.sibling),ee=w(qe,ie.props.children),ee.return=oe,oe=ee;break e}}else if(qe.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===$&&jb(Re)===qe.type){h(oe,qe.sibling),ee=w(qe,ie.props),ee.ref=ws(oe,qe,ie),ee.return=oe,oe=ee;break e}h(oe,qe);break}else c(oe,qe);qe=qe.sibling}ie.type===P?(ee=Oo(ie.props.children,oe.mode,be,ie.key),ee.return=oe,oe=ee):(be=Nl(ie.type,ie.key,ie.props,null,oe.mode,be),be.ref=ws(oe,ee,ie),be.return=oe,oe=be)}return M(oe);case C:e:{for(qe=ie.key;ee!==null;){if(ee.key===qe)if(ee.tag===4&&ee.stateNode.containerInfo===ie.containerInfo&&ee.stateNode.implementation===ie.implementation){h(oe,ee.sibling),ee=w(ee,ie.children||[]),ee.return=oe,oe=ee;break e}else{h(oe,ee);break}else c(oe,ee);ee=ee.sibling}ee=Ld(ie,oe.mode,be),ee.return=oe,oe=ee}return M(oe);case $:return qe=ie._init,_t(oe,ee,qe(ie._payload),be)}if(he(ie))return Pe(oe,ee,ie,be);if(X(ie))return Ie(oe,ee,ie,be);tl(oe,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,ee!==null&&ee.tag===6?(h(oe,ee.sibling),ee=w(ee,ie),ee.return=oe,oe=ee):(h(oe,ee),ee=Dd(ie,oe.mode,be),ee.return=oe,oe=ee),M(oe)):h(oe,ee)}return _t}var xi=Eb(!0),Cb=Eb(!1),nl=Yr(null),rl=null,bi=null,Wu=null;function Ku(){Wu=bi=rl=null}function Gu(i){var c=nl.current;pt(nl),i._currentValue=c}function Yu(i,c,h){for(;i!==null;){var y=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),i===h)break;i=i.return}}function wi(i,c){rl=i,Wu=bi=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&c)!==0&&(tn=!0),i.firstContext=null)}function On(i){var c=i._currentValue;if(Wu!==i)if(i={context:i,memoizedValue:c,next:null},bi===null){if(rl===null)throw Error(n(308));bi=i,rl.dependencies={lanes:0,firstContext:i}}else bi=bi.next=i;return c}var Eo=null;function Qu(i){Eo===null?Eo=[i]:Eo.push(i)}function Tb(i,c,h,y){var w=c.interleaved;return w===null?(h.next=h,Qu(c)):(h.next=w.next,w.next=h),c.interleaved=h,jr(i,y)}function jr(i,c){i.lanes|=c;var h=i.alternate;for(h!==null&&(h.lanes|=c),h=i,i=i.return;i!==null;)i.childLanes|=c,h=i.alternate,h!==null&&(h.childLanes|=c),h=i,i=i.return;return h.tag===3?h.stateNode:null}var Jr=!1;function Xu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ab(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Er(i,c){return{eventTime:i,lane:c,tag:0,payload:null,callback:null,next:null}}function Zr(i,c,h){var y=i.updateQueue;if(y===null)return null;if(y=y.shared,(Ye&2)!==0){var w=y.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),y.pending=c,jr(i,h)}return w=y.interleaved,w===null?(c.next=c,Qu(y)):(c.next=w.next,w.next=c),y.interleaved=c,jr(i,h)}function ol(i,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var y=c.lanes;y&=i.pendingLanes,h|=y,c.lanes=h,du(i,h)}}function Pb(i,c){var h=i.updateQueue,y=i.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var w=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var M={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};E===null?w=E=M:E=E.next=M,h=h.next}while(h!==null);E===null?w=E=c:E=E.next=c}else w=E=c;h={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:E,shared:y.shared,effects:y.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=c:i.next=c,h.lastBaseUpdate=c}function il(i,c,h,y){var w=i.updateQueue;Jr=!1;var E=w.firstBaseUpdate,M=w.lastBaseUpdate,Q=w.shared.pending;if(Q!==null){w.shared.pending=null;var Z=Q,se=Z.next;Z.next=null,M===null?E=se:M.next=se,M=Z;var me=i.alternate;me!==null&&(me=me.updateQueue,Q=me.lastBaseUpdate,Q!==M&&(Q===null?me.firstBaseUpdate=se:Q.next=se,me.lastBaseUpdate=Z))}if(E!==null){var ye=w.baseState;M=0,me=se=Z=null,Q=E;do{var fe=Q.lane,Ne=Q.eventTime;if((y&fe)===fe){me!==null&&(me=me.next={eventTime:Ne,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var Pe=i,Ie=Q;switch(fe=c,Ne=h,Ie.tag){case 1:if(Pe=Ie.payload,typeof Pe=="function"){ye=Pe.call(Ne,ye,fe);break e}ye=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ie.payload,fe=typeof Pe=="function"?Pe.call(Ne,ye,fe):Pe,fe==null)break e;ye=R({},ye,fe);break e;case 2:Jr=!0}}Q.callback!==null&&Q.lane!==0&&(i.flags|=64,fe=w.effects,fe===null?w.effects=[Q]:fe.push(Q))}else Ne={eventTime:Ne,lane:fe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},me===null?(se=me=Ne,Z=ye):me=me.next=Ne,M|=fe;if(Q=Q.next,Q===null){if(Q=w.shared.pending,Q===null)break;fe=Q,Q=fe.next,fe.next=null,w.lastBaseUpdate=fe,w.shared.pending=null}}while(!0);if(me===null&&(Z=ye),w.baseState=Z,w.firstBaseUpdate=se,w.lastBaseUpdate=me,c=w.shared.interleaved,c!==null){w=c;do M|=w.lane,w=w.next;while(w!==c)}else E===null&&(w.shared.lanes=0);Ao|=M,i.lanes=M,i.memoizedState=ye}}function Ib(i,c,h){if(i=c.effects,c.effects=null,i!==null)for(c=0;c<i.length;c++){var y=i[c],w=y.callback;if(w!==null){if(y.callback=null,y=h,typeof w!="function")throw Error(n(191,w));w.call(y)}}}var _s={},lr=Yr(_s),Ss=Yr(_s),ks=Yr(_s);function Co(i){if(i===_s)throw Error(n(174));return i}function Ju(i,c){switch(it(ks,c),it(Ss,i),it(lr,_s),i=c.nodeType,i){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ce(null,"");break;default:i=i===8?c.parentNode:c,c=i.namespaceURI||null,i=i.tagName,c=ce(c,i)}pt(lr),it(lr,c)}function _i(){pt(lr),pt(Ss),pt(ks)}function Rb(i){Co(ks.current);var c=Co(lr.current),h=ce(c,i.type);c!==h&&(it(Ss,i),it(lr,h))}function Zu(i){Ss.current===i&&(pt(lr),pt(Ss))}var vt=Yr(0);function sl(i){for(var c=i;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ed=[];function td(){for(var i=0;i<ed.length;i++)ed[i]._workInProgressVersionPrimary=null;ed.length=0}var al=T.ReactCurrentDispatcher,nd=T.ReactCurrentBatchConfig,To=0,xt=null,Pt=null,Ot=null,ll=!1,Ns=!1,js=0,CI=0;function $t(){throw Error(n(321))}function rd(i,c){if(c===null)return!1;for(var h=0;h<c.length&&h<i.length;h++)if(!Un(i[h],c[h]))return!1;return!0}function od(i,c,h,y,w,E){if(To=E,xt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,al.current=i===null||i.memoizedState===null?II:RI,i=h(y,w),Ns){E=0;do{if(Ns=!1,js=0,25<=E)throw Error(n(301));E+=1,Ot=Pt=null,c.updateQueue=null,al.current=OI,i=h(y,w)}while(Ns)}if(al.current=dl,c=Pt!==null&&Pt.next!==null,To=0,Ot=Pt=xt=null,ll=!1,c)throw Error(n(300));return i}function id(){var i=js!==0;return js=0,i}function cr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?xt.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function Mn(){if(Pt===null){var i=xt.alternate;i=i!==null?i.memoizedState:null}else i=Pt.next;var c=Ot===null?xt.memoizedState:Ot.next;if(c!==null)Ot=c,Pt=i;else{if(i===null)throw Error(n(310));Pt=i,i={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},Ot===null?xt.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function Es(i,c){return typeof c=="function"?c(i):c}function sd(i){var c=Mn(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=i;var y=Pt,w=y.baseQueue,E=h.pending;if(E!==null){if(w!==null){var M=w.next;w.next=E.next,E.next=M}y.baseQueue=w=E,h.pending=null}if(w!==null){E=w.next,y=y.baseState;var Q=M=null,Z=null,se=E;do{var me=se.lane;if((To&me)===me)Z!==null&&(Z=Z.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),y=se.hasEagerState?se.eagerState:i(y,se.action);else{var ye={lane:me,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};Z===null?(Q=Z=ye,M=y):Z=Z.next=ye,xt.lanes|=me,Ao|=me}se=se.next}while(se!==null&&se!==E);Z===null?M=y:Z.next=Q,Un(y,c.memoizedState)||(tn=!0),c.memoizedState=y,c.baseState=M,c.baseQueue=Z,h.lastRenderedState=y}if(i=h.interleaved,i!==null){w=i;do E=w.lane,xt.lanes|=E,Ao|=E,w=w.next;while(w!==i)}else w===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function ad(i){var c=Mn(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=i;var y=h.dispatch,w=h.pending,E=c.memoizedState;if(w!==null){h.pending=null;var M=w=w.next;do E=i(E,M.action),M=M.next;while(M!==w);Un(E,c.memoizedState)||(tn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),h.lastRenderedState=E}return[E,y]}function Ob(){}function Mb(i,c){var h=xt,y=Mn(),w=c(),E=!Un(y.memoizedState,w);if(E&&(y.memoizedState=w,tn=!0),y=y.queue,ld(qb.bind(null,h,y,i),[i]),y.getSnapshot!==c||E||Ot!==null&&Ot.memoizedState.tag&1){if(h.flags|=2048,Cs(9,Lb.bind(null,h,y,w,c),void 0,null),Mt===null)throw Error(n(349));(To&30)!==0||Db(h,c,w)}return w}function Db(i,c,h){i.flags|=16384,i={getSnapshot:c,value:h},c=xt.updateQueue,c===null?(c={lastEffect:null,stores:null},xt.updateQueue=c,c.stores=[i]):(h=c.stores,h===null?c.stores=[i]:h.push(i))}function Lb(i,c,h,y){c.value=h,c.getSnapshot=y,Fb(c)&&zb(i)}function qb(i,c,h){return h(function(){Fb(c)&&zb(i)})}function Fb(i){var c=i.getSnapshot;i=i.value;try{var h=c();return!Un(i,h)}catch{return!0}}function zb(i){var c=jr(i,1);c!==null&&Qn(c,i,1,-1)}function Bb(i){var c=cr();return typeof i=="function"&&(i=i()),c.memoizedState=c.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:i},c.queue=i,i=i.dispatch=PI.bind(null,xt,i),[c.memoizedState,i]}function Cs(i,c,h,y){return i={tag:i,create:c,destroy:h,deps:y,next:null},c=xt.updateQueue,c===null?(c={lastEffect:null,stores:null},xt.updateQueue=c,c.lastEffect=i.next=i):(h=c.lastEffect,h===null?c.lastEffect=i.next=i:(y=h.next,h.next=i,i.next=y,c.lastEffect=i)),i}function $b(){return Mn().memoizedState}function cl(i,c,h,y){var w=cr();xt.flags|=i,w.memoizedState=Cs(1|c,h,void 0,y===void 0?null:y)}function ul(i,c,h,y){var w=Mn();y=y===void 0?null:y;var E=void 0;if(Pt!==null){var M=Pt.memoizedState;if(E=M.destroy,y!==null&&rd(y,M.deps)){w.memoizedState=Cs(c,h,E,y);return}}xt.flags|=i,w.memoizedState=Cs(1|c,h,E,y)}function Hb(i,c){return cl(8390656,8,i,c)}function ld(i,c){return ul(2048,8,i,c)}function Vb(i,c){return ul(4,2,i,c)}function Ub(i,c){return ul(4,4,i,c)}function Wb(i,c){if(typeof c=="function")return i=i(),c(i),function(){c(null)};if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function Kb(i,c,h){return h=h!=null?h.concat([i]):null,ul(4,4,Wb.bind(null,c,i),h)}function cd(){}function Gb(i,c){var h=Mn();c=c===void 0?null:c;var y=h.memoizedState;return y!==null&&c!==null&&rd(c,y[1])?y[0]:(h.memoizedState=[i,c],i)}function Yb(i,c){var h=Mn();c=c===void 0?null:c;var y=h.memoizedState;return y!==null&&c!==null&&rd(c,y[1])?y[0]:(i=i(),h.memoizedState=[i,c],i)}function Qb(i,c,h){return(To&21)===0?(i.baseState&&(i.baseState=!1,tn=!0),i.memoizedState=h):(Un(h,c)||(h=ii(),xt.lanes|=h,Ao|=h,i.baseState=!0),c)}function TI(i,c){var h=tt;tt=h!==0&&4>h?h:4,i(!0);var y=nd.transition;nd.transition={};try{i(!1),c()}finally{tt=h,nd.transition=y}}function Xb(){return Mn().memoizedState}function AI(i,c,h){var y=ro(i);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},Jb(i))Zb(c,h);else if(h=Tb(i,c,h,y),h!==null){var w=Xt();Qn(h,i,y,w),ew(h,c,y)}}function PI(i,c,h){var y=ro(i),w={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(Jb(i))Zb(c,w);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var M=c.lastRenderedState,Q=E(M,h);if(w.hasEagerState=!0,w.eagerState=Q,Un(Q,M)){var Z=c.interleaved;Z===null?(w.next=w,Qu(c)):(w.next=Z.next,Z.next=w),c.interleaved=w;return}}catch{}h=Tb(i,c,w,y),h!==null&&(w=Xt(),Qn(h,i,y,w),ew(h,c,y))}}function Jb(i){var c=i.alternate;return i===xt||c!==null&&c===xt}function Zb(i,c){Ns=ll=!0;var h=i.pending;h===null?c.next=c:(c.next=h.next,h.next=c),i.pending=c}function ew(i,c,h){if((h&4194240)!==0){var y=c.lanes;y&=i.pendingLanes,h|=y,c.lanes=h,du(i,h)}}var dl={readContext:On,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},II={readContext:On,useCallback:function(i,c){return cr().memoizedState=[i,c===void 0?null:c],i},useContext:On,useEffect:Hb,useImperativeHandle:function(i,c,h){return h=h!=null?h.concat([i]):null,cl(4194308,4,Wb.bind(null,c,i),h)},useLayoutEffect:function(i,c){return cl(4194308,4,i,c)},useInsertionEffect:function(i,c){return cl(4,2,i,c)},useMemo:function(i,c){var h=cr();return c=c===void 0?null:c,i=i(),h.memoizedState=[i,c],i},useReducer:function(i,c,h){var y=cr();return c=h!==void 0?h(c):c,y.memoizedState=y.baseState=c,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:c},y.queue=i,i=i.dispatch=AI.bind(null,xt,i),[y.memoizedState,i]},useRef:function(i){var c=cr();return i={current:i},c.memoizedState=i},useState:Bb,useDebugValue:cd,useDeferredValue:function(i){return cr().memoizedState=i},useTransition:function(){var i=Bb(!1),c=i[0];return i=TI.bind(null,i[1]),cr().memoizedState=i,[c,i]},useMutableSource:function(){},useSyncExternalStore:function(i,c,h){var y=xt,w=cr();if(ht){if(h===void 0)throw Error(n(407));h=h()}else{if(h=c(),Mt===null)throw Error(n(349));(To&30)!==0||Db(y,c,h)}w.memoizedState=h;var E={value:h,getSnapshot:c};return w.queue=E,Hb(qb.bind(null,y,E,i),[i]),y.flags|=2048,Cs(9,Lb.bind(null,y,E,h,c),void 0,null),h},useId:function(){var i=cr(),c=Mt.identifierPrefix;if(ht){var h=Nr,y=kr;h=(y&~(1<<32-yn(y)-1)).toString(32)+h,c=":"+c+"R"+h,h=js++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=CI++,c=":"+c+"r"+h.toString(32)+":";return i.memoizedState=c},unstable_isNewReconciler:!1},RI={readContext:On,useCallback:Gb,useContext:On,useEffect:ld,useImperativeHandle:Kb,useInsertionEffect:Vb,useLayoutEffect:Ub,useMemo:Yb,useReducer:sd,useRef:$b,useState:function(){return sd(Es)},useDebugValue:cd,useDeferredValue:function(i){var c=Mn();return Qb(c,Pt.memoizedState,i)},useTransition:function(){var i=sd(Es)[0],c=Mn().memoizedState;return[i,c]},useMutableSource:Ob,useSyncExternalStore:Mb,useId:Xb,unstable_isNewReconciler:!1},OI={readContext:On,useCallback:Gb,useContext:On,useEffect:ld,useImperativeHandle:Kb,useInsertionEffect:Vb,useLayoutEffect:Ub,useMemo:Yb,useReducer:ad,useRef:$b,useState:function(){return ad(Es)},useDebugValue:cd,useDeferredValue:function(i){var c=Mn();return Pt===null?c.memoizedState=i:Qb(c,Pt.memoizedState,i)},useTransition:function(){var i=ad(Es)[0],c=Mn().memoizedState;return[i,c]},useMutableSource:Ob,useSyncExternalStore:Mb,useId:Xb,unstable_isNewReconciler:!1};function Kn(i,c){if(i&&i.defaultProps){c=R({},c),i=i.defaultProps;for(var h in i)c[h]===void 0&&(c[h]=i[h]);return c}return c}function ud(i,c,h,y){c=i.memoizedState,h=h(y,c),h=h==null?c:R({},c,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var pl={isMounted:function(i){return(i=i._reactInternals)?kt(i)===i:!1},enqueueSetState:function(i,c,h){i=i._reactInternals;var y=Xt(),w=ro(i),E=Er(y,w);E.payload=c,h!=null&&(E.callback=h),c=Zr(i,E,w),c!==null&&(Qn(c,i,w,y),ol(c,i,w))},enqueueReplaceState:function(i,c,h){i=i._reactInternals;var y=Xt(),w=ro(i),E=Er(y,w);E.tag=1,E.payload=c,h!=null&&(E.callback=h),c=Zr(i,E,w),c!==null&&(Qn(c,i,w,y),ol(c,i,w))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var h=Xt(),y=ro(i),w=Er(h,y);w.tag=2,c!=null&&(w.callback=c),c=Zr(i,w,y),c!==null&&(Qn(c,i,y,h),ol(c,i,y))}};function tw(i,c,h,y,w,E,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(y,E,M):c.prototype&&c.prototype.isPureReactComponent?!hs(h,y)||!hs(w,E):!0}function nw(i,c,h){var y=!1,w=Qr,E=c.contextType;return typeof E=="object"&&E!==null?E=On(E):(w=en(c)?ko:Bt.current,y=c.contextTypes,E=(y=y!=null)?mi(i,w):Qr),c=new c(h,E),i.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=pl,i.stateNode=c,c._reactInternals=i,y&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=w,i.__reactInternalMemoizedMaskedChildContext=E),c}function rw(i,c,h,y){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==i&&pl.enqueueReplaceState(c,c.state,null)}function dd(i,c,h,y){var w=i.stateNode;w.props=h,w.state=i.memoizedState,w.refs={},Xu(i);var E=c.contextType;typeof E=="object"&&E!==null?w.context=On(E):(E=en(c)?ko:Bt.current,w.context=mi(i,E)),w.state=i.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(ud(i,c,E,h),w.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&pl.enqueueReplaceState(w,w.state,null),il(i,h,w,y),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308)}function Si(i,c){try{var h="",y=c;do h+=J(y),y=y.return;while(y);var w=h}catch(E){w=`
Error generating stack: `+E.message+`
`+E.stack}return{value:i,source:c,stack:w,digest:null}}function pd(i,c,h){return{value:i,source:null,stack:h??null,digest:c??null}}function fd(i,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var MI=typeof WeakMap=="function"?WeakMap:Map;function ow(i,c,h){h=Er(-1,h),h.tag=3,h.payload={element:null};var y=c.value;return h.callback=function(){xl||(xl=!0,Cd=y),fd(i,c)},h}function iw(i,c,h){h=Er(-1,h),h.tag=3;var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var w=c.value;h.payload=function(){return y(w)},h.callback=function(){fd(i,c)}}var E=i.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(h.callback=function(){fd(i,c),typeof y!="function"&&(to===null?to=new Set([this]):to.add(this));var M=c.stack;this.componentDidCatch(c.value,{componentStack:M!==null?M:""})}),h}function sw(i,c,h){var y=i.pingCache;if(y===null){y=i.pingCache=new MI;var w=new Set;y.set(c,w)}else w=y.get(c),w===void 0&&(w=new Set,y.set(c,w));w.has(h)||(w.add(h),i=YI.bind(null,i,c,h),c.then(i,i))}function aw(i){do{var c;if((c=i.tag===13)&&(c=i.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return i;i=i.return}while(i!==null);return null}function lw(i,c,h,y,w){return(i.mode&1)===0?(i===c?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Er(-1,1),c.tag=2,Zr(h,c,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=w,i)}var DI=T.ReactCurrentOwner,tn=!1;function Qt(i,c,h,y){c.child=i===null?Cb(c,null,h,y):xi(c,i.child,h,y)}function cw(i,c,h,y,w){h=h.render;var E=c.ref;return wi(c,w),y=od(i,c,h,y,E,w),h=id(),i!==null&&!tn?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~w,Cr(i,c,w)):(ht&&h&&Bu(c),c.flags|=1,Qt(i,c,y,w),c.child)}function uw(i,c,h,y,w){if(i===null){var E=h.type;return typeof E=="function"&&!Md(E)&&E.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=E,dw(i,c,E,y,w)):(i=Nl(h.type,null,y,c,c.mode,w),i.ref=c.ref,i.return=c,c.child=i)}if(E=i.child,(i.lanes&w)===0){var M=E.memoizedProps;if(h=h.compare,h=h!==null?h:hs,h(M,y)&&i.ref===c.ref)return Cr(i,c,w)}return c.flags|=1,i=io(E,y),i.ref=c.ref,i.return=c,c.child=i}function dw(i,c,h,y,w){if(i!==null){var E=i.memoizedProps;if(hs(E,y)&&i.ref===c.ref)if(tn=!1,c.pendingProps=y=E,(i.lanes&w)!==0)(i.flags&131072)!==0&&(tn=!0);else return c.lanes=i.lanes,Cr(i,c,w)}return hd(i,c,h,y,w)}function pw(i,c,h){var y=c.pendingProps,w=y.children,E=i!==null?i.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Ni,wn),wn|=h;else{if((h&1073741824)===0)return i=E!==null?E.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:i,cachePool:null,transitions:null},c.updateQueue=null,it(Ni,wn),wn|=i,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=E!==null?E.baseLanes:h,it(Ni,wn),wn|=y}else E!==null?(y=E.baseLanes|h,c.memoizedState=null):y=h,it(Ni,wn),wn|=y;return Qt(i,c,w,h),c.child}function fw(i,c){var h=c.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function hd(i,c,h,y,w){var E=en(h)?ko:Bt.current;return E=mi(c,E),wi(c,w),h=od(i,c,h,y,E,w),y=id(),i!==null&&!tn?(c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~w,Cr(i,c,w)):(ht&&y&&Bu(c),c.flags|=1,Qt(i,c,h,w),c.child)}function hw(i,c,h,y,w){if(en(h)){var E=!0;Qa(c)}else E=!1;if(wi(c,w),c.stateNode===null)hl(i,c),nw(c,h,y),dd(c,h,y,w),y=!0;else if(i===null){var M=c.stateNode,Q=c.memoizedProps;M.props=Q;var Z=M.context,se=h.contextType;typeof se=="object"&&se!==null?se=On(se):(se=en(h)?ko:Bt.current,se=mi(c,se));var me=h.getDerivedStateFromProps,ye=typeof me=="function"||typeof M.getSnapshotBeforeUpdate=="function";ye||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Q!==y||Z!==se)&&rw(c,M,y,se),Jr=!1;var fe=c.memoizedState;M.state=fe,il(c,y,M,w),Z=c.memoizedState,Q!==y||fe!==Z||Zt.current||Jr?(typeof me=="function"&&(ud(c,h,me,y),Z=c.memoizedState),(Q=Jr||tw(c,h,Q,y,fe,Z,se))?(ye||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(c.flags|=4194308)):(typeof M.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=Z),M.props=y,M.state=Z,M.context=se,y=Q):(typeof M.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{M=c.stateNode,Ab(i,c),Q=c.memoizedProps,se=c.type===c.elementType?Q:Kn(c.type,Q),M.props=se,ye=c.pendingProps,fe=M.context,Z=h.contextType,typeof Z=="object"&&Z!==null?Z=On(Z):(Z=en(h)?ko:Bt.current,Z=mi(c,Z));var Ne=h.getDerivedStateFromProps;(me=typeof Ne=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(Q!==ye||fe!==Z)&&rw(c,M,y,Z),Jr=!1,fe=c.memoizedState,M.state=fe,il(c,y,M,w);var Pe=c.memoizedState;Q!==ye||fe!==Pe||Zt.current||Jr?(typeof Ne=="function"&&(ud(c,h,Ne,y),Pe=c.memoizedState),(se=Jr||tw(c,h,se,y,fe,Pe,Z)||!1)?(me||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(y,Pe,Z),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(y,Pe,Z)),typeof M.componentDidUpdate=="function"&&(c.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof M.componentDidUpdate!="function"||Q===i.memoizedProps&&fe===i.memoizedState||(c.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Q===i.memoizedProps&&fe===i.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Pe),M.props=y,M.state=Pe,M.context=Z,y=se):(typeof M.componentDidUpdate!="function"||Q===i.memoizedProps&&fe===i.memoizedState||(c.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||Q===i.memoizedProps&&fe===i.memoizedState||(c.flags|=1024),y=!1)}return md(i,c,h,y,E,w)}function md(i,c,h,y,w,E){fw(i,c);var M=(c.flags&128)!==0;if(!y&&!M)return w&&xb(c,h,!1),Cr(i,c,E);y=c.stateNode,DI.current=c;var Q=M&&typeof h.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,i!==null&&M?(c.child=xi(c,i.child,null,E),c.child=xi(c,null,Q,E)):Qt(i,c,Q,E),c.memoizedState=y.state,w&&xb(c,h,!0),c.child}function mw(i){var c=i.stateNode;c.pendingContext?yb(i,c.pendingContext,c.pendingContext!==c.context):c.context&&yb(i,c.context,!1),Ju(i,c.containerInfo)}function gw(i,c,h,y,w){return vi(),Uu(w),c.flags|=256,Qt(i,c,h,y),c.child}var gd={dehydrated:null,treeContext:null,retryLane:0};function yd(i){return{baseLanes:i,cachePool:null,transitions:null}}function yw(i,c,h){var y=c.pendingProps,w=vt.current,E=!1,M=(c.flags&128)!==0,Q;if((Q=M)||(Q=i!==null&&i.memoizedState===null?!1:(w&2)!==0),Q?(E=!0,c.flags&=-129):(i===null||i.memoizedState!==null)&&(w|=1),it(vt,w&1),i===null)return Vu(c),i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((c.mode&1)===0?c.lanes=1:i.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(M=y.children,i=y.fallback,E?(y=c.mode,E=c.child,M={mode:"hidden",children:M},(y&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=M):E=jl(M,y,0,null),i=Oo(i,y,h,null),E.return=c,i.return=c,E.sibling=i,c.child=E,c.child.memoizedState=yd(h),c.memoizedState=gd,i):vd(c,M));if(w=i.memoizedState,w!==null&&(Q=w.dehydrated,Q!==null))return LI(i,c,M,y,Q,w,h);if(E){E=y.fallback,M=c.mode,w=i.child,Q=w.sibling;var Z={mode:"hidden",children:y.children};return(M&1)===0&&c.child!==w?(y=c.child,y.childLanes=0,y.pendingProps=Z,c.deletions=null):(y=io(w,Z),y.subtreeFlags=w.subtreeFlags&14680064),Q!==null?E=io(Q,E):(E=Oo(E,M,h,null),E.flags|=2),E.return=c,y.return=c,y.sibling=E,c.child=y,y=E,E=c.child,M=i.child.memoizedState,M=M===null?yd(h):{baseLanes:M.baseLanes|h,cachePool:null,transitions:M.transitions},E.memoizedState=M,E.childLanes=i.childLanes&~h,c.memoizedState=gd,y}return E=i.child,i=E.sibling,y=io(E,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=h),y.return=c,y.sibling=null,i!==null&&(h=c.deletions,h===null?(c.deletions=[i],c.flags|=16):h.push(i)),c.child=y,c.memoizedState=null,y}function vd(i,c){return c=jl({mode:"visible",children:c},i.mode,0,null),c.return=i,i.child=c}function fl(i,c,h,y){return y!==null&&Uu(y),xi(c,i.child,null,h),i=vd(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function LI(i,c,h,y,w,E,M){if(h)return c.flags&256?(c.flags&=-257,y=pd(Error(n(422))),fl(i,c,M,y)):c.memoizedState!==null?(c.child=i.child,c.flags|=128,null):(E=y.fallback,w=c.mode,y=jl({mode:"visible",children:y.children},w,0,null),E=Oo(E,w,M,null),E.flags|=2,y.return=c,E.return=c,y.sibling=E,c.child=y,(c.mode&1)!==0&&xi(c,i.child,null,M),c.child.memoizedState=yd(M),c.memoizedState=gd,E);if((c.mode&1)===0)return fl(i,c,M,null);if(w.data==="$!"){if(y=w.nextSibling&&w.nextSibling.dataset,y)var Q=y.dgst;return y=Q,E=Error(n(419)),y=pd(E,y,void 0),fl(i,c,M,y)}if(Q=(M&i.childLanes)!==0,tn||Q){if(y=Mt,y!==null){switch(M&-M){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(y.suspendedLanes|M))!==0?0:w,w!==0&&w!==E.retryLane&&(E.retryLane=w,jr(i,w),Qn(y,i,w,-1))}return Od(),y=pd(Error(n(421))),fl(i,c,M,y)}return w.data==="$?"?(c.flags|=128,c.child=i.child,c=QI.bind(null,i),w._reactRetry=c,null):(i=E.treeContext,bn=Gr(w.nextSibling),xn=c,ht=!0,Wn=null,i!==null&&(In[Rn++]=kr,In[Rn++]=Nr,In[Rn++]=No,kr=i.id,Nr=i.overflow,No=c),c=vd(c,y.children),c.flags|=4096,c)}function vw(i,c,h){i.lanes|=c;var y=i.alternate;y!==null&&(y.lanes|=c),Yu(i.return,c,h)}function xd(i,c,h,y,w){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:w}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=y,E.tail=h,E.tailMode=w)}function xw(i,c,h){var y=c.pendingProps,w=y.revealOrder,E=y.tail;if(Qt(i,c,y.children,h),y=vt.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vw(i,h,c);else if(i.tag===19)vw(i,h,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}y&=1}if(it(vt,y),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(h=c.child,w=null;h!==null;)i=h.alternate,i!==null&&sl(i)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),xd(c,!1,w,h,E);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(i=w.alternate,i!==null&&sl(i)===null){c.child=w;break}i=w.sibling,w.sibling=h,h=w,w=i}xd(c,!0,h,null,E);break;case"together":xd(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function hl(i,c){(c.mode&1)===0&&i!==null&&(i.alternate=null,c.alternate=null,c.flags|=2)}function Cr(i,c,h){if(i!==null&&(c.dependencies=i.dependencies),Ao|=c.lanes,(h&c.childLanes)===0)return null;if(i!==null&&c.child!==i.child)throw Error(n(153));if(c.child!==null){for(i=c.child,h=io(i,i.pendingProps),c.child=h,h.return=c;i.sibling!==null;)i=i.sibling,h=h.sibling=io(i,i.pendingProps),h.return=c;h.sibling=null}return c.child}function qI(i,c,h){switch(c.tag){case 3:mw(c),vi();break;case 5:Rb(c);break;case 1:en(c.type)&&Qa(c);break;case 4:Ju(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,w=c.memoizedProps.value;it(nl,y._currentValue),y._currentValue=w;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(it(vt,vt.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?yw(i,c,h):(it(vt,vt.current&1),i=Cr(i,c,h),i!==null?i.sibling:null);it(vt,vt.current&1);break;case 19:if(y=(h&c.childLanes)!==0,(i.flags&128)!==0){if(y)return xw(i,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),it(vt,vt.current),y)break;return null;case 22:case 23:return c.lanes=0,pw(i,c,h)}return Cr(i,c,h)}var bw,bd,ww,_w;bw=function(i,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},bd=function(){},ww=function(i,c,h,y){var w=i.memoizedProps;if(w!==y){i=c.stateNode,Co(lr.current);var E=null;switch(h){case"input":w=_e(i,w),y=_e(i,y),E=[];break;case"select":w=R({},w,{value:void 0}),y=R({},y,{value:void 0}),E=[];break;case"textarea":w=Ae(i,w),y=Ae(i,y),E=[];break;default:typeof w.onClick!="function"&&typeof y.onClick=="function"&&(i.onclick=Ka)}ct(h,y);var M;h=null;for(se in w)if(!y.hasOwnProperty(se)&&w.hasOwnProperty(se)&&w[se]!=null)if(se==="style"){var Q=w[se];for(M in Q)Q.hasOwnProperty(M)&&(h||(h={}),h[M]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(o.hasOwnProperty(se)?E||(E=[]):(E=E||[]).push(se,null));for(se in y){var Z=y[se];if(Q=w?.[se],y.hasOwnProperty(se)&&Z!==Q&&(Z!=null||Q!=null))if(se==="style")if(Q){for(M in Q)!Q.hasOwnProperty(M)||Z&&Z.hasOwnProperty(M)||(h||(h={}),h[M]="");for(M in Z)Z.hasOwnProperty(M)&&Q[M]!==Z[M]&&(h||(h={}),h[M]=Z[M])}else h||(E||(E=[]),E.push(se,h)),h=Z;else se==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Q=Q?Q.__html:void 0,Z!=null&&Q!==Z&&(E=E||[]).push(se,Z)):se==="children"?typeof Z!="string"&&typeof Z!="number"||(E=E||[]).push(se,""+Z):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(o.hasOwnProperty(se)?(Z!=null&&se==="onScroll"&&dt("scroll",i),E||Q===Z||(E=[])):(E=E||[]).push(se,Z))}h&&(E=E||[]).push("style",h);var se=E;(c.updateQueue=se)&&(c.flags|=4)}},_w=function(i,c,h,y){h!==y&&(c.flags|=4)};function Ts(i,c){if(!ht)switch(i.tailMode){case"hidden":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:y.sibling=null}}function Ht(i){var c=i.alternate!==null&&i.alternate.child===i.child,h=0,y=0;if(c)for(var w=i.child;w!==null;)h|=w.lanes|w.childLanes,y|=w.subtreeFlags&14680064,y|=w.flags&14680064,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)h|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=y,i.childLanes=h,c}function FI(i,c,h){var y=c.pendingProps;switch($u(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(c),null;case 1:return en(c.type)&&Ya(),Ht(c),null;case 3:return y=c.stateNode,_i(),pt(Zt),pt(Bt),td(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(i===null||i.child===null)&&(el(c)?c.flags|=4:i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Wn!==null&&(Pd(Wn),Wn=null))),bd(i,c),Ht(c),null;case 5:Zu(c);var w=Co(ks.current);if(h=c.type,i!==null&&c.stateNode!=null)ww(i,c,h,y,w),i.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(n(166));return Ht(c),null}if(i=Co(lr.current),el(c)){y=c.stateNode,h=c.type;var E=c.memoizedProps;switch(y[ar]=c,y[xs]=E,i=(c.mode&1)!==0,h){case"dialog":dt("cancel",y),dt("close",y);break;case"iframe":case"object":case"embed":dt("load",y);break;case"video":case"audio":for(w=0;w<gs.length;w++)dt(gs[w],y);break;case"source":dt("error",y);break;case"img":case"image":case"link":dt("error",y),dt("load",y);break;case"details":dt("toggle",y);break;case"input":we(y,E),dt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!E.multiple},dt("invalid",y);break;case"textarea":Ve(y,E),dt("invalid",y)}ct(h,E),w=null;for(var M in E)if(E.hasOwnProperty(M)){var Q=E[M];M==="children"?typeof Q=="string"?y.textContent!==Q&&(E.suppressHydrationWarning!==!0&&Wa(y.textContent,Q,i),w=["children",Q]):typeof Q=="number"&&y.textContent!==""+Q&&(E.suppressHydrationWarning!==!0&&Wa(y.textContent,Q,i),w=["children",""+Q]):o.hasOwnProperty(M)&&Q!=null&&M==="onScroll"&&dt("scroll",y)}switch(h){case"input":ve(y),Qe(y,E,!0);break;case"textarea":ve(y),ot(y);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(y.onclick=Ka)}y=w,c.updateQueue=y,y!==null&&(c.flags|=4)}else{M=w.nodeType===9?w:w.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ae(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=M.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof y.is=="string"?i=M.createElement(h,{is:y.is}):(i=M.createElement(h),h==="select"&&(M=i,y.multiple?M.multiple=!0:y.size&&(M.size=y.size))):i=M.createElementNS(i,h),i[ar]=c,i[xs]=y,bw(i,c,!1,!1),c.stateNode=i;e:{switch(M=Rt(h,y),h){case"dialog":dt("cancel",i),dt("close",i),w=y;break;case"iframe":case"object":case"embed":dt("load",i),w=y;break;case"video":case"audio":for(w=0;w<gs.length;w++)dt(gs[w],i);w=y;break;case"source":dt("error",i),w=y;break;case"img":case"image":case"link":dt("error",i),dt("load",i),w=y;break;case"details":dt("toggle",i),w=y;break;case"input":we(i,y),w=_e(i,y),dt("invalid",i);break;case"option":w=y;break;case"select":i._wrapperState={wasMultiple:!!y.multiple},w=R({},y,{value:void 0}),dt("invalid",i);break;case"textarea":Ve(i,y),w=Ae(i,y),dt("invalid",i);break;default:w=y}ct(h,w),Q=w;for(E in Q)if(Q.hasOwnProperty(E)){var Z=Q[E];E==="style"?yt(i,Z):E==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&ze(i,Z)):E==="children"?typeof Z=="string"?(h!=="textarea"||Z!=="")&&Le(i,Z):typeof Z=="number"&&Le(i,""+Z):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(o.hasOwnProperty(E)?Z!=null&&E==="onScroll"&&dt("scroll",i):Z!=null&&N(i,E,Z,M))}switch(h){case"input":ve(i),Qe(i,y,!1);break;case"textarea":ve(i),ot(i);break;case"option":y.value!=null&&i.setAttribute("value",""+V(y.value));break;case"select":i.multiple=!!y.multiple,E=y.value,E!=null?Ee(i,!!y.multiple,E,!1):y.defaultValue!=null&&Ee(i,!!y.multiple,y.defaultValue,!0);break;default:typeof w.onClick=="function"&&(i.onclick=Ka)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ht(c),null;case 6:if(i&&c.stateNode!=null)_w(i,c,i.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(n(166));if(h=Co(ks.current),Co(lr.current),el(c)){if(y=c.stateNode,h=c.memoizedProps,y[ar]=c,(E=y.nodeValue!==h)&&(i=xn,i!==null))switch(i.tag){case 3:Wa(y.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Wa(y.nodeValue,h,(i.mode&1)!==0)}E&&(c.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[ar]=c,c.stateNode=y}return Ht(c),null;case 13:if(pt(vt),y=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ht&&bn!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Nb(),vi(),c.flags|=98560,E=!1;else if(E=el(c),y!==null&&y.dehydrated!==null){if(i===null){if(!E)throw Error(n(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[ar]=c}else vi(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ht(c),E=!1}else Wn!==null&&(Pd(Wn),Wn=null),E=!0;if(!E)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(y=y!==null,y!==(i!==null&&i.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(i===null||(vt.current&1)!==0?It===0&&(It=3):Od())),c.updateQueue!==null&&(c.flags|=4),Ht(c),null);case 4:return _i(),bd(i,c),i===null&&ys(c.stateNode.containerInfo),Ht(c),null;case 10:return Gu(c.type._context),Ht(c),null;case 17:return en(c.type)&&Ya(),Ht(c),null;case 19:if(pt(vt),E=c.memoizedState,E===null)return Ht(c),null;if(y=(c.flags&128)!==0,M=E.rendering,M===null)if(y)Ts(E,!1);else{if(It!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(M=sl(i),M!==null){for(c.flags|=128,Ts(E,!1),y=M.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=h,h=c.child;h!==null;)E=h,i=y,E.flags&=14680066,M=E.alternate,M===null?(E.childLanes=0,E.lanes=i,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=M.childLanes,E.lanes=M.lanes,E.child=M.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=M.memoizedProps,E.memoizedState=M.memoizedState,E.updateQueue=M.updateQueue,E.type=M.type,i=M.dependencies,E.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return it(vt,vt.current&1|2),c.child}i=i.sibling}E.tail!==null&&ut()>ji&&(c.flags|=128,y=!0,Ts(E,!1),c.lanes=4194304)}else{if(!y)if(i=sl(M),i!==null){if(c.flags|=128,y=!0,h=i.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Ts(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!ht)return Ht(c),null}else 2*ut()-E.renderingStartTime>ji&&h!==1073741824&&(c.flags|=128,y=!0,Ts(E,!1),c.lanes=4194304);E.isBackwards?(M.sibling=c.child,c.child=M):(h=E.last,h!==null?h.sibling=M:c.child=M,E.last=M)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=ut(),c.sibling=null,h=vt.current,it(vt,y?h&1|2:h&1),c):(Ht(c),null);case 22:case 23:return Rd(),y=c.memoizedState!==null,i!==null&&i.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(wn&1073741824)!==0&&(Ht(c),c.subtreeFlags&6&&(c.flags|=8192)):Ht(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function zI(i,c){switch($u(c),c.tag){case 1:return en(c.type)&&Ya(),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return _i(),pt(Zt),pt(Bt),td(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 5:return Zu(c),null;case 13:if(pt(vt),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(n(340));vi()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return pt(vt),null;case 4:return _i(),null;case 10:return Gu(c.type._context),null;case 22:case 23:return Rd(),null;case 24:return null;default:return null}}var ml=!1,Vt=!1,BI=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ki(i,c){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){bt(i,c,y)}else h.current=null}function wd(i,c,h){try{h()}catch(y){bt(i,c,y)}}var Sw=!1;function $I(i,c){if(Ru=Ma,i=tb(),Nu(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var w=y.anchorOffset,E=y.focusNode;y=y.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var M=0,Q=-1,Z=-1,se=0,me=0,ye=i,fe=null;t:for(;;){for(var Ne;ye!==h||w!==0&&ye.nodeType!==3||(Q=M+w),ye!==E||y!==0&&ye.nodeType!==3||(Z=M+y),ye.nodeType===3&&(M+=ye.nodeValue.length),(Ne=ye.firstChild)!==null;)fe=ye,ye=Ne;for(;;){if(ye===i)break t;if(fe===h&&++se===w&&(Q=M),fe===E&&++me===y&&(Z=M),(Ne=ye.nextSibling)!==null)break;ye=fe,fe=ye.parentNode}ye=Ne}h=Q===-1||Z===-1?null:{start:Q,end:Z}}else h=null}h=h||{start:0,end:0}}else h=null;for(Ou={focusedElem:i,selectionRange:h},Ma=!1,Te=c;Te!==null;)if(c=Te,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,Te=i;else for(;Te!==null;){c=Te;try{var Pe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Pe!==null){var Ie=Pe.memoizedProps,_t=Pe.memoizedState,oe=c.stateNode,ee=oe.getSnapshotBeforeUpdate(c.elementType===c.type?Ie:Kn(c.type,Ie),_t);oe.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ie=c.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(be){bt(c,c.return,be)}if(i=c.sibling,i!==null){i.return=c.return,Te=i;break}Te=c.return}return Pe=Sw,Sw=!1,Pe}function As(i,c,h){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var w=y=y.next;do{if((w.tag&i)===i){var E=w.destroy;w.destroy=void 0,E!==void 0&&wd(c,h,E)}w=w.next}while(w!==y)}}function gl(i,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&i)===i){var y=h.create;h.destroy=y()}h=h.next}while(h!==c)}}function _d(i){var c=i.ref;if(c!==null){var h=i.stateNode;i.tag,i=h,typeof c=="function"?c(i):c.current=i}}function kw(i){var c=i.alternate;c!==null&&(i.alternate=null,kw(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&(delete c[ar],delete c[xs],delete c[qu],delete c[kI],delete c[NI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Nw(i){return i.tag===5||i.tag===3||i.tag===4}function jw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Nw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Sd(i,c,h){var y=i.tag;if(y===5||y===6)i=i.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(i,c):h.insertBefore(i,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(i,h)):(c=h,c.appendChild(i)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Ka));else if(y!==4&&(i=i.child,i!==null))for(Sd(i,c,h),i=i.sibling;i!==null;)Sd(i,c,h),i=i.sibling}function kd(i,c,h){var y=i.tag;if(y===5||y===6)i=i.stateNode,c?h.insertBefore(i,c):h.appendChild(i);else if(y!==4&&(i=i.child,i!==null))for(kd(i,c,h),i=i.sibling;i!==null;)kd(i,c,h),i=i.sibling}var qt=null,Gn=!1;function eo(i,c,h){for(h=h.child;h!==null;)Ew(i,c,h),h=h.sibling}function Ew(i,c,h){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(wo,h)}catch{}switch(h.tag){case 5:Vt||ki(h,c);case 6:var y=qt,w=Gn;qt=null,eo(i,c,h),qt=y,Gn=w,qt!==null&&(Gn?(i=qt,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):qt.removeChild(h.stateNode));break;case 18:qt!==null&&(Gn?(i=qt,h=h.stateNode,i.nodeType===8?Lu(i.parentNode,h):i.nodeType===1&&Lu(i,h),ls(i)):Lu(qt,h.stateNode));break;case 4:y=qt,w=Gn,qt=h.stateNode.containerInfo,Gn=!0,eo(i,c,h),qt=y,Gn=w;break;case 0:case 11:case 14:case 15:if(!Vt&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){w=y=y.next;do{var E=w,M=E.destroy;E=E.tag,M!==void 0&&((E&2)!==0||(E&4)!==0)&&wd(h,c,M),w=w.next}while(w!==y)}eo(i,c,h);break;case 1:if(!Vt&&(ki(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(Q){bt(h,c,Q)}eo(i,c,h);break;case 21:eo(i,c,h);break;case 22:h.mode&1?(Vt=(y=Vt)||h.memoizedState!==null,eo(i,c,h),Vt=y):eo(i,c,h);break;default:eo(i,c,h)}}function Cw(i){var c=i.updateQueue;if(c!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new BI),c.forEach(function(y){var w=XI.bind(null,i,y);h.has(y)||(h.add(y),y.then(w,w))})}}function Yn(i,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var w=h[y];try{var E=i,M=c,Q=M;e:for(;Q!==null;){switch(Q.tag){case 5:qt=Q.stateNode,Gn=!1;break e;case 3:qt=Q.stateNode.containerInfo,Gn=!0;break e;case 4:qt=Q.stateNode.containerInfo,Gn=!0;break e}Q=Q.return}if(qt===null)throw Error(n(160));Ew(E,M,w),qt=null,Gn=!1;var Z=w.alternate;Z!==null&&(Z.return=null),w.return=null}catch(se){bt(w,c,se)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)Tw(c,i),c=c.sibling}function Tw(i,c){var h=i.alternate,y=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Yn(c,i),ur(i),y&4){try{As(3,i,i.return),gl(3,i)}catch(Ie){bt(i,i.return,Ie)}try{As(5,i,i.return)}catch(Ie){bt(i,i.return,Ie)}}break;case 1:Yn(c,i),ur(i),y&512&&h!==null&&ki(h,h.return);break;case 5:if(Yn(c,i),ur(i),y&512&&h!==null&&ki(h,h.return),i.flags&32){var w=i.stateNode;try{Le(w,"")}catch(Ie){bt(i,i.return,Ie)}}if(y&4&&(w=i.stateNode,w!=null)){var E=i.memoizedProps,M=h!==null?h.memoizedProps:E,Q=i.type,Z=i.updateQueue;if(i.updateQueue=null,Z!==null)try{Q==="input"&&E.type==="radio"&&E.name!=null&&Ce(w,E),Rt(Q,M);var se=Rt(Q,E);for(M=0;M<Z.length;M+=2){var me=Z[M],ye=Z[M+1];me==="style"?yt(w,ye):me==="dangerouslySetInnerHTML"?ze(w,ye):me==="children"?Le(w,ye):N(w,me,ye,se)}switch(Q){case"input":Se(w,E);break;case"textarea":lt(w,E);break;case"select":var fe=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!E.multiple;var Ne=E.value;Ne!=null?Ee(w,!!E.multiple,Ne,!1):fe!==!!E.multiple&&(E.defaultValue!=null?Ee(w,!!E.multiple,E.defaultValue,!0):Ee(w,!!E.multiple,E.multiple?[]:"",!1))}w[xs]=E}catch(Ie){bt(i,i.return,Ie)}}break;case 6:if(Yn(c,i),ur(i),y&4){if(i.stateNode===null)throw Error(n(162));w=i.stateNode,E=i.memoizedProps;try{w.nodeValue=E}catch(Ie){bt(i,i.return,Ie)}}break;case 3:if(Yn(c,i),ur(i),y&4&&h!==null&&h.memoizedState.isDehydrated)try{ls(c.containerInfo)}catch(Ie){bt(i,i.return,Ie)}break;case 4:Yn(c,i),ur(i);break;case 13:Yn(c,i),ur(i),w=i.child,w.flags&8192&&(E=w.memoizedState!==null,w.stateNode.isHidden=E,!E||w.alternate!==null&&w.alternate.memoizedState!==null||(Ed=ut())),y&4&&Cw(i);break;case 22:if(me=h!==null&&h.memoizedState!==null,i.mode&1?(Vt=(se=Vt)||me,Yn(c,i),Vt=se):Yn(c,i),ur(i),y&8192){if(se=i.memoizedState!==null,(i.stateNode.isHidden=se)&&!me&&(i.mode&1)!==0)for(Te=i,me=i.child;me!==null;){for(ye=Te=me;Te!==null;){switch(fe=Te,Ne=fe.child,fe.tag){case 0:case 11:case 14:case 15:As(4,fe,fe.return);break;case 1:ki(fe,fe.return);var Pe=fe.stateNode;if(typeof Pe.componentWillUnmount=="function"){y=fe,h=fe.return;try{c=y,Pe.props=c.memoizedProps,Pe.state=c.memoizedState,Pe.componentWillUnmount()}catch(Ie){bt(y,h,Ie)}}break;case 5:ki(fe,fe.return);break;case 22:if(fe.memoizedState!==null){Iw(ye);continue}}Ne!==null?(Ne.return=fe,Te=Ne):Iw(ye)}me=me.sibling}e:for(me=null,ye=i;;){if(ye.tag===5){if(me===null){me=ye;try{w=ye.stateNode,se?(E=w.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(Q=ye.stateNode,Z=ye.memoizedProps.style,M=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,Q.style.display=et("display",M))}catch(Ie){bt(i,i.return,Ie)}}}else if(ye.tag===6){if(me===null)try{ye.stateNode.nodeValue=se?"":ye.memoizedProps}catch(Ie){bt(i,i.return,Ie)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===i)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===i)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===i)break e;me===ye&&(me=null),ye=ye.return}me===ye&&(me=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:Yn(c,i),ur(i),y&4&&Cw(i);break;case 21:break;default:Yn(c,i),ur(i)}}function ur(i){var c=i.flags;if(c&2){try{e:{for(var h=i.return;h!==null;){if(Nw(h)){var y=h;break e}h=h.return}throw Error(n(160))}switch(y.tag){case 5:var w=y.stateNode;y.flags&32&&(Le(w,""),y.flags&=-33);var E=jw(i);kd(i,E,w);break;case 3:case 4:var M=y.stateNode.containerInfo,Q=jw(i);Sd(i,Q,M);break;default:throw Error(n(161))}}catch(Z){bt(i,i.return,Z)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function HI(i,c,h){Te=i,Aw(i)}function Aw(i,c,h){for(var y=(i.mode&1)!==0;Te!==null;){var w=Te,E=w.child;if(w.tag===22&&y){var M=w.memoizedState!==null||ml;if(!M){var Q=w.alternate,Z=Q!==null&&Q.memoizedState!==null||Vt;Q=ml;var se=Vt;if(ml=M,(Vt=Z)&&!se)for(Te=w;Te!==null;)M=Te,Z=M.child,M.tag===22&&M.memoizedState!==null?Rw(w):Z!==null?(Z.return=M,Te=Z):Rw(w);for(;E!==null;)Te=E,Aw(E),E=E.sibling;Te=w,ml=Q,Vt=se}Pw(i)}else(w.subtreeFlags&8772)!==0&&E!==null?(E.return=w,Te=E):Pw(i)}}function Pw(i){for(;Te!==null;){var c=Te;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Vt||gl(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Vt)if(h===null)y.componentDidMount();else{var w=c.elementType===c.type?h.memoizedProps:Kn(c.type,h.memoizedProps);y.componentDidUpdate(w,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var E=c.updateQueue;E!==null&&Ib(c,E,y);break;case 3:var M=c.updateQueue;if(M!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Ib(c,M,h)}break;case 5:var Q=c.stateNode;if(h===null&&c.flags&4){h=Q;var Z=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&h.focus();break;case"img":Z.src&&(h.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var se=c.alternate;if(se!==null){var me=se.memoizedState;if(me!==null){var ye=me.dehydrated;ye!==null&&ls(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Vt||c.flags&512&&_d(c)}catch(fe){bt(c,c.return,fe)}}if(c===i){Te=null;break}if(h=c.sibling,h!==null){h.return=c.return,Te=h;break}Te=c.return}}function Iw(i){for(;Te!==null;){var c=Te;if(c===i){Te=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Te=h;break}Te=c.return}}function Rw(i){for(;Te!==null;){var c=Te;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{gl(4,c)}catch(Z){bt(c,h,Z)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var w=c.return;try{y.componentDidMount()}catch(Z){bt(c,w,Z)}}var E=c.return;try{_d(c)}catch(Z){bt(c,E,Z)}break;case 5:var M=c.return;try{_d(c)}catch(Z){bt(c,M,Z)}}}catch(Z){bt(c,c.return,Z)}if(c===i){Te=null;break}var Q=c.sibling;if(Q!==null){Q.return=c.return,Te=Q;break}Te=c.return}}var VI=Math.ceil,yl=T.ReactCurrentDispatcher,Nd=T.ReactCurrentOwner,Dn=T.ReactCurrentBatchConfig,Ye=0,Mt=null,jt=null,Ft=0,wn=0,Ni=Yr(0),It=0,Ps=null,Ao=0,vl=0,jd=0,Is=null,nn=null,Ed=0,ji=1/0,Tr=null,xl=!1,Cd=null,to=null,bl=!1,no=null,wl=0,Rs=0,Td=null,_l=-1,Sl=0;function Xt(){return(Ye&6)!==0?ut():_l!==-1?_l:_l=ut()}function ro(i){return(i.mode&1)===0?1:(Ye&2)!==0&&Ft!==0?Ft&-Ft:EI.transition!==null?(Sl===0&&(Sl=ii()),Sl):(i=tt,i!==0||(i=window.event,i=i===void 0?16:Mx(i.type)),i)}function Qn(i,c,h,y){if(50<Rs)throw Rs=0,Td=null,Error(n(185));_o(i,h,y),((Ye&2)===0||i!==Mt)&&(i===Mt&&((Ye&2)===0&&(vl|=h),It===4&&oo(i,Ft)),rn(i,y),h===1&&Ye===0&&(c.mode&1)===0&&(ji=ut()+500,Xa&&Xr()))}function rn(i,c){var h=i.callbackNode;uu(i,c);var y=oi(i,i===Mt?Ft:0);if(y===0)h!==null&&wr(h),i.callbackNode=null,i.callbackPriority=0;else if(c=y&-y,i.callbackPriority!==c){if(h!=null&&wr(h),c===1)i.tag===0?jI(Mw.bind(null,i)):bb(Mw.bind(null,i)),_I(function(){(Ye&6)===0&&Xr()}),h=null;else{switch(Ex(y)){case 1:h=Nt;break;case 4:h=Gt;break;case 16:h=Yt;break;case 536870912:h=Aa;break;default:h=Yt}h=Hw(h,Ow.bind(null,i))}i.callbackPriority=c,i.callbackNode=h}}function Ow(i,c){if(_l=-1,Sl=0,(Ye&6)!==0)throw Error(n(327));var h=i.callbackNode;if(Ei()&&i.callbackNode!==h)return null;var y=oi(i,i===Mt?Ft:0);if(y===0)return null;if((y&30)!==0||(y&i.expiredLanes)!==0||c)c=kl(i,y);else{c=y;var w=Ye;Ye|=2;var E=Lw();(Mt!==i||Ft!==c)&&(Tr=null,ji=ut()+500,Io(i,c));do try{KI();break}catch(Q){Dw(i,Q)}while(!0);Ku(),yl.current=E,Ye=w,jt!==null?c=0:(Mt=null,Ft=0,c=It)}if(c!==0){if(c===2&&(w=ns(i),w!==0&&(y=w,c=Ad(i,w))),c===1)throw h=Ps,Io(i,0),oo(i,y),rn(i,ut()),h;if(c===6)oo(i,y);else{if(w=i.current.alternate,(y&30)===0&&!UI(w)&&(c=kl(i,y),c===2&&(E=ns(i),E!==0&&(y=E,c=Ad(i,E))),c===1))throw h=Ps,Io(i,0),oo(i,y),rn(i,ut()),h;switch(i.finishedWork=w,i.finishedLanes=y,c){case 0:case 1:throw Error(n(345));case 2:Ro(i,nn,Tr);break;case 3:if(oo(i,y),(y&130023424)===y&&(c=Ed+500-ut(),10<c)){if(oi(i,0)!==0)break;if(w=i.suspendedLanes,(w&y)!==y){Xt(),i.pingedLanes|=i.suspendedLanes&w;break}i.timeoutHandle=Du(Ro.bind(null,i,nn,Tr),c);break}Ro(i,nn,Tr);break;case 4:if(oo(i,y),(y&4194240)===y)break;for(c=i.eventTimes,w=-1;0<y;){var M=31-yn(y);E=1<<M,M=c[M],M>w&&(w=M),y&=~E}if(y=w,y=ut()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*VI(y/1960))-y,10<y){i.timeoutHandle=Du(Ro.bind(null,i,nn,Tr),y);break}Ro(i,nn,Tr);break;case 5:Ro(i,nn,Tr);break;default:throw Error(n(329))}}}return rn(i,ut()),i.callbackNode===h?Ow.bind(null,i):null}function Ad(i,c){var h=Is;return i.current.memoizedState.isDehydrated&&(Io(i,c).flags|=256),i=kl(i,c),i!==2&&(c=nn,nn=h,c!==null&&Pd(c)),i}function Pd(i){nn===null?nn=i:nn.push.apply(nn,i)}function UI(i){for(var c=i;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var w=h[y],E=w.getSnapshot;w=w.value;try{if(!Un(E(),w))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function oo(i,c){for(c&=~jd,c&=~vl,i.suspendedLanes|=c,i.pingedLanes&=~c,i=i.expirationTimes;0<c;){var h=31-yn(c),y=1<<h;i[h]=-1,c&=~y}}function Mw(i){if((Ye&6)!==0)throw Error(n(327));Ei();var c=oi(i,0);if((c&1)===0)return rn(i,ut()),null;var h=kl(i,c);if(i.tag!==0&&h===2){var y=ns(i);y!==0&&(c=y,h=Ad(i,y))}if(h===1)throw h=Ps,Io(i,0),oo(i,c),rn(i,ut()),h;if(h===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=c,Ro(i,nn,Tr),rn(i,ut()),null}function Id(i,c){var h=Ye;Ye|=1;try{return i(c)}finally{Ye=h,Ye===0&&(ji=ut()+500,Xa&&Xr())}}function Po(i){no!==null&&no.tag===0&&(Ye&6)===0&&Ei();var c=Ye;Ye|=1;var h=Dn.transition,y=tt;try{if(Dn.transition=null,tt=1,i)return i()}finally{tt=y,Dn.transition=h,Ye=c,(Ye&6)===0&&Xr()}}function Rd(){wn=Ni.current,pt(Ni)}function Io(i,c){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,wI(h)),jt!==null)for(h=jt.return;h!==null;){var y=h;switch($u(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Ya();break;case 3:_i(),pt(Zt),pt(Bt),td();break;case 5:Zu(y);break;case 4:_i();break;case 13:pt(vt);break;case 19:pt(vt);break;case 10:Gu(y.type._context);break;case 22:case 23:Rd()}h=h.return}if(Mt=i,jt=i=io(i.current,null),Ft=wn=c,It=0,Ps=null,jd=vl=Ao=0,nn=Is=null,Eo!==null){for(c=0;c<Eo.length;c++)if(h=Eo[c],y=h.interleaved,y!==null){h.interleaved=null;var w=y.next,E=h.pending;if(E!==null){var M=E.next;E.next=w,y.next=M}h.pending=y}Eo=null}return i}function Dw(i,c){do{var h=jt;try{if(Ku(),al.current=dl,ll){for(var y=xt.memoizedState;y!==null;){var w=y.queue;w!==null&&(w.pending=null),y=y.next}ll=!1}if(To=0,Ot=Pt=xt=null,Ns=!1,js=0,Nd.current=null,h===null||h.return===null){It=1,Ps=c,jt=null;break}e:{var E=i,M=h.return,Q=h,Z=c;if(c=Ft,Q.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var se=Z,me=Q,ye=me.tag;if((me.mode&1)===0&&(ye===0||ye===11||ye===15)){var fe=me.alternate;fe?(me.updateQueue=fe.updateQueue,me.memoizedState=fe.memoizedState,me.lanes=fe.lanes):(me.updateQueue=null,me.memoizedState=null)}var Ne=aw(M);if(Ne!==null){Ne.flags&=-257,lw(Ne,M,Q,E,c),Ne.mode&1&&sw(E,se,c),c=Ne,Z=se;var Pe=c.updateQueue;if(Pe===null){var Ie=new Set;Ie.add(Z),c.updateQueue=Ie}else Pe.add(Z);break e}else{if((c&1)===0){sw(E,se,c),Od();break e}Z=Error(n(426))}}else if(ht&&Q.mode&1){var _t=aw(M);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),lw(_t,M,Q,E,c),Uu(Si(Z,Q));break e}}E=Z=Si(Z,Q),It!==4&&(It=2),Is===null?Is=[E]:Is.push(E),E=M;do{switch(E.tag){case 3:E.flags|=65536,c&=-c,E.lanes|=c;var oe=ow(E,Z,c);Pb(E,oe);break e;case 1:Q=Z;var ee=E.type,ie=E.stateNode;if((E.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(to===null||!to.has(ie)))){E.flags|=65536,c&=-c,E.lanes|=c;var be=iw(E,Q,c);Pb(E,be);break e}}E=E.return}while(E!==null)}Fw(h)}catch(Re){c=Re,jt===h&&h!==null&&(jt=h=h.return);continue}break}while(!0)}function Lw(){var i=yl.current;return yl.current=dl,i===null?dl:i}function Od(){(It===0||It===3||It===2)&&(It=4),Mt===null||(Ao&268435455)===0&&(vl&268435455)===0||oo(Mt,Ft)}function kl(i,c){var h=Ye;Ye|=2;var y=Lw();(Mt!==i||Ft!==c)&&(Tr=null,Io(i,c));do try{WI();break}catch(w){Dw(i,w)}while(!0);if(Ku(),Ye=h,yl.current=y,jt!==null)throw Error(n(261));return Mt=null,Ft=0,It}function WI(){for(;jt!==null;)qw(jt)}function KI(){for(;jt!==null&&!ts();)qw(jt)}function qw(i){var c=$w(i.alternate,i,wn);i.memoizedProps=i.pendingProps,c===null?Fw(i):jt=c,Nd.current=null}function Fw(i){var c=i;do{var h=c.alternate;if(i=c.return,(c.flags&32768)===0){if(h=FI(h,c,wn),h!==null){jt=h;return}}else{if(h=zI(h,c),h!==null){h.flags&=32767,jt=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{It=6,jt=null;return}}if(c=c.sibling,c!==null){jt=c;return}jt=c=i}while(c!==null);It===0&&(It=5)}function Ro(i,c,h){var y=tt,w=Dn.transition;try{Dn.transition=null,tt=1,GI(i,c,h,y)}finally{Dn.transition=w,tt=y}return null}function GI(i,c,h,y){do Ei();while(no!==null);if((Ye&6)!==0)throw Error(n(327));h=i.finishedWork;var w=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var E=h.lanes|h.childLanes;if(Ia(i,E),i===Mt&&(jt=Mt=null,Ft=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||bl||(bl=!0,Hw(Yt,function(){return Ei(),null})),E=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||E){E=Dn.transition,Dn.transition=null;var M=tt;tt=1;var Q=Ye;Ye|=4,Nd.current=null,$I(i,h),Tw(h,i),hI(Ou),Ma=!!Ru,Ou=Ru=null,i.current=h,HI(h),ti(),Ye=Q,tt=M,Dn.transition=E}else i.current=h;if(bl&&(bl=!1,no=i,wl=w),E=i.pendingLanes,E===0&&(to=null),su(h.stateNode),rn(i,ut()),c!==null)for(y=i.onRecoverableError,h=0;h<c.length;h++)w=c[h],y(w.value,{componentStack:w.stack,digest:w.digest});if(xl)throw xl=!1,i=Cd,Cd=null,i;return(wl&1)!==0&&i.tag!==0&&Ei(),E=i.pendingLanes,(E&1)!==0?i===Td?Rs++:(Rs=0,Td=i):Rs=0,Xr(),null}function Ei(){if(no!==null){var i=Ex(wl),c=Dn.transition,h=tt;try{if(Dn.transition=null,tt=16>i?16:i,no===null)var y=!1;else{if(i=no,no=null,wl=0,(Ye&6)!==0)throw Error(n(331));var w=Ye;for(Ye|=4,Te=i.current;Te!==null;){var E=Te,M=E.child;if((Te.flags&16)!==0){var Q=E.deletions;if(Q!==null){for(var Z=0;Z<Q.length;Z++){var se=Q[Z];for(Te=se;Te!==null;){var me=Te;switch(me.tag){case 0:case 11:case 15:As(8,me,E)}var ye=me.child;if(ye!==null)ye.return=me,Te=ye;else for(;Te!==null;){me=Te;var fe=me.sibling,Ne=me.return;if(kw(me),me===se){Te=null;break}if(fe!==null){fe.return=Ne,Te=fe;break}Te=Ne}}}var Pe=E.alternate;if(Pe!==null){var Ie=Pe.child;if(Ie!==null){Pe.child=null;do{var _t=Ie.sibling;Ie.sibling=null,Ie=_t}while(Ie!==null)}}Te=E}}if((E.subtreeFlags&2064)!==0&&M!==null)M.return=E,Te=M;else e:for(;Te!==null;){if(E=Te,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:As(9,E,E.return)}var oe=E.sibling;if(oe!==null){oe.return=E.return,Te=oe;break e}Te=E.return}}var ee=i.current;for(Te=ee;Te!==null;){M=Te;var ie=M.child;if((M.subtreeFlags&2064)!==0&&ie!==null)ie.return=M,Te=ie;else e:for(M=ee;Te!==null;){if(Q=Te,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:gl(9,Q)}}catch(Re){bt(Q,Q.return,Re)}if(Q===M){Te=null;break e}var be=Q.sibling;if(be!==null){be.return=Q.return,Te=be;break e}Te=Q.return}}if(Ye=w,Xr(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(wo,i)}catch{}y=!0}return y}finally{tt=h,Dn.transition=c}}return!1}function zw(i,c,h){c=Si(h,c),c=ow(i,c,1),i=Zr(i,c,1),c=Xt(),i!==null&&(_o(i,1,c),rn(i,c))}function bt(i,c,h){if(i.tag===3)zw(i,i,h);else for(;c!==null;){if(c.tag===3){zw(c,i,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(to===null||!to.has(y))){i=Si(h,i),i=iw(c,i,1),c=Zr(c,i,1),i=Xt(),c!==null&&(_o(c,1,i),rn(c,i));break}}c=c.return}}function YI(i,c,h){var y=i.pingCache;y!==null&&y.delete(c),c=Xt(),i.pingedLanes|=i.suspendedLanes&h,Mt===i&&(Ft&h)===h&&(It===4||It===3&&(Ft&130023424)===Ft&&500>ut()-Ed?Io(i,0):jd|=h),rn(i,c)}function Bw(i,c){c===0&&((i.mode&1)===0?c=1:(c=ri,ri<<=1,(ri&130023424)===0&&(ri=4194304)));var h=Xt();i=jr(i,c),i!==null&&(_o(i,c,h),rn(i,h))}function QI(i){var c=i.memoizedState,h=0;c!==null&&(h=c.retryLane),Bw(i,h)}function XI(i,c){var h=0;switch(i.tag){case 13:var y=i.stateNode,w=i.memoizedState;w!==null&&(h=w.retryLane);break;case 19:y=i.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(c),Bw(i,h)}var $w;$w=function(i,c,h){if(i!==null)if(i.memoizedProps!==c.pendingProps||Zt.current)tn=!0;else{if((i.lanes&h)===0&&(c.flags&128)===0)return tn=!1,qI(i,c,h);tn=(i.flags&131072)!==0}else tn=!1,ht&&(c.flags&1048576)!==0&&wb(c,Za,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;hl(i,c),i=c.pendingProps;var w=mi(c,Bt.current);wi(c,h),w=od(null,c,y,i,w,h);var E=id();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,en(y)?(E=!0,Qa(c)):E=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Xu(c),w.updater=pl,c.stateNode=w,w._reactInternals=c,dd(c,y,i,h),c=md(null,c,y,!0,E,h)):(c.tag=0,ht&&E&&Bu(c),Qt(null,c,w,h),c=c.child),c;case 16:y=c.elementType;e:{switch(hl(i,c),i=c.pendingProps,w=y._init,y=w(y._payload),c.type=y,w=c.tag=ZI(y),i=Kn(y,i),w){case 0:c=hd(null,c,y,i,h);break e;case 1:c=hw(null,c,y,i,h);break e;case 11:c=cw(null,c,y,i,h);break e;case 14:c=uw(null,c,y,Kn(y.type,i),h);break e}throw Error(n(306,y,""))}return c;case 0:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:Kn(y,w),hd(i,c,y,w,h);case 1:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:Kn(y,w),hw(i,c,y,w,h);case 3:e:{if(mw(c),i===null)throw Error(n(387));y=c.pendingProps,E=c.memoizedState,w=E.element,Ab(i,c),il(c,y,null,h);var M=c.memoizedState;if(y=M.element,E.isDehydrated)if(E={element:y,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){w=Si(Error(n(423)),c),c=gw(i,c,y,h,w);break e}else if(y!==w){w=Si(Error(n(424)),c),c=gw(i,c,y,h,w);break e}else for(bn=Gr(c.stateNode.containerInfo.firstChild),xn=c,ht=!0,Wn=null,h=Cb(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(vi(),y===w){c=Cr(i,c,h);break e}Qt(i,c,y,h)}c=c.child}return c;case 5:return Rb(c),i===null&&Vu(c),y=c.type,w=c.pendingProps,E=i!==null?i.memoizedProps:null,M=w.children,Mu(y,w)?M=null:E!==null&&Mu(y,E)&&(c.flags|=32),fw(i,c),Qt(i,c,M,h),c.child;case 6:return i===null&&Vu(c),null;case 13:return yw(i,c,h);case 4:return Ju(c,c.stateNode.containerInfo),y=c.pendingProps,i===null?c.child=xi(c,null,y,h):Qt(i,c,y,h),c.child;case 11:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:Kn(y,w),cw(i,c,y,w,h);case 7:return Qt(i,c,c.pendingProps,h),c.child;case 8:return Qt(i,c,c.pendingProps.children,h),c.child;case 12:return Qt(i,c,c.pendingProps.children,h),c.child;case 10:e:{if(y=c.type._context,w=c.pendingProps,E=c.memoizedProps,M=w.value,it(nl,y._currentValue),y._currentValue=M,E!==null)if(Un(E.value,M)){if(E.children===w.children&&!Zt.current){c=Cr(i,c,h);break e}}else for(E=c.child,E!==null&&(E.return=c);E!==null;){var Q=E.dependencies;if(Q!==null){M=E.child;for(var Z=Q.firstContext;Z!==null;){if(Z.context===y){if(E.tag===1){Z=Er(-1,h&-h),Z.tag=2;var se=E.updateQueue;if(se!==null){se=se.shared;var me=se.pending;me===null?Z.next=Z:(Z.next=me.next,me.next=Z),se.pending=Z}}E.lanes|=h,Z=E.alternate,Z!==null&&(Z.lanes|=h),Yu(E.return,h,c),Q.lanes|=h;break}Z=Z.next}}else if(E.tag===10)M=E.type===c.type?null:E.child;else if(E.tag===18){if(M=E.return,M===null)throw Error(n(341));M.lanes|=h,Q=M.alternate,Q!==null&&(Q.lanes|=h),Yu(M,h,c),M=E.sibling}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===c){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}Qt(i,c,w.children,h),c=c.child}return c;case 9:return w=c.type,y=c.pendingProps.children,wi(c,h),w=On(w),y=y(w),c.flags|=1,Qt(i,c,y,h),c.child;case 14:return y=c.type,w=Kn(y,c.pendingProps),w=Kn(y.type,w),uw(i,c,y,w,h);case 15:return dw(i,c,c.type,c.pendingProps,h);case 17:return y=c.type,w=c.pendingProps,w=c.elementType===y?w:Kn(y,w),hl(i,c),c.tag=1,en(y)?(i=!0,Qa(c)):i=!1,wi(c,h),nw(c,y,w),dd(c,y,w,h),md(null,c,y,!0,i,h);case 19:return xw(i,c,h);case 22:return pw(i,c,h)}throw Error(n(156,c.tag))};function Hw(i,c){return ei(i,c)}function JI(i,c,h,y){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(i,c,h,y){return new JI(i,c,h,y)}function Md(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ZI(i){if(typeof i=="function")return Md(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z)return 11;if(i===q)return 14}return 2}function io(i,c){var h=i.alternate;return h===null?(h=Ln(i.tag,c,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=c,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,c=i.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function Nl(i,c,h,y,w,E){var M=2;if(y=i,typeof i=="function")Md(i)&&(M=1);else if(typeof i=="string")M=5;else e:switch(i){case P:return Oo(h.children,w,E,c);case O:M=8,w|=8;break;case I:return i=Ln(12,h,c,w|2),i.elementType=I,i.lanes=E,i;case W:return i=Ln(13,h,c,w),i.elementType=W,i.lanes=E,i;case L:return i=Ln(19,h,c,w),i.elementType=L,i.lanes=E,i;case G:return jl(h,w,E,c);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case H:M=10;break e;case D:M=9;break e;case z:M=11;break e;case q:M=14;break e;case $:M=16,y=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return c=Ln(M,h,c,w),c.elementType=i,c.type=y,c.lanes=E,c}function Oo(i,c,h,y){return i=Ln(7,i,y,c),i.lanes=h,i}function jl(i,c,h,y){return i=Ln(22,i,y,c),i.elementType=G,i.lanes=h,i.stateNode={isHidden:!1},i}function Dd(i,c,h){return i=Ln(6,i,null,c),i.lanes=h,i}function Ld(i,c,h){return c=Ln(4,i.children!==null?i.children:[],i.key,c),c.lanes=h,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}function eR(i,c,h,y,w){this.tag=c,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rs(0),this.expirationTimes=rs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rs(0),this.identifierPrefix=y,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function qd(i,c,h,y,w,E,M,Q,Z){return i=new eR(i,c,h,Q,Z),c===1?(c=1,E===!0&&(c|=8)):c=0,E=Ln(3,null,null,c),i.current=E,E.stateNode=i,E.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xu(E),i}function tR(i,c,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:y==null?null:""+y,children:i,containerInfo:c,implementation:h}}function Vw(i){if(!i)return Qr;i=i._reactInternals;e:{if(kt(i)!==i||i.tag!==1)throw Error(n(170));var c=i;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(en(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(i.tag===1){var h=i.type;if(en(h))return vb(i,h,c)}return c}function Uw(i,c,h,y,w,E,M,Q,Z){return i=qd(h,y,!0,i,w,E,M,Q,Z),i.context=Vw(null),h=i.current,y=Xt(),w=ro(h),E=Er(y,w),E.callback=c??null,Zr(h,E,w),i.current.lanes=w,_o(i,w,y),rn(i,y),i}function El(i,c,h,y){var w=c.current,E=Xt(),M=ro(w);return h=Vw(h),c.context===null?c.context=h:c.pendingContext=h,c=Er(E,M),c.payload={element:i},y=y===void 0?null:y,y!==null&&(c.callback=y),i=Zr(w,c,M),i!==null&&(Qn(i,w,M,E),ol(i,w,M)),M}function Cl(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function Ww(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<c?h:c}}function Fd(i,c){Ww(i,c),(i=i.alternate)&&Ww(i,c)}function nR(){return null}var Kw=typeof reportError=="function"?reportError:function(i){console.error(i)};function zd(i){this._internalRoot=i}Tl.prototype.render=zd.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(n(409));El(i,c,null,null)},Tl.prototype.unmount=zd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;Po(function(){El(null,i,null,null)}),c[_r]=null}};function Tl(i){this._internalRoot=i}Tl.prototype.unstable_scheduleHydration=function(i){if(i){var c=Ax();i={blockedOn:null,target:i,priority:c};for(var h=0;h<Ur.length&&c!==0&&c<Ur[h].priority;h++);Ur.splice(h,0,i),h===0&&Rx(i)}};function Bd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Al(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Gw(){}function rR(i,c,h,y,w){if(w){if(typeof y=="function"){var E=y;y=function(){var se=Cl(M);E.call(se)}}var M=Uw(c,y,i,0,null,!1,!1,"",Gw);return i._reactRootContainer=M,i[_r]=M.current,ys(i.nodeType===8?i.parentNode:i),Po(),M}for(;w=i.lastChild;)i.removeChild(w);if(typeof y=="function"){var Q=y;y=function(){var se=Cl(Z);Q.call(se)}}var Z=qd(i,0,!1,null,null,!1,!1,"",Gw);return i._reactRootContainer=Z,i[_r]=Z.current,ys(i.nodeType===8?i.parentNode:i),Po(function(){El(c,Z,h,y)}),Z}function Pl(i,c,h,y,w){var E=h._reactRootContainer;if(E){var M=E;if(typeof w=="function"){var Q=w;w=function(){var Z=Cl(M);Q.call(Z)}}El(c,M,i,w)}else M=rR(h,c,i,w,y);return Cl(M)}Cx=function(i){switch(i.tag){case 3:var c=i.stateNode;if(c.current.memoizedState.isDehydrated){var h=Br(c.pendingLanes);h!==0&&(du(c,h|1),rn(c,ut()),(Ye&6)===0&&(ji=ut()+500,Xr()))}break;case 13:Po(function(){var y=jr(i,1);if(y!==null){var w=Xt();Qn(y,i,1,w)}}),Fd(i,1)}},pu=function(i){if(i.tag===13){var c=jr(i,134217728);if(c!==null){var h=Xt();Qn(c,i,134217728,h)}Fd(i,134217728)}},Tx=function(i){if(i.tag===13){var c=ro(i),h=jr(i,c);if(h!==null){var y=Xt();Qn(h,i,c,y)}Fd(i,c)}},Ax=function(){return tt},Px=function(i,c){var h=tt;try{return tt=i,c()}finally{tt=h}},Hn=function(i,c,h){switch(c){case"input":if(Se(i,h),c=h.name,h.type==="radio"&&c!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==i&&y.form===i.form){var w=Ga(y);if(!w)throw Error(n(90));le(y),Se(y,w)}}}break;case"textarea":lt(i,h);break;case"select":c=h.value,c!=null&&Ee(i,!!h.multiple,c,!1)}},xr=Id,zr=Po;var oR={usingClientEntryPoint:!1,Events:[bs,fi,Ga,qr,Fr,Id]},Os={findFiberByHostInstance:So,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iR={bundleType:Os.bundleType,version:Os.version,rendererPackageName:Os.rendererPackageName,rendererConfig:Os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Jo(i),i===null?null:i.stateNode},findFiberByHostInstance:Os.findFiberByHostInstance||nR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Il.isDisabled&&Il.supportsFiber)try{wo=Il.inject(iR),Pn=Il}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oR,on.createPortal=function(i,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bd(c))throw Error(n(200));return tR(i,c,null,h)},on.createRoot=function(i,c){if(!Bd(i))throw Error(n(299));var h=!1,y="",w=Kw;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=qd(i,1,!1,null,null,h,!1,y,w),i[_r]=c.current,ys(i.nodeType===8?i.parentNode:i),new zd(c)},on.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Jo(c),i=i===null?null:i.stateNode,i},on.flushSync=function(i){return Po(i)},on.hydrate=function(i,c,h){if(!Al(c))throw Error(n(200));return Pl(null,i,c,!0,h)},on.hydrateRoot=function(i,c,h){if(!Bd(i))throw Error(n(405));var y=h!=null&&h.hydratedSources||null,w=!1,E="",M=Kw;if(h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(E=h.identifierPrefix),h.onRecoverableError!==void 0&&(M=h.onRecoverableError)),c=Uw(c,null,i,1,h??null,w,!1,E,M),i[_r]=c.current,ys(i),y)for(i=0;i<y.length;i++)h=y[i],w=h._getVersion,w=w(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,w]:c.mutableSourceEagerHydrationData.push(h,w);return new Tl(c)},on.render=function(i,c,h){if(!Al(c))throw Error(n(200));return Pl(null,i,c,!1,h)},on.unmountComponentAtNode=function(i){if(!Al(i))throw Error(n(40));return i._reactRootContainer?(Po(function(){Pl(null,null,i,!1,function(){i._reactRootContainer=null,i[_r]=null})}),!0):!1},on.unstable_batchedUpdates=Id,on.unstable_renderSubtreeIntoContainer=function(i,c,h,y){if(!Al(h))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Pl(i,c,h,!1,y)},on.version="18.3.1-next-f1338f8080-20240426",on}var n0;function pC(){if(n0)return Vd.exports;n0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Vd.exports=pR(),Vd.exports}var r0;function fR(){if(r0)return Ol;r0=1;var e=pC();return Ol.createRoot=e.createRoot,Ol.hydrateRoot=e.hydrateRoot,Ol}var hR=fR();const mR=Wi(hR);function Ct(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ct(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var gR={value:()=>{}};function Ec(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Zl(n)}function Zl(e){this._=e}function yR(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zl.prototype=Ec.prototype={constructor:Zl,on:function(e,t){var n=this._,r=yR(e+"",n),o,a=-1,l=r.length;if(arguments.length<2){for(;++a<l;)if((o=(e=r[a]).type)&&(o=vR(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(o=(e=r[a]).type)n[o]=o0(n[o],e.name,t);else if(t==null)for(o in n)n[o]=o0(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zl(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function vR(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function o0(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=gR,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ky="http://www.w3.org/1999/xhtml";const i0={svg:"http://www.w3.org/2000/svg",xhtml:Ky,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),i0.hasOwnProperty(t)?{space:i0[t],local:e}:e}function xR(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ky&&t.documentElement.namespaceURI===Ky?t.createElement(e):t.createElementNS(n,e)}}function bR(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fC(e){var t=Cc(e);return(t.local?bR:xR)(t)}function wR(){}function jv(e){return e==null?wR:function(){return this.querySelector(e)}}function _R(e){typeof e!="function"&&(e=jv(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],l=a.length,u=r[o]=new Array(l),d,p,f=0;f<l;++f)(d=a[f])&&(p=e.call(d,d.__data__,f,a))&&("__data__"in d&&(p.__data__=d.__data__),u[f]=p);return new En(r,this._parents)}function SR(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function kR(){return[]}function hC(e){return e==null?kR:function(){return this.querySelectorAll(e)}}function NR(e){return function(){return SR(e.apply(this,arguments))}}function jR(e){typeof e=="function"?e=NR(e):e=hC(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var l=t[a],u=l.length,d,p=0;p<u;++p)(d=l[p])&&(r.push(e.call(d,d.__data__,p,l)),o.push(d));return new En(r,o)}function mC(e){return function(){return this.matches(e)}}function gC(e){return function(t){return t.matches(e)}}var ER=Array.prototype.find;function CR(e){return function(){return ER.call(this.children,e)}}function TR(){return this.firstElementChild}function AR(e){return this.select(e==null?TR:CR(typeof e=="function"?e:gC(e)))}var PR=Array.prototype.filter;function IR(){return Array.from(this.children)}function RR(e){return function(){return PR.call(this.children,e)}}function OR(e){return this.selectAll(e==null?IR:RR(typeof e=="function"?e:gC(e)))}function MR(e){typeof e!="function"&&(e=mC(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],l=a.length,u=r[o]=[],d,p=0;p<l;++p)(d=a[p])&&e.call(d,d.__data__,p,a)&&u.push(d);return new En(r,this._parents)}function yC(e){return new Array(e.length)}function DR(){return new En(this._enter||this._groups.map(yC),this._parents)}function sc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sc.prototype={constructor:sc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function LR(e){return function(){return e}}function qR(e,t,n,r,o,a){for(var l=0,u,d=t.length,p=a.length;l<p;++l)(u=t[l])?(u.__data__=a[l],r[l]=u):n[l]=new sc(e,a[l]);for(;l<d;++l)(u=t[l])&&(o[l]=u)}function FR(e,t,n,r,o,a,l){var u,d,p=new Map,f=t.length,m=a.length,g=new Array(f),v;for(u=0;u<f;++u)(d=t[u])&&(g[u]=v=l.call(d,d.__data__,u,t)+"",p.has(v)?o[u]=d:p.set(v,d));for(u=0;u<m;++u)v=l.call(e,a[u],u,a)+"",(d=p.get(v))?(r[u]=d,d.__data__=a[u],p.delete(v)):n[u]=new sc(e,a[u]);for(u=0;u<f;++u)(d=t[u])&&p.get(g[u])===d&&(o[u]=d)}function zR(e){return e.__data__}function BR(e,t){if(!arguments.length)return Array.from(this,zR);var n=t?FR:qR,r=this._parents,o=this._groups;typeof e!="function"&&(e=LR(e));for(var a=o.length,l=new Array(a),u=new Array(a),d=new Array(a),p=0;p<a;++p){var f=r[p],m=o[p],g=m.length,v=$R(e.call(f,f&&f.__data__,p,r)),b=v.length,x=u[p]=new Array(b),_=l[p]=new Array(b),k=d[p]=new Array(g);n(f,m,x,_,k,v,t);for(var S=0,N=0,T,A;S<b;++S)if(T=x[S]){for(S>=N&&(N=S+1);!(A=_[N])&&++N<b;);T._next=A||null}}return l=new En(l,r),l._enter=u,l._exit=d,l}function $R(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function HR(){return new En(this._exit||this._groups.map(yC),this._parents)}function VR(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function UR(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,l=Math.min(o,a),u=new Array(o),d=0;d<l;++d)for(var p=n[d],f=r[d],m=p.length,g=u[d]=new Array(m),v,b=0;b<m;++b)(v=p[b]||f[b])&&(g[b]=v);for(;d<o;++d)u[d]=n[d];return new En(u,this._parents)}function WR(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],l;--o>=0;)(l=r[o])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function KR(e){e||(e=GR);function t(m,g){return m&&g?e(m.__data__,g.__data__):!m-!g}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var l=n[a],u=l.length,d=o[a]=new Array(u),p,f=0;f<u;++f)(p=l[f])&&(d[f]=p);d.sort(t)}return new En(o,this._parents).order()}function GR(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function YR(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function QR(){return Array.from(this)}function XR(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var l=r[o];if(l)return l}return null}function JR(){let e=0;for(const t of this)++e;return e}function ZR(){return!this.node()}function eO(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,l=o.length,u;a<l;++a)(u=o[a])&&e.call(u,u.__data__,a,o);return this}function tO(e){return function(){this.removeAttribute(e)}}function nO(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rO(e,t){return function(){this.setAttribute(e,t)}}function oO(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function iO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function aO(e,t){var n=Cc(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?nO:tO:typeof t=="function"?n.local?sO:iO:n.local?oO:rO)(n,t))}function vC(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lO(e){return function(){this.style.removeProperty(e)}}function cO(e,t,n){return function(){this.style.setProperty(e,t,n)}}function uO(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dO(e,t,n){return arguments.length>1?this.each((t==null?lO:typeof t=="function"?uO:cO)(e,t,n??"")):Fi(this.node(),e)}function Fi(e,t){return e.style.getPropertyValue(t)||vC(e).getComputedStyle(e,null).getPropertyValue(t)}function pO(e){return function(){delete this[e]}}function fO(e,t){return function(){this[e]=t}}function hO(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mO(e,t){return arguments.length>1?this.each((t==null?pO:typeof t=="function"?hO:fO)(e,t)):this.node()[e]}function xC(e){return e.trim().split(/^|\s+/)}function Ev(e){return e.classList||new bC(e)}function bC(e){this._node=e,this._names=xC(e.getAttribute("class")||"")}bC.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wC(e,t){for(var n=Ev(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function _C(e,t){for(var n=Ev(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function gO(e){return function(){wC(this,e)}}function yO(e){return function(){_C(this,e)}}function vO(e,t){return function(){(t.apply(this,arguments)?wC:_C)(this,e)}}function xO(e,t){var n=xC(e+"");if(arguments.length<2){for(var r=Ev(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?vO:t?gO:yO)(n,t))}function bO(){this.textContent=""}function wO(e){return function(){this.textContent=e}}function _O(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function SO(e){return arguments.length?this.each(e==null?bO:(typeof e=="function"?_O:wO)(e)):this.node().textContent}function kO(){this.innerHTML=""}function NO(e){return function(){this.innerHTML=e}}function jO(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function EO(e){return arguments.length?this.each(e==null?kO:(typeof e=="function"?jO:NO)(e)):this.node().innerHTML}function CO(){this.nextSibling&&this.parentNode.appendChild(this)}function TO(){return this.each(CO)}function AO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function PO(){return this.each(AO)}function IO(e){var t=typeof e=="function"?e:fC(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function RO(){return null}function OO(e,t){var n=typeof e=="function"?e:fC(e),r=t==null?RO:typeof t=="function"?t:jv(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function MO(){var e=this.parentNode;e&&e.removeChild(this)}function DO(){return this.each(MO)}function LO(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qO(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function FO(e){return this.select(e?qO:LO)}function zO(e){return arguments.length?this.property("__data__",e):this.node().__data__}function BO(e){return function(t){e.call(this,t,this.__data__)}}function $O(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function HO(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function VO(e,t,n){return function(){var r=this.__on,o,a=BO(t);if(r){for(var l=0,u=r.length;l<u;++l)if((o=r[l]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function UO(e,t,n){var r=$O(e+""),o,a=r.length,l;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,p=u.length,f;d<p;++d)for(o=0,f=u[d];o<a;++o)if((l=r[o]).type===f.type&&l.name===f.name)return f.value}return}for(u=t?VO:HO,o=0;o<a;++o)this.each(u(r[o],t,n));return this}function SC(e,t,n){var r=vC(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function WO(e,t){return function(){return SC(this,e,t)}}function KO(e,t){return function(){return SC(this,e,t.apply(this,arguments))}}function GO(e,t){return this.each((typeof t=="function"?KO:WO)(e,t))}function*YO(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,l;o<a;++o)(l=r[o])&&(yield l)}var kC=[null];function En(e,t){this._groups=e,this._parents=t}function ha(){return new En([[document.documentElement]],kC)}function QO(){return this}En.prototype=ha.prototype={constructor:En,select:_R,selectAll:jR,selectChild:AR,selectChildren:OR,filter:MR,data:BR,enter:DR,exit:HR,join:VR,merge:UR,selection:QO,order:WR,sort:KR,call:YR,nodes:QR,node:XR,size:JR,empty:ZR,each:eO,attr:aO,style:dO,property:mO,classed:xO,text:SO,html:EO,raise:TO,lower:PO,append:IO,insert:OO,remove:DO,clone:FO,datum:zO,on:UO,dispatch:GO,[Symbol.iterator]:YO};function Nn(e){return typeof e=="string"?new En([[document.querySelector(e)]],[document.documentElement]):new En([[e]],kC)}function XO(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Jn(e,t){if(e=XO(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const JO={passive:!1},ta={capture:!0,passive:!1};function Kd(e){e.stopImmediatePropagation()}function Mi(e){e.preventDefault(),e.stopImmediatePropagation()}function NC(e){var t=e.document.documentElement,n=Nn(e).on("dragstart.drag",Mi,ta);"onselectstart"in t?n.on("selectstart.drag",Mi,ta):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function jC(e,t){var n=e.document.documentElement,r=Nn(e).on("dragstart.drag",null);t&&(r.on("click.drag",Mi,ta),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ml=e=>()=>e;function Gy(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:l,y:u,dx:d,dy:p,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:f}})}Gy.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ZO(e){return!e.ctrlKey&&!e.button}function eM(){return this.parentNode}function tM(e,t){return t??{x:e.x,y:e.y}}function nM(){return navigator.maxTouchPoints||"ontouchstart"in this}function EC(){var e=ZO,t=eM,n=tM,r=nM,o={},a=Ec("start","drag","end"),l=0,u,d,p,f,m=0;function g(T){T.on("mousedown.drag",v).filter(r).on("touchstart.drag",_).on("touchmove.drag",k,JO).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(T,A){if(!(f||!e.call(this,T,A))){var C=N(this,t.call(this,T,A),T,A,"mouse");C&&(Nn(T.view).on("mousemove.drag",b,ta).on("mouseup.drag",x,ta),NC(T.view),Kd(T),p=!1,u=T.clientX,d=T.clientY,C("start",T))}}function b(T){if(Mi(T),!p){var A=T.clientX-u,C=T.clientY-d;p=A*A+C*C>m}o.mouse("drag",T)}function x(T){Nn(T.view).on("mousemove.drag mouseup.drag",null),jC(T.view,p),Mi(T),o.mouse("end",T)}function _(T,A){if(e.call(this,T,A)){var C=T.changedTouches,P=t.call(this,T,A),O=C.length,I,H;for(I=0;I<O;++I)(H=N(this,P,T,A,C[I].identifier,C[I]))&&(Kd(T),H("start",T,C[I]))}}function k(T){var A=T.changedTouches,C=A.length,P,O;for(P=0;P<C;++P)(O=o[A[P].identifier])&&(Mi(T),O("drag",T,A[P]))}function S(T){var A=T.changedTouches,C=A.length,P,O;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),P=0;P<C;++P)(O=o[A[P].identifier])&&(Kd(T),O("end",T,A[P]))}function N(T,A,C,P,O,I){var H=a.copy(),D=Jn(I||C,A),z,W,L;if((L=n.call(T,new Gy("beforestart",{sourceEvent:C,target:g,identifier:O,active:l,x:D[0],y:D[1],dx:0,dy:0,dispatch:H}),P))!=null)return z=L.x-D[0]||0,W=L.y-D[1]||0,function q($,G,U){var X=D,R;switch($){case"start":o[O]=q,R=l++;break;case"end":delete o[O],--l;case"drag":D=Jn(U||G,A),R=l;break}H.call($,T,new Gy($,{sourceEvent:G,subject:L,target:g,identifier:O,active:R,x:D[0]+z,y:D[1]+W,dx:D[0]-X[0],dy:D[1]-X[1],dispatch:H}),P)}}return g.filter=function(T){return arguments.length?(e=typeof T=="function"?T:Ml(!!T),g):e},g.container=function(T){return arguments.length?(t=typeof T=="function"?T:Ml(T),g):t},g.subject=function(T){return arguments.length?(n=typeof T=="function"?T:Ml(T),g):n},g.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:Ml(!!T),g):r},g.on=function(){var T=a.on.apply(a,arguments);return T===a?g:T},g.clickDistance=function(T){return arguments.length?(m=(T=+T)*T,g):Math.sqrt(m)},g}function Cv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function CC(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ma(){}var na=.7,ac=1/na,Di="\\s*([+-]?\\d+)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rM=/^#([0-9a-f]{3,8})$/,oM=new RegExp(`^rgb\\(${Di},${Di},${Di}\\)$`),iM=new RegExp(`^rgb\\(${hr},${hr},${hr}\\)$`),sM=new RegExp(`^rgba\\(${Di},${Di},${Di},${ra}\\)$`),aM=new RegExp(`^rgba\\(${hr},${hr},${hr},${ra}\\)$`),lM=new RegExp(`^hsl\\(${ra},${hr},${hr}\\)$`),cM=new RegExp(`^hsla\\(${ra},${hr},${hr},${ra}\\)$`),s0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cv(ma,zo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:a0,formatHex:a0,formatHex8:uM,formatHsl:dM,formatRgb:l0,toString:l0});function a0(){return this.rgb().formatHex()}function uM(){return this.rgb().formatHex8()}function dM(){return TC(this).formatHsl()}function l0(){return this.rgb().formatRgb()}function zo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rM.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?c0(t):n===3?new ln(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oM.exec(e))?new ln(t[1],t[2],t[3],1):(t=iM.exec(e))?new ln(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sM.exec(e))?Dl(t[1],t[2],t[3],t[4]):(t=aM.exec(e))?Dl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lM.exec(e))?p0(t[1],t[2]/100,t[3]/100,1):(t=cM.exec(e))?p0(t[1],t[2]/100,t[3]/100,t[4]):s0.hasOwnProperty(e)?c0(s0[e]):e==="transparent"?new ln(NaN,NaN,NaN,0):null}function c0(e){return new ln(e>>16&255,e>>8&255,e&255,1)}function Dl(e,t,n,r){return r<=0&&(e=t=n=NaN),new ln(e,t,n,r)}function pM(e){return e instanceof ma||(e=zo(e)),e?(e=e.rgb(),new ln(e.r,e.g,e.b,e.opacity)):new ln}function Yy(e,t,n,r){return arguments.length===1?pM(e):new ln(e,t,n,r??1)}function ln(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Cv(ln,Yy,CC(ma,{brighter(e){return e=e==null?ac:Math.pow(ac,e),new ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?na:Math.pow(na,e),new ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ln(qo(this.r),qo(this.g),qo(this.b),lc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:u0,formatHex:u0,formatHex8:fM,formatRgb:d0,toString:d0}));function u0(){return`#${Lo(this.r)}${Lo(this.g)}${Lo(this.b)}`}function fM(){return`#${Lo(this.r)}${Lo(this.g)}${Lo(this.b)}${Lo((isNaN(this.opacity)?1:this.opacity)*255)}`}function d0(){const e=lc(this.opacity);return`${e===1?"rgb(":"rgba("}${qo(this.r)}, ${qo(this.g)}, ${qo(this.b)}${e===1?")":`, ${e})`}`}function lc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Lo(e){return e=qo(e),(e<16?"0":"")+e.toString(16)}function p0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new er(e,t,n,r)}function TC(e){if(e instanceof er)return new er(e.h,e.s,e.l,e.opacity);if(e instanceof ma||(e=zo(e)),!e)return new er;if(e instanceof er)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,u=a-o,d=(a+o)/2;return u?(t===a?l=(n-r)/u+(n<r)*6:n===a?l=(r-t)/u+2:l=(t-n)/u+4,u/=d<.5?a+o:2-a-o,l*=60):u=d>0&&d<1?0:l,new er(l,u,d,e.opacity)}function hM(e,t,n,r){return arguments.length===1?TC(e):new er(e,t,n,r??1)}function er(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Cv(er,hM,CC(ma,{brighter(e){return e=e==null?ac:Math.pow(ac,e),new er(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?na:Math.pow(na,e),new er(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new ln(Gd(e>=240?e-240:e+120,o,r),Gd(e,o,r),Gd(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new er(f0(this.h),Ll(this.s),Ll(this.l),lc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lc(this.opacity);return`${e===1?"hsl(":"hsla("}${f0(this.h)}, ${Ll(this.s)*100}%, ${Ll(this.l)*100}%${e===1?")":`, ${e})`}`}}));function f0(e){return e=(e||0)%360,e<0?e+360:e}function Ll(e){return Math.max(0,Math.min(1,e||0))}function Gd(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Tv=e=>()=>e;function mM(e,t){return function(n){return e+n*t}}function gM(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yM(e){return(e=+e)==1?AC:function(t,n){return n-t?gM(t,n,e):Tv(isNaN(t)?n:t)}}function AC(e,t){var n=t-e;return n?mM(e,n):Tv(isNaN(e)?t:e)}const cc=(function e(t){var n=yM(t);function r(o,a){var l=n((o=Yy(o)).r,(a=Yy(a)).r),u=n(o.g,a.g),d=n(o.b,a.b),p=AC(o.opacity,a.opacity);return function(f){return o.r=l(f),o.g=u(f),o.b=d(f),o.opacity=p(f),o+""}}return r.gamma=e,r})(1);function vM(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(a){for(o=0;o<n;++o)r[o]=e[o]*(1-a)+t[o]*a;return r}}function xM(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bM(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),a=new Array(n),l;for(l=0;l<r;++l)o[l]=Ys(e[l],t[l]);for(;l<n;++l)a[l]=t[l];return function(u){for(l=0;l<r;++l)a[l]=o[l](u);return a}}function wM(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function pr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function _M(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=Ys(e[o],t[o]):r[o]=t[o];return function(a){for(o in n)r[o]=n[o](a);return r}}var Qy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yd=new RegExp(Qy.source,"g");function SM(e){return function(){return e}}function kM(e){return function(t){return e(t)+""}}function PC(e,t){var n=Qy.lastIndex=Yd.lastIndex=0,r,o,a,l=-1,u=[],d=[];for(e=e+"",t=t+"";(r=Qy.exec(e))&&(o=Yd.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),u[l]?u[l]+=a:u[++l]=a),(r=r[0])===(o=o[0])?u[l]?u[l]+=o:u[++l]=o:(u[++l]=null,d.push({i:l,x:pr(r,o)})),n=Yd.lastIndex;return n<t.length&&(a=t.slice(n),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?kM(d[0].x):SM(t):(t=d.length,function(p){for(var f=0,m;f<t;++f)u[(m=d[f]).i]=m.x(p);return u.join("")})}function Ys(e,t){var n=typeof t,r;return t==null||n==="boolean"?Tv(t):(n==="number"?pr:n==="string"?(r=zo(t))?(t=r,cc):PC:t instanceof zo?cc:t instanceof Date?wM:xM(t)?vM:Array.isArray(t)?bM:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_M:pr)(e,t)}var h0=180/Math.PI,Xy={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function IC(e,t,n,r,o,a){var l,u,d;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(d=e*n+t*r)&&(n-=e*d,r-=t*d),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,d/=u),e*r<t*n&&(e=-e,t=-t,d=-d,l=-l),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*h0,skewX:Math.atan(d)*h0,scaleX:l,scaleY:u}}var ql;function NM(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xy:IC(t.a,t.b,t.c,t.d,t.e,t.f)}function jM(e){return e==null||(ql||(ql=document.createElementNS("http://www.w3.org/2000/svg","g")),ql.setAttribute("transform",e),!(e=ql.transform.baseVal.consolidate()))?Xy:(e=e.matrix,IC(e.a,e.b,e.c,e.d,e.e,e.f))}function RC(e,t,n,r){function o(p){return p.length?p.pop()+" ":""}function a(p,f,m,g,v,b){if(p!==m||f!==g){var x=v.push("translate(",null,t,null,n);b.push({i:x-4,x:pr(p,m)},{i:x-2,x:pr(f,g)})}else(m||g)&&v.push("translate("+m+t+g+n)}function l(p,f,m,g){p!==f?(p-f>180?f+=360:f-p>180&&(p+=360),g.push({i:m.push(o(m)+"rotate(",null,r)-2,x:pr(p,f)})):f&&m.push(o(m)+"rotate("+f+r)}function u(p,f,m,g){p!==f?g.push({i:m.push(o(m)+"skewX(",null,r)-2,x:pr(p,f)}):f&&m.push(o(m)+"skewX("+f+r)}function d(p,f,m,g,v,b){if(p!==m||f!==g){var x=v.push(o(v)+"scale(",null,",",null,")");b.push({i:x-4,x:pr(p,m)},{i:x-2,x:pr(f,g)})}else(m!==1||g!==1)&&v.push(o(v)+"scale("+m+","+g+")")}return function(p,f){var m=[],g=[];return p=e(p),f=e(f),a(p.translateX,p.translateY,f.translateX,f.translateY,m,g),l(p.rotate,f.rotate,m,g),u(p.skewX,f.skewX,m,g),d(p.scaleX,p.scaleY,f.scaleX,f.scaleY,m,g),p=f=null,function(v){for(var b=-1,x=g.length,_;++b<x;)m[(_=g[b]).i]=_.x(v);return m.join("")}}}var EM=RC(NM,"px, ","px)","deg)"),CM=RC(jM,", ",")",")"),TM=1e-12;function m0(e){return((e=Math.exp(e))+1/e)/2}function AM(e){return((e=Math.exp(e))-1/e)/2}function PM(e){return((e=Math.exp(2*e))-1)/(e+1)}const ec=(function e(t,n,r){function o(a,l){var u=a[0],d=a[1],p=a[2],f=l[0],m=l[1],g=l[2],v=f-u,b=m-d,x=v*v+b*b,_,k;if(x<TM)k=Math.log(g/p)/t,_=function(P){return[u+P*v,d+P*b,p*Math.exp(t*P*k)]};else{var S=Math.sqrt(x),N=(g*g-p*p+r*x)/(2*p*n*S),T=(g*g-p*p-r*x)/(2*g*n*S),A=Math.log(Math.sqrt(N*N+1)-N),C=Math.log(Math.sqrt(T*T+1)-T);k=(C-A)/t,_=function(P){var O=P*k,I=m0(A),H=p/(n*S)*(I*PM(t*O+A)-AM(A));return[u+H*v,d+H*b,p*I/m0(t*O+A)]}}return _.duration=k*1e3*t/Math.SQRT2,_}return o.rho=function(a){var l=Math.max(.001,+a),u=l*l,d=u*u;return e(l,u,d)},o})(Math.SQRT2,2,4);var zi=0,Hs=0,Ds=0,OC=1e3,uc,Vs,dc=0,Bo=0,Tc=0,oa=typeof performance=="object"&&performance.now?performance:Date,MC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Av(){return Bo||(MC(IM),Bo=oa.now()+Tc)}function IM(){Bo=0}function pc(){this._call=this._time=this._next=null}pc.prototype=DC.prototype={constructor:pc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Av():+n)+(t==null?0:+t),!this._next&&Vs!==this&&(Vs?Vs._next=this:uc=this,Vs=this),this._call=e,this._time=n,Jy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jy())}};function DC(e,t,n){var r=new pc;return r.restart(e,t,n),r}function RM(){Av(),++zi;for(var e=uc,t;e;)(t=Bo-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zi}function g0(){Bo=(dc=oa.now())+Tc,zi=Hs=0;try{RM()}finally{zi=0,MM(),Bo=0}}function OM(){var e=oa.now(),t=e-dc;t>OC&&(Tc-=t,dc=e)}function MM(){for(var e,t=uc,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:uc=n);Vs=e,Jy(r)}function Jy(e){if(!zi){Hs&&(Hs=clearTimeout(Hs));var t=e-Bo;t>24?(e<1/0&&(Hs=setTimeout(g0,e-oa.now()-Tc)),Ds&&(Ds=clearInterval(Ds))):(Ds||(dc=oa.now(),Ds=setInterval(OM,OC)),zi=1,MC(g0))}}function y0(e,t,n){var r=new pc;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var DM=Ec("start","end","cancel","interrupt"),LM=[],LC=0,v0=1,Zy=2,tc=3,x0=4,ev=5,nc=6;function Ac(e,t,n,r,o,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;qM(e,n,{name:t,index:r,group:o,on:DM,tween:LM,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:LC})}function Pv(e,t){var n=or(e,t);if(n.state>LC)throw new Error("too late; already scheduled");return n}function yr(e,t){var n=or(e,t);if(n.state>tc)throw new Error("too late; already running");return n}function or(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function qM(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=DC(a,0,n.time);function a(p){n.state=v0,n.timer.restart(l,n.delay,n.time),n.delay<=p&&l(p-n.delay)}function l(p){var f,m,g,v;if(n.state!==v0)return d();for(f in r)if(v=r[f],v.name===n.name){if(v.state===tc)return y0(l);v.state===x0?(v.state=nc,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete r[f]):+f<t&&(v.state=nc,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete r[f])}if(y0(function(){n.state===tc&&(n.state=x0,n.timer.restart(u,n.delay,n.time),u(p))}),n.state=Zy,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zy){for(n.state=tc,o=new Array(g=n.tween.length),f=0,m=-1;f<g;++f)(v=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(o[++m]=v);o.length=m+1}}function u(p){for(var f=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(d),n.state=ev,1),m=-1,g=o.length;++m<g;)o[m].call(e,f);n.state===ev&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=nc,n.timer.stop(),delete r[t];for(var p in r)return;delete e.__transition}}function rc(e,t){var n=e.__transition,r,o,a=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){a=!1;continue}o=r.state>Zy&&r.state<ev,r.state=nc,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}a&&delete e.__transition}}function FM(e){return this.each(function(){rc(this,e)})}function zM(e,t){var n,r;return function(){var o=yr(this,e),a=o.tween;if(a!==n){r=n=a;for(var l=0,u=r.length;l<u;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}o.tween=r}}function BM(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=yr(this,e),l=a.tween;if(l!==r){o=(r=l).slice();for(var u={name:t,value:n},d=0,p=o.length;d<p;++d)if(o[d].name===t){o[d]=u;break}d===p&&o.push(u)}a.tween=o}}function $M(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=or(this.node(),n).tween,o=0,a=r.length,l;o<a;++o)if((l=r[o]).name===e)return l.value;return null}return this.each((t==null?zM:BM)(n,e,t))}function Iv(e,t,n){var r=e._id;return e.each(function(){var o=yr(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return or(o,r).value[t]}}function qC(e,t){var n;return(typeof t=="number"?pr:t instanceof zo?cc:(n=zo(t))?(t=n,cc):PC)(e,t)}function HM(e){return function(){this.removeAttribute(e)}}function VM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function UM(e,t,n){var r,o=n+"",a;return function(){var l=this.getAttribute(e);return l===o?null:l===r?a:a=t(r=l,n)}}function WM(e,t,n){var r,o=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===o?null:l===r?a:a=t(r=l,n)}}function KM(e,t,n){var r,o,a;return function(){var l,u=n(this),d;return u==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=u+"",l===d?null:l===r&&d===o?a:(o=d,a=t(r=l,u)))}}function GM(e,t,n){var r,o,a;return function(){var l,u=n(this),d;return u==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=u+"",l===d?null:l===r&&d===o?a:(o=d,a=t(r=l,u)))}}function YM(e,t){var n=Cc(e),r=n==="transform"?CM:qC;return this.attrTween(e,typeof t=="function"?(n.local?GM:KM)(n,r,Iv(this,"attr."+e,t)):t==null?(n.local?VM:HM)(n):(n.local?WM:UM)(n,r,t))}function QM(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function XM(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function JM(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&XM(e,a)),n}return o._value=t,o}function ZM(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&QM(e,a)),n}return o._value=t,o}function eD(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Cc(e);return this.tween(n,(r.local?JM:ZM)(r,t))}function tD(e,t){return function(){Pv(this,e).delay=+t.apply(this,arguments)}}function nD(e,t){return t=+t,function(){Pv(this,e).delay=t}}function rD(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tD:nD)(t,e)):or(this.node(),t).delay}function oD(e,t){return function(){yr(this,e).duration=+t.apply(this,arguments)}}function iD(e,t){return t=+t,function(){yr(this,e).duration=t}}function sD(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oD:iD)(t,e)):or(this.node(),t).duration}function aD(e,t){if(typeof t!="function")throw new Error;return function(){yr(this,e).ease=t}}function lD(e){var t=this._id;return arguments.length?this.each(aD(t,e)):or(this.node(),t).ease}function cD(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yr(this,e).ease=n}}function uD(e){if(typeof e!="function")throw new Error;return this.each(cD(this._id,e))}function dD(e){typeof e!="function"&&(e=mC(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],l=a.length,u=r[o]=[],d,p=0;p<l;++p)(d=a[p])&&e.call(d,d.__data__,p,a)&&u.push(d);return new Ir(r,this._parents,this._name,this._id)}function pD(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),l=new Array(r),u=0;u<a;++u)for(var d=t[u],p=n[u],f=d.length,m=l[u]=new Array(f),g,v=0;v<f;++v)(g=d[v]||p[v])&&(m[v]=g);for(;u<r;++u)l[u]=t[u];return new Ir(l,this._parents,this._name,this._id)}function fD(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function hD(e,t,n){var r,o,a=fD(t)?Pv:yr;return function(){var l=a(this,e),u=l.on;u!==r&&(o=(r=u).copy()).on(t,n),l.on=o}}function mD(e,t){var n=this._id;return arguments.length<2?or(this.node(),n).on.on(e):this.each(hD(n,e,t))}function gD(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function yD(){return this.on("end.remove",gD(this._id))}function vD(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jv(e));for(var r=this._groups,o=r.length,a=new Array(o),l=0;l<o;++l)for(var u=r[l],d=u.length,p=a[l]=new Array(d),f,m,g=0;g<d;++g)(f=u[g])&&(m=e.call(f,f.__data__,g,u))&&("__data__"in f&&(m.__data__=f.__data__),p[g]=m,Ac(p[g],t,n,g,p,or(f,n)));return new Ir(a,this._parents,t,n)}function xD(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hC(e));for(var r=this._groups,o=r.length,a=[],l=[],u=0;u<o;++u)for(var d=r[u],p=d.length,f,m=0;m<p;++m)if(f=d[m]){for(var g=e.call(f,f.__data__,m,d),v,b=or(f,n),x=0,_=g.length;x<_;++x)(v=g[x])&&Ac(v,t,n,x,g,b);a.push(g),l.push(f)}return new Ir(a,l,t,n)}var bD=ha.prototype.constructor;function wD(){return new bD(this._groups,this._parents)}function _D(e,t){var n,r,o;return function(){var a=Fi(this,e),l=(this.style.removeProperty(e),Fi(this,e));return a===l?null:a===n&&l===r?o:o=t(n=a,r=l)}}function FC(e){return function(){this.style.removeProperty(e)}}function SD(e,t,n){var r,o=n+"",a;return function(){var l=Fi(this,e);return l===o?null:l===r?a:a=t(r=l,n)}}function kD(e,t,n){var r,o,a;return function(){var l=Fi(this,e),u=n(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(e),Fi(this,e))),l===d?null:l===r&&d===o?a:(o=d,a=t(r=l,u))}}function ND(e,t){var n,r,o,a="style."+t,l="end."+a,u;return function(){var d=yr(this,e),p=d.on,f=d.value[a]==null?u||(u=FC(t)):void 0;(p!==n||o!==f)&&(r=(n=p).copy()).on(l,o=f),d.on=r}}function jD(e,t,n){var r=(e+="")=="transform"?EM:qC;return t==null?this.styleTween(e,_D(e,r)).on("end.style."+e,FC(e)):typeof t=="function"?this.styleTween(e,kD(e,r,Iv(this,"style."+e,t))).each(ND(this._id,e)):this.styleTween(e,SD(e,r,t),n).on("end.style."+e,null)}function ED(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function CD(e,t,n){var r,o;function a(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&ED(e,l,n)),r}return a._value=t,a}function TD(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,CD(e,t,n??""))}function AD(e){return function(){this.textContent=e}}function PD(e){return function(){var t=e(this);this.textContent=t??""}}function ID(e){return this.tween("text",typeof e=="function"?PD(Iv(this,"text",e)):AD(e==null?"":e+""))}function RD(e){return function(t){this.textContent=e.call(this,t)}}function OD(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&RD(o)),t}return r._value=e,r}function MD(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,OD(e))}function DD(){for(var e=this._name,t=this._id,n=zC(),r=this._groups,o=r.length,a=0;a<o;++a)for(var l=r[a],u=l.length,d,p=0;p<u;++p)if(d=l[p]){var f=or(d,t);Ac(d,e,n,p,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ir(r,this._parents,e,n)}function LD(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,l){var u={value:l},d={value:function(){--o===0&&a()}};n.each(function(){var p=yr(this,r),f=p.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(d)),p.on=t}),o===0&&a()})}var qD=0;function Ir(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zC(){return++qD}var Ar=ha.prototype;Ir.prototype={constructor:Ir,select:vD,selectAll:xD,selectChild:Ar.selectChild,selectChildren:Ar.selectChildren,filter:dD,merge:pD,selection:wD,transition:DD,call:Ar.call,nodes:Ar.nodes,node:Ar.node,size:Ar.size,empty:Ar.empty,each:Ar.each,on:mD,attr:YM,attrTween:eD,style:jD,styleTween:TD,text:ID,textTween:MD,remove:yD,tween:$M,delay:rD,duration:sD,ease:lD,easeVarying:uD,end:LD,[Symbol.iterator]:Ar[Symbol.iterator]};function FD(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var zD={time:null,delay:0,duration:250,ease:FD};function BD(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function $D(e){var t,n;e instanceof Ir?(t=e._id,e=e._name):(t=zC(),(n=zD).time=Av(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var l=r[a],u=l.length,d,p=0;p<u;++p)(d=l[p])&&Ac(d,e,t,p,l,n||BD(d,t));return new Ir(r,this._parents,e,t)}ha.prototype.interrupt=FM;ha.prototype.transition=$D;const Fl=e=>()=>e;function HD(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Pr(e,t,n){this.k=e,this.x=t,this.y=n}Pr.prototype={constructor:Pr,scale:function(e){return e===1?this:new Pr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Pr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pc=new Pr(1,0,0);BC.prototype=Pr.prototype;function BC(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Pc;return e.__zoom}function Qd(e){e.stopImmediatePropagation()}function Ls(e){e.preventDefault(),e.stopImmediatePropagation()}function VD(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function UD(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function b0(){return this.__zoom||Pc}function WD(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function KD(){return navigator.maxTouchPoints||"ontouchstart"in this}function GD(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function $C(){var e=VD,t=UD,n=GD,r=WD,o=KD,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],u=250,d=ec,p=Ec("start","zoom","end"),f,m,g,v=500,b=150,x=0,_=10;function k(L){L.property("__zoom",b0).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",H).filter(o).on("touchstart.zoom",D).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(L,q,$,G){var U=L.selection?L.selection():L;U.property("__zoom",b0),L!==U?A(L,q,$,G):U.interrupt().each(function(){C(this,arguments).event(G).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},k.scaleBy=function(L,q,$,G){k.scaleTo(L,function(){var U=this.__zoom.k,X=typeof q=="function"?q.apply(this,arguments):q;return U*X},$,G)},k.scaleTo=function(L,q,$,G){k.transform(L,function(){var U=t.apply(this,arguments),X=this.__zoom,R=$==null?T(U):typeof $=="function"?$.apply(this,arguments):$,B=X.invert(R),Y=typeof q=="function"?q.apply(this,arguments):q;return n(N(S(X,Y),R,B),U,l)},$,G)},k.translateBy=function(L,q,$,G){k.transform(L,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof $=="function"?$.apply(this,arguments):$),t.apply(this,arguments),l)},null,G)},k.translateTo=function(L,q,$,G,U){k.transform(L,function(){var X=t.apply(this,arguments),R=this.__zoom,B=G==null?T(X):typeof G=="function"?G.apply(this,arguments):G;return n(Pc.translate(B[0],B[1]).scale(R.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof $=="function"?-$.apply(this,arguments):-$),X,l)},G,U)};function S(L,q){return q=Math.max(a[0],Math.min(a[1],q)),q===L.k?L:new Pr(q,L.x,L.y)}function N(L,q,$){var G=q[0]-$[0]*L.k,U=q[1]-$[1]*L.k;return G===L.x&&U===L.y?L:new Pr(L.k,G,U)}function T(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function A(L,q,$,G){L.on("start.zoom",function(){C(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(G).end()}).tween("zoom",function(){var U=this,X=arguments,R=C(U,X).event(G),B=t.apply(U,X),Y=$==null?T(B):typeof $=="function"?$.apply(U,X):$,F=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),K=U.__zoom,J=typeof q=="function"?q.apply(U,X):q,te=d(K.invert(Y).concat(F/K.k),J.invert(Y).concat(F/J.k));return function(re){if(re===1)re=J;else{var V=te(re),ne=F/V[2];re=new Pr(ne,Y[0]-V[0]*ne,Y[1]-V[1]*ne)}R.zoom(null,re)}})}function C(L,q,$){return!$&&L.__zooming||new P(L,q)}function P(L,q){this.that=L,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(L,q),this.taps=0}P.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,q){return this.mouse&&L!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var q=Nn(this.that).datum();p.call(L,this.that,new HD(L,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:p}),q)}};function O(L,...q){if(!e.apply(this,arguments))return;var $=C(this,q).event(L),G=this.__zoom,U=Math.max(a[0],Math.min(a[1],G.k*Math.pow(2,r.apply(this,arguments)))),X=Jn(L);if($.wheel)($.mouse[0][0]!==X[0]||$.mouse[0][1]!==X[1])&&($.mouse[1]=G.invert($.mouse[0]=X)),clearTimeout($.wheel);else{if(G.k===U)return;$.mouse=[X,G.invert(X)],rc(this),$.start()}Ls(L),$.wheel=setTimeout(R,b),$.zoom("mouse",n(N(S(G,U),$.mouse[0],$.mouse[1]),$.extent,l));function R(){$.wheel=null,$.end()}}function I(L,...q){if(g||!e.apply(this,arguments))return;var $=L.currentTarget,G=C(this,q,!0).event(L),U=Nn(L.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",F,!0),X=Jn(L,$),R=L.clientX,B=L.clientY;NC(L.view),Qd(L),G.mouse=[X,this.__zoom.invert(X)],rc(this),G.start();function Y(K){if(Ls(K),!G.moved){var J=K.clientX-R,te=K.clientY-B;G.moved=J*J+te*te>x}G.event(K).zoom("mouse",n(N(G.that.__zoom,G.mouse[0]=Jn(K,$),G.mouse[1]),G.extent,l))}function F(K){U.on("mousemove.zoom mouseup.zoom",null),jC(K.view,G.moved),Ls(K),G.event(K).end()}}function H(L,...q){if(e.apply(this,arguments)){var $=this.__zoom,G=Jn(L.changedTouches?L.changedTouches[0]:L,this),U=$.invert(G),X=$.k*(L.shiftKey?.5:2),R=n(N(S($,X),G,U),t.apply(this,q),l);Ls(L),u>0?Nn(this).transition().duration(u).call(A,R,G,L):Nn(this).call(k.transform,R,G,L)}}function D(L,...q){if(e.apply(this,arguments)){var $=L.touches,G=$.length,U=C(this,q,L.changedTouches.length===G).event(L),X,R,B,Y;for(Qd(L),R=0;R<G;++R)B=$[R],Y=Jn(B,this),Y=[Y,this.__zoom.invert(Y),B.identifier],U.touch0?!U.touch1&&U.touch0[2]!==Y[2]&&(U.touch1=Y,U.taps=0):(U.touch0=Y,X=!0,U.taps=1+!!f);f&&(f=clearTimeout(f)),X&&(U.taps<2&&(m=Y[0],f=setTimeout(function(){f=null},v)),rc(this),U.start())}}function z(L,...q){if(this.__zooming){var $=C(this,q).event(L),G=L.changedTouches,U=G.length,X,R,B,Y;for(Ls(L),X=0;X<U;++X)R=G[X],B=Jn(R,this),$.touch0&&$.touch0[2]===R.identifier?$.touch0[0]=B:$.touch1&&$.touch1[2]===R.identifier&&($.touch1[0]=B);if(R=$.that.__zoom,$.touch1){var F=$.touch0[0],K=$.touch0[1],J=$.touch1[0],te=$.touch1[1],re=(re=J[0]-F[0])*re+(re=J[1]-F[1])*re,V=(V=te[0]-K[0])*V+(V=te[1]-K[1])*V;R=S(R,Math.sqrt(re/V)),B=[(F[0]+J[0])/2,(F[1]+J[1])/2],Y=[(K[0]+te[0])/2,(K[1]+te[1])/2]}else if($.touch0)B=$.touch0[0],Y=$.touch0[1];else return;$.zoom("touch",n(N(R,B,Y),$.extent,l))}}function W(L,...q){if(this.__zooming){var $=C(this,q).event(L),G=L.changedTouches,U=G.length,X,R;for(Qd(L),g&&clearTimeout(g),g=setTimeout(function(){g=null},v),X=0;X<U;++X)R=G[X],$.touch0&&$.touch0[2]===R.identifier?delete $.touch0:$.touch1&&$.touch1[2]===R.identifier&&delete $.touch1;if($.touch1&&!$.touch0&&($.touch0=$.touch1,delete $.touch1),$.touch0)$.touch0[1]=this.__zoom.invert($.touch0[0]);else if($.end(),$.taps===2&&(R=Jn(R,this),Math.hypot(m[0]-R[0],m[1]-R[1])<_)){var B=Nn(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return k.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:Fl(+L),k):r},k.filter=function(L){return arguments.length?(e=typeof L=="function"?L:Fl(!!L),k):e},k.touchable=function(L){return arguments.length?(o=typeof L=="function"?L:Fl(!!L),k):o},k.extent=function(L){return arguments.length?(t=typeof L=="function"?L:Fl([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),k):t},k.scaleExtent=function(L){return arguments.length?(a[0]=+L[0],a[1]=+L[1],k):[a[0],a[1]]},k.translateExtent=function(L){return arguments.length?(l[0][0]=+L[0][0],l[1][0]=+L[1][0],l[0][1]=+L[0][1],l[1][1]=+L[1][1],k):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},k.constrain=function(L){return arguments.length?(n=L,k):n},k.duration=function(L){return arguments.length?(u=+L,k):u},k.interpolate=function(L){return arguments.length?(d=L,k):d},k.on=function(){var L=p.on.apply(p,arguments);return L===p?k:L},k.clickDistance=function(L){return arguments.length?(x=(L=+L)*L,k):Math.sqrt(x)},k.tapDistance=function(L){return arguments.length?(_=+L,k):_},k}const mr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ia=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],HC=["Enter"," ","Escape"],VC={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Bi;(function(e){e.Strict="strict",e.Loose="loose"})(Bi||(Bi={}));var Fo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Fo||(Fo={}));var sa;(function(e){e.Partial="partial",e.Full="full"})(sa||(sa={}));const UC={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var po;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(po||(po={}));var fc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(fc||(fc={}));var je;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(je||(je={}));const w0={[je.Left]:je.Right,[je.Right]:je.Left,[je.Top]:je.Bottom,[je.Bottom]:je.Top};function WC(e){return e===null?null:e?"valid":"invalid"}const KC=e=>"id"in e&&"source"in e&&"target"in e,YD=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Rv=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ga=(e,t=[0,0])=>{const{width:n,height:r}=Rr(e),o=e.origin??t,a=n*o[0],l=r*o[1];return{x:e.position.x-a,y:e.position.y-l}},QD=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const a=typeof o=="string";let l=!t.nodeLookup&&!a?o:void 0;t.nodeLookup&&(l=a?t.nodeLookup.get(o):Rv(o)?o:t.nodeLookup.get(o.id));const u=l?hc(l,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ic(r,u)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Rc(n)},ya=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(o=>{(t.filter===void 0||t.filter(o))&&(n=Ic(n,hc(o)),r=!0)}),r?Rc(n):{x:0,y:0,width:0,height:0}},Ov=(e,t,[n,r,o]=[0,0,1],a=!1,l=!1)=>{const u={...xa(t,[n,r,o]),width:t.width/o,height:t.height/o},d=[];for(const p of e.values()){const{measured:f,selectable:m=!0,hidden:g=!1}=p;if(l&&!m||g)continue;const v=f.width??p.width??p.initialWidth??null,b=f.height??p.height??p.initialHeight??null,x=aa(u,Hi(p)),_=(v??0)*(b??0),k=a&&x>0;(!p.internals.handleBounds||k||x>=_||p.dragging)&&d.push(p)}return d},XD=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function JD(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(t?.includeHiddenNodes||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function ZD({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:a},l){if(e.size===0)return Promise.resolve(!0);const u=JD(e,l),d=ya(u),p=Mv(d,t,n,l?.minZoom??o,l?.maxZoom??a,l?.padding??.1);return await r.setViewport(p,{duration:l?.duration,ease:l?.ease,interpolate:l?.interpolate}),Promise.resolve(!0)}function GC({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:a}){const l=n.get(e),u=l.parentId?n.get(l.parentId):void 0,{x:d,y:p}=u?u.internals.positionAbsolute:{x:0,y:0},f=l.origin??r;let m=l.extent||o;if(l.extent==="parent"&&!l.expandParent)if(!u)a?.("005",mr.error005());else{const v=u.measured.width,b=u.measured.height;v&&b&&(m=[[d,p],[d+v,p+b]])}else u&&Vi(l.extent)&&(m=[[l.extent[0][0]+d,l.extent[0][1]+p],[l.extent[1][0]+d,l.extent[1][1]+p]]);const g=Vi(m)?$o(t,m,l.measured):t;return(l.measured.width===void 0||l.measured.height===void 0)&&a?.("015",mr.error015()),{position:{x:g.x-d+(l.measured.width??0)*f[0],y:g.y-p+(l.measured.height??0)*f[1]},positionAbsolute:g}}async function eL({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const a=new Set(e.map(g=>g.id)),l=[];for(const g of n){if(g.deletable===!1)continue;const v=a.has(g.id),b=!v&&g.parentId&&l.find(x=>x.id===g.parentId);(v||b)&&l.push(g)}const u=new Set(t.map(g=>g.id)),d=r.filter(g=>g.deletable!==!1),f=XD(l,d);for(const g of d)u.has(g.id)&&!f.find(b=>b.id===g.id)&&f.push(g);if(!o)return{edges:f,nodes:l};const m=await o({nodes:l,edges:f});return typeof m=="boolean"?m?{edges:f,nodes:l}:{edges:[],nodes:[]}:m}const $i=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),$o=(e={x:0,y:0},t,n)=>({x:$i(e.x,t[0][0],t[1][0]-(n?.width??0)),y:$i(e.y,t[0][1],t[1][1]-(n?.height??0))});function YC(e,t,n){const{width:r,height:o}=Rr(n),{x:a,y:l}=n.internals.positionAbsolute;return $o(e,[[a,l],[a+r,l+o]],t)}const _0=(e,t,n)=>e<t?$i(Math.abs(e-t),1,t)/t:e>n?-$i(Math.abs(e-n),1,t)/t:0,QC=(e,t,n=15,r=40)=>{const o=_0(e.x,r,t.width-r)*n,a=_0(e.y,r,t.height-r)*n;return[o,a]},Ic=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),tv=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Rc=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Hi=(e,t=[0,0])=>{const{x:n,y:r}=Rv(e)?e.internals.positionAbsolute:ga(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},hc=(e,t=[0,0])=>{const{x:n,y:r}=Rv(e)?e.internals.positionAbsolute:ga(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},XC=(e,t)=>Rc(Ic(tv(e),tv(t))),aa=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},S0=e=>tr(e.width)&&tr(e.height)&&tr(e.x)&&tr(e.y),tr=e=>!isNaN(e)&&isFinite(e),tL=(e,t)=>{},va=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),xa=({x:e,y:t},[n,r,o],a=!1,l=[1,1])=>{const u={x:(e-n)/o,y:(t-r)/o};return a?va(u,l):u},mc=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function Ci(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function nL(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Ci(e,n),o=Ci(e,t);return{top:r,right:o,bottom:r,left:o,x:o*2,y:r*2}}if(typeof e=="object"){const r=Ci(e.top??e.y??0,n),o=Ci(e.bottom??e.y??0,n),a=Ci(e.left??e.x??0,t),l=Ci(e.right??e.x??0,t);return{top:r,right:l,bottom:o,left:a,x:a+l,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function rL(e,t,n,r,o,a){const{x:l,y:u}=mc(e,[t,n,r]),{x:d,y:p}=mc({x:e.x+e.width,y:e.y+e.height},[t,n,r]),f=o-d,m=a-p;return{left:Math.floor(l),top:Math.floor(u),right:Math.floor(f),bottom:Math.floor(m)}}const Mv=(e,t,n,r,o,a)=>{const l=nL(a,t,n),u=(t-l.x)/e.width,d=(n-l.y)/e.height,p=Math.min(u,d),f=$i(p,r,o),m=e.x+e.width/2,g=e.y+e.height/2,v=t/2-m*f,b=n/2-g*f,x=rL(e,v,b,f,t,n),_={left:Math.min(x.left-l.left,0),top:Math.min(x.top-l.top,0),right:Math.min(x.right-l.right,0),bottom:Math.min(x.bottom-l.bottom,0)};return{x:v-_.left+_.right,y:b-_.top+_.bottom,zoom:f}},la=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Vi(e){return e!=null&&e!=="parent"}function Rr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function JC(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function ZC(e,t={width:0,height:0},n,r,o){const a={...e},l=r.get(n);if(l){const u=l.origin||o;a.x+=l.internals.positionAbsolute.x-(t.width??0)*u[0],a.y+=l.internals.positionAbsolute.y-(t.height??0)*u[1]}return a}function k0(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function oL(){let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}function iL(e){return{...VC,...e||{}}}function Qs(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:a,y:l}=nr(e),u=xa({x:a-(o?.left??0),y:l-(o?.top??0)},r),{x:d,y:p}=n?va(u,t):u;return{xSnapped:d,ySnapped:p,...u}}const Dv=e=>({width:e.offsetWidth,height:e.offsetHeight}),eT=e=>e?.getRootNode?.()||window?.document,sL=["INPUT","SELECT","TEXTAREA"];function tT(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:sL.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const nT=e=>"clientX"in e,nr=(e,t)=>{const n=nT(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},N0=(e,t,n,r,o)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:o,position:l.getAttribute("data-handlepos"),x:(u.left-n.left)/r,y:(u.top-n.top)/r,...Dv(l)}})};function rT({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:l,targetControlY:u}){const d=e*.125+o*.375+l*.375+n*.125,p=t*.125+a*.375+u*.375+r*.125,f=Math.abs(d-e),m=Math.abs(p-t);return[d,p,f,m]}function zl(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function j0({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case je.Left:return[t-zl(t-r,a),n];case je.Right:return[t+zl(r-t,a),n];case je.Top:return[t,n-zl(n-o,a)];case je.Bottom:return[t,n+zl(o-n,a)]}}function Lv({sourceX:e,sourceY:t,sourcePosition:n=je.Bottom,targetX:r,targetY:o,targetPosition:a=je.Top,curvature:l=.25}){const[u,d]=j0({pos:n,x1:e,y1:t,x2:r,y2:o,c:l}),[p,f]=j0({pos:a,x1:r,y1:o,x2:e,y2:t,c:l}),[m,g,v,b]=rT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:u,sourceControlY:d,targetControlX:p,targetControlY:f});return[`M${e},${t} C${u},${d} ${p},${f} ${r},${o}`,m,g,v,b]}function oT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,l=Math.abs(r-t)/2,u=r<t?r+l:r-l;return[a,u,o,l]}function aL({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1,zIndexMode:a="basic"}){if(a==="manual")return r;const l=o&&n?r+1e3:r,u=Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0);return l+u}function lL({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const a=Ic(hc(e),hc(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const l={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return aa(l,Rc(a))>0}const cL=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,uL=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),dL=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||cL;let o;return KC(e)?o={...e}:o={...e,id:r(e)},uL(o,t)?t:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,t.concat(o))};function iT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,l,u]=oT({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,l,u]}const E0={[je.Left]:{x:-1,y:0},[je.Right]:{x:1,y:0},[je.Top]:{x:0,y:-1},[je.Bottom]:{x:0,y:1}},pL=({source:e,sourcePosition:t=je.Bottom,target:n})=>t===je.Left||t===je.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},C0=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function fL({source:e,sourcePosition:t=je.Bottom,target:n,targetPosition:r=je.Top,center:o,offset:a,stepPosition:l}){const u=E0[t],d=E0[r],p={x:e.x+u.x*a,y:e.y+u.y*a},f={x:n.x+d.x*a,y:n.y+d.y*a},m=pL({source:p,sourcePosition:t,target:f}),g=m.x!==0?"x":"y",v=m[g];let b=[],x,_;const k={x:0,y:0},S={x:0,y:0},[,,N,T]=oT({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(u[g]*d[g]===-1){g==="x"?(x=o.x??p.x+(f.x-p.x)*l,_=o.y??(p.y+f.y)/2):(x=o.x??(p.x+f.x)/2,_=o.y??p.y+(f.y-p.y)*l);const C=[{x,y:p.y},{x,y:f.y}],P=[{x:p.x,y:_},{x:f.x,y:_}];u[g]===v?b=g==="x"?C:P:b=g==="x"?P:C}else{const C=[{x:p.x,y:f.y}],P=[{x:f.x,y:p.y}];if(g==="x"?b=u.x===v?P:C:b=u.y===v?C:P,t===r){const z=Math.abs(e[g]-n[g]);if(z<=a){const W=Math.min(a-1,a-z);u[g]===v?k[g]=(p[g]>e[g]?-1:1)*W:S[g]=(f[g]>n[g]?-1:1)*W}}if(t!==r){const z=g==="x"?"y":"x",W=u[g]===d[z],L=p[z]>f[z],q=p[z]<f[z];(u[g]===1&&(!W&&L||W&&q)||u[g]!==1&&(!W&&q||W&&L))&&(b=g==="x"?C:P)}const O={x:p.x+k.x,y:p.y+k.y},I={x:f.x+S.x,y:f.y+S.y},H=Math.max(Math.abs(O.x-b[0].x),Math.abs(I.x-b[0].x)),D=Math.max(Math.abs(O.y-b[0].y),Math.abs(I.y-b[0].y));H>=D?(x=(O.x+I.x)/2,_=b[0].y):(x=b[0].x,_=(O.y+I.y)/2)}return[[e,{x:p.x+k.x,y:p.y+k.y},...b,{x:f.x+S.x,y:f.y+S.y},n],x,_,N,T]}function hL(e,t,n,r){const o=Math.min(C0(e,t)/2,C0(t,n)/2,r),{x:a,y:l}=t;if(e.x===a&&a===n.x||e.y===l&&l===n.y)return`L${a} ${l}`;if(e.y===l){const p=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${a+o*p},${l}Q ${a},${l} ${a},${l+o*f}`}const u=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${a},${l+o*d}Q ${a},${l} ${a+o*u},${l}`}function gc({sourceX:e,sourceY:t,sourcePosition:n=je.Bottom,targetX:r,targetY:o,targetPosition:a=je.Top,borderRadius:l=5,centerX:u,centerY:d,offset:p=20,stepPosition:f=.5}){const[m,g,v,b,x]=fL({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:u,y:d},offset:p,stepPosition:f});return[m.reduce((k,S,N)=>{let T="";return N>0&&N<m.length-1?T=hL(m[N-1],S,m[N+1],l):T=`${N===0?"M":"L"}${S.x} ${S.y}`,k+=T,k},""),g,v,b,x]}function T0(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function mL(e){const{sourceNode:t,targetNode:n}=e;if(!T0(t)||!T0(n))return null;const r=t.internals.handleBounds||A0(t.handles),o=n.internals.handleBounds||A0(n.handles),a=P0(r?.source??[],e.sourceHandle),l=P0(e.connectionMode===Bi.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!a||!l)return e.onError?.("008",mr.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const u=a?.position||je.Bottom,d=l?.position||je.Top,p=Ho(t,a,u),f=Ho(n,l,d);return{sourceX:p.x,sourceY:p.y,targetX:f.x,targetY:f.y,sourcePosition:u,targetPosition:d}}function A0(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Ho(e,t,n=je.Left,r=!1){const o=(t?.x??0)+e.internals.positionAbsolute.x,a=(t?.y??0)+e.internals.positionAbsolute.y,{width:l,height:u}=t??Rr(e);if(r)return{x:o+l/2,y:a+u/2};switch(t?.position??n){case je.Top:return{x:o+l/2,y:a};case je.Right:return{x:o+l,y:a+u/2};case je.Bottom:return{x:o+l/2,y:a+u};case je.Left:return{x:o,y:a+u/2}}}function P0(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function nv(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function gL(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const a=new Set;return e.reduce((l,u)=>([u.markerStart||r,u.markerEnd||o].forEach(d=>{if(d&&typeof d=="object"){const p=nv(d,t);a.has(p)||(l.push({id:p,color:d.color||n,...d}),a.add(p))}}),l),[]).sort((l,u)=>l.id.localeCompare(u.id))}const sT=1e3,yL=10,qv={nodeOrigin:[0,0],nodeExtent:ia,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},vL={...qv,checkEquality:!0};function Fv(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function xL(e,t,n){const r=Fv(qv,n);for(const o of e.values())if(o.parentId)Bv(o,e,t,r);else{const a=ga(o,r.nodeOrigin),l=Vi(o.extent)?o.extent:r.nodeExtent,u=$o(a,l,Rr(o));o.internals.positionAbsolute=u}}function bL(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const o of e.handles){const a={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?n.push(a):o.type==="target"&&r.push(a)}return{source:n,target:r}}function zv(e){return e==="manual"}function rv(e,t,n,r={}){const o=Fv(vL,r),a={i:0},l=new Map(t),u=o?.elevateNodesOnSelect&&!zv(o.zIndexMode)?sT:0;let d=e.length>0;t.clear(),n.clear();for(const p of e){let f=l.get(p.id);if(o.checkEquality&&p===f?.internals.userNode)t.set(p.id,f);else{const m=ga(p,o.nodeOrigin),g=Vi(p.extent)?p.extent:o.nodeExtent,v=$o(m,g,Rr(p));f={...o.defaults,...p,measured:{width:p.measured?.width,height:p.measured?.height},internals:{positionAbsolute:v,handleBounds:bL(p,f),z:aT(p,u,o.zIndexMode),userNode:p}},t.set(p.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(d=!1),p.parentId&&Bv(f,t,n,r,a)}return d}function wL(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Bv(e,t,n,r,o){const{elevateNodesOnSelect:a,nodeOrigin:l,nodeExtent:u,zIndexMode:d}=Fv(qv,r),p=e.parentId,f=t.get(p);if(!f){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}wL(e,n),o&&!f.parentId&&f.internals.rootParentIndex===void 0&&d==="auto"&&(f.internals.rootParentIndex=++o.i,f.internals.z=f.internals.z+o.i*yL),o&&f.internals.rootParentIndex!==void 0&&(o.i=f.internals.rootParentIndex);const m=a&&!zv(d)?sT:0,{x:g,y:v,z:b}=_L(e,f,l,u,m,d),{positionAbsolute:x}=e.internals,_=g!==x.x||v!==x.y;(_||b!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:_?{x:g,y:v}:x,z:b}})}function aT(e,t,n){const r=tr(e.zIndex)?e.zIndex:0;return zv(n)?r:r+(e.selected?t:0)}function _L(e,t,n,r,o,a){const{x:l,y:u}=t.internals.positionAbsolute,d=Rr(e),p=ga(e,n),f=Vi(e.extent)?$o(p,e.extent,d):p;let m=$o({x:l+f.x,y:u+f.y},r,d);e.extent==="parent"&&(m=YC(m,d,t));const g=aT(e,o,a),v=t.internals.z??0;return{x:m.x,y:m.y,z:v>=g?v+1:g}}function $v(e,t,n,r=[0,0]){const o=[],a=new Map;for(const l of e){const u=t.get(l.parentId);if(!u)continue;const d=a.get(l.parentId)?.expandedRect??Hi(u),p=XC(d,l.rect);a.set(l.parentId,{expandedRect:p,parent:u})}return a.size>0&&a.forEach(({expandedRect:l,parent:u},d)=>{const p=u.internals.positionAbsolute,f=Rr(u),m=u.origin??r,g=l.x<p.x?Math.round(Math.abs(p.x-l.x)):0,v=l.y<p.y?Math.round(Math.abs(p.y-l.y)):0,b=Math.max(f.width,Math.round(l.width)),x=Math.max(f.height,Math.round(l.height)),_=(b-f.width)*m[0],k=(x-f.height)*m[1];(g>0||v>0||_||k)&&(o.push({id:d,type:"position",position:{x:u.position.x-g+_,y:u.position.y-v+k}}),n.get(d)?.forEach(S=>{e.some(N=>N.id===S.id)||o.push({id:S.id,type:"position",position:{x:S.position.x+g,y:S.position.y+v}})})),(f.width<l.width||f.height<l.height||g||v)&&o.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:b+(g?m[0]*g-_:0),height:x+(v?m[1]*v-k:0)}})}),o}function SL(e,t,n,r,o,a,l){const u=r?.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const p=[],f=window.getComputedStyle(u),{m22:m}=new window.DOMMatrixReadOnly(f.transform),g=[];for(const v of e.values()){const b=t.get(v.id);if(!b)continue;if(b.hidden){t.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),d=!0;continue}const x=Dv(v.nodeElement),_=b.measured.width!==x.width||b.measured.height!==x.height;if(!!(x.width&&x.height&&(_||!b.internals.handleBounds||v.force))){const S=v.nodeElement.getBoundingClientRect(),N=Vi(b.extent)?b.extent:a;let{positionAbsolute:T}=b.internals;b.parentId&&b.extent==="parent"?T=YC(T,x,t.get(b.parentId)):N&&(T=$o(T,N,x));const A={...b,measured:x,internals:{...b.internals,positionAbsolute:T,handleBounds:{source:N0("source",v.nodeElement,S,m,b.id),target:N0("target",v.nodeElement,S,m,b.id)}}};t.set(b.id,A),b.parentId&&Bv(A,t,n,{nodeOrigin:o,zIndexMode:l}),d=!0,_&&(p.push({id:b.id,type:"dimensions",dimensions:x}),b.expandParent&&b.parentId&&g.push({id:b.id,parentId:b.parentId,rect:Hi(A,o)}))}}if(g.length>0){const v=$v(g,t,n,o);p.push(...v)}return{changes:p,updatedInternals:d}}async function kL({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const l=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],r),u=!!l&&(l.x!==n[0]||l.y!==n[1]||l.k!==n[2]);return Promise.resolve(u)}function I0(e,t,n,r,o,a){let l=o;const u=r.get(l)||new Map;r.set(l,u.set(n,t)),l=`${o}-${e}`;const d=r.get(l)||new Map;if(r.set(l,d.set(n,t)),a){l=`${o}-${e}-${a}`;const p=r.get(l)||new Map;r.set(l,p.set(n,t))}}function lT(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:a,sourceHandle:l=null,targetHandle:u=null}=r,d={edgeId:r.id,source:o,target:a,sourceHandle:l,targetHandle:u},p=`${o}-${l}--${a}-${u}`,f=`${a}-${u}--${o}-${l}`;I0("source",d,f,e,o,l),I0("target",d,p,e,a,u),t.set(r.id,r)}}function cT(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:cT(n,t):!1}function R0(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function NL(e,t,n,r){const o=new Map;for(const[a,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!cT(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const u=e.get(a);u&&o.set(a,{id:a,position:u.position||{x:0,y:0},distance:{x:n.x-u.internals.positionAbsolute.x,y:n.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:u.measured.width??0,height:u.measured.height??0}})}return o}function Xd({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const o=[];for(const[l,u]of t){const d=n.get(l)?.internals.userNode;d&&o.push({...d,position:u.position,dragging:r})}if(!e)return[o[0],o];const a=n.get(e)?.internals.userNode;return[a?{...a,position:t.get(e)?.position||a.position,dragging:r}:o[0],o]}function jL({dragItems:e,snapGrid:t,x:n,y:r}){const o=e.values().next().value;if(!o)return null;const a={x:n-o.distance.x,y:r-o.distance.y},l=va(a,t);return{x:l.x-a.x,y:l.y-a.y}}function EL({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let a={x:null,y:null},l=0,u=new Map,d=!1,p={x:0,y:0},f=null,m=!1,g=null,v=!1,b=!1,x=null;function _({noDragClassName:S,handleSelector:N,domNode:T,isSelectable:A,nodeId:C,nodeClickDistance:P=0}){g=Nn(T);function O({x:z,y:W}){const{nodeLookup:L,nodeExtent:q,snapGrid:$,snapToGrid:G,nodeOrigin:U,onNodeDrag:X,onSelectionDrag:R,onError:B,updateNodePositions:Y}=t();a={x:z,y:W};let F=!1;const K=u.size>1,J=K&&q?tv(ya(u)):null,te=K&&G?jL({dragItems:u,snapGrid:$,x:z,y:W}):null;for(const[re,V]of u){if(!L.has(re))continue;let ne={x:z-V.distance.x,y:W-V.distance.y};G&&(ne=te?{x:Math.round(ne.x+te.x),y:Math.round(ne.y+te.y)}:va(ne,$));let de=null;if(K&&q&&!V.extent&&J){const{positionAbsolute:ge}=V.internals,_e=ge.x-J.x+q[0][0],we=ge.x+V.measured.width-J.x2+q[1][0],Ce=ge.y-J.y+q[0][1],Se=ge.y+V.measured.height-J.y2+q[1][1];de=[[_e,Ce],[we,Se]]}const{position:ve,positionAbsolute:le}=GC({nodeId:re,nextPosition:ne,nodeLookup:L,nodeExtent:de||q,nodeOrigin:U,onError:B});F=F||V.position.x!==ve.x||V.position.y!==ve.y,V.position=ve,V.internals.positionAbsolute=le}if(b=b||F,!!F&&(Y(u,!0),x&&(r||X||!C&&R))){const[re,V]=Xd({nodeId:C,dragItems:u,nodeLookup:L});r?.(x,u,re,V),X?.(x,re,V),C||R?.(x,V)}}async function I(){if(!f)return;const{transform:z,panBy:W,autoPanSpeed:L,autoPanOnNodeDrag:q}=t();if(!q){d=!1,cancelAnimationFrame(l);return}const[$,G]=QC(p,f,L);($!==0||G!==0)&&(a.x=(a.x??0)-$/z[2],a.y=(a.y??0)-G/z[2],await W({x:$,y:G})&&O(a)),l=requestAnimationFrame(I)}function H(z){const{nodeLookup:W,multiSelectionActive:L,nodesDraggable:q,transform:$,snapGrid:G,snapToGrid:U,selectNodesOnDrag:X,onNodeDragStart:R,onSelectionDragStart:B,unselectNodesAndEdges:Y}=t();m=!0,(!X||!A)&&!L&&C&&(W.get(C)?.selected||Y()),A&&X&&C&&e?.(C);const F=Qs(z.sourceEvent,{transform:$,snapGrid:G,snapToGrid:U,containerBounds:f});if(a=F,u=NL(W,q,F,C),u.size>0&&(n||R||!C&&B)){const[K,J]=Xd({nodeId:C,dragItems:u,nodeLookup:W});n?.(z.sourceEvent,u,K,J),R?.(z.sourceEvent,K,J),C||B?.(z.sourceEvent,J)}}const D=EC().clickDistance(P).on("start",z=>{const{domNode:W,nodeDragThreshold:L,transform:q,snapGrid:$,snapToGrid:G}=t();f=W?.getBoundingClientRect()||null,v=!1,b=!1,x=z.sourceEvent,L===0&&H(z),a=Qs(z.sourceEvent,{transform:q,snapGrid:$,snapToGrid:G,containerBounds:f}),p=nr(z.sourceEvent,f)}).on("drag",z=>{const{autoPanOnNodeDrag:W,transform:L,snapGrid:q,snapToGrid:$,nodeDragThreshold:G,nodeLookup:U}=t(),X=Qs(z.sourceEvent,{transform:L,snapGrid:q,snapToGrid:$,containerBounds:f});if(x=z.sourceEvent,(z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||C&&!U.has(C))&&(v=!0),!v){if(!d&&W&&m&&(d=!0,I()),!m){const R=nr(z.sourceEvent,f),B=R.x-p.x,Y=R.y-p.y;Math.sqrt(B*B+Y*Y)>G&&H(z)}(a.x!==X.xSnapped||a.y!==X.ySnapped)&&u&&m&&(p=nr(z.sourceEvent,f),O(X))}}).on("end",z=>{if(!(!m||v)&&(d=!1,m=!1,cancelAnimationFrame(l),u.size>0)){const{nodeLookup:W,updateNodePositions:L,onNodeDragStop:q,onSelectionDragStop:$}=t();if(b&&(L(u,!1),b=!1),o||q||!C&&$){const[G,U]=Xd({nodeId:C,dragItems:u,nodeLookup:W,dragging:!1});o?.(z.sourceEvent,u,G,U),q?.(z.sourceEvent,G,U),C||$?.(z.sourceEvent,U)}}}).filter(z=>{const W=z.target;return!z.button&&(!S||!R0(W,`.${S}`,T))&&(!N||R0(W,N,T))});g.call(D)}function k(){g?.on(".drag",null)}return{update:_,destroy:k}}function CL(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())aa(o,Hi(a))>0&&r.push(a);return r}const TL=250;function AL(e,t,n,r){let o=[],a=1/0;const l=CL(e,n,t+TL);for(const u of l){const d=[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]];for(const p of d){if(r.nodeId===p.nodeId&&r.type===p.type&&r.id===p.id)continue;const{x:f,y:m}=Ho(u,p,p.position,!0),g=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(m-e.y,2));g>t||(g<a?(o=[{...p,x:f,y:m}],a=g):g===a&&o.push({...p,x:f,y:m}))}}if(!o.length)return null;if(o.length>1){const u=r.type==="source"?"target":"source";return o.find(d=>d.type===u)??o[0]}return o[0]}function uT(e,t,n,r,o,a=!1){const l=r.get(e);if(!l)return null;const u=o==="strict"?l.internals.handleBounds?.[t]:[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]],d=(n?u?.find(p=>p.id===n):u?.[0])??null;return d&&a?{...d,...Ho(l,d,d.position,!0)}:d}function dT(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function PL(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const pT=()=>!0;function IL(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:a,isTarget:l,domNode:u,nodeLookup:d,lib:p,autoPanOnConnect:f,flowId:m,panBy:g,cancelConnection:v,onConnectStart:b,onConnect:x,onConnectEnd:_,isValidConnection:k=pT,onReconnectEnd:S,updateConnection:N,getTransform:T,getFromHandle:A,autoPanSpeed:C,dragThreshold:P=1,handleDomNode:O}){const I=eT(e.target);let H=0,D;const{x:z,y:W}=nr(e),L=dT(a,O),q=u?.getBoundingClientRect();let $=!1;if(!q||!L)return;const G=uT(o,L,r,d,t);if(!G)return;let U=nr(e,q),X=!1,R=null,B=!1,Y=null;function F(){if(!f||!q)return;const[ve,le]=QC(U,q,C);g({x:ve,y:le}),H=requestAnimationFrame(F)}const K={...G,nodeId:o,type:L,position:G.position},J=d.get(o);let re={inProgress:!0,isValid:null,from:Ho(J,K,je.Left,!0),fromHandle:K,fromPosition:K.position,fromNode:J,to:U,toHandle:null,toPosition:w0[K.position],toNode:null,pointer:U};function V(){$=!0,N(re),b?.(e,{nodeId:o,handleId:r,handleType:L})}P===0&&V();function ne(ve){if(!$){const{x:Se,y:Qe}=nr(ve),Oe=Se-z,he=Qe-W;if(!(Oe*Oe+he*he>P*P))return;V()}if(!A()||!K){de(ve);return}const le=T();U=nr(ve,q),D=AL(xa(U,le,!1,[1,1]),n,d,K),X||(F(),X=!0);const ge=fT(ve,{handle:D,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:l?"target":"source",isValidConnection:k,doc:I,lib:p,flowId:m,nodeLookup:d});Y=ge.handleDomNode,R=ge.connection,B=PL(!!D,ge.isValid);const _e=d.get(o),we=_e?Ho(_e,K,je.Left,!0):re.from,Ce={...re,from:we,isValid:B,to:ge.toHandle&&B?mc({x:ge.toHandle.x,y:ge.toHandle.y},le):U,toHandle:ge.toHandle,toPosition:B&&ge.toHandle?ge.toHandle.position:w0[K.position],toNode:ge.toHandle?d.get(ge.toHandle.nodeId):null,pointer:U};N(Ce),re=Ce}function de(ve){if(!("touches"in ve&&ve.touches.length>0)){if($){(D||Y)&&R&&B&&x?.(R);const{inProgress:le,...ge}=re,_e={...ge,toPosition:re.toHandle?re.toPosition:null};_?.(ve,_e),a&&S?.(ve,_e)}v(),cancelAnimationFrame(H),X=!1,B=!1,R=null,Y=null,I.removeEventListener("mousemove",ne),I.removeEventListener("mouseup",de),I.removeEventListener("touchmove",ne),I.removeEventListener("touchend",de)}}I.addEventListener("mousemove",ne),I.addEventListener("mouseup",de),I.addEventListener("touchmove",ne),I.addEventListener("touchend",de)}function fT(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:a,doc:l,lib:u,flowId:d,isValidConnection:p=pT,nodeLookup:f}){const m=a==="target",g=t?l.querySelector(`.${u}-flow__handle[data-id="${d}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:v,y:b}=nr(e),x=l.elementFromPoint(v,b),_=x?.classList.contains(`${u}-flow__handle`)?x:g,k={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const S=dT(void 0,_),N=_.getAttribute("data-nodeid"),T=_.getAttribute("data-handleid"),A=_.classList.contains("connectable"),C=_.classList.contains("connectableend");if(!N||!S)return k;const P={source:m?N:r,sourceHandle:m?T:o,target:m?r:N,targetHandle:m?o:T};k.connection=P;const I=A&&C&&(n===Bi.Strict?m&&S==="source"||!m&&S==="target":N!==r||T!==o);k.isValid=I&&p(P),k.toHandle=uT(N,S,T,f,n,!0)}return k}const ov={onPointerDown:IL,isValid:fT};function RL({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Nn(e);function a({translateExtent:u,width:d,height:p,zoomStep:f=1,pannable:m=!0,zoomable:g=!0,inversePan:v=!1}){const b=N=>{if(N.sourceEvent.type!=="wheel"||!t)return;const T=n(),A=N.sourceEvent.ctrlKey&&la()?10:1,C=-N.sourceEvent.deltaY*(N.sourceEvent.deltaMode===1?.05:N.sourceEvent.deltaMode?1:.002)*f,P=T[2]*Math.pow(2,C*A);t.scaleTo(P)};let x=[0,0];const _=N=>{(N.sourceEvent.type==="mousedown"||N.sourceEvent.type==="touchstart")&&(x=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY])},k=N=>{const T=n();if(N.sourceEvent.type!=="mousemove"&&N.sourceEvent.type!=="touchmove"||!t)return;const A=[N.sourceEvent.clientX??N.sourceEvent.touches[0].clientX,N.sourceEvent.clientY??N.sourceEvent.touches[0].clientY],C=[A[0]-x[0],A[1]-x[1]];x=A;const P=r()*Math.max(T[2],Math.log(T[2]))*(v?-1:1),O={x:T[0]-C[0]*P,y:T[1]-C[1]*P},I=[[0,0],[d,p]];t.setViewportConstrained({x:O.x,y:O.y,zoom:T[2]},I,u)},S=$C().on("start",_).on("zoom",m?k:null).on("zoom.wheel",g?b:null);o.call(S,{})}function l(){o.on("zoom",null)}return{update:a,destroy:l,pointer:Jn}}const Oc=e=>({x:e.x,y:e.y,zoom:e.k}),Jd=({x:e,y:t,zoom:n})=>Pc.translate(e,t).scale(n),Ii=(e,t)=>e.target.closest(`.${t}`),hT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),OL=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Zd=(e,t=0,n=OL,r=()=>{})=>{const o=typeof t=="number"&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},mT=e=>{const t=e.ctrlKey&&la()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function ML({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:l,onPanZoomStart:u,onPanZoom:d,onPanZoomEnd:p}){return f=>{if(Ii(f,t))return f.ctrlKey&&f.preventDefault(),!1;f.preventDefault(),f.stopImmediatePropagation();const m=n.property("__zoom").k||1;if(f.ctrlKey&&l){const _=Jn(f),k=mT(f),S=m*Math.pow(2,k);r.scaleTo(n,S,_,f);return}const g=f.deltaMode===1?20:1;let v=o===Fo.Vertical?0:f.deltaX*g,b=o===Fo.Horizontal?0:f.deltaY*g;!la()&&f.shiftKey&&o!==Fo.Vertical&&(v=f.deltaY*g,b=0),r.translateBy(n,-(v/m)*a,-(b/m)*a,{internal:!0});const x=Oc(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d?.(f,x),e.panScrollTimeout=setTimeout(()=>{p?.(f,x),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,u?.(f,x))}}function DL({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const a=r.type==="wheel",l=!t&&a&&!r.ctrlKey,u=Ii(r,e);if(r.ctrlKey&&a&&u&&r.preventDefault(),l||u)return null;r.preventDefault(),n.call(this,r,o)}}function LL({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const o=Oc(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,o)}}function qL({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return a=>{e.usedRightMouseButton=!!(n&&hT(t,e.mouseButton??0)),a.sourceEvent?.sync||r([a.transform.x,a.transform.y,a.transform.k]),o&&!a.sourceEvent?.internal&&o?.(a.sourceEvent,Oc(a.transform))}}function FL({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:a}){return l=>{if(!l.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,a&&hT(t,e.mouseButton??0)&&!e.usedRightMouseButton&&l.sourceEvent&&a(l.sourceEvent),e.usedRightMouseButton=!1,r(!1),o)){const u=Oc(l.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(l.sourceEvent,u)},n?150:0)}}}function zL({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:l,noWheelClassName:u,noPanClassName:d,lib:p,connectionInProgress:f}){return m=>{const g=e||t,v=n&&m.ctrlKey,b=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(Ii(m,`${p}-flow__node`)||Ii(m,`${p}-flow__edge`)))return!0;if(!r&&!g&&!o&&!a&&!n||l||f&&!b||Ii(m,u)&&b||Ii(m,d)&&(!b||o&&b&&!e)||!n&&m.ctrlKey&&b)return!1;if(!n&&m.type==="touchstart"&&m.touches?.length>1)return m.preventDefault(),!1;if(!g&&!o&&!v&&b||!r&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(r)&&!r.includes(m.button)&&m.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||b)&&x}}function BL({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:o,onPanZoom:a,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),m=$C().scaleExtent([t,n]).translateExtent(r),g=Nn(e).call(m);S({x:o.x,y:o.y,zoom:$i(o.zoom,t,n)},[[0,0],[f.width,f.height]],r);const v=g.on("wheel.zoom"),b=g.on("dblclick.zoom");m.wheelDelta(mT);function x(D,z){return g?new Promise(W=>{m?.interpolate(z?.interpolate==="linear"?Ys:ec).transform(Zd(g,z?.duration,z?.ease,()=>W(!0)),D)}):Promise.resolve(!1)}function _({noWheelClassName:D,noPanClassName:z,onPaneContextMenu:W,userSelectionActive:L,panOnScroll:q,panOnDrag:$,panOnScrollMode:G,panOnScrollSpeed:U,preventScrolling:X,zoomOnPinch:R,zoomOnScroll:B,zoomOnDoubleClick:Y,zoomActivationKeyPressed:F,lib:K,onTransformChange:J,connectionInProgress:te,paneClickDistance:re,selectionOnDrag:V}){L&&!p.isZoomingOrPanning&&k();const ne=q&&!F&&!L;m.clickDistance(V?1/0:!tr(re)||re<0?0:re);const de=ne?ML({zoomPanValues:p,noWheelClassName:D,d3Selection:g,d3Zoom:m,panOnScrollMode:G,panOnScrollSpeed:U,zoomOnPinch:R,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}):DL({noWheelClassName:D,preventScrolling:X,d3ZoomHandler:v});if(g.on("wheel.zoom",de,{passive:!1}),!L){const le=LL({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:l});m.on("start",le);const ge=qL({zoomPanValues:p,panOnDrag:$,onPaneContextMenu:!!W,onPanZoom:a,onTransformChange:J});m.on("zoom",ge);const _e=FL({zoomPanValues:p,panOnDrag:$,panOnScroll:q,onPaneContextMenu:W,onPanZoomEnd:u,onDraggingChange:d});m.on("end",_e)}const ve=zL({zoomActivationKeyPressed:F,panOnDrag:$,zoomOnScroll:B,panOnScroll:q,zoomOnDoubleClick:Y,zoomOnPinch:R,userSelectionActive:L,noPanClassName:z,noWheelClassName:D,lib:K,connectionInProgress:te});m.filter(ve),Y?g.on("dblclick.zoom",b):g.on("dblclick.zoom",null)}function k(){m.on("zoom",null)}async function S(D,z,W){const L=Jd(D),q=m?.constrain()(L,z,W);return q&&await x(q),new Promise($=>$(q))}async function N(D,z){const W=Jd(D);return await x(W,z),new Promise(L=>L(W))}function T(D){if(g){const z=Jd(D),W=g.property("__zoom");(W.k!==D.zoom||W.x!==D.x||W.y!==D.y)&&m?.transform(g,z,null,{sync:!0})}}function A(){const D=g?BC(g.node()):{x:0,y:0,k:1};return{x:D.x,y:D.y,zoom:D.k}}function C(D,z){return g?new Promise(W=>{m?.interpolate(z?.interpolate==="linear"?Ys:ec).scaleTo(Zd(g,z?.duration,z?.ease,()=>W(!0)),D)}):Promise.resolve(!1)}function P(D,z){return g?new Promise(W=>{m?.interpolate(z?.interpolate==="linear"?Ys:ec).scaleBy(Zd(g,z?.duration,z?.ease,()=>W(!0)),D)}):Promise.resolve(!1)}function O(D){m?.scaleExtent(D)}function I(D){m?.translateExtent(D)}function H(D){const z=!tr(D)||D<0?0:D;m?.clickDistance(z)}return{update:_,destroy:k,setViewport:N,setViewportConstrained:S,getViewport:A,scaleTo:C,scaleBy:P,setScaleExtent:O,setTranslateExtent:I,syncViewport:T,setClickDistance:H}}var Ui;(function(e){e.Line="line",e.Handle="handle"})(Ui||(Ui={}));function $L({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:a}){const l=e-t,u=n-r,d=[l>0?1:l<0?-1:0,u>0?1:u<0?-1:0];return l&&o&&(d[0]=d[0]*-1),u&&a&&(d[1]=d[1]*-1),d}function O0(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function ao(e,t){return Math.max(0,t-e)}function lo(e,t){return Math.max(0,e-t)}function Bl(e,t,n){return Math.max(0,t-e,e-n)}function M0(e,t){return e?!t:t}function HL(e,t,n,r,o,a,l,u){let{affectsX:d,affectsY:p}=t;const{isHorizontal:f,isVertical:m}=t,g=f&&m,{xSnapped:v,ySnapped:b}=n,{minWidth:x,maxWidth:_,minHeight:k,maxHeight:S}=r,{x:N,y:T,width:A,height:C,aspectRatio:P}=e;let O=Math.floor(f?v-e.pointerX:0),I=Math.floor(m?b-e.pointerY:0);const H=A+(d?-O:O),D=C+(p?-I:I),z=-a[0]*A,W=-a[1]*C;let L=Bl(H,x,_),q=Bl(D,k,S);if(l){let U=0,X=0;d&&O<0?U=ao(N+O+z,l[0][0]):!d&&O>0&&(U=lo(N+H+z,l[1][0])),p&&I<0?X=ao(T+I+W,l[0][1]):!p&&I>0&&(X=lo(T+D+W,l[1][1])),L=Math.max(L,U),q=Math.max(q,X)}if(u){let U=0,X=0;d&&O>0?U=lo(N+O,u[0][0]):!d&&O<0&&(U=ao(N+H,u[1][0])),p&&I>0?X=lo(T+I,u[0][1]):!p&&I<0&&(X=ao(T+D,u[1][1])),L=Math.max(L,U),q=Math.max(q,X)}if(o){if(f){const U=Bl(H/P,k,S)*P;if(L=Math.max(L,U),l){let X=0;!d&&!p||d&&!p&&g?X=lo(T+W+H/P,l[1][1])*P:X=ao(T+W+(d?O:-O)/P,l[0][1])*P,L=Math.max(L,X)}if(u){let X=0;!d&&!p||d&&!p&&g?X=ao(T+H/P,u[1][1])*P:X=lo(T+(d?O:-O)/P,u[0][1])*P,L=Math.max(L,X)}}if(m){const U=Bl(D*P,x,_)/P;if(q=Math.max(q,U),l){let X=0;!d&&!p||p&&!d&&g?X=lo(N+D*P+z,l[1][0])/P:X=ao(N+(p?I:-I)*P+z,l[0][0])/P,q=Math.max(q,X)}if(u){let X=0;!d&&!p||p&&!d&&g?X=ao(N+D*P,u[1][0])/P:X=lo(N+(p?I:-I)*P,u[0][0])/P,q=Math.max(q,X)}}}I=I+(I<0?q:-q),O=O+(O<0?L:-L),o&&(g?H>D*P?I=(M0(d,p)?-O:O)/P:O=(M0(d,p)?-I:I)*P:f?(I=O/P,p=d):(O=I*P,d=p));const $=d?N+O:N,G=p?T+I:T;return{width:A+(d?-O:O),height:C+(p?-I:I),x:a[0]*O*(d?-1:1)+$,y:a[1]*I*(p?-1:1)+G}}const gT={width:0,height:0,x:0,y:0},VL={...gT,pointerX:0,pointerY:0,aspectRatio:1};function UL(e){return[[0,0],[e.measured.width,e.measured.height]]}function WL(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,a=e.measured.width??0,l=e.measured.height??0,u=n[0]*a,d=n[1]*l;return[[r-u,o-d],[r+a-u,o+l-d]]}function KL({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const a=Nn(e);let l={controlDirection:O0("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function u({controlPosition:p,boundaries:f,keepAspectRatio:m,resizeDirection:g,onResizeStart:v,onResize:b,onResizeEnd:x,shouldResize:_}){let k={...gT},S={...VL};l={boundaries:f,resizeDirection:g,keepAspectRatio:m,controlDirection:O0(p)};let N,T=null,A=[],C,P,O,I=!1;const H=EC().on("start",D=>{const{nodeLookup:z,transform:W,snapGrid:L,snapToGrid:q,nodeOrigin:$,paneDomNode:G}=n();if(N=z.get(t),!N)return;T=G?.getBoundingClientRect()??null;const{xSnapped:U,ySnapped:X}=Qs(D.sourceEvent,{transform:W,snapGrid:L,snapToGrid:q,containerBounds:T});k={width:N.measured.width??0,height:N.measured.height??0,x:N.position.x??0,y:N.position.y??0},S={...k,pointerX:U,pointerY:X,aspectRatio:k.width/k.height},C=void 0,N.parentId&&(N.extent==="parent"||N.expandParent)&&(C=z.get(N.parentId),P=C&&N.extent==="parent"?UL(C):void 0),A=[],O=void 0;for(const[R,B]of z)if(B.parentId===t&&(A.push({id:R,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const Y=WL(B,N,B.origin??$);O?O=[[Math.min(Y[0][0],O[0][0]),Math.min(Y[0][1],O[0][1])],[Math.max(Y[1][0],O[1][0]),Math.max(Y[1][1],O[1][1])]]:O=Y}v?.(D,{...k})}).on("drag",D=>{const{transform:z,snapGrid:W,snapToGrid:L,nodeOrigin:q}=n(),$=Qs(D.sourceEvent,{transform:z,snapGrid:W,snapToGrid:L,containerBounds:T}),G=[];if(!N)return;const{x:U,y:X,width:R,height:B}=k,Y={},F=N.origin??q,{width:K,height:J,x:te,y:re}=HL(S,l.controlDirection,$,l.boundaries,l.keepAspectRatio,F,P,O),V=K!==R,ne=J!==B,de=te!==U&&V,ve=re!==X&&ne;if(!de&&!ve&&!V&&!ne)return;if((de||ve||F[0]===1||F[1]===1)&&(Y.x=de?te:k.x,Y.y=ve?re:k.y,k.x=Y.x,k.y=Y.y,A.length>0)){const we=te-U,Ce=re-X;for(const Se of A)Se.position={x:Se.position.x-we+F[0]*(K-R),y:Se.position.y-Ce+F[1]*(J-B)},G.push(Se)}if((V||ne)&&(Y.width=V&&(!l.resizeDirection||l.resizeDirection==="horizontal")?K:k.width,Y.height=ne&&(!l.resizeDirection||l.resizeDirection==="vertical")?J:k.height,k.width=Y.width,k.height=Y.height),C&&N.expandParent){const we=F[0]*(Y.width??0);Y.x&&Y.x<we&&(k.x=we,S.x=S.x-(Y.x-we));const Ce=F[1]*(Y.height??0);Y.y&&Y.y<Ce&&(k.y=Ce,S.y=S.y-(Y.y-Ce))}const le=$L({width:k.width,prevWidth:R,height:k.height,prevHeight:B,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),ge={...k,direction:le};_?.(D,ge)!==!1&&(I=!0,b?.(D,ge),r(Y,G))}).on("end",D=>{I&&(x?.(D,{...k}),o?.({...k}),I=!1)});a.call(H)}function d(){a.on(".drag",null)}return{update:u,destroy:d}}var ep={exports:{}},tp={},np={exports:{}},rp={};var D0;function GL(){if(D0)return rp;D0=1;var e=fa();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,a=e.useLayoutEffect,l=e.useDebugValue;function u(m,g){var v=g(),b=r({inst:{value:v,getSnapshot:g}}),x=b[0].inst,_=b[1];return a(function(){x.value=v,x.getSnapshot=g,d(x)&&_({inst:x})},[m,v,g]),o(function(){return d(x)&&_({inst:x}),m(function(){d(x)&&_({inst:x})})},[m]),l(v),v}function d(m){var g=m.getSnapshot;m=m.value;try{var v=g();return!n(m,v)}catch{return!0}}function p(m,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return rp.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,rp}var L0;function YL(){return L0||(L0=1,np.exports=GL()),np.exports}var q0;function QL(){if(q0)return tp;q0=1;var e=fa(),t=YL();function n(p,f){return p===f&&(p!==0||1/p===1/f)||p!==p&&f!==f}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,a=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return tp.useSyncExternalStoreWithSelector=function(p,f,m,g,v){var b=a(null);if(b.current===null){var x={hasValue:!1,value:null};b.current=x}else x=b.current;b=u(function(){function k(C){if(!S){if(S=!0,N=C,C=g(C),v!==void 0&&x.hasValue){var P=x.value;if(v(P,C))return T=P}return T=C}if(P=T,r(N,C))return P;var O=g(C);return v!==void 0&&v(P,O)?(N=C,P):(N=C,T=O)}var S=!1,N,T,A=m===void 0?null:m;return[function(){return k(f())},A===null?void 0:function(){return k(A())}]},[f,m,g,v]);var _=o(p,b[0],b[1]);return l(function(){x.hasValue=!0,x.value=_},[_]),d(_),_},tp}var F0;function XL(){return F0||(F0=1,ep.exports=QL()),ep.exports}var JL=XL();const yT=Wi(JL),ZL={},z0=e=>{let t;const n=new Set,r=(f,m)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(b=>b(t,v))}},o=()=>t,d={setState:r,getState:o,getInitialState:()=>p,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(ZL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(r,o,d);return d},vT=e=>e?z0(e):z0,{useDebugValue:e3}=Lt,{useSyncExternalStoreWithSelector:t3}=yT,n3=e=>e;function xT(e,t=n3,n){const r=t3(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return e3(r),r}const B0=(e,t)=>{const n=vT(e),r=(o,a=t)=>xT(n,o,a);return Object.assign(r,n),r},r3=(e,t)=>e?B0(e,t):B0;function ft(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var o3=pC();const Mc=j.createContext(null),i3=Mc.Provider,bT=mr.error001();function Ge(e,t){const n=j.useContext(Mc);if(n===null)throw new Error(bT);return xT(n,e,t)}function mt(){const e=j.useContext(Mc);if(e===null)throw new Error(bT);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const $0={display:"none"},s3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},wT="react-flow__node-desc",_T="react-flow__edge-desc",a3="react-flow__aria-live",l3=e=>e.ariaLiveMessage,c3=e=>e.ariaLabelConfig;function u3({rfId:e}){const t=Ge(l3);return s.jsx("div",{id:`${a3}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:s3,children:t})}function d3({rfId:e,disableKeyboardA11y:t}){const n=Ge(c3);return s.jsxs(s.Fragment,{children:[s.jsx("div",{id:`${wT}-${e}`,style:$0,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),s.jsx("div",{id:`${_T}-${e}`,style:$0,children:n["edge.a11yDescription.default"]}),!t&&s.jsx(u3,{rfId:e})]})}const Dc=j.forwardRef(({position:e="top-left",children:t,className:n,style:r,...o},a)=>{const l=`${e}`.split("-");return s.jsx("div",{className:Ct(["react-flow__panel",n,...l]),style:r,ref:a,...o,children:t})});Dc.displayName="Panel";function p3({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:s.jsx(Dc,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:s.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const f3=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},$l=e=>e.id;function h3(e,t){return ft(e.selectedNodes.map($l),t.selectedNodes.map($l))&&ft(e.selectedEdges.map($l),t.selectedEdges.map($l))}function m3({onSelectionChange:e}){const t=mt(),{selectedNodes:n,selectedEdges:r}=Ge(f3,h3);return j.useEffect(()=>{const o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[n,r,e]),null}const g3=e=>!!e.onSelectionChangeHandlers;function y3({onSelectionChange:e}){const t=Ge(g3);return e||t?s.jsx(m3,{onSelectionChange:e}):null}const ST=[0,0],v3={x:0,y:0,zoom:1},x3=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],H0=[...x3,"rfId"],b3=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),V0={translateExtent:ia,nodeOrigin:ST,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function w3(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:l,reset:u,setDefaultNodesAndEdges:d}=Ge(b3,ft),p=mt();j.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{f.current=V0,u()}),[]);const f=j.useRef(V0);return j.useEffect(()=>{for(const m of H0){const g=e[m],v=f.current[m];g!==v&&(typeof e[m]>"u"||(m==="nodes"?t(g):m==="edges"?n(g):m==="minZoom"?r(g):m==="maxZoom"?o(g):m==="translateExtent"?a(g):m==="nodeExtent"?l(g):m==="ariaLabelConfig"?p.setState({ariaLabelConfig:iL(g)}):m==="fitView"?p.setState({fitViewQueued:g}):m==="fitViewOptions"?p.setState({fitViewOptions:g}):p.setState({[m]:g})))}f.current=e},H0.map(m=>e[m])),null}function U0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function _3(e){const[t,n]=j.useState(e==="system"?null:e);return j.useEffect(()=>{if(e!=="system"){n(e);return}const r=U0(),o=()=>n(r?.matches?"dark":"light");return o(),r?.addEventListener("change",o),()=>{r?.removeEventListener("change",o)}},[e]),t!==null?t:U0()?.matches?"dark":"light"}const W0=typeof document<"u"?document:null;function ca(e=null,t={target:W0,actInsideInputWithModifier:!0}){const[n,r]=j.useState(!1),o=j.useRef(!1),a=j.useRef(new Set([])),[l,u]=j.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=p.reduce((m,g)=>m.concat(...g),[]);return[p,f]}return[[],[]]},[e]);return j.useEffect(()=>{const d=t?.target??W0,p=t?.actInsideInputWithModifier??!0;if(e!==null){const f=v=>{if(o.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!o.current||o.current&&!p)&&tT(v))return!1;const x=G0(v.code,u);if(a.current.add(v[x]),K0(l,a.current,!1)){const _=v.composedPath?.()?.[0]||v.target,k=_?.nodeName==="BUTTON"||_?.nodeName==="A";t.preventDefault!==!1&&(o.current||!k)&&v.preventDefault(),r(!0)}},m=v=>{const b=G0(v.code,u);K0(l,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(v[b]),v.key==="Meta"&&a.current.clear(),o.current=!1},g=()=>{a.current.clear(),r(!1)};return d?.addEventListener("keydown",f),d?.addEventListener("keyup",m),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{d?.removeEventListener("keydown",f),d?.removeEventListener("keyup",m),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function K0(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function G0(e,t){return t.includes(e)?"code":"key"}const S3=()=>{const e=mt();return j.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,a],panZoom:l}=e.getState();return l?(await l.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??a},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:a,maxZoom:l,panZoom:u}=e.getState(),d=Mv(t,r,o,a,l,n?.padding??.1);return u?(await u.setViewport(d,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:o,snapToGrid:a,domNode:l}=e.getState();if(!l)return t;const{x:u,y:d}=l.getBoundingClientRect(),p={x:t.x-u,y:t.y-d},f=n.snapGrid??o,m=n.snapToGrid??a;return xa(p,r,m,f)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:a}=r.getBoundingClientRect(),l=mc(t,n);return{x:l.x+o,y:l.y+a}}}),[])};function kT(e,t){const n=[],r=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const l=r.get(a.id);l?l.push(a):r.set(a.id,[a])}for(const a of t){const l=r.get(a.id);if(!l){n.push(a);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const u={...a};for(const d of l)k3(d,u);n.push(u)}return o.length&&o.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function k3(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function NT(e,t){return kT(e,t)}function jT(e,t){return kT(e,t)}function Do(e,t){return{id:e,type:"select",selected:t}}function Ri(e,t=new Set,n=!1){const r=[];for(const[o,a]of e){const l=t.has(o);!(a.selected===void 0&&!l)&&a.selected!==l&&(n&&(a.selected=l),r.push(Do(a.id,l)))}return r}function Y0({items:e=[],lookup:t}){const n=[],r=new Map(e.map(o=>[o.id,o]));for(const[o,a]of e.entries()){const l=t.get(a.id),u=l?.internals?.userNode??l;u!==void 0&&u!==a&&n.push({id:a.id,item:a,type:"replace"}),u===void 0&&n.push({item:a,type:"add",index:o})}for(const[o]of t)r.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function Q0(e){return{id:e.id,type:"remove"}}const X0=e=>YD(e),N3=e=>KC(e);function ET(e){return j.forwardRef(e)}const j3=typeof window<"u"?j.useLayoutEffect:j.useEffect;function J0(e){const[t,n]=j.useState(BigInt(0)),[r]=j.useState(()=>E3(()=>n(o=>o+BigInt(1))));return j3(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function E3(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const CT=j.createContext(null);function C3({children:e}){const t=mt(),n=j.useCallback(u=>{const{nodes:d=[],setNodes:p,hasDefaultNodes:f,onNodesChange:m,nodeLookup:g,fitViewQueued:v,onNodesChangeMiddlewareMap:b}=t.getState();let x=d;for(const k of u)x=typeof k=="function"?k(x):k;let _=Y0({items:x,lookup:g});for(const k of b.values())_=k(_);f&&p(x),_.length>0?m?.(_):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:k,nodes:S,setNodes:N}=t.getState();k&&N(S)})},[]),r=J0(n),o=j.useCallback(u=>{const{edges:d=[],setEdges:p,hasDefaultEdges:f,onEdgesChange:m,edgeLookup:g}=t.getState();let v=d;for(const b of u)v=typeof b=="function"?b(v):b;f?p(v):m&&m(Y0({items:v,lookup:g}))},[]),a=J0(o),l=j.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return s.jsx(CT.Provider,{value:l,children:e})}function T3(){const e=j.useContext(CT);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const A3=e=>!!e.panZoom;function Ki(){const e=S3(),t=mt(),n=T3(),r=Ge(A3),o=j.useMemo(()=>{const a=m=>t.getState().nodeLookup.get(m),l=m=>{n.nodeQueue.push(m)},u=m=>{n.edgeQueue.push(m)},d=m=>{const{nodeLookup:g,nodeOrigin:v}=t.getState(),b=X0(m)?m:g.get(m.id),x=b.parentId?ZC(b.position,b.measured,b.parentId,g,v):b.position,_={...b,position:x,width:b.measured?.width??b.width,height:b.measured?.height??b.height};return Hi(_)},p=(m,g,v={replace:!1})=>{l(b=>b.map(x=>{if(x.id===m){const _=typeof g=="function"?g(x):g;return v.replace&&X0(_)?_:{...x,..._}}return x}))},f=(m,g,v={replace:!1})=>{u(b=>b.map(x=>{if(x.id===m){const _=typeof g=="function"?g(x):g;return v.replace&&N3(_)?_:{...x,..._}}return x}))};return{getNodes:()=>t.getState().nodes.map(m=>({...m})),getNode:m=>a(m)?.internals.userNode,getInternalNode:a,getEdges:()=>{const{edges:m=[]}=t.getState();return m.map(g=>({...g}))},getEdge:m=>t.getState().edgeLookup.get(m),setNodes:l,setEdges:u,addNodes:m=>{const g=Array.isArray(m)?m:[m];n.nodeQueue.push(v=>[...v,...g])},addEdges:m=>{const g=Array.isArray(m)?m:[m];n.edgeQueue.push(v=>[...v,...g])},toObject:()=>{const{nodes:m=[],edges:g=[],transform:v}=t.getState(),[b,x,_]=v;return{nodes:m.map(k=>({...k})),edges:g.map(k=>({...k})),viewport:{x:b,y:x,zoom:_}}},deleteElements:async({nodes:m=[],edges:g=[]})=>{const{nodes:v,edges:b,onNodesDelete:x,onEdgesDelete:_,triggerNodeChanges:k,triggerEdgeChanges:S,onDelete:N,onBeforeDelete:T}=t.getState(),{nodes:A,edges:C}=await eL({nodesToRemove:m,edgesToRemove:g,nodes:v,edges:b,onBeforeDelete:T}),P=C.length>0,O=A.length>0;if(P){const I=C.map(Q0);_?.(C),S(I)}if(O){const I=A.map(Q0);x?.(A),k(I)}return(O||P)&&N?.({nodes:A,edges:C}),{deletedNodes:A,deletedEdges:C}},getIntersectingNodes:(m,g=!0,v)=>{const b=S0(m),x=b?m:d(m),_=v!==void 0;return x?(v||t.getState().nodes).filter(k=>{const S=t.getState().nodeLookup.get(k.id);if(S&&!b&&(k.id===m.id||!S.internals.positionAbsolute))return!1;const N=Hi(_?k:S),T=aa(N,x);return g&&T>0||T>=N.width*N.height||T>=x.width*x.height}):[]},isNodeIntersecting:(m,g,v=!0)=>{const x=S0(m)?m:d(m);if(!x)return!1;const _=aa(x,g);return v&&_>0||_>=g.width*g.height||_>=x.width*x.height},updateNode:p,updateNodeData:(m,g,v={replace:!1})=>{p(m,b=>{const x=typeof g=="function"?g(b):g;return v.replace?{...b,data:x}:{...b,data:{...b.data,...x}}},v)},updateEdge:f,updateEdgeData:(m,g,v={replace:!1})=>{f(m,b=>{const x=typeof g=="function"?g(b):g;return v.replace?{...b,data:x}:{...b,data:{...b.data,...x}}},v)},getNodesBounds:m=>{const{nodeLookup:g,nodeOrigin:v}=t.getState();return QD(m,{nodeLookup:g,nodeOrigin:v})},getHandleConnections:({type:m,id:g,nodeId:v})=>Array.from(t.getState().connectionLookup.get(`${v}-${m}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:m,handleId:g,nodeId:v})=>Array.from(t.getState().connectionLookup.get(`${v}${m?g?`-${m}-${g}`:`-${m}`:""}`)?.values()??[]),fitView:async m=>{const g=t.getState().fitViewResolver??oL();return t.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:g}),n.nodeQueue.push(v=>[...v]),g.promise}}},[]);return j.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const Z0=e=>e.selected,P3=typeof window<"u"?window:void 0;function I3({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=mt(),{deleteElements:r}=Ki(),o=ca(e,{actInsideInputWithModifier:!1}),a=ca(t,{target:P3});j.useEffect(()=>{if(o){const{edges:l,nodes:u}=n.getState();r({nodes:u.filter(Z0),edges:l.filter(Z0)}),n.setState({nodesSelectionActive:!1})}},[o]),j.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function R3(e){const t=mt();j.useEffect(()=>{const n=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const r=Dv(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",mr.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Lc={position:"absolute",width:"100%",height:"100%",top:0,left:0},O3=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function M3({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=Fo.Free,zoomOnDoubleClick:l=!0,panOnDrag:u=!0,defaultViewport:d,translateExtent:p,minZoom:f,maxZoom:m,zoomActivationKeyCode:g,preventScrolling:v=!0,children:b,noWheelClassName:x,noPanClassName:_,onViewportChange:k,isControlledViewport:S,paneClickDistance:N,selectionOnDrag:T}){const A=mt(),C=j.useRef(null),{userSelectionActive:P,lib:O,connectionInProgress:I}=Ge(O3,ft),H=ca(g),D=j.useRef();R3(C);const z=j.useCallback(W=>{k?.({x:W[0],y:W[1],zoom:W[2]}),S||A.setState({transform:W})},[k,S]);return j.useEffect(()=>{if(C.current){D.current=BL({domNode:C.current,minZoom:f,maxZoom:m,translateExtent:p,viewport:d,onDraggingChange:$=>A.setState({paneDragging:$}),onPanZoomStart:($,G)=>{const{onViewportChangeStart:U,onMoveStart:X}=A.getState();X?.($,G),U?.(G)},onPanZoom:($,G)=>{const{onViewportChange:U,onMove:X}=A.getState();X?.($,G),U?.(G)},onPanZoomEnd:($,G)=>{const{onViewportChangeEnd:U,onMoveEnd:X}=A.getState();X?.($,G),U?.(G)}});const{x:W,y:L,zoom:q}=D.current.getViewport();return A.setState({panZoom:D.current,transform:[W,L,q],domNode:C.current.closest(".react-flow")}),()=>{D.current?.destroy()}}},[]),j.useEffect(()=>{D.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:l,panOnDrag:u,zoomActivationKeyPressed:H,preventScrolling:v,noPanClassName:_,userSelectionActive:P,noWheelClassName:x,lib:O,onTransformChange:z,connectionInProgress:I,selectionOnDrag:T,paneClickDistance:N})},[e,t,n,r,o,a,l,u,H,v,_,P,x,O,z,I,T,N]),s.jsx("div",{className:"react-flow__renderer",ref:C,style:Lc,children:b})}const D3=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function L3(){const{userSelectionActive:e,userSelectionRect:t}=Ge(D3,ft);return e&&t?s.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const op=(e,t)=>n=>{n.target===t.current&&e?.(n)},q3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function F3({isSelecting:e,selectionKeyPressed:t,selectionMode:n=sa.Full,panOnDrag:r,paneClickDistance:o,selectionOnDrag:a,onSelectionStart:l,onSelectionEnd:u,onPaneClick:d,onPaneContextMenu:p,onPaneScroll:f,onPaneMouseEnter:m,onPaneMouseMove:g,onPaneMouseLeave:v,children:b}){const x=mt(),{userSelectionActive:_,elementsSelectable:k,dragging:S,connectionInProgress:N}=Ge(q3,ft),T=k&&(e||_),A=j.useRef(null),C=j.useRef(),P=j.useRef(new Set),O=j.useRef(new Set),I=j.useRef(!1),H=U=>{if(I.current||N){I.current=!1;return}d?.(U),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},D=U=>{if(Array.isArray(r)&&r?.includes(2)){U.preventDefault();return}p?.(U)},z=f?U=>f(U):void 0,W=U=>{I.current&&(U.stopPropagation(),I.current=!1)},L=U=>{const{domNode:X}=x.getState();if(C.current=X?.getBoundingClientRect(),!C.current)return;const R=U.target===A.current;if(!R&&!!U.target.closest(".nokey")||!e||!(a&&R||t)||U.button!==0||!U.isPrimary)return;U.target?.setPointerCapture?.(U.pointerId),I.current=!1;const{x:F,y:K}=nr(U.nativeEvent,C.current);x.setState({userSelectionRect:{width:0,height:0,startX:F,startY:K,x:F,y:K}}),R||(U.stopPropagation(),U.preventDefault())},q=U=>{const{userSelectionRect:X,transform:R,nodeLookup:B,edgeLookup:Y,connectionLookup:F,triggerNodeChanges:K,triggerEdgeChanges:J,defaultEdgeOptions:te,resetSelectedElements:re}=x.getState();if(!C.current||!X)return;const{x:V,y:ne}=nr(U.nativeEvent,C.current),{startX:de,startY:ve}=X;if(!I.current){const Ce=t?0:o;if(Math.hypot(V-de,ne-ve)<=Ce)return;re(),l?.(U)}I.current=!0;const le={startX:de,startY:ve,x:V<de?V:de,y:ne<ve?ne:ve,width:Math.abs(V-de),height:Math.abs(ne-ve)},ge=P.current,_e=O.current;P.current=new Set(Ov(B,le,R,n===sa.Partial,!0).map(Ce=>Ce.id)),O.current=new Set;const we=te?.selectable??!0;for(const Ce of P.current){const Se=F.get(Ce);if(Se)for(const{edgeId:Qe}of Se.values()){const Oe=Y.get(Qe);Oe&&(Oe.selectable??we)&&O.current.add(Qe)}}if(!k0(ge,P.current)){const Ce=Ri(B,P.current,!0);K(Ce)}if(!k0(_e,O.current)){const Ce=Ri(Y,O.current);J(Ce)}x.setState({userSelectionRect:le,userSelectionActive:!0,nodesSelectionActive:!1})},$=U=>{U.button===0&&(U.target?.releasePointerCapture?.(U.pointerId),!_&&U.target===A.current&&x.getState().userSelectionRect&&H?.(U),x.setState({userSelectionActive:!1,userSelectionRect:null}),I.current&&(u?.(U),x.setState({nodesSelectionActive:P.current.size>0})))},G=r===!0||Array.isArray(r)&&r.includes(0);return s.jsxs("div",{className:Ct(["react-flow__pane",{draggable:G,dragging:S,selection:e}]),onClick:T?void 0:op(H,A),onContextMenu:op(D,A),onWheel:op(z,A),onPointerEnter:T?void 0:m,onPointerMove:T?q:g,onPointerUp:T?$:void 0,onPointerDownCapture:T?L:void 0,onClickCapture:T?W:void 0,onPointerLeave:v,ref:A,style:Lc,children:[b,s.jsx(L3,{})]})}function iv({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:l,nodeLookup:u,onError:d}=t.getState(),p=u.get(e);if(!p){d?.("012",mr.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&l)&&(a({nodes:[p],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])}function TT({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,nodeClickDistance:l}){const u=mt(),[d,p]=j.useState(!1),f=j.useRef();return j.useEffect(()=>{f.current=EL({getStoreItems:()=>u.getState(),onNodeMouseDown:m=>{iv({id:m,store:u,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),j.useEffect(()=>{if(t)f.current?.destroy();else if(e.current)return f.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:l}),()=>{f.current?.destroy()}},[n,r,t,a,e,o]),d}const z3=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function AT(){const e=mt();return j.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:a,nodesDraggable:l,onError:u,updateNodePositions:d,nodeLookup:p,nodeOrigin:f}=e.getState(),m=new Map,g=z3(l),v=o?a[0]:5,b=o?a[1]:5,x=n.direction.x*v*n.factor,_=n.direction.y*b*n.factor;for(const[,k]of p){if(!g(k))continue;let S={x:k.internals.positionAbsolute.x+x,y:k.internals.positionAbsolute.y+_};o&&(S=va(S,a));const{position:N,positionAbsolute:T}=GC({nodeId:k.id,nextPosition:S,nodeLookup:p,nodeExtent:r,nodeOrigin:f,onError:u});k.position=N,k.internals.positionAbsolute=T,m.set(k.id,k)}d(m)},[])}const Hv=j.createContext(null),B3=Hv.Provider;Hv.Consumer;const PT=()=>j.useContext(Hv),$3=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),H3=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:a,connection:l}=r,{fromHandle:u,toHandle:d,isValid:p}=l,f=d?.nodeId===e&&d?.id===t&&d?.type===n;return{connectingFrom:u?.nodeId===e&&u?.id===t&&u?.type===n,connectingTo:f,clickConnecting:o?.nodeId===e&&o?.id===t&&o?.type===n,isPossibleEndHandle:a===Bi.Strict?u?.type!==n:e!==u?.nodeId||t!==u?.id,connectionInProcess:!!u,clickConnectionInProcess:!!o,valid:f&&p}};function V3({type:e="source",position:t=je.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:l,onConnect:u,children:d,className:p,onMouseDown:f,onTouchStart:m,...g},v){const b=l||null,x=e==="target",_=mt(),k=PT(),{connectOnClick:S,noPanClassName:N,rfId:T}=Ge($3,ft),{connectingFrom:A,connectingTo:C,clickConnecting:P,isPossibleEndHandle:O,connectionInProcess:I,clickConnectionInProcess:H,valid:D}=Ge(H3(k,b,e),ft);k||_.getState().onError?.("010",mr.error010());const z=q=>{const{defaultEdgeOptions:$,onConnect:G,hasDefaultEdges:U}=_.getState(),X={...$,...q};if(U){const{edges:R,setEdges:B}=_.getState();B(dL(X,R))}G?.(X),u?.(X)},W=q=>{if(!k)return;const $=nT(q.nativeEvent);if(o&&($&&q.button===0||!$)){const G=_.getState();ov.onPointerDown(q.nativeEvent,{handleDomNode:q.currentTarget,autoPanOnConnect:G.autoPanOnConnect,connectionMode:G.connectionMode,connectionRadius:G.connectionRadius,domNode:G.domNode,nodeLookup:G.nodeLookup,lib:G.lib,isTarget:x,handleId:b,nodeId:k,flowId:G.rfId,panBy:G.panBy,cancelConnection:G.cancelConnection,onConnectStart:G.onConnectStart,onConnectEnd:G.onConnectEnd,updateConnection:G.updateConnection,onConnect:z,isValidConnection:n||G.isValidConnection,getTransform:()=>_.getState().transform,getFromHandle:()=>_.getState().connection.fromHandle,autoPanSpeed:G.autoPanSpeed,dragThreshold:G.connectionDragThreshold})}$?f?.(q):m?.(q)},L=q=>{const{onClickConnectStart:$,onClickConnectEnd:G,connectionClickStartHandle:U,connectionMode:X,isValidConnection:R,lib:B,rfId:Y,nodeLookup:F,connection:K}=_.getState();if(!k||!U&&!o)return;if(!U){$?.(q.nativeEvent,{nodeId:k,handleId:b,handleType:e}),_.setState({connectionClickStartHandle:{nodeId:k,type:e,id:b}});return}const J=eT(q.target),te=n||R,{connection:re,isValid:V}=ov.isValid(q.nativeEvent,{handle:{nodeId:k,id:b,type:e},connectionMode:X,fromNodeId:U.nodeId,fromHandleId:U.id||null,fromType:U.type,isValidConnection:te,flowId:Y,doc:J,lib:B,nodeLookup:F});V&&re&&z(re);const ne=structuredClone(K);delete ne.inProgress,ne.toPosition=ne.toHandle?ne.toHandle.position:null,G?.(q,ne),_.setState({connectionClickStartHandle:null})};return s.jsx("div",{"data-handleid":b,"data-nodeid":k,"data-handlepos":t,"data-id":`${T}-${k}-${b}-${e}`,className:Ct(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,p,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:a,clickconnecting:P,connectingfrom:A,connectingto:C,valid:D,connectionindicator:r&&(!I||O)&&(I||H?a:o)}]),onMouseDown:W,onTouchStart:W,onClick:S?L:void 0,ref:v,...g,children:d})}const Ut=j.memo(ET(V3));function U3({data:e,isConnectable:t,sourcePosition:n=je.Bottom}){return s.jsxs(s.Fragment,{children:[e?.label,s.jsx(Ut,{type:"source",position:n,isConnectable:t})]})}function W3({data:e,isConnectable:t,targetPosition:n=je.Top,sourcePosition:r=je.Bottom}){return s.jsxs(s.Fragment,{children:[s.jsx(Ut,{type:"target",position:n,isConnectable:t}),e?.label,s.jsx(Ut,{type:"source",position:r,isConnectable:t})]})}function K3(){return null}function G3({data:e,isConnectable:t,targetPosition:n=je.Top}){return s.jsxs(s.Fragment,{children:[s.jsx(Ut,{type:"target",position:n,isConnectable:t}),e?.label]})}const yc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},e_={input:U3,default:W3,output:G3,group:K3};function Y3(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Q3=e=>{const{width:t,height:n,x:r,y:o}=ya(e.nodeLookup,{filter:a=>!!a.selected});return{width:tr(t)?t:null,height:tr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function X3({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=mt(),{width:o,height:a,transformString:l,userSelectionActive:u}=Ge(Q3,ft),d=AT(),p=j.useRef(null);if(j.useEffect(()=>{n||p.current?.focus({preventScroll:!0})},[n]),TT({nodeRef:p}),u||!o||!a)return null;const f=e?g=>{const v=r.getState().nodes.filter(b=>b.selected);e(g,v)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(yc,g.key)&&(g.preventDefault(),d({direction:yc[g.key],factor:g.shiftKey?4:1}))};return s.jsx("div",{className:Ct(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:s.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:o,height:a}})})}const t_=typeof window<"u"?window:void 0,J3=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function IT({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:l,paneClickDistance:u,deleteKeyCode:d,selectionKeyCode:p,selectionOnDrag:f,selectionMode:m,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:b,panActivationKeyCode:x,zoomActivationKeyCode:_,elementsSelectable:k,zoomOnScroll:S,zoomOnPinch:N,panOnScroll:T,panOnScrollSpeed:A,panOnScrollMode:C,zoomOnDoubleClick:P,panOnDrag:O,defaultViewport:I,translateExtent:H,minZoom:D,maxZoom:z,preventScrolling:W,onSelectionContextMenu:L,noWheelClassName:q,noPanClassName:$,disableKeyboardA11y:G,onViewportChange:U,isControlledViewport:X}){const{nodesSelectionActive:R,userSelectionActive:B}=Ge(J3,ft),Y=ca(p,{target:t_}),F=ca(x,{target:t_}),K=F||O,J=F||T,te=f&&K!==!0,re=Y||B||te;return I3({deleteKeyCode:d,multiSelectionKeyCode:b}),s.jsx(M3,{onPaneContextMenu:a,elementsSelectable:k,zoomOnScroll:S,zoomOnPinch:N,panOnScroll:J,panOnScrollSpeed:A,panOnScrollMode:C,zoomOnDoubleClick:P,panOnDrag:!Y&&K,defaultViewport:I,translateExtent:H,minZoom:D,maxZoom:z,zoomActivationKeyCode:_,preventScrolling:W,noWheelClassName:q,noPanClassName:$,onViewportChange:U,isControlledViewport:X,paneClickDistance:u,selectionOnDrag:te,children:s.jsxs(F3,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:l,panOnDrag:K,isSelecting:!!re,selectionMode:m,selectionKeyPressed:Y,paneClickDistance:u,selectionOnDrag:te,children:[e,R&&s.jsx(X3,{onSelectionContextMenu:L,noPanClassName:$,disableKeyboardA11y:G})]})})}IT.displayName="FlowRenderer";const Z3=j.memo(IT),eq=e=>t=>e?Ov(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function tq(e){return Ge(j.useCallback(eq(e),[e]),ft)}const nq=e=>e.updateNodeInternals;function rq(){const e=Ge(nq),[t]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const a=o.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:o.target,force:!0})}),e(r)}));return j.useEffect(()=>()=>{t?.disconnect()},[t]),t}function oq({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=mt(),a=j.useRef(null),l=j.useRef(null),u=j.useRef(e.sourcePosition),d=j.useRef(e.targetPosition),p=j.useRef(t),f=n&&!!e.internals.handleBounds;return j.useEffect(()=>{a.current&&!e.hidden&&(!f||l.current!==a.current)&&(l.current&&r?.unobserve(l.current),r?.observe(a.current),l.current=a.current)},[f,e.hidden]),j.useEffect(()=>()=>{l.current&&(r?.unobserve(l.current),l.current=null)},[]),j.useEffect(()=>{if(a.current){const m=p.current!==t,g=u.current!==e.sourcePosition,v=d.current!==e.targetPosition;(m||g||v)&&(p.current=t,u.current=e.sourcePosition,d.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function iq({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:a,onDoubleClick:l,nodesDraggable:u,elementsSelectable:d,nodesConnectable:p,nodesFocusable:f,resizeObserver:m,noDragClassName:g,noPanClassName:v,disableKeyboardA11y:b,rfId:x,nodeTypes:_,nodeClickDistance:k,onError:S}){const{node:N,internals:T,isParent:A}=Ge(V=>{const ne=V.nodeLookup.get(e),de=V.parentLookup.has(e);return{node:ne,internals:ne.internals,isParent:de}},ft);let C=N.type||"default",P=_?.[C]||e_[C];P===void 0&&(S?.("003",mr.error003(C)),C="default",P=_?.default||e_.default);const O=!!(N.draggable||u&&typeof N.draggable>"u"),I=!!(N.selectable||d&&typeof N.selectable>"u"),H=!!(N.connectable||p&&typeof N.connectable>"u"),D=!!(N.focusable||f&&typeof N.focusable>"u"),z=mt(),W=JC(N),L=oq({node:N,nodeType:C,hasDimensions:W,resizeObserver:m}),q=TT({nodeRef:L,disabled:N.hidden||!O,noDragClassName:g,handleSelector:N.dragHandle,nodeId:e,isSelectable:I,nodeClickDistance:k}),$=AT();if(N.hidden)return null;const G=Rr(N),U=Y3(N),X=I||O||t||n||r||o,R=n?V=>n(V,{...T.userNode}):void 0,B=r?V=>r(V,{...T.userNode}):void 0,Y=o?V=>o(V,{...T.userNode}):void 0,F=a?V=>a(V,{...T.userNode}):void 0,K=l?V=>l(V,{...T.userNode}):void 0,J=V=>{const{selectNodesOnDrag:ne,nodeDragThreshold:de}=z.getState();I&&(!ne||!O||de>0)&&iv({id:e,store:z,nodeRef:L}),t&&t(V,{...T.userNode})},te=V=>{if(!(tT(V.nativeEvent)||b)){if(HC.includes(V.key)&&I){const ne=V.key==="Escape";iv({id:e,store:z,unselect:ne,nodeRef:L})}else if(O&&N.selected&&Object.prototype.hasOwnProperty.call(yc,V.key)){V.preventDefault();const{ariaLabelConfig:ne}=z.getState();z.setState({ariaLiveMessage:ne["node.a11yDescription.ariaLiveMessage"]({direction:V.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),$({direction:yc[V.key],factor:V.shiftKey?4:1})}}},re=()=>{if(b||!L.current?.matches(":focus-visible"))return;const{transform:V,width:ne,height:de,autoPanOnNodeFocus:ve,setCenter:le}=z.getState();if(!ve)return;Ov(new Map([[e,N]]),{x:0,y:0,width:ne,height:de},V,!0).length>0||le(N.position.x+G.width/2,N.position.y+G.height/2,{zoom:V[2]})};return s.jsx("div",{className:Ct(["react-flow__node",`react-flow__node-${C}`,{[v]:O},N.className,{selected:N.selected,selectable:I,parent:A,draggable:O,dragging:q}]),ref:L,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:W?"visible":"hidden",...N.style,...U},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:R,onMouseMove:B,onMouseLeave:Y,onContextMenu:F,onClick:J,onDoubleClick:K,onKeyDown:D?te:void 0,tabIndex:D?0:void 0,onFocus:D?re:void 0,role:N.ariaRole??(D?"group":void 0),"aria-roledescription":"node","aria-describedby":b?void 0:`${wT}-${x}`,"aria-label":N.ariaLabel,...N.domAttributes,children:s.jsx(B3,{value:e,children:s.jsx(P,{id:e,data:N.data,type:C,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:N.selected??!1,selectable:I,draggable:O,deletable:N.deletable??!0,isConnectable:H,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:q,dragHandle:N.dragHandle,zIndex:T.z,parentId:N.parentId,...G})})})}var sq=j.memo(iq);const aq=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function RT(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:a}=Ge(aq,ft),l=tq(e.onlyRenderVisibleElements),u=rq();return s.jsx("div",{className:"react-flow__nodes",style:Lc,children:l.map(d=>s.jsx(sq,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},d))})}RT.displayName="NodeRenderer";const lq=j.memo(RT);function cq(e){return Ge(j.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const a=n.nodeLookup.get(o.source),l=n.nodeLookup.get(o.target);a&&l&&lL({sourceNode:a,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),ft)}const uq=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return s.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},dq=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return s.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},n_={[fc.Arrow]:uq,[fc.ArrowClosed]:dq};function pq(e){const t=mt();return j.useMemo(()=>Object.prototype.hasOwnProperty.call(n_,e)?n_[e]:(t.getState().onError?.("009",mr.error009(e)),null),[e])}const fq=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:l,orient:u="auto-start-reverse"})=>{const d=pq(t);return d?s.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:u,refX:"0",refY:"0",children:s.jsx(d,{color:n,strokeWidth:l})}):null},OT=({defaultColor:e,rfId:t})=>{const n=Ge(a=>a.edges),r=Ge(a=>a.defaultEdgeOptions),o=j.useMemo(()=>gL(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return o.length?s.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:s.jsx("defs",{children:o.map(a=>s.jsx(fq,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};OT.displayName="MarkerDefinitions";var hq=j.memo(OT);function MT({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:a,labelBgPadding:l=[2,4],labelBgBorderRadius:u=2,children:d,className:p,...f}){const[m,g]=j.useState({x:1,y:0,width:0,height:0}),v=Ct(["react-flow__edge-textwrapper",p]),b=j.useRef(null);return j.useEffect(()=>{if(b.current){const x=b.current.getBBox();g({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),n?s.jsxs("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:v,visibility:m.width?"visible":"hidden",...f,children:[o&&s.jsx("rect",{width:m.width+2*l[0],x:-l[0],y:-l[1],height:m.height+2*l[1],className:"react-flow__edge-textbg",style:a,rx:u,ry:u}),s.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:b,style:r,children:n}),d]}):null}MT.displayName="EdgeText";const mq=j.memo(MT);function qc({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d,interactionWidth:p=20,...f}){return s.jsxs(s.Fragment,{children:[s.jsx("path",{...f,d:e,fill:"none",className:Ct(["react-flow__edge-path",f.className])}),p?s.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,r&&tr(t)&&tr(n)?s.jsx(mq,{x:t,y:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:d}):null]})}function r_({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===je.Left||e===je.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function DT({sourceX:e,sourceY:t,sourcePosition:n=je.Bottom,targetX:r,targetY:o,targetPosition:a=je.Top}){const[l,u]=r_({pos:n,x1:e,y1:t,x2:r,y2:o}),[d,p]=r_({pos:a,x1:r,y1:o,x2:e,y2:t}),[f,m,g,v]=rT({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:p});return[`M${e},${t} C${l},${u} ${d},${p} ${r},${o}`,f,m,g,v]}function LT(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:l,targetPosition:u,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:_,interactionWidth:k})=>{const[S,N,T]=DT({sourceX:n,sourceY:r,sourcePosition:l,targetX:o,targetY:a,targetPosition:u}),A=e.isInternal?void 0:t;return s.jsx(qc,{id:A,path:S,labelX:N,labelY:T,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:_,interactionWidth:k})})}const gq=LT({isInternal:!1}),qT=LT({isInternal:!0});gq.displayName="SimpleBezierEdge";qT.displayName="SimpleBezierEdgeInternal";function FT(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,sourcePosition:v=je.Bottom,targetPosition:b=je.Top,markerEnd:x,markerStart:_,pathOptions:k,interactionWidth:S})=>{const[N,T,A]=gc({sourceX:n,sourceY:r,sourcePosition:v,targetX:o,targetY:a,targetPosition:b,borderRadius:k?.borderRadius,offset:k?.offset,stepPosition:k?.stepPosition}),C=e.isInternal?void 0:t;return s.jsx(qc,{id:C,path:N,labelX:T,labelY:A,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,markerEnd:x,markerStart:_,interactionWidth:S})})}const zT=FT({isInternal:!1}),BT=FT({isInternal:!0});zT.displayName="SmoothStepEdge";BT.displayName="SmoothStepEdgeInternal";function $T(e){return j.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return s.jsx(zT,{...n,id:r,pathOptions:j.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const yq=$T({isInternal:!1}),HT=$T({isInternal:!0});yq.displayName="StepEdge";HT.displayName="StepEdgeInternal";function VT(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,markerEnd:v,markerStart:b,interactionWidth:x})=>{const[_,k,S]=iT({sourceX:n,sourceY:r,targetX:o,targetY:a}),N=e.isInternal?void 0:t;return s.jsx(qc,{id:N,path:_,labelX:k,labelY:S,label:l,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,markerEnd:v,markerStart:b,interactionWidth:x})})}const vq=VT({isInternal:!1}),UT=VT({isInternal:!0});vq.displayName="StraightEdge";UT.displayName="StraightEdgeInternal";function WT(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:l=je.Bottom,targetPosition:u=je.Top,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:_,pathOptions:k,interactionWidth:S})=>{const[N,T,A]=Lv({sourceX:n,sourceY:r,sourcePosition:l,targetX:o,targetY:a,targetPosition:u,curvature:k?.curvature}),C=e.isInternal?void 0:t;return s.jsx(qc,{id:C,path:N,labelX:T,labelY:A,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,style:b,markerEnd:x,markerStart:_,interactionWidth:S})})}const xq=WT({isInternal:!1}),KT=WT({isInternal:!0});xq.displayName="BezierEdge";KT.displayName="BezierEdgeInternal";const o_={default:KT,straight:UT,step:HT,smoothstep:BT,simplebezier:qT},i_={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},bq=(e,t,n)=>n===je.Left?e-t:n===je.Right?e+t:e,wq=(e,t,n)=>n===je.Top?e-t:n===je.Bottom?e+t:e,s_="react-flow__edgeupdater";function a_({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:l,type:u}){return s.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:l,className:Ct([s_,`${s_}-${u}`]),cx:bq(t,r,e),cy:wq(n,r,e),r,stroke:"transparent",fill:"transparent"})}function _q({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:l,sourcePosition:u,targetPosition:d,onReconnect:p,onReconnectStart:f,onReconnectEnd:m,setReconnecting:g,setUpdateHover:v}){const b=mt(),x=(T,A)=>{if(T.button!==0)return;const{autoPanOnConnect:C,domNode:P,isValidConnection:O,connectionMode:I,connectionRadius:H,lib:D,onConnectStart:z,onConnectEnd:W,cancelConnection:L,nodeLookup:q,rfId:$,panBy:G,updateConnection:U}=b.getState(),X=A.type==="target",R=(F,K)=>{g(!1),m?.(F,n,A.type,K)},B=F=>p?.(n,F),Y=(F,K)=>{g(!0),f?.(T,n,A.type),z?.(F,K)};ov.onPointerDown(T.nativeEvent,{autoPanOnConnect:C,connectionMode:I,connectionRadius:H,domNode:P,handleId:A.id,nodeId:A.nodeId,nodeLookup:q,isTarget:X,edgeUpdaterType:A.type,lib:D,flowId:$,cancelConnection:L,panBy:G,isValidConnection:O,onConnect:B,onConnectStart:Y,onConnectEnd:W,onReconnectEnd:R,updateConnection:U,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,dragThreshold:b.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},_=T=>x(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),k=T=>x(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),S=()=>v(!0),N=()=>v(!1);return s.jsxs(s.Fragment,{children:[(e===!0||e==="source")&&s.jsx(a_,{position:u,centerX:r,centerY:o,radius:t,onMouseDown:_,onMouseEnter:S,onMouseOut:N,type:"source"}),(e===!0||e==="target")&&s.jsx(a_,{position:d,centerX:a,centerY:l,radius:t,onMouseDown:k,onMouseEnter:S,onMouseOut:N,type:"target"})]})}function Sq({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:a,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:p,reconnectRadius:f,onReconnect:m,onReconnectStart:g,onReconnectEnd:v,rfId:b,edgeTypes:x,noPanClassName:_,onError:k,disableKeyboardA11y:S}){let N=Ge(le=>le.edgeLookup.get(e));const T=Ge(le=>le.defaultEdgeOptions);N=T?{...T,...N}:N;let A=N.type||"default",C=x?.[A]||o_[A];C===void 0&&(k?.("011",mr.error011(A)),A="default",C=x?.default||o_.default);const P=!!(N.focusable||t&&typeof N.focusable>"u"),O=typeof m<"u"&&(N.reconnectable||n&&typeof N.reconnectable>"u"),I=!!(N.selectable||r&&typeof N.selectable>"u"),H=j.useRef(null),[D,z]=j.useState(!1),[W,L]=j.useState(!1),q=mt(),{zIndex:$,sourceX:G,sourceY:U,targetX:X,targetY:R,sourcePosition:B,targetPosition:Y}=Ge(j.useCallback(le=>{const ge=le.nodeLookup.get(N.source),_e=le.nodeLookup.get(N.target);if(!ge||!_e)return{zIndex:N.zIndex,...i_};const we=mL({id:e,sourceNode:ge,targetNode:_e,sourceHandle:N.sourceHandle||null,targetHandle:N.targetHandle||null,connectionMode:le.connectionMode,onError:k});return{zIndex:aL({selected:N.selected,zIndex:N.zIndex,sourceNode:ge,targetNode:_e,elevateOnSelect:le.elevateEdgesOnSelect,zIndexMode:le.zIndexMode}),...we||i_}},[N.source,N.target,N.sourceHandle,N.targetHandle,N.selected,N.zIndex]),ft),F=j.useMemo(()=>N.markerStart?`url('#${nv(N.markerStart,b)}')`:void 0,[N.markerStart,b]),K=j.useMemo(()=>N.markerEnd?`url('#${nv(N.markerEnd,b)}')`:void 0,[N.markerEnd,b]);if(N.hidden||G===null||U===null||X===null||R===null)return null;const J=le=>{const{addSelectedEdges:ge,unselectNodesAndEdges:_e,multiSelectionActive:we}=q.getState();I&&(q.setState({nodesSelectionActive:!1}),N.selected&&we?(_e({nodes:[],edges:[N]}),H.current?.blur()):ge([e])),o&&o(le,N)},te=a?le=>{a(le,{...N})}:void 0,re=l?le=>{l(le,{...N})}:void 0,V=u?le=>{u(le,{...N})}:void 0,ne=d?le=>{d(le,{...N})}:void 0,de=p?le=>{p(le,{...N})}:void 0,ve=le=>{if(!S&&HC.includes(le.key)&&I){const{unselectNodesAndEdges:ge,addSelectedEdges:_e}=q.getState();le.key==="Escape"?(H.current?.blur(),ge({edges:[N]})):_e([e])}};return s.jsx("svg",{style:{zIndex:$},children:s.jsxs("g",{className:Ct(["react-flow__edge",`react-flow__edge-${A}`,N.className,_,{selected:N.selected,animated:N.animated,inactive:!I&&!o,updating:D,selectable:I}]),onClick:J,onDoubleClick:te,onContextMenu:re,onMouseEnter:V,onMouseMove:ne,onMouseLeave:de,onKeyDown:P?ve:void 0,tabIndex:P?0:void 0,role:N.ariaRole??(P?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":N.ariaLabel===null?void 0:N.ariaLabel||`Edge from ${N.source} to ${N.target}`,"aria-describedby":P?`${_T}-${b}`:void 0,ref:H,...N.domAttributes,children:[!W&&s.jsx(C,{id:e,source:N.source,target:N.target,type:N.type,selected:N.selected,animated:N.animated,selectable:I,deletable:N.deletable??!0,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,sourceX:G,sourceY:U,targetX:X,targetY:R,sourcePosition:B,targetPosition:Y,data:N.data,style:N.style,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerStart:F,markerEnd:K,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth}),O&&s.jsx(_q,{edge:N,isReconnectable:O,reconnectRadius:f,onReconnect:m,onReconnectStart:g,onReconnectEnd:v,sourceX:G,sourceY:U,targetX:X,targetY:R,sourcePosition:B,targetPosition:Y,setUpdateHover:z,setReconnecting:L})]})})}var kq=j.memo(Sq);const Nq=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function GT({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:a,onEdgeContextMenu:l,onEdgeMouseEnter:u,onEdgeMouseMove:d,onEdgeMouseLeave:p,onEdgeClick:f,reconnectRadius:m,onEdgeDoubleClick:g,onReconnectStart:v,onReconnectEnd:b,disableKeyboardA11y:x}){const{edgesFocusable:_,edgesReconnectable:k,elementsSelectable:S,onError:N}=Ge(Nq,ft),T=cq(t);return s.jsxs("div",{className:"react-flow__edges",children:[s.jsx(hq,{defaultColor:e,rfId:n}),T.map(A=>s.jsx(kq,{id:A,edgesFocusable:_,edgesReconnectable:k,elementsSelectable:S,noPanClassName:o,onReconnect:a,onContextMenu:l,onMouseEnter:u,onMouseMove:d,onMouseLeave:p,onClick:f,reconnectRadius:m,onDoubleClick:g,onReconnectStart:v,onReconnectEnd:b,rfId:n,onError:N,edgeTypes:r,disableKeyboardA11y:x},A))]})}GT.displayName="EdgeRenderer";const jq=j.memo(GT),Eq=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Cq({children:e}){const t=Ge(Eq);return s.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Tq(e){const t=Ki(),n=j.useRef(!1);j.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Aq=e=>e.panZoom?.syncViewport;function Pq(e){const t=Ge(Aq),n=mt();return j.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Iq(e){return e.connection.inProgress?{...e.connection,to:xa(e.connection.to,e.transform)}:{...e.connection}}function Rq(e){return Iq}function Oq(e){const t=Rq();return Ge(t,ft)}const Mq=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Dq({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:a,height:l,isValid:u,inProgress:d}=Ge(Mq,ft);return!(a&&o&&d)?null:s.jsx("svg",{style:e,width:a,height:l,className:"react-flow__connectionline react-flow__container",children:s.jsx("g",{className:Ct(["react-flow__connection",WC(u)]),children:s.jsx(YT,{style:t,type:n,CustomComponent:r,isValid:u})})})}const YT=({style:e,type:t=po.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:a,fromNode:l,fromHandle:u,fromPosition:d,to:p,toNode:f,toHandle:m,toPosition:g,pointer:v}=Oq();if(!o)return;if(n)return s.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:u,fromX:a.x,fromY:a.y,toX:p.x,toY:p.y,fromPosition:d,toPosition:g,connectionStatus:WC(r),toNode:f,toHandle:m,pointer:v});let b="";const x={sourceX:a.x,sourceY:a.y,sourcePosition:d,targetX:p.x,targetY:p.y,targetPosition:g};switch(t){case po.Bezier:[b]=Lv(x);break;case po.SimpleBezier:[b]=DT(x);break;case po.Step:[b]=gc({...x,borderRadius:0});break;case po.SmoothStep:[b]=gc(x);break;default:[b]=iT(x)}return s.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};YT.displayName="ConnectionLine";const Lq={};function l_(e=Lq){j.useRef(e),mt(),j.useEffect(()=>{},[e])}function qq(){mt(),j.useRef(!1),j.useEffect(()=>{},[])}function QT({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:f,onSelectionContextMenu:m,onSelectionStart:g,onSelectionEnd:v,connectionLineType:b,connectionLineStyle:x,connectionLineComponent:_,connectionLineContainerStyle:k,selectionKeyCode:S,selectionOnDrag:N,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:C,zoomActivationKeyCode:P,deleteKeyCode:O,onlyRenderVisibleElements:I,elementsSelectable:H,defaultViewport:D,translateExtent:z,minZoom:W,maxZoom:L,preventScrolling:q,defaultMarkerColor:$,zoomOnScroll:G,zoomOnPinch:U,panOnScroll:X,panOnScrollSpeed:R,panOnScrollMode:B,zoomOnDoubleClick:Y,panOnDrag:F,onPaneClick:K,onPaneMouseEnter:J,onPaneMouseMove:te,onPaneMouseLeave:re,onPaneScroll:V,onPaneContextMenu:ne,paneClickDistance:de,nodeClickDistance:ve,onEdgeContextMenu:le,onEdgeMouseEnter:ge,onEdgeMouseMove:_e,onEdgeMouseLeave:we,reconnectRadius:Ce,onReconnect:Se,onReconnectStart:Qe,onReconnectEnd:Oe,noDragClassName:he,noWheelClassName:Ee,noPanClassName:Ae,disableKeyboardA11y:Ve,nodeExtent:lt,rfId:ot,viewport:ae,onViewportChange:ce}){return l_(e),l_(t),qq(),Tq(n),Pq(ae),s.jsx(Z3,{onPaneClick:K,onPaneMouseEnter:J,onPaneMouseMove:te,onPaneMouseLeave:re,onPaneContextMenu:ne,onPaneScroll:V,paneClickDistance:de,deleteKeyCode:O,selectionKeyCode:S,selectionOnDrag:N,selectionMode:T,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:A,panActivationKeyCode:C,zoomActivationKeyCode:P,elementsSelectable:H,zoomOnScroll:G,zoomOnPinch:U,zoomOnDoubleClick:Y,panOnScroll:X,panOnScrollSpeed:R,panOnScrollMode:B,panOnDrag:F,defaultViewport:D,translateExtent:z,minZoom:W,maxZoom:L,onSelectionContextMenu:m,preventScrolling:q,noDragClassName:he,noWheelClassName:Ee,noPanClassName:Ae,disableKeyboardA11y:Ve,onViewportChange:ce,isControlledViewport:!!ae,children:s.jsxs(Cq,{children:[s.jsx(jq,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:l,onReconnect:Se,onReconnectStart:Qe,onReconnectEnd:Oe,onlyRenderVisibleElements:I,onEdgeContextMenu:le,onEdgeMouseEnter:ge,onEdgeMouseMove:_e,onEdgeMouseLeave:we,reconnectRadius:Ce,defaultMarkerColor:$,noPanClassName:Ae,disableKeyboardA11y:Ve,rfId:ot}),s.jsx(Dq,{style:x,type:b,component:_,containerStyle:k}),s.jsx("div",{className:"react-flow__edgelabel-renderer"}),s.jsx(lq,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:f,nodeClickDistance:ve,onlyRenderVisibleElements:I,noPanClassName:Ae,noDragClassName:he,disableKeyboardA11y:Ve,nodeExtent:lt,rfId:ot}),s.jsx("div",{className:"react-flow__viewport-portal"})]})})}QT.displayName="GraphView";const Fq=j.memo(QT),c_=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:l,fitViewOptions:u,minZoom:d=.5,maxZoom:p=2,nodeOrigin:f,nodeExtent:m,zIndexMode:g="basic"}={})=>{const v=new Map,b=new Map,x=new Map,_=new Map,k=r??t??[],S=n??e??[],N=f??[0,0],T=m??ia;lT(x,_,k);const A=rv(S,v,b,{nodeOrigin:N,nodeExtent:T,zIndexMode:g});let C=[0,0,1];if(l&&o&&a){const P=ya(v,{filter:D=>!!((D.width||D.initialWidth)&&(D.height||D.initialHeight))}),{x:O,y:I,zoom:H}=Mv(P,o,a,d,p,u?.padding??.1);C=[O,I,H]}return{rfId:"1",width:o??0,height:a??0,transform:C,nodes:S,nodesInitialized:A,nodeLookup:v,parentLookup:b,edges:k,edgeLookup:_,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:d,maxZoom:p,translateExtent:ia,nodeExtent:T,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Bi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:u,fitViewResolver:null,connection:{...UC},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:tL,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:VC,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},zq=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:p,nodeOrigin:f,nodeExtent:m,zIndexMode:g})=>r3((v,b)=>{async function x(){const{nodeLookup:_,panZoom:k,fitViewOptions:S,fitViewResolver:N,width:T,height:A,minZoom:C,maxZoom:P}=b();k&&(await ZD({nodes:_,width:T,height:A,panZoom:k,minZoom:C,maxZoom:P},S),N?.resolve(!0),v({fitViewResolver:null}))}return{...c_({nodes:e,edges:t,width:o,height:a,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:p,nodeOrigin:f,nodeExtent:m,defaultNodes:n,defaultEdges:r,zIndexMode:g}),setNodes:_=>{const{nodeLookup:k,parentLookup:S,nodeOrigin:N,elevateNodesOnSelect:T,fitViewQueued:A,zIndexMode:C}=b(),P=rv(_,k,S,{nodeOrigin:N,nodeExtent:m,elevateNodesOnSelect:T,checkEquality:!0,zIndexMode:C});A&&P?(x(),v({nodes:_,nodesInitialized:P,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:_,nodesInitialized:P})},setEdges:_=>{const{connectionLookup:k,edgeLookup:S}=b();lT(k,S,_),v({edges:_})},setDefaultNodesAndEdges:(_,k)=>{if(_){const{setNodes:S}=b();S(_),v({hasDefaultNodes:!0})}if(k){const{setEdges:S}=b();S(k),v({hasDefaultEdges:!0})}},updateNodeInternals:_=>{const{triggerNodeChanges:k,nodeLookup:S,parentLookup:N,domNode:T,nodeOrigin:A,nodeExtent:C,debug:P,fitViewQueued:O,zIndexMode:I}=b(),{changes:H,updatedInternals:D}=SL(_,S,N,T,A,C,I);D&&(xL(S,N,{nodeOrigin:A,nodeExtent:C,zIndexMode:I}),O?(x(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),H?.length>0&&(P&&console.log("React Flow: trigger node changes",H),k?.(H)))},updateNodePositions:(_,k=!1)=>{const S=[];let N=[];const{nodeLookup:T,triggerNodeChanges:A,connection:C,updateConnection:P,onNodesChangeMiddlewareMap:O}=b();for(const[I,H]of _){const D=T.get(I),z=!!(D?.expandParent&&D?.parentId&&H?.position),W={id:I,type:"position",position:z?{x:Math.max(0,H.position.x),y:Math.max(0,H.position.y)}:H.position,dragging:k};if(D&&C.inProgress&&C.fromNode.id===D.id){const L=Ho(D,C.fromHandle,je.Left,!0);P({...C,from:L})}z&&D.parentId&&S.push({id:I,parentId:D.parentId,rect:{...H.internals.positionAbsolute,width:H.measured.width??0,height:H.measured.height??0}}),N.push(W)}if(S.length>0){const{parentLookup:I,nodeOrigin:H}=b(),D=$v(S,T,I,H);N.push(...D)}for(const I of O.values())N=I(N);A(N)},triggerNodeChanges:_=>{const{onNodesChange:k,setNodes:S,nodes:N,hasDefaultNodes:T,debug:A}=b();if(_?.length){if(T){const C=NT(_,N);S(C)}A&&console.log("React Flow: trigger node changes",_),k?.(_)}},triggerEdgeChanges:_=>{const{onEdgesChange:k,setEdges:S,edges:N,hasDefaultEdges:T,debug:A}=b();if(_?.length){if(T){const C=jT(_,N);S(C)}A&&console.log("React Flow: trigger edge changes",_),k?.(_)}},addSelectedNodes:_=>{const{multiSelectionActive:k,edgeLookup:S,nodeLookup:N,triggerNodeChanges:T,triggerEdgeChanges:A}=b();if(k){const C=_.map(P=>Do(P,!0));T(C);return}T(Ri(N,new Set([..._]),!0)),A(Ri(S))},addSelectedEdges:_=>{const{multiSelectionActive:k,edgeLookup:S,nodeLookup:N,triggerNodeChanges:T,triggerEdgeChanges:A}=b();if(k){const C=_.map(P=>Do(P,!0));A(C);return}A(Ri(S,new Set([..._]))),T(Ri(N,new Set,!0))},unselectNodesAndEdges:({nodes:_,edges:k}={})=>{const{edges:S,nodes:N,nodeLookup:T,triggerNodeChanges:A,triggerEdgeChanges:C}=b(),P=_||N,O=k||S,I=P.map(D=>{const z=T.get(D.id);return z&&(z.selected=!1),Do(D.id,!1)}),H=O.map(D=>Do(D.id,!1));A(I),C(H)},setMinZoom:_=>{const{panZoom:k,maxZoom:S}=b();k?.setScaleExtent([_,S]),v({minZoom:_})},setMaxZoom:_=>{const{panZoom:k,minZoom:S}=b();k?.setScaleExtent([S,_]),v({maxZoom:_})},setTranslateExtent:_=>{b().panZoom?.setTranslateExtent(_),v({translateExtent:_})},resetSelectedElements:()=>{const{edges:_,nodes:k,triggerNodeChanges:S,triggerEdgeChanges:N,elementsSelectable:T}=b();if(!T)return;const A=k.reduce((P,O)=>O.selected?[...P,Do(O.id,!1)]:P,[]),C=_.reduce((P,O)=>O.selected?[...P,Do(O.id,!1)]:P,[]);S(A),N(C)},setNodeExtent:_=>{const{nodes:k,nodeLookup:S,parentLookup:N,nodeOrigin:T,elevateNodesOnSelect:A,nodeExtent:C,zIndexMode:P}=b();_[0][0]===C[0][0]&&_[0][1]===C[0][1]&&_[1][0]===C[1][0]&&_[1][1]===C[1][1]||(rv(k,S,N,{nodeOrigin:T,nodeExtent:_,elevateNodesOnSelect:A,checkEquality:!1,zIndexMode:P}),v({nodeExtent:_}))},panBy:_=>{const{transform:k,width:S,height:N,panZoom:T,translateExtent:A}=b();return kL({delta:_,panZoom:T,transform:k,translateExtent:A,width:S,height:N})},setCenter:async(_,k,S)=>{const{width:N,height:T,maxZoom:A,panZoom:C}=b();if(!C)return Promise.resolve(!1);const P=typeof S?.zoom<"u"?S.zoom:A;return await C.setViewport({x:N/2-_*P,y:T/2-k*P,zoom:P},{duration:S?.duration,ease:S?.ease,interpolate:S?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...UC}})},updateConnection:_=>{v({connection:_})},reset:()=>v({...c_()})}},Object.is);function XT({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:a,initialMinZoom:l,initialMaxZoom:u,initialFitViewOptions:d,fitView:p,nodeOrigin:f,nodeExtent:m,zIndexMode:g,children:v}){const[b]=j.useState(()=>zq({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:p,minZoom:l,maxZoom:u,fitViewOptions:d,nodeOrigin:f,nodeExtent:m,zIndexMode:g}));return s.jsx(i3,{value:b,children:s.jsx(C3,{children:v})})}function Bq({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:a,height:l,fitView:u,fitViewOptions:d,minZoom:p,maxZoom:f,nodeOrigin:m,nodeExtent:g,zIndexMode:v}){return j.useContext(Mc)?s.jsx(s.Fragment,{children:e}):s.jsx(XT,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:l,fitView:u,initialFitViewOptions:d,initialMinZoom:p,initialMaxZoom:f,nodeOrigin:m,nodeExtent:g,zIndexMode:v,children:e})}const $q={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Hq({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a,edgeTypes:l,onNodeClick:u,onEdgeClick:d,onInit:p,onMove:f,onMoveStart:m,onMoveEnd:g,onConnect:v,onConnectStart:b,onConnectEnd:x,onClickConnectStart:_,onClickConnectEnd:k,onNodeMouseEnter:S,onNodeMouseMove:N,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:C,onNodeDragStart:P,onNodeDrag:O,onNodeDragStop:I,onNodesDelete:H,onEdgesDelete:D,onDelete:z,onSelectionChange:W,onSelectionDragStart:L,onSelectionDrag:q,onSelectionDragStop:$,onSelectionContextMenu:G,onSelectionStart:U,onSelectionEnd:X,onBeforeDelete:R,connectionMode:B,connectionLineType:Y=po.Bezier,connectionLineStyle:F,connectionLineComponent:K,connectionLineContainerStyle:J,deleteKeyCode:te="Backspace",selectionKeyCode:re="Shift",selectionOnDrag:V=!1,selectionMode:ne=sa.Full,panActivationKeyCode:de="Space",multiSelectionKeyCode:ve=la()?"Meta":"Control",zoomActivationKeyCode:le=la()?"Meta":"Control",snapToGrid:ge,snapGrid:_e,onlyRenderVisibleElements:we=!1,selectNodesOnDrag:Ce,nodesDraggable:Se,autoPanOnNodeFocus:Qe,nodesConnectable:Oe,nodesFocusable:he,nodeOrigin:Ee=ST,edgesFocusable:Ae,edgesReconnectable:Ve,elementsSelectable:lt=!0,defaultViewport:ot=v3,minZoom:ae=.5,maxZoom:ce=2,translateExtent:ke=ia,preventScrolling:ze=!0,nodeExtent:Le,defaultMarkerColor:nt="#b1b1b7",zoomOnScroll:At=!0,zoomOnPinch:et=!0,panOnScroll:yt=!1,panOnScrollSpeed:fn=.5,panOnScrollMode:ct=Fo.Free,zoomOnDoubleClick:Rt=!0,panOnDrag:St=!0,onPaneClick:Cn,onPaneMouseEnter:Hn,onPaneMouseMove:hn,onPaneMouseLeave:Tn,onPaneScroll:Lr,onPaneContextMenu:qr,paneClickDistance:Fr=1,nodeClickDistance:xr=0,children:zr,onReconnect:br,onReconnectStart:mn,onReconnectEnd:Kt,onEdgeContextMenu:pe,onEdgeDoubleClick:Ue,onEdgeMouseEnter:He,onEdgeMouseMove:Ze,onEdgeMouseLeave:wt,reconnectRadius:gn=10,onNodesChange:An,onEdgesChange:yo,noDragClassName:vo="nodrag",noWheelClassName:Qo="nowheel",noPanClassName:kt="nopan",fitView:Vn,fitViewOptions:xo,connectOnClick:Xo,attributionPosition:Jo,proOptions:Zo,defaultEdgeOptions:ei,elevateNodesOnSelect:wr=!0,elevateEdgesOnSelect:ts=!1,disableKeyboardA11y:ti=!1,autoPanOnConnect:ut,autoPanOnNodeDrag:rt,autoPanSpeed:Nt,connectionRadius:Gt,isValidConnection:Yt,onError:bo,style:Aa,id:wo,nodeDragThreshold:Pn,connectionDragThreshold:su,viewport:yn,onViewportChange:au,width:lu,height:cu,colorMode:ni="light",debug:ri,onScroll:Br,ariaLabelConfig:oi,zIndexMode:Pa="basic",...uu},ns){const ii=wo||"1",rs=_3(ni),_o=j.useCallback(Ia=>{Ia.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Br?.(Ia)},[Br]);return s.jsx("div",{"data-testid":"rf__wrapper",...uu,onScroll:_o,style:{...Aa,...$q},ref:ns,className:Ct(["react-flow",o,rs]),id:wo,role:"application",children:s.jsxs(Bq,{nodes:e,edges:t,width:lu,height:cu,fitView:Vn,fitViewOptions:xo,minZoom:ae,maxZoom:ce,nodeOrigin:Ee,nodeExtent:Le,zIndexMode:Pa,children:[s.jsx(Fq,{onInit:p,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:S,onNodeMouseMove:N,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:C,nodeTypes:a,edgeTypes:l,connectionLineType:Y,connectionLineStyle:F,connectionLineComponent:K,connectionLineContainerStyle:J,selectionKeyCode:re,selectionOnDrag:V,selectionMode:ne,deleteKeyCode:te,multiSelectionKeyCode:ve,panActivationKeyCode:de,zoomActivationKeyCode:le,onlyRenderVisibleElements:we,defaultViewport:ot,translateExtent:ke,minZoom:ae,maxZoom:ce,preventScrolling:ze,zoomOnScroll:At,zoomOnPinch:et,zoomOnDoubleClick:Rt,panOnScroll:yt,panOnScrollSpeed:fn,panOnScrollMode:ct,panOnDrag:St,onPaneClick:Cn,onPaneMouseEnter:Hn,onPaneMouseMove:hn,onPaneMouseLeave:Tn,onPaneScroll:Lr,onPaneContextMenu:qr,paneClickDistance:Fr,nodeClickDistance:xr,onSelectionContextMenu:G,onSelectionStart:U,onSelectionEnd:X,onReconnect:br,onReconnectStart:mn,onReconnectEnd:Kt,onEdgeContextMenu:pe,onEdgeDoubleClick:Ue,onEdgeMouseEnter:He,onEdgeMouseMove:Ze,onEdgeMouseLeave:wt,reconnectRadius:gn,defaultMarkerColor:nt,noDragClassName:vo,noWheelClassName:Qo,noPanClassName:kt,rfId:ii,disableKeyboardA11y:ti,nodeExtent:Le,viewport:yn,onViewportChange:au}),s.jsx(w3,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:v,onConnectStart:b,onConnectEnd:x,onClickConnectStart:_,onClickConnectEnd:k,nodesDraggable:Se,autoPanOnNodeFocus:Qe,nodesConnectable:Oe,nodesFocusable:he,edgesFocusable:Ae,edgesReconnectable:Ve,elementsSelectable:lt,elevateNodesOnSelect:wr,elevateEdgesOnSelect:ts,minZoom:ae,maxZoom:ce,nodeExtent:Le,onNodesChange:An,onEdgesChange:yo,snapToGrid:ge,snapGrid:_e,connectionMode:B,translateExtent:ke,connectOnClick:Xo,defaultEdgeOptions:ei,fitView:Vn,fitViewOptions:xo,onNodesDelete:H,onEdgesDelete:D,onDelete:z,onNodeDragStart:P,onNodeDrag:O,onNodeDragStop:I,onSelectionDrag:q,onSelectionDragStart:L,onSelectionDragStop:$,onMove:f,onMoveStart:m,onMoveEnd:g,noPanClassName:kt,nodeOrigin:Ee,rfId:ii,autoPanOnConnect:ut,autoPanOnNodeDrag:rt,autoPanSpeed:Nt,onError:bo,connectionRadius:Gt,isValidConnection:Yt,selectNodesOnDrag:Ce,nodeDragThreshold:Pn,connectionDragThreshold:su,onBeforeDelete:R,debug:ri,ariaLabelConfig:oi,zIndexMode:Pa}),s.jsx(y3,{onSelectionChange:W}),zr,s.jsx(p3,{proOptions:Zo,position:Jo}),s.jsx(d3,{rfId:ii,disableKeyboardA11y:ti})]})})}var Vq=ET(Hq);const Uq=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function Wq({children:e}){const t=Ge(Uq);return t?o3.createPortal(e,t):null}const Kq=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function Gq(){return Ge(Kq,ft)}function Yq(e){const[t,n]=j.useState(e),r=j.useCallback(o=>n(a=>NT(o,a)),[]);return[t,n,r]}function Qq(e){const[t,n]=j.useState(e),r=j.useCallback(o=>n(a=>jT(o,a)),[]);return[t,n,r]}function Xq({dimensions:e,lineWidth:t,variant:n,className:r}){return s.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ct(["react-flow__background-pattern",n,r])})}function Jq({radius:e,className:t}){return s.jsx("circle",{cx:e,cy:e,r:e,className:Ct(["react-flow__background-pattern","dots",t])})}var fo;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(fo||(fo={}));const Zq={[fo.Dots]:1,[fo.Lines]:1,[fo.Cross]:6},e4=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function JT({id:e,variant:t=fo.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=0,color:l,bgColor:u,style:d,className:p,patternClassName:f}){const m=j.useRef(null),{transform:g,patternId:v}=Ge(e4,ft),b=r||Zq[t],x=t===fo.Dots,_=t===fo.Cross,k=Array.isArray(n)?n:[n,n],S=[k[0]*g[2]||1,k[1]*g[2]||1],N=b*g[2],T=Array.isArray(a)?a:[a,a],A=_?[N,N]:S,C=[T[0]*g[2]||1+A[0]/2,T[1]*g[2]||1+A[1]/2],P=`${v}${e||""}`;return s.jsxs("svg",{className:Ct(["react-flow__background",p]),style:{...d,...Lc,"--xy-background-color-props":u,"--xy-background-pattern-color-props":l},ref:m,"data-testid":"rf__background",children:[s.jsx("pattern",{id:P,x:g[0]%S[0],y:g[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:x?s.jsx(Jq,{radius:N/2,className:f}):s.jsx(Xq,{dimensions:A,lineWidth:o,variant:t,className:f})}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${P})`})]})}JT.displayName="Background";const t4=j.memo(JT);function n4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:s.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function r4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:s.jsx("path",{d:"M0 0h32v4.2H0z"})})}function o4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:s.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function i4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function s4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Hl({children:e,className:t,...n}){return s.jsx("button",{type:"button",className:Ct(["react-flow__controls-button",t]),...n,children:e})}const a4=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function ZT({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:l,onFitView:u,onInteractiveChange:d,className:p,children:f,position:m="bottom-left",orientation:g="vertical","aria-label":v}){const b=mt(),{isInteractive:x,minZoomReached:_,maxZoomReached:k,ariaLabelConfig:S}=Ge(a4,ft),{zoomIn:N,zoomOut:T,fitView:A}=Ki(),C=()=>{N(),a?.()},P=()=>{T(),l?.()},O=()=>{A(o),u?.()},I=()=>{b.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),d?.(!x)},H=g==="horizontal"?"horizontal":"vertical";return s.jsxs(Dc,{className:Ct(["react-flow__controls",H,p]),position:m,style:e,"data-testid":"rf__controls","aria-label":v??S["controls.ariaLabel"],children:[t&&s.jsxs(s.Fragment,{children:[s.jsx(Hl,{onClick:C,className:"react-flow__controls-zoomin",title:S["controls.zoomIn.ariaLabel"],"aria-label":S["controls.zoomIn.ariaLabel"],disabled:k,children:s.jsx(n4,{})}),s.jsx(Hl,{onClick:P,className:"react-flow__controls-zoomout",title:S["controls.zoomOut.ariaLabel"],"aria-label":S["controls.zoomOut.ariaLabel"],disabled:_,children:s.jsx(r4,{})})]}),n&&s.jsx(Hl,{className:"react-flow__controls-fitview",onClick:O,title:S["controls.fitView.ariaLabel"],"aria-label":S["controls.fitView.ariaLabel"],children:s.jsx(o4,{})}),r&&s.jsx(Hl,{className:"react-flow__controls-interactive",onClick:I,title:S["controls.interactive.ariaLabel"],"aria-label":S["controls.interactive.ariaLabel"],children:x?s.jsx(s4,{}):s.jsx(i4,{})}),f]})}ZT.displayName="Controls";const l4=j.memo(ZT);function c4({id:e,x:t,y:n,width:r,height:o,style:a,color:l,strokeColor:u,strokeWidth:d,className:p,borderRadius:f,shapeRendering:m,selected:g,onClick:v}){const{background:b,backgroundColor:x}=a||{},_=l||b||x;return s.jsx("rect",{className:Ct(["react-flow__minimap-node",{selected:g},p]),x:t,y:n,rx:f,ry:f,width:r,height:o,style:{fill:_,stroke:u,strokeWidth:d},shapeRendering:m,onClick:v?k=>v(k,e):void 0})}const u4=j.memo(c4),d4=e=>e.nodes.map(t=>t.id),ip=e=>e instanceof Function?e:()=>e;function p4({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=u4,onClick:l}){const u=Ge(d4,ft),d=ip(t),p=ip(e),f=ip(n),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return s.jsx(s.Fragment,{children:u.map(g=>s.jsx(h4,{id:g,nodeColorFunc:d,nodeStrokeColorFunc:p,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:l,shapeRendering:m},g))})}function f4({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:l,NodeComponent:u,onClick:d}){const{node:p,x:f,y:m,width:g,height:v}=Ge(b=>{const{internals:x}=b.nodeLookup.get(e),_=x.userNode,{x:k,y:S}=x.positionAbsolute,{width:N,height:T}=Rr(_);return{node:_,x:k,y:S,width:N,height:T}},ft);return!p||p.hidden||!JC(p)?null:s.jsx(u,{x:f,y:m,width:g,height:v,style:p.style,selected:!!p.selected,className:r(p),color:t(p),borderRadius:o,strokeColor:n(p),strokeWidth:a,shapeRendering:l,onClick:d,id:p.id})}const h4=j.memo(f4);var m4=j.memo(p4);const g4=200,y4=150,v4=e=>!e.hidden,x4=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?XC(ya(e.nodeLookup,{filter:v4}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},b4="react-flow__minimap-desc";function eA({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:l,nodeComponent:u,bgColor:d,maskColor:p,maskStrokeColor:f,maskStrokeWidth:m,position:g="bottom-right",onClick:v,onNodeClick:b,pannable:x=!1,zoomable:_=!1,ariaLabel:k,inversePan:S,zoomStep:N=1,offsetScale:T=5}){const A=mt(),C=j.useRef(null),{boundingRect:P,viewBB:O,rfId:I,panZoom:H,translateExtent:D,flowWidth:z,flowHeight:W,ariaLabelConfig:L}=Ge(x4,ft),q=e?.width??g4,$=e?.height??y4,G=P.width/q,U=P.height/$,X=Math.max(G,U),R=X*q,B=X*$,Y=T*X,F=P.x-(R-P.width)/2-Y,K=P.y-(B-P.height)/2-Y,J=R+Y*2,te=B+Y*2,re=`${b4}-${I}`,V=j.useRef(0),ne=j.useRef();V.current=X,j.useEffect(()=>{if(C.current&&H)return ne.current=RL({domNode:C.current,panZoom:H,getTransform:()=>A.getState().transform,getViewScale:()=>V.current}),()=>{ne.current?.destroy()}},[H]),j.useEffect(()=>{ne.current?.update({translateExtent:D,width:z,height:W,inversePan:S,pannable:x,zoomStep:N,zoomable:_})},[x,_,S,N,D,z,W]);const de=v?ge=>{const[_e,we]=ne.current?.pointer(ge)||[0,0];v(ge,{x:_e,y:we})}:void 0,ve=b?j.useCallback((ge,_e)=>{const we=A.getState().nodeLookup.get(_e).internals.userNode;b(ge,we)},[]):void 0,le=k??L["minimap.ariaLabel"];return s.jsx(Dc,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*X:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:Ct(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:s.jsxs("svg",{width:q,height:$,viewBox:`${F} ${K} ${J} ${te}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":re,ref:C,onClick:de,children:[le&&s.jsx("title",{id:re,children:le}),s.jsx(m4,{onClick:ve,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:l,nodeComponent:u}),s.jsx("path",{className:"react-flow__minimap-mask",d:`M${F-Y},${K-Y}h${J+Y*2}v${te+Y*2}h${-J-Y*2}z
        M${O.x},${O.y}h${O.width}v${O.height}h${-O.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}eA.displayName="MiniMap";const w4=j.memo(eA),_4=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,S4={[Ui.Line]:"right",[Ui.Handle]:"bottom-right"};function k4({nodeId:e,position:t,variant:n=Ui.Handle,className:r,style:o=void 0,children:a,color:l,minWidth:u=10,minHeight:d=10,maxWidth:p=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:g,autoScale:v=!0,shouldResize:b,onResizeStart:x,onResize:_,onResizeEnd:k}){const S=PT(),N=typeof e=="string"?e:S,T=mt(),A=j.useRef(null),C=n===Ui.Handle,P=Ge(j.useCallback(_4(C&&v),[C,v]),ft),O=j.useRef(null),I=t??S4[n];j.useEffect(()=>{if(!(!A.current||!N))return O.current||(O.current=KL({domNode:A.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:D,transform:z,snapGrid:W,snapToGrid:L,nodeOrigin:q,domNode:$}=T.getState();return{nodeLookup:D,transform:z,snapGrid:W,snapToGrid:L,nodeOrigin:q,paneDomNode:$}},onChange:(D,z)=>{const{triggerNodeChanges:W,nodeLookup:L,parentLookup:q,nodeOrigin:$}=T.getState(),G=[],U={x:D.x,y:D.y},X=L.get(N);if(X&&X.expandParent&&X.parentId){const R=X.origin??$,B=D.width??X.measured.width??0,Y=D.height??X.measured.height??0,F={id:X.id,parentId:X.parentId,rect:{width:B,height:Y,...ZC({x:D.x??X.position.x,y:D.y??X.position.y},{width:B,height:Y},X.parentId,L,R)}},K=$v([F],L,q,$);G.push(...K),U.x=D.x?Math.max(R[0]*B,D.x):void 0,U.y=D.y?Math.max(R[1]*Y,D.y):void 0}if(U.x!==void 0&&U.y!==void 0){const R={id:N,type:"position",position:{...U}};G.push(R)}if(D.width!==void 0&&D.height!==void 0){const B={id:N,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:D.width,height:D.height}};G.push(B)}for(const R of z){const B={...R,type:"position"};G.push(B)}W(G)},onEnd:({width:D,height:z})=>{const W={id:N,type:"dimensions",resizing:!1,dimensions:{width:D,height:z}};T.getState().triggerNodeChanges([W])}})),O.current.update({controlPosition:I,boundaries:{minWidth:u,minHeight:d,maxWidth:p,maxHeight:f},keepAspectRatio:m,resizeDirection:g,onResizeStart:x,onResize:_,onResizeEnd:k,shouldResize:b}),()=>{O.current?.destroy()}},[I,u,d,p,f,m,x,_,k,b]);const H=I.split("-");return s.jsx("div",{className:Ct(["react-flow__resize-control","nodrag",...H,n,r]),ref:A,style:{...o,scale:P,...l&&{[C?"backgroundColor":"borderColor"]:l}},children:a})}j.memo(k4);const tA={},{useDebugValue:N4}=Lt,{useSyncExternalStoreWithSelector:j4}=yT;let u_=!1;const E4=e=>e;function C4(e,t=E4,n){(tA?"production":void 0)!=="production"&&n&&!u_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u_=!0);const r=j4(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return N4(r),r}const d_=e=>{(tA?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?vT(e):e,n=(r,o)=>C4(t,r,o);return Object.assign(n,t),n},ba=e=>e?d_(e):d_,T4="/api";async function qn(e,t){const n=await fetch(`${T4}${e}`,{headers:{"Content-Type":"application/json"},...t});if(!n.ok){const r=await n.json().catch(()=>({error:n.statusText}));throw new Error(r.error||"Request failed")}if(n.status!==204)return n.json()}const Jt={projects:{list:()=>qn("/projects"),get:e=>qn(`/projects/${e}`),create:(e,t="")=>qn("/projects",{method:"POST",body:JSON.stringify({name:e,description:t})}),update:(e,t)=>qn(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>qn(`/projects/${e}`,{method:"DELETE"}),compile:e=>qn(`/projects/${e}/compile`),build:e=>qn(`/projects/${e}/build`,{method:"POST"}),deploy:(e,t={})=>qn(`/projects/${e}/deploy`,{method:"POST",body:JSON.stringify(t)})},settings:{getDetectedKeys:()=>qn("/settings/detected-keys")},keys:{getProjectKeys:e=>qn(`/projects/${e}/keys`),saveProjectKeys:(e,t)=>qn(`/projects/${e}/keys`,{method:"POST",body:JSON.stringify({keys:t})}),deleteProjectKey:(e,t)=>qn(`/projects/${e}/keys/${encodeURIComponent(t)}`,{method:"DELETE"})}},p_=Object.freeze(Object.defineProperty({__proto__:null,api:Jt},Symbol.toStringTag,{value:"Module"})),sv={defaultProvider:"gemini",defaultModel:"gemini-2.5-flash",adkVersion:"0.3.0",rustEdition:"2024",theme:"dark",showMinimap:!0,showTimeline:!0,showDataFlowOverlay:!1,autobuildEnabled:!0,autobuildTriggers:{onAgentAdd:!0,onAgentDelete:!0,onAgentUpdate:!0,onToolAdd:!0,onToolUpdate:!0,onEdgeAdd:!0,onEdgeDelete:!0},layoutMode:"free",layoutDirection:"LR"},nA="adk-studio-global-settings";function Vo(){try{const e=localStorage.getItem(nA);if(e)return{...sv,...JSON.parse(e)}}catch{}return sv}function A4(e){try{localStorage.setItem(nA,JSON.stringify(e))}catch{}}function P4(e){switch(e){case"gemini":return["GOOGLE_API_KEY","GEMINI_API_KEY"];case"openai":return["OPENAI_API_KEY"];case"anthropic":return["ANTHROPIC_API_KEY"];case"deepseek":return["DEEPSEEK_API_KEY"];case"groq":return["GROQ_API_KEY"];case"ollama":return[];default:return[]}}const I4=(e,t)=>({projects:[],loadingProjects:!1,currentProject:null,showApiKeySetup:!1,fetchProjects:async()=>{e({loadingProjects:!0});try{const n=await Jt.projects.list();e({projects:n})}finally{e({loadingProjects:!1})}},createProject:async(n,r)=>{const o=await Jt.projects.create(n,r);e(a=>({projects:[{id:o.id,name:n,description:r||"",updated_at:o.updated_at},...a.projects]}));try{const a=await Jt.settings.getDetectedKeys(),l=o.settings?.defaultProvider||Vo().defaultProvider,u=P4(l),d=u.length>0&&a.keys.some(p=>u.includes(p.name)&&p.status==="detected");u.length>0&&!d&&e({showApiKeySetup:!0})}catch{}return o},openProject:async n=>{const r=await Jt.projects.get(n),o=Vo(),a=r.settings?.layoutMode||o.layoutMode,l=r.settings?.layoutDirection||o.layoutDirection,u=r.settings?.showDataFlowOverlay??o.showDataFlowOverlay,d=r.settings?.debugMode??!1;e({currentProject:r,selectedNodeId:null,layoutMode:a,layoutDirection:l,showDataFlowOverlay:u,debugMode:d})},saveProject:async()=>{const{currentProject:n,layoutMode:r,layoutDirection:o,showDataFlowOverlay:a,debugMode:l}=t();if(!n)return;const u={...n,settings:{...n.settings,layoutMode:r,layoutDirection:o,showDataFlowOverlay:a,debugMode:l}};await Jt.projects.update(n.id,u)},closeProject:()=>e({currentProject:null,selectedNodeId:null,selectedActionNodeId:null}),deleteProject:async n=>{await Jt.projects.delete(n),e(r=>({projects:r.projects.filter(o=>o.id!==n)}))},updateProjectMeta:(n,r)=>{e(o=>o.currentProject?{currentProject:{...o.currentProject,name:n,description:r},projects:o.projects.map(a=>a.id===o.currentProject?.id?{...a,name:n,description:r}:a)}:o),setTimeout(()=>t().saveProject(),0)},updateProjectSettings:n=>{e(r=>{if(!r.currentProject)return r;const o={...r.currentProject.settings,...n};let a=r.currentProject.agents;const l=n.defaultProvider&&n.defaultProvider!==r.currentProject.settings.defaultProvider,u=n.default_model&&n.default_model!==r.currentProject.settings.default_model;if(l||u){const p=n.default_model??o.default_model,m=(n.defaultProvider??o.defaultProvider??"gemini")!=="gemini",g={};for(const[v,b]of Object.entries(a)){let x=b.tools;m&&x?.includes("google_search")&&(x=x.filter(k=>k!=="google_search"));const _=b.model?p:void 0;g[v]={...b,tools:x,..._!==void 0?{model:_}:{}}}a=g}const d={currentProject:{...r.currentProject,settings:o,agents:a}};return n.layoutMode!==void 0&&(d.layoutMode=n.layoutMode),n.layoutDirection!==void 0&&(d.layoutDirection=n.layoutDirection),n.showDataFlowOverlay!==void 0&&(d.showDataFlowOverlay=n.showDataFlowOverlay),d}),setTimeout(()=>t().saveProject(),0)},clearApiKeySetup:()=>e({showApiKeySetup:!1})});function rA(e){const{removedIds:t,currentEdges:n,remainingNodeIds:r}=e,o=new Set(t),a=[];for(const d of t){const p=n.filter(m=>m.to===d),f=n.filter(m=>m.from===d);for(const m of p)for(const g of f)m.from===g.to||a.some(x=>x.from===m.from&&x.to===g.to)||n.some(x=>x.from===m.from&&x.to===g.to&&!o.has(x.from)&&!o.has(x.to))||a.push({from:m.from,to:g.to})}let u=[...n.filter(d=>!o.has(d.from)&&!o.has(d.to)),...a];for(const d of r)if(!u.some(f=>f.to===d)){const f=u.find(m=>m.from==="START");(!f||!r.includes(f.to))&&(u=u.filter(m=>!(m.from==="START"&&!r.includes(m.to))),u.push({from:"START",to:d}))}for(const d of r)u.some(f=>f.from===d)||u.push({from:d,to:"END"});return r.length>0&&(u.some(p=>p.from==="START")||u.push({from:"START",to:r[0]})),r.length>0&&(u.some(p=>p.to==="END")||u.push({from:r[r.length-1],to:"END"})),u}const R4=(e,t)=>({selectedNodeId:null,selectedToolId:null,selectNode:n=>e({selectedNodeId:n}),updateAgent:(n,r)=>e(o=>o.currentProject?{currentProject:{...o.currentProject,agents:{...o.currentProject.agents,[n]:{...o.currentProject.agents[n],...r}}}}:o),renameAgent:(n,r)=>{n!==r&&(e(o=>{if(!o.currentProject||!o.currentProject.agents[n])return o;const a={...o.currentProject.agents};a[r]=a[n],delete a[n],Object.keys(a).forEach(d=>{a[d].sub_agents?.includes(n)&&(a[d]={...a[d],sub_agents:a[d].sub_agents.map(p=>p===n?r:p)})});const l=o.currentProject.workflow.edges.map(d=>({...d,from:d.from===n?r:d.from,to:d.to===n?r:d.to})),u={...o.currentProject.tool_configs};return Object.keys(u).forEach(d=>{if(d.startsWith(`${n}_`)){const p=d.replace(`${n}_`,`${r}_`);u[p]=u[d],delete u[d]}}),{currentProject:{...o.currentProject,agents:a,tool_configs:u,workflow:{...o.currentProject.workflow,edges:l}},selectedNodeId:o.selectedNodeId===n?r:o.selectedNodeId}}),t().saveProject())},addAgent:(n,r)=>{e(o=>o.currentProject?{currentProject:{...o.currentProject,agents:{...o.currentProject.agents,[n]:r}}}:o),setTimeout(()=>t().saveProject(),0)},removeAgent:n=>{e(r=>{if(!r.currentProject)return r;const o=r.currentProject.agents[n],a=[n];o?.sub_agents&&a.push(...o.sub_agents);const l={...r.currentProject.agents};a.forEach(v=>delete l[v]);const u={...r.currentProject.tool_configs};Object.keys(u).forEach(v=>{a.some(b=>v.startsWith(`${b}_`))&&delete u[v]});const d=r.currentProject.actionNodes||{},p=Object.keys(l),f=Object.keys(d),m=[...p,...f],g=rA({removedIds:a,currentEdges:r.currentProject.workflow.edges,remainingNodeIds:m});return{currentProject:{...r.currentProject,agents:l,tool_configs:u,workflow:{...r.currentProject.workflow,edges:g}}}}),setTimeout(()=>t().saveProject(),0)},addEdge:(n,r,o,a)=>{e(l=>{if(!l.currentProject)return l;const u={from:n,to:r};return o&&(u.fromPort=o),a&&(u.toPort=a),{currentProject:{...l.currentProject,workflow:{...l.currentProject.workflow,edges:[...l.currentProject.workflow.edges,u]}}}}),setTimeout(()=>t().saveProject(),0)},removeEdge:(n,r)=>{e(o=>o.currentProject?{currentProject:{...o.currentProject,workflow:{...o.currentProject.workflow,edges:o.currentProject.workflow.edges.filter(a=>!(a.from===n&&a.to===r))}}}:o),setTimeout(()=>t().saveProject(),0)},setEdges:n=>{e(r=>r.currentProject?{currentProject:{...r.currentProject,workflow:{...r.currentProject.workflow,edges:n}}}:r),setTimeout(()=>t().saveProject(),0)},addToolToAgent:(n,r)=>{e(o=>{if(!o.currentProject)return o;const a=o.currentProject.agents[n];if(!a)return o;let l=r;if(r==="function"||r==="mcp"){const u=a.tools.filter(d=>d.startsWith(r));l=`${r}_${u.length+1}`}else if(a.tools.includes(r))return o;return{currentProject:{...o.currentProject,agents:{...o.currentProject.agents,[n]:{...a,tools:[...a.tools,l]}}}}}),setTimeout(()=>t().saveProject(),0)},removeToolFromAgent:(n,r)=>{e(o=>{if(!o.currentProject)return o;const a=o.currentProject.agents[n];if(!a)return o;const l=`${n}_${r}`,{[l]:u,...d}=o.currentProject.tool_configs;return{currentProject:{...o.currentProject,agents:{...o.currentProject.agents,[n]:{...a,tools:a.tools.filter(p=>p!==r)}},tool_configs:d},selectedToolId:o.selectedToolId===l?null:o.selectedToolId}}),setTimeout(()=>t().saveProject(),0)},addSubAgentToContainer:n=>{const{currentProject:r,saveProject:o}=t();if(!r)return;const a=r.agents[n];if(!a)return;const l=a.sub_agents.length+1,u=`${n}_agent_${l}`;e(d=>{if(!d.currentProject)return d;const p={type:"llm",model:"gemini-2.0-flash",instruction:`You are agent ${l}.`,tools:[],sub_agents:[],position:{x:0,y:0}};return{currentProject:{...d.currentProject,agents:{...d.currentProject.agents,[u]:p,[n]:{...d.currentProject.agents[n],sub_agents:[...d.currentProject.agents[n].sub_agents,u]}}}}}),setTimeout(()=>o(),0)},selectTool:n=>e({selectedToolId:n}),updateToolConfig:(n,r)=>{e(o=>o.currentProject?{currentProject:{...o.currentProject,tool_configs:{...o.currentProject.tool_configs,[n]:r}}}:o),setTimeout(()=>t().saveProject(),0)}}),O4=(e,t)=>({selectedActionNodeId:null,selectActionNode:n=>e(r=>({selectedActionNodeId:n,selectedNodeId:n?null:r.selectedNodeId,selectedToolId:n?null:r.selectedToolId})),addActionNode:(n,r)=>{e(o=>{if(!o.currentProject)return o;const a=o.currentProject.actionNodes||{};return{currentProject:{...o.currentProject,actionNodes:{...a,[n]:r}}}}),setTimeout(()=>t().saveProject(),0)},updateActionNode:(n,r)=>{e(o=>{if(!o.currentProject)return o;const a=o.currentProject.actionNodes||{};return a[n]?{currentProject:{...o.currentProject,actionNodes:{...a,[n]:{...a[n],...r}}}}:o}),setTimeout(()=>t().saveProject(),0)},removeActionNode:n=>{e(r=>{if(!r.currentProject)return r;const o={...r.currentProject.actionNodes||{}};delete o[n];const a=r.currentProject.agents,l=Object.keys(a),u=Object.keys(o),d=[...l,...u],p=rA({removedIds:[n],currentEdges:r.currentProject.workflow.edges,remainingNodeIds:d});return{currentProject:{...r.currentProject,actionNodes:o,workflow:{...r.currentProject.workflow,edges:p}},selectedActionNodeId:r.selectedActionNodeId===n?null:r.selectedActionNodeId}}),setTimeout(()=>t().saveProject(),0)},renameActionNode:(n,r)=>{n!==r&&(e(o=>{if(!o.currentProject)return o;const a=o.currentProject.actionNodes||{};if(!a[n])return o;const l={...a};l[r]={...l[n],id:r},delete l[n];const u=o.currentProject.workflow.edges.map(d=>({...d,from:d.from===n?r:d.from,to:d.to===n?r:d.to}));return{currentProject:{...o.currentProject,actionNodes:l,workflow:{...o.currentProject.workflow,edges:u}},selectedActionNodeId:o.selectedActionNodeId===n?r:o.selectedActionNodeId}}),setTimeout(()=>t().saveProject(),0))}}),M4=e=>({layoutMode:"free",layoutDirection:"LR",snapToGrid:!0,gridSize:20,setLayoutMode:t=>e({layoutMode:t}),setLayoutDirection:t=>e({layoutDirection:t}),setSnapToGrid:t=>e({snapToGrid:t}),setGridSize:t=>e({gridSize:t})}),D4=(e,t)=>({showDataFlowOverlay:!1,debugMode:!1,setShowDataFlowOverlay:n=>{e({showDataFlowOverlay:n}),setTimeout(()=>t().saveProject(),0)},setDebugMode:n=>{e({debugMode:n}),setTimeout(()=>t().saveProject(),0)}}),De=ba()((...e)=>({...I4(...e),...R4(...e),...O4(...e),...M4(...e),...D4(...e)})),L4="modulepreload",q4=function(e){return"/"+e},f_={},h_=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let p=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var l=p;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=p(n.map(f=>{if(f=q4(f),f in f_)return;f_[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":L4,m||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),m)return new Promise((b,x)=>{v.addEventListener("load",b),v.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})},Zn=[{id:"gemini",name:"Google Gemini",icon:"",envVar:"GOOGLE_API_KEY",envVarAlt:"GEMINI_API_KEY",docsUrl:"https://ai.google.dev/gemini-api/docs/models",models:[{id:"gemini-3.1-pro-preview",name:"Gemini 3.1 Pro Preview",description:"Latest Gemini with improved reasoning, coding, and agentic capabilities",contextWindow:1e6,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gemini-3-pro-preview",name:"Gemini 3 Pro Preview",description:"Most intelligent Gemini model for complex reasoning and agentic workflows",contextWindow:1e6,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",description:"Frontier intelligence at Flash speed, great for coding and agents",contextWindow:1e6,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"standard"},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Advanced reasoning and coding with thinking capabilities",contextWindow:1e6,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Hybrid reasoning model with thinking budgets",contextWindow:1e6,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"standard"},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",description:"Most cost-effective Gemini model for high-volume tasks",contextWindow:1e6,capabilities:["text","vision","code","tools"],tier:"free"},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Fast multimodal model with native tool use",contextWindow:1e6,capabilities:["text","vision","audio","code","tools"],tier:"free"}]},{id:"openai",name:"OpenAI",icon:"",envVar:"OPENAI_API_KEY",docsUrl:"https://platform.openai.com/docs/models",models:[{id:"gpt-5.2",name:"GPT-5.2",description:"Newest flagship model with advanced reasoning and coding",contextWindow:4e5,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gpt-5.2-pro",name:"GPT-5.2 Pro",description:"Pro variant of GPT-5.2 for maximum quality",contextWindow:4e5,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gpt-5.1",name:"GPT-5.1",description:"High-capability model with 400K context",contextWindow:4e5,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gpt-5",name:"GPT-5",description:"Strongest coding and agentic model with adaptive reasoning",contextWindow:4e5,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gpt-5-pro",name:"GPT-5 Pro",description:"Pro variant of GPT-5 for complex tasks",contextWindow:4e5,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gpt-5-mini",name:"GPT-5 Mini",description:"Efficient GPT-5 variant for most tasks",contextWindow:4e5,capabilities:["text","vision","code","reasoning","tools"],tier:"standard"},{id:"gpt-5-nano",name:"GPT-5 Nano",description:"Lowest cost, highest throughput GPT-5 variant",contextWindow:4e5,capabilities:["text","vision","code","tools"],tier:"free"},{id:"o4-mini",name:"o4-mini",description:"Efficient reasoning model with 200K context",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"standard"},{id:"o3",name:"o3",description:"Advanced reasoning model for complex problem solving",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"premium"},{id:"o3-pro",name:"o3 Pro",description:"Premium reasoning model for maximum accuracy",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"premium"},{id:"o3-mini",name:"o3-mini",description:"Smaller reasoning model, fast and cost-effective",contextWindow:2e5,capabilities:["text","code","reasoning","tools"],tier:"standard"},{id:"o1",name:"o1",description:"Original reasoning model with deep thinking",contextWindow:128e3,capabilities:["text","vision","code","reasoning","tools"],tier:"premium"},{id:"gpt-4.1",name:"GPT-4.1",description:"General purpose model with 1M context window",contextWindow:1e6,capabilities:["text","vision","code","tools"],tier:"standard"},{id:"gpt-4.1-mini",name:"GPT-4.1 Mini",description:"Efficient variant with 1M context",contextWindow:1e6,capabilities:["text","vision","code","tools"],tier:"standard"},{id:"gpt-4.1-nano",name:"GPT-4.1 Nano",description:"Cheapest GPT-4.1 variant with 1M context",contextWindow:1e6,capabilities:["text","code","tools"],tier:"free"},{id:"codex-mini-latest",name:"Codex Mini",description:"Code-specific model optimized for programming tasks",contextWindow:2e5,capabilities:["text","code","reasoning","tools"],tier:"standard"},{id:"gpt-4o",name:"GPT-4o",description:"Multimodal model (legacy)",contextWindow:128e3,capabilities:["text","vision","audio","code","tools"],tier:"standard"},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast and affordable (legacy)",contextWindow:128e3,capabilities:["text","vision","code","tools"],tier:"free"}]},{id:"anthropic",name:"Anthropic Claude",icon:"",envVar:"ANTHROPIC_API_KEY",docsUrl:"https://docs.anthropic.com/en/docs/about-claude/models",models:[{id:"claude-opus-4-6",name:"Claude Opus 4.6",description:"Most capable Anthropic model with 1M context (beta)",contextWindow:1e6,capabilities:["text","vision","code","reasoning","tools"],tier:"premium"},{id:"claude-sonnet-4-6",name:"Claude Sonnet 4.6",description:"Best balance of speed and intelligence, strong coding and agentic performance",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"standard"},{id:"claude-opus-4-5-20251101",name:"Claude Opus 4.5",description:"Most capable model for complex autonomous tasks and coding",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"premium"},{id:"claude-sonnet-4-5-20250929",name:"Claude Sonnet 4.5",description:"Best balance of intelligence, speed, and cost for production",contextWindow:1e6,capabilities:["text","vision","code","reasoning","tools"],tier:"standard"},{id:"claude-haiku-4-5-20251001",name:"Claude Haiku 4.5",description:"Near-frontier performance at ultra-efficient pricing",contextWindow:2e5,capabilities:["text","vision","code","tools"],tier:"free"},{id:"claude-opus-4-20250514",name:"Claude Opus 4",description:"Hybrid model with extended thinking",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"premium"},{id:"claude-sonnet-4-20250514",name:"Claude Sonnet 4",description:"Balanced model with extended thinking",contextWindow:1e6,capabilities:["text","vision","code","reasoning","tools"],tier:"standard"}]},{id:"deepseek",name:"DeepSeek",icon:"",envVar:"DEEPSEEK_API_KEY",docsUrl:"https://api-docs.deepseek.com",models:[{id:"deepseek-reasoner",name:"DeepSeek Reasoner (V3.2 Thinking)",description:"Thinking mode with chain-of-thought reasoning for complex tasks",contextWindow:128e3,capabilities:["text","code","reasoning","tools"],tier:"premium"},{id:"deepseek-chat",name:"DeepSeek Chat (V3.2)",description:"Non-thinking mode for fast general-purpose tasks",contextWindow:128e3,capabilities:["text","code","tools"],tier:"free"}]},{id:"groq",name:"Groq",icon:"",envVar:"GROQ_API_KEY",docsUrl:"https://console.groq.com/docs/models",models:[{id:"meta-llama/llama-4-maverick-17b-128e-instruct",name:"Llama 4 Maverick (17Bx128E)",description:"Largest Llama 4 model for multilingual and multimodal tasks",contextWindow:131072,capabilities:["text","vision","code","tools"],tier:"standard"},{id:"meta-llama/llama-4-scout-17b-16e-instruct",name:"Llama 4 Scout (17Bx16E)",description:"Fast general-purpose Llama 4 via Groq LPU",contextWindow:131072,capabilities:["text","vision","code","tools"],tier:"standard"},{id:"llama-3.3-70b-versatile",name:"Llama 3.3 70B Versatile",description:"Versatile large model for diverse tasks",contextWindow:131072,capabilities:["text","code","tools"],tier:"standard"},{id:"llama-3.1-8b-instant",name:"Llama 3.1 8B Instant",description:"Ultra-fast instruction model at 560 T/s",contextWindow:131072,capabilities:["text","code","tools"],tier:"free"},{id:"mixtral-8x7b-32768",name:"Mixtral 8x7B",description:"MoE model with 32K context",contextWindow:32768,capabilities:["text","code","tools"],tier:"free"}]},{id:"ollama",name:"Ollama (Local)",icon:"",envVar:"OLLAMA_HOST",docsUrl:"https://ollama.ai/library",models:[{id:"llama3.3:70b",name:"Llama 3.3 70B",description:"Latest Llama for local deployment",contextWindow:128e3,capabilities:["text","code","tools"],tier:"premium"},{id:"llama3.2:3b",name:"Llama 3.2 3B",description:"Efficient small model",contextWindow:128e3,capabilities:["text","code"],tier:"free"},{id:"llama3.1:8b",name:"Llama 3.1 8B",description:"Popular balanced model",contextWindow:128e3,capabilities:["text","code","tools"],tier:"free"},{id:"deepseek-r1:14b",name:"DeepSeek R1 14B",description:"Distilled reasoning model",contextWindow:64e3,capabilities:["text","code","reasoning"],tier:"standard"},{id:"deepseek-r1:32b",name:"DeepSeek R1 32B",description:"Larger distilled reasoning model",contextWindow:64e3,capabilities:["text","code","reasoning"],tier:"standard"},{id:"qwen3:14b",name:"Qwen 3 14B",description:"Strong multilingual and coding",contextWindow:32e3,capabilities:["text","code","tools"],tier:"standard"},{id:"qwen2.5:7b",name:"Qwen 2.5 7B",description:"Efficient multilingual model",contextWindow:32e3,capabilities:["text","code","tools"],tier:"free"},{id:"mistral:7b",name:"Mistral 7B",description:"Fast and capable",contextWindow:32e3,capabilities:["text","code","tools"],tier:"free"},{id:"mistral-nemo:12b",name:"Mistral Nemo 12B",description:"Enhanced Mistral variant",contextWindow:128e3,capabilities:["text","code","tools"],tier:"standard"},{id:"gemma3:9b",name:"Gemma 3 9B",description:"Google's efficient open model",contextWindow:8192,capabilities:["text","vision","code"],tier:"free"},{id:"devstral:24b",name:"Devstral 24B",description:"Optimized for coding tasks",contextWindow:64e3,capabilities:["text","code","tools"],tier:"standard"},{id:"codellama:13b",name:"Code Llama 13B",description:"Code-focused Llama variant",contextWindow:16e3,capabilities:["text","code"],tier:"free"}]}];function F4(e){if(!e)return"gemini";const t=e.toLowerCase();return t.includes("gemini")||t.includes("gemma")?"gemini":t.includes("gpt")||t.includes("o1")||t.includes("o3")||t.includes("o4")||t.includes("codex")?"openai":t.includes("claude")?"anthropic":t.includes("deepseek")?"deepseek":t.includes("llama")||t.includes("mixtral")?t.includes(":")?"ollama":"groq":t.includes("qwen")||t.includes("mistral")||t.includes("codellama")||t.includes("devstral")?"ollama":"gemini"}function oA(e){switch(e){case"text":return"";case"vision":return"";case"audio":return"";case"code":return"";case"reasoning":return"";case"tools":return"";default:return""}}function iA(e){switch(e){case"free":return"var(--accent-success)";case"standard":return"var(--accent-primary)";case"premium":return"var(--accent-warning)";default:return"var(--text-muted)"}}function sA(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(0)}K`:e.toString()}function z4({provider:e,onSave:t,onRemove:n}){const[r,o]=j.useState(!1),[a,l]=j.useState(""),[u,d]=j.useState(!1),[p,f]=j.useState(!1),[m,g]=j.useState(!1),v=e.source==="environment",b=e.source==="project",x=e.source==="not_set",_=async()=>{if(a.trim()){f(!0);try{await t(e.name,a.trim()),l(""),o(!1),d(!1)}finally{f(!1)}}},k=async()=>{g(!0);try{await n(e.name)}finally{g(!1)}},S=()=>{l(""),o(!1),d(!1)},N=T=>{T.key==="Enter"?_():T.key==="Escape"&&S()};return s.jsxs("div",{className:"p-3 rounded",style:{backgroundColor:"var(--bg-secondary)"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-base",role:"img","aria-label":e.providerName,children:e.providerIcon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:e.providerName}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.jsx("code",{className:"text-xs font-mono",style:{color:"var(--text-muted)"},children:e.name}),s.jsx(B4,{source:e.source,masked:e.masked})]})]})]}),b&&!r&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>o(!0),className:"px-2 py-1 rounded text-xs transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-secondary)",border:"1px solid var(--border-default)"},children:"Edit"}),s.jsx("button",{onClick:k,disabled:m,className:"px-2 py-1 rounded text-xs transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-primary)",color:"var(--accent-error, #ef4444)",border:"1px solid var(--border-default)",opacity:m?.5:1},children:m?"...":"Remove"})]})]}),x&&!r&&s.jsx("button",{onClick:()=>o(!0),className:"mt-2 w-full px-3 py-2 rounded text-xs text-left transition-colors hover:opacity-80",style:{backgroundColor:"var(--bg-primary)",border:"1px dashed var(--border-default)",color:"var(--text-muted)"},children:"Enter key..."}),r&&s.jsxs("div",{className:"mt-2 flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:u?"text":"password",value:a,onChange:T=>l(T.target.value),onKeyDown:N,placeholder:`Enter ${e.name}`,autoFocus:!0,className:"w-full px-3 py-2 pr-8 rounded text-sm",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--accent-primary)",color:"var(--text-primary)"}}),s.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-2 top-1/2 -translate-y-1/2 text-sm",style:{color:"var(--text-muted)"},"aria-label":u?"Hide key":"Reveal key",children:u?"":""})]}),s.jsx("button",{onClick:_,disabled:!a.trim()||p,className:"px-3 py-2 rounded text-xs font-medium transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white",opacity:!a.trim()||p?.5:1},children:p?"...":"Save"}),s.jsx("button",{onClick:S,className:"px-3 py-2 rounded text-xs font-medium transition-colors",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-secondary)",border:"1px solid var(--border-default)"},children:"Cancel"})]}),v&&s.jsxs("div",{className:"mt-1 text-xs",style:{color:"var(--text-muted)"},children:["Detected from your environment. To change, update your ",s.jsx("code",{children:".env"})," file."]}),b&&e.environmentDetected&&s.jsx("div",{className:"mt-1 text-xs flex items-center gap-1",style:{color:"var(--accent-warning, #f59e0b)"},children:" Overrides environment key"})]})}function B4({source:e,masked:t}){switch(e){case"environment":return s.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(16, 185, 129, 0.15)",color:"var(--accent-success, #10b981)"},children:[" from environment",t&&s.jsx("span",{className:"font-mono ml-1",children:t})]});case"project":return s.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(59, 130, 246, 0.15)",color:"var(--accent-primary)"},children:[" project key",t&&s.jsx("span",{className:"font-mono ml-1",children:t})]});case"not_set":return s.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(107, 114, 128, 0.15)",color:"var(--text-muted)"},children:" not set"})}}const $4={GOOGLE_API_KEY:{provider:"gemini",providerName:"Google Gemini",providerIcon:""},GEMINI_API_KEY:{provider:"gemini",providerName:"Google Gemini",providerIcon:""},OPENAI_API_KEY:{provider:"openai",providerName:"OpenAI",providerIcon:""},ANTHROPIC_API_KEY:{provider:"anthropic",providerName:"Anthropic Claude",providerIcon:""},DEEPSEEK_API_KEY:{provider:"deepseek",providerName:"DeepSeek",providerIcon:""},GROQ_API_KEY:{provider:"groq",providerName:"Groq",providerIcon:""},OLLAMA_HOST:{provider:"ollama",providerName:"Ollama (Local)",providerIcon:""},GITHUB_TOKEN:{provider:"github",providerName:"GitHub",providerIcon:""},SLACK_BOT_TOKEN:{provider:"slack",providerName:"Slack",providerIcon:""}};function H4(e){const[t,n]=j.useState([]),[r,o]=j.useState(!1),a=j.useCallback(async()=>{if(!e){n([]);return}o(!0);try{const[d,p]=await Promise.all([Jt.keys.getProjectKeys(e),Jt.settings.getDetectedKeys()]),f=new Set(p.keys.filter(g=>g.status==="detected").map(g=>g.name)),m=d.keys.map(g=>{const v=$4[g.name];return{name:g.name,provider:v?.provider??g.name.toLowerCase(),providerName:v?.providerName??g.name,providerIcon:v?.providerIcon??"",source:g.source,masked:g.masked,environmentDetected:f.has(g.name)}});n(m)}catch{}finally{o(!1)}},[e]);j.useEffect(()=>{a()},[a]);const l=j.useCallback(async(d,p)=>{e&&(await Jt.keys.saveProjectKeys(e,{[d]:p}),await a())},[e,a]),u=j.useCallback(async d=>{e&&(await Jt.keys.deleteProjectKey(e,d),await a())},[e,a]);return{keys:t,isLoading:r,saveKey:l,removeKey:u,refresh:a}}const V4={};function U4(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var a;const l=d=>d===null?null:JSON.parse(d,void 0),u=(a=n.getItem(o))!=null?a:null;return u instanceof Promise?u.then(l):l(u)},setItem:(o,a)=>n.setItem(o,JSON.stringify(a,void 0)),removeItem:o=>n.removeItem(o)}}const ua=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return ua(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ua(r)(n)}}}},W4=(e,t)=>(n,r,o)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,k)=>({...k,..._}),...t},l=!1;const u=new Set,d=new Set;let p;try{p=a.getStorage()}catch{}if(!p)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(..._)},r,o);const f=ua(a.serialize),m=()=>{const _=a.partialize({...r()});let k;const S=f({state:_,version:a.version}).then(N=>p.setItem(a.name,N)).catch(N=>{k=N});if(k)throw k;return S},g=o.setState;o.setState=(_,k)=>{g(_,k),m()};const v=e((..._)=>{n(..._),m()},r,o);let b;const x=()=>{var _;if(!p)return;l=!1,u.forEach(S=>S(r()));const k=((_=a.onRehydrateStorage)==null?void 0:_.call(a,r()))||void 0;return ua(p.getItem.bind(p))(a.name).then(S=>{if(S)return a.deserialize(S)}).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==a.version){if(a.migrate)return a.migrate(S.state,S.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return S.state}).then(S=>{var N;return b=a.merge(S,(N=r())!=null?N:v),n(b,!0),m()}).then(()=>{k?.(b,void 0),l=!0,d.forEach(S=>S(b))}).catch(S=>{k?.(void 0,S)})};return o.persist={setOptions:_=>{a={...a,..._},_.getStorage&&(p=_.getStorage())},clearStorage:()=>{p?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>l,onHydrate:_=>(u.add(_),()=>{u.delete(_)}),onFinishHydration:_=>(d.add(_),()=>{d.delete(_)})},x(),b||v},K4=(e,t)=>(n,r,o)=>{let a={storage:U4(()=>localStorage),partialize:x=>x,version:0,merge:(x,_)=>({..._,...x}),...t},l=!1;const u=new Set,d=new Set;let p=a.storage;if(!p)return e((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...x)},r,o);const f=()=>{const x=a.partialize({...r()});return p.setItem(a.name,{state:x,version:a.version})},m=o.setState;o.setState=(x,_)=>{m(x,_),f()};const g=e((...x)=>{n(...x),f()},r,o);o.getInitialState=()=>g;let v;const b=()=>{var x,_;if(!p)return;l=!1,u.forEach(S=>{var N;return S((N=r())!=null?N:g)});const k=((_=a.onRehydrateStorage)==null?void 0:_.call(a,(x=r())!=null?x:g))||void 0;return ua(p.getItem.bind(p))(a.name).then(S=>{if(S)if(typeof S.version=="number"&&S.version!==a.version){if(a.migrate)return[!0,a.migrate(S.state,S.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,S.state];return[!1,void 0]}).then(S=>{var N;const[T,A]=S;if(v=a.merge(A,(N=r())!=null?N:g),n(v,!0),T)return f()}).then(()=>{k?.(v,void 0),v=r(),l=!0,d.forEach(S=>S(v))}).catch(S=>{k?.(void 0,S)})};return o.persist={setOptions:x=>{a={...a,...x},x.storage&&(p=x.storage)},clearStorage:()=>{p?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>l,onHydrate:x=>(u.add(x),()=>{u.delete(x)}),onFinishHydration:x=>(d.add(x),()=>{d.delete(x)})},a.skipHydration||b(),v||g},G4=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((V4?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),W4(e,t)):K4(e,t),aA=G4,Y4={bgPrimary:"#F7F8FA",bgSecondary:"#FFFFFF",bgCanvas:"#F0F2F5",surfaceCard:"#FFFFFF",surfacePanel:"#FFFFFF",borderDefault:"#E3E6EA",borderFocus:"#0F8A8A",textPrimary:"#1C232B",textSecondary:"#4A5568",textMuted:"#A0AEC0",accentPrimary:"#0F8A8A",accentWarning:"#F59F00",accentSuccess:"#38A169",accentError:"#E53E3E",nodeAgent:"#3182CE",nodeSequential:"#805AD5",nodeLoop:"#D69E2E",nodeParallel:"#38A169",nodeRouter:"#DD6B20",gridColor:"#E3E6EA",handleColor:"#0F8A8A",minimapMask:"rgba(247, 248, 250, 0.8)",controlsBg:"#FFFFFF",controlsBorder:"#E3E6EA"},Q4={bgPrimary:"#1a1a2e",bgSecondary:"#16213e",bgCanvas:"#0f0f1a",surfaceCard:"#1e2a4a",surfacePanel:"#16213e",borderDefault:"#2d3748",borderFocus:"#4fd1c5",textPrimary:"#F7FAFC",textSecondary:"#A0AEC0",textMuted:"#718096",accentPrimary:"#4fd1c5",accentWarning:"#F6AD55",accentSuccess:"#68D391",accentError:"#FC8181",nodeAgent:"#63B3ED",nodeSequential:"#B794F4",nodeLoop:"#F6E05E",nodeParallel:"#68D391",nodeRouter:"#F6AD55",gridColor:"#333333",handleColor:"#e94560",minimapMask:"rgba(0, 0, 0, 0.8)",controlsBg:"#16213e",controlsBorder:"#e94560"};function X4(e){return e==="light"?Y4:Q4}const J4="adk-studio-theme",Or=ba()(aA((e,t)=>({mode:"light",setMode:n=>e({mode:n}),toggle:()=>e(n=>({mode:n.mode==="light"?"dark":"light"})),getTokens:()=>X4(t().mode)}),{name:J4,partialize:e=>({mode:e.mode})})),Z4=new Set(["GOOGLE_API_KEY","GEMINI_API_KEY","OPENAI_API_KEY","ANTHROPIC_API_KEY","DEEPSEEK_API_KEY","GROQ_API_KEY","OLLAMA_HOST","GITHUB_TOKEN","SLACK_BOT_TOKEN"]);function e5(e){if(Z4.has(e))return!0;const t=e.toUpperCase();return t.endsWith("_API_KEY")||t.endsWith("_TOKEN")||t.endsWith("_SECRET")}const t5={GOOGLE_API_KEY:{name:"Google Gemini",icon:""},GEMINI_API_KEY:{name:"Google Gemini",icon:""},OPENAI_API_KEY:{name:"OpenAI",icon:""},ANTHROPIC_API_KEY:{name:"Anthropic Claude",icon:""},DEEPSEEK_API_KEY:{name:"DeepSeek",icon:""},GROQ_API_KEY:{name:"Groq",icon:""},OLLAMA_HOST:{name:"Ollama (Local)",icon:""},GITHUB_TOKEN:{name:"GitHub",icon:""},SLACK_BOT_TOKEN:{name:"Slack",icon:""}},n5=["0.3.0","0.2.1","0.2.0","0.1.9","0.1.0"],r5=["2024","2021"];function vc({settings:e,projectName:t,projectDescription:n,projectId:r,initialTab:o,showApiKeyBanner:a,onSave:l,onClose:u,onThemeChange:d}){const p=!!e,[f,m]=j.useState(p?"project":"global"),[g,v]=j.useState(o||"general"),[b,x]=j.useState(e?{...e}:{}),[_,k]=j.useState(t||""),[S,N]=j.useState(n||""),[T,A]=j.useState(""),[C,P]=j.useState(""),{keys:O,isLoading:I,saveKey:H,removeKey:D}=H4(r??null),[z,W]=j.useState(sv),[L,q]=j.useState([]),[$,G]=j.useState(!1),{setMode:U}=Or();j.useEffect(()=>{W(Vo()),G(!0),Jt.settings.getDetectedKeys().then(V=>q(V.keys)).catch(()=>{}).finally(()=>G(!1))},[]),j.useEffect(()=>{e&&x({...e,adkVersion:e.adkVersion||"0.3.0",rustEdition:e.rustEdition||"2024",defaultProvider:e.defaultProvider||"gemini",default_model:e.default_model||"gemini-2.5-flash",autobuildEnabled:e.autobuildEnabled??!0,showMinimap:e.showMinimap??!0,showTimeline:e.showTimeline??!0,consolePosition:e.consolePosition||"bottom"})},[e]);const X=()=>{f==="project"&&l&&l(b,_,S),f==="global"&&(A4(z),d&&d(z.theme),z.theme!=="system"&&U(z.theme)),u()},R=(V,ne)=>{x(de=>({...de,[V]:ne}))},B=(V,ne)=>{W(de=>({...de,[V]:ne}))},Y=()=>{T.trim()&&(x(V=>({...V,env_vars:{...V.env_vars,[T.trim()]:C}})),A(""),P(""))},F=V=>{x(ne=>{const{[V]:de,...ve}=ne.env_vars;return{...ne,env_vars:ve}})},K=Object.entries(b.env_vars||{}).filter(([V])=>!e5(V)),J=f==="project"?b.defaultProvider||"gemini":z.defaultProvider,te=Zn.find(V=>V.id===J)||Zn[0],re=[{id:"general",label:"General",icon:""},{id:"codegen",label:"Code Gen",icon:""},{id:"ui",label:"UI",icon:""},{id:"env",label:"Environment",icon:""}];return s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:u,children:s.jsxs("div",{className:"rounded-lg w-[620px] max-h-[80vh] flex flex-col",style:{backgroundColor:"var(--surface-panel)"},onClick:V=>V.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:" Settings"}),s.jsx("button",{onClick:u,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),p&&s.jsx("div",{className:"flex mx-4 mt-3 rounded overflow-hidden",style:{border:"1px solid var(--border-default)"},children:["project","global"].map(V=>s.jsx("button",{onClick:()=>m(V),className:"flex-1 px-3 py-1.5 text-sm font-medium transition-colors",style:{backgroundColor:f===V?"var(--accent-primary)":"transparent",color:f===V?"white":"var(--text-secondary)"},children:V==="project"?" Project":" Global Defaults"},V))}),f==="global"&&s.jsx("div",{className:"mx-4 mt-3 p-2 rounded text-xs",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid var(--accent-primary)",color:"var(--text-secondary)"},children:" Global settings apply as defaults for all new projects. Projects can override these individually."}),s.jsx("div",{className:"flex border-b mt-3",style:{borderColor:"var(--border-default)"},children:re.map(V=>s.jsxs("button",{onClick:()=>v(V.id),className:"px-4 py-2 text-sm font-medium transition-colors",style:{color:g===V.id?"var(--accent-primary)":"var(--text-secondary)",borderBottom:g===V.id?"2px solid var(--accent-primary)":"2px solid transparent"},children:[V.icon," ",V.label]},V.id))}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[g==="general"&&f==="project"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(_n,{label:"Project Name",children:s.jsx("input",{type:"text",value:_,onChange:V=>k(V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"}})}),s.jsx(_n,{label:"Description",children:s.jsx("textarea",{value:S,onChange:V=>N(V.target.value),rows:3,className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"}})}),s.jsx(_n,{label:"Default Provider",children:s.jsx("select",{value:b.defaultProvider||"gemini",onChange:V=>{const ne=Zn.find(de=>de.id===V.target.value);R("defaultProvider",V.target.value),ne?.models.length&&R("default_model",ne.models[0].id)},className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:Zn.map(V=>s.jsxs("option",{value:V.id,children:[V.icon," ",V.name]},V.id))})}),s.jsx(_n,{label:"Default Model",children:s.jsx("select",{value:b.default_model,onChange:V=>R("default_model",V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:te.models.map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))})})]}),g==="general"&&f==="global"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(_n,{label:"Default Provider",hint:"Provider for new projects",children:s.jsx("select",{value:z.defaultProvider,onChange:V=>{const ne=Zn.find(de=>de.id===V.target.value);B("defaultProvider",V.target.value),ne?.models.length&&B("defaultModel",ne.models[0].id)},className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:Zn.map(V=>s.jsxs("option",{value:V.id,children:[V.icon," ",V.name]},V.id))})}),s.jsx(_n,{label:"Default Model",hint:"Model for new projects",children:s.jsx("select",{value:z.defaultModel,onChange:V=>B("defaultModel",V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:te.models.map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))})}),s.jsx(_n,{label:"Default Layout Mode",children:s.jsxs("select",{value:z.layoutMode,onChange:V=>B("layoutMode",V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"free",children:"Free (drag anywhere)"}),s.jsx("option",{value:"fixed",children:"Fixed (auto-layout)"})]})}),s.jsx(_n,{label:"Default Layout Direction",children:s.jsxs("select",{value:z.layoutDirection,onChange:V=>B("layoutDirection",V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"TB",children:"Top to Bottom "}),s.jsx("option",{value:"LR",children:"Left to Right "}),s.jsx("option",{value:"BT",children:"Bottom to Top "}),s.jsx("option",{value:"RL",children:"Right to Left "})]})})]}),g==="codegen"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(_n,{label:"ADK-Rust Version",hint:"Version of ADK crates in generated code",children:s.jsx("select",{value:f==="project"?b.adkVersion||"0.3.0":z.adkVersion,onChange:V=>f==="project"?R("adkVersion",V.target.value):B("adkVersion",V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:n5.map(V=>s.jsxs("option",{value:V,children:[V,V==="0.3.0"?" (latest)":""]},V))})}),s.jsx(_n,{label:"Rust Edition",hint:"Edition for generated Cargo.toml",children:s.jsx("select",{value:f==="project"?b.rustEdition||"2024":z.rustEdition,onChange:V=>f==="project"?R("rustEdition",V.target.value):B("rustEdition",V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:r5.map(V=>s.jsxs("option",{value:V,children:[V,V==="2024"?" (latest)":""]},V))})}),s.jsxs("div",{className:"p-3 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[s.jsx("div",{className:"font-medium mb-1",children:"Generated Code Preview:"}),s.jsxs("code",{className:"block font-mono",children:["[package]",s.jsx("br",{}),'edition = "',f==="project"?b.rustEdition||"2024":z.rustEdition,'"',s.jsx("br",{}),s.jsx("br",{}),"[dependencies]",s.jsx("br",{}),'adk-core = "',f==="project"?b.adkVersion||"0.3.0":z.adkVersion,'"',s.jsx("br",{}),'adk-agent = "',f==="project"?b.adkVersion||"0.3.0":z.adkVersion,'"',s.jsx("br",{}),"..."]})]})]}),g==="ui"&&s.jsxs("div",{className:"space-y-4",children:[f==="global"&&s.jsx(_n,{label:"Theme",children:s.jsxs("select",{value:z.theme,onChange:V=>B("theme",V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"dark",children:" Dark"}),s.jsx("option",{value:"light",children:" Light"}),s.jsx("option",{value:"system",children:" System"})]})}),s.jsx(qs,{label:"Show Minimap",hint:"Display minimap in canvas corner",checked:f==="project"?b.showMinimap??!0:z.showMinimap,onChange:V=>f==="project"?R("showMinimap",V):B("showMinimap",V)}),s.jsx(qs,{label:"Show Timeline",hint:"Display execution timeline during runs",checked:f==="project"?b.showTimeline??!0:z.showTimeline,onChange:V=>f==="project"?R("showTimeline",V):B("showTimeline",V)}),s.jsx(qs,{label:"Show Data Flow Overlay",hint:"Display state keys on edges",checked:f==="project"?b.showDataFlowOverlay??!1:z.showDataFlowOverlay,onChange:V=>f==="project"?R("showDataFlowOverlay",V):B("showDataFlowOverlay",V)}),f==="project"&&s.jsxs(s.Fragment,{children:[s.jsx(_n,{label:"Layout Mode",children:s.jsxs("select",{value:b.layoutMode||"free",onChange:V=>R("layoutMode",V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"free",children:"Free (drag anywhere)"}),s.jsx("option",{value:"fixed",children:"Fixed (auto-layout)"})]})}),s.jsx(_n,{label:"Layout Direction",children:s.jsxs("select",{value:b.layoutDirection||"TB",onChange:V=>R("layoutDirection",V.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"TB",children:"Top to Bottom "}),s.jsx("option",{value:"LR",children:"Left to Right "}),s.jsx("option",{value:"BT",children:"Bottom to Top "}),s.jsx("option",{value:"RL",children:"Right to Left "})]})})]})]}),g==="env"&&f==="project"&&s.jsxs("div",{className:"space-y-4",children:[a&&s.jsxs("div",{className:"p-3 rounded text-sm flex items-start gap-2",style:{backgroundColor:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.4)",color:"var(--text-primary)"},children:[s.jsx("span",{className:"text-base leading-none mt-0.5",children:""}),s.jsx("span",{children:"Set up your API key to get started. Your workflow requires a configured provider key to run."})]}),s.jsx(Vl,{title:" API Keys",defaultOpen:!0,children:I?s.jsx("div",{className:"text-sm text-center py-4",style:{color:"var(--text-muted)"},children:"Loading API keys..."}):O.length===0?s.jsx("div",{className:"text-sm text-center py-4",style:{color:"var(--text-muted)"},children:"No API key providers available"}):s.jsx("div",{className:"space-y-2",children:O.map(V=>s.jsx(z4,{provider:V,onSave:H,onRemove:D},V.name))})}),s.jsxs(Vl,{title:" Custom Environment Variables",defaultOpen:!0,children:[s.jsx("div",{className:"p-3 rounded text-xs mb-3",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid var(--accent-primary)",color:"var(--text-secondary)"},children:s.jsx("p",{children:"Non-sensitive environment variables passed to the generated code at runtime."})}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("input",{type:"text",placeholder:"KEY",value:T,onChange:V=>A(V.target.value.toUpperCase()),className:"flex-1 px-3 py-2 rounded text-sm font-mono",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"}}),s.jsx("input",{type:"text",placeholder:"value",value:C,onChange:V=>P(V.target.value),className:"flex-1 px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"}}),s.jsx("button",{onClick:Y,className:"px-3 py-2 rounded text-sm font-medium",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Add"})]}),s.jsxs("div",{className:"space-y-2",children:[K.map(([V,ne])=>s.jsxs("div",{className:"flex items-center gap-2 p-2 rounded",style:{backgroundColor:"var(--bg-secondary)"},children:[s.jsx("code",{className:"flex-1 text-sm font-mono",style:{color:"var(--accent-primary)"},children:V}),s.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:ne?"":"(empty)"}),s.jsx("button",{onClick:()=>F(V),className:"text-red-500 hover:text-red-400 text-sm",children:""})]},V)),K.length===0&&s.jsx("div",{className:"text-sm text-center py-4",style:{color:"var(--text-muted)"},children:"No custom environment variables configured"})]})]}),s.jsx(Vl,{title:" Build Settings",defaultOpen:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(qs,{label:"Autobuild",hint:"Automatically rebuild when project changes",checked:b.autobuildEnabled??!0,onChange:V=>R("autobuildEnabled",V)}),(b.autobuildEnabled??!0)&&s.jsx(m_,{triggers:{onAgentAdd:b.autobuildTriggers?.onAgentAdd??!0,onAgentDelete:b.autobuildTriggers?.onAgentDelete??!0,onAgentUpdate:b.autobuildTriggers?.onAgentUpdate??!0,onToolAdd:b.autobuildTriggers?.onToolAdd??!0,onToolUpdate:b.autobuildTriggers?.onToolUpdate??!0,onEdgeAdd:b.autobuildTriggers?.onEdgeAdd??!0,onEdgeDelete:b.autobuildTriggers?.onEdgeDelete??!0},onChange:V=>R("autobuildTriggers",V)})]})})]}),g==="env"&&f==="global"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 rounded text-xs",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid var(--accent-primary)",color:"var(--text-secondary)"},children:[s.jsx("div",{className:"font-medium mb-1",style:{color:"var(--accent-primary)"},children:" Environment API Keys"}),s.jsxs("p",{children:["Global API keys are detected from your ",s.jsx("code",{className:"font-mono",children:".env"})," file or system environment variables. To add or change a key, update your ",s.jsx("code",{className:"font-mono",children:".env"})," file and restart Studio. Per-project overrides can be set in the Project scope."]})]}),$?s.jsx("div",{className:"text-sm text-center py-4",style:{color:"var(--text-muted)"},children:"Loading detected keys"}):L.length===0?s.jsxs("div",{className:"text-sm text-center py-4",style:{color:"var(--text-muted)"},children:["No provider keys detected. Add keys to your ",s.jsx("code",{className:"font-mono",children:".env"})," file."]}):s.jsx("div",{className:"space-y-2",children:L.map(V=>{const ne=t5[V.name],de=V.status==="detected";return s.jsxs("div",{className:"p-3 rounded flex items-center justify-between",style:{backgroundColor:"var(--bg-secondary)"},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-base",role:"img","aria-label":ne?.name??V.name,children:ne?.icon??""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",style:{color:"var(--text-primary)"},children:ne?.name??V.name}),s.jsx("code",{className:"text-xs font-mono",style:{color:"var(--text-muted)"},children:V.name})]})]}),de?s.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(16, 185, 129, 0.15)",color:"var(--accent-success, #10b981)"},children:[" detected",V.masked&&s.jsx("span",{className:"font-mono ml-1",children:V.masked})]}):s.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"rgba(107, 114, 128, 0.15)",color:"var(--text-muted)"},children:" not set"})]},V.name)})}),s.jsx(Vl,{title:" Build Defaults",defaultOpen:!0,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(qs,{label:"Autobuild Enabled",hint:"Default autobuild for new projects",checked:z.autobuildEnabled,onChange:V=>B("autobuildEnabled",V)}),z.autobuildEnabled&&s.jsx(m_,{triggers:z.autobuildTriggers,onChange:V=>B("autobuildTriggers",V)})]})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",style:{borderColor:"var(--border-default)"},children:[s.jsx("button",{onClick:u,className:"px-4 py-2 rounded text-sm font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Cancel"}),s.jsx("button",{onClick:X,className:"px-4 py-2 rounded text-sm font-medium",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Save Settings"})]})]})})}function Vl({title:e,defaultOpen:t=!1,children:n}){const[r,o]=j.useState(t);return s.jsxs("div",{className:"rounded",style:{border:"1px solid var(--border-default)"},children:[s.jsxs("button",{onClick:()=>o(!r),className:"w-full flex items-center justify-between px-3 py-2 text-sm font-medium",style:{color:"var(--text-primary)"},children:[s.jsx("span",{children:e}),s.jsx("span",{className:"text-xs transition-transform",style:{color:"var(--text-muted)",transform:r?"rotate(180deg)":"rotate(0deg)"},children:""})]}),r&&s.jsx("div",{className:"px-3 pb-3",children:n})]})}function _n({label:e,hint:t,children:n}){return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text-secondary)"},children:[e,t&&s.jsxs("span",{className:"font-normal ml-1",style:{color:"var(--text-muted)"},children:["(",t,")"]})]}),n]})}function qs({label:e,hint:t,checked:n,onChange:r}){return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:e}),t&&s.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:t})]}),s.jsx("button",{onClick:()=>r(!n),className:"w-12 h-6 rounded-full transition-colors relative",style:{backgroundColor:n?"var(--accent-primary)":"var(--bg-secondary)"},children:s.jsx("div",{className:"w-5 h-5 rounded-full bg-white absolute top-0.5 transition-transform",style:{transform:n?"translateX(26px)":"translateX(2px)"}})})]})}function Mo({label:e,checked:t,onChange:n}){return s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:t,onChange:r=>n(r.target.checked),className:"w-4 h-4 rounded",style:{accentColor:"var(--accent-primary)"}}),s.jsx("span",{className:"text-xs",style:{color:"var(--text-secondary)"},children:e})]})}function m_({triggers:e,onChange:t}){const n=(r,o)=>t({...e,[r]:o});return s.jsxs("div",{className:"p-3 rounded space-y-2",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)"},children:[s.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--text-muted)"},children:"Autobuild Triggers:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(Mo,{label:"Agent Add",checked:e.onAgentAdd,onChange:r=>n("onAgentAdd",r)}),s.jsx(Mo,{label:"Agent Delete",checked:e.onAgentDelete,onChange:r=>n("onAgentDelete",r)}),s.jsx(Mo,{label:"Agent Update",checked:e.onAgentUpdate,onChange:r=>n("onAgentUpdate",r)}),s.jsx(Mo,{label:"Tool Add",checked:e.onToolAdd,onChange:r=>n("onToolAdd",r)}),s.jsx(Mo,{label:"Tool Update",checked:e.onToolUpdate,onChange:r=>n("onToolUpdate",r)}),s.jsx(Mo,{label:"Edge Add",checked:e.onEdgeAdd,onChange:r=>n("onEdgeAdd",r)}),s.jsx(Mo,{label:"Edge Delete",checked:e.onEdgeDelete,onChange:r=>n("onEdgeDelete",r)})]})]})}const zt={inputLabel:"Enter your message",defaultPrompt:"What can you help me build with ADK-Rust today?"};function g_(e){return e.type==="trigger"}function y_(e){return e.type==="http"}function v_(e){return e.type==="set"}function x_(e){return e.type==="transform"}function b_(e){return e.type==="switch"}function w_(e){return e.type==="loop"}function __(e){return e.type==="merge"}function S_(e){return e.type==="wait"}function k_(e){return e.type==="code"}function N_(e){return e.type==="database"}function j_(e){return e.type==="email"}const o5={mode:"stop",retryCount:3,retryDelay:1e3},i5={enabled:!1,logLevel:"error"},s5={},a5={timeout:3e4};function lA(e,t,n){return{id:e,name:t,errorHandling:{...o5},tracing:{...i5},callbacks:{...s5},execution:{...a5},mapping:{outputKey:n}}}function Ti(){return{...lA("manual_trigger","Manual Trigger","trigger_input"),type:"trigger",triggerType:"manual",manual:{...zt}}}const Vv=[{id:"simple_chat",name:"Simple Chat Agent",icon:"",description:"A basic conversational agent with web search",agents:{chat_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a helpful, friendly assistant. Answer questions clearly and concisely. Use Google Search when you need current information or facts you're unsure about. Be conversational but informative.",tools:["google_search"],sub_agents:[],position:{x:0,y:0}}},actionNodes:{manual_trigger:Ti()},edges:[{from:"manual_trigger",to:"START"},{from:"START",to:"chat_agent"},{from:"chat_agent",to:"END"}]},{id:"research_pipeline",name:"Research Pipeline",icon:"",description:"Sequential: Researcher  Summarizer",agents:{researcher:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a research specialist. Given a topic, search for comprehensive information using Google Search. Gather key facts, statistics, recent developments, and expert opinions. Present your findings in a structured format.",tools:["google_search"],sub_agents:[],position:{x:0,y:0}},summarizer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are an expert summarizer. Take the research findings and create a clear, concise summary with: 1) Key takeaways (3-5 bullet points), 2) Main findings, 3) Conclusions. Make it easy to understand for a general audience.",tools:[],sub_agents:[],position:{x:0,y:0}},research_pipeline:{type:"sequential",instruction:"",tools:[],sub_agents:["researcher","summarizer"],position:{x:50,y:150}}},actionNodes:{manual_trigger:Ti()},edges:[{from:"manual_trigger",to:"START"},{from:"START",to:"research_pipeline"},{from:"research_pipeline",to:"END"}]},{id:"content_refiner",name:"Content Refiner",icon:"",description:"Loop agent that iteratively improves content",agents:{improver:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a content editor. Review the text and improve it by: fixing grammar and spelling errors, enhancing clarity and flow, improving word choice, and strengthening the overall structure. Output the improved version.",tools:[],sub_agents:[],position:{x:0,y:0}},reviewer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a quality reviewer. Evaluate the content for: clarity, grammar, flow, and completeness. If the content is polished and ready (score 8/10 or higher), call exit_loop. Otherwise, briefly note what still needs improvement and let the improver continue.",tools:["exit_loop"],sub_agents:[],position:{x:0,y:0}},content_refiner:{type:"loop",instruction:"",tools:[],sub_agents:["improver","reviewer"],position:{x:50,y:150},max_iterations:3}},actionNodes:{manual_trigger:Ti()},edges:[{from:"manual_trigger",to:"START"},{from:"START",to:"content_refiner"},{from:"content_refiner",to:"END"}]},{id:"parallel_analyzer",name:"Parallel Analyzer",icon:"",description:"Run multiple analyses concurrently",agents:{sentiment_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:"Analyze the sentiment of the provided text. Identify: 1) Overall sentiment (positive/negative/neutral with confidence %), 2) Emotional tones present (joy, anger, sadness, etc.), 3) Key phrases that indicate sentiment. Format as a brief report.",tools:[],sub_agents:[],position:{x:0,y:0}},entity_extractor:{type:"llm",model:"gemini-2.0-flash",instruction:"Extract key entities from the text. Identify and categorize: 1) People (names, roles), 2) Organizations (companies, institutions), 3) Locations (cities, countries), 4) Dates and times, 5) Key topics/concepts. Format as a structured list.",tools:[],sub_agents:[],position:{x:0,y:0}},parallel_analyzer:{type:"parallel",instruction:"",tools:[],sub_agents:["sentiment_analyzer","entity_extractor"],position:{x:50,y:150}}},actionNodes:{manual_trigger:Ti()},edges:[{from:"manual_trigger",to:"START"},{from:"START",to:"parallel_analyzer"},{from:"parallel_analyzer",to:"END"}]},{id:"support_router",name:"Support Router",icon:"",description:"Route requests to specialized agents",agents:{router:{type:"router",model:"gemini-2.0-flash",instruction:'Classify the user request into one category: "technical" for coding, bugs, API issues, or technical problems; "billing" for payments, subscriptions, refunds, or account charges; "general" for all other questions. Respond with just the category word.',tools:[],sub_agents:[],position:{x:200,y:100},routes:[{condition:"technical",target:"tech_support"},{condition:"billing",target:"billing_support"},{condition:"general",target:"general_support"}]},tech_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a senior technical support engineer. Help users with coding issues, bugs, API problems, and technical troubleshooting. Ask clarifying questions if needed. Provide code examples when helpful. Be patient and thorough.",tools:[],sub_agents:[],position:{x:50,y:350}},billing_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a billing specialist. Help users with payment issues, subscription questions, refund requests, and account billing inquiries. Be empathetic and solution-oriented. Explain charges clearly.",tools:[],sub_agents:[],position:{x:200,y:350}},general_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a friendly general support agent. Help users with general questions, product information, feature requests, and any inquiries that don't fit technical or billing categories. Be helpful and personable.",tools:[],sub_agents:[],position:{x:350,y:350}}},actionNodes:{manual_trigger:Ti()},edges:[{from:"manual_trigger",to:"START"},{from:"START",to:"router"},{from:"router",to:"tech_support"},{from:"router",to:"billing_support"},{from:"router",to:"general_support"},{from:"tech_support",to:"END"},{from:"billing_support",to:"END"},{from:"general_support",to:"END"}]},{id:"web_researcher",name:"Web Researcher",icon:"",description:"Agent that browses the web for information",agents:{web_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a web research assistant with browser capabilities. When asked a question: 1) Navigate to relevant websites to find accurate, up-to-date information, 2) Read and extract key content from pages, 3) Synthesize findings into a clear answer with sources. Always cite your sources.",tools:["browser"],sub_agents:[],position:{x:50,y:150}}},actionNodes:{manual_trigger:Ti()},edges:[{from:"manual_trigger",to:"START"},{from:"START",to:"web_agent"},{from:"web_agent",to:"END"}]}];function l5(){const{projects:e,loadingProjects:t,createProject:n,openProject:r,deleteProject:o,addAgent:a,addActionNode:l,addEdge:u}=De(),[d,p]=j.useState(!1),[f,m]=j.useState(""),[g,v]=j.useState(null),[b,x]=j.useState(null),[_,k]=j.useState(!1),S=async()=>{if(!f.trim())return;const A=await n(f.trim());m(""),p(!1),await r(A.id);const C=Vv.find(P=>P.id==="simple_chat");if(C){C.actionNodes&&Object.entries(C.actionNodes).forEach(([O,I])=>{l(O,I)}),Object.entries(C.agents).forEach(([O,I])=>{a(O,I)}),C.edges.forEach(O=>u(O.from,O.to));const{saveProject:P}=De.getState();P()}},N=async(A,C)=>{A.stopPropagation();const{api:P}=await h_(async()=>{const{api:I}=await Promise.resolve().then(()=>p_);return{api:I}},void 0),O=await P.projects.get(C);v(C),x({name:O.name,description:O.description,settings:O.settings})},T=async(A,C,P)=>{if(!g)return;const{api:O}=await h_(async()=>{const{api:D}=await Promise.resolve().then(()=>p_);return{api:D}},void 0),I=await O.projects.get(g);await O.projects.update(g,{...I,name:C,description:P,settings:A});const{fetchProjects:H}=De.getState();await H(),v(null),x(null)};return s.jsxs("div",{className:"p-8 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-theme-primary",children:"Projects"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-theme-secondary text-theme-primary border border-theme-default rounded hover:border-studio-accent font-medium",title:"Global Settings",children:" Settings"}),s.jsx("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-studio-highlight text-white rounded hover:opacity-90 font-medium",children:"+ New Project"})]})]}),d&&s.jsxs("div",{className:"mb-6 p-4 bg-theme-card rounded-lg border border-theme-default shadow-md",children:[s.jsx("input",{type:"text",placeholder:"Project name",value:f,onChange:A=>m(A.target.value),onKeyDown:A=>A.key==="Enter"&&S(),className:"w-full px-3 py-2 bg-theme-secondary border border-theme-default rounded mb-3 text-theme-primary placeholder-theme-muted focus:border-studio-accent focus:outline-none",autoFocus:!0}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:S,className:"px-4 py-2 bg-studio-highlight text-white rounded font-medium",children:"Create"}),s.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-theme-secondary text-theme-primary border border-theme-default rounded",children:"Cancel"})]})]}),t?s.jsx("div",{className:"text-theme-muted",children:"Loading..."}):e.length===0?s.jsx("div",{className:"text-theme-muted text-center py-12",children:"No projects yet. Create one to get started!"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(A=>s.jsxs("div",{className:"p-4 bg-theme-card rounded-lg border border-theme-default hover:border-studio-accent cursor-pointer group shadow-sm hover:shadow-md transition-shadow",onClick:()=>r(A.id),children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("span",{className:"font-medium text-theme-primary",children:[" ",A.name]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:C=>N(C,A.id),className:"opacity-0 group-hover:opacity-100 text-theme-muted hover:text-theme-primary transition-opacity",title:"Project Settings",children:""}),s.jsx("button",{onClick:C=>{C.stopPropagation(),confirm("Delete?")&&o(A.id)},className:"opacity-0 group-hover:opacity-100 text-theme-muted hover:text-red-500 transition-opacity",children:""})]})]}),A.description&&s.jsx("p",{className:"text-sm text-theme-secondary mt-2",children:A.description}),s.jsx("p",{className:"text-xs text-theme-muted mt-2",children:new Date(A.updated_at).toLocaleDateString()})]},A.id))}),b&&s.jsx(vc,{settings:b.settings,projectName:b.name,projectDescription:b.description,projectId:g??void 0,onSave:T,onClose:()=>{v(null),x(null)}}),_&&s.jsx(vc,{onClose:()=>k(!1)})]})}const c5="adk-studio-walkthrough",cA=ba()(aA((e,t)=>({completed:!1,skipped:!1,isVisible:!1,complete:()=>e({completed:!0,skipped:!1,isVisible:!1}),skip:()=>e({completed:!1,skipped:!0,isVisible:!1}),show:()=>e({isVisible:!0}),hide:()=>e({isVisible:!1}),reset:()=>e({completed:!1,skipped:!1,isVisible:!0}),shouldShowOnFirstRun:()=>{const{completed:n,skipped:r}=t();return!n&&!r}}),{name:c5,partialize:e=>({completed:e.completed,skipped:e.skipped})}));function u5(e){const t=[];if(t.push({id:"overview",title:`Welcome to ${e.name}`,description:e.useCase||e.description,icon:e.icon,tips:[`This template includes ${Object.keys(e.agents).length} AI agent(s)`,...e.actionNodes?[`${Object.keys(e.actionNodes).length} action node(s) for automation`]:[],`${e.edges.length} connections between nodes`]}),e.envVars&&e.envVars.length>0){const r=e.envVars.filter(a=>a.required),o=e.envVars.filter(a=>!a.required);t.push({id:"env-vars",title:"Configure Environment Variables",description:"This template requires some configuration before it can run. Set up the following environment variables:",icon:"",tips:[...r.map(a=>`${a.name} (required): ${a.description}`),...o.length>0?[`Plus ${o.length} optional variable(s)`]:[]],action:{label:"Open Settings",type:"open-env"}})}const n=Object.entries(e.agents);if(n.length>0){const r=n.slice(0,4).map(([o,a])=>{const l=a.type==="llm"?"LLM Agent":a.type==="sequential"?"Sequential":a.type==="parallel"?"Parallel":a.type==="loop"?"Loop":a.type==="router"?"Router":a.type;return`${o}: ${l}${a.tools?.length?` with ${a.tools.length} tool(s)`:""}`});n.length>4&&r.push(`...and ${n.length-4} more agent(s)`),t.push({id:"agents",title:"AI Agents in This Workflow",description:"This template uses AI agents to process and analyze data. Click on any agent to customize its instructions.",icon:"",tips:r,highlightNodes:n.slice(0,3).map(([o])=>o)})}if(e.actionNodes&&Object.keys(e.actionNodes).length>0){const r=Object.entries(e.actionNodes),o=[...new Set(r.map(([,l])=>l.type))],a={trigger:" Trigger - Starts the workflow",http:" HTTP - API calls and webhooks",database:" Database - Data storage",email:" Email - Send/receive emails",transform:" Transform - Data manipulation",switch:" Switch - Conditional routing",loop:" Loop - Iterate over items",wait:" Wait - Delays and scheduling",notification:" Notification - Alerts",set:" Set - Variables"};t.push({id:"action-nodes",title:"Action Nodes for Automation",description:"Action nodes handle the non-AI parts of your workflow like API calls, database operations, and notifications.",icon:"",tips:o.slice(0,5).map(l=>a[l]||`${l} node`),highlightNodes:r.slice(0,3).map(([l])=>l)})}return e.customizationTips&&e.customizationTips.length>0&&t.push({id:"customization",title:"Customize for Your Needs",description:"Here are some ways you can adapt this template to your specific use case:",icon:"",tips:e.customizationTips.slice(0,5)}),t.push({id:"docs",title:"Learn More",description:"Check out the full documentation for detailed setup instructions, examples, and troubleshooting tips.",icon:"",tips:["View detailed setup instructions","See example configurations","Troubleshooting common issues","Best practices and tips"],action:{label:"View Documentation",type:"open-docs"}}),t.push({id:"ready",title:"Ready to Go!",description:"Your template is loaded and ready. Configure any remaining settings, then build and run your workflow!",icon:"",tips:['Click "Build" to compile your workflow',"Use the console to test with sample inputs","Watch the timeline to see execution flow","Check node states in the inspector panel"],action:{label:"Run Workflow",type:"run-workflow"}}),t}const uA=ba((e,t)=>({template:null,steps:[],currentStep:0,isVisible:!1,start:n=>{const r=u5(n);e({template:n,steps:r,currentStep:0,isVisible:!0})},next:()=>{const{currentStep:n,steps:r}=t();n<r.length-1?e({currentStep:n+1}):t().complete()},previous:()=>{const{currentStep:n}=t();n>0&&e({currentStep:n-1})},goToStep:n=>{const{steps:r}=t();n>=0&&n<r.length&&e({currentStep:n})},skip:()=>{e({isVisible:!1})},complete:()=>{e({isVisible:!1})},reset:()=>{e({template:null,steps:[],currentStep:0,isVisible:!1})}})),d5=[{key:"F5",description:"Run workflow",category:"Execution"},{key:"Delete / Backspace",description:"Delete selected node or tool",category:"Edit"},{key:"Ctrl/Cmd + D",description:"Duplicate selected node",category:"Edit"},{key:"Escape",description:"Deselect all",category:"Edit"},{key:"Ctrl/Cmd + Z",description:"Undo",category:"Edit"},{key:"Ctrl/Cmd + Shift + Z",description:"Redo",category:"Edit"},{key:"Ctrl/Cmd + L",description:"Apply auto-layout",category:"Canvas"},{key:"Ctrl/Cmd + 0",description:"Fit all nodes in view",category:"Canvas"},{key:"Ctrl/Cmd + Plus",description:"Zoom in",category:"Canvas"},{key:"Ctrl/Cmd + Minus",description:"Zoom out",category:"Canvas"}];function p5({selectedNodeId:e,selectedToolId:t,selectedActionNodeId:n,onDeleteNode:r,onDeleteActionNode:o,onDeleteTool:a,onDuplicateNode:l,onSelectNode:u,onSelectActionNode:d,onSelectTool:p,onAutoLayout:f,onFitView:m,onZoomIn:g,onZoomOut:v,onUndo:b,onRedo:x,onRun:_}){j.useEffect(()=>{const k=S=>{const N=document.activeElement;if(S.key==="F5"&&_){S.preventDefault(),_();return}if(N?.tagName==="INPUT"||N?.tagName==="TEXTAREA"||N?.isContentEditable)return;const T=S.metaKey||S.ctrlKey,A=S.shiftKey;if(S.key==="Delete"||S.key==="Backspace"){if(t&&e){const C=t.split("_");a(e,C.slice(-2).join("_")),p(null)}else n&&o?(o(n),d?.(null)):e&&e!=="START"&&e!=="END"&&(r(e),u(null));S.preventDefault();return}if(T&&S.key==="d"&&e&&l){S.preventDefault();const C=l(e);C&&u(C);return}if(T&&S.key==="l"&&f){S.preventDefault(),f();return}if(T&&S.key==="0"&&m){S.preventDefault(),m();return}if(T&&!A&&S.key==="z"&&b){S.preventDefault(),b();return}if(T&&A&&(S.key==="z"||S.key==="Z")&&x){S.preventDefault(),x();return}if(S.key==="Escape"){u(null),p(null);return}if(T&&(S.key==="+"||S.key==="="||S.key==="NumpadAdd")&&g){S.preventDefault(),g();return}if(T&&(S.key==="-"||S.key==="NumpadSubtract")&&v){S.preventDefault(),v();return}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[e,t,n,r,o,a,l,u,d,p,f,m,g,v,b,x,_])}const dA=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();const f5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const h5=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase());const E_=e=>{const t=h5(e);return t.charAt(0).toUpperCase()+t.slice(1)};var m5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const g5=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const y5=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:l,...u},d)=>j.createElement("svg",{ref:d,...m5,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:dA("lucide",o),...!a&&!g5(u)&&{"aria-hidden":"true"},...u},[...l.map(([p,f])=>j.createElement(p,f)),...Array.isArray(a)?a:[a]]));const zn=(e,t)=>{const n=j.forwardRef(({className:r,...o},a)=>j.createElement(y5,{ref:a,iconNode:t,className:dA(`lucide-${f5(E_(e))}`,`lucide-${e}`,r),...o}));return n.displayName=E_(e),n};const v5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pA=zn("check",v5);const x5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],fA=zn("chevron-left",x5);const b5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hA=zn("chevron-right",b5);const w5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],_5=zn("external-link",w5);const S5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],k5=zn("funnel",S5);const N5=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],j5=zn("moon",N5);const E5=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],mA=zn("play",E5);const C5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],T5=zn("search",C5);const A5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],P5=zn("settings",A5);const I5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],gA=zn("sparkles",I5);const R5=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],O5=zn("sun",R5);const M5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Uv=zn("x",M5),D5={id:"ai_lead_generation",name:"AI-Powered Lead Generation",icon:"",description:"Process leads with AI analysis, scoring, and CRM integration",category:"automation",requiredNodeTypes:["trigger","http","switch","notification"],envVars:[{name:"WEBHOOK_SECRET",description:"Secret for webhook authentication",required:!0,example:"whsec_xxx"},{name:"CRM_API_KEY",description:"CRM API key (HubSpot, Salesforce, etc.)",required:!0,example:"pat-xxx"},{name:"CRM_BASE_URL",description:"CRM API base URL",required:!0,example:"https://api.hubapi.com"},{name:"SLACK_WEBHOOK_URL",description:"Slack incoming webhook URL",required:!0,example:"https://hooks.slack.com/services/xxx"}],useCase:"Automatically process incoming leads from web forms, analyze company information and intent with AI, score lead quality, and route high-value leads to sales while updating your CRM.",customizationTips:["Adjust the lead scoring criteria in the scoring agent prompt","Modify the Switch conditions to match your lead routing rules","Add additional CRM fields based on your sales process","Customize Slack message format for your team preferences"],agents:{lead_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a lead analysis expert. Analyze the incoming lead data and extract:
1. Company information (name, size, industry)
2. Contact details (name, role, seniority)
3. Intent signals (what they're looking for, urgency)
4. Potential use cases for our product
5. Any red flags or concerns

Output your analysis as JSON:
{
  "company": {
    "name": "Company Name",
    "size": "small|medium|enterprise",
    "industry": "Industry"
  },
  "contact": {
    "name": "Contact Name",
    "role": "Job Title",
    "seniority": "junior|mid|senior|executive"
  },
  "intent": {
    "description": "What they're looking for",
    "urgency": "low|medium|high",
    "useCases": ["use case 1", "use case 2"]
  },
  "concerns": ["any red flags"],
  "summary": "Brief summary of the lead"
}`,tools:[],sub_agents:[],position:{x:400,y:200}},lead_scorer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a lead scoring expert. Based on the lead analysis provided, calculate a lead score from 0-100 considering:

Scoring Criteria:
- Company size: Enterprise (+30), Medium (+20), Small (+10)
- Contact seniority: Executive (+25), Senior (+20), Mid (+10), Junior (+5)
- Intent urgency: High (+25), Medium (+15), Low (+5)
- Industry fit: High fit (+20), Medium fit (+10), Low fit (+0)

Also determine the lead tier:
- Hot (80-100): Immediate follow-up required
- Warm (50-79): Follow up within 24 hours
- Cold (0-49): Add to nurture campaign

Output as JSON:
{
  "score": 85,
  "tier": "hot|warm|cold",
  "breakdown": {
    "companySize": 30,
    "seniority": 25,
    "urgency": 25,
    "industryFit": 5
  },
  "recommendation": "Recommended next action",
  "assignTo": "sales_team|nurture_campaign|disqualify"
}`,tools:[],sub_agents:[],position:{x:600,y:200}}},actionNodes:{webhook_trigger:{type:"trigger",id:"webhook_trigger",name:"Lead Form Webhook",description:"Receive lead submissions from web forms",triggerType:"webhook",webhook:{path:"/api/webhook/leads",method:"POST",auth:"api_key",authConfig:{headerName:"X-Webhook-Secret",tokenEnvVar:"WEBHOOK_SECRET"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"leadData"}},enrich_lead:{type:"http",id:"enrich_lead",name:"Enrich Lead Data",description:"Fetch additional company information",method:"GET",url:'https://api.clearbit.com/v2/companies/find?domain={{leadData.email.split("@")[1]}}',auth:{type:"bearer",bearer:{token:"{{CLEARBIT_API_KEY}}"}},headers:{},body:{type:"none"},response:{type:"json"},errorHandling:{mode:"fallback",fallbackValue:{}},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"enrichedData"}},route_lead:{type:"switch",id:"route_lead",name:"Route by Lead Score",description:"Route leads based on their score tier",evaluationMode:"first_match",conditions:[{id:"hot",name:"Hot Lead",field:"leadScore.tier",operator:"eq",value:"hot",outputPort:"hot"},{id:"warm",name:"Warm Lead",field:"leadScore.tier",operator:"eq",value:"warm",outputPort:"warm"}],defaultBranch:"cold",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"routeResult"}},create_crm_contact:{type:"http",id:"create_crm_contact",name:"Create CRM Contact",description:"Create or update contact in CRM",method:"POST",url:"{{CRM_BASE_URL}}/crm/v3/objects/contacts",auth:{type:"bearer",bearer:{token:"{{CRM_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "properties": {
    "email": "{{leadData.email}}",
    "firstname": "{{leadAnalysis.contact.name.split(' ')[0]}}",
    "lastname": "{{leadAnalysis.contact.name.split(' ').slice(1).join(' ')}}",
    "company": "{{leadAnalysis.company.name}}",
    "jobtitle": "{{leadAnalysis.contact.role}}",
    "lead_score": "{{leadScore.score}}",
    "lead_tier": "{{leadScore.tier}}"
  }
}`},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"crmResult"}},notify_sales:{type:"notification",id:"notify_sales",name:"Notify Sales Team",description:"Send Slack notification for hot leads",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:` *New Hot Lead!*

*Company:* {{leadAnalysis.company.name}}
*Contact:* {{leadAnalysis.contact.name}} ({{leadAnalysis.contact.role}})
*Score:* {{leadScore.score}}/100
*Intent:* {{leadAnalysis.intent.description}}

_{{leadScore.recommendation}}_`,format:"markdown"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"notificationResult"}}},edges:[{from:"START",to:"webhook_trigger"},{from:"webhook_trigger",to:"enrich_lead"},{from:"enrich_lead",to:"lead_analyzer"},{from:"lead_analyzer",to:"lead_scorer"},{from:"lead_scorer",to:"route_lead"},{from:"route_lead",to:"create_crm_contact",fromPort:"hot"},{from:"route_lead",to:"create_crm_contact",fromPort:"warm"},{from:"route_lead",to:"create_crm_contact",fromPort:"cold"},{from:"create_crm_contact",to:"notify_sales"},{from:"notify_sales",to:"END"}]},L5={id:"intelligent_email_marketing",name:"Intelligent Email Marketing",icon:"",description:"AI-personalized email campaigns with customer segmentation",category:"automation",requiredNodeTypes:["trigger","database","loop","email","wait"],envVars:[{name:"DATABASE_URL",description:"PostgreSQL connection string for customer data",required:!0,example:"postgresql://user:pass@host:5432/db"},{name:"SMTP_HOST",description:"SMTP server host",required:!0,example:"smtp.sendgrid.net"},{name:"SMTP_USER",description:"SMTP username",required:!0,example:"apikey"},{name:"SMTP_PASS",description:"SMTP password or API key",required:!0,example:"SG.xxx"},{name:"FROM_EMAIL",description:"Sender email address",required:!0,example:"marketing@company.com"}],useCase:"Run scheduled email campaigns that fetch customer segments from your database, use AI to personalize each email based on customer profile and purchase history, and track engagement.",customizationTips:["Modify the SQL query to target specific customer segments","Adjust the personalization prompt for your brand voice","Add A/B testing by creating multiple email variants","Implement engagement tracking with webhook callbacks"],agents:{email_personalizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are an expert email marketing copywriter. Create a personalized email for the customer based on their profile.

Customer Data Available:
- Name: {{customer.name}}
- Purchase history: {{customer.purchases}}
- Preferences: {{customer.preferences}}
- Last interaction: {{customer.lastInteraction}}

Campaign Context:
- Campaign type: {{campaign.type}}
- Product/offer: {{campaign.product}}
- Key message: {{campaign.message}}

Write a compelling, personalized email that:
1. Uses the customer's name naturally
2. References their past purchases or interests
3. Presents the offer in a relevant way
4. Has a clear call-to-action
5. Maintains a friendly, professional tone

Output as JSON:
{
  "subject": "Personalized subject line",
  "preheader": "Email preview text",
  "greeting": "Personalized greeting",
  "body": "Main email content (HTML allowed)",
  "cta": {
    "text": "Button text",
    "url": "https://..."
  },
  "signature": "Closing and signature"
}`,tools:[],sub_agents:[],position:{x:500,y:300}}},actionNodes:{schedule_trigger:{type:"trigger",id:"schedule_trigger",name:"Campaign Schedule",description:"Run campaign every Tuesday at 10 AM",triggerType:"schedule",schedule:{cron:"0 10 * * 2",timezone:"America/New_York"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"scheduleData"}},fetch_customers:{type:"database",id:"fetch_customers",name:"Fetch Customer Segment",description:"Get customers for this campaign",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT 
          c.id, c.email, c.name, c.preferences,
          c.last_interaction, c.segment,
          json_agg(p.*) as purchases
        FROM customers c
        LEFT JOIN purchases p ON p.customer_id = c.id
        WHERE c.email_opt_in = true
          AND c.segment = 'active'
          AND c.last_email_sent < NOW() - INTERVAL '7 days'
        GROUP BY c.id
        LIMIT 100`},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"customers"}},set_campaign:{type:"set",id:"set_campaign",name:"Set Campaign Details",description:"Configure campaign parameters",mode:"set",variables:[{key:"campaign.type",value:"promotional",valueType:"string",isSecret:!1},{key:"campaign.product",value:"Summer Collection 2024",valueType:"string",isSecret:!1},{key:"campaign.message",value:"Exclusive 20% off for valued customers",valueType:"string",isSecret:!1},{key:"campaign.trackingId",value:"summer2024-promo",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"campaign"}},process_customers:{type:"loop",id:"process_customers",name:"Process Each Customer",description:"Iterate through customers for personalization",loopType:"forEach",forEach:{sourceArray:"customers",itemVar:"customer",indexVar:"idx"},parallel:{enabled:!0,batchSize:10,delayBetween:1e3},results:{collect:!0,aggregationKey:"emailResults"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e5},mapping:{outputKey:"loopResults"}},send_email:{type:"email",id:"send_email",name:"Send Personalized Email",description:"Send the AI-generated email",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"{{FROM_EMAIL}}",fromName:"Your Company"},recipients:{to:"{{customer.email}}"},content:{subject:"{{personalizedEmail.subject}}",bodyType:"html",body:`<!DOCTYPE html>
<html>
<body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
  <p>{{personalizedEmail.greeting}}</p>
  <div>{{personalizedEmail.body}}</div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{personalizedEmail.cta.url}}?utm_campaign={{campaign.trackingId}}&utm_source=email" 
       style="background: #0066cc; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px;">
      {{personalizedEmail.cta.text}}
    </a>
  </p>
  <p>{{personalizedEmail.signature}}</p>
</body>
</html>`},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emailSent"}},update_customer:{type:"database",id:"update_customer",name:"Update Customer Record",description:"Mark email as sent",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"update",query:`UPDATE customers 
                SET last_email_sent = NOW(), 
                    email_count = email_count + 1 
                WHERE id = $1`,params:{$1:"{{customer.id}}"}},errorHandling:{mode:"continue"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"updateResult"}},wait_for_engagement:{type:"wait",id:"wait_for_engagement",name:"Wait for Engagement",description:"Wait 24 hours to collect engagement data",waitType:"fixed",fixed:{duration:24,unit:"h"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:9e7},mapping:{outputKey:"waitComplete"}}},edges:[{from:"START",to:"schedule_trigger"},{from:"schedule_trigger",to:"fetch_customers"},{from:"fetch_customers",to:"set_campaign"},{from:"set_campaign",to:"process_customers"},{from:"process_customers",to:"email_personalizer"},{from:"email_personalizer",to:"send_email"},{from:"send_email",to:"update_customer"},{from:"update_customer",to:"wait_for_engagement"},{from:"wait_for_engagement",to:"END"}]},q5={id:"social_media_content_creator",name:"Social Media AI Content Creator",icon:"",description:"Auto-generate platform-specific posts from content sources",category:"automation",requiredNodeTypes:["trigger","rss","transform","loop","http"],envVars:[{name:"TWITTER_BEARER_TOKEN",description:"Twitter API Bearer token",required:!1,example:"AAAAAxx"},{name:"LINKEDIN_ACCESS_TOKEN",description:"LinkedIn API access token",required:!1,example:"AQVxx"},{name:"FACEBOOK_PAGE_TOKEN",description:"Facebook Page access token",required:!1,example:"EAAxx"},{name:"FACEBOOK_PAGE_ID",description:"Facebook Page ID",required:!1,example:"123456789"}],useCase:"Monitor your blog RSS feed or receive webhooks for new content, then use AI to adapt the content for each social media platform (Twitter, LinkedIn, Facebook) with appropriate tone, length, and hashtags.",customizationTips:["Add or remove platforms in the platforms array","Customize the AI prompts for your brand voice","Add image generation for visual content","Schedule posts for optimal engagement times"],agents:{content_adapter:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a social media content expert. Adapt the given content for the specified platform.

Source Content:
- Title: {{content.title}}
- Summary: {{content.summary}}
- URL: {{content.url}}
- Key points: {{content.keyPoints}}

Target Platform: {{platform.name}}

Platform Guidelines:
- Twitter: Max 280 chars, use hashtags, engaging hook, include link
- LinkedIn: Professional tone, 1-3 paragraphs, industry hashtags, thought leadership angle
- Facebook: Conversational, can be longer, encourage engagement, use emojis sparingly

Create content that:
1. Captures attention in the first line
2. Conveys the key message
3. Includes appropriate hashtags (3-5)
4. Has a clear call-to-action
5. Fits the platform's character/style limits

Output as JSON:
{
  "platform": "twitter|linkedin|facebook",
  "content": "The post content",
  "hashtags": ["hashtag1", "hashtag2"],
  "characterCount": 150,
  "mediaRecommendation": "Description of ideal accompanying image",
  "bestPostTime": "Recommended posting time"
}`,tools:[],sub_agents:[],position:{x:500,y:300}}},actionNodes:{rss_trigger:{type:"rss",id:"rss_trigger",name:"Blog RSS Feed",description:"Monitor blog for new posts",feedUrl:"https://your-blog.com/feed.xml",pollInterval:36e5,filters:{keywords:[]},seenTracking:{enabled:!0,stateKey:"seenPosts",maxItems:100},maxEntries:5,includeContent:!0,parseMedia:!0,errorHandling:{mode:"retry",retryCount:3,retryDelay:6e4},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"feedEntries"}},extract_content:{type:"transform",id:"extract_content",name:"Extract Content",description:"Parse and structure the content",transformType:"javascript",expression:`const entry = input.feedEntries[0];
return {
  title: entry.title,
  summary: entry.description?.substring(0, 500) || '',
  url: entry.link,
  publishDate: entry.pubDate,
  keyPoints: entry.description?.split('.').slice(0, 3).join('.') || '',
  author: entry.author || 'Unknown',
  categories: entry.categories || []
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{feedEntries:"feedEntries"},outputKey:"content"}},set_platforms:{type:"set",id:"set_platforms",name:"Configure Platforms",description:"Define target social media platforms",mode:"set",variables:[{key:"platforms",value:[{name:"twitter",enabled:!0,apiUrl:"https://api.twitter.com/2/tweets"},{name:"linkedin",enabled:!0,apiUrl:"https://api.linkedin.com/v2/ugcPosts"},{name:"facebook",enabled:!0,apiUrl:"https://graph.facebook.com/v18.0/{{FACEBOOK_PAGE_ID}}/feed"}],valueType:"json",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"platformConfig"}},loop_platforms:{type:"loop",id:"loop_platforms",name:"Process Each Platform",description:"Create content for each platform",loopType:"forEach",forEach:{sourceArray:"platforms",itemVar:"platform",indexVar:"platformIdx"},parallel:{enabled:!1},results:{collect:!0,aggregationKey:"postResults"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:12e4},mapping:{outputKey:"loopResults"}},post_twitter:{type:"http",id:"post_twitter",name:"Post to Twitter",description:"Publish tweet via Twitter API",method:"POST",url:"https://api.twitter.com/2/tweets",auth:{type:"bearer",bearer:{token:"{{TWITTER_BEARER_TOKEN}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:'{"text": "{{adaptedContent.content}}"}'},response:{type:"json"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"twitterResult"}},post_linkedin:{type:"http",id:"post_linkedin",name:"Post to LinkedIn",description:"Publish post via LinkedIn API",method:"POST",url:"https://api.linkedin.com/v2/ugcPosts",auth:{type:"bearer",bearer:{token:"{{LINKEDIN_ACCESS_TOKEN}}"}},headers:{"Content-Type":"application/json","X-Restli-Protocol-Version":"2.0.0"},body:{type:"json",content:`{
  "author": "urn:li:person:{{LINKEDIN_PERSON_ID}}",
  "lifecycleState": "PUBLISHED",
  "specificContent": {
    "com.linkedin.ugc.ShareContent": {
      "shareCommentary": {"text": "{{adaptedContent.content}}"},
      "shareMediaCategory": "ARTICLE",
      "media": [{
        "status": "READY",
        "originalUrl": "{{content.url}}"
      }]
    }
  },
  "visibility": {"com.linkedin.ugc.MemberNetworkVisibility": "PUBLIC"}
}`},response:{type:"json"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"linkedinResult"}}},edges:[{from:"START",to:"rss_trigger"},{from:"rss_trigger",to:"extract_content"},{from:"extract_content",to:"set_platforms"},{from:"set_platforms",to:"loop_platforms"},{from:"loop_platforms",to:"content_adapter"},{from:"content_adapter",to:"post_twitter"},{from:"post_twitter",to:"post_linkedin"},{from:"post_linkedin",to:"END"}]},F5={id:"ai_customer_support",name:"AI Customer Support",icon:"",description:"Intelligent ticket handling with knowledge base integration",category:"automation",requiredNodeTypes:["trigger","switch","http","email","notification"],envVars:[{name:"PINECONE_API_KEY",description:"Pinecone vector database API key",required:!0,example:"pc-xxx"},{name:"PINECONE_INDEX",description:"Pinecone index name",required:!0,example:"support-kb"},{name:"SMTP_HOST",description:"SMTP server for sending responses",required:!0,example:"smtp.sendgrid.net"},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0},{name:"SLACK_WEBHOOK_URL",description:"Slack webhook for escalations",required:!0}],useCase:"Receive support tickets via webhook, classify the issue type, search your knowledge base for relevant articles, generate a helpful response, and either auto-reply or escalate to human agents based on confidence.",customizationTips:["Adjust confidence thresholds for auto-reply vs escalation","Add more issue categories in the classifier prompt","Customize the response tone for your brand","Integrate with your ticketing system (Zendesk, Freshdesk, etc.)"],agents:{ticket_classifier:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a customer support ticket classifier. Analyze the incoming ticket and categorize it.

Ticket Content:
- Subject: {{ticket.subject}}
- Body: {{ticket.body}}
- Customer: {{ticket.customerEmail}}

Classify into one of these categories:
- billing: Payment issues, refunds, subscription questions
- technical: Bugs, errors, how-to questions, integrations
- account: Login issues, password reset, account settings
- feature: Feature requests, suggestions
- general: General inquiries, feedback

Also assess:
- Urgency: low, medium, high, critical
- Sentiment: positive, neutral, negative, angry
- Complexity: simple (FAQ), moderate, complex (needs human)

Output as JSON:
{
  "category": "technical",
  "subcategory": "integration",
  "urgency": "medium",
  "sentiment": "neutral",
  "complexity": "moderate",
  "keywords": ["api", "webhook", "error"],
  "summary": "Brief summary of the issue"
}`,tools:[],sub_agents:[],position:{x:300,y:200}},response_generator:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a helpful customer support agent. Generate a response to the customer's ticket using the knowledge base articles provided.

Ticket:
- Subject: {{ticket.subject}}
- Body: {{ticket.body}}
- Category: {{classification.category}}

Relevant Knowledge Base Articles:
{{kbArticles}}

Guidelines:
1. Be empathetic and acknowledge the customer's issue
2. Provide a clear, step-by-step solution if available
3. Reference specific KB articles when helpful
4. If you can't fully resolve, explain what you can help with
5. End with a clear next step or offer for further assistance

Output as JSON:
{
  "greeting": "Personalized greeting",
  "acknowledgment": "Acknowledge their issue",
  "solution": "Main response with solution/information",
  "nextSteps": ["Step 1", "Step 2"],
  "closing": "Friendly closing",
  "confidence": 0.85,
  "kbArticlesUsed": ["article-id-1", "article-id-2"],
  "needsHumanReview": false,
  "suggestedEscalationReason": null
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{ticket_webhook:{type:"trigger",id:"ticket_webhook",name:"Support Ticket Webhook",description:"Receive incoming support tickets",triggerType:"webhook",webhook:{path:"/api/webhook/support-ticket",method:"POST",auth:"api_key",authConfig:{headerName:"X-Support-Key",tokenEnvVar:"SUPPORT_WEBHOOK_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"ticket"}},search_kb:{type:"http",id:"search_kb",name:"Search Knowledge Base",description:"Vector search for relevant articles",method:"POST",url:"https://{{PINECONE_INDEX}}-xxx.svc.pinecone.io/query",auth:{type:"api_key",apiKey:{headerName:"Api-Key",value:"{{PINECONE_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "vector": "{{ticketEmbedding}}",
  "topK": 5,
  "includeMetadata": true,
  "filter": {
    "category": {"$eq": "{{classification.category}}"}
  }
}`},response:{type:"json",jsonPath:"$.matches"},errorHandling:{mode:"fallback",fallbackValue:[]},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"kbArticles"}},route_confidence:{type:"switch",id:"route_confidence",name:"Route by Confidence",description:"Route based on response confidence",evaluationMode:"first_match",conditions:[{id:"high_conf",name:"High Confidence",field:"response.confidence",operator:"gte",value:.8,outputPort:"auto_reply"},{id:"med_conf",name:"Medium Confidence",field:"response.confidence",operator:"gte",value:.5,outputPort:"review"}],defaultBranch:"escalate",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"routeResult"}},send_auto_reply:{type:"email",id:"send_auto_reply",name:"Send Auto Reply",description:"Send automated response to customer",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"support@company.com",fromName:"Customer Support"},recipients:{to:"{{ticket.customerEmail}}"},content:{subject:"Re: {{ticket.subject}}",bodyType:"html",body:`<p>{{response.greeting}}</p>
<p>{{response.acknowledgment}}</p>
<p>{{response.solution}}</p>
<h4>Next Steps:</h4>
<ul>
{{#each response.nextSteps}}<li>{{this}}</li>{{/each}}
</ul>
<p>{{response.closing}}</p>
<hr>
<p style="color: #666; font-size: 12px;">Ticket ID: {{ticket.id}}</p>`},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emailResult"}},escalate_notification:{type:"notification",id:"escalate_notification",name:"Escalate to Human",description:"Notify support team for manual handling",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:` *Support Ticket Escalation*

*Ticket:* {{ticket.subject}}
*Customer:* {{ticket.customerEmail}}
*Category:* {{classification.category}}
*Urgency:* {{classification.urgency}}
*Sentiment:* {{classification.sentiment}}

*Summary:* {{classification.summary}}

*Reason:* {{response.suggestedEscalationReason || "Low confidence response"}}
*AI Confidence:* {{response.confidence}}`,format:"markdown"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"escalationResult"}}},edges:[{from:"START",to:"ticket_webhook"},{from:"ticket_webhook",to:"ticket_classifier"},{from:"ticket_classifier",to:"search_kb"},{from:"search_kb",to:"response_generator"},{from:"response_generator",to:"route_confidence"},{from:"route_confidence",to:"send_auto_reply",fromPort:"auto_reply"},{from:"route_confidence",to:"send_auto_reply",fromPort:"review"},{from:"route_confidence",to:"escalate_notification",fromPort:"escalate"},{from:"send_auto_reply",to:"END"},{from:"escalate_notification",to:"END"}]},z5={id:"intelligent_data_analysis",name:"Intelligent Data Analysis & Reporting",icon:"",description:"Automated BI reports with AI-powered insights",category:"automation",requiredNodeTypes:["trigger","database","transform","file","email"],envVars:[{name:"DATABASE_URL",description:"Database connection string",required:!0,example:"postgresql://user:pass@host:5432/analytics"},{name:"S3_BUCKET",description:"S3 bucket for report storage",required:!0,example:"company-reports"},{name:"AWS_ACCESS_KEY_ID",description:"AWS access key",required:!0},{name:"AWS_SECRET_ACCESS_KEY",description:"AWS secret key",required:!0},{name:"SMTP_HOST",description:"SMTP server",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0}],useCase:"Run weekly automated reports that extract sales, user, and performance data from your database, use AI to identify trends and anomalies, generate executive summaries, and distribute to stakeholders.",customizationTips:["Modify SQL queries for your specific metrics","Adjust the analysis prompt for your business context","Add visualizations using a charting library","Create different report types for different audiences"],agents:{data_analyst:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a senior data analyst. Analyze the provided business data and identify key insights.

Data Summary:
{{dataSummary}}

Time Period: {{reportPeriod}}

Analyze:
1. Key Performance Indicators (KPIs) and their trends
2. Notable changes from previous period (week-over-week, month-over-month)
3. Anomalies or outliers that need attention
4. Correlations between different metrics
5. Potential causes for significant changes

Output as JSON:
{
  "kpis": [
    {"name": "Revenue", "value": 125000, "change": 12.5, "trend": "up"},
    {"name": "Active Users", "value": 5420, "change": -3.2, "trend": "down"}
  ],
  "insights": [
    {"type": "trend", "title": "Revenue Growth", "description": "...", "importance": "high"},
    {"type": "anomaly", "title": "Spike in Errors", "description": "...", "importance": "critical"}
  ],
  "correlations": [
    {"metrics": ["marketing_spend", "signups"], "correlation": 0.85, "insight": "..."}
  ],
  "recommendations": [
    {"action": "Investigate error spike", "priority": "high", "rationale": "..."}
  ]
}`,tools:[],sub_agents:[],position:{x:500,y:200}},report_writer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a business report writer. Create an executive summary report from the analysis.

Analysis Results:
{{analysis}}

Report Period: {{reportPeriod}}

Create a professional report with:
1. Executive Summary (2-3 sentences)
2. Key Highlights (bullet points)
3. Detailed Findings (organized by category)
4. Recommendations
5. Next Steps

Format the report in clean HTML suitable for email and PDF.

Output as JSON:
{
  "title": "Weekly Business Intelligence Report",
  "subtitle": "Week of {{reportPeriod}}",
  "executiveSummary": "HTML content...",
  "highlights": ["Highlight 1", "Highlight 2"],
  "sections": [
    {"title": "Revenue Performance", "content": "HTML content..."},
    {"title": "User Metrics", "content": "HTML content..."}
  ],
  "recommendations": "HTML content...",
  "nextSteps": ["Step 1", "Step 2"],
  "generatedAt": "ISO timestamp"
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{weekly_schedule:{type:"trigger",id:"weekly_schedule",name:"Weekly Report Schedule",description:"Run every Monday at 6 AM",triggerType:"schedule",schedule:{cron:"0 6 * * 1",timezone:"America/New_York"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"scheduleData"}},extract_sales_data:{type:"database",id:"extract_sales_data",name:"Extract Sales Data",description:"Query sales metrics from database",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`WITH current_week AS (
  SELECT 
    DATE_TRUNC('week', NOW()) as week_start,
    DATE_TRUNC('week', NOW()) + INTERVAL '6 days' as week_end
),
metrics AS (
  SELECT
    COUNT(*) as total_orders,
    SUM(amount) as revenue,
    AVG(amount) as avg_order_value,
    COUNT(DISTINCT customer_id) as unique_customers
  FROM orders
  WHERE created_at >= (SELECT week_start FROM current_week)
    AND created_at <= (SELECT week_end FROM current_week)
),
previous_week AS (
  SELECT
    COUNT(*) as total_orders,
    SUM(amount) as revenue,
    AVG(amount) as avg_order_value,
    COUNT(DISTINCT customer_id) as unique_customers
  FROM orders
  WHERE created_at >= (SELECT week_start FROM current_week) - INTERVAL '7 days'
    AND created_at < (SELECT week_start FROM current_week)
)
SELECT 
  m.*,
  p.total_orders as prev_orders,
  p.revenue as prev_revenue,
  p.avg_order_value as prev_aov,
  p.unique_customers as prev_customers
FROM metrics m, previous_week p`},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"salesData"}},extract_user_data:{type:"database",id:"extract_user_data",name:"Extract User Metrics",description:"Query user engagement data",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT
  COUNT(*) FILTER (WHERE created_at >= NOW() - INTERVAL '7 days') as new_signups,
  COUNT(*) FILTER (WHERE last_active >= NOW() - INTERVAL '7 days') as active_users,
  COUNT(*) FILTER (WHERE last_active < NOW() - INTERVAL '30 days') as churned_users,
  AVG(EXTRACT(EPOCH FROM (last_active - created_at))/86400) as avg_lifetime_days
FROM users`},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"userData"}},transform_data:{type:"transform",id:"transform_data",name:"Combine & Clean Data",description:"Merge all data sources",transformType:"javascript",expression:`const sales = input.salesData[0] || {};
const users = input.userData[0] || {};

return {
  reportPeriod: new Date().toISOString().split('T')[0],
  dataSummary: {
    sales: {
      revenue: sales.revenue || 0,
      orders: sales.total_orders || 0,
      avgOrderValue: sales.avg_order_value || 0,
      uniqueCustomers: sales.unique_customers || 0,
      revenueChange: sales.prev_revenue ? ((sales.revenue - sales.prev_revenue) / sales.prev_revenue * 100).toFixed(1) : 0
    },
    users: {
      newSignups: users.new_signups || 0,
      activeUsers: users.active_users || 0,
      churnedUsers: users.churned_users || 0,
      avgLifetimeDays: Math.round(users.avg_lifetime_days || 0)
    }
  }
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{salesData:"salesData",userData:"userData"},outputKey:"combinedData"}},save_report:{type:"file",id:"save_report",name:"Save Report to S3",description:"Store report in cloud storage",operation:"write",cloud:{provider:"s3",bucket:"{{S3_BUCKET}}",key:"reports/weekly/{{combinedData.reportPeriod}}-report.html",credentials:"AWS_CREDENTIALS",region:"us-east-1",presignedUrl:!0,presignedExpiry:604800},write:{content:"{{reportHtml}}",createDirs:!0},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"savedReport"}},send_report:{type:"email",id:"send_report",name:"Distribute Report",description:"Email report to stakeholders",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"reports@company.com",fromName:"Business Intelligence"},recipients:{to:"executives@company.com",cc:"analytics-team@company.com"},content:{subject:" Weekly Business Report - {{combinedData.reportPeriod}}",bodyType:"html",body:`{{report.executiveSummary}}
<h3>Key Highlights</h3>
<ul>{{#each report.highlights}}<li>{{this}}</li>{{/each}}</ul>
<p><a href="{{savedReport.presignedUrl}}">View Full Report</a></p>`},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emailResult"}}},edges:[{from:"START",to:"weekly_schedule"},{from:"weekly_schedule",to:"extract_sales_data"},{from:"extract_sales_data",to:"extract_user_data"},{from:"extract_user_data",to:"transform_data"},{from:"transform_data",to:"data_analyst"},{from:"data_analyst",to:"report_writer"},{from:"report_writer",to:"save_report"},{from:"save_report",to:"send_report"},{from:"send_report",to:"END"}]},B5={id:"ai_invoice_processing",name:"AI Invoice Processing",icon:"",description:"Automated invoice extraction, categorization, and approval routing",category:"automation",requiredNodeTypes:["email","http","switch","database"],envVars:[{name:"IMAP_HOST",description:"IMAP server for invoice emails",required:!0,example:"imap.gmail.com"},{name:"IMAP_USER",description:"Email account username",required:!0},{name:"IMAP_PASS",description:"Email account password/app password",required:!0},{name:"OCR_API_KEY",description:"Document AI/OCR service API key",required:!0},{name:"DATABASE_URL",description:"Accounting database connection",required:!0},{name:"SMTP_HOST",description:"SMTP server for confirmations",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0}],useCase:"Monitor an invoices email inbox, automatically extract invoice data using OCR, use AI to categorize expenses and validate data, route high-value invoices for approval, and record in your accounting system.",customizationTips:["Adjust approval thresholds for your organization","Add integration with your accounting software (QuickBooks, Xero)","Customize expense categories for your chart of accounts","Add duplicate detection logic"],agents:{invoice_extractor:{type:"llm",model:"gemini-2.0-flash",instruction:`You are an invoice processing expert. Analyze the OCR-extracted text and structure the invoice data.

OCR Text:
{{ocrText}}

Extract and validate:
1. Vendor information (name, address, tax ID)
2. Invoice details (number, date, due date)
3. Line items (description, quantity, unit price, total)
4. Totals (subtotal, tax, total amount)
5. Payment terms and bank details

Also:
- Categorize the expense (office supplies, software, services, travel, etc.)
- Flag any potential issues (missing data, unusual amounts)
- Calculate confidence score for extraction accuracy

Output as JSON:
{
  "vendor": {
    "name": "Vendor Name",
    "address": "Full address",
    "taxId": "Tax ID if present",
    "email": "vendor@email.com"
  },
  "invoice": {
    "number": "INV-001",
    "date": "2024-01-15",
    "dueDate": "2024-02-15",
    "currency": "USD"
  },
  "lineItems": [
    {"description": "Item", "quantity": 1, "unitPrice": 100, "total": 100}
  ],
  "totals": {
    "subtotal": 100,
    "tax": 10,
    "total": 110
  },
  "category": "software",
  "paymentTerms": "Net 30",
  "bankDetails": "If present",
  "confidence": 0.95,
  "flags": ["Missing PO number"],
  "needsReview": false
}`,tools:[],sub_agents:[],position:{x:500,y:200}}},actionNodes:{monitor_inbox:{type:"email",id:"monitor_inbox",name:"Monitor Invoice Inbox",description:"Watch for incoming invoices",mode:"monitor",imap:{host:"{{IMAP_HOST}}",port:993,secure:!0,username:"{{IMAP_USER}}",password:"{{IMAP_PASS}}",folder:"INBOX",markAsRead:!0},filters:{subject:"*invoice*",unreadOnly:!0},errorHandling:{mode:"retry",retryCount:3,retryDelay:6e4},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"incomingEmail"}},extract_attachment:{type:"transform",id:"extract_attachment",name:"Extract PDF Attachment",description:"Get invoice PDF from email",transformType:"javascript",expression:`const attachments = input.incomingEmail.attachments || [];
const pdfAttachment = attachments.find(a => 
  a.filename.toLowerCase().endsWith('.pdf') || 
  a.mimeType === 'application/pdf'
);
if (!pdfAttachment) {
  throw new Error('No PDF attachment found');
}
return {
  filename: pdfAttachment.filename,
  content: pdfAttachment.content,
  mimeType: pdfAttachment.mimeType,
  senderEmail: input.incomingEmail.from,
  receivedAt: input.incomingEmail.date
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{incomingEmail:"incomingEmail"},outputKey:"pdfData"}},ocr_document:{type:"http",id:"ocr_document",name:"OCR Invoice",description:"Extract text from PDF using Document AI",method:"POST",url:"https://documentai.googleapis.com/v1/projects/{{PROJECT_ID}}/locations/us/processors/{{PROCESSOR_ID}}:process",auth:{type:"bearer",bearer:{token:"{{OCR_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "rawDocument": {
    "content": "{{pdfData.content}}",
    "mimeType": "application/pdf"
  }
}`},response:{type:"json",jsonPath:"$.document.text"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"ocrText"}},route_approval:{type:"switch",id:"route_approval",name:"Route for Approval",description:"Route based on invoice amount",evaluationMode:"first_match",conditions:[{id:"high_value",name:"High Value (>$5000)",field:"invoiceData.totals.total",operator:"gt",value:5e3,outputPort:"manager_approval"},{id:"medium_value",name:"Medium Value (>$1000)",field:"invoiceData.totals.total",operator:"gt",value:1e3,outputPort:"team_lead_approval"},{id:"needs_review",name:"Needs Review",field:"invoiceData.needsReview",operator:"eq",value:!0,outputPort:"manual_review"}],defaultBranch:"auto_approve",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"approvalRoute"}},save_to_accounting:{type:"database",id:"save_to_accounting",name:"Save to Accounting",description:"Record invoice in database",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:`INSERT INTO invoices (
          vendor_name, vendor_email, invoice_number, invoice_date, due_date,
          subtotal, tax, total, currency, category, status, 
          line_items, raw_data, created_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, NOW())
        RETURNING id`,params:{$1:"{{invoiceData.vendor.name}}",$2:"{{invoiceData.vendor.email}}",$3:"{{invoiceData.invoice.number}}",$4:"{{invoiceData.invoice.date}}",$5:"{{invoiceData.invoice.dueDate}}",$6:"{{invoiceData.totals.subtotal}}",$7:"{{invoiceData.totals.tax}}",$8:"{{invoiceData.totals.total}}",$9:"{{invoiceData.invoice.currency}}",$10:"{{invoiceData.category}}",$11:"{{approvalRoute}}",$12:"{{invoiceData.lineItems}}",$13:"{{invoiceData}}"}},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"savedInvoice"}},send_confirmation:{type:"email",id:"send_confirmation",name:"Send Confirmation",description:"Confirm invoice receipt to vendor",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"ap@company.com",fromName:"Accounts Payable"},recipients:{to:"{{invoiceData.vendor.email}}"},content:{subject:"Invoice {{invoiceData.invoice.number}} Received",bodyType:"html",body:`<p>Dear {{invoiceData.vendor.name}},</p>
<p>We have received your invoice <strong>{{invoiceData.invoice.number}}</strong> dated {{invoiceData.invoice.date}}.</p>
<p><strong>Amount:</strong> {{invoiceData.invoice.currency}} {{invoiceData.totals.total}}</p>
<p><strong>Due Date:</strong> {{invoiceData.invoice.dueDate}}</p>
<p><strong>Status:</strong> {{approvalRoute}}</p>
<p>You will receive payment confirmation once processed.</p>
<p>Best regards,<br>Accounts Payable Team</p>`},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"confirmationSent"}}},edges:[{from:"START",to:"monitor_inbox"},{from:"monitor_inbox",to:"extract_attachment"},{from:"extract_attachment",to:"ocr_document"},{from:"ocr_document",to:"invoice_extractor"},{from:"invoice_extractor",to:"route_approval"},{from:"route_approval",to:"save_to_accounting",fromPort:"auto_approve"},{from:"route_approval",to:"save_to_accounting",fromPort:"team_lead_approval"},{from:"route_approval",to:"save_to_accounting",fromPort:"manager_approval"},{from:"route_approval",to:"save_to_accounting",fromPort:"manual_review"},{from:"save_to_accounting",to:"send_confirmation"},{from:"send_confirmation",to:"END"}]},$5={id:"ai_job_application_bot",name:"AI Job Application Bot",icon:"",description:"Automated job hunting with AI-powered applications",category:"automation",requiredNodeTypes:["rss","switch","http","database"],envVars:[{name:"DATABASE_URL",description:"Database for tracking applications",required:!0},{name:"LINKEDIN_API_KEY",description:"LinkedIn API key (optional)",required:!1},{name:"RESUME_URL",description:"URL to your resume PDF",required:!0}],useCase:"Automatically monitor job boards and RSS feeds for relevant positions, use AI to analyze job requirements and score match against your profile, generate tailored cover letters, and track all applications.",customizationTips:["Update your profile data in the Set node","Adjust match score thresholds for your preferences","Customize cover letter tone and style","Add more job board RSS feeds"],agents:{job_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a job posting analyst. Analyze the job posting and extract key information.

Job Posting:
{{jobPosting}}

Extract:
1. Job title and level (junior, mid, senior, lead)
2. Company information
3. Required skills (must-have vs nice-to-have)
4. Experience requirements
5. Location and remote policy
6. Salary range if mentioned
7. Key responsibilities
8. Red flags or concerns

Output as JSON:
{
  "title": "Job Title",
  "level": "senior",
  "company": {
    "name": "Company Name",
    "industry": "Tech",
    "size": "startup|mid|enterprise"
  },
  "skills": {
    "required": ["skill1", "skill2"],
    "preferred": ["skill3", "skill4"]
  },
  "experience": {
    "years": 5,
    "type": "relevant field experience"
  },
  "location": {
    "type": "remote|hybrid|onsite",
    "city": "City if applicable"
  },
  "salary": {
    "min": 100000,
    "max": 150000,
    "currency": "USD"
  },
  "responsibilities": ["resp1", "resp2"],
  "redFlags": [],
  "applicationUrl": "URL to apply",
  "deadline": "if mentioned"
}`,tools:[],sub_agents:[],position:{x:300,y:200}},match_scorer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a job match evaluator. Score how well the candidate matches the job requirements.

Job Analysis:
{{jobAnalysis}}

Candidate Profile:
{{candidateProfile}}

Evaluate match on:
1. Skills match (required and preferred)
2. Experience level alignment
3. Industry/domain fit
4. Location compatibility
5. Salary expectations alignment
6. Career trajectory fit

Calculate scores (0-100) for each category and overall.

Output as JSON:
{
  "overallScore": 85,
  "breakdown": {
    "skills": {"score": 90, "matched": ["skill1"], "missing": ["skill2"]},
    "experience": {"score": 80, "notes": "Slightly under required years"},
    "industry": {"score": 95, "notes": "Strong domain match"},
    "location": {"score": 100, "notes": "Remote compatible"},
    "salary": {"score": 75, "notes": "At lower end of range"},
    "trajectory": {"score": 85, "notes": "Good growth opportunity"}
  },
  "recommendation": "strong_apply|apply|maybe|skip",
  "strengths": ["strength1", "strength2"],
  "gaps": ["gap1"],
  "talkingPoints": ["point1", "point2"]
}`,tools:[],sub_agents:[],position:{x:500,y:200}},proposal_writer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are an expert cover letter writer. Create a compelling, personalized cover letter.

Job Analysis:
{{jobAnalysis}}

Match Analysis:
{{matchAnalysis}}

Candidate Profile:
{{candidateProfile}}

Write a cover letter that:
1. Opens with a compelling hook related to the company/role
2. Highlights 2-3 most relevant experiences
3. Addresses any potential gaps proactively
4. Shows genuine interest in the company
5. Ends with a clear call to action
6. Keeps it under 400 words

Output as JSON:
{
  "subject": "Application for [Position] - [Your Name]",
  "greeting": "Dear Hiring Manager,",
  "opening": "Opening paragraph...",
  "body": "Main content paragraphs...",
  "closing": "Closing paragraph...",
  "signature": "Best regards,\\n[Name]",
  "fullText": "Complete cover letter text",
  "wordCount": 350,
  "customizations": ["Mentioned specific project", "Referenced company value"]
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{job_feed:{type:"rss",id:"job_feed",name:"Job Board RSS",description:"Monitor job postings",feedUrl:"https://stackoverflow.com/jobs/feed?q=senior+engineer&r=true",pollInterval:36e5,filters:{keywords:["senior","engineer","developer"]},seenTracking:{enabled:!0,stateKey:"seenJobs",maxItems:500},maxEntries:10,includeContent:!0,parseMedia:!1,errorHandling:{mode:"retry",retryCount:3,retryDelay:6e4},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"jobPostings"}},set_profile:{type:"set",id:"set_profile",name:"Set Candidate Profile",description:"Configure your profile data",mode:"set",variables:[{key:"candidateProfile",value:{name:"Your Name",title:"Senior Software Engineer",yearsExperience:7,skills:["TypeScript","React","Node.js","Python","AWS","PostgreSQL"],industries:["SaaS","FinTech","E-commerce"],preferredLocation:"remote",salaryExpectation:{min:15e4,max:2e5,currency:"USD"},highlights:["Led team of 5 engineers on $2M project","Reduced API latency by 60%","Built ML pipeline processing 1M events/day"]},valueType:"json",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"profile"}},loop_jobs:{type:"loop",id:"loop_jobs",name:"Process Each Job",description:"Analyze each job posting",loopType:"forEach",forEach:{sourceArray:"jobPostings",itemVar:"jobPosting",indexVar:"jobIdx"},parallel:{enabled:!1},results:{collect:!0,aggregationKey:"processedJobs"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e5},mapping:{outputKey:"loopResults"}},filter_match:{type:"switch",id:"filter_match",name:"Filter by Match Score",description:"Only apply to good matches",evaluationMode:"first_match",conditions:[{id:"strong",name:"Strong Match (80+)",field:"matchAnalysis.overallScore",operator:"gte",value:80,outputPort:"apply"},{id:"good",name:"Good Match (60+)",field:"matchAnalysis.overallScore",operator:"gte",value:60,outputPort:"maybe"}],defaultBranch:"skip",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"filterResult"}},track_application:{type:"database",id:"track_application",name:"Track Application",description:"Save application to database",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:`INSERT INTO job_applications (
          job_title, company, job_url, match_score, 
          status, cover_letter, applied_at, job_data, match_data
        ) VALUES ($1, $2, $3, $4, $5, $6, NOW(), $7, $8)
        RETURNING id`,params:{$1:"{{jobAnalysis.title}}",$2:"{{jobAnalysis.company.name}}",$3:"{{jobAnalysis.applicationUrl}}",$4:"{{matchAnalysis.overallScore}}",$5:"{{filterResult}}",$6:"{{coverLetter.fullText}}",$7:"{{jobAnalysis}}",$8:"{{matchAnalysis}}"}},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"trackedApplication"}}},edges:[{from:"START",to:"job_feed"},{from:"job_feed",to:"set_profile"},{from:"set_profile",to:"loop_jobs"},{from:"loop_jobs",to:"job_analyzer"},{from:"job_analyzer",to:"match_scorer"},{from:"match_scorer",to:"filter_match"},{from:"filter_match",to:"proposal_writer",fromPort:"apply"},{from:"filter_match",to:"track_application",fromPort:"maybe"},{from:"filter_match",to:"track_application",fromPort:"skip"},{from:"proposal_writer",to:"track_application"},{from:"track_application",to:"END"}]},H5={id:"ai_newsletter_digest",name:"AI Newsletter Digest Creator",icon:"",description:"Consolidate multiple newsletters into one AI-curated digest",category:"automation",requiredNodeTypes:["email","loop","transform"],envVars:[{name:"IMAP_HOST",description:"IMAP server",required:!0,example:"imap.gmail.com"},{name:"IMAP_USER",description:"Email username",required:!0},{name:"IMAP_PASS",description:"Email password",required:!0},{name:"SMTP_HOST",description:"SMTP server",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0},{name:"DIGEST_RECIPIENT",description:"Email to send digest to",required:!0}],useCase:"Tired of reading 20+ newsletters? This workflow fetches all newsletters from the past week, uses AI to summarize each one, groups them by topic, and sends you a single curated digest with the most important insights.",customizationTips:["Adjust the email filter to match your newsletter senders","Customize the digest format and sections","Add priority scoring for different newsletters","Include links to original newsletters"],agents:{newsletter_summarizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a newsletter summarization expert. Create a concise summary of the newsletter.

Newsletter:
- From: {{newsletter.from}}
- Subject: {{newsletter.subject}}
- Content: {{newsletter.body}}

Create a summary that:
1. Captures the 2-3 most important points
2. Identifies any actionable insights
3. Notes any time-sensitive information
4. Extracts key links or resources mentioned

Output as JSON:
{
  "source": "Newsletter Name",
  "subject": "Original subject",
  "summary": "2-3 sentence summary",
  "keyPoints": [
    {"point": "Key insight 1", "importance": "high|medium|low"},
    {"point": "Key insight 2", "importance": "high|medium|low"}
  ],
  "actionItems": ["Action 1 if any"],
  "links": [{"title": "Link title", "url": "URL"}],
  "topics": ["topic1", "topic2"],
  "timeSensitive": false,
  "readTime": "2 min"
}`,tools:[],sub_agents:[],position:{x:400,y:200}},digest_creator:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a content curator. Create a weekly digest from the newsletter summaries.

Summaries by Topic:
{{groupedSummaries}}

Date Range: {{dateRange}}

Create a digest that:
1. Opens with a brief overview of the week's themes
2. Groups content by topic with clear headers
3. Highlights the most important insights across all newsletters
4. Includes a "Quick Hits" section for minor updates
5. Ends with recommended reading priorities

Format as a clean, scannable email.

Output as JSON:
{
  "title": "Your Weekly Digest - {{dateRange}}",
  "overview": "This week's key themes...",
  "sections": [
    {
      "topic": "AI & Technology",
      "highlights": ["highlight1", "highlight2"],
      "sources": ["Newsletter 1", "Newsletter 2"]
    }
  ],
  "quickHits": ["Quick update 1", "Quick update 2"],
  "mustRead": [
    {"title": "Article title", "source": "Newsletter", "reason": "Why it's important"}
  ],
  "htmlContent": "Full HTML email content"
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{fetch_newsletters:{type:"email",id:"fetch_newsletters",name:"Fetch Newsletters",description:"Get newsletters from past week",mode:"monitor",imap:{host:"{{IMAP_HOST}}",port:993,secure:!0,username:"{{IMAP_USER}}",password:"{{IMAP_PASS}}",folder:"Newsletters",markAsRead:!1},filters:{dateFrom:"{{sevenDaysAgo}}",unreadOnly:!1},errorHandling:{mode:"retry",retryCount:3,retryDelay:5e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"newsletters"}},set_date_range:{type:"set",id:"set_date_range",name:"Set Date Range",description:"Configure digest date range",mode:"set",variables:[{key:"dateRange",value:`${new Date(Date.now()-10080*60*1e3).toLocaleDateString()} - ${new Date().toLocaleDateString()}`,valueType:"expression",isSecret:!1},{key:"sevenDaysAgo",value:new Date(Date.now()-10080*60*1e3).toISOString(),valueType:"expression",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"dateConfig"}},process_newsletters:{type:"loop",id:"process_newsletters",name:"Process Each Newsletter",description:"Summarize each newsletter",loopType:"forEach",forEach:{sourceArray:"newsletters",itemVar:"newsletter",indexVar:"idx"},parallel:{enabled:!0,batchSize:5},results:{collect:!0,aggregationKey:"summaries"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:18e4},mapping:{outputKey:"loopResults"}},group_by_topic:{type:"transform",id:"group_by_topic",name:"Group by Topic",description:"Cluster summaries by topic",transformType:"javascript",expression:`const summaries = input.summaries || [];
const grouped = {};

summaries.forEach(summary => {
  (summary.topics || ['General']).forEach(topic => {
    if (!grouped[topic]) {
      grouped[topic] = [];
    }
    grouped[topic].push(summary);
  });
});

// Sort topics by number of items
const sortedTopics = Object.entries(grouped)
  .sort((a, b) => b[1].length - a[1].length)
  .reduce((acc, [topic, items]) => {
    acc[topic] = items;
    return acc;
  }, {});

return {
  groupedSummaries: sortedTopics,
  totalNewsletters: summaries.length,
  topicCount: Object.keys(sortedTopics).length
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{summaries:"summaries"},outputKey:"clusteredData"}},send_digest:{type:"email",id:"send_digest",name:"Send Digest",description:"Email the curated digest",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"digest@yourdomain.com",fromName:"Newsletter Digest"},recipients:{to:"{{DIGEST_RECIPIENT}}"},content:{subject:" {{digest.title}}",bodyType:"html",body:"{{digest.htmlContent}}"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"digestSent"}}},edges:[{from:"START",to:"set_date_range"},{from:"set_date_range",to:"fetch_newsletters"},{from:"fetch_newsletters",to:"process_newsletters"},{from:"process_newsletters",to:"newsletter_summarizer"},{from:"newsletter_summarizer",to:"group_by_topic"},{from:"group_by_topic",to:"digest_creator"},{from:"digest_creator",to:"send_digest"},{from:"send_digest",to:"END"}]},V5={id:"ecommerce_order_intelligence",name:"E-commerce AI Order Intelligence",icon:"",description:"Smart order processing with fraud detection and personalization",category:"automation",requiredNodeTypes:["trigger","database","http","email","notification","switch"],envVars:[{name:"DATABASE_URL",description:"E-commerce database connection",required:!0},{name:"SHIPPING_API_KEY",description:"Shipping provider API key",required:!0},{name:"SMTP_HOST",description:"SMTP server",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0},{name:"SLACK_WEBHOOK_URL",description:"Slack webhook for alerts",required:!0}],useCase:"Automatically process new orders with AI fraud detection, check inventory availability, create shipping labels, generate personalized order confirmations, and alert the team to any issues.",customizationTips:["Adjust fraud detection thresholds for your risk tolerance","Integrate with your specific shipping provider","Customize email templates for your brand","Add upsell recommendations based on order contents"],agents:{fraud_detector:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a fraud detection expert. Analyze the order for potential fraud indicators.

Order Data:
{{order}}

Customer History:
{{customerHistory}}

Analyze for:
1. Unusual order patterns (high value, unusual items)
2. Shipping/billing address mismatches
3. New customer with high-value order
4. Multiple failed payment attempts
5. Velocity checks (many orders in short time)
6. Known fraud patterns

Output as JSON:
{
  "riskScore": 25,
  "riskLevel": "low|medium|high|critical",
  "flags": [
    {"type": "address_mismatch", "severity": "medium", "details": "..."}
  ],
  "recommendation": "approve|review|reject",
  "confidence": 0.92,
  "reasoning": "Brief explanation",
  "suggestedActions": ["Verify phone number", "Request ID"]
}`,tools:[],sub_agents:[],position:{x:300,y:200}},message_personalizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a customer communication expert. Create a personalized order confirmation.

Order Details:
{{order}}

Customer Profile:
{{customer}}

Shipping Info:
{{shipping}}

Create a warm, personalized message that:
1. Thanks them by name
2. Confirms their order details
3. Provides shipping timeline
4. Suggests complementary products based on their order
5. Includes any loyalty rewards earned

Output as JSON:
{
  "subject": "Thanks {{customer.firstName}}! Your order #{{order.id}} is confirmed ",
  "greeting": "Personalized greeting",
  "orderSummary": "HTML formatted order summary",
  "shippingInfo": "Shipping details and timeline",
  "recommendations": [
    {"product": "Product name", "reason": "Why they might like it", "url": "..."}
  ],
  "loyaltyMessage": "Points earned or tier status",
  "closing": "Warm closing message",
  "htmlEmail": "Complete HTML email"
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{order_webhook:{type:"trigger",id:"order_webhook",name:"New Order Webhook",description:"Receive new orders from storefront",triggerType:"webhook",webhook:{path:"/api/webhook/orders",method:"POST",auth:"api_key",authConfig:{headerName:"X-Shop-Webhook-Key",tokenEnvVar:"SHOP_WEBHOOK_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"order"}},get_customer_history:{type:"database",id:"get_customer_history",name:"Get Customer History",description:"Fetch customer order history",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT 
          c.*,
          COUNT(o.id) as total_orders,
          SUM(o.total) as lifetime_value,
          MAX(o.created_at) as last_order_date,
          AVG(o.total) as avg_order_value
        FROM customers c
        LEFT JOIN orders o ON o.customer_id = c.id
        WHERE c.email = $1
        GROUP BY c.id`,params:{$1:"{{order.customer.email}}"}},errorHandling:{mode:"fallback",fallbackValue:{newCustomer:!0}},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"customerHistory"}},route_fraud:{type:"switch",id:"route_fraud",name:"Route by Fraud Risk",description:"Route based on fraud assessment",evaluationMode:"first_match",conditions:[{id:"reject",name:"Reject Order",field:"fraudCheck.recommendation",operator:"eq",value:"reject",outputPort:"reject"},{id:"review",name:"Manual Review",field:"fraudCheck.recommendation",operator:"eq",value:"review",outputPort:"review"}],defaultBranch:"approve",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"fraudRoute"}},check_inventory:{type:"database",id:"check_inventory",name:"Check Inventory",description:"Verify stock availability",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT 
          p.id, p.sku, p.name, 
          i.quantity as available,
          $2::int as requested,
          CASE WHEN i.quantity >= $2::int THEN true ELSE false END as in_stock
        FROM products p
        JOIN inventory i ON i.product_id = p.id
        WHERE p.id = ANY($1::int[])`,params:{$1:"{{order.items.map(i => i.productId)}}",$2:"{{order.items[0].quantity}}"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"inventoryCheck"}},create_shipment:{type:"http",id:"create_shipment",name:"Create Shipment",description:"Generate shipping label",method:"POST",url:"https://api.shippo.com/shipments",auth:{type:"bearer",bearer:{token:"{{SHIPPING_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "address_from": {
    "name": "{{WAREHOUSE_NAME}}",
    "street1": "{{WAREHOUSE_ADDRESS}}",
    "city": "{{WAREHOUSE_CITY}}",
    "state": "{{WAREHOUSE_STATE}}",
    "zip": "{{WAREHOUSE_ZIP}}",
    "country": "US"
  },
  "address_to": {
    "name": "{{order.shipping.name}}",
    "street1": "{{order.shipping.address1}}",
    "city": "{{order.shipping.city}}",
    "state": "{{order.shipping.state}}",
    "zip": "{{order.shipping.zip}}",
    "country": "{{order.shipping.country}}"
  },
  "parcels": [{
    "length": "10",
    "width": "8",
    "height": "4",
    "distance_unit": "in",
    "weight": "{{order.totalWeight}}",
    "mass_unit": "lb"
  }]
}`},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"shipping"}},update_order:{type:"database",id:"update_order",name:"Update Order Status",description:"Save order with shipping info",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"update",query:`UPDATE orders SET 
          status = 'processing',
          fraud_score = $2,
          tracking_number = $3,
          shipping_label_url = $4,
          updated_at = NOW()
        WHERE id = $1`,params:{$1:"{{order.id}}",$2:"{{fraudCheck.riskScore}}",$3:"{{shipping.tracking_number}}",$4:"{{shipping.label_url}}"}},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"orderUpdated"}},send_confirmation:{type:"email",id:"send_confirmation",name:"Send Order Confirmation",description:"Email personalized confirmation",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"orders@store.com",fromName:"Your Store"},recipients:{to:"{{order.customer.email}}"},content:{subject:"{{personalizedMessage.subject}}",bodyType:"html",body:"{{personalizedMessage.htmlEmail}}"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"confirmationSent"}},alert_fraud:{type:"notification",id:"alert_fraud",name:"Alert Fraud Team",description:"Notify team of suspicious order",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:` *Fraud Alert - Order #{{order.id}}*

*Risk Score:* {{fraudCheck.riskScore}}/100
*Risk Level:* {{fraudCheck.riskLevel}}
*Customer:* {{order.customer.email}}
*Order Total:* \${{order.total}}

*Flags:*
{{#each fraudCheck.flags}}- {{flag.type}}: {{flag.details}}
{{/each}}

*Recommendation:* {{fraudCheck.recommendation}}
*Reasoning:* {{fraudCheck.reasoning}}`,format:"markdown"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"fraudAlert"}}},edges:[{from:"START",to:"order_webhook"},{from:"order_webhook",to:"get_customer_history"},{from:"get_customer_history",to:"fraud_detector"},{from:"fraud_detector",to:"route_fraud"},{from:"route_fraud",to:"check_inventory",fromPort:"approve"},{from:"route_fraud",to:"alert_fraud",fromPort:"review"},{from:"route_fraud",to:"alert_fraud",fromPort:"reject"},{from:"check_inventory",to:"create_shipment"},{from:"create_shipment",to:"update_order"},{from:"update_order",to:"message_personalizer"},{from:"message_personalizer",to:"send_confirmation"},{from:"send_confirmation",to:"END"},{from:"alert_fraud",to:"END"}]},U5={id:"ai_incident_response",name:"AI-Powered Incident Response",icon:"",description:"Intelligent alert analysis with automated runbook generation",category:"automation",requiredNodeTypes:["trigger","http","switch","notification"],envVars:[{name:"PAGERDUTY_API_KEY",description:"PagerDuty API key",required:!0},{name:"PAGERDUTY_SERVICE_ID",description:"PagerDuty service ID",required:!0},{name:"PINECONE_API_KEY",description:"Pinecone API key for incident history",required:!0},{name:"PINECONE_INDEX",description:"Pinecone index name",required:!0},{name:"SLACK_WEBHOOK_URL",description:"Slack webhook for incident channel",required:!0}],useCase:"Receive alerts from monitoring systems, use AI to analyze logs and identify root causes, search past incidents for similar issues, generate incident summaries and runbooks, and route to the right team based on severity.",customizationTips:["Integrate with your monitoring stack (Datadog, New Relic, etc.)","Customize severity thresholds for your SLAs","Add your own runbook templates","Connect to your incident management system"],agents:{log_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a senior SRE analyzing an incident. Examine the alert and logs to identify the issue.

Alert Data:
{{alert}}

Recent Logs:
{{logs}}

Metrics:
{{metrics}}

Analyze:
1. What is the immediate symptom?
2. What service/component is affected?
3. What is the likely root cause?
4. What is the blast radius (affected users/services)?
5. Is this a known issue pattern?

Output as JSON:
{
  "symptom": "Brief description of the symptom",
  "affectedService": "service-name",
  "affectedComponents": ["component1", "component2"],
  "likelyRootCause": "Analysis of probable cause",
  "confidence": 0.85,
  "blastRadius": {
    "users": "estimated affected users",
    "services": ["downstream services"],
    "severity": "critical|high|medium|low"
  },
  "keyLogEntries": ["relevant log line 1", "relevant log line 2"],
  "metrics": {
    "errorRate": "current error rate",
    "latency": "current latency"
  },
  "hypothesis": ["Hypothesis 1", "Hypothesis 2"],
  "immediateActions": ["Action 1", "Action 2"]
}`,tools:[],sub_agents:[],position:{x:300,y:200}},incident_summarizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are creating an incident summary for the on-call team.

Analysis:
{{analysis}}

Similar Past Incidents:
{{pastIncidents}}

Create a clear, actionable incident summary that:
1. Describes the issue in plain language
2. Shows impact and severity
3. References similar past incidents and their resolutions
4. Provides recommended next steps

Output as JSON:
{
  "title": "Incident title",
  "summary": "2-3 sentence summary",
  "severity": "SEV1|SEV2|SEV3|SEV4",
  "impact": {
    "description": "User-facing impact",
    "affectedUsers": "estimate",
    "affectedRegions": ["region1"]
  },
  "timeline": [
    {"time": "timestamp", "event": "What happened"}
  ],
  "similarIncidents": [
    {"id": "INC-123", "similarity": 0.85, "resolution": "How it was fixed"}
  ],
  "recommendedActions": [
    {"action": "What to do", "priority": "immediate|soon|later", "owner": "team"}
  ],
  "escalationPath": ["Team 1", "Team 2"],
  "slackMessage": "Formatted message for Slack"
}`,tools:[],sub_agents:[],position:{x:600,y:200}},runbook_generator:{type:"llm",model:"gemini-2.0-flash",instruction:`You are generating a runbook for incident responders.

Incident Summary:
{{incidentSummary}}

Analysis:
{{analysis}}

Past Incident Resolutions:
{{pastResolutions}}

Create a step-by-step runbook that:
1. Starts with immediate triage steps
2. Includes diagnostic commands
3. Provides mitigation options
4. Lists rollback procedures if applicable
5. Includes escalation criteria

Output as JSON:
{
  "title": "Runbook: {{incidentSummary.title}}",
  "lastUpdated": "timestamp",
  "sections": [
    {
      "name": "Immediate Triage",
      "steps": [
        {"step": 1, "action": "What to do", "command": "command if applicable", "expectedResult": "What you should see"}
      ]
    },
    {
      "name": "Diagnosis",
      "steps": [...]
    },
    {
      "name": "Mitigation",
      "steps": [...]
    },
    {
      "name": "Rollback",
      "steps": [...]
    }
  ],
  "escalationCriteria": ["When to escalate"],
  "usefulLinks": [{"name": "Dashboard", "url": "..."}],
  "contacts": [{"team": "Team name", "slack": "#channel"}]
}`,tools:[],sub_agents:[],position:{x:800,y:200}}},actionNodes:{alert_webhook:{type:"trigger",id:"alert_webhook",name:"Alert Webhook",description:"Receive alerts from monitoring",triggerType:"webhook",webhook:{path:"/api/webhook/alerts",method:"POST",auth:"api_key",authConfig:{headerName:"X-Alert-Key",tokenEnvVar:"ALERT_WEBHOOK_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"alert"}},fetch_logs:{type:"http",id:"fetch_logs",name:"Fetch Recent Logs",description:"Get logs around alert time",method:"POST",url:"https://api.datadoghq.com/api/v2/logs/events/search",auth:{type:"api_key",apiKey:{headerName:"DD-API-KEY",value:"{{DATADOG_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "filter": {
    "query": "service:{{alert.service}} status:error",
    "from": "{{alert.timestamp - 300000}}",
    "to": "{{alert.timestamp}}"
  },
  "sort": "timestamp",
  "page": {"limit": 100}
}`},response:{type:"json",jsonPath:"$.data"},errorHandling:{mode:"fallback",fallbackValue:[]},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"logs"}},search_past_incidents:{type:"http",id:"search_past_incidents",name:"Search Past Incidents",description:"Find similar historical incidents",method:"POST",url:"https://{{PINECONE_INDEX}}-xxx.svc.pinecone.io/query",auth:{type:"api_key",apiKey:{headerName:"Api-Key",value:"{{PINECONE_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "vector": "{{analysisEmbedding}}",
  "topK": 5,
  "includeMetadata": true,
  "filter": {
    "service": {"$eq": "{{alert.service}}"}
  }
}`},response:{type:"json",jsonPath:"$.matches"},errorHandling:{mode:"fallback",fallbackValue:[]},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"pastIncidents"}},route_severity:{type:"switch",id:"route_severity",name:"Route by Severity",description:"Route based on incident severity",evaluationMode:"first_match",conditions:[{id:"sev1",name:"SEV1 - Critical",field:"incidentSummary.severity",operator:"eq",value:"SEV1",outputPort:"critical"},{id:"sev2",name:"SEV2 - High",field:"incidentSummary.severity",operator:"eq",value:"SEV2",outputPort:"high"}],defaultBranch:"normal",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"severityRoute"}},page_oncall:{type:"http",id:"page_oncall",name:"Page On-Call",description:"Create PagerDuty incident",method:"POST",url:"https://api.pagerduty.com/incidents",auth:{type:"bearer",bearer:{token:"{{PAGERDUTY_API_KEY}}"}},headers:{"Content-Type":"application/json",From:"incident-bot@company.com"},body:{type:"json",content:`{
  "incident": {
    "type": "incident",
    "title": "{{incidentSummary.title}}",
    "service": {
      "id": "{{PAGERDUTY_SERVICE_ID}}",
      "type": "service_reference"
    },
    "urgency": "{{incidentSummary.severity === 'SEV1' ? 'high' : 'low'}}",
    "body": {
      "type": "incident_body",
      "details": "{{incidentSummary.summary}}\\n\\nImpact: {{incidentSummary.impact.description}}\\n\\nRecommended Actions:\\n{{incidentSummary.recommendedActions.map(a => '- ' + a.action).join('\\n')}}"
    }
  }
}`},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"pagerdutyIncident"}},notify_slack:{type:"notification",id:"notify_slack",name:"Notify Incident Channel",description:"Post to Slack incident channel",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:"{{incidentSummary.slackMessage}}",format:"markdown",blocks:[{type:"header",text:{type:"plain_text",text:" {{incidentSummary.title}}"}},{type:"section",text:{type:"mrkdwn",text:`*Severity:* {{incidentSummary.severity}}
*Impact:* {{incidentSummary.impact.description}}`}}]},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"slackNotification"}},save_incident:{type:"database",id:"save_incident",name:"Save Incident Record",description:"Store incident for future reference",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:`INSERT INTO incidents (
          title, severity, service, summary, analysis,
          runbook, pagerduty_id, created_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, NOW())
        RETURNING id`,params:{$1:"{{incidentSummary.title}}",$2:"{{incidentSummary.severity}}",$3:"{{alert.service}}",$4:"{{incidentSummary}}",$5:"{{analysis}}",$6:"{{runbook}}",$7:"{{pagerdutyIncident.incident.id}}"}},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"savedIncident"}}},edges:[{from:"START",to:"alert_webhook"},{from:"alert_webhook",to:"fetch_logs"},{from:"fetch_logs",to:"log_analyzer"},{from:"log_analyzer",to:"search_past_incidents"},{from:"search_past_incidents",to:"incident_summarizer"},{from:"incident_summarizer",to:"route_severity"},{from:"route_severity",to:"page_oncall",fromPort:"critical"},{from:"route_severity",to:"page_oncall",fromPort:"high"},{from:"route_severity",to:"notify_slack",fromPort:"normal"},{from:"page_oncall",to:"runbook_generator"},{from:"runbook_generator",to:"notify_slack"},{from:"notify_slack",to:"save_incident"},{from:"save_incident",to:"END"}]},W5={id:"ai_code_review",name:"AI Code Review & QA",icon:"",description:"Automated PR review with security scanning and test suggestions",category:"automation",requiredNodeTypes:["trigger","http","notification"],envVars:[{name:"GITHUB_TOKEN",description:"GitHub personal access token",required:!0},{name:"SLACK_WEBHOOK_URL",description:"Slack webhook for notifications",required:!0}],useCase:"Automatically review pull requests when opened, analyze code quality and style, scan for security vulnerabilities, suggest missing tests, and post detailed review comments directly on the PR.",customizationTips:["Customize code style rules for your team","Add language-specific security checks","Integrate with your CI/CD pipeline","Adjust review strictness levels"],agents:{code_reviewer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a senior code reviewer. Analyze the pull request diff and provide constructive feedback.

PR Information:
- Title: {{pr.title}}
- Description: {{pr.body}}
- Author: {{pr.author}}
- Base branch: {{pr.base}}

Diff:
{{diff}}

Review for:
1. Code quality and readability
2. Logic errors or bugs
3. Performance issues
4. Code style consistency
5. Documentation completeness
6. Error handling
7. Edge cases

Output as JSON:
{
  "overallAssessment": "approve|request_changes|comment",
  "summary": "Brief summary of the review",
  "score": {
    "quality": 8,
    "readability": 7,
    "performance": 9,
    "documentation": 6
  },
  "comments": [
    {
      "file": "path/to/file.ts",
      "line": 42,
      "type": "suggestion|issue|praise",
      "severity": "critical|major|minor|info",
      "message": "Review comment",
      "suggestion": "Suggested code change if applicable"
    }
  ],
  "highlights": ["What's done well"],
  "concerns": ["Main concerns"],
  "questionsForAuthor": ["Clarifying questions"]
}`,tools:[],sub_agents:[],position:{x:400,y:150}},security_scanner:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a security expert. Scan the code changes for security vulnerabilities.

Diff:
{{diff}}

Language: {{pr.language}}

Check for:
1. SQL injection vulnerabilities
2. XSS vulnerabilities
3. Authentication/authorization issues
4. Sensitive data exposure
5. Insecure dependencies
6. Hardcoded secrets
7. Input validation issues
8. CSRF vulnerabilities
9. Insecure cryptography
10. Path traversal

Output as JSON:
{
  "securityScore": 85,
  "vulnerabilities": [
    {
      "type": "SQL_INJECTION",
      "severity": "critical|high|medium|low",
      "file": "path/to/file.ts",
      "line": 42,
      "description": "Description of the vulnerability",
      "recommendation": "How to fix it",
      "cweId": "CWE-89",
      "owaspCategory": "A03:2021"
    }
  ],
  "securityPractices": {
    "inputValidation": "pass|fail|partial",
    "authentication": "pass|fail|partial|na",
    "dataProtection": "pass|fail|partial"
  },
  "recommendations": ["General security recommendations"],
  "passedChecks": ["Checks that passed"]
}`,tools:[],sub_agents:[],position:{x:400,y:300}},test_suggester:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a QA engineer. Analyze the code changes and suggest tests that should be written.

Diff:
{{diff}}

Existing Tests:
{{existingTests}}

Code Review:
{{codeReview}}

Suggest:
1. Unit tests for new functions/methods
2. Integration tests for new features
3. Edge case tests
4. Error handling tests
5. Regression tests if fixing bugs

Output as JSON:
{
  "testCoverage": {
    "estimated": 75,
    "recommendation": "Target coverage recommendation"
  },
  "suggestedTests": [
    {
      "type": "unit|integration|e2e",
      "name": "test_function_name",
      "description": "What this test should verify",
      "file": "suggested/test/file.test.ts",
      "priority": "high|medium|low",
      "testCode": "// Suggested test implementation\\ndescribe('...', () => {\\n  it('should...', () => {\\n    // test code\\n  });\\n});"
    }
  ],
  "missingCoverage": [
    {"function": "functionName", "reason": "Why it needs tests"}
  ],
  "testingNotes": ["Additional testing recommendations"]
}`,tools:[],sub_agents:[],position:{x:400,y:450}}},actionNodes:{pr_webhook:{type:"trigger",id:"pr_webhook",name:"PR Webhook",description:"Receive PR events from GitHub",triggerType:"webhook",webhook:{path:"/api/webhook/github/pr",method:"POST",auth:"api_key",authConfig:{headerName:"X-Hub-Signature-256",tokenEnvVar:"GITHUB_WEBHOOK_SECRET"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"pr"}},fetch_diff:{type:"http",id:"fetch_diff",name:"Fetch PR Diff",description:"Get the PR diff from GitHub",method:"GET",url:"https://api.github.com/repos/{{pr.repository.full_name}}/pulls/{{pr.number}}",auth:{type:"bearer",bearer:{token:"{{GITHUB_TOKEN}}"}},headers:{Accept:"application/vnd.github.v3.diff","X-GitHub-Api-Version":"2022-11-28"},body:{type:"none"},response:{type:"text"},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"diff"}},fetch_existing_tests:{type:"http",id:"fetch_existing_tests",name:"Fetch Existing Tests",description:"Get list of test files in the repo",method:"GET",url:"https://api.github.com/repos/{{pr.repository.full_name}}/git/trees/{{pr.head.sha}}?recursive=1",auth:{type:"bearer",bearer:{token:"{{GITHUB_TOKEN}}"}},headers:{Accept:"application/vnd.github.v3+json","X-GitHub-Api-Version":"2022-11-28"},body:{type:"none"},response:{type:"json",jsonPath:"$.tree[?(@.path.match(/test|spec/))]"},errorHandling:{mode:"fallback",fallbackValue:[]},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"existingTests"}},post_review:{type:"http",id:"post_review",name:"Post Review Comments",description:"Submit review to GitHub",method:"POST",url:"https://api.github.com/repos/{{pr.repository.full_name}}/pulls/{{pr.number}}/reviews",auth:{type:"bearer",bearer:{token:"{{GITHUB_TOKEN}}"}},headers:{Accept:"application/vnd.github.v3+json","X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:{type:"json",content:'{"body": "##  AI Code Review\\n\\n{{codeReview.summary}}\\n\\n### Scores\\n- Quality: {{codeReview.score.quality}}/10\\n- Readability: {{codeReview.score.readability}}/10\\n- Performance: {{codeReview.score.performance}}/10\\n- Documentation: {{codeReview.score.documentation}}/10\\n\\n### Security\\n{{#if securityScan.vulnerabilities.length}} Found {{securityScan.vulnerabilities.length}} security issue(s){{else}} No security issues found{{/if}}\\n\\n### Test Suggestions\\n{{testSuggestions.suggestedTests.length}} test(s) suggested", "event": "{{codeReview.overallAssessment}}", "comments": []}'},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"reviewPosted"}},notify_team:{type:"notification",id:"notify_team",name:"Notify Team",description:"Send review summary to Slack",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:` *AI Code Review Complete*

*PR:* <{{pr.html_url}}|{{pr.title}}>
*Author:* {{pr.author}}
*Verdict:* {{codeReview.overallAssessment}}

*Quality Score:* {{codeReview.score.quality}}/10
*Security Score:* {{securityScan.securityScore}}/100

{{#if securityScan.vulnerabilities.length}} *Security Issues:* {{securityScan.vulnerabilities.length}}{{/if}}
{{#if testSuggestions.suggestedTests.length}} *Suggested Tests:* {{testSuggestions.suggestedTests.length}}{{/if}}`,format:"markdown"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"slackNotification"}}},edges:[{from:"START",to:"pr_webhook"},{from:"pr_webhook",to:"fetch_diff"},{from:"fetch_diff",to:"fetch_existing_tests"},{from:"fetch_existing_tests",to:"code_reviewer"},{from:"code_reviewer",to:"security_scanner"},{from:"security_scanner",to:"test_suggester"},{from:"test_suggester",to:"post_review"},{from:"post_review",to:"notify_team"},{from:"notify_team",to:"END"}]},K5={id:"ai_customer_onboarding",name:"AI Customer Onboarding Journey",icon:"",description:"Adaptive onboarding with AI personalization and engagement tracking",category:"automation",requiredNodeTypes:["trigger","database","loop","email","wait","switch"],envVars:[{name:"DATABASE_URL",description:"Customer database connection",required:!0},{name:"SMTP_HOST",description:"SMTP server",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0},{name:"ANALYTICS_API_KEY",description:"Analytics API key for engagement tracking",required:!1}],useCase:"When a new customer signs up, predict their needs based on their profile, create a personalized onboarding sequence, send adaptive emails, monitor engagement, and trigger interventions for at-risk customers.",customizationTips:["Customize the onboarding email sequence for your product","Adjust engagement thresholds based on your metrics","Add product-specific milestones to track","Integrate with your product analytics"],agents:{needs_predictor:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a customer success expert. Analyze the new customer's profile and predict their needs.

Customer Profile:
{{customer}}

Signup Source:
{{signupSource}}

Analyze:
1. What are their likely goals with our product?
2. What features will they need most?
3. What challenges might they face?
4. What's their technical sophistication level?
5. What onboarding path suits them best?

Output as JSON:
{
  "predictedGoals": ["goal1", "goal2"],
  "recommendedFeatures": ["feature1", "feature2"],
  "anticipatedChallenges": ["challenge1"],
  "technicalLevel": "beginner|intermediate|advanced",
  "onboardingPath": "quick_start|guided|self_serve",
  "priorityMilestones": [
    {"milestone": "First project created", "targetDays": 1},
    {"milestone": "Team member invited", "targetDays": 3}
  ],
  "personalizationNotes": "Key things to emphasize",
  "riskFactors": ["Potential churn indicators"],
  "successPrediction": {
    "score": 75,
    "factors": ["positive factor 1", "concern 1"]
  }
}`,tools:[],sub_agents:[],position:{x:300,y:150}},email_personalizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are an onboarding email specialist. Personalize the email for this customer.

Customer:
{{customer}}

Predicted Needs:
{{predictedNeeds}}

Email Template:
{{emailTemplate}}

Current Step: {{currentStep}} of {{totalSteps}}

Customer Progress:
{{customerProgress}}

Personalize the email to:
1. Address them by name
2. Reference their specific goals
3. Highlight relevant features
4. Provide actionable next steps
5. Match their technical level

Output as JSON:
{
  "subject": "Personalized subject line",
  "preheader": "Email preview text",
  "greeting": "Personalized greeting",
  "body": "Main email content (HTML)",
  "cta": {
    "text": "Button text",
    "url": "https://...",
    "trackingParams": "utm_source=onboarding&utm_campaign=step{{currentStep}}"
  },
  "tips": ["Relevant tip based on their level"],
  "nextMilestone": "What they should do next",
  "supportLink": "Link to relevant help article"
}`,tools:[],sub_agents:[],position:{x:500,y:300}},intervention_creator:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a customer success manager. Create an intervention for an at-risk customer.

Customer:
{{customer}}

Engagement Data:
{{engagementData}}

Predicted Needs:
{{predictedNeeds}}

Risk Indicators:
{{riskIndicators}}

Create an intervention that:
1. Acknowledges their situation empathetically
2. Offers specific help based on their blockers
3. Provides easy next steps
4. Offers human support if needed

Output as JSON:
{
  "interventionType": "email|call|in_app",
  "urgency": "high|medium|low",
  "subject": "We're here to help",
  "message": "Personalized intervention message",
  "offeredHelp": [
    {"type": "1:1 call", "description": "Schedule a call with our team"},
    {"type": "tutorial", "description": "Relevant tutorial link"}
  ],
  "incentive": "Special offer if applicable",
  "escalateTo": "human support if needed",
  "followUpDays": 2
}`,tools:[],sub_agents:[],position:{x:700,y:450}}},actionNodes:{signup_webhook:{type:"trigger",id:"signup_webhook",name:"New Signup Webhook",description:"Receive new customer signups",triggerType:"webhook",webhook:{path:"/api/webhook/signups",method:"POST",auth:"api_key",authConfig:{headerName:"X-Signup-Key",tokenEnvVar:"SIGNUP_WEBHOOK_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"customer"}},create_profile:{type:"database",id:"create_profile",name:"Create Customer Profile",description:"Store customer with predicted needs",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:`INSERT INTO customer_profiles (
          customer_id, email, name, company, 
          predicted_needs, onboarding_path, 
          success_score, created_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, NOW())
        RETURNING id`,params:{$1:"{{customer.id}}",$2:"{{customer.email}}",$3:"{{customer.name}}",$4:"{{customer.company}}",$5:"{{predictedNeeds}}",$6:"{{predictedNeeds.onboardingPath}}",$7:"{{predictedNeeds.successPrediction.score}}"}},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"customerProfile"}},set_email_sequence:{type:"set",id:"set_email_sequence",name:"Set Email Sequence",description:"Configure onboarding email sequence",mode:"set",variables:[{key:"emailSequence",value:[{step:1,delay:0,template:"welcome",subject:"Welcome to {{productName}}!"},{step:2,delay:1,template:"getting_started",subject:"Get started in 5 minutes"},{step:3,delay:3,template:"first_milestone",subject:"Ready for your first {{milestone}}?"},{step:4,delay:7,template:"tips_tricks",subject:"Pro tips from power users"},{step:5,delay:14,template:"check_in",subject:"How's it going, {{firstName}}?"}],valueType:"json",isSecret:!1},{key:"productName",value:"Your Product",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"sequenceConfig"}},process_sequence:{type:"loop",id:"process_sequence",name:"Process Email Sequence",description:"Send each onboarding email",loopType:"forEach",forEach:{sourceArray:"emailSequence",itemVar:"emailTemplate",indexVar:"stepIdx"},parallel:{enabled:!1},results:{collect:!0,aggregationKey:"emailResults"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:18e5},mapping:{outputKey:"loopResults"}},send_onboarding_email:{type:"email",id:"send_onboarding_email",name:"Send Onboarding Email",description:"Send personalized onboarding email",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"onboarding@company.com",fromName:"Your Product Team"},recipients:{to:"{{customer.email}}"},content:{subject:"{{personalizedEmail.subject}}",bodyType:"html",body:`<!DOCTYPE html>
<html>
<body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
  <p>{{personalizedEmail.greeting}}</p>
  <div>{{personalizedEmail.body}}</div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{personalizedEmail.cta.url}}?{{personalizedEmail.cta.trackingParams}}" 
       style="background: #0066cc; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px;">
      {{personalizedEmail.cta.text}}
    </a>
  </p>
  {{#if personalizedEmail.tips}}
  <div style="background: #f5f5f5; padding: 15px; border-radius: 4px; margin: 20px 0;">
    <strong> Tip:</strong> {{personalizedEmail.tips[0]}}
  </div>
  {{/if}}
  <p style="color: #666; font-size: 14px;">
    Need help? <a href="{{personalizedEmail.supportLink}}">Check our guides</a> or reply to this email.
  </p>
</body>
</html>`},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emailSent"}},wait_for_engagement:{type:"wait",id:"wait_for_engagement",name:"Wait for Engagement",description:"Wait before checking engagement",waitType:"fixed",fixed:{duration:24,unit:"h"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:9e7},mapping:{outputKey:"waitComplete"}},check_engagement:{type:"database",id:"check_engagement",name:"Check Engagement",description:"Get customer engagement metrics",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT 
          cp.*,
          COUNT(DISTINCT e.id) as email_opens,
          COUNT(DISTINCT c.id) as clicks,
          COUNT(DISTINCT l.id) as logins,
          COUNT(DISTINCT a.id) as actions_taken,
          MAX(l.created_at) as last_login
        FROM customer_profiles cp
        LEFT JOIN email_events e ON e.customer_id = cp.customer_id AND e.event = 'open'
        LEFT JOIN email_events c ON c.customer_id = cp.customer_id AND c.event = 'click'
        LEFT JOIN user_logins l ON l.customer_id = cp.customer_id
        LEFT JOIN user_actions a ON a.customer_id = cp.customer_id
        WHERE cp.customer_id = $1
        GROUP BY cp.id`,params:{$1:"{{customer.id}}"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"engagementData"}},route_engagement:{type:"switch",id:"route_engagement",name:"Route by Engagement",description:"Route based on engagement level",evaluationMode:"first_match",conditions:[{id:"highly_engaged",name:"Highly Engaged",field:"engagementData.logins",operator:"gte",value:5,outputPort:"engaged"},{id:"some_engagement",name:"Some Engagement",field:"engagementData.logins",operator:"gte",value:2,outputPort:"moderate"}],defaultBranch:"at_risk",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"engagementRoute"}},send_intervention:{type:"email",id:"send_intervention",name:"Send Intervention",description:"Send intervention email to at-risk customer",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"success@company.com",fromName:"Customer Success"},recipients:{to:"{{customer.email}}"},content:{subject:"{{intervention.subject}}",bodyType:"html",body:`<p>Hi {{customer.firstName}},</p><p>{{intervention.message}}</p><h4>We can help:</h4><ul>{{#each intervention.offeredHelp}}<li><strong>{{help.type}}:</strong> {{help.description}}</li>{{/each}}</ul>{{#if intervention.incentive}}<p style="background: #e8f5e9; padding: 15px; border-radius: 4px;"> <strong>Special offer:</strong> {{intervention.incentive}}</p>{{/if}}<p>Just reply to this email or <a href="https://calendly.com/success-team">book a call</a>.</p><p>We're here to help you succeed!</p>`},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"interventionSent"}},update_status:{type:"database",id:"update_status",name:"Update Onboarding Status",description:"Update customer onboarding progress",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"update",query:`UPDATE customer_profiles SET 
          onboarding_status = $2,
          engagement_score = $3,
          last_email_step = $4,
          intervention_sent = $5,
          updated_at = NOW()
        WHERE customer_id = $1`,params:{$1:"{{customer.id}}",$2:"{{engagementRoute}}",$3:"{{engagementData.logins + engagementData.actions_taken}}",$4:"{{stepIdx}}",$5:'{{engagementRoute === "at_risk"}}'}},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"statusUpdated"}}},edges:[{from:"START",to:"signup_webhook"},{from:"signup_webhook",to:"needs_predictor"},{from:"needs_predictor",to:"create_profile"},{from:"create_profile",to:"set_email_sequence"},{from:"set_email_sequence",to:"process_sequence"},{from:"process_sequence",to:"email_personalizer"},{from:"email_personalizer",to:"send_onboarding_email"},{from:"send_onboarding_email",to:"wait_for_engagement"},{from:"wait_for_engagement",to:"check_engagement"},{from:"check_engagement",to:"route_engagement"},{from:"route_engagement",to:"update_status",fromPort:"engaged"},{from:"route_engagement",to:"update_status",fromPort:"moderate"},{from:"route_engagement",to:"intervention_creator",fromPort:"at_risk"},{from:"intervention_creator",to:"send_intervention"},{from:"send_intervention",to:"update_status"},{from:"update_status",to:"END"}]},G5=[D5,L5,q5,F5,z5,B5,$5,H5,V5,U5,W5,K5],C_=[{id:"simple_chat",name:"Simple Chat Agent",icon:"",description:"A basic conversational agent for general Q&A",category:"basic",agents:{chat_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a helpful, friendly assistant. Answer questions clearly and concisely. Be conversational but informative.",tools:[],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"chat_agent"},{from:"chat_agent",to:"END"}]},{id:"research_pipeline",name:"Research Pipeline",icon:"",description:"Sequential workflow: Researcher  Summarizer",category:"basic",agents:{researcher:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a research specialist. Given a topic, search for comprehensive information using Google Search. Gather key facts, statistics, recent developments, and expert opinions. Present your findings in a structured format.",tools:["google_search"],sub_agents:[],position:{x:0,y:0}},summarizer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are an expert summarizer. Take the research findings and create a clear, concise summary with: 1) Key takeaways (3-5 bullet points), 2) Main findings, 3) Conclusions. Make it easy to understand for a general audience.",tools:[],sub_agents:[],position:{x:0,y:0}},research_pipeline:{type:"sequential",instruction:"",tools:[],sub_agents:["researcher","summarizer"],position:{x:250,y:150}}},edges:[{from:"START",to:"research_pipeline"},{from:"research_pipeline",to:"END"}]},{id:"content_refiner",name:"Content Refiner",icon:"",description:"Loop agent that iteratively improves content quality",category:"advanced",agents:{improver:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a content editor. Review the text and improve it by: fixing grammar and spelling errors, enhancing clarity and flow, improving word choice, and strengthening the overall structure. Output the improved version.",tools:[],sub_agents:[],position:{x:0,y:0}},reviewer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a quality reviewer. Evaluate the content for: clarity, grammar, flow, and completeness. If the content is polished and ready (score 8/10 or higher), call exit_loop. Otherwise, briefly note what still needs improvement and let the improver continue.",tools:["exit_loop"],sub_agents:[],position:{x:0,y:0}},content_refiner:{type:"loop",instruction:"",tools:[],sub_agents:["improver","reviewer"],position:{x:250,y:150},max_iterations:3}},edges:[{from:"START",to:"content_refiner"},{from:"content_refiner",to:"END"}]},{id:"parallel_analyzer",name:"Parallel Analyzer",icon:"",description:"Run multiple analyses concurrently for speed",category:"advanced",agents:{sentiment_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:"Analyze the sentiment of the provided text. Identify: 1) Overall sentiment (positive/negative/neutral with confidence %), 2) Emotional tones present (joy, anger, sadness, etc.), 3) Key phrases that indicate sentiment. Format as a brief report.",tools:[],sub_agents:[],position:{x:0,y:0}},entity_extractor:{type:"llm",model:"gemini-2.0-flash",instruction:"Extract key entities from the text. Identify and categorize: 1) People (names, roles), 2) Organizations (companies, institutions), 3) Locations (cities, countries), 4) Dates and times, 5) Key topics/concepts. Format as a structured list.",tools:[],sub_agents:[],position:{x:0,y:0}},parallel_analyzer:{type:"parallel",instruction:"",tools:[],sub_agents:["sentiment_analyzer","entity_extractor"],position:{x:250,y:150}}},edges:[{from:"START",to:"parallel_analyzer"},{from:"parallel_analyzer",to:"END"}]},{id:"support_router",name:"Support Router",icon:"",description:"Route requests to specialized support agents",category:"advanced",agents:{router:{type:"router",model:"gemini-2.0-flash",instruction:'Classify the user request into one category: "technical" for coding, bugs, API issues, or technical problems; "billing" for payments, subscriptions, refunds, or account charges; "general" for all other questions. Respond with just the category word.',tools:[],sub_agents:[],position:{x:250,y:100},routes:[{condition:"technical",target:"tech_support"},{condition:"billing",target:"billing_support"},{condition:"general",target:"general_support"}]},tech_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a senior technical support engineer. Help users with coding issues, bugs, API problems, and technical troubleshooting. Ask clarifying questions if needed. Provide code examples when helpful. Be patient and thorough.",tools:[],sub_agents:[],position:{x:100,y:350}},billing_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a billing specialist. Help users with payment issues, subscription questions, refund requests, and account billing inquiries. Be empathetic and solution-oriented. Explain charges clearly.",tools:[],sub_agents:[],position:{x:250,y:350}},general_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a friendly general support agent. Help users with general questions, product information, feature requests, and any inquiries that don't fit technical or billing categories. Be helpful and personable.",tools:[],sub_agents:[],position:{x:400,y:350}}},edges:[{from:"START",to:"router"},{from:"router",to:"tech_support"},{from:"router",to:"billing_support"},{from:"router",to:"general_support"},{from:"tech_support",to:"END"},{from:"billing_support",to:"END"},{from:"general_support",to:"END"}]},{id:"web_researcher",name:"Web Researcher",icon:"",description:"Agent with browser capabilities for web research",category:"tools",agents:{web_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a web research assistant with browser capabilities. When asked a question: 1) Navigate to relevant websites to find accurate, up-to-date information, 2) Read and extract key content from pages, 3) Synthesize findings into a clear answer with sources. Always cite your sources.",tools:["browser"],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"web_agent"},{from:"web_agent",to:"END"}]},{id:"code_assistant",name:"Code Assistant",icon:"",description:"Programming assistant with code execution tools",category:"tools",agents:{code_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are an expert programming assistant. Help users with: 1) Writing clean, efficient code, 2) Debugging issues, 3) Explaining concepts, 4) Code reviews. Use the code execution tool to test and validate code when helpful. Support multiple languages including Python, JavaScript, Rust, and more.",tools:["code_execution"],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"code_agent"},{from:"code_agent",to:"END"}]},{id:"data_analyst",name:"Data Analyst",icon:"",description:"Analyze data with search and computation tools",category:"tools",agents:{analyst:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a data analyst. Help users understand and analyze data by: 1) Searching for relevant datasets and statistics, 2) Performing calculations and analysis, 3) Creating clear visualizations and summaries, 4) Providing actionable insights. Use available tools to gather and process data.",tools:["google_search","code_execution"],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"analyst"},{from:"analyst",to:"END"}]},{id:"writing_team",name:"Writing Team",icon:"",description:"Collaborative team: Writer  Editor  Fact-Checker",category:"teams",agents:{writer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a creative writer. Given a topic, write engaging, well-structured content. Focus on clarity, flow, and reader engagement. Include relevant examples and explanations.",tools:[],sub_agents:[],position:{x:0,y:0}},editor:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a professional editor. Review the content for: grammar, style, clarity, and structure. Make improvements while preserving the author's voice. Suggest changes and explain your reasoning.",tools:[],sub_agents:[],position:{x:0,y:0}},fact_checker:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a fact-checker. Verify all claims, statistics, and facts in the content. Use search to confirm accuracy. Flag any questionable statements and provide corrections with sources.",tools:["google_search"],sub_agents:[],position:{x:0,y:0}},writing_team:{type:"sequential",instruction:"",tools:[],sub_agents:["writer","editor","fact_checker"],position:{x:250,y:150}}},edges:[{from:"START",to:"writing_team"},{from:"writing_team",to:"END"}]},{id:"eval_loop",name:"Evaluation Loop",icon:"",description:"Generate and evaluate responses iteratively",category:"teams",agents:{generator:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a response generator. Create high-quality, comprehensive responses to user queries. Consider multiple perspectives and provide thorough explanations.",tools:[],sub_agents:[],position:{x:0,y:0}},evaluator:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a response evaluator. Score the response on: accuracy (1-10), completeness (1-10), clarity (1-10). If average score >= 8, call exit_loop. Otherwise, provide specific feedback for improvement.",tools:["exit_loop"],sub_agents:[],position:{x:0,y:0}},eval_loop:{type:"loop",instruction:"",tools:[],sub_agents:["generator","evaluator"],position:{x:250,y:150},max_iterations:3}},edges:[{from:"START",to:"eval_loop"},{from:"eval_loop",to:"END"}]},{id:"voice_assistant",name:"Voice Assistant",icon:"",description:"Real-time voice-enabled conversational agent",category:"realtime",agents:{voice_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a voice assistant. Respond naturally and conversationally. Keep responses concise (1-2 sentences when possible) for smooth voice interaction. Be helpful, friendly, and responsive.",tools:[],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"voice_agent"},{from:"voice_agent",to:"END"}]},{id:"realtime_translator",name:"Realtime Translator",icon:"",description:"Live translation agent for multilingual conversations",category:"realtime",agents:{translator:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a real-time translator. Detect the input language and translate to the target language (default: English). Preserve tone, context, and nuance. For voice input, respond quickly with natural translations.",tools:[],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"translator"},{from:"translator",to:"END"}]},{id:"email_sentiment_analysis",name:"Email Sentiment Analysis",icon:"",description:"Analyze email sentiment and update spreadsheet with results",category:"automation",requiredNodeTypes:["trigger","http","transform","loop","switch","set","merge"],envVars:[{name:"GMAIL_TOKEN",description:"Gmail API OAuth token",required:!0,example:"ya29.xxx"},{name:"SHEET_ID",description:"Google Sheets spreadsheet ID",required:!0,example:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"},{name:"SHEETS_TOKEN",description:"Google Sheets API OAuth token",required:!0,example:"ya29.xxx"}],useCase:"Automatically analyze incoming emails for sentiment, categorize them by urgency, and log results to a Google Sheet for tracking and reporting.",customizationTips:["Adjust the cron schedule to match your email checking frequency","Modify sentiment thresholds in the Switch node for your use case","Add additional categories beyond positive/neutral/negative"],agents:{sentiment_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a sentiment analysis expert. Analyze the email content provided and determine:
1. Overall sentiment: positive, negative, or neutral
2. Sentiment score: a number from -1.0 (very negative) to 1.0 (very positive)
3. Key phrases that indicate the sentiment
4. Urgency level: low, medium, or high

Output your analysis as JSON:
{
  "sentiment": "positive|negative|neutral",
  "score": 0.75,
  "keyPhrases": ["phrase1", "phrase2"],
  "urgency": "low|medium|high",
  "summary": "Brief summary of the email"
}`,tools:[],sub_agents:[],position:{x:400,y:300}}},actionNodes:{trigger_schedule:{type:"trigger",id:"trigger_schedule",name:"Daily Email Check",description:"Trigger workflow daily at 9 AM",triggerType:"schedule",schedule:{cron:"0 9 * * *",timezone:"America/New_York"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"triggerData"}},fetch_emails:{type:"http",id:"fetch_emails",name:"Fetch Unread Emails",description:"Fetch unread emails from Gmail API",method:"GET",url:"https://gmail.googleapis.com/gmail/v1/users/me/messages?q=is:unread",auth:{type:"bearer",bearer:{token:"{{GMAIL_TOKEN}}"}},headers:{},body:{type:"none"},response:{type:"json",jsonPath:"$.messages"},errorHandling:{mode:"retry",retryCount:3,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emails"}},parse_emails:{type:"transform",id:"parse_emails",name:"Parse Email Data",description:"Extract email content for analysis",transformType:"javascript",expression:`return input.emails.map(email => ({
  id: email.id,
  subject: email.payload?.headers?.find(h => h.name === 'Subject')?.value || 'No Subject',
  from: email.payload?.headers?.find(h => h.name === 'From')?.value || 'Unknown',
  body: email.snippet || ''
}));`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{emails:"emails"},outputKey:"parsedEmails"}},process_loop:{type:"loop",id:"process_loop",name:"Process Each Email",description:"Iterate through emails for sentiment analysis",loopType:"forEach",forEach:{sourceArray:"parsedEmails",itemVar:"email",indexVar:"idx"},parallel:{enabled:!0,batchSize:5},results:{collect:!0,aggregationKey:"analysisResults"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:12e4},mapping:{outputKey:"loopResults"}},route_sentiment:{type:"switch",id:"route_sentiment",name:"Route by Sentiment",description:"Route emails based on sentiment score",evaluationMode:"first_match",conditions:[{id:"positive",name:"Positive",field:"sentiment.score",operator:"gt",value:.3,outputPort:"positive"},{id:"negative",name:"Negative",field:"sentiment.score",operator:"lt",value:-.3,outputPort:"negative"}],defaultBranch:"neutral",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"routeResult"}},set_positive:{type:"set",id:"set_positive",name:"Set Positive Category",description:"Mark email as positive sentiment",mode:"set",variables:[{key:"category",value:"Positive",valueType:"string",isSecret:!1},{key:"color",value:"#22C55E",valueType:"string",isSecret:!1},{key:"priority",value:"low",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"categoryData"}},set_neutral:{type:"set",id:"set_neutral",name:"Set Neutral Category",description:"Mark email as neutral sentiment",mode:"set",variables:[{key:"category",value:"Neutral",valueType:"string",isSecret:!1},{key:"color",value:"#6B7280",valueType:"string",isSecret:!1},{key:"priority",value:"medium",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"categoryData"}},set_negative:{type:"set",id:"set_negative",name:"Set Negative Category",description:"Mark email as negative sentiment - requires attention",mode:"set",variables:[{key:"category",value:"Negative",valueType:"string",isSecret:!1},{key:"color",value:"#EF4444",valueType:"string",isSecret:!1},{key:"priority",value:"high",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"categoryData"}},merge_results:{type:"merge",id:"merge_results",name:"Merge All Results",description:"Combine results from all sentiment branches",mode:"wait_all",combineStrategy:"array",timeout:{enabled:!0,ms:3e4,behavior:"continue"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:35e3},mapping:{outputKey:"mergedResults"}},update_sheet:{type:"http",id:"update_sheet",name:"Update Google Sheet",description:"Append analysis results to spreadsheet",method:"POST",url:"https://sheets.googleapis.com/v4/spreadsheets/{{SHEET_ID}}/values/A1:append?valueInputOption=USER_ENTERED",auth:{type:"bearer",bearer:{token:"{{SHEETS_TOKEN}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:'{"values": {{mergedResults}}}'},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"sheetResponse"}}},edges:[{from:"START",to:"trigger_schedule"},{from:"trigger_schedule",to:"fetch_emails"},{from:"fetch_emails",to:"parse_emails"},{from:"parse_emails",to:"process_loop"},{from:"process_loop",to:"sentiment_analyzer"},{from:"sentiment_analyzer",to:"route_sentiment"},{from:"route_sentiment",to:"set_positive",fromPort:"positive"},{from:"route_sentiment",to:"set_neutral",fromPort:"neutral"},{from:"route_sentiment",to:"set_negative",fromPort:"negative"},{from:"set_positive",to:"merge_results"},{from:"set_neutral",to:"merge_results"},{from:"set_negative",to:"merge_results"},{from:"merge_results",to:"update_sheet"},{from:"update_sheet",to:"END"}]},{id:"api_data_pipeline",name:"API Data Pipeline",icon:"",description:"Fetch, transform, and store data from external APIs",category:"automation",requiredNodeTypes:["trigger","http","transform","database"],envVars:[{name:"WEBHOOK_API_KEY",description:"API key for webhook authentication",required:!0,example:"sk-xxx"},{name:"DATABASE_URL",description:"PostgreSQL connection string",required:!0,example:"postgresql://user:pass@host:5432/db"}],useCase:"Create a webhook endpoint that receives data, fetches additional information from external APIs, transforms it, and stores it in a PostgreSQL database.",customizationTips:["Modify the transform expression to match your data structure","Add additional HTTP nodes for multiple API calls","Change the database type to MySQL or MongoDB if needed"],agents:{},actionNodes:{trigger_webhook:{type:"trigger",id:"trigger_webhook",name:"Webhook Trigger",description:"Receive incoming webhook requests",triggerType:"webhook",webhook:{path:"/api/webhook/data-pipeline",method:"POST",auth:"api_key",authConfig:{headerName:"X-API-Key",tokenEnvVar:"WEBHOOK_API_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"webhookData"}},fetch_data:{type:"http",id:"fetch_data",name:"Fetch External Data",description:"Retrieve data from external API",method:"GET",url:"{{webhookData.apiUrl}}",auth:{type:"none"},headers:{Accept:"application/json"},body:{type:"none"},response:{type:"json"},errorHandling:{mode:"retry",retryCount:3,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"rawData"}},transform_data:{type:"transform",id:"transform_data",name:"Transform Data",description:"Clean and transform the fetched data",transformType:"javascript",expression:`const data = input.rawData;
return {
  processed: true,
  timestamp: new Date().toISOString(),
  records: Array.isArray(data) ? data.length : 1,
  data: data
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{rawData:"rawData"},outputKey:"transformedData"}},store_database:{type:"database",id:"store_database",name:"Store in Database",description:"Save transformed data to PostgreSQL",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:"INSERT INTO pipeline_data (payload, processed_at) VALUES ($1, $2)",params:{$1:"{{transformedData}}",$2:"{{transformedData.timestamp}}"}},errorHandling:{mode:"retry",retryCount:2,retryDelay:500},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"dbResult"}}},edges:[{from:"START",to:"trigger_webhook"},{from:"trigger_webhook",to:"fetch_data"},{from:"fetch_data",to:"transform_data"},{from:"transform_data",to:"store_database"},{from:"store_database",to:"END"}]},...G5];function Y5(){return["basic","advanced","tools","teams","realtime","automation"]}const av={all:"All Templates",basic:"Basic",advanced:"Advanced",tools:"Tool-Heavy",teams:"Agent Teams",realtime:"Realtime",automation:"Automation"},Q5={trigger:"",http:"",set:"",transform:"",switch:"",loop:"",merge:"",wait:"",code:"",database:"",email:"",notification:"",rss:"",file:""};function X5({template:e,onSelect:t,onRun:n}){const r=Object.keys(e.agents).length,o=e.actionNodes?Object.keys(e.actionNodes).length:0,a=e.edges.length,l=e.actionNodes?[...new Set(Object.values(e.actionNodes).map(u=>u.type))]:[];return s.jsxs("div",{className:"template-card group cursor-pointer rounded-lg border p-4 transition-all hover:shadow-md",style:{backgroundColor:"var(--surface-card)",borderColor:"var(--border-default)"},onClick:t,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("span",{className:"text-3xl",children:e.icon}),s.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:av[e.category]})]}),s.jsx("h3",{className:"font-semibold mb-1",style:{color:"var(--text-primary)"},children:e.name}),s.jsx("p",{className:"text-sm mb-3 line-clamp-2",style:{color:"var(--text-secondary)"},children:e.description}),s.jsxs("div",{className:"flex items-center gap-3 text-xs mb-3",style:{color:"var(--text-muted)"},children:[s.jsxs("span",{children:[r," agent",r!==1?"s":""]}),o>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[o," action",o!==1?"s":""]})]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[a," connection",a!==1?"s":""]})]}),l.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",title:`Uses: ${l.join(", ")}`,children:[l.slice(0,6).map(u=>s.jsx("span",{className:"text-sm px-1.5 py-0.5 rounded",style:{backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},title:u,children:Q5[u]||""},u)),l.length>6&&s.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},children:["+",l.length-6]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"flex-1 px-3 py-2 rounded text-sm font-medium transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white"},onClick:u=>{u.stopPropagation(),t()},children:"Use Template"}),n&&s.jsx("button",{className:"p-2 rounded transition-colors",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},onClick:u=>{u.stopPropagation(),n()},title:"Run immediately",children:s.jsx(mA,{size:16})})]})]})}const J5={trigger:" Trigger",http:" HTTP",set:" Set",transform:" Transform",switch:" Switch",loop:" Loop",merge:" Merge",wait:" Wait",code:" Code",database:" Database",email:" Email",notification:" Notification",rss:" RSS",file:" File"};function Z5({onSelect:e,onRun:t,onClose:n,isModal:r=!1}){const[o,a]=j.useState("all"),[l,u]=j.useState(""),[d,p]=j.useState(new Set),[f,m]=j.useState(!1),g=j.useMemo(()=>{const S=new Set;return C_.forEach(N=>{N.actionNodes&&Object.values(N.actionNodes).forEach(T=>{S.add(T.type)})}),Array.from(S).sort()},[]),v=S=>{p(N=>{const T=new Set(N);return T.has(S)?T.delete(S):T.add(S),T})},b=()=>{p(new Set)},x=C_.filter(S=>{const N=o==="all"||S.category===o,T=l===""||S.name.toLowerCase().includes(l.toLowerCase())||S.description.toLowerCase().includes(l.toLowerCase());let A=!0;if(d.size>0)if(!S.actionNodes)A=!1;else{const C=new Set(Object.values(S.actionNodes).map(P=>P.type));A=Array.from(d).every(P=>C.has(P))}return N&&T&&A}),_=Y5(),k=s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Template Gallery"}),n&&s.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-opacity-10",style:{color:"var(--text-secondary)"},children:s.jsx(Uv,{size:20})})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)"},children:[s.jsx(T5,{size:16,style:{color:"var(--text-muted)"}}),s.jsx("input",{type:"text",placeholder:"Search templates...",value:l,onChange:S=>u(S.target.value),className:"flex-1 bg-transparent outline-none text-sm",style:{color:"var(--text-primary)"}})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>a("all"),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors",style:{backgroundColor:o==="all"?"var(--accent-primary)":"var(--bg-secondary)",color:o==="all"?"white":"var(--text-secondary)"},children:av.all}),_.map(S=>s.jsx("button",{onClick:()=>a(S),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors",style:{backgroundColor:o===S?"var(--accent-primary)":"var(--bg-secondary)",color:o===S?"white":"var(--text-secondary)"},children:av[S]},S)),s.jsxs("button",{onClick:()=>m(!f),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors flex items-center gap-1",style:{backgroundColor:d.size>0||f?"var(--accent-secondary)":"var(--bg-secondary)",color:d.size>0||f?"white":"var(--text-secondary)"},title:"Filter by action node types",children:[s.jsx(k5,{size:14}),d.size>0&&s.jsxs("span",{className:"ml-1",children:["(",d.size,")"]})]})]}),f&&s.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:"var(--bg-tertiary)",borderColor:"var(--border-default)"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:"Filter by Action Node Types"}),d.size>0&&s.jsx("button",{onClick:b,className:"text-xs px-2 py-0.5 rounded",style:{color:"var(--accent-primary)"},children:"Clear all"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:g.map(S=>s.jsx("button",{onClick:()=>v(S),className:"px-2 py-1 rounded text-xs font-medium transition-colors",style:{backgroundColor:d.has(S)?"var(--accent-primary)":"var(--bg-secondary)",color:d.has(S)?"white":"var(--text-secondary)"},children:J5[S]||S},S))})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:x.length===0?s.jsx("div",{className:"text-center py-8",style:{color:"var(--text-muted)"},children:s.jsx("p",{children:"No templates found matching your criteria."})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(S=>s.jsx(X5,{template:S,onSelect:()=>e(S),onRun:t?()=>t(S):void 0},S.id))})}),s.jsxs("div",{className:"p-3 border-t text-center text-sm",style:{borderColor:"var(--border-default)",color:"var(--text-muted)"},children:[x.length," template",x.length!==1?"s":""," available"]})]});return r?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n,children:s.jsx("div",{className:"w-full max-w-4xl max-h-[80vh] rounded-lg shadow-xl overflow-hidden",style:{backgroundColor:"var(--surface-panel)"},onClick:S=>S.stopPropagation(),children:k})}):s.jsx("div",{className:"h-full",style:{backgroundColor:"var(--surface-panel)"},children:k})}function eF({onExportCode:e,onNewProject:t,onTemplateApplied:n,onRunTemplate:r,buildStatus:o="none",onBuildStatusClick:a,debugMode:l=!1,onDebugModeToggle:u}){const[d,p]=j.useState(null),[f,m]=j.useState(!1),g=j.useRef(null),{currentProject:v,addAgent:b,removeAgent:x,addEdge:_,removeEdge:k}=De(),{mode:S}=Or(),{completed:N,show:T,reset:A}=cA(),{start:C}=uA(),P=S==="light";j.useEffect(()=>{const $=G=>{g.current&&!g.current.contains(G.target)&&p(null)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const O=$=>{v&&((v.workflow?.edges||[]).forEach(G=>k(G.from,G.to)),Object.keys(v.agents).forEach(G=>x(G)),Object.entries($.agents).forEach(([G,U])=>{b(G,U)}),$.edges.forEach(G=>_(G.from,G.to,G.fromPort,G.toPort)),n&&n(),p(null))},I=$=>{if(!v)return;(v.workflow?.edges||[]).forEach(R=>k(R.from,R.to)),Object.keys(v.agents).forEach(R=>x(R));const{removeActionNode:G,addActionNode:U}=De.getState();Object.keys(v.actionNodes||{}).forEach(R=>G(R));const X=Object.entries($.agents);X.forEach(([R,B],Y)=>{const F=B.position||{x:250+Y%3*300,y:150+Math.floor(Y/3)*200};b(R,{...B,position:F})}),$.actionNodes&&Object.entries($.actionNodes).forEach(([B,Y],F)=>{const K=X.length>0?400:150,J={x:100+F%4*250,y:K+Math.floor(F/4)*150};U(B,{...Y,position:J})}),$.edges.forEach(R=>_(R.from,R.to,R.fromPort,R.toPort)),m(!1),n&&n(),($.actionNodes||$.envVars||$.useCase)&&setTimeout(()=>{C($)},300)},H=$=>{I($),r&&setTimeout(()=>r(),200)},D=P?"hover:bg-gray-200":"hover:bg-gray-700",z=P?"bg-gray-200":"bg-gray-700",W=({name:$,children:G})=>s.jsxs("div",{className:"relative",children:[s.jsx("button",{className:`px-3 py-1 text-sm rounded ${D} ${d===$?z:""}`,style:{color:"var(--text-primary)"},onClick:()=>p(d===$?null:$),children:$}),d===$&&s.jsx("div",{className:"absolute top-full left-0 mt-1 rounded shadow-lg min-w-[200px] z-50",style:{backgroundColor:"var(--surface-panel)",border:"1px solid var(--border-default)"},children:G})]}),L=({onClick:$,children:G,disabled:U})=>s.jsx("button",{className:`w-full text-left px-3 py-2 text-sm ${D} ${U?"opacity-50 cursor-not-allowed":""}`,style:{color:"var(--text-primary)"},onClick:()=>{U||($(),p(null))},disabled:U,children:G}),q=()=>s.jsx("div",{className:"my-1",style:{borderTop:"1px solid var(--border-default)"}});return s.jsxs("div",{ref:g,className:"flex items-center gap-1 px-2 py-1",style:{backgroundColor:"var(--surface-panel)",borderBottom:"1px solid var(--border-default)"},children:[s.jsxs("span",{className:"text-sm font-semibold mr-4 flex items-center gap-1.5",style:{color:"var(--accent-primary)"},children:[s.jsx("img",{src:"https://adk-rust.com/icon.svg",alt:"ADK",className:"w-5 h-5"}),"ADK Studio"]}),s.jsxs(W,{name:"File",children:[s.jsx(L,{onClick:t,children:" New Project"}),s.jsx(q,{}),s.jsx(L,{onClick:e,disabled:!v,children:" Export Code"})]}),s.jsxs(W,{name:"Templates",children:[s.jsx(L,{onClick:()=>{m(!0),p(null)},disabled:!v,children:" Browse Gallery..."}),s.jsx(q,{}),s.jsx("div",{className:"px-3 py-1 text-xs",style:{color:"var(--text-muted)",borderBottom:"1px solid var(--border-default)"},children:"Quick templates"}),Vv.slice(0,5).map($=>s.jsxs(L,{onClick:()=>O($),disabled:!v,children:[$.icon," ",$.name]},$.id))]}),s.jsxs(W,{name:"Help",children:[s.jsx(L,{onClick:()=>window.open("https://github.com/zavora-ai/adk-rust","_blank"),children:" Documentation"}),s.jsx(q,{}),s.jsxs(L,{onClick:()=>{T(),p(null)},children:[" ",N?"Restart Tutorial":"Start Tutorial"]}),N&&s.jsx(L,{onClick:()=>{A(),p(null)},children:" Reset Tutorial Progress"}),s.jsx(q,{}),s.jsxs("div",{className:"px-3 py-2 text-xs",style:{color:"var(--text-secondary)"},children:[s.jsx("div",{className:"font-semibold mb-2",children:" Keyboard Shortcuts"}),["Edit","Canvas"].map($=>s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"font-medium mb-1",style:{color:"var(--text-muted)"},children:$}),d5.filter(G=>G.category===$).map(G=>s.jsxs("div",{className:"flex justify-between gap-4 py-0.5",children:[s.jsx("span",{style:{color:"var(--text-muted)"},children:G.description}),s.jsx("span",{className:"font-mono text-xs px-1 rounded",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},children:G.key})]},G.key))]},$))]}),s.jsx(q,{}),s.jsx("div",{className:"px-3 py-2 text-xs",style:{color:"var(--text-muted)"},children:"ADK Studio v2.0.0"})]}),s.jsx("div",{className:"flex-1"}),v&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Project: ",s.jsx("span",{style:{color:"var(--text-primary)"},children:v.name})]}),s.jsxs("button",{onClick:a,className:"flex items-center gap-1.5 px-2 py-0.5 rounded text-xs font-medium transition-colors",style:{backgroundColor:o==="building"?"var(--accent-primary)":o==="success"?"#22c55e":o==="error"?"#ef4444":"var(--bg-secondary)",color:o==="none"?"var(--text-muted)":"white",cursor:o==="none"?"default":"pointer"},title:o==="building"?"Building... Click to view progress":o==="success"?"Build succeeded":o==="error"?"Build failed - Click to view errors":"No build yet",children:[o==="building"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin",children:""}),s.jsx("span",{children:"Building..."})]}),o==="success"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Built"})]}),o==="error"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Failed"})]}),o==="none"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Not Built"})]})]}),s.jsxs("button",{onClick:u,className:"flex items-center gap-1.5 px-2 py-0.5 rounded text-xs font-medium transition-colors",style:{backgroundColor:l?"#8b5cf6":"var(--bg-secondary)",color:l?"white":"var(--text-muted)",border:l?"none":"1px solid var(--border-default)"},title:l?"Debug mode ON - showing state inspector and timeline":"Debug mode OFF - click to show state inspector and timeline",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Debug"})]})]}),f&&s.jsx(Z5,{isModal:!0,onSelect:I,onRun:H,onClose:()=>m(!1)})]})}const tF={sm:{container:14,icon:10},md:{container:18,icon:12},lg:{container:22,icon:14}},Wv=j.memo(function({status:t,size:n="md",className:r=""}){if(t==="idle")return null;const{container:o,icon:a}=tF[n];return s.jsxs("div",{className:`status-indicator status-${t} ${r}`,style:{width:o,height:o,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",flexShrink:0},role:"status","aria-label":nF(t),children:[t==="running"&&s.jsx(rF,{size:a}),t==="success"&&s.jsx(oF,{size:a}),t==="error"&&s.jsx(iF,{size:a}),t==="interrupted"&&s.jsx(sF,{size:a})]})});function nF(e){switch(e){case"running":return"Running";case"success":return"Completed successfully";case"error":return"Error occurred";case"interrupted":return"Waiting for human input";default:return"Idle"}}function rF({size:e}){return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",className:"status-spinner",style:{animation:"spin 1s linear infinite"},children:[s.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"31.4 31.4",style:{opacity:.3}}),s.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"31.4 31.4",strokeDashoffset:"23.55"})]})}function oF({size:e}){return s.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"status-success-icon",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})}function iF({size:e}){return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"status-error-icon",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}function sF({size:e}){return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"status-interrupted-icon",children:[s.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),s.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]})}const aF={agent:"",sequential:"",loop:"",parallel:"",router:"",start:"",end:""},lF={agent:"agent",sequential:"sequential",loop:"loop",parallel:"parallel",router:"router",start:"start",end:"end"},wa=j.memo(function({label:t,icon:n,nodeType:r,isActive:o=!1,isSelected:a=!1,isInterrupted:l=!1,status:u="idle",children:d,showTopHandle:p=!0,showBottomHandle:f=!0,showLeftHandle:m=!0,showRightHandle:g=!0,showTypeBadge:v=!0}){const b=n||aF[r],x=lF[r],_=l?"interrupted":o?"running":u,k=["node-base",a&&"node-selected",o&&"node-active",l&&"node-interrupted"].filter(Boolean).join(" "),S=["node-header",`node-header-${r}`].join(" ");return s.jsxs("div",{className:k,children:[p&&s.jsx(Ut,{type:"target",position:je.Top,id:"top",className:"node-handle"}),m&&s.jsx(Ut,{type:"target",position:je.Left,id:"left",className:"node-handle"}),s.jsxs("div",{className:S,children:[s.jsx("span",{className:"node-icon",children:b}),s.jsx("span",{className:"node-label",children:t}),v&&r!=="start"&&r!=="end"&&s.jsx("span",{className:"node-type-badge",children:x}),s.jsx(Wv,{status:_,size:"sm"})]}),d&&s.jsx("div",{className:"node-body",children:d}),f&&s.jsx(Ut,{type:"source",position:je.Bottom,id:"bottom",className:"node-handle"}),g&&s.jsx(Ut,{type:"source",position:je.Right,id:"right",className:"node-handle"})]})}),T_={google_search:"",search:"",browser:"",web:"",mcp:"",function:"",file:"",code:"",database:"",api:"",email:"",calendar:"",default:""};function cF(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(T_))if(n!=="default"&&t.includes(n))return r;return T_.default}function uF(e,t=12){return e.length<=t?e:e.substring(0,t-1)+""}function dF({name:e}){const t=cF(e),n=uF(e);return s.jsxs("span",{className:"tool-badge",title:e,children:[s.jsx("span",{className:"tool-badge-icon",children:t}),s.jsx("span",{className:"tool-badge-name",children:n})]})}function pF({tools:e}){return!e||e.length===0?null:s.jsx("div",{className:"tool-badges",children:e.map(t=>s.jsx(dF,{name:t},t))})}function fF({model:e}){return s.jsxs("div",{className:"model-info",children:[s.jsx("span",{className:"model-icon",children:""}),s.jsx("span",{className:"model-name",children:e})]})}const yA=j.memo(function({data:t,selected:n}){const r=t.isActive||!1,o=t.isInterrupted||!1,a=!!t.thought,l=t.model||"gemini-2.0-flash",u=t.tools||[],d=t.status||(r?"running":"idle"),p=o?"":a?"":"";return s.jsxs(wa,{label:t.label,icon:p,nodeType:"agent",isActive:r,isSelected:n,isInterrupted:o,status:d,children:[s.jsx(fF,{model:l}),u.length>0&&s.jsx("div",{className:"node-body-section",children:s.jsx(pF,{tools:u})})]})});yA.displayName="LlmAgentNode";const A_={google_search:"",search:"",browser:"",web:"",mcp:"",function:"",file:"",code:"",default:""};function hF(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(A_))if(n!=="default"&&t.includes(n))return r;return A_.default}function mF({name:e,index:t,tools:n,isActive:r}){const o=["sub-agent",r&&"sub-agent-active"].filter(Boolean).join(" ");return s.jsxs("div",{className:o,children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"sub-agent-index",children:r?"":`${t+1}.`}),s.jsx("span",{className:"sub-agent-name",children:e})]}),n.length>0&&s.jsx("div",{className:"mt-1 text-xs opacity-70",children:n.map(a=>hF(a)).join(" ")})]})}const vA=j.memo(function({data:t,selected:n}){const r=t.isActive||!1,o=t.isInterrupted||!1,a=t.subAgents||[],l=t.subAgentTools||{},u=t.activeSubAgent,d=t.status||(r?"running":"idle");return s.jsx(wa,{label:t.label,nodeType:"sequential",isActive:r,isSelected:n,isInterrupted:o,status:d,children:a.length>0&&s.jsx("div",{className:"space-y-1",children:a.map((p,f)=>s.jsx(mF,{name:p,index:f,tools:l[p]||[],isActive:u===p},p))})})});vA.displayName="SequentialNode";const P_={google_search:"",search:"",browser:"",web:"",mcp:"",function:"",file:"",code:"",default:""};function gF(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(P_))if(n!=="default"&&t.includes(n))return r;return P_.default}function yF({current:e,max:t,isActive:n}){const r=n?`Iteration ${e+1}/${t}`:`Max ${t}`,o=["iteration-badge",n&&"iteration-badge-active"].filter(Boolean).join(" ");return s.jsx("div",{className:"iteration-info",children:s.jsx("span",{className:o,children:r})})}function vF({name:e,index:t,tools:n,isActive:r}){const o=["sub-agent",r&&"sub-agent-active"].filter(Boolean).join(" ");return s.jsxs("div",{className:o,children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"sub-agent-index",children:r?"":`${t+1}.`}),s.jsx("span",{className:"sub-agent-name",children:e})]}),n.length>0&&s.jsx("div",{className:"mt-1 text-xs opacity-70",children:n.map(a=>gF(a)).join(" ")})]})}const xA=j.memo(function({data:t,selected:n}){const r=t.isActive||!1,o=t.isInterrupted||!1,a=t.subAgents||[],l=t.subAgentTools||{},u=t.activeSubAgent,d=t.maxIterations||3,p=t.currentIteration||0,f=t.status||(r?"running":"idle");return s.jsxs(wa,{label:t.label,nodeType:"loop",isActive:r,isSelected:n,isInterrupted:o,status:f,children:[s.jsx(yF,{current:p,max:d,isActive:r}),a.length>0&&s.jsx("div",{className:"node-body-section space-y-1",children:a.map((m,g)=>s.jsx(vF,{name:m,index:g,tools:l[m]||[],isActive:u===m},m))})]})});xA.displayName="LoopNode";const I_={google_search:"",search:"",browser:"",web:"",mcp:"",function:"",file:"",code:"",default:""};function xF(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(I_))if(n!=="default"&&t.includes(n))return r;return I_.default}function bF({name:e,tools:t,isActive:n}){const r=["sub-agent",n&&"sub-agent-active"].filter(Boolean).join(" ");return s.jsxs("div",{className:r,children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"sub-agent-index",children:""}),s.jsx("span",{className:"sub-agent-name",children:e})]}),t.length>0&&s.jsx("div",{className:"mt-1 text-xs opacity-70",children:t.map(o=>xF(o)).join(" ")})]})}const bA=j.memo(function({data:t,selected:n}){const r=t.isActive||!1,o=t.isInterrupted||!1,a=t.subAgents||[],l=t.subAgentTools||{},u=t.activeSubAgent,d=t.status||(r?"running":"idle");return s.jsx(wa,{label:t.label,nodeType:"parallel",isActive:r,isSelected:n,isInterrupted:o,status:d,children:a.length>0&&s.jsx("div",{className:"space-y-1",children:a.map(p=>s.jsx(bF,{name:p,tools:l[p]||[],isActive:u===p},p))})})});bA.displayName="ParallelNode";function wF({route:e,isActive:t}){const n=["route",t&&"route-active"].filter(Boolean).join(" ");return s.jsxs("div",{className:n,children:[s.jsx("span",{className:"route-condition",children:e.condition}),s.jsx("span",{className:"route-arrow",children:""}),s.jsx("span",{className:"route-target",children:e.target})]})}const wA=j.memo(function({data:t,selected:n}){const r=t.isActive||!1,o=t.isInterrupted||!1,a=t.routes||[],l=t.activeRoute,u=t.status||(r?"running":"idle");return s.jsx(wa,{label:t.label,nodeType:"router",isActive:r,isSelected:n,isInterrupted:o,status:u,children:a.length>0&&s.jsx("div",{className:"space-y-1",children:a.map(d=>s.jsx(wF,{route:d,isActive:l===d.condition},d.condition))})})});wA.displayName="RouterNode";const _A=j.memo(function(){return s.jsxs("div",{className:"node-base",style:{minWidth:"auto"},children:[s.jsx(Ut,{type:"target",position:je.Top,id:"top",className:"node-handle"}),s.jsx(Ut,{type:"target",position:je.Left,id:"left",className:"node-handle"}),s.jsxs("div",{className:"node-header node-header-start",children:[s.jsx("span",{className:"node-icon",children:""}),s.jsx("span",{className:"node-label",children:"START"})]}),s.jsx(Ut,{type:"source",position:je.Bottom,id:"bottom",className:"node-handle"}),s.jsx(Ut,{type:"source",position:je.Right,id:"right",className:"node-handle"})]})});_A.displayName="StartNode";const SA=j.memo(function(){return s.jsxs("div",{className:"node-base",style:{minWidth:"auto"},children:[s.jsxs("div",{className:"node-header node-header-end",children:[s.jsx("span",{className:"node-icon",children:""}),s.jsx("span",{className:"node-label",children:"END"})]}),s.jsx(Ut,{type:"target",position:je.Top,id:"top",className:"node-handle"}),s.jsx(Ut,{type:"target",position:je.Left,id:"left",className:"node-handle"})]})});SA.displayName="EndNode";function Kv({content:e,children:t,position:n="top",delay:r=300,maxWidth:o=250,disabled:a=!1,className:l=""}){const[u,d]=j.useState(!1),[p,f]=j.useState({x:0,y:0}),m=j.useRef(null),g=j.useRef(null),v=j.useRef(null),b=()=>{a||(v.current=setTimeout(()=>{if(m.current){const _=m.current.getBoundingClientRect();f(R_(_,n)),d(!0)}},r))},x=()=>{v.current&&(clearTimeout(v.current),v.current=null),d(!1)};return j.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),j.useEffect(()=>{if(u&&m.current&&g.current){const _=m.current.getBoundingClientRect(),k=g.current.getBoundingClientRect();f(R_(_,n,k))}},[u,n]),s.jsxs("div",{ref:m,className:`tooltip-trigger ${l}`,onMouseEnter:b,onMouseLeave:x,onFocus:b,onBlur:x,children:[t,u&&e&&s.jsxs("div",{ref:g,className:`tooltip tooltip-${n}`,style:{left:p.x,top:p.y,maxWidth:o},role:"tooltip",children:[s.jsx("div",{className:"tooltip-content",children:e}),s.jsx("div",{className:"tooltip-arrow"})]})]})}function R_(e,t,n){const o=n?.width||0,a=n?.height||0;switch(t){case"top":return{x:e.left+e.width/2-o/2,y:e.top-a-8};case"bottom":return{x:e.left+e.width/2-o/2,y:e.bottom+8};case"left":return{x:e.left-o-8,y:e.top+e.height/2-a/2};case"right":return{x:e.right+8,y:e.top+e.height/2-a/2};default:return{x:0,y:0}}}const an={trigger:"Entry point for workflow execution. Supports manual, webhook, schedule, and event triggers.",http:"Make HTTP requests to external APIs. Supports GET, POST, PUT, PATCH, DELETE methods with authentication.",set:"Define and manipulate workflow state variables. Supports set, merge, and delete operations.",transform:"Transform data using JSONPath, JMESPath, templates, or JavaScript expressions.",switch:"Conditional branching based on field values or expressions. Routes to different output ports.",loop:"Iterate over arrays (forEach), repeat while condition (while), or fixed times. Supports parallel execution.",merge:"Combine multiple branches back into single flow. Wait for all, any, or N branches.",wait:"Pause workflow execution for a duration, until a timestamp, or until a condition is met.",code:"Execute custom JavaScript/TypeScript code in a secure sandbox environment.",database:"Perform database operations on PostgreSQL, MySQL, SQLite, MongoDB, or Redis.",email:"Monitor incoming emails via IMAP or send outgoing emails via SMTP.",notification:"Send notifications to Slack, Discord, Microsoft Teams, or custom webhooks.",rss:"Monitor RSS/Atom feeds for new entries. Supports filtering by keywords, date, and categories.",file:"Read, write, delete, or list files from local storage or cloud providers (S3, GCS, Azure).",errorHandling:"Configure how errors are handled: stop execution, continue, retry, or use fallback value.",tracing:"Enable detailed execution traces and configure log level for debugging.",callbacks:"Define functions to call at different lifecycle stages: onStart, onComplete, onError.",executionControl:"Set timeout and skip conditions for node execution.",inputOutputMapping:"Map state fields to node inputs and define where results are stored.",httpMethod:"HTTP method to use for the request.",httpUrl:"URL to send the request to. Supports {{variable}} interpolation.",httpAuth:"Authentication method: none, bearer token, basic auth, or API key.",httpHeaders:"Custom HTTP headers to include in the request.",httpBody:"Request body content. Supports JSON, form data, or raw text.",httpResponse:"Configure response handling: type, status validation, and JSONPath extraction.",httpRateLimit:"Limit request rate to avoid overwhelming the target API.",triggerType:"How the workflow is triggered: manually, via webhook, on schedule, or by event.",webhookPath:"URL path for the webhook endpoint.",webhookMethod:"HTTP method accepted by the webhook.",webhookAuth:"Authentication required for webhook requests.",cronExpression:"Cron expression defining the schedule (minute hour day month weekday).",timezone:"Timezone for schedule evaluation.",setMode:"Operation mode: set (create/overwrite), merge (deep merge), or delete (remove).",variables:"Variables to set in the workflow state.",envVars:"Load environment variables from .env file.",transformType:"Transformation method: JSONPath, JMESPath, template, or JavaScript.",expression:"Transformation expression or code.",operations:"Built-in operations: pick, omit, rename, flatten, sort, unique.",typeCoercion:"Convert result to a specific type.",evaluationMode:"first_match: stop at first match. all_match: evaluate all conditions.",conditions:"Conditions to evaluate for routing.",defaultBranch:"Output port to use when no conditions match.",expressionMode:"Use JavaScript expression to determine branch.",loopType:"Loop type: forEach (iterate array), while (condition), times (fixed count).",sourceArray:"Path to array in state to iterate over.",itemVar:"Variable name for current item in loop.",indexVar:"Variable name for current index in loop.",parallel:"Execute iterations in parallel for better performance.",batchSize:"Number of items to process in parallel.",collectResults:"Collect results from all iterations into an array.",mergeMode:"wait_all: wait for all branches. wait_any: continue on first. wait_n: wait for N.",combineStrategy:"How to combine branch outputs: array, object, first, or last.",branchTimeout:"Maximum time to wait for branches to complete.",waitType:"Wait type: fixed duration, until timestamp, webhook callback, or condition.",duration:"How long to wait.",pollInterval:"How often to check the condition.",maxWait:"Maximum time to wait for condition.",language:"Programming language: JavaScript or TypeScript.",sandbox:"Security settings for code execution.",networkAccess:"Allow code to make network requests.",fileSystemAccess:"Allow code to access the file system.",memoryLimit:"Maximum memory the code can use.",timeLimit:"Maximum execution time for the code.",dbType:"Database type: PostgreSQL, MySQL, SQLite, MongoDB, or Redis.",connectionString:"Database connection string (stored securely).",sqlOperation:"SQL operation: query, insert, update, delete, or upsert.",sqlQuery:"SQL query with parameter placeholders.",mongoCollection:"MongoDB collection name.",mongoOperation:"MongoDB operation: find, findOne, insert, update, delete.",feedUrl:"URL of the RSS or Atom feed to monitor.",rssPollInterval:"How often to check the feed for new entries.",rssKeywords:"Filter entries that contain any of these keywords in title or description.",rssCategories:"Filter entries by category or tag.",rssDateFilter:"Filter entries by publish date range.",seenTracking:"Track seen items to prevent duplicate processing.",maxEntries:"Maximum number of entries to return per poll.",includeContent:"Include the full content of each entry, not just the summary.",parseMedia:"Extract media attachments and enclosures from feed entries."},kA={trigger:"#6366F1",http:"#3B82F6",set:"#8B5CF6",transform:"#EC4899",switch:"#F59E0B",loop:"#10B981",merge:"#06B6D4",wait:"#6B7280",code:"#EF4444",database:"#14B8A6",email:"#EA580C",notification:"#22D3EE",rss:"#F97316",file:"#A855F7"},NA={trigger:"",http:"",set:"",transform:"",switch:"",loop:"",merge:"",wait:"",code:"",database:"",email:"",notification:"",rss:"",file:""},_F={trigger:"Trigger",http:"HTTP",set:"Set",transform:"Transform",switch:"Switch",loop:"Loop",merge:"Merge",wait:"Wait",code:"Code",database:"Database",email:"Email",notification:"Notification",rss:"RSS/Feed",file:"File"},dn=j.memo(function({type:t,label:n,isActive:r=!1,isSelected:o=!1,status:a="idle",hasError:l=!1,children:u,inputPorts:d=1,outputPorts:p=1,inputPortIds:f,outputPortIds:m,showTooltip:g=!1}){const v=kA[t],b=NA[t],x=an[t],_=De(C=>C.layoutDirection),k=_==="LR"||_==="RL",S=["action-node",`action-node-${t}`,o&&"action-node-selected",r&&"action-node-active",l&&"action-node-error",a!=="idle"&&`action-node-status-${a}`].filter(Boolean).join(" "),N=()=>Array.from({length:d}).map((C,P)=>{const O=f?.[P]??`input-${P}`,I=(P+1)*100/(d+1);return s.jsx(Ut,{type:"target",position:k?je.Left:je.Top,id:O,className:"action-node-handle action-node-handle-input",style:{...k?{top:`${I}%`,left:void 0}:{left:`${I}%`,top:void 0},background:v}},O)}),T=()=>Array.from({length:p}).map((C,P)=>{const O=m?.[P]??`output-${P}`,I=(P+1)*100/(p+1);return s.jsx(Ut,{type:"source",position:k?je.Right:je.Bottom,id:O,className:"action-node-handle action-node-handle-output",style:{...k?{top:`${I}%`,right:void 0}:{left:`${I}%`,bottom:void 0},background:v}},O)}),A=s.jsxs("div",{className:S,style:{"--action-color":v},children:[N(),s.jsxs("div",{className:"action-node-header",style:{background:v},children:[s.jsx("span",{className:"action-node-icon",children:b}),s.jsx("span",{className:"action-node-label",children:n}),s.jsx("span",{className:"action-node-type-badge",children:t}),s.jsx(Wv,{status:r?"running":a,size:"sm"})]}),u&&s.jsx("div",{className:"action-node-body",children:u}),l&&s.jsx("div",{className:"action-node-error-badge",children:"!"}),T()]});return g&&x?s.jsx(Kv,{content:x,position:"right",delay:500,children:A}):A}),SF={manual:"Manual",webhook:"Webhook",schedule:"Schedule",event:"Event"},kF={manual:"",webhook:"",schedule:"",event:""},NF=j.memo(function({data:t,selected:n}){const r=SF[t.triggerType]||t.triggerType,o=kF[t.triggerType]||"",a=()=>{switch(t.triggerType){case"webhook":return t.webhook?.path?s.jsxs("div",{className:"action-node-preview",children:[s.jsx("span",{className:"action-node-preview-method",children:t.webhook.method}),s.jsx("span",{className:"action-node-preview-path",children:t.webhook.path}),t.webhook.auth!=="none"&&s.jsx("span",{className:"action-node-preview-auth",title:`Auth: ${t.webhook.auth}`,children:""})]}):null;case"schedule":return t.schedule?.cron?s.jsxs("div",{className:"action-node-preview",children:[s.jsx("span",{className:"action-node-preview-cron",children:t.schedule.cron}),t.schedule.timezone&&s.jsx("span",{className:"action-node-preview-tz",title:t.schedule.timezone,children:""})]}):null;case"event":return t.event?.source?s.jsxs("div",{className:"action-node-preview",children:[s.jsx("span",{className:"action-node-preview-source",children:t.event.source}),t.event.eventType&&s.jsxs("span",{className:"action-node-preview-type",children:[": ",t.event.eventType]})]}):null;default:return s.jsx("div",{className:"action-node-preview action-node-preview-manual",children:"Click to run"})}};return s.jsxs(dn,{type:"trigger",label:t.name||"Trigger",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",inputPorts:0,outputPorts:1,children:[s.jsxs("div",{className:"action-node-badge",children:[s.jsx("span",{className:"action-node-badge-icon",children:o}),s.jsx("span",{className:"action-node-badge-label",children:r})]}),a()]})}),jF={GET:"#10B981",POST:"#3B82F6",PUT:"#F59E0B",PATCH:"#8B5CF6",DELETE:"#EF4444"};function EF(e,t=35){if(!e||e.length<=t)return e;try{const n=new URL(e),r=n.hostname,o=n.pathname,a=r.length>20?r.substring(0,17)+"...":r,l=t-a.length-3;if(l>5&&o.length>1){const u=o.length>l?o.substring(0,l-3)+"...":o;return a+u}return a+(o.length>1?"/...":"")}catch{return e.substring(0,t-3)+"..."}}function CF(e){return/\{\{[^}]+\}\}/.test(e)}const TF=j.memo(function({data:t,selected:n}){const r=jF[t.method]||"#6B7280",o=EF(t.url),a=CF(t.url),l=t.auth?.type&&t.auth.type!=="none";return s.jsx(dn,{type:"http",label:t.name||"HTTP Request",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"http-node-content",children:[s.jsxs("div",{className:"http-method-row",children:[s.jsx("span",{className:"http-method-badge",style:{backgroundColor:r},children:t.method}),a&&s.jsx("span",{className:"http-vars-indicator",title:"Contains variables",children:"{{}}"})]}),t.url&&s.jsx("div",{className:"http-url-preview",title:t.url,children:o||"No URL configured"}),s.jsxs("div",{className:"http-indicators",children:[l&&s.jsxs("span",{className:"http-auth-badge",title:`Auth: ${t.auth.type}`,children:[" ",t.auth.type]}),t.response?.type&&t.response.type!=="json"&&s.jsx("span",{className:"http-response-badge",title:`Response: ${t.response.type}`,children:t.response.type}),t.response?.jsonPath&&s.jsx("span",{className:"http-jsonpath-badge",title:`Extract: ${t.response.jsonPath}`,children:"$."})]})]})})}),O_={set:{label:"Set",icon:"",color:"#8B5CF6"},merge:{label:"Merge",icon:"",color:"#10B981"},delete:{label:"Delete",icon:"",color:"#EF4444"}};function AF(e,t=20){if(e===null)return"null";if(e===void 0)return"undefined";const n=typeof e=="object"?JSON.stringify(e):String(e);return n.length<=t?n:n.substring(0,t-3)+"..."}const PF=j.memo(function({data:t,selected:n}){const r=O_[t.mode]||O_.set,o=t.variables?.length||0,a=t.variables?.filter(d=>d.isSecret).length||0,l=t.envVars?.loadFromEnv,u=t.variables?.slice(0,2)||[];return s.jsx(dn,{type:"set",label:t.name||"Set Variables",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"set-node-content",children:[s.jsxs("div",{className:"set-node-header-row",children:[s.jsxs("span",{className:"set-node-mode-badge",style:{backgroundColor:r.color},children:[s.jsx("span",{className:"set-node-mode-icon",children:r.icon}),s.jsx("span",{className:"set-node-mode-label",children:r.label})]}),s.jsxs("span",{className:"set-node-count-badge",children:[o," var",o!==1?"s":""]})]}),u.length>0&&s.jsxs("div",{className:"set-node-vars-preview",children:[u.map((d,p)=>s.jsxs("div",{className:"set-node-var-row",children:[s.jsxs("span",{className:"set-node-var-key",children:[d.isSecret&&s.jsx("span",{className:"set-node-secret-icon",title:"Secret",children:""}),d.key]}),s.jsx("span",{className:"set-node-var-separator",children:"="}),s.jsx("span",{className:"set-node-var-value",title:String(d.value),children:d.isSecret?"":AF(d.value,15)})]},p)),o>2&&s.jsxs("div",{className:"set-node-more",children:["+",o-2," more"]})]}),s.jsxs("div",{className:"set-node-indicators",children:[a>0&&s.jsxs("span",{className:"set-node-indicator",title:`${a} secret variable${a!==1?"s":""}`,children:[" ",a]}),l&&s.jsxs("span",{className:"set-node-indicator set-node-env-indicator",title:"Loading from .env",children:[" .env",t.envVars?.prefix&&s.jsxs("span",{className:"set-node-env-prefix",children:["(",t.envVars.prefix,"*)"]})]})]})]})})}),IF={jsonpath:"JSONPath",jmespath:"JMESPath",template:"Template",javascript:"JavaScript"},RF={jsonpath:"",jmespath:"",template:"",javascript:""},OF={pick:"Pick",omit:"Omit",rename:"Rename",flatten:"Flatten",sort:"Sort",unique:"Unique"},MF=j.memo(function({data:t,selected:n}){const r=IF[t.transformType]||t.transformType,o=RF[t.transformType]||"",l=(t.operations?.length||0)>0,u=!!t.typeCoercion?.targetType,d=()=>!t.operations||t.operations.length===0?null:t.operations.length===1?OF[t.operations[0].type]||t.operations[0].type:`${t.operations.length} operations`,p=()=>{if(!t.expression)return null;const f=30;return t.expression.length<=f?t.expression:t.expression.substring(0,f)+"..."};return s.jsxs(dn,{type:"transform",label:t.name||"Transform",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:[s.jsxs("div",{className:"transform-node-type",children:[s.jsx("span",{className:"transform-node-type-icon",children:o}),s.jsx("span",{className:"transform-node-type-label",children:r})]}),l&&s.jsxs("div",{className:"transform-node-operations",children:[s.jsx("span",{className:"transform-node-operations-icon",children:""}),s.jsx("span",{className:"transform-node-operations-text",children:d()})]}),!l&&t.expression&&s.jsx("div",{className:"transform-node-expression",children:s.jsx("code",{className:"transform-node-expression-code",children:p()})}),u&&s.jsxs("div",{className:"transform-node-coercion",children:[s.jsx("span",{className:"transform-node-coercion-icon",children:""}),s.jsx("span",{className:"transform-node-coercion-type",children:t.typeCoercion.targetType})]})]})}),DF={eq:"=",neq:"",gt:">",lt:"<",gte:"",lte:"",contains:"",startsWith:"^",endsWith:"$",matches:"~",in:"",empty:"",exists:""};function LF(e){const t=DF[e.operator]||e.operator,n=e.field.length>12?e.field.slice(0,10)+"":e.field;if(e.operator==="empty"||e.operator==="exists")return`${n} ${t}`;const r=e.value!==void 0?String(e.value).slice(0,8):"";return`${n} ${t} ${r}`}const qF=j.memo(function({data:t,selected:n}){const r=t.conditions||[],o=r.length,a=!!t.defaultBranch,l=t.expressionMode?.enabled,u=r.map(m=>m.outputPort),d=a&&!u.includes(t.defaultBranch),p=[...u,...d?[t.defaultBranch]:[]],f=p.length;return s.jsx(dn,{type:"switch",label:t.name||"Switch",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",outputPorts:Math.max(1,f),outputPortIds:p.length>0?p:void 0,children:s.jsxs("div",{className:"switch-node-content",children:[s.jsxs("div",{className:"switch-node-header-row",children:[s.jsxs("span",{className:`switch-node-mode-badge ${t.evaluationMode}`,children:[s.jsx("span",{className:"switch-node-mode-icon",children:t.evaluationMode==="first_match"?"1":""}),s.jsx("span",{className:"switch-node-mode-label",children:t.evaluationMode==="first_match"?"First Match":"Fan Out"})]}),s.jsxs("span",{className:"switch-node-count-badge",children:[o," branch",o!==1?"es":""]})]}),l&&s.jsxs("div",{className:"switch-node-expression-mode",children:[s.jsx("span",{className:"switch-node-expression-icon",children:""}),s.jsx("span",{className:"switch-node-expression-label",children:"Expression Mode"})]}),!l&&o>0&&s.jsxs("div",{className:"switch-branches",children:[r.slice(0,3).map((m,g)=>s.jsxs("div",{className:"branch-indicator",children:[s.jsx("span",{className:"branch-indicator-name",children:m.name||`Branch ${g+1}`}),s.jsx("span",{className:"branch-indicator-preview",children:LF(m)}),s.jsxs("span",{className:"branch-indicator-port",children:[" ",m.outputPort]})]},m.id||g)),o>3&&s.jsxs("div",{className:"branch-indicator branch-indicator-more",children:["+",o-3," more branch",o-3!==1?"es":""]})]}),l&&t.expressionMode?.expression&&s.jsx("div",{className:"switch-node-expression-preview",children:s.jsx("code",{className:"switch-node-expression-code",children:t.expressionMode.expression.length>30?t.expressionMode.expression.slice(0,28)+"":t.expressionMode.expression})}),a&&s.jsxs("div",{className:"branch-indicator branch-indicator-default",children:[s.jsx("span",{className:"branch-indicator-name",children:"Default"}),s.jsxs("span",{className:"branch-indicator-port",children:[" ",t.defaultBranch]})]}),o===0&&!l&&s.jsx("div",{className:"switch-node-empty",children:"No conditions defined"})]})})}),M_={forEach:{label:"For Each",icon:"",description:"Iterate over array items"},while:{label:"While",icon:"",description:"Loop while condition is true"},times:{label:"Times",icon:"",description:"Repeat N times"}};function FF(e){switch(e.loopType){case"forEach":if(e.forEach?.sourceArray){const t=e.forEach.sourceArray;return t.length>25?t.slice(0,23)+"":t}return null;case"while":if(e.while?.condition){const t=e.while.condition;return t.length>25?t.slice(0,23)+"":t}return null;case"times":if(e.times?.count!==void 0){const t=e.times.count;return typeof t=="number"?`${t}`:`${t}`}return null;default:return null}}function zF(e){if(e.loopType!=="forEach"||!e.forEach)return null;const t=e.forEach.itemVar||"item",n=e.forEach.indexVar||"index";return`${t}, ${n}`}const BF=j.memo(function({data:t,selected:n}){const r=M_[t.loopType]||M_.forEach,o=FF(t),a=zF(t),l=t.parallel?.enabled,u=t.results?.collect;return s.jsx(dn,{type:"loop",label:t.name||"Loop",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"loop-node-content",children:[s.jsxs("div",{className:"loop-node-header-row",children:[s.jsxs("span",{className:"loop-node-type-badge",children:[s.jsx("span",{className:"loop-node-type-icon",children:r.icon}),s.jsx("span",{className:"loop-node-type-label",children:r.label})]}),l&&s.jsxs("span",{className:"loop-node-parallel-badge",title:"Parallel execution enabled",children:[s.jsx("span",{className:"loop-node-parallel-icon",children:""}),s.jsx("span",{className:"loop-node-parallel-label",children:"Parallel"})]})]}),o&&s.jsxs("div",{className:"loop-node-preview",children:[t.loopType==="forEach"&&s.jsx("span",{className:"loop-node-preview-label",children:"Source:"}),t.loopType==="while"&&s.jsx("span",{className:"loop-node-preview-label",children:"While:"}),t.loopType==="times"&&s.jsx("span",{className:"loop-node-preview-label",children:"Count:"}),s.jsx("code",{className:"loop-node-preview-value",children:o})]}),a&&s.jsxs("div",{className:"loop-node-vars",children:[s.jsx("span",{className:"loop-node-vars-label",children:"Variables:"}),s.jsx("code",{className:"loop-node-vars-value",children:a})]}),s.jsxs("div",{className:"loop-node-indicators",children:[l&&t.parallel?.batchSize&&s.jsxs("span",{className:"loop-node-indicator",title:"Batch size",children:[s.jsx("span",{className:"loop-node-indicator-icon",children:""}),s.jsxs("span",{className:"loop-node-indicator-text",children:["Batch: ",t.parallel.batchSize]})]}),l&&t.parallel?.delayBetween&&s.jsxs("span",{className:"loop-node-indicator",title:"Delay between batches",children:[s.jsx("span",{className:"loop-node-indicator-icon",children:""}),s.jsxs("span",{className:"loop-node-indicator-text",children:[t.parallel.delayBetween,"ms"]})]}),u&&s.jsxs("span",{className:"loop-node-collect-badge",title:"Collecting results",children:[s.jsx("span",{className:"loop-node-collect-icon",children:""}),s.jsx("span",{className:"loop-node-collect-label",children:t.results?.aggregationKey?` ${t.results.aggregationKey}`:"Collect"})]})]}),!o&&t.loopType==="forEach"&&s.jsx("div",{className:"loop-node-empty",children:"Configure source array"}),!o&&t.loopType==="while"&&s.jsx("div",{className:"loop-node-empty",children:"Configure condition"}),!o&&t.loopType==="times"&&s.jsx("div",{className:"loop-node-empty",children:"Configure iteration count"})]})})}),$F={wait_all:{label:"Wait All",icon:"",description:"Wait for all branches"},wait_any:{label:"Wait Any",icon:"",description:"Continue on first completion"},wait_n:{label:"Wait N",icon:"",description:"Wait for N branches"}},HF={array:{label:"Array",icon:""},object:{label:"Object",icon:""},first:{label:"First",icon:"1"},last:{label:"Last",icon:""}},VF=j.memo(function({data:t,selected:n}){const r=$F[t.mode],o=HF[t.combineStrategy],a=Math.max(2,t.branchKeys?.length||2),l=t.branchKeys&&t.branchKeys.length>0?t.branchKeys:Array.from({length:a},(u,d)=>`input-${d}`);return s.jsx(dn,{type:"merge",label:t.name||"Merge",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",inputPorts:a,inputPortIds:l,children:s.jsxs("div",{className:"merge-node-content",children:[s.jsxs("div",{className:"merge-node-header-row",children:[s.jsxs("span",{className:`merge-node-mode-badge ${t.mode}`,children:[s.jsx("span",{className:"merge-node-mode-icon",children:r.icon}),s.jsx("span",{className:"merge-node-mode-label",children:t.mode==="wait_n"?`Wait ${t.waitCount||"N"}`:r.label})]}),s.jsxs("span",{className:"merge-node-count-badge",children:[a," input",a!==1?"s":""]})]}),s.jsxs("div",{className:"merge-node-strategy",children:[s.jsx("span",{className:"merge-node-strategy-icon",children:o.icon}),s.jsx("span",{className:"merge-node-strategy-label",children:o.label})]}),t.combineStrategy==="object"&&t.branchKeys&&t.branchKeys.length>0&&s.jsxs("div",{className:"merge-node-branches",children:[t.branchKeys.slice(0,3).map((u,d)=>s.jsxs("div",{className:"merge-branch-indicator",children:[s.jsxs("span",{className:"merge-branch-index",children:["#",d+1]}),s.jsx("span",{className:"merge-branch-key",children:u})]},d)),t.branchKeys.length>3&&s.jsxs("div",{className:"merge-branch-indicator merge-branch-more",children:["+",t.branchKeys.length-3," more"]})]}),t.timeout?.enabled&&s.jsxs("div",{className:"merge-node-timeout",children:[s.jsx("span",{className:"merge-node-timeout-icon",children:""}),s.jsxs("span",{className:"merge-node-timeout-label",children:[t.timeout.ms,"ms (",t.timeout.behavior,")"]})]})]})})}),UF={fixed:"Fixed",until:"Until",webhook:"Webhook",condition:"Condition"},WF={fixed:"",until:"",webhook:"",condition:""},KF={ms:"ms",s:"sec",m:"min",h:"hr"};function GF(e,t){switch(t){case"ms":return e;case"s":return e*1e3;case"m":return e*6e4;case"h":return e*36e5}}function YF(e){if(e<=0)return"0s";const t=Math.ceil(e/1e3);if(t<60)return`${t}s`;const n=Math.floor(t/60),r=t%60;if(n<60)return r>0?`${n}m ${r}s`:`${n}m`;const o=Math.floor(n/60),a=n%60;return a>0?`${o}h ${a}m`:`${o}h`}function QF(e,t){return`${e}${KF[t]}`}function XF(e,t){const n=Math.round(e/1e3),r=Math.round(t/1e3);return`Poll: ${n}s, Max: ${r}s`}const JF=j.memo(function({data:t,selected:n}){const r=t.waitType||"fixed",o=UF[r],a=WF[r],[l,u]=j.useState(null),d=j.useRef(null),p=j.useRef(0),f=j.useRef(!1),m=j.useRef(null);j.useEffect(()=>{const _=!!t.isActive;if(_&&!f.current&&r==="fixed"&&t.fixed){const k=GF(t.fixed.duration,t.fixed.unit);p.current=k,d.current=Date.now(),u(k),m.current=setInterval(()=>{const S=Date.now()-(d.current??Date.now()),N=Math.max(0,k-S);u(N),N<=0&&m.current&&(clearInterval(m.current),m.current=null)},100)}else!_&&f.current&&(m.current&&(clearInterval(m.current),m.current=null),u(null),d.current=null);f.current=_}),j.useEffect(()=>()=>{m.current&&clearInterval(m.current)},[]);const v=(()=>{switch(r){case"fixed":return t.fixed?QF(t.fixed.duration,t.fixed.unit):null;case"until":if(t.until?.timestamp){const _=t.until.timestamp;return _.length>16?_.substring(0,16)+"...":_}return null;case"webhook":if(t.webhook?.path){const _=t.webhook.path;return _.length>20?"..."+_.slice(-17):_}return null;case"condition":return t.condition?XF(t.condition.pollInterval,t.condition.maxWait):null;default:return null}})(),b=!!t.isActive&&l!==null,x=l!==null&&p.current>0?1-l/p.current:0;return s.jsx(dn,{type:"wait",label:t.name||"Wait",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsx("div",{className:"wait-node-content",children:b?s.jsxs("div",{className:"wait-node-countdown",children:[s.jsx("div",{className:"wait-countdown-bar-track",children:s.jsx("div",{className:"wait-countdown-bar-fill",style:{width:`${Math.min(x*100,100)}%`}})}),s.jsxs("div",{className:"wait-countdown-text",children:[s.jsx("span",{className:"wait-countdown-icon",children:l===0?"":""}),s.jsx("span",{className:"wait-countdown-remaining",children:l===0?"Done":YF(l)})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"wait-node-type",children:[s.jsx("span",{className:"wait-node-type-icon",children:a}),s.jsx("span",{className:"wait-node-type-badge",children:o})]}),v&&s.jsx("div",{className:"wait-node-preview",children:s.jsx("span",{className:"wait-node-preview-text",children:v})})]})})})}),D_={javascript:{label:"JS",icon:"",color:"#F7DF1E"},typescript:{label:"TS",icon:"",color:"#3178C6"}};function ZF(e,t=30){if(!e)return"";const n=e.split(`
`).filter(o=>o.trim());if(n.length===0)return"";const r=n[0].trim();return r.length<=t?r:r.substring(0,t-3)+"..."}function ez(e){return e?e.split(`
`).filter(t=>t.trim()).length:0}function tz(e){return!e.networkAccess&&!e.fileSystemAccess?"strict":e.networkAccess&&e.fileSystemAccess?"open":"relaxed"}function nz(e){switch(tz(e)){case"strict":return{icon:"",label:"Strict",className:"code-sandbox-strict"};case"relaxed":return{icon:"",label:"Relaxed",className:"code-sandbox-relaxed"};case"open":return{icon:"",label:"Open",className:"code-sandbox-open"}}}const rz=j.memo(function({data:t,selected:n}){const r=D_[t.language]||D_.javascript,o=nz(t.sandbox),a=ez(t.code),l=ZF(t.code),u=t.sandbox.memoryLimit>0||t.sandbox.timeLimit>0;return s.jsx(dn,{type:"code",label:t.name||"Code",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"code-node-content",children:[s.jsxs("div",{className:"code-node-header-row",children:[s.jsxs("span",{className:"code-node-language-badge",style:{backgroundColor:r.color},title:`Language: ${t.language}`,children:[s.jsx("span",{className:"code-node-language-icon",children:r.icon}),s.jsx("span",{className:"code-node-language-label",children:r.label})]}),s.jsxs("span",{className:`code-node-sandbox-badge ${o.className}`,title:`Sandbox: ${o.label}`,children:[s.jsx("span",{className:"code-node-sandbox-icon",children:o.icon}),s.jsx("span",{className:"code-node-sandbox-label",children:o.label})]}),a>0&&s.jsxs("span",{className:"code-node-lines-badge",title:`${a} lines of code`,children:[a," ",a===1?"line":"lines"]})]}),l&&s.jsx("div",{className:"code-node-preview",children:s.jsx("code",{className:"code-node-preview-code",children:l})}),u&&s.jsxs("div",{className:"code-node-limits",children:[t.sandbox.memoryLimit>0&&s.jsxs("span",{className:"code-node-limit-badge",title:`Memory limit: ${t.sandbox.memoryLimit}MB`,children:[" ",t.sandbox.memoryLimit,"MB"]}),t.sandbox.timeLimit>0&&s.jsxs("span",{className:"code-node-limit-badge",title:`Time limit: ${t.sandbox.timeLimit}ms`,children:[" ",t.sandbox.timeLimit,"ms"]})]}),s.jsxs("div",{className:"code-node-access",children:[t.sandbox.networkAccess&&s.jsx("span",{className:"code-node-access-badge code-node-access-network",title:"Network access enabled",children:""}),t.sandbox.fileSystemAccess&&s.jsx("span",{className:"code-node-access-badge code-node-access-fs",title:"File system access enabled",children:""})]})]})})}),oz={postgresql:"#336791",mysql:"#4479A1",sqlite:"#003B57",mongodb:"#47A248",redis:"#DC382D"},iz={postgresql:"",mysql:"",sqlite:"",mongodb:"",redis:""},sz={postgresql:"PostgreSQL",mysql:"MySQL",sqlite:"SQLite",mongodb:"MongoDB",redis:"Redis"},az={query:"SELECT",insert:"INSERT",update:"UPDATE",delete:"DELETE",upsert:"UPSERT"},lz={find:"find()",findOne:"findOne()",insert:"insert()",update:"update()",delete:"delete()"},cz={get:"GET",set:"SET",del:"DEL",hget:"HGET",hset:"HSET",lpush:"LPUSH",rpop:"RPOP"};function uz(e){return e.dbType==="mongodb"&&e.mongodb?.operation?lz[e.mongodb.operation]:e.dbType==="redis"&&e.redis?.operation?cz[e.redis.operation]:e.sql?.operation?az[e.sql.operation]:null}function dz(e){if(e.dbType==="mongodb"&&e.mongodb?.collection)return e.mongodb.collection;if(e.dbType==="redis"&&e.redis?.key)return pz(e.redis.key,20);if(e.sql?.query){const t=e.sql.query.match(/(?:FROM|INTO|UPDATE)\s+[`"']?(\w+)[`"']?/i);if(t)return t[1]}return null}function pz(e,t){return e.length<=t?e:e.substring(0,t-3)+"..."}function fz(e){return!!(e.connection?.connectionString||e.connection?.credentialRef)}const hz=j.memo(function({data:t,selected:n}){const r=oz[t.dbType]||"#14B8A6",o=iz[t.dbType]||"",a=sz[t.dbType]||t.dbType,l=uz(t),u=dz(t),d=fz(t);return s.jsx(dn,{type:"database",label:t.name||"Database",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"database-node-content",children:[s.jsxs("div",{className:"database-type-row",children:[s.jsxs("span",{className:"database-type-badge",style:{backgroundColor:r},title:a,children:[s.jsx("span",{className:"database-type-icon",children:o}),s.jsx("span",{className:"database-type-label",children:a})]}),s.jsx("span",{className:`database-connection-status ${d?"connected":"disconnected"}`,title:d?"Connection configured":"No connection configured",children:d?"":""})]}),l&&s.jsxs("div",{className:"database-operation-row",children:[s.jsx("span",{className:"database-operation-badge",children:l}),u&&s.jsxs("span",{className:"database-target",title:u,children:[" ",u]})]}),s.jsxs("div",{className:"database-indicators",children:[t.connection?.poolSize&&t.connection.poolSize>1&&s.jsxs("span",{className:"database-pool-badge",title:`Pool size: ${t.connection.poolSize}`,children:[" ",t.connection.poolSize]}),t.connection?.credentialRef&&s.jsx("span",{className:"database-cred-badge",title:`Using credentials from: ${t.connection.credentialRef}`,children:" ref"}),t.sql?.params&&Object.keys(t.sql.params).length>0&&s.jsxs("span",{className:"database-params-badge",title:"Has query parameters",children:[" ",Object.keys(t.sql.params).length," params"]}),t.mongodb?.filter&&Object.keys(t.mongodb.filter).length>0&&s.jsx("span",{className:"database-filter-badge",title:"Has filter",children:" filter"}),t.redis?.ttl&&s.jsxs("span",{className:"database-ttl-badge",title:`TTL: ${t.redis.ttl}s`,children:[" ",t.redis.ttl,"s"]})]})]})})}),L_={monitor:{icon:"",label:"Monitor",color:"#3B82F6"},send:{icon:"",label:"Send",color:"#10B981"}};function lv(e,t=25){if(!e||e.length<=t)return e;const n=e.indexOf("@");if(n>0&&n<t-5){const r=e.substring(n),o=e.substring(0,n),a=t-r.length-3;if(a>3)return o.substring(0,a)+"..."+r}return e.substring(0,t-3)+"..."}function mz(e){if(!e)return"No recipients";const t=e.split(",").map(n=>n.trim()).filter(Boolean);return t.length===0?"No recipients":t.length===1?lv(t[0]):`${lv(t[0])} +${t.length-1}`}const gz=j.memo(function({data:t,selected:n}){const r=L_[t.mode]||L_.monitor,o=t.attachments&&t.attachments.length>0,a=t.mode==="monitor"?t.imap?.host:t.smtp?.host,l=t.mode==="monitor"?t.imap?.port:t.smtp?.port;return s.jsx(dn,{type:"email",label:t.name||"Email",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"email-node-content",children:[s.jsxs("div",{className:"email-mode-row",children:[s.jsxs("span",{className:"email-mode-badge",style:{backgroundColor:r.color},children:[s.jsx("span",{className:"email-mode-icon",children:r.icon}),s.jsx("span",{className:"email-mode-label",children:r.label})]}),o&&s.jsxs("span",{className:"email-attachment-badge",title:`${t.attachments.length} attachment(s)`,children:[" ",t.attachments.length]})]}),a&&s.jsxs("div",{className:"email-connection-preview",title:`${a}:${l}`,children:[s.jsx("span",{className:"email-connection-icon",children:""}),s.jsxs("span",{className:"email-connection-host",children:[a,l&&s.jsxs("span",{className:"email-connection-port",children:[":",l]})]})]}),t.mode==="monitor"&&s.jsxs("div",{className:"email-monitor-info",children:[t.imap?.folder&&s.jsxs("span",{className:"email-folder-badge",title:`Folder: ${t.imap.folder}`,children:[" ",t.imap.folder]}),t.filters?.unreadOnly&&s.jsx("span",{className:"email-filter-badge",title:"Unread only",children:" Unread"}),t.filters?.from&&s.jsxs("span",{className:"email-filter-badge",title:`From: ${t.filters.from}`,children:[" ",lv(t.filters.from,15)]})]}),t.mode==="send"&&s.jsxs("div",{className:"email-send-info",children:[t.recipients?.to&&s.jsxs("div",{className:"email-recipients-preview",title:t.recipients.to,children:[s.jsx("span",{className:"email-recipients-icon",children:""}),s.jsx("span",{className:"email-recipients-text",children:mz(t.recipients.to)})]}),t.content?.subject&&s.jsx("div",{className:"email-subject-preview",title:t.content.subject,children:s.jsx("span",{className:"email-subject-text",children:t.content.subject.length>30?t.content.subject.substring(0,27)+"...":t.content.subject})})]}),s.jsxs("div",{className:"email-indicators",children:[t.imap?.secure||t.smtp?.secure?s.jsx("span",{className:"email-secure-badge",title:"SSL/TLS enabled",children:" Secure"}):null,t.content?.bodyType==="html"&&s.jsx("span",{className:"email-html-badge",title:"HTML email",children:"HTML"})]})]})})}),q_={slack:{icon:"",label:"Slack",color:"#4A154B"},discord:{icon:"",label:"Discord",color:"#5865F2"},teams:{icon:"",label:"Teams",color:"#6264A7"},webhook:{icon:"",label:"Webhook",color:"#6B7280"}},yz={plain:"",markdown:"",blocks:""};function oc(e,t=50){return!e||e.length<=t?e:e.substring(0,t-3)+"..."}function vz(e){if(!e)return"";try{return e.includes("{{")?"{{...}}":new URL(e).hostname}catch{return oc(e,25)}}function xz(e){if(!e)return 0;const t=e.match(/\{\{[^}]+\}\}/g);return t?t.length:0}const bz=j.memo(function({data:t,selected:n}){const r=q_[t.channel]||q_.webhook,o=yz[t.message?.format||"plain"],a=xz(t.message?.text||""),l=t.message?.blocks&&t.message.blocks.length>0,u=vz(t.webhookUrl||"");return s.jsx(dn,{type:"notification",label:t.name||"Notification",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"notification-node-content",children:[s.jsxs("div",{className:"notification-channel-row",children:[s.jsxs("span",{className:"notification-channel-badge",style:{backgroundColor:r.color},children:[s.jsx("span",{className:"notification-channel-icon",children:r.icon}),s.jsx("span",{className:"notification-channel-label",children:r.label})]}),t.message?.format&&t.message.format!=="plain"&&s.jsxs("span",{className:"notification-format-badge",title:`Format: ${t.message.format}`,children:[o," ",t.message.format]})]}),u&&s.jsxs("div",{className:"notification-webhook-preview",title:t.webhookUrl,children:[s.jsx("span",{className:"notification-webhook-icon",children:""}),s.jsx("span",{className:"notification-webhook-domain",children:u}),s.jsx("span",{className:"notification-webhook-masked",children:""})]}),t.message?.text&&s.jsxs("div",{className:"notification-message-preview",children:[s.jsx("span",{className:"notification-message-text",children:oc(t.message.text,40)}),a>0&&s.jsxs("span",{className:"notification-vars-badge",title:`${a} variable(s)`,children:["{{",a,"}}"]})]}),l&&s.jsxs("div",{className:"notification-blocks-indicator",children:[s.jsx("span",{className:"notification-blocks-icon",children:""}),s.jsxs("span",{className:"notification-blocks-text",children:[t.message.blocks.length," block(s)"]})]}),s.jsxs("div",{className:"notification-indicators",children:[t.username&&s.jsxs("span",{className:"notification-indicator",title:`Username: ${t.username}`,children:[" ",oc(t.username,12)]}),t.iconUrl&&s.jsx("span",{className:"notification-indicator",title:"Custom icon",children:" Icon"}),t.targetChannel&&s.jsxs("span",{className:"notification-indicator",title:`Channel: ${t.targetChannel}`,children:["#",oc(t.targetChannel,10)]})]})]})})});function F_(e){return e<1e3?`${e}ms`:e<6e4?`${Math.round(e/1e3)}s`:e<36e5?`${Math.round(e/6e4)}m`:`${Math.round(e/36e5)}h`}function wz(e,t=35){if(!e||e.length<=t)return e;try{const n=new URL(e),r=n.hostname,o=n.pathname;if(r.length+5<t){const a=t-r.length-3;return o.length>a?`${r}${o.substring(0,a)}...`:`${r}${o}`}return r.length>t?r.substring(0,t-3)+"...":r}catch{return e.substring(0,t-3)+"..."}}const _z=j.memo(function({data:t,selected:n}){const r=t.filters&&(t.filters.keywords&&t.filters.keywords.length>0||t.filters.author||t.filters.dateFrom||t.filters.dateTo||t.filters.categories&&t.filters.categories.length>0),o=t.seenTracking?.enabled;return s.jsx(dn,{type:"rss",label:t.name||"RSS/Feed",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"rss-node-content",children:[t.feedUrl&&s.jsxs("div",{className:"rss-url-preview",title:t.feedUrl,children:[s.jsx("span",{className:"rss-url-icon",children:""}),s.jsx("span",{className:"rss-url-text",children:wz(t.feedUrl)})]}),s.jsxs("div",{className:"rss-settings-row",children:[s.jsxs("span",{className:"rss-poll-badge",title:`Poll every ${F_(t.pollInterval)}`,children:[" ",F_(t.pollInterval)]}),t.maxEntries&&s.jsxs("span",{className:"rss-max-entries-badge",title:`Max ${t.maxEntries} entries`,children:[" ",t.maxEntries]}),o&&s.jsx("span",{className:"rss-tracking-badge",title:"Tracking seen items",children:""})]}),r&&s.jsxs("div",{className:"rss-filters-row",children:[t.filters?.keywords&&t.filters.keywords.length>0&&s.jsxs("span",{className:"rss-filter-badge",title:`Keywords: ${t.filters.keywords.join(", ")}`,children:[" ",t.filters.keywords.length," keyword",t.filters.keywords.length>1?"s":""]}),t.filters?.author&&s.jsxs("span",{className:"rss-filter-badge",title:`Author: ${t.filters.author}`,children:[" ",t.filters.author.length>10?t.filters.author.substring(0,10)+"...":t.filters.author]}),(t.filters?.dateFrom||t.filters?.dateTo)&&s.jsx("span",{className:"rss-filter-badge",title:"Date filter active",children:" Date"}),t.filters?.categories&&t.filters.categories.length>0&&s.jsxs("span",{className:"rss-filter-badge",title:`Categories: ${t.filters.categories.join(", ")}`,children:[" ",t.filters.categories.length]})]}),s.jsxs("div",{className:"rss-options-row",children:[t.includeContent&&s.jsx("span",{className:"rss-option-badge",title:"Including full content",children:" Full"}),t.parseMedia&&s.jsx("span",{className:"rss-option-badge",title:"Parsing media/enclosures",children:" Media"})]})]})})}),z_={read:{icon:"",label:"Read",color:"#3B82F6"},write:{icon:"",label:"Write",color:"#10B981"},delete:{icon:"",label:"Delete",color:"#EF4444"},list:{icon:"",label:"List",color:"#8B5CF6"}},Sz={s3:{icon:"",label:"S3"},gcs:{icon:"",label:"GCS"},azure:{icon:"",label:"Azure"}};function kz(e,t=35){if(!e||e.length<=t)return e;const n=e.lastIndexOf("/"),r=e.lastIndexOf("\\"),o=Math.max(n,r);if(o>0){const a=e.substring(o+1),l=e.substring(0,o);if(a.length<t-5){const u=t-a.length-4;if(u>3)return l.substring(0,u)+".../"+a}}return e.substring(0,t-3)+"..."}function Nz(e){if(e.cloud)return`${e.cloud.bucket}/${e.cloud.key}`;if(e.local)return e.local.path;if(e.list)return e.list.path}const jz=j.memo(function({data:t,selected:n}){const r=z_[t.operation]||z_.read,o=Nz(t),a=!!t.cloud,l=t.cloud?Sz[t.cloud.provider]:null;return s.jsx(dn,{type:"file",label:t.name||"File",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"file-node-content",children:[s.jsxs("div",{className:"file-operation-row",children:[s.jsxs("span",{className:"file-operation-badge",style:{backgroundColor:r.color},children:[s.jsx("span",{className:"file-operation-icon",children:r.icon}),s.jsx("span",{className:"file-operation-label",children:r.label})]}),a&&l&&s.jsxs("span",{className:"file-cloud-badge",title:`Cloud: ${l.label}`,children:[l.icon," ",l.label]}),!a&&o&&s.jsx("span",{className:"file-local-badge",title:"Local file system",children:" Local"})]}),o&&s.jsxs("div",{className:"file-path-preview",title:o,children:[s.jsx("span",{className:"file-path-icon",children:""}),s.jsx("span",{className:"file-path-text",children:kz(o)})]}),t.operation==="read"&&t.parse&&s.jsxs("div",{className:"file-format-row",children:[s.jsxs("span",{className:"file-format-badge",title:`Format: ${t.parse.format.toUpperCase()}`,children:[Ez(t.parse.format)," ",t.parse.format.toUpperCase()]}),t.parse.format==="csv"&&t.parse.csvOptions?.hasHeader&&s.jsx("span",{className:"file-option-badge",title:"Has header row",children:" Headers"})]}),t.operation==="write"&&t.write&&s.jsxs("div",{className:"file-write-row",children:[t.write.append&&s.jsx("span",{className:"file-option-badge",title:"Append mode",children:" Append"}),t.write.createDirs&&s.jsx("span",{className:"file-option-badge",title:"Create directories",children:" Create dirs"})]}),t.operation==="list"&&t.list&&s.jsxs("div",{className:"file-list-row",children:[t.list.recursive&&s.jsx("span",{className:"file-option-badge",title:"Recursive listing",children:" Recursive"}),t.list.pattern&&s.jsxs("span",{className:"file-option-badge",title:`Pattern: ${t.list.pattern}`,children:[" ",t.list.pattern.length>10?t.list.pattern.substring(0,10)+"...":t.list.pattern]})]}),a&&t.cloud&&s.jsxs("div",{className:"file-cloud-row",children:[t.cloud.presignedUrl&&s.jsx("span",{className:"file-option-badge",title:"Generate presigned URL",children:" Presigned"}),t.cloud.region&&s.jsxs("span",{className:"file-region-badge",title:`Region: ${t.cloud.region}`,children:[" ",t.cloud.region]})]})]})})});function Ez(e){switch(e){case"json":return"";case"csv":return"";case"xml":return"";case"text":return"";case"binary":return"";default:return""}}const Cz={action_trigger:NF,action_http:TF,action_set:PF,action_transform:MF,action_switch:qF,action_loop:BF,action_merge:VF,action_wait:JF,action_code:rz,action_database:hz,action_email:gz,action_notification:bz,action_rss:_z,action_file:jz},Tz={llm:yA,sequential:vA,loop:xA,parallel:bA,router:wA,start:_A,end:SA,...Cz};function Az({id:e,sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:a,targetPosition:l,data:u,selected:d}){const[p]=gc({sourceX:t,sourceY:n,sourcePosition:a,targetX:r,targetY:o,targetPosition:l}),f=u,m=f?.animated||!1,g=f?.isExecutionPath||!1,v=f?.animationSpeed||1,b=j.useMemo(()=>`${.5/v}s`,[v]),{strokeColor:x,strokeWidth:_,strokeDasharray:k}=j.useMemo(()=>m?{strokeColor:"#ef4444",strokeWidth:3,strokeDasharray:"8 4"}:g?{strokeColor:"#22c55e",strokeWidth:2.5,strokeDasharray:"none"}:d?{strokeColor:"#3b82f6",strokeWidth:2.5,strokeDasharray:"none"}:{strokeColor:"#6b7280",strokeWidth:2,strokeDasharray:"none"},[m,g,d]);return s.jsxs(s.Fragment,{children:[s.jsx("path",{id:e,d:p,fill:"none",stroke:x,strokeWidth:_,strokeDasharray:k,strokeLinecap:"round",className:"react-flow__edge-path",style:{animation:m?`dashFlow ${b} linear infinite`:"none",transition:"stroke 0.2s ease, stroke-width 0.2s ease"}}),s.jsx("path",{d:p,fill:"none",stroke:"transparent",strokeWidth:20,className:"react-flow__edge-interaction"}),m&&s.jsx("path",{d:p,fill:"none",stroke:x,strokeWidth:_+4,strokeDasharray:k,strokeLinecap:"round",style:{animation:`dashFlow ${b} linear infinite`,opacity:.3,filter:"blur(4px)"}}),s.jsx("style",{children:`
        @keyframes dashFlow {
          0% {
            stroke-dashoffset: 0;
          }
          100% {
            stroke-dashoffset: -12;
          }
        }
      `})]})}const jA=j.memo(function({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:l,targetPosition:u,data:d,selected:p}){const[f,m]=j.useState(!1),[g,v,b]=Lv({sourceX:n,sourceY:r,sourcePosition:l,targetX:o,targetY:a,targetPosition:u}),x=d,_=x?.animated||!1,k=x?.showOverlay&&x?.stateKeys&&x.stateKeys.length>0,S=x?.stateKeys||[],N=x?.highlightedKey,T=x?.onKeyHover,A=N&&S.includes(N),C=j.useCallback(H=>{m(!0),T?.(H)},[T]),P=j.useCallback(()=>{m(!1),T?.(null)},[T]),O=()=>_?"#ef4444":A?"#0F8A8A":p?"#3b82f6":"#6b7280",I=()=>_||A?3:p?2.5:2;return s.jsxs(s.Fragment,{children:[s.jsx("path",{id:t,d:g,fill:"none",stroke:O(),strokeWidth:I(),strokeDasharray:_?"8 4":"none",style:{animation:_?"dashFlow 0.5s linear infinite":"none",transition:"stroke 0.2s ease, stroke-width 0.2s ease"},className:"react-flow__edge-path"}),s.jsx("path",{d:g,fill:"none",stroke:"transparent",strokeWidth:20,className:"react-flow__edge-interaction"}),k&&s.jsx(Wq,{children:s.jsx("div",{className:"data-flow-label",style:{position:"absolute",transform:`translate(-50%, -50%) translate(${v}px, ${b}px)`,pointerEvents:"all",zIndex:f?10:1},onMouseEnter:()=>C(S[0]),onMouseLeave:P,children:s.jsx("div",{className:`
                data-flow-badge
                ${f||A?"data-flow-badge-highlighted":""}
              `,children:S.map((H,D)=>s.jsxs("span",{className:"data-flow-key",onMouseEnter:()=>C(H),children:[H,D<S.length-1&&s.jsx("span",{className:"data-flow-separator",children:", "})]},H))})})}),s.jsx("style",{children:`
        @keyframes dashFlow { 
          to { stroke-dashoffset: -12; } 
        }
        
        .data-flow-badge {
          display: inline-flex;
          align-items: center;
          gap: 2px;
          padding: 3px 8px;
          background: var(--accent-primary, #0F8A8A);
          color: white;
          border-radius: 12px;
          font-size: 11px;
          font-weight: 500;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
          white-space: nowrap;
          transition: all 0.2s ease;
          cursor: pointer;
        }
        
        .data-flow-badge:hover,
        .data-flow-badge-highlighted {
          background: var(--accent-primary, #0F8A8A);
          transform: scale(1.05);
          box-shadow: 0 4px 8px rgba(15, 138, 138, 0.4);
        }
        
        .data-flow-key {
          font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
        }
        
        .data-flow-separator {
          color: rgba(255, 255, 255, 0.7);
        }
        
        /* Dark theme adjustments */
        :root[data-theme="dark"] .data-flow-badge {
          background: var(--accent-primary, #4fd1c5);
          color: #1a1a2e;
        }
        
        :root[data-theme="dark"] .data-flow-badge:hover,
        :root[data-theme="dark"] .data-flow-badge-highlighted {
          box-shadow: 0 4px 8px rgba(79, 209, 197, 0.4);
        }
        
        :root[data-theme="dark"] .data-flow-separator {
          color: rgba(26, 26, 46, 0.7);
        }
      `})]})});jA.displayName="DataFlowEdge";const Pz={animated:Az,dataflow:jA},Iz={thinking:"",tool:"",decision:""},Rz={thinking:"thought-bubble-thinking",tool:"thought-bubble-tool",decision:"thought-bubble-decision"},EA=j.memo(function({text:t,position:n="right",streaming:r=!1,type:o="thinking",visible:a=!0,id:l,sourceNodeId:u,onDismiss:d,maxWidth:p=280,zIndex:f=1e3}){const[m,g]=j.useState(!1),[v,b]=j.useState(a),x=j.useRef(null);if(j.useEffect(()=>{if(a)b(!0),requestAnimationFrame(()=>{g(!0)});else{g(!1);const T=setTimeout(()=>{b(!1),d?.()},200);return()=>clearTimeout(T)}},[a,d]),!v||!t)return null;const _=Iz[o],k=Rz[o],S=`thought-bubble-${n}`,N=m?"thought-bubble-enter":"thought-bubble-exit";return s.jsxs("div",{ref:x,className:`thought-bubble ${S} ${k} ${N}`,style:{maxWidth:p,zIndex:f},"data-bubble-id":l,"data-source-node":u,role:"status","aria-live":"polite","aria-label":`${o} bubble: ${t}`,children:[s.jsx("div",{className:"thought-bubble-pointer"}),s.jsxs("div",{className:"thought-bubble-content",children:[s.jsx("span",{className:"thought-bubble-icon","aria-hidden":"true",children:_}),s.jsxs("span",{className:"thought-bubble-text",children:[t,r&&s.jsx("span",{className:"thought-bubble-cursor","aria-hidden":"true",children:""})]})]})]})});EA.displayName="ThoughtBubble";const Oz=180,Mz=100,Dz=280,Lz=80,Ul=16,qz=["right","top","left","bottom"];function CA(e,t,n,r,o){const a=Dz,l=Lz;switch(o){case"right":return{x:e+n+Ul,y:t+(r-l)/2,width:a,height:l};case"left":return{x:e-a-Ul,y:t+(r-l)/2,width:a,height:l};case"top":return{x:e+(n-a)/2,y:t-l-Ul,width:a,height:l};case"bottom":return{x:e+(n-a)/2,y:t+r+Ul,width:a,height:l}}}function B_(e,t){return!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)}function Fz(e,t,n){for(const r of qz){const o=CA(e.x,e.y,e.width,e.height,r),a=t.some(u=>B_(o,u)),l=n.some(u=>B_(o,u.bounds));if(!a&&!l)return r}return"right"}const zz=j.memo(function({bubbles:t,onDismiss:n}){const{getNodes:r}=Ki(),o=j.useMemo(()=>r().map(d=>({id:d.id,x:d.position.x,y:d.position.y,width:d.measured?.width??d.width??Oz,height:d.measured?.height??d.height??Mz})),[r]),a=j.useMemo(()=>{const u=[];return t.map(d=>{const p=o.find(v=>v.id===d.nodeId);if(!p)return{...d,position:"right"};const f=o.filter(v=>v.id!==d.nodeId),m=Fz(p,f,u),g=CA(p.x,p.y,p.width,p.height,m);return u.push({position:m,bounds:g}),{...d,position:m}})},[t,o]),l=j.useCallback(u=>{n?.(u)},[n]);return t.length===0?null:s.jsx(s.Fragment,{children:a.map((u,d)=>s.jsx(EA,{id:u.id,text:u.text,type:u.type,position:u.position,streaming:u.streaming,sourceNodeId:u.nodeId,visible:!0,zIndex:1e3+d,onDismiss:()=>l(u.id)},u.id))})});zz.displayName="ThoughtBubbleManager";function Bz({onConfirm:e,onClose:t}){const[n,r]=j.useState(""),o=a=>{a.preventDefault(),n.trim()&&e(n.trim())};return s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:t,children:s.jsxs("div",{className:"rounded-lg w-96 flex flex-col shadow-xl",style:{backgroundColor:"var(--surface-panel)",border:"1px solid var(--border-default)"},onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"New Project"}),s.jsx("button",{onClick:t,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsxs("form",{onSubmit:o,className:"p-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Project Name"}),s.jsx("input",{autoFocus:!0,type:"text",value:n,onChange:a=>r(a.target.value),className:"w-full px-3 py-2 rounded text-sm focus:outline-none",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},placeholder:"My Awesome Agent"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:t,className:"px-3 py-2 rounded text-sm hover:opacity-80",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!n.trim(),className:"px-3 py-2 rounded text-sm text-white disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90",style:{backgroundColor:"var(--accent-primary)"},children:"Create Project"})]})]})]})})}function $_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $z(e){if(Array.isArray(e))return e}function Hz(e,t,n){return(t=Qz(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vz(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,o,a,l,u=[],d=!0,p=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(d=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);d=!0);}catch(f){p=!0,o=f}finally{try{if(!d&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(p)throw o}}return u}}function Uz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function V_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H_(Object(n),!0).forEach(function(r){Hz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wz(e,t){if(e==null)return{};var n,r,o=Kz(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Kz(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Gz(e,t){return $z(e)||Vz(e,t)||Xz(e,t)||Uz()}function Yz(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qz(e){var t=Yz(e,"string");return typeof t=="symbol"?t:t+""}function Xz(e,t){if(e){if(typeof e=="string")return $_(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$_(e,t):void 0}}function Jz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function W_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U_(Object(n),!0).forEach(function(r){Jz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zz(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(o,a){return a(o)},r)}}function Us(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];return t.apply(n,[].concat(o,u))}}}function xc(e){return{}.toString.call(e).includes("Object")}function eB(e){return!Object.keys(e).length}function da(e){return typeof e=="function"}function tB(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nB(e,t){return xc(t)||ho("changeType"),Object.keys(t).some(function(n){return!tB(e,n)})&&ho("changeField"),t}function rB(e){da(e)||ho("selectorType")}function oB(e){da(e)||xc(e)||ho("handlerType"),xc(e)&&Object.values(e).some(function(t){return!da(t)})&&ho("handlersType")}function iB(e){e||ho("initialIsRequired"),xc(e)||ho("initialType"),eB(e)&&ho("initialContent")}function sB(e,t){throw new Error(e[t]||e.default)}var aB={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ho=Us(sB)(aB),Wl={changes:nB,selector:rB,handler:oB,initial:iB};function lB(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wl.initial(e),Wl.handler(t);var n={current:e},r=Us(dB)(n,t),o=Us(uB)(n),a=Us(Wl.changes)(e),l=Us(cB)(n);function u(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return Wl.selector(p),p(n.current)}function d(p){Zz(r,o,a,l)(p)}return[u,d]}function cB(e,t){return da(t)?t(e.current):t}function uB(e,t){return e.current=W_(W_({},e.current),t),t}function dB(e,t,n){return da(t)?t(e.current):Object.keys(n).forEach(function(r){var o;return(o=t[r])===null||o===void 0?void 0:o.call(t,e.current[r])}),n}var pB={create:lB},fB={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function hB(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];return t.apply(n,[].concat(o,u))}}}function mB(e){return{}.toString.call(e).includes("Object")}function gB(e){return e||K_("configIsRequired"),mB(e)||K_("configType"),e.urls?(yB(),{paths:{vs:e.urls.monacoBase}}):e}function yB(){console.warn(TA.deprecation)}function vB(e,t){throw new Error(e[t]||e.default)}var TA={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},K_=hB(vB)(TA),xB={config:gB},bB=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(o){return n.reduceRight(function(a,l){return l(a)},o)}};function AA(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],AA(e[n],t[n]))}),V_(V_({},e),t)}var wB={type:"cancelation",msg:"operation is manually canceled"};function sp(e){var t=!1,n=new Promise(function(r,o){e.then(function(a){return t?o(wB):r(a)}),e.catch(o)});return n.cancel=function(){return t=!0},n}var _B=["monaco"],SB=pB.create({config:fB,isInitialized:!1,resolve:null,reject:null,monaco:null}),PA=Gz(SB,2),_a=PA[0],Fc=PA[1];function kB(e){var t=xB.config(e),n=t.monaco,r=Wz(t,_B);Fc(function(o){return{config:AA(o.config,r),monaco:n}})}function NB(){var e=_a(function(t){var n=t.monaco,r=t.isInitialized,o=t.resolve;return{monaco:n,isInitialized:r,resolve:o}});if(!e.isInitialized){if(Fc({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),sp(ap);if(window.monaco&&window.monaco.editor)return IA(window.monaco),e.resolve(window.monaco),sp(ap);bB(jB,CB)(TB)}return sp(ap)}function jB(e){return document.body.appendChild(e)}function EB(e){var t=document.createElement("script");return e&&(t.src=e),t}function CB(e){var t=_a(function(r){var o=r.config,a=r.reject;return{config:o,reject:a}}),n=EB("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function TB(){var e=_a(function(n){var r=n.config,o=n.resolve,a=n.reject;return{config:r,resolve:o,reject:a}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){var r=n.m||n;IA(r),e.resolve(r)},function(n){e.reject(n)})}function IA(e){_a().monaco||Fc({monaco:e})}function AB(){return _a(function(e){var t=e.monaco;return t})}var ap=new Promise(function(e,t){return Fc({resolve:e,reject:t})}),RA={config:kB,init:NB,__getMonacoInstance:AB},PB={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},lp=PB,IB={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},RB=IB;function OB({children:e}){return Lt.createElement("div",{style:RB.container},e)}var MB=OB,DB=MB;function LB({width:e,height:t,isEditorReady:n,loading:r,_ref:o,className:a,wrapperProps:l}){return Lt.createElement("section",{style:{...lp.wrapper,width:e,height:t},...l},!n&&Lt.createElement(DB,null,r),Lt.createElement("div",{ref:o,style:{...lp.fullWidth,...!n&&lp.hide},className:a}))}var qB=LB,OA=j.memo(qB);function FB(e){j.useEffect(e,[])}var MA=FB;function zB(e,t,n=!0){let r=j.useRef(!0);j.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var kn=zB;function Xs(){}function Oi(e,t,n,r){return BB(e,r)||$B(e,t,n,r)}function BB(e,t){return e.editor.getModel(DA(e,t))}function $B(e,t,n,r){return e.editor.createModel(t,n,r?DA(e,r):void 0)}function DA(e,t){return e.Uri.parse(t)}function HB({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:o,originalModelPath:a,modifiedModelPath:l,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:d=!1,theme:p="light",loading:f="Loading...",options:m={},height:g="100%",width:v="100%",className:b,wrapperProps:x={},beforeMount:_=Xs,onMount:k=Xs}){let[S,N]=j.useState(!1),[T,A]=j.useState(!0),C=j.useRef(null),P=j.useRef(null),O=j.useRef(null),I=j.useRef(k),H=j.useRef(_),D=j.useRef(!1);MA(()=>{let q=RA.init();return q.then($=>(P.current=$)&&A(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>C.current?L():q.cancel()}),kn(()=>{if(C.current&&P.current){let q=C.current.getOriginalEditor(),$=Oi(P.current,e||"",r||n||"text",a||"");$!==q.getModel()&&q.setModel($)}},[a],S),kn(()=>{if(C.current&&P.current){let q=C.current.getModifiedEditor(),$=Oi(P.current,t||"",o||n||"text",l||"");$!==q.getModel()&&q.setModel($)}},[l],S),kn(()=>{let q=C.current.getModifiedEditor();q.getOption(P.current.editor.EditorOption.readOnly)?q.setValue(t||""):t!==q.getValue()&&(q.executeEdits("",[{range:q.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),q.pushUndoStop())},[t],S),kn(()=>{C.current?.getModel()?.original.setValue(e||"")},[e],S),kn(()=>{let{original:q,modified:$}=C.current.getModel();P.current.editor.setModelLanguage(q,r||n||"text"),P.current.editor.setModelLanguage($,o||n||"text")},[n,r,o],S),kn(()=>{P.current?.editor.setTheme(p)},[p],S),kn(()=>{C.current?.updateOptions(m)},[m],S);let z=j.useCallback(()=>{if(!P.current)return;H.current(P.current);let q=Oi(P.current,e||"",r||n||"text",a||""),$=Oi(P.current,t||"",o||n||"text",l||"");C.current?.setModel({original:q,modified:$})},[n,t,o,e,r,a,l]),W=j.useCallback(()=>{!D.current&&O.current&&(C.current=P.current.editor.createDiffEditor(O.current,{automaticLayout:!0,...m}),z(),P.current?.editor.setTheme(p),N(!0),D.current=!0)},[m,p,z]);j.useEffect(()=>{S&&I.current(C.current,P.current)},[S]),j.useEffect(()=>{!T&&!S&&W()},[T,S,W]);function L(){let q=C.current?.getModel();u||q?.original?.dispose(),d||q?.modified?.dispose(),C.current?.dispose()}return Lt.createElement(OA,{width:v,height:g,isEditorReady:S,loading:f,_ref:O,className:b,wrapperProps:x})}var VB=HB;j.memo(VB);function UB(e){let t=j.useRef();return j.useEffect(()=>{t.current=e},[e]),t.current}var WB=UB,Kl=new Map;function KB({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:o,path:a,theme:l="light",line:u,loading:d="Loading...",options:p={},overrideServices:f={},saveViewState:m=!0,keepCurrentModel:g=!1,width:v="100%",height:b="100%",className:x,wrapperProps:_={},beforeMount:k=Xs,onMount:S=Xs,onChange:N,onValidate:T=Xs}){let[A,C]=j.useState(!1),[P,O]=j.useState(!0),I=j.useRef(null),H=j.useRef(null),D=j.useRef(null),z=j.useRef(S),W=j.useRef(k),L=j.useRef(),q=j.useRef(r),$=WB(a),G=j.useRef(!1),U=j.useRef(!1);MA(()=>{let B=RA.init();return B.then(Y=>(I.current=Y)&&O(!1)).catch(Y=>Y?.type!=="cancelation"&&console.error("Monaco initialization: error:",Y)),()=>H.current?R():B.cancel()}),kn(()=>{let B=Oi(I.current,e||r||"",t||o||"",a||n||"");B!==H.current?.getModel()&&(m&&Kl.set($,H.current?.saveViewState()),H.current?.setModel(B),m&&H.current?.restoreViewState(Kl.get(a)))},[a],A),kn(()=>{H.current?.updateOptions(p)},[p],A),kn(()=>{!H.current||r===void 0||(H.current.getOption(I.current.editor.EditorOption.readOnly)?H.current.setValue(r):r!==H.current.getValue()&&(U.current=!0,H.current.executeEdits("",[{range:H.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),H.current.pushUndoStop(),U.current=!1))},[r],A),kn(()=>{let B=H.current?.getModel();B&&o&&I.current?.editor.setModelLanguage(B,o)},[o],A),kn(()=>{u!==void 0&&H.current?.revealLine(u)},[u],A),kn(()=>{I.current?.editor.setTheme(l)},[l],A);let X=j.useCallback(()=>{if(!(!D.current||!I.current)&&!G.current){W.current(I.current);let B=a||n,Y=Oi(I.current,r||e||"",t||o||"",B||"");H.current=I.current?.editor.create(D.current,{model:Y,automaticLayout:!0,...p},f),m&&H.current.restoreViewState(Kl.get(B)),I.current.editor.setTheme(l),u!==void 0&&H.current.revealLine(u),C(!0),G.current=!0}},[e,t,n,r,o,a,p,f,m,l,u]);j.useEffect(()=>{A&&z.current(H.current,I.current)},[A]),j.useEffect(()=>{!P&&!A&&X()},[P,A,X]),q.current=r,j.useEffect(()=>{A&&N&&(L.current?.dispose(),L.current=H.current?.onDidChangeModelContent(B=>{U.current||N(H.current.getValue(),B)}))},[A,N]),j.useEffect(()=>{if(A){let B=I.current.editor.onDidChangeMarkers(Y=>{let F=H.current.getModel()?.uri;if(F&&Y.find(K=>K.path===F.path)){let K=I.current.editor.getModelMarkers({resource:F});T?.(K)}});return()=>{B?.dispose()}}return()=>{}},[A,T]);function R(){L.current?.dispose(),g?m&&Kl.set(a,H.current.saveViewState()):H.current.getModel()?.dispose(),H.current.dispose()}return Lt.createElement(OA,{width:v,height:b,isEditorReady:A,loading:d,_ref:D,className:x,wrapperProps:_})}var GB=KB,YB=j.memo(GB),LA=YB;function QB({code:e,onClose:t}){const{mode:n}=Or(),r=n==="light"?"light":"vs-dark";return s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:t,children:s.jsxs("div",{className:"rounded-lg w-4/5 h-4/5 flex flex-col",style:{backgroundColor:"var(--surface-panel)"},onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Generated Rust Code"}),s.jsx("button",{onClick:t,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsx("div",{className:"flex-1 overflow-auto p-4",children:e.files.map(o=>s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h3",{className:"text-sm font-mono",style:{color:"var(--accent-primary)"},children:o.path}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(o.content),className:"text-xs px-2 py-1 rounded hover:opacity-80",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Copy"})]}),s.jsx("div",{className:"rounded overflow-hidden",style:{border:"1px solid var(--border-default)"},children:s.jsx(LA,{height:Math.min(600,o.content.split(`
`).length*19+20),language:o.path.endsWith(".toml")?"toml":"rust",value:o.content,theme:r,options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:12}})})]},o.path))})]})})}function XB({building:e,success:t,output:n,path:r,onClose:o,isAutobuild:a=!1}){const l=j.useRef(null);return j.useEffect(()=>{l.current&&e&&(l.current.scrollTop=l.current.scrollHeight)},[n,e]),s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:o,children:s.jsxs("div",{className:"rounded-lg w-3/5 max-h-4/5 flex flex-col",style:{backgroundColor:"var(--surface-panel)"},onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:`text-lg font-semibold ${e?"text-blue-500":t?"text-green-500":"text-red-500"}`,children:e?a?" Auto Building...":" Building...":t?" Build Successful":" Build Failed"}),s.jsx("button",{onClick:o,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[r&&s.jsxs("div",{className:"mb-4 p-3 rounded border",style:{backgroundColor:"rgba(56, 161, 105, 0.1)",borderColor:"var(--accent-success)"},children:[s.jsx("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Binary path:"}),s.jsx("code",{className:"text-sm font-mono",style:{color:"var(--accent-success)"},children:r})]}),s.jsx("pre",{ref:l,className:"p-4 rounded text-xs overflow-auto whitespace-pre max-h-96",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:n})]})]})})}const JB=[{name:"Calculator",icon:"",template:{name:"calculator",description:"Evaluate mathematical expressions with support for +, -, *, /, ^, %, sqrt, sin, cos, tan, log, abs, round, floor, ceil",parameters:[{name:"expression",param_type:"string",description:'Math expression to evaluate (e.g., "2 + 3 * 4", "sqrt(16)", "sin(3.14159/2)")',required:!0}],code:`fn eval_expr(expr: &str) -> Result<f64, String> {
    let expr = expr.trim().to_lowercase();
    
    // Handle functions first
    for func in ["sqrt", "sin", "cos", "tan", "log", "abs", "round", "floor", "ceil"] {
        if expr.starts_with(func) && expr.contains('(') {
            let start = expr.find('(').unwrap();
            let end = expr.rfind(')').ok_or("Missing closing parenthesis")?;
            let inner = eval_expr(&expr[start+1..end])?;
            let result = match func {
                "sqrt" => inner.sqrt(),
                "sin" => inner.sin(),
                "cos" => inner.cos(),
                "tan" => inner.tan(),
                "log" => inner.ln(),
                "abs" => inner.abs(),
                "round" => inner.round(),
                "floor" => inner.floor(),
                "ceil" => inner.ceil(),
                _ => return Err(format!("Unknown function: {}", func)),
            };
            return Ok(result);
        }
    }
    
    // Handle parentheses
    if let (Some(start), Some(end)) = (expr.find('('), expr.rfind(')')) {
        let before = &expr[..start];
        let inner = eval_expr(&expr[start+1..end])?;
        let after = &expr[end+1..];
        return eval_expr(&format!("{}{}{}", before, inner, after));
    }
    
    // Handle operators by precedence (low to high)
    for op in ['+', '-'] {
        if let Some(pos) = expr.rfind(|c| c == op && !expr[..expr.find(c).unwrap_or(0)].ends_with('e')) {
            if pos > 0 {
                let left = eval_expr(&expr[..pos])?;
                let right = eval_expr(&expr[pos+1..])?;
                return Ok(if op == '+' { left + right } else { left - right });
            }
        }
    }
    for op in ['*', '/', '%'] {
        if let Some(pos) = expr.rfind(op) {
            let left = eval_expr(&expr[..pos])?;
            let right = eval_expr(&expr[pos+1..])?;
            return Ok(match op {
                '*' => left * right,
                '/' => if right != 0.0 { left / right } else { return Err("Division by zero".into()) },
                '%' => left % right,
                _ => unreachable!(),
            });
        }
    }
    if let Some(pos) = expr.rfind('^') {
        let left = eval_expr(&expr[..pos])?;
        let right = eval_expr(&expr[pos+1..])?;
        return Ok(left.powf(right));
    }
    
    // Parse number or constant
    match expr.trim() {
        "pi" => Ok(std::f64::consts::PI),
        "e" => Ok(std::f64::consts::E),
        s => s.parse::<f64>().map_err(|_| format!("Invalid number: {}", s)),
    }
}

match eval_expr(expression) {
    Ok(result) => Ok(json!({ "result": result, "expression": expression })),
    Err(e) => Err(AdkError::Tool(e))
}`}},{name:"HTTP Request",icon:"",template:{name:"http_request",description:"Make HTTP GET/POST requests to URLs",parameters:[{name:"url",param_type:"string",description:"URL to request",required:!0},{name:"method",param_type:"string",description:"HTTP method (GET or POST)",required:!1},{name:"body",param_type:"string",description:"Request body for POST",required:!1}],code:`let client = reqwest::Client::new();
let method = if method.is_empty() { "GET" } else { method };
let response = match method.to_uppercase().as_str() {
    "GET" => client.get(url).send().await,
    "POST" => client.post(url).body(body.to_string()).send().await,
    _ => return Err(AdkError::Tool(format!("Unsupported method: {}", method))),
};
match response {
    Ok(resp) => {
        let status = resp.status().as_u16();
        let text = resp.text().await.unwrap_or_default();
        Ok(json!({ "status": status, "body": text }))
    }
    Err(e) => Err(AdkError::Tool(format!("Request failed: {}", e)))
}`}},{name:"Read File",icon:"",template:{name:"read_file",description:"Read contents of a file",parameters:[{name:"path",param_type:"string",description:"File path to read",required:!0}],code:`match std::fs::read_to_string(path) {
    Ok(content) => Ok(json!({ "content": content })),
    Err(e) => Err(AdkError::Tool(format!("Failed to read file: {}", e)))
}`}},{name:"Write File",icon:"",template:{name:"write_file",description:"Write content to a file",parameters:[{name:"path",param_type:"string",description:"File path to write",required:!0},{name:"content",param_type:"string",description:"Content to write",required:!0}],code:`match std::fs::write(path, content) {
    Ok(_) => Ok(json!({ "status": "success", "path": path })),
    Err(e) => Err(AdkError::Tool(format!("Failed to write file: {}", e)))
}`}},{name:"JSON Parser",icon:"",template:{name:"parse_json",description:"Parse JSON string and extract a field",parameters:[{name:"json_str",param_type:"string",description:"JSON string to parse",required:!0},{name:"field",param_type:"string",description:"Field to extract (dot notation)",required:!1}],code:`let parsed: Value = serde_json::from_str(json_str)
    .map_err(|e| AdkError::Tool(format!("Invalid JSON: {}", e)))?;
if field.is_empty() {
    Ok(parsed)
} else {
    let value = field.split('.').fold(Some(&parsed), |acc, key| {
        acc.and_then(|v| v.get(key))
    });
    Ok(value.cloned().unwrap_or(Value::Null))
}`}},{name:"Shell Command",icon:"",template:{name:"run_command",description:"Execute a shell command",parameters:[{name:"command",param_type:"string",description:"Command to execute",required:!0},{name:"args",param_type:"string",description:"Space-separated arguments",required:!1}],code:`use std::process::Command;
let args_vec: Vec<&str> = if args.is_empty() { vec![] } else { args.split_whitespace().collect() };
match Command::new(command).args(&args_vec).output() {
    Ok(output) => Ok(json!({
        "stdout": String::from_utf8_lossy(&output.stdout),
        "stderr": String::from_utf8_lossy(&output.stderr),
        "exit_code": output.status.code()
    })),
    Err(e) => Err(AdkError::Tool(format!("Command failed: {}", e)))
}`}}],ZB=[{name:"Time",icon:"",command:"uvx",args:["mcp-server-time"],desc:"Get current time and timezone info"},{name:"Fetch",icon:"",command:"uvx",args:["mcp-server-fetch"],desc:"Fetch and parse web pages"},{name:"Filesystem",icon:"",command:"npx",args:["-y","@modelcontextprotocol/server-filesystem","/tmp"],desc:"Read, write, and manage files"},{name:"GitHub",icon:"",command:"npx",args:["-y","@modelcontextprotocol/server-github"],desc:"GitHub repos, issues, PRs"},{name:"SQLite",icon:"",command:"uvx",args:["mcp-server-sqlite","--db-path","/tmp/data.db"],desc:"Query SQLite databases"},{name:"Memory",icon:"",command:"npx",args:["-y","@modelcontextprotocol/server-memory"],desc:"Persistent key-value store"},{name:"Brave Search",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-brave-search"],desc:"Web search via Brave"},{name:"Puppeteer",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-puppeteer"],desc:"Browser automation"},{name:"Slack",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-slack"],desc:"Slack messaging"},{name:"Google Drive",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-gdrive"],desc:"Google Drive files"},{name:"PostgreSQL",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-postgres"],desc:"PostgreSQL queries"},{name:"Everything",icon:"",command:"npx",args:["-y","@modelcontextprotocol/server-everything"],desc:"Demo server with all features"}];function qA(e){const t=e.name||"my_function",n=e.parameters.map(o=>{const a=o.param_type==="number"?"as_f64().unwrap_or(0.0)":o.param_type==="boolean"?"as_bool().unwrap_or(false)":'as_str().unwrap_or("")';return`    let ${o.name} = args["${o.name}"].${a};`}).join(`
`),r=e.code||'Ok(json!({"status": "ok"}))';return`async fn ${t}_fn(_ctx: Arc<dyn ToolContext>, args: Value) -> Result<Value, AdkError> {
${n}
    ${r}
}`}function e$(e,t){const n=e.split(`
`),r=t.parameters.length+1,o=n.length-1;return r>=o?t.code||"":n.slice(r,o).map(a=>a.replace(/^ {4}/,"")).join(`
`)}function t$({config:e,onUpdate:t,onClose:n}){const{mode:r}=Or(),o=r==="light"?"light":"vs-dark";return s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:n,children:s.jsxs("div",{className:"rounded-lg w-11/12 h-5/6 flex flex-col",style:{backgroundColor:"var(--surface-panel)"},onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsxs("h2",{className:"text-lg font-semibold",style:{color:"var(--accent-primary)"},children:[e.name||"function","_fn"]}),s.jsx("button",{onClick:n,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(LA,{height:"100%",defaultLanguage:"rust",theme:o,value:qA(e),onChange:a=>a&&t({...e,code:e$(a,e)}),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:4}})}),s.jsx("div",{className:"p-4 border-t flex justify-end",style:{borderColor:"var(--border-default)"},children:s.jsx("button",{onClick:n,className:"px-4 py-2 rounded text-sm text-white",style:{backgroundColor:"var(--accent-primary)"},children:"Done"})})]})})}const cv=[{id:"welcome",title:"Welcome to ADK Studio!",description:"ADK Studio is a visual builder for creating AI agent workflows. Let's walk through the basics to get you started.",icon:"",tips:["Build complex agent systems visually","Test and debug in real-time","Export production-ready Rust code"],duration:6e3},{id:"create-project",title:"Create a Project",description:"Start by creating a new project. Each project contains your agent workflow and configuration.",icon:"",tips:['Click "File  New Project" in the menu',"Give your project a descriptive name","Or select a template to start quickly"],duration:5e3},{id:"add-agents",title:"Add Agents",description:"Drag agents from the left palette onto the canvas. Each agent type has different capabilities.",icon:"",tips:["LLM Agent: Basic AI agent with model access","Sequential: Run agents in order","Parallel: Run agents simultaneously","Loop: Iterate until a condition is met","Router: Route to different agents based on input"],duration:7e3},{id:"action-nodes",title:"Action Nodes",description:"Action nodes handle deterministic, non-AI tasks in your workflow  API calls, data transforms, branching, and more.",icon:"",tips:[" Trigger: Start workflows via webhook, schedule, or event"," HTTP: Make API calls with auth, headers, and body"," Switch: Route data based on conditions"," Transform: Reshape data with JSONPath or JavaScript"," Database: Query PostgreSQL, MySQL, MongoDB, Redis"," Email &  Notifications: Send alerts via Slack, Discord, Teams"," Code: Run sandboxed JavaScript for custom logic"],duration:8e3},{id:"connect-nodes",title:"Connect Nodes",description:"Connect agents and action nodes by dragging from one node's output handle to another's input handle.",icon:"",tips:["Drag from the bottom handle to the top handle","Double-click an edge to remove it","Use the auto-layout button to organize nodes"],duration:5e3},{id:"configure-agents",title:"Configure Agents",description:"Click on an agent to open its properties panel. Configure the model, instructions, and tools.",icon:"",tips:["Set the system instruction for each agent","Add tools like Google Search or Code Execution","Configure model parameters like temperature"],duration:5e3},{id:"run-tests",title:"Build & Test",description:"Build your project and test it in the console. Watch agents execute in real-time!",icon:"",tips:['Click "Build" to compile your workflow',"Use the console to send test messages","Watch the timeline to debug execution","Inspect state at each node"],duration:5e3},{id:"complete",title:"You're Ready!",description:"You now know the basics of ADK Studio. Explore templates, experiment with different agent types, and build amazing AI workflows!",icon:"",tips:["Browse the Template Gallery for inspiration","Export your workflow as Rust code","Check the Help menu for keyboard shortcuts"],duration:4e3}],cp=cv.length;function n$({index:e,currentStep:t,duration:n,isPaused:r,onSegmentComplete:o}){const a=j.useRef(null),l=j.useRef(null);return j.useEffect(()=>{const u=a.current;if(!u)return;if(e<t){u.style.width="100%",l.current&&(l.current.cancel(),l.current=null);return}if(e>t){u.style.width="0%",l.current&&(l.current.cancel(),l.current=null);return}u.style.width="0%";const d=u.animate([{width:"0%"},{width:"100%"}],{duration:n,fill:"forwards",easing:"linear"});return l.current=d,d.onfinish=()=>{u.style.width="100%",o()},()=>{d.cancel()}},[e,t,n,o]),j.useEffect(()=>{const u=l.current;!u||e!==t||(r?u.pause():u.playState==="paused"&&u.play())},[r,e,t]),s.jsx("div",{style:{flex:1,height:"3px",borderRadius:"2px",backgroundColor:"var(--border-default, #333)",overflow:"hidden"},children:s.jsx("div",{ref:a,style:{height:"100%",width:"0%",borderRadius:"2px",background:"linear-gradient(90deg, var(--accent-primary, #0F8A8A), var(--accent-secondary, #4fd1c5))"}})})}function r$({onComplete:e,onSkip:t,onClose:n}){const[r,o]=j.useState(0),[a,l]=j.useState(!1),u=cv[r],d=r===0,p=r===cp-1,f=j.useCallback(()=>{p?e():o(g=>Math.min(g+1,cp-1))},[p,e]),m=j.useCallback(()=>{o(g=>Math.max(g-1,0))},[]);return j.useEffect(()=>{const g=v=>{v.key==="ArrowRight"||v.key==="Enter"?f():v.key==="ArrowLeft"?m():v.key==="Escape"?n():v.key===" "&&(v.preventDefault(),l(b=>!b))};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[f,m,n]),s.jsx("div",{role:"dialog","aria-modal":"true","aria-label":"Getting Started Guide",style:{position:"fixed",inset:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.55)",backdropFilter:"blur(4px)"},onClick:g=>{g.target===g.currentTarget&&n()},children:s.jsxs("div",{style:{width:"100%",maxWidth:560,borderRadius:16,overflow:"hidden",backgroundColor:"var(--surface-panel, #1e1e2e)",border:"1px solid var(--border-default, #333)",boxShadow:"0 24px 64px rgba(0,0,0,0.4)",color:"var(--text-primary, #e0e0e0)"},children:[s.jsx("div",{style:{display:"flex",gap:4,padding:"12px 16px 0 16px"},children:cv.map((g,v)=>s.jsx(n$,{index:v,currentStep:r,duration:g.duration,isPaused:a,onSegmentComplete:f},g.id))}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px 0"},children:[s.jsxs("span",{style:{fontSize:12,color:"var(--text-secondary, #888)"},children:[r+1," / ",cp]}),s.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[a&&s.jsx("span",{style:{fontSize:11,color:"var(--text-secondary, #888)",opacity:.7},children:"paused"}),s.jsx("button",{onClick:()=>l(g=>!g),title:a?"Resume":"Pause",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary, #888)",fontSize:16,padding:2},children:a?"":""}),s.jsx("button",{onClick:n,title:"Close",style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary, #888)",display:"flex",padding:2},children:s.jsx(Uv,{size:18})})]})]}),s.jsxs("div",{style:{padding:"20px 24px 8px"},children:[s.jsx("div",{style:{fontSize:40,marginBottom:8},children:u.icon}),s.jsx("h2",{style:{fontSize:22,fontWeight:700,margin:"0 0 8px"},children:u.title}),s.jsx("p",{style:{fontSize:14,lineHeight:1.6,color:"var(--text-secondary, #aaa)",margin:"0 0 16px"},children:u.description}),s.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",flexDirection:"column",gap:6},children:u.tips.map((g,v)=>s.jsxs("li",{style:{display:"flex",alignItems:"flex-start",gap:8,fontSize:13,lineHeight:1.5,color:"var(--text-primary, #ddd)",padding:"6px 10px",borderRadius:8,backgroundColor:"var(--bg-canvas, rgba(255,255,255,0.04))"},children:[s.jsx(gA,{size:14,style:{marginTop:3,flexShrink:0,color:"var(--accent-primary, #0F8A8A)"}}),s.jsx("span",{children:g})]},v))})]}),s.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px 20px"},children:[s.jsx("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",color:"var(--text-secondary, #888)",fontSize:13},children:"Skip guide"}),s.jsxs("div",{style:{display:"flex",gap:8},children:[!d&&s.jsxs("button",{onClick:m,style:{display:"flex",alignItems:"center",gap:4,padding:"8px 14px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",backgroundColor:"transparent",border:"1px solid var(--border-default, #444)",color:"var(--text-primary, #ddd)"},children:[s.jsx(fA,{size:16})," Back"]}),s.jsx("button",{onClick:f,style:{display:"flex",alignItems:"center",gap:4,padding:"8px 18px",borderRadius:8,fontSize:13,fontWeight:600,cursor:"pointer",border:"none",backgroundColor:"var(--accent-primary, #0F8A8A)",color:"#fff"},children:p?s.jsxs(s.Fragment,{children:[s.jsx(pA,{size:16})," Get Started"]}):s.jsxs(s.Fragment,{children:["Next ",s.jsx(hA,{size:16})]})})]})]})]})})}function o$({onAction:e}){const{template:t,steps:n,currentStep:r,isVisible:o,next:a,previous:l,goToStep:u,skip:d,complete:p}=uA();if(!o||!t||n.length===0)return null;const f=n[r],m=r===0,g=r===n.length-1,v=()=>{g?p():a()},b=()=>{m||l()},x=()=>{f.action&&e&&e(f.action.type,t.id)},_=k=>{switch(k){case"open-env":return s.jsx(P5,{size:14});case"open-docs":return s.jsx(_5,{size:14});case"run-workflow":return s.jsx(mA,{size:14});default:return null}};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},onClick:d,children:s.jsxs("div",{className:"w-full max-w-lg rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:"var(--surface-panel)"},onClick:k=>k.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gA,{size:20}),s.jsx("span",{className:"font-semibold",children:"Template Guide"})]}),s.jsx("button",{onClick:d,className:"p-1 rounded hover:bg-white/20 transition-colors",title:"Close",children:s.jsx(Uv,{size:20})})]}),s.jsx("div",{className:"flex gap-1 px-6 py-3",style:{backgroundColor:"var(--bg-secondary)"},children:n.map((k,S)=>s.jsx("button",{onClick:()=>u(S),className:"flex-1 h-2 rounded-full transition-all hover:opacity-80",style:{backgroundColor:S<=r?"var(--accent-primary)":"var(--border-default)",cursor:"pointer"},title:k.title},k.id))}),s.jsxs("div",{className:"px-6 py-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("span",{className:"text-5xl mb-4 block",children:f.icon}),s.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"var(--text-primary)"},children:f.title}),s.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:f.description})]}),s.jsx("div",{className:"rounded-lg p-4 mb-4",style:{backgroundColor:"var(--bg-secondary)"},children:s.jsx("ul",{className:"space-y-2",children:f.tips.map((k,S)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",style:{color:"var(--text-primary)"},children:[s.jsx(pA,{size:16,className:"mt-0.5 flex-shrink-0",style:{color:"var(--accent-primary)"}}),s.jsx("span",{children:k})]},S))})}),f.action&&s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)",border:"1px solid var(--accent-primary)"},children:[_(f.action.type),f.action.label]})}),s.jsxs("div",{className:"text-center text-xs",style:{color:"var(--text-muted)"},children:["Step ",r+1," of ",n.length]})]}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",style:{borderTop:"1px solid var(--border-default)",backgroundColor:"var(--bg-secondary)"},children:[s.jsx("button",{onClick:d,className:"px-4 py-2 text-sm rounded transition-colors hover:bg-opacity-80",style:{color:"var(--text-secondary)"},children:"Skip Guide"}),s.jsxs("div",{className:"flex items-center gap-2",children:[!m&&s.jsxs("button",{onClick:b,className:"flex items-center gap-1 px-4 py-2 text-sm rounded transition-colors",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:[s.jsx(fA,{size:16}),"Back"]}),s.jsxs("button",{onClick:v,className:"flex items-center gap-1 px-4 py-2 text-sm font-medium rounded transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:[g?"Get Started":"Next",!g&&s.jsx(hA,{size:16})]})]})]})]})})}function i$({compiledCode:e,onClearCompiledCode:t,buildOutput:n,building:r,isAutobuild:o,onClearBuildOutput:a,showCodeEditor:l,fnConfig:u,selectedToolId:d,onUpdateToolConfig:p,onCloseCodeEditor:f,showNewProjectModal:m,onNewProjectConfirm:g,onCloseNewProjectModal:v,showSettingsModal:b,projectId:x,projectSettings:_,projectName:k,projectDescription:S,settingsInitialTab:N,showApiKeyBanner:T,onSaveSettings:A,onCloseSettingsModal:C}){return s.jsxs(s.Fragment,{children:[e&&s.jsx(QB,{code:e,onClose:t}),n&&s.jsx(XB,{building:r,success:n.success,output:n.output,path:n.path,onClose:a,isAutobuild:o}),l&&u&&s.jsx(t$,{config:u,onUpdate:P=>p(d,P),onClose:f}),m&&s.jsx(Bz,{onConfirm:g,onClose:v}),b&&_&&s.jsx(vc,{settings:_,projectName:k,projectDescription:S,projectId:x,initialTab:N,showApiKeyBanner:T,onSave:A,onClose:C})]})}function s$(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const a$=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,l$=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,c$={};function G_(e,t){return(c$.jsx?l$:a$).test(e)}const u$=/[ \t\n\f\r]/g;function d$(e){return typeof e=="object"?e.type==="text"?Y_(e.value):!1:Y_(e)}function Y_(e){return e.replace(u$,"")===""}class Sa{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Sa.prototype.normal={};Sa.prototype.property={};Sa.prototype.space=void 0;function FA(e,t){const n={},r={};for(const o of e)Object.assign(n,o.property),Object.assign(r,o.normal);return new Sa(n,r,t)}function uv(e){return e.toLowerCase()}class pn{constructor(t,n){this.attribute=n,this.property=t}}pn.prototype.attribute="";pn.prototype.booleanish=!1;pn.prototype.boolean=!1;pn.prototype.commaOrSpaceSeparated=!1;pn.prototype.commaSeparated=!1;pn.prototype.defined=!1;pn.prototype.mustUseProperty=!1;pn.prototype.number=!1;pn.prototype.overloadedBoolean=!1;pn.prototype.property="";pn.prototype.spaceSeparated=!1;pn.prototype.space=void 0;let p$=0;const We=Uo(),Et=Uo(),dv=Uo(),xe=Uo(),st=Uo(),Li=Uo(),Sn=Uo();function Uo(){return 2**++p$}const pv=Object.freeze(Object.defineProperty({__proto__:null,boolean:We,booleanish:Et,commaOrSpaceSeparated:Sn,commaSeparated:Li,number:xe,overloadedBoolean:dv,spaceSeparated:st},Symbol.toStringTag,{value:"Module"})),up=Object.keys(pv);class Gv extends pn{constructor(t,n,r,o){let a=-1;if(super(t,n),Q_(this,"space",o),typeof r=="number")for(;++a<up.length;){const l=up[a];Q_(this,up[a],(r&pv[l])===pv[l])}}}Gv.prototype.defined=!0;function Q_(e,t,n){n&&(e[t]=n)}function Gi(e){const t={},n={};for(const[r,o]of Object.entries(e.properties)){const a=new Gv(r,e.transform(e.attributes||{},r),o,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[uv(r)]=r,n[uv(a.attribute)]=r}return new Sa(t,n,e.space)}const zA=Gi({properties:{ariaActiveDescendant:null,ariaAtomic:Et,ariaAutoComplete:null,ariaBusy:Et,ariaChecked:Et,ariaColCount:xe,ariaColIndex:xe,ariaColSpan:xe,ariaControls:st,ariaCurrent:null,ariaDescribedBy:st,ariaDetails:null,ariaDisabled:Et,ariaDropEffect:st,ariaErrorMessage:null,ariaExpanded:Et,ariaFlowTo:st,ariaGrabbed:Et,ariaHasPopup:null,ariaHidden:Et,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:st,ariaLevel:xe,ariaLive:null,ariaModal:Et,ariaMultiLine:Et,ariaMultiSelectable:Et,ariaOrientation:null,ariaOwns:st,ariaPlaceholder:null,ariaPosInSet:xe,ariaPressed:Et,ariaReadOnly:Et,ariaRelevant:null,ariaRequired:Et,ariaRoleDescription:st,ariaRowCount:xe,ariaRowIndex:xe,ariaRowSpan:xe,ariaSelected:Et,ariaSetSize:xe,ariaSort:null,ariaValueMax:xe,ariaValueMin:xe,ariaValueNow:xe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function BA(e,t){return t in e?e[t]:t}function $A(e,t){return BA(e,t.toLowerCase())}const f$=Gi({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Li,acceptCharset:st,accessKey:st,action:null,allow:null,allowFullScreen:We,allowPaymentRequest:We,allowUserMedia:We,alt:null,as:null,async:We,autoCapitalize:null,autoComplete:st,autoFocus:We,autoPlay:We,blocking:st,capture:null,charSet:null,checked:We,cite:null,className:st,cols:xe,colSpan:null,content:null,contentEditable:Et,controls:We,controlsList:st,coords:xe|Li,crossOrigin:null,data:null,dateTime:null,decoding:null,default:We,defer:We,dir:null,dirName:null,disabled:We,download:dv,draggable:Et,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:We,formTarget:null,headers:st,height:xe,hidden:dv,high:xe,href:null,hrefLang:null,htmlFor:st,httpEquiv:st,id:null,imageSizes:null,imageSrcSet:null,inert:We,inputMode:null,integrity:null,is:null,isMap:We,itemId:null,itemProp:st,itemRef:st,itemScope:We,itemType:st,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:We,low:xe,manifest:null,max:null,maxLength:xe,media:null,method:null,min:null,minLength:xe,multiple:We,muted:We,name:null,nonce:null,noModule:We,noValidate:We,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:We,optimum:xe,pattern:null,ping:st,placeholder:null,playsInline:We,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:We,referrerPolicy:null,rel:st,required:We,reversed:We,rows:xe,rowSpan:xe,sandbox:st,scope:null,scoped:We,seamless:We,selected:We,shadowRootClonable:We,shadowRootDelegatesFocus:We,shadowRootMode:null,shape:null,size:xe,sizes:null,slot:null,span:xe,spellCheck:Et,src:null,srcDoc:null,srcLang:null,srcSet:null,start:xe,step:null,style:null,tabIndex:xe,target:null,title:null,translate:null,type:null,typeMustMatch:We,useMap:null,value:Et,width:xe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:st,axis:null,background:null,bgColor:null,border:xe,borderColor:null,bottomMargin:xe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:We,declare:We,event:null,face:null,frame:null,frameBorder:null,hSpace:xe,leftMargin:xe,link:null,longDesc:null,lowSrc:null,marginHeight:xe,marginWidth:xe,noResize:We,noHref:We,noShade:We,noWrap:We,object:null,profile:null,prompt:null,rev:null,rightMargin:xe,rules:null,scheme:null,scrolling:Et,standby:null,summary:null,text:null,topMargin:xe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:xe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:We,disableRemotePlayback:We,prefix:null,property:null,results:xe,security:null,unselectable:null},space:"html",transform:$A}),h$=Gi({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Sn,accentHeight:xe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:xe,amplitude:xe,arabicForm:null,ascent:xe,attributeName:null,attributeType:null,azimuth:xe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:xe,by:null,calcMode:null,capHeight:xe,className:st,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:xe,diffuseConstant:xe,direction:null,display:null,dur:null,divisor:xe,dominantBaseline:null,download:We,dx:null,dy:null,edgeMode:null,editable:null,elevation:xe,enableBackground:null,end:null,event:null,exponent:xe,externalResourcesRequired:null,fill:null,fillOpacity:xe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Li,g2:Li,glyphName:Li,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:xe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:xe,horizOriginX:xe,horizOriginY:xe,id:null,ideographic:xe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:xe,k:xe,k1:xe,k2:xe,k3:xe,k4:xe,kernelMatrix:Sn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:xe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:xe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:xe,overlineThickness:xe,paintOrder:null,panose1:null,path:null,pathLength:xe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:st,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:xe,pointsAtY:xe,pointsAtZ:xe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Sn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Sn,rev:Sn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Sn,requiredFeatures:Sn,requiredFonts:Sn,requiredFormats:Sn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:xe,specularExponent:xe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:xe,strikethroughThickness:xe,string:null,stroke:null,strokeDashArray:Sn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:xe,strokeOpacity:xe,strokeWidth:null,style:null,surfaceScale:xe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Sn,tabIndex:xe,tableValues:null,target:null,targetX:xe,targetY:xe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Sn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:xe,underlineThickness:xe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:xe,values:null,vAlphabetic:xe,vMathematical:xe,vectorEffect:null,vHanging:xe,vIdeographic:xe,version:null,vertAdvY:xe,vertOriginX:xe,vertOriginY:xe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:xe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:BA}),HA=Gi({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),VA=Gi({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:$A}),UA=Gi({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),m$={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},g$=/[A-Z]/g,X_=/-[a-z]/g,y$=/^data[-\w.:]+$/i;function v$(e,t){const n=uv(t);let r=t,o=pn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&y$.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(X_,b$);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!X_.test(a)){let l=a.replace(g$,x$);l.charAt(0)!=="-"&&(l="-"+l),t="data"+l}}o=Gv}return new o(r,t)}function x$(e){return"-"+e.toLowerCase()}function b$(e){return e.charAt(1).toUpperCase()}const w$=FA([zA,f$,HA,VA,UA],"html"),Yv=FA([zA,h$,HA,VA,UA],"svg");function _$(e){return e.join(" ").trim()}var Ai={},dp,J_;function S$(){if(J_)return dp;J_=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,d=`
`,p="/",f="*",m="",g="comment",v="declaration";function b(_,k){if(typeof _!="string")throw new TypeError("First argument must be a string");if(!_)return[];k=k||{};var S=1,N=1;function T(L){var q=L.match(t);q&&(S+=q.length);var $=L.lastIndexOf(d);N=~$?L.length-$:N+L.length}function A(){var L={line:S,column:N};return function(q){return q.position=new C(L),I(),q}}function C(L){this.start=L,this.end={line:S,column:N},this.source=k.source}C.prototype.content=_;function P(L){var q=new Error(k.source+":"+S+":"+N+": "+L);if(q.reason=L,q.filename=k.source,q.line=S,q.column=N,q.source=_,!k.silent)throw q}function O(L){var q=L.exec(_);if(q){var $=q[0];return T($),_=_.slice($.length),q}}function I(){O(n)}function H(L){var q;for(L=L||[];q=D();)q!==!1&&L.push(q);return L}function D(){var L=A();if(!(p!=_.charAt(0)||f!=_.charAt(1))){for(var q=2;m!=_.charAt(q)&&(f!=_.charAt(q)||p!=_.charAt(q+1));)++q;if(q+=2,m===_.charAt(q-1))return P("End of comment missing");var $=_.slice(2,q-2);return N+=2,T($),_=_.slice(q),N+=2,L({type:g,comment:$})}}function z(){var L=A(),q=O(r);if(q){if(D(),!O(o))return P("property missing ':'");var $=O(a),G=L({type:v,property:x(q[0].replace(e,m)),value:$?x($[0].replace(e,m)):m});return O(l),G}}function W(){var L=[];H(L);for(var q;q=z();)q!==!1&&(L.push(q),H(L));return L}return I(),W()}function x(_){return _?_.replace(u,m):m}return dp=b,dp}var Z_;function k$(){if(Z_)return Ai;Z_=1;var e=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.default=n;const t=e(S$());function n(r,o){let a=null;if(!r||typeof r!="string")return a;const l=(0,t.default)(r),u=typeof o=="function";return l.forEach(d=>{if(d.type!=="declaration")return;const{property:p,value:f}=d;u?o(p,f,d):f&&(a=a||{},a[p]=f)}),a}return Ai}var Fs={},e1;function N$(){if(e1)return Fs;e1=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,a=function(p){return!p||n.test(p)||e.test(p)},l=function(p,f){return f.toUpperCase()},u=function(p,f){return"".concat(f,"-")},d=function(p,f){return f===void 0&&(f={}),a(p)?p:(p=p.toLowerCase(),f.reactCompat?p=p.replace(o,u):p=p.replace(r,u),p.replace(t,l))};return Fs.camelCase=d,Fs}var zs,t1;function j$(){if(t1)return zs;t1=1;var e=zs&&zs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}},t=e(k$()),n=N$();function r(o,a){var l={};return!o||typeof o!="string"||(0,t.default)(o,function(u,d){u&&d&&(l[(0,n.camelCase)(u,a)]=d)}),l}return r.default=r,zs=r,zs}var E$=j$();const C$=Wi(E$),WA=KA("end"),Qv=KA("start");function KA(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function T$(e){const t=Qv(e),n=WA(e);if(t&&n)return{start:t,end:n}}function Js(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?n1(e.position):"start"in e||"end"in e?n1(e):"line"in e||"column"in e?fv(e):""}function fv(e){return r1(e&&e.line)+":"+r1(e&&e.column)}function n1(e){return fv(e&&e.start)+"-"+fv(e&&e.end)}function r1(e){return e&&typeof e=="number"?e:1}class Wt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let o="",a={},l=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?o=t:!a.cause&&t&&(l=!0,o=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?a.ruleId=r:(a.source=r.slice(0,d),a.ruleId=r.slice(d+1))}if(!a.place&&a.ancestors&&a.ancestors){const d=a.ancestors[a.ancestors.length-1];d&&(a.place=d.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=o,this.line=u?u.line:void 0,this.name=Js(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Wt.prototype.file="";Wt.prototype.name="";Wt.prototype.reason="";Wt.prototype.message="";Wt.prototype.stack="";Wt.prototype.column=void 0;Wt.prototype.line=void 0;Wt.prototype.ancestors=void 0;Wt.prototype.cause=void 0;Wt.prototype.fatal=void 0;Wt.prototype.place=void 0;Wt.prototype.ruleId=void 0;Wt.prototype.source=void 0;const Xv={}.hasOwnProperty,A$=new Map,P$=/[A-Z]/g,I$=new Set(["table","tbody","thead","tfoot","tr"]),R$=new Set(["td","th"]),GA="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function O$(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=$$(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=B$(n,t.jsx,t.jsxs)}const o={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Yv:w$,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=YA(o,e,void 0);return a&&typeof a!="string"?a:o.create(e,o.Fragment,{children:a||void 0},void 0)}function YA(e,t,n){if(t.type==="element")return M$(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return D$(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return q$(e,t,n);if(t.type==="mdxjsEsm")return L$(e,t);if(t.type==="root")return F$(e,t,n);if(t.type==="text")return z$(e,t)}function M$(e,t,n){const r=e.schema;let o=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(o=Yv,e.schema=o),e.ancestors.push(t);const a=XA(e,t.tagName,!1),l=H$(e,t);let u=Zv(e,t);return I$.has(t.tagName)&&(u=u.filter(function(d){return typeof d=="string"?!d$(d):!0})),QA(e,l,a,t),Jv(l,u),e.ancestors.pop(),e.schema=r,e.create(t,a,l,n)}function D$(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}pa(e,t.position)}function L$(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);pa(e,t.position)}function q$(e,t,n){const r=e.schema;let o=r;t.name==="svg"&&r.space==="html"&&(o=Yv,e.schema=o),e.ancestors.push(t);const a=t.name===null?e.Fragment:XA(e,t.name,!0),l=V$(e,t),u=Zv(e,t);return QA(e,l,a,t),Jv(l,u),e.ancestors.pop(),e.schema=r,e.create(t,a,l,n)}function F$(e,t,n){const r={};return Jv(r,Zv(e,t)),e.create(t,e.Fragment,r,n)}function z$(e,t){return t.value}function QA(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Jv(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function B$(e,t,n){return r;function r(o,a,l,u){const p=Array.isArray(l.children)?n:t;return u?p(a,l,u):p(a,l)}}function $$(e,t){return n;function n(r,o,a,l){const u=Array.isArray(a.children),d=Qv(r);return t(o,a,l,u,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function H$(e,t){const n={};let r,o;for(o in t.properties)if(o!=="children"&&Xv.call(t.properties,o)){const a=U$(e,o,t.properties[o]);if(a){const[l,u]=a;e.tableCellAlignToStyle&&l==="align"&&typeof u=="string"&&R$.has(t.tagName)?r=u:n[l]=u}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function V$(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const u=l.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else pa(e,t.position);else{const o=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,a=e.evaluater.evaluateExpression(u.expression)}else pa(e,t.position);else a=r.value===null?!0:r.value;n[o]=a}return n}function Zv(e,t){const n=[];let r=-1;const o=e.passKeys?new Map:A$;for(;++r<t.children.length;){const a=t.children[r];let l;if(e.passKeys){const d=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(d){const p=o.get(d)||0;l=d+"-"+p,o.set(d,p+1)}}const u=YA(e,a,l);u!==void 0&&n.push(u)}return n}function U$(e,t,n){const r=v$(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?s$(n):_$(n)),r.property==="style"){let o=typeof n=="object"?n:W$(e,String(n));return e.stylePropertyNameCase==="css"&&(o=K$(o)),["style",o]}return[e.elementAttributeNameCase==="react"&&r.space?m$[r.property]||r.property:r.attribute,n]}}function W$(e,t){try{return C$(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,o=new Wt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=GA+"#cannot-parse-style-attribute",o}}function XA(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const o=t.split(".");let a=-1,l;for(;++a<o.length;){const u=G_(o[a])?{type:"Identifier",name:o[a]}:{type:"Literal",value:o[a]};l=l?{type:"MemberExpression",object:l,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=l}else r=G_(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const o=r.value;return Xv.call(e.components,o)?e.components[o]:o}if(e.evaluater)return e.evaluater.evaluateExpression(r);pa(e)}function pa(e,t){const n=new Wt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=GA+"#cannot-handle-mdx-estrees-without-createevaluater",n}function K$(e){const t={};let n;for(n in e)Xv.call(e,n)&&(t[G$(n)]=e[n]);return t}function G$(e){let t=e.replace(P$,Y$);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Y$(e){return"-"+e.toLowerCase()}const pp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Q$={};function X$(e,t){const n=Q$,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return JA(e,r,o)}function JA(e,t,n){if(J$(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return o1(e.children,t,n)}return Array.isArray(e)?o1(e,t,n):""}function o1(e,t,n){const r=[];let o=-1;for(;++o<e.length;)r[o]=JA(e[o],t,n);return r.join("")}function J$(e){return!!(e&&typeof e=="object")}const i1=document.createElement("i");function ex(e){const t="&"+e+";";i1.innerHTML=t;const n=i1.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function gr(e,t,n,r){const o=e.length;let a=0,l;if(t<0?t=-t>o?0:o+t:t=t>o?o:t,n=n>0?n:0,r.length<1e4)l=Array.from(r),l.unshift(t,n),e.splice(...l);else for(n&&e.splice(t,n);a<r.length;)l=r.slice(a,a+1e4),l.unshift(t,0),e.splice(...l),a+=1e4,t+=1e4}function Fn(e,t){return e.length>0?(gr(e,e.length,0,t),e):t}const s1={}.hasOwnProperty;function Z$(e){const t={};let n=-1;for(;++n<e.length;)eH(t,e[n]);return t}function eH(e,t){let n;for(n in t){const o=(s1.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let l;if(a)for(l in a){s1.call(o,l)||(o[l]=[]);const u=a[l];tH(o[l],Array.isArray(u)?u:u?[u]:[])}}}function tH(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);gr(e,0,0,r)}function ZA(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function qi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const fr=mo(/[A-Za-z]/),jn=mo(/[\dA-Za-z]/),nH=mo(/[#-'*+\--9=?A-Z^-~]/);function hv(e){return e!==null&&(e<32||e===127)}const mv=mo(/\d/),rH=mo(/[\dA-Fa-f]/),oH=mo(/[!-/:-@[-`{-~]/);function $e(e){return e!==null&&e<-2}function cn(e){return e!==null&&(e<0||e===32)}function Je(e){return e===-2||e===-1||e===32}const iH=mo(new RegExp("\\p{P}|\\p{S}","u")),sH=mo(/\s/);function mo(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Yi(e){const t=[];let n=-1,r=0,o=0;for(;++n<e.length;){const a=e.charCodeAt(n);let l="";if(a===37&&jn(e.charCodeAt(n+1))&&jn(e.charCodeAt(n+2)))o=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const u=e.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(l=String.fromCharCode(a,u),o=1):l=""}else l=String.fromCharCode(a);l&&(t.push(e.slice(r,n),encodeURIComponent(l)),r=n+o+1,l=""),o&&(n+=o,o=0)}return t.join("")+e.slice(r)}function at(e,t,n,r){const o=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(d){return Je(d)?(e.enter(n),u(d)):t(d)}function u(d){return Je(d)&&a++<o?(e.consume(d),u):(e.exit(n),t(d))}}const aH={tokenize:lH};function lH(e){const t=e.attempt(this.parser.constructs.contentInitial,r,o);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),at(e,t,"linePrefix")}function o(u){return e.enter("paragraph"),a(u)}function a(u){const d=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,l(u)}function l(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return $e(u)?(e.consume(u),e.exit("chunkText"),a):(e.consume(u),l)}}const cH={tokenize:uH},a1={tokenize:dH};function uH(e){const t=this,n=[];let r=0,o,a,l;return u;function u(N){if(r<n.length){const T=n[r];return t.containerState=T[1],e.attempt(T[0].continuation,d,p)(N)}return p(N)}function d(N){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,o&&S();const T=t.events.length;let A=T,C;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){C=t.events[A][1].end;break}k(r);let P=T;for(;P<t.events.length;)t.events[P][1].end={...C},P++;return gr(t.events,A+1,0,t.events.slice(T)),t.events.length=P,p(N)}return u(N)}function p(N){if(r===n.length){if(!o)return g(N);if(o.currentConstruct&&o.currentConstruct.concrete)return b(N);t.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(a1,f,m)(N)}function f(N){return o&&S(),k(r),g(N)}function m(N){return t.parser.lazy[t.now().line]=r!==n.length,l=t.now().offset,b(N)}function g(N){return t.containerState={},e.attempt(a1,v,b)(N)}function v(N){return r++,n.push([t.currentConstruct,t.containerState]),g(N)}function b(N){if(N===null){o&&S(),k(0),e.consume(N);return}return o=o||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:o,contentType:"flow",previous:a}),x(N)}function x(N){if(N===null){_(e.exit("chunkFlow"),!0),k(0),e.consume(N);return}return $e(N)?(e.consume(N),_(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(N),x)}function _(N,T){const A=t.sliceStream(N);if(T&&A.push(null),N.previous=a,a&&(a.next=N),a=N,o.defineSkip(N.start),o.write(A),t.parser.lazy[N.start.line]){let C=o.events.length;for(;C--;)if(o.events[C][1].start.offset<l&&(!o.events[C][1].end||o.events[C][1].end.offset>l))return;const P=t.events.length;let O=P,I,H;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){if(I){H=t.events[O][1].end;break}I=!0}for(k(r),C=P;C<t.events.length;)t.events[C][1].end={...H},C++;gr(t.events,O+1,0,t.events.slice(P)),t.events.length=C}}function k(N){let T=n.length;for(;T-- >N;){const A=n[T];t.containerState=A[1],A[0].exit.call(t,e)}n.length=N}function S(){o.write([null]),a=void 0,o=void 0,t.containerState._closeFlow=void 0}}function dH(e,t,n){return at(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function l1(e){if(e===null||cn(e)||sH(e))return 1;if(iH(e))return 2}function tx(e,t,n){const r=[];let o=-1;for(;++o<e.length;){const a=e[o].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const gv={name:"attention",resolveAll:pH,tokenize:fH};function pH(e,t){let n=-1,r,o,a,l,u,d,p,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;d=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[r][1].end},g={...e[n][1].start};c1(m,-d),c1(g,d),l={type:d>1?"strongSequence":"emphasisSequence",start:m,end:{...e[r][1].end}},u={type:d>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},a={type:d>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},o={type:d>1?"strong":"emphasis",start:{...l.start},end:{...u.end}},e[r][1].end={...l.start},e[n][1].start={...u.end},p=[],e[r][1].end.offset-e[r][1].start.offset&&(p=Fn(p,[["enter",e[r][1],t],["exit",e[r][1],t]])),p=Fn(p,[["enter",o,t],["enter",l,t],["exit",l,t],["enter",a,t]]),p=Fn(p,tx(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),p=Fn(p,[["exit",a,t],["enter",u,t],["exit",u,t],["exit",o,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,p=Fn(p,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,gr(e,r-1,n-r+3,p),n=r+p.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function fH(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,o=l1(r);let a;return l;function l(d){return a=d,e.enter("attentionSequence"),u(d)}function u(d){if(d===a)return e.consume(d),u;const p=e.exit("attentionSequence"),f=l1(d),m=!f||f===2&&o||n.includes(d),g=!o||o===2&&f||n.includes(r);return p._open=!!(a===42?m:m&&(o||!g)),p._close=!!(a===42?g:g&&(f||!m)),t(d)}}function c1(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const hH={name:"autolink",tokenize:mH};function mH(e,t,n){let r=0;return o;function o(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(v){return fr(v)?(e.consume(v),l):v===64?n(v):p(v)}function l(v){return v===43||v===45||v===46||jn(v)?(r=1,u(v)):p(v)}function u(v){return v===58?(e.consume(v),r=0,d):(v===43||v===45||v===46||jn(v))&&r++<32?(e.consume(v),u):(r=0,p(v))}function d(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||hv(v)?n(v):(e.consume(v),d)}function p(v){return v===64?(e.consume(v),f):nH(v)?(e.consume(v),p):n(v)}function f(v){return jn(v)?m(v):n(v)}function m(v){return v===46?(e.consume(v),r=0,f):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):g(v)}function g(v){if((v===45||jn(v))&&r++<63){const b=v===45?g:m;return e.consume(v),b}return n(v)}}const zc={partial:!0,tokenize:gH};function gH(e,t,n){return r;function r(a){return Je(a)?at(e,o,"linePrefix")(a):o(a)}function o(a){return a===null||$e(a)?t(a):n(a)}}const eP={continuation:{tokenize:vH},exit:xH,name:"blockQuote",tokenize:yH};function yH(e,t,n){const r=this;return o;function o(l){if(l===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(l),e.exit("blockQuoteMarker"),a}return n(l)}function a(l){return Je(l)?(e.enter("blockQuotePrefixWhitespace"),e.consume(l),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(l))}}function vH(e,t,n){const r=this;return o;function o(l){return Je(l)?at(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return e.attempt(eP,t,n)(l)}}function xH(e){e.exit("blockQuote")}const tP={name:"characterEscape",tokenize:bH};function bH(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),o}function o(a){return oH(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const nP={name:"characterReference",tokenize:wH};function wH(e,t,n){const r=this;let o=0,a,l;return u;function u(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),d}function d(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),a=31,l=jn,f(m))}function p(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,l=rH,f):(e.enter("characterReferenceValue"),a=7,l=mv,f(m))}function f(m){if(m===59&&o){const g=e.exit("characterReferenceValue");return l===jn&&!ex(r.sliceSerialize(g))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return l(m)&&o++<a?(e.consume(m),f):n(m)}}const u1={partial:!0,tokenize:SH},d1={concrete:!0,name:"codeFenced",tokenize:_H};function _H(e,t,n){const r=this,o={partial:!0,tokenize:A};let a=0,l=0,u;return d;function d(C){return p(C)}function p(C){const P=r.events[r.events.length-1];return a=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,u=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(C)}function f(C){return C===u?(l++,e.consume(C),f):l<3?n(C):(e.exit("codeFencedFenceSequence"),Je(C)?at(e,m,"whitespace")(C):m(C))}function m(C){return C===null||$e(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(u1,x,T)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(C))}function g(C){return C===null||$e(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(C)):Je(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),at(e,v,"whitespace")(C)):C===96&&C===u?n(C):(e.consume(C),g)}function v(C){return C===null||$e(C)?m(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),b(C))}function b(C){return C===null||$e(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(C)):C===96&&C===u?n(C):(e.consume(C),b)}function x(C){return e.attempt(o,T,_)(C)}function _(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),k}function k(C){return a>0&&Je(C)?at(e,S,"linePrefix",a+1)(C):S(C)}function S(C){return C===null||$e(C)?e.check(u1,x,T)(C):(e.enter("codeFlowValue"),N(C))}function N(C){return C===null||$e(C)?(e.exit("codeFlowValue"),S(C)):(e.consume(C),N)}function T(C){return e.exit("codeFenced"),t(C)}function A(C,P,O){let I=0;return H;function H(q){return C.enter("lineEnding"),C.consume(q),C.exit("lineEnding"),D}function D(q){return C.enter("codeFencedFence"),Je(q)?at(C,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):z(q)}function z(q){return q===u?(C.enter("codeFencedFenceSequence"),W(q)):O(q)}function W(q){return q===u?(I++,C.consume(q),W):I>=l?(C.exit("codeFencedFenceSequence"),Je(q)?at(C,L,"whitespace")(q):L(q)):O(q)}function L(q){return q===null||$e(q)?(C.exit("codeFencedFence"),P(q)):O(q)}}}function SH(e,t,n){const r=this;return o;function o(l){return l===null?n(l):(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}const fp={name:"codeIndented",tokenize:NH},kH={partial:!0,tokenize:jH};function NH(e,t,n){const r=this;return o;function o(p){return e.enter("codeIndented"),at(e,a,"linePrefix",5)(p)}function a(p){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?l(p):n(p)}function l(p){return p===null?d(p):$e(p)?e.attempt(kH,l,d)(p):(e.enter("codeFlowValue"),u(p))}function u(p){return p===null||$e(p)?(e.exit("codeFlowValue"),l(p)):(e.consume(p),u)}function d(p){return e.exit("codeIndented"),t(p)}}function jH(e,t,n){const r=this;return o;function o(l){return r.parser.lazy[r.now().line]?n(l):$e(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),o):at(e,a,"linePrefix",5)(l)}function a(l){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):$e(l)?o(l):n(l)}}const EH={name:"codeText",previous:TH,resolve:CH,tokenize:AH};function CH(e){let t=e.length-4,n=3,r,o;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)o===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(o=r):(r===t||e[r][1].type==="lineEnding")&&(e[o][1].type="codeTextData",r!==o+2&&(e[o][1].end=e[r-1][1].end,e.splice(o+2,r-o-2),t-=r-o-2,r=o+2),o=void 0);return e}function TH(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function AH(e,t,n){let r=0,o,a;return l;function l(m){return e.enter("codeText"),e.enter("codeTextSequence"),u(m)}function u(m){return m===96?(e.consume(m),r++,u):(e.exit("codeTextSequence"),d(m))}function d(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),d):m===96?(a=e.enter("codeTextSequence"),o=0,f(m)):$e(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("codeTextData"),p(m))}function p(m){return m===null||m===32||m===96||$e(m)?(e.exit("codeTextData"),d(m)):(e.consume(m),p)}function f(m){return m===96?(e.consume(m),o++,f):o===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(a.type="codeTextData",p(m))}}class PH{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const o=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return r&&Bs(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Bs(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Bs(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Bs(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Bs(this.left,n.reverse())}}}function Bs(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function rP(e){const t={};let n=-1,r,o,a,l,u,d,p;const f=new PH(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,a=0,a<d.length&&d[a][1].type==="lineEndingBlank"&&(a+=2),a<d.length&&d[a][1].type==="content"))for(;++a<d.length&&d[a][1].type!=="content";)d[a][1].type==="chunkText"&&(d[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,IH(f,n)),n=t[n],p=!0);else if(r[1]._container){for(a=n,o=void 0;a--;)if(l=f.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(o&&(f.get(o)[1].type="lineEndingBlank"),l[1].type="lineEnding",o=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;o&&(r[1].end={...f.get(o)[1].start},u=f.slice(o,n),u.unshift(r),f.splice(o,n-o+1,u))}}return gr(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!p}function IH(e,t){const n=e.get(t)[1],r=e.get(t)[2];let o=t-1;const a=[];let l=n._tokenizer;l||(l=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const u=l.events,d=[],p={};let f,m,g=-1,v=n,b=0,x=0;const _=[x];for(;v;){for(;e.get(++o)[1]!==v;);a.push(o),v._tokenizer||(f=r.sliceStream(v),v.next||f.push(null),m&&l.defineSkip(v.start),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(f),v._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),m=v,v=v.next}for(v=n;++g<u.length;)u[g][0]==="exit"&&u[g-1][0]==="enter"&&u[g][1].type===u[g-1][1].type&&u[g][1].start.line!==u[g][1].end.line&&(x=g+1,_.push(x),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(l.events=[],v?(v._tokenizer=void 0,v.previous=void 0):_.pop(),g=_.length;g--;){const k=u.slice(_[g],_[g+1]),S=a.pop();d.push([S,S+k.length-1]),e.splice(S,2,k)}for(d.reverse(),g=-1;++g<d.length;)p[b+d[g][0]]=b+d[g][1],b+=d[g][1]-d[g][0]-1;return p}const RH={resolve:MH,tokenize:DH},OH={partial:!0,tokenize:LH};function MH(e){return rP(e),e}function DH(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),o(u)}function o(u){return u===null?a(u):$e(u)?e.check(OH,l,a)(u):(e.consume(u),o)}function a(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function l(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function LH(e,t,n){const r=this;return o;function o(l){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),at(e,a,"linePrefix")}function a(l){if(l===null||$e(l))return n(l);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(l):e.interrupt(r.parser.constructs.flow,n,t)(l)}}function oP(e,t,n,r,o,a,l,u,d){const p=d||Number.POSITIVE_INFINITY;let f=0;return m;function m(k){return k===60?(e.enter(r),e.enter(o),e.enter(a),e.consume(k),e.exit(a),g):k===null||k===32||k===41||hv(k)?n(k):(e.enter(r),e.enter(l),e.enter(u),e.enter("chunkString",{contentType:"string"}),x(k))}function g(k){return k===62?(e.enter(a),e.consume(k),e.exit(a),e.exit(o),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),v(k))}function v(k){return k===62?(e.exit("chunkString"),e.exit(u),g(k)):k===null||k===60||$e(k)?n(k):(e.consume(k),k===92?b:v)}function b(k){return k===60||k===62||k===92?(e.consume(k),v):v(k)}function x(k){return!f&&(k===null||k===41||cn(k))?(e.exit("chunkString"),e.exit(u),e.exit(l),e.exit(r),t(k)):f<p&&k===40?(e.consume(k),f++,x):k===41?(e.consume(k),f--,x):k===null||k===32||k===40||hv(k)?n(k):(e.consume(k),k===92?_:x)}function _(k){return k===40||k===41||k===92?(e.consume(k),x):x(k)}}function iP(e,t,n,r,o,a){const l=this;let u=0,d;return p;function p(v){return e.enter(r),e.enter(o),e.consume(v),e.exit(o),e.enter(a),f}function f(v){return u>999||v===null||v===91||v===93&&!d||v===94&&!u&&"_hiddenFootnoteSupport"in l.parser.constructs?n(v):v===93?(e.exit(a),e.enter(o),e.consume(v),e.exit(o),e.exit(r),t):$e(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===null||v===91||v===93||$e(v)||u++>999?(e.exit("chunkString"),f(v)):(e.consume(v),d||(d=!Je(v)),v===92?g:m)}function g(v){return v===91||v===92||v===93?(e.consume(v),u++,m):m(v)}}function sP(e,t,n,r,o,a){let l;return u;function u(g){return g===34||g===39||g===40?(e.enter(r),e.enter(o),e.consume(g),e.exit(o),l=g===40?41:g,d):n(g)}function d(g){return g===l?(e.enter(o),e.consume(g),e.exit(o),e.exit(r),t):(e.enter(a),p(g))}function p(g){return g===l?(e.exit(a),d(l)):g===null?n(g):$e(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),at(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===l||g===null||$e(g)?(e.exit("chunkString"),p(g)):(e.consume(g),g===92?m:f)}function m(g){return g===l||g===92?(e.consume(g),f):f(g)}}function Zs(e,t){let n;return r;function r(o){return $e(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),n=!0,r):Je(o)?at(e,r,n?"linePrefix":"lineSuffix")(o):t(o)}}const qH={name:"definition",tokenize:zH},FH={partial:!0,tokenize:BH};function zH(e,t,n){const r=this;let o;return a;function a(v){return e.enter("definition"),l(v)}function l(v){return iP.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function u(v){return o=qi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),d):n(v)}function d(v){return cn(v)?Zs(e,p)(v):p(v)}function p(v){return oP(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function f(v){return e.attempt(FH,m,m)(v)}function m(v){return Je(v)?at(e,g,"whitespace")(v):g(v)}function g(v){return v===null||$e(v)?(e.exit("definition"),r.parser.defined.push(o),t(v)):n(v)}}function BH(e,t,n){return r;function r(u){return cn(u)?Zs(e,o)(u):n(u)}function o(u){return sP(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return Je(u)?at(e,l,"whitespace")(u):l(u)}function l(u){return u===null||$e(u)?t(u):n(u)}}const $H={name:"hardBreakEscape",tokenize:HH};function HH(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),o}function o(a){return $e(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const VH={name:"headingAtx",resolve:UH,tokenize:WH};function UH(e,t){let n=e.length-2,r=3,o,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(o={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},gr(e,r,n-r+1,[["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t]])),e}function WH(e,t,n){let r=0;return o;function o(f){return e.enter("atxHeading"),a(f)}function a(f){return e.enter("atxHeadingSequence"),l(f)}function l(f){return f===35&&r++<6?(e.consume(f),l):f===null||cn(f)?(e.exit("atxHeadingSequence"),u(f)):n(f)}function u(f){return f===35?(e.enter("atxHeadingSequence"),d(f)):f===null||$e(f)?(e.exit("atxHeading"),t(f)):Je(f)?at(e,u,"whitespace")(f):(e.enter("atxHeadingText"),p(f))}function d(f){return f===35?(e.consume(f),d):(e.exit("atxHeadingSequence"),u(f))}function p(f){return f===null||f===35||cn(f)?(e.exit("atxHeadingText"),u(f)):(e.consume(f),p)}}const KH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],p1=["pre","script","style","textarea"],GH={concrete:!0,name:"htmlFlow",resolveTo:XH,tokenize:JH},YH={partial:!0,tokenize:e6},QH={partial:!0,tokenize:ZH};function XH(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function JH(e,t,n){const r=this;let o,a,l,u,d;return p;function p(F){return f(F)}function f(F){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(F),m}function m(F){return F===33?(e.consume(F),g):F===47?(e.consume(F),a=!0,x):F===63?(e.consume(F),o=3,r.interrupt?t:R):fr(F)?(e.consume(F),l=String.fromCharCode(F),_):n(F)}function g(F){return F===45?(e.consume(F),o=2,v):F===91?(e.consume(F),o=5,u=0,b):fr(F)?(e.consume(F),o=4,r.interrupt?t:R):n(F)}function v(F){return F===45?(e.consume(F),r.interrupt?t:R):n(F)}function b(F){const K="CDATA[";return F===K.charCodeAt(u++)?(e.consume(F),u===K.length?r.interrupt?t:z:b):n(F)}function x(F){return fr(F)?(e.consume(F),l=String.fromCharCode(F),_):n(F)}function _(F){if(F===null||F===47||F===62||cn(F)){const K=F===47,J=l.toLowerCase();return!K&&!a&&p1.includes(J)?(o=1,r.interrupt?t(F):z(F)):KH.includes(l.toLowerCase())?(o=6,K?(e.consume(F),k):r.interrupt?t(F):z(F)):(o=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(F):a?S(F):N(F))}return F===45||jn(F)?(e.consume(F),l+=String.fromCharCode(F),_):n(F)}function k(F){return F===62?(e.consume(F),r.interrupt?t:z):n(F)}function S(F){return Je(F)?(e.consume(F),S):H(F)}function N(F){return F===47?(e.consume(F),H):F===58||F===95||fr(F)?(e.consume(F),T):Je(F)?(e.consume(F),N):H(F)}function T(F){return F===45||F===46||F===58||F===95||jn(F)?(e.consume(F),T):A(F)}function A(F){return F===61?(e.consume(F),C):Je(F)?(e.consume(F),A):N(F)}function C(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),d=F,P):Je(F)?(e.consume(F),C):O(F)}function P(F){return F===d?(e.consume(F),d=null,I):F===null||$e(F)?n(F):(e.consume(F),P)}function O(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||cn(F)?A(F):(e.consume(F),O)}function I(F){return F===47||F===62||Je(F)?N(F):n(F)}function H(F){return F===62?(e.consume(F),D):n(F)}function D(F){return F===null||$e(F)?z(F):Je(F)?(e.consume(F),D):n(F)}function z(F){return F===45&&o===2?(e.consume(F),$):F===60&&o===1?(e.consume(F),G):F===62&&o===4?(e.consume(F),B):F===63&&o===3?(e.consume(F),R):F===93&&o===5?(e.consume(F),X):$e(F)&&(o===6||o===7)?(e.exit("htmlFlowData"),e.check(YH,Y,W)(F)):F===null||$e(F)?(e.exit("htmlFlowData"),W(F)):(e.consume(F),z)}function W(F){return e.check(QH,L,Y)(F)}function L(F){return e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),q}function q(F){return F===null||$e(F)?W(F):(e.enter("htmlFlowData"),z(F))}function $(F){return F===45?(e.consume(F),R):z(F)}function G(F){return F===47?(e.consume(F),l="",U):z(F)}function U(F){if(F===62){const K=l.toLowerCase();return p1.includes(K)?(e.consume(F),B):z(F)}return fr(F)&&l.length<8?(e.consume(F),l+=String.fromCharCode(F),U):z(F)}function X(F){return F===93?(e.consume(F),R):z(F)}function R(F){return F===62?(e.consume(F),B):F===45&&o===2?(e.consume(F),R):z(F)}function B(F){return F===null||$e(F)?(e.exit("htmlFlowData"),Y(F)):(e.consume(F),B)}function Y(F){return e.exit("htmlFlow"),t(F)}}function ZH(e,t,n){const r=this;return o;function o(l){return $e(l)?(e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),a):n(l)}function a(l){return r.parser.lazy[r.now().line]?n(l):t(l)}}function e6(e,t,n){return r;function r(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),e.attempt(zc,t,n)}}const t6={name:"htmlText",tokenize:n6};function n6(e,t,n){const r=this;let o,a,l;return u;function u(R){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(R),d}function d(R){return R===33?(e.consume(R),p):R===47?(e.consume(R),A):R===63?(e.consume(R),N):fr(R)?(e.consume(R),O):n(R)}function p(R){return R===45?(e.consume(R),f):R===91?(e.consume(R),a=0,b):fr(R)?(e.consume(R),S):n(R)}function f(R){return R===45?(e.consume(R),v):n(R)}function m(R){return R===null?n(R):R===45?(e.consume(R),g):$e(R)?(l=m,G(R)):(e.consume(R),m)}function g(R){return R===45?(e.consume(R),v):m(R)}function v(R){return R===62?$(R):R===45?g(R):m(R)}function b(R){const B="CDATA[";return R===B.charCodeAt(a++)?(e.consume(R),a===B.length?x:b):n(R)}function x(R){return R===null?n(R):R===93?(e.consume(R),_):$e(R)?(l=x,G(R)):(e.consume(R),x)}function _(R){return R===93?(e.consume(R),k):x(R)}function k(R){return R===62?$(R):R===93?(e.consume(R),k):x(R)}function S(R){return R===null||R===62?$(R):$e(R)?(l=S,G(R)):(e.consume(R),S)}function N(R){return R===null?n(R):R===63?(e.consume(R),T):$e(R)?(l=N,G(R)):(e.consume(R),N)}function T(R){return R===62?$(R):N(R)}function A(R){return fr(R)?(e.consume(R),C):n(R)}function C(R){return R===45||jn(R)?(e.consume(R),C):P(R)}function P(R){return $e(R)?(l=P,G(R)):Je(R)?(e.consume(R),P):$(R)}function O(R){return R===45||jn(R)?(e.consume(R),O):R===47||R===62||cn(R)?I(R):n(R)}function I(R){return R===47?(e.consume(R),$):R===58||R===95||fr(R)?(e.consume(R),H):$e(R)?(l=I,G(R)):Je(R)?(e.consume(R),I):$(R)}function H(R){return R===45||R===46||R===58||R===95||jn(R)?(e.consume(R),H):D(R)}function D(R){return R===61?(e.consume(R),z):$e(R)?(l=D,G(R)):Je(R)?(e.consume(R),D):I(R)}function z(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(e.consume(R),o=R,W):$e(R)?(l=z,G(R)):Je(R)?(e.consume(R),z):(e.consume(R),L)}function W(R){return R===o?(e.consume(R),o=void 0,q):R===null?n(R):$e(R)?(l=W,G(R)):(e.consume(R),W)}function L(R){return R===null||R===34||R===39||R===60||R===61||R===96?n(R):R===47||R===62||cn(R)?I(R):(e.consume(R),L)}function q(R){return R===47||R===62||cn(R)?I(R):n(R)}function $(R){return R===62?(e.consume(R),e.exit("htmlTextData"),e.exit("htmlText"),t):n(R)}function G(R){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),U}function U(R){return Je(R)?at(e,X,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):X(R)}function X(R){return e.enter("htmlTextData"),l(R)}}const nx={name:"labelEnd",resolveAll:s6,resolveTo:a6,tokenize:l6},r6={tokenize:c6},o6={tokenize:u6},i6={tokenize:d6};function s6(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const o=r.type==="labelImage"?4:2;r.type="data",t+=o}}return e.length!==n.length&&gr(e,0,e.length,n),e}function a6(e,t){let n=e.length,r=0,o,a,l,u;for(;n--;)if(o=e[n][1],a){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;e[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(l){if(e[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(a=n,o.type!=="labelLink")){r=2;break}}else o.type==="labelEnd"&&(l=n);const d={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[a][1].start},end:{...e[l][1].end}},f={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[l-2][1].start}};return u=[["enter",d,t],["enter",p,t]],u=Fn(u,e.slice(a+1,a+r+3)),u=Fn(u,[["enter",f,t]]),u=Fn(u,tx(t.parser.constructs.insideSpan.null,e.slice(a+r+4,l-3),t)),u=Fn(u,[["exit",f,t],e[l-2],e[l-1],["exit",p,t]]),u=Fn(u,e.slice(l+1)),u=Fn(u,[["exit",d,t]]),gr(e,a,e.length,u),e}function l6(e,t,n){const r=this;let o=r.events.length,a,l;for(;o--;)if((r.events[o][1].type==="labelImage"||r.events[o][1].type==="labelLink")&&!r.events[o][1]._balanced){a=r.events[o][1];break}return u;function u(g){return a?a._inactive?m(g):(l=r.parser.defined.includes(qi(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),d):n(g)}function d(g){return g===40?e.attempt(r6,f,l?f:m)(g):g===91?e.attempt(o6,f,l?p:m)(g):l?f(g):m(g)}function p(g){return e.attempt(i6,f,m)(g)}function f(g){return t(g)}function m(g){return a._balanced=!0,n(g)}}function c6(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),o}function o(m){return cn(m)?Zs(e,a)(m):a(m)}function a(m){return m===41?f(m):oP(e,l,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function l(m){return cn(m)?Zs(e,d)(m):f(m)}function u(m){return n(m)}function d(m){return m===34||m===39||m===40?sP(e,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):f(m)}function p(m){return cn(m)?Zs(e,f)(m):f(m)}function f(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function u6(e,t,n){const r=this;return o;function o(u){return iP.call(r,e,a,l,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(qi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function l(u){return n(u)}}function d6(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),o}function o(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const p6={name:"labelStartImage",resolveAll:nx.resolveAll,tokenize:f6};function f6(e,t,n){const r=this;return o;function o(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),a}function a(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),l):n(u)}function l(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const h6={name:"labelStartLink",resolveAll:nx.resolveAll,tokenize:m6};function m6(e,t,n){const r=this;return o;function o(l){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const hp={name:"lineEnding",tokenize:g6};function g6(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),at(e,t,"linePrefix")}}const ic={name:"thematicBreak",tokenize:y6};function y6(e,t,n){let r=0,o;return a;function a(p){return e.enter("thematicBreak"),l(p)}function l(p){return o=p,u(p)}function u(p){return p===o?(e.enter("thematicBreakSequence"),d(p)):r>=3&&(p===null||$e(p))?(e.exit("thematicBreak"),t(p)):n(p)}function d(p){return p===o?(e.consume(p),r++,d):(e.exit("thematicBreakSequence"),Je(p)?at(e,u,"whitespace")(p):u(p))}}const sn={continuation:{tokenize:w6},exit:S6,name:"list",tokenize:b6},v6={partial:!0,tokenize:k6},x6={partial:!0,tokenize:_6};function b6(e,t,n){const r=this,o=r.events[r.events.length-1];let a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,l=0;return u;function u(v){const b=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:mv(v)){if(r.containerState.type||(r.containerState.type=b,e.enter(b,{_container:!0})),b==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(ic,n,p)(v):p(v);if(!r.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(v)}return n(v)}function d(v){return mv(v)&&++l<10?(e.consume(v),d):(!r.interrupt||l<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),p(v)):n(v)}function p(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,e.check(zc,r.interrupt?n:f,e.attempt(v6,g,m))}function f(v){return r.containerState.initialBlankLine=!0,a++,g(v)}function m(v){return Je(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),g):n(v)}function g(v){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function w6(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(zc,o,a);function o(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,at(e,t,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!Je(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(x6,t,l)(u))}function l(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,at(e,e.attempt(sn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function _6(e,t,n){const r=this;return at(e,o,"listItemIndent",r.containerState.size+1);function o(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?t(a):n(a)}}function S6(e){e.exit(this.containerState.type)}function k6(e,t,n){const r=this;return at(e,o,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(a){const l=r.events[r.events.length-1];return!Je(a)&&l&&l[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const f1={name:"setextUnderline",resolveTo:N6,tokenize:j6};function N6(e,t){let n=e.length,r,o,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(o=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const l={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[o][1].type="setextHeadingText",a?(e.splice(o,0,["enter",l,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=l,e.push(["exit",l,t]),e}function j6(e,t,n){const r=this;let o;return a;function a(p){let f=r.events.length,m;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){m=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),o=p,l(p)):n(p)}function l(p){return e.enter("setextHeadingLineSequence"),u(p)}function u(p){return p===o?(e.consume(p),u):(e.exit("setextHeadingLineSequence"),Je(p)?at(e,d,"lineSuffix")(p):d(p))}function d(p){return p===null||$e(p)?(e.exit("setextHeadingLine"),t(p)):n(p)}}const E6={tokenize:C6};function C6(e){const t=this,n=e.attempt(zc,r,e.attempt(this.parser.constructs.flowInitial,o,at(e,e.attempt(this.parser.constructs.flow,o,e.attempt(RH,o)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function o(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const T6={resolveAll:lP()},A6=aP("string"),P6=aP("text");function aP(e){return{resolveAll:lP(e==="text"?I6:void 0),tokenize:t};function t(n){const r=this,o=this.parser.constructs[e],a=n.attempt(o,l,u);return l;function l(f){return p(f)?a(f):u(f)}function u(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),d}function d(f){return p(f)?(n.exit("data"),a(f)):(n.consume(f),d)}function p(f){if(f===null)return!0;const m=o[f];let g=-1;if(m)for(;++g<m.length;){const v=m[g];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function lP(e){return t;function t(n,r){let o=-1,a;for(;++o<=n.length;)a===void 0?n[o]&&n[o][1].type==="data"&&(a=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==a+2&&(n[a][1].end=n[o-1][1].end,n.splice(a+2,o-a-2),o=a+2),a=void 0);return e?e(n,r):n}}function I6(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],o=t.sliceStream(r);let a=o.length,l=-1,u=0,d;for(;a--;){const p=o[a];if(typeof p=="string"){for(l=p.length;p.charCodeAt(l-1)===32;)u++,l--;if(l)break;l=-1}else if(p===-2)d=!0,u++;else if(p!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const p={type:n===e.length||d||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...p.start},r.start.offset===r.end.offset?Object.assign(r,p):(e.splice(n,0,["enter",p,t],["exit",p,t]),n+=2)}n++}return e}const R6={42:sn,43:sn,45:sn,48:sn,49:sn,50:sn,51:sn,52:sn,53:sn,54:sn,55:sn,56:sn,57:sn,62:eP},O6={91:qH},M6={[-2]:fp,[-1]:fp,32:fp},D6={35:VH,42:ic,45:[f1,ic],60:GH,61:f1,95:ic,96:d1,126:d1},L6={38:nP,92:tP},q6={[-5]:hp,[-4]:hp,[-3]:hp,33:p6,38:nP,42:gv,60:[hH,t6],91:h6,92:[$H,tP],93:nx,95:gv,96:EH},F6={null:[gv,T6]},z6={null:[42,95]},B6={null:[]},$6=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:z6,contentInitial:O6,disable:B6,document:R6,flow:D6,flowInitial:M6,insideSpan:F6,string:L6,text:q6},Symbol.toStringTag,{value:"Module"}));function H6(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const o={},a=[];let l=[],u=[];const d={attempt:P(A),check:P(C),consume:S,enter:N,exit:T,interrupt:P(C,{interrupt:!0})},p={code:null,containerState:{},defineSkip:x,events:[],now:b,parser:e,previous:null,sliceSerialize:g,sliceStream:v,write:m};let f=t.tokenize.call(p,d);return t.resolveAll&&a.push(t),p;function m(D){return l=Fn(l,D),_(),l[l.length-1]!==null?[]:(O(t,0),p.events=tx(a,p.events,p),p.events)}function g(D,z){return U6(v(D),z)}function v(D){return V6(l,D)}function b(){const{_bufferIndex:D,_index:z,line:W,column:L,offset:q}=r;return{_bufferIndex:D,_index:z,line:W,column:L,offset:q}}function x(D){o[D.line]=D.column,H()}function _(){let D;for(;r._index<l.length;){const z=l[r._index];if(typeof z=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<z.length;)k(z.charCodeAt(r._bufferIndex));else k(z)}}function k(D){f=f(D)}function S(D){$e(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,H()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),p.previous=D}function N(D,z){const W=z||{};return W.type=D,W.start=b(),p.events.push(["enter",W,p]),u.push(W),W}function T(D){const z=u.pop();return z.end=b(),p.events.push(["exit",z,p]),z}function A(D,z){O(D,z.from)}function C(D,z){z.restore()}function P(D,z){return W;function W(L,q,$){let G,U,X,R;return Array.isArray(L)?Y(L):"tokenize"in L?Y([L]):B(L);function B(te){return re;function re(V){const ne=V!==null&&te[V],de=V!==null&&te.null,ve=[...Array.isArray(ne)?ne:ne?[ne]:[],...Array.isArray(de)?de:de?[de]:[]];return Y(ve)(V)}}function Y(te){return G=te,U=0,te.length===0?$:F(te[U])}function F(te){return re;function re(V){return R=I(),X=te,te.partial||(p.currentConstruct=te),te.name&&p.parser.constructs.disable.null.includes(te.name)?J():te.tokenize.call(z?Object.assign(Object.create(p),z):p,d,K,J)(V)}}function K(te){return D(X,R),q}function J(te){return R.restore(),++U<G.length?F(G[U]):$}}}function O(D,z){D.resolveAll&&!a.includes(D)&&a.push(D),D.resolve&&gr(p.events,z,p.events.length-z,D.resolve(p.events.slice(z),p)),D.resolveTo&&(p.events=D.resolveTo(p.events,p))}function I(){const D=b(),z=p.previous,W=p.currentConstruct,L=p.events.length,q=Array.from(u);return{from:L,restore:$};function $(){r=D,p.previous=z,p.currentConstruct=W,p.events.length=L,u=q,H()}}function H(){r.line in o&&r.column<2&&(r.column=o[r.line],r.offset+=o[r.line]-1)}}function V6(e,t){const n=t.start._index,r=t.start._bufferIndex,o=t.end._index,a=t.end._bufferIndex;let l;if(n===o)l=[e[n].slice(r,a)];else{if(l=e.slice(n,o),r>-1){const u=l[0];typeof u=="string"?l[0]=u.slice(r):l.shift()}a>0&&l.push(e[o].slice(0,a))}return l}function U6(e,t){let n=-1;const r=[];let o;for(;++n<e.length;){const a=e[n];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=t?" ":"	";break}case-1:{if(!t&&o)continue;l=" ";break}default:l=String.fromCharCode(a)}o=a===-2,r.push(l)}return r.join("")}function W6(e){const r={constructs:Z$([$6,...(e||{}).extensions||[]]),content:o(aH),defined:[],document:o(cH),flow:o(E6),lazy:{},string:o(A6),text:o(P6)};return r;function o(a){return l;function l(u){return H6(r,a,u)}}}function K6(e){for(;!rP(e););return e}const h1=/[\0\t\n\r]/g;function G6(){let e=1,t="",n=!0,r;return o;function o(a,l,u){const d=[];let p,f,m,g,v;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),m=0,t="",n&&(a.charCodeAt(0)===65279&&m++,n=void 0);m<a.length;){if(h1.lastIndex=m,p=h1.exec(a),g=p&&p.index!==void 0?p.index:a.length,v=a.charCodeAt(g),!p){t=a.slice(m);break}if(v===10&&m===g&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),m<g&&(d.push(a.slice(m,g)),e+=g-m),v){case 0:{d.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,d.push(-2);e++<f;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:r=!0,e=1}m=g+1}return u&&(r&&d.push(-5),t&&d.push(t),d.push(null)),d}}const Y6=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Q6(e){return e.replace(Y6,X6)}function X6(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),a=o===120||o===88;return ZA(n.slice(a?2:1),a?16:10)}return ex(n)||e}const cP={}.hasOwnProperty;function J6(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Z6(n)(K6(W6(n).document().write(G6()(e,t,!0))))}function Z6(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Oe),autolinkProtocol:I,autolinkEmail:I,atxHeading:a(we),blockQuote:a(de),characterEscape:I,characterReference:I,codeFenced:a(ve),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(ve,l),codeText:a(le,l),codeTextData:I,data:I,codeFlowValue:I,definition:a(ge),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(_e),hardBreakEscape:a(Ce),hardBreakTrailing:a(Ce),htmlFlow:a(Se,l),htmlFlowData:I,htmlText:a(Se,l),htmlTextData:I,image:a(Qe),label:l,link:a(Oe),listItem:a(Ee),listItemValue:g,listOrdered:a(he,m),listUnordered:a(he),paragraph:a(Ae),reference:F,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(we),strong:a(Ve),thematicBreak:a(ot)},exit:{atxHeading:d(),atxHeadingSequence:A,autolink:d(),autolinkEmail:ne,autolinkProtocol:V,blockQuote:d(),characterEscapeValue:H,characterReferenceMarkerHexadecimal:J,characterReferenceMarkerNumeric:J,characterReferenceValue:te,characterReference:re,codeFenced:d(_),codeFencedFence:x,codeFencedFenceInfo:v,codeFencedFenceMeta:b,codeFlowValue:H,codeIndented:d(k),codeText:d(q),codeTextData:H,data:H,definition:d(),definitionDestinationString:T,definitionLabelString:S,definitionTitleString:N,emphasis:d(),hardBreakEscape:d(z),hardBreakTrailing:d(z),htmlFlow:d(W),htmlFlowData:H,htmlText:d(L),htmlTextData:H,image:d(G),label:X,labelText:U,lineEnding:D,link:d($),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:K,resourceDestinationString:R,resourceTitleString:B,resource:Y,setextHeading:d(O),setextHeadingLineSequence:P,setextHeadingText:C,strong:d(),thematicBreak:d()}};uP(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ae){let ce={type:"root",children:[]};const ke={stack:[ce],tokenStack:[],config:t,enter:u,exit:p,buffer:l,resume:f,data:n},ze=[];let Le=-1;for(;++Le<ae.length;)if(ae[Le][1].type==="listOrdered"||ae[Le][1].type==="listUnordered")if(ae[Le][0]==="enter")ze.push(Le);else{const nt=ze.pop();Le=o(ae,nt,Le)}for(Le=-1;++Le<ae.length;){const nt=t[ae[Le][0]];cP.call(nt,ae[Le][1].type)&&nt[ae[Le][1].type].call(Object.assign({sliceSerialize:ae[Le][2].sliceSerialize},ke),ae[Le][1])}if(ke.tokenStack.length>0){const nt=ke.tokenStack[ke.tokenStack.length-1];(nt[1]||m1).call(ke,void 0,nt[0])}for(ce.position={start:co(ae.length>0?ae[0][1].start:{line:1,column:1,offset:0}),end:co(ae.length>0?ae[ae.length-2][1].end:{line:1,column:1,offset:0})},Le=-1;++Le<t.transforms.length;)ce=t.transforms[Le](ce)||ce;return ce}function o(ae,ce,ke){let ze=ce-1,Le=-1,nt=!1,At,et,yt,fn;for(;++ze<=ke;){const ct=ae[ze];switch(ct[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ct[0]==="enter"?Le++:Le--,fn=void 0;break}case"lineEndingBlank":{ct[0]==="enter"&&(At&&!fn&&!Le&&!yt&&(yt=ze),fn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fn=void 0}if(!Le&&ct[0]==="enter"&&ct[1].type==="listItemPrefix"||Le===-1&&ct[0]==="exit"&&(ct[1].type==="listUnordered"||ct[1].type==="listOrdered")){if(At){let Rt=ze;for(et=void 0;Rt--;){const St=ae[Rt];if(St[1].type==="lineEnding"||St[1].type==="lineEndingBlank"){if(St[0]==="exit")continue;et&&(ae[et][1].type="lineEndingBlank",nt=!0),St[1].type="lineEnding",et=Rt}else if(!(St[1].type==="linePrefix"||St[1].type==="blockQuotePrefix"||St[1].type==="blockQuotePrefixWhitespace"||St[1].type==="blockQuoteMarker"||St[1].type==="listItemIndent"))break}yt&&(!et||yt<et)&&(At._spread=!0),At.end=Object.assign({},et?ae[et][1].start:ct[1].end),ae.splice(et||ze,0,["exit",At,ct[2]]),ze++,ke++}if(ct[1].type==="listItemPrefix"){const Rt={type:"listItem",_spread:!1,start:Object.assign({},ct[1].start),end:void 0};At=Rt,ae.splice(ze,0,["enter",Rt,ct[2]]),ze++,ke++,yt=void 0,fn=!0}}}return ae[ce][1]._spread=nt,ke}function a(ae,ce){return ke;function ke(ze){u.call(this,ae(ze),ze),ce&&ce.call(this,ze)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ae,ce,ke){this.stack[this.stack.length-1].children.push(ae),this.stack.push(ae),this.tokenStack.push([ce,ke||void 0]),ae.position={start:co(ce.start),end:void 0}}function d(ae){return ce;function ce(ke){ae&&ae.call(this,ke),p.call(this,ke)}}function p(ae,ce){const ke=this.stack.pop(),ze=this.tokenStack.pop();if(ze)ze[0].type!==ae.type&&(ce?ce.call(this,ae,ze[0]):(ze[1]||m1).call(this,ae,ze[0]));else throw new Error("Cannot close `"+ae.type+"` ("+Js({start:ae.start,end:ae.end})+"): its not open");ke.position.end=co(ae.end)}function f(){return X$(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function g(ae){if(this.data.expectingFirstListItemValue){const ce=this.stack[this.stack.length-2];ce.start=Number.parseInt(this.sliceSerialize(ae),10),this.data.expectingFirstListItemValue=void 0}}function v(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.lang=ae}function b(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.meta=ae}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function _(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ae.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ae.replace(/(\r?\n|\r)$/g,"")}function S(ae){const ce=this.resume(),ke=this.stack[this.stack.length-1];ke.label=ce,ke.identifier=qi(this.sliceSerialize(ae)).toLowerCase()}function N(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.title=ae}function T(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.url=ae}function A(ae){const ce=this.stack[this.stack.length-1];if(!ce.depth){const ke=this.sliceSerialize(ae).length;ce.depth=ke}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function P(ae){const ce=this.stack[this.stack.length-1];ce.depth=this.sliceSerialize(ae).codePointAt(0)===61?1:2}function O(){this.data.setextHeadingSlurpLineEnding=void 0}function I(ae){const ke=this.stack[this.stack.length-1].children;let ze=ke[ke.length-1];(!ze||ze.type!=="text")&&(ze=lt(),ze.position={start:co(ae.start),end:void 0},ke.push(ze)),this.stack.push(ze)}function H(ae){const ce=this.stack.pop();ce.value+=this.sliceSerialize(ae),ce.position.end=co(ae.end)}function D(ae){const ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ke=ce.children[ce.children.length-1];ke.position.end=co(ae.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ce.type)&&(I.call(this,ae),H.call(this,ae))}function z(){this.data.atHardBreak=!0}function W(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ae}function L(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ae}function q(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ae}function $(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const ce=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=ce,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function G(){const ae=this.stack[this.stack.length-1];if(this.data.inReference){const ce=this.data.referenceType||"shortcut";ae.type+="Reference",ae.referenceType=ce,delete ae.url,delete ae.title}else delete ae.identifier,delete ae.label;this.data.referenceType=void 0}function U(ae){const ce=this.sliceSerialize(ae),ke=this.stack[this.stack.length-2];ke.label=Q6(ce),ke.identifier=qi(ce).toLowerCase()}function X(){const ae=this.stack[this.stack.length-1],ce=this.resume(),ke=this.stack[this.stack.length-1];if(this.data.inReference=!0,ke.type==="link"){const ze=ae.children;ke.children=ze}else ke.alt=ce}function R(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.url=ae}function B(){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.title=ae}function Y(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function K(ae){const ce=this.resume(),ke=this.stack[this.stack.length-1];ke.label=ce,ke.identifier=qi(this.sliceSerialize(ae)).toLowerCase(),this.data.referenceType="full"}function J(ae){this.data.characterReferenceType=ae.type}function te(ae){const ce=this.sliceSerialize(ae),ke=this.data.characterReferenceType;let ze;ke?(ze=ZA(ce,ke==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ze=ex(ce);const Le=this.stack[this.stack.length-1];Le.value+=ze}function re(ae){const ce=this.stack.pop();ce.position.end=co(ae.end)}function V(ae){H.call(this,ae);const ce=this.stack[this.stack.length-1];ce.url=this.sliceSerialize(ae)}function ne(ae){H.call(this,ae);const ce=this.stack[this.stack.length-1];ce.url="mailto:"+this.sliceSerialize(ae)}function de(){return{type:"blockquote",children:[]}}function ve(){return{type:"code",lang:null,meta:null,value:""}}function le(){return{type:"inlineCode",value:""}}function ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function _e(){return{type:"emphasis",children:[]}}function we(){return{type:"heading",depth:0,children:[]}}function Ce(){return{type:"break"}}function Se(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function Oe(){return{type:"link",title:null,url:"",children:[]}}function he(ae){return{type:"list",ordered:ae.type==="listOrdered",start:null,spread:ae._spread,children:[]}}function Ee(ae){return{type:"listItem",spread:ae._spread,checked:null,children:[]}}function Ae(){return{type:"paragraph",children:[]}}function Ve(){return{type:"strong",children:[]}}function lt(){return{type:"text",value:""}}function ot(){return{type:"thematicBreak"}}}function co(e){return{line:e.line,column:e.column,offset:e.offset}}function uP(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?uP(e,r):e8(e,r)}}function e8(e,t){let n;for(n in t)if(cP.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function m1(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Js({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Js({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Js({start:t.start,end:t.end})+") is still open")}function t8(e){const t=this;t.parser=n;function n(r){return J6(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function n8(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function r8(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function o8(e,t){const n=t.value?t.value+`
`:"",r={},o=t.lang?t.lang.split(/\s+/):[];o.length>0&&(r.className=["language-"+o[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function i8(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function s8(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function a8(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),o=Yi(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let l,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),l=e.footnoteOrder.length):l=a+1,u+=1,e.footnoteCounts.set(r,u);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};e.patch(t,d);const p={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,p),e.applyData(t,p)}function l8(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function c8(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function dP(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const o=e.all(t),a=o[0];a&&a.type==="text"?a.value="["+a.value:o.unshift({type:"text",value:"["});const l=o[o.length-1];return l&&l.type==="text"?l.value+=r:o.push({type:"text",value:r}),o}function u8(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return dP(e,t);const o={src:Yi(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(o.title=r.title);const a={type:"element",tagName:"img",properties:o,children:[]};return e.patch(t,a),e.applyData(t,a)}function d8(e,t){const n={src:Yi(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function p8(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function f8(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return dP(e,t);const o={href:Yi(r.url||"")};r.title!==null&&r.title!==void 0&&(o.title=r.title);const a={type:"element",tagName:"a",properties:o,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function h8(e,t){const n={href:Yi(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function m8(e,t,n){const r=e.all(t),o=n?g8(n):pP(t),a={},l=[];if(typeof t.checked=="boolean"){const f=r[0];let m;f&&f.type==="element"&&f.tagName==="p"?m=f:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const f=r[u];(o||u!==0||f.type!=="element"||f.tagName!=="p")&&l.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!o?l.push(...f.children):l.push(f)}const d=r[r.length-1];d&&(o||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:a,children:l};return e.patch(t,p),e.applyData(t,p)}function g8(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=pP(n[r])}return t}function pP(e){const t=e.spread;return t??e.children.length>1}function y8(e,t){const n={},r=e.all(t);let o=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++o<r.length;){const l=r[o];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function v8(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function x8(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function b8(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function w8(e,t){const n=e.all(t),r=n.shift(),o=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],l),o.push(l)}if(n.length>0){const l={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=Qv(t.children[1]),d=WA(t.children[t.children.length-1]);u&&d&&(l.position={start:u,end:d}),o.push(l)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(o,!0)};return e.patch(t,a),e.applyData(t,a)}function _8(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",l=n&&n.type==="table"?n.align:void 0,u=l?l.length:t.children.length;let d=-1;const p=[];for(;++d<u;){const m=t.children[d],g={},v=l?l[d]:void 0;v&&(g.align=v);let b={type:"element",tagName:a,properties:g,children:[]};m&&(b.children=e.all(m),e.patch(m,b),b=e.applyData(m,b)),p.push(b)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,f),e.applyData(t,f)}function S8(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const g1=9,y1=32;function k8(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),o=0;const a=[];for(;r;)a.push(v1(t.slice(o,r.index),o>0,!0),r[0]),o=r.index+r[0].length,r=n.exec(t);return a.push(v1(t.slice(o),o>0,!1)),a.join("")}function v1(e,t,n){let r=0,o=e.length;if(t){let a=e.codePointAt(r);for(;a===g1||a===y1;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(o-1);for(;a===g1||a===y1;)o--,a=e.codePointAt(o-1)}return o>r?e.slice(r,o):""}function N8(e,t){const n={type:"text",value:k8(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function j8(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const E8={blockquote:n8,break:r8,code:o8,delete:i8,emphasis:s8,footnoteReference:a8,heading:l8,html:c8,imageReference:u8,image:d8,inlineCode:p8,linkReference:f8,link:h8,listItem:m8,list:y8,paragraph:v8,root:x8,strong:b8,table:w8,tableCell:S8,tableRow:_8,text:N8,thematicBreak:j8,toml:Gl,yaml:Gl,definition:Gl,footnoteDefinition:Gl};function Gl(){}const fP=-1,Bc=0,ea=1,bc=2,rx=3,ox=4,ix=5,sx=6,hP=7,mP=8,x1=typeof self=="object"?self:globalThis,C8=(e,t)=>{const n=(o,a)=>(e.set(a,o),o),r=o=>{if(e.has(o))return e.get(o);const[a,l]=t[o];switch(a){case Bc:case fP:return n(l,o);case ea:{const u=n([],o);for(const d of l)u.push(r(d));return u}case bc:{const u=n({},o);for(const[d,p]of l)u[r(d)]=r(p);return u}case rx:return n(new Date(l),o);case ox:{const{source:u,flags:d}=l;return n(new RegExp(u,d),o)}case ix:{const u=n(new Map,o);for(const[d,p]of l)u.set(r(d),r(p));return u}case sx:{const u=n(new Set,o);for(const d of l)u.add(r(d));return u}case hP:{const{name:u,message:d}=l;return n(new x1[u](d),o)}case mP:return n(BigInt(l),o);case"BigInt":return n(Object(BigInt(l)),o);case"ArrayBuffer":return n(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:u}=new Uint8Array(l);return n(new DataView(u),l)}}return n(new x1[a](l),o)};return r},b1=e=>C8(new Map,e)(0),Pi="",{toString:T8}={},{keys:A8}=Object,$s=e=>{const t=typeof e;if(t!=="object"||!e)return[Bc,t];const n=T8.call(e).slice(8,-1);switch(n){case"Array":return[ea,Pi];case"Object":return[bc,Pi];case"Date":return[rx,Pi];case"RegExp":return[ox,Pi];case"Map":return[ix,Pi];case"Set":return[sx,Pi];case"DataView":return[ea,n]}return n.includes("Array")?[ea,n]:n.includes("Error")?[hP,n]:[bc,n]},Yl=([e,t])=>e===Bc&&(t==="function"||t==="symbol"),P8=(e,t,n,r)=>{const o=(l,u)=>{const d=r.push(l)-1;return n.set(u,d),d},a=l=>{if(n.has(l))return n.get(l);let[u,d]=$s(l);switch(u){case Bc:{let f=l;switch(d){case"bigint":u=mP,f=l.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);f=null;break;case"undefined":return o([fP],l)}return o([u,f],l)}case ea:{if(d){let g=l;return d==="DataView"?g=new Uint8Array(l.buffer):d==="ArrayBuffer"&&(g=new Uint8Array(l)),o([d,[...g]],l)}const f=[],m=o([u,f],l);for(const g of l)f.push(a(g));return m}case bc:{if(d)switch(d){case"BigInt":return o([d,l.toString()],l);case"Boolean":case"Number":case"String":return o([d,l.valueOf()],l)}if(t&&"toJSON"in l)return a(l.toJSON());const f=[],m=o([u,f],l);for(const g of A8(l))(e||!Yl($s(l[g])))&&f.push([a(g),a(l[g])]);return m}case rx:return o([u,l.toISOString()],l);case ox:{const{source:f,flags:m}=l;return o([u,{source:f,flags:m}],l)}case ix:{const f=[],m=o([u,f],l);for(const[g,v]of l)(e||!(Yl($s(g))||Yl($s(v))))&&f.push([a(g),a(v)]);return m}case sx:{const f=[],m=o([u,f],l);for(const g of l)(e||!Yl($s(g)))&&f.push(a(g));return m}}const{message:p}=l;return o([u,{name:d,message:p}],l)};return a},w1=(e,{json:t,lossy:n}={})=>{const r=[];return P8(!(t||n),!!t,new Map,r)(e),r},wc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?b1(w1(e,t)):structuredClone(e):(e,t)=>b1(w1(e,t));function I8(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function R8(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function O8(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||I8,r=e.options.footnoteBackLabel||R8,o=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",l=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let d=-1;for(;++d<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[d]);if(!p)continue;const f=e.all(p),m=String(p.identifier).toUpperCase(),g=Yi(m.toLowerCase());let v=0;const b=[],x=e.footnoteCounts.get(m);for(;x!==void 0&&++v<=x;){b.length>0&&b.push({type:"text",value:" "});let S=typeof n=="string"?n:n(d,v);typeof S=="string"&&(S={type:"text",value:S}),b.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,v),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const _=f[f.length-1];if(_&&_.type==="element"&&_.tagName==="p"){const S=_.children[_.children.length-1];S&&S.type==="text"?S.value+=" ":_.children.push({type:"text",value:" "}),_.children.push(...b)}else f.push(...b);const k={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(f,!0)};e.patch(p,k),u.push(k)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...wc(l),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const gP=(function(e){if(e==null)return q8;if(typeof e=="function")return $c(e);if(typeof e=="object")return Array.isArray(e)?M8(e):D8(e);if(typeof e=="string")return L8(e);throw new Error("Expected function, string, or object as test")});function M8(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=gP(e[n]);return $c(r);function r(...o){let a=-1;for(;++a<t.length;)if(t[a].apply(this,o))return!0;return!1}}function D8(e){const t=e;return $c(n);function n(r){const o=r;let a;for(a in e)if(o[a]!==t[a])return!1;return!0}}function L8(e){return $c(t);function t(n){return n&&n.type===e}}function $c(e){return t;function t(n,r,o){return!!(F8(n)&&e.call(this,n,typeof r=="number"?r:void 0,o||void 0))}}function q8(){return!0}function F8(e){return e!==null&&typeof e=="object"&&"type"in e}const yP=[],z8=!0,_1=!1,B8="skip";function $8(e,t,n,r){let o;typeof t=="function"&&typeof n!="function"?(r=n,n=t):o=t;const a=gP(o),l=r?-1:1;u(e,void 0,[])();function u(d,p,f){const m=d&&typeof d=="object"?d:{};if(typeof m.type=="string"){const v=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(d.type+(v?"<"+v+">":""))+")"})}return g;function g(){let v=yP,b,x,_;if((!t||a(d,p,f[f.length-1]||void 0))&&(v=H8(n(d,f)),v[0]===_1))return v;if("children"in d&&d.children){const k=d;if(k.children&&v[0]!==B8)for(x=(r?k.children.length:-1)+l,_=f.concat(k);x>-1&&x<k.children.length;){const S=k.children[x];if(b=u(S,x,_)(),b[0]===_1)return b;x=typeof b[1]=="number"?b[1]:x+l}}return v}}}function H8(e){return Array.isArray(e)?e:typeof e=="number"?[z8,e]:e==null?yP:[e]}function vP(e,t,n,r){let o,a,l;typeof t=="function"&&typeof n!="function"?(a=void 0,l=t,o=n):(a=t,l=n,o=r),$8(e,a,u,o);function u(d,p){const f=p[p.length-1],m=f?f.children.indexOf(d):void 0;return l(d,m,f)}}const yv={}.hasOwnProperty,V8={};function U8(e,t){const n=t||V8,r=new Map,o=new Map,a=new Map,l={...E8,...n.handlers},u={all:p,applyData:K8,definitionById:r,footnoteById:o,footnoteCounts:a,footnoteOrder:[],handlers:l,one:d,options:n,patch:W8,wrap:Y8};return vP(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const m=f.type==="definition"?r:o,g=String(f.identifier).toUpperCase();m.has(g)||m.set(g,f)}}),u;function d(f,m){const g=f.type,v=u.handlers[g];if(yv.call(u.handlers,g)&&v)return v(u,f,m);if(u.options.passThrough&&u.options.passThrough.includes(g)){if("children"in f){const{children:x,..._}=f,k=wc(_);return k.children=u.all(f),k}return wc(f)}return(u.options.unknownHandler||G8)(u,f,m)}function p(f){const m=[];if("children"in f){const g=f.children;let v=-1;for(;++v<g.length;){const b=u.one(g[v],f);if(b){if(v&&g[v-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=S1(b.value)),!Array.isArray(b)&&b.type==="element")){const x=b.children[0];x&&x.type==="text"&&(x.value=S1(x.value))}Array.isArray(b)?m.push(...b):m.push(b)}}}return m}}function W8(e,t){e.position&&(t.position=T$(e))}function K8(e,t){let n=t;if(e&&e.data){const r=e.data.hName,o=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const l="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:l}}n.type==="element"&&a&&Object.assign(n.properties,wc(a)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function G8(e,t){const n=t.data||{},r="value"in t&&!(yv.call(n,"hProperties")||yv.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Y8(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function S1(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function k1(e,t){const n=U8(e,t),r=n.one(e,void 0),o=O8(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return o&&a.children.push({type:"text",value:`
`},o),a}function Q8(e,t){return e&&"run"in e?async function(n,r){const o=k1(n,{file:r,...t});await e.run(o,r)}:function(n,r){return k1(n,{file:r,...e||t})}}function N1(e){if(e)throw e}var mp,j1;function X8(){if(j1)return mp;j1=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},a=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var f=e.call(p,"constructor"),m=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!f&&!m)return!1;var g;for(g in p);return typeof g>"u"||e.call(p,g)},l=function(p,f){n&&f.name==="__proto__"?n(p,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):p[f.name]=f.newValue},u=function(p,f){if(f==="__proto__")if(e.call(p,f)){if(r)return r(p,f).value}else return;return p[f]};return mp=function d(){var p,f,m,g,v,b,x=arguments[0],_=1,k=arguments.length,S=!1;for(typeof x=="boolean"&&(S=x,x=arguments[1]||{},_=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});_<k;++_)if(p=arguments[_],p!=null)for(f in p)m=u(x,f),g=u(p,f),x!==g&&(S&&g&&(a(g)||(v=o(g)))?(v?(v=!1,b=m&&o(m)?m:[]):b=m&&a(m)?m:{},l(x,{name:f,newValue:d(S,b,g)})):typeof g<"u"&&l(x,{name:f,newValue:g}));return x},mp}var J8=X8();const gp=Wi(J8);function vv(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Z8(){const e=[],t={run:n,use:r};return t;function n(...o){let a=-1;const l=o.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);u(null,...o);function u(d,...p){const f=e[++a];let m=-1;if(d){l(d);return}for(;++m<o.length;)(p[m]===null||p[m]===void 0)&&(p[m]=o[m]);o=p,f?eV(f,u)(...p):l(null,...p)}}function r(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return e.push(o),t}}function eV(e,t){let n;return r;function r(...l){const u=e.length>l.length;let d;u&&l.push(o);try{d=e.apply(this,l)}catch(p){const f=p;if(u&&n)throw f;return o(f)}u||(d&&d.then&&typeof d.then=="function"?d.then(a,o):d instanceof Error?o(d):a(d))}function o(l,...u){n||(n=!0,t(l,...u))}function a(l){o(null,l)}}const dr={basename:tV,dirname:nV,extname:rV,join:oV,sep:"/"};function tV(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ka(e);let n=0,r=-1,o=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;o--;)if(e.codePointAt(o)===47){if(a){n=o+1;break}}else r<0&&(a=!0,r=o+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let l=-1,u=t.length-1;for(;o--;)if(e.codePointAt(o)===47){if(a){n=o+1;break}}else l<0&&(a=!0,l=o+1),u>-1&&(e.codePointAt(o)===t.codePointAt(u--)?u<0&&(r=o):(u=-1,r=l));return n===r?r=l:r<0&&(r=e.length),e.slice(n,r)}function nV(e){if(ka(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function rV(e){ka(e);let t=e.length,n=-1,r=0,o=-1,a=0,l;for(;t--;){const u=e.codePointAt(t);if(u===47){if(l){r=t+1;break}continue}n<0&&(l=!0,n=t+1),u===46?o<0?o=t:a!==1&&(a=1):o>-1&&(a=-1)}return o<0||n<0||a===0||a===1&&o===n-1&&o===r+1?"":e.slice(o,n)}function oV(...e){let t=-1,n;for(;++t<e.length;)ka(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":iV(n)}function iV(e){ka(e);const t=e.codePointAt(0)===47;let n=sV(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function sV(e,t){let n="",r=0,o=-1,a=0,l=-1,u,d;for(;++l<=e.length;){if(l<e.length)u=e.codePointAt(l);else{if(u===47)break;u=47}if(u===47){if(!(o===l-1||a===1))if(o!==l-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),o=l,a=0;continue}}else if(n.length>0){n="",r=0,o=l,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(o+1,l):n=e.slice(o+1,l),r=l-o-1;o=l,a=0}else u===46&&a>-1?a++:a=-1}return n}function ka(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const aV={cwd:lV};function lV(){return"/"}function xv(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function cV(e){if(typeof e=="string")e=new URL(e);else if(!xv(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return uV(e)}function uV(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(t)}const yp=["history","path","basename","stem","extname","dirname"];class xP{constructor(t){let n;t?xv(t)?n={path:t}:typeof t=="string"||dV(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":aV.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<yp.length;){const a=yp[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let o;for(o in n)yp.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?dr.basename(this.path):void 0}set basename(t){xp(t,"basename"),vp(t,"basename"),this.path=dr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?dr.dirname(this.path):void 0}set dirname(t){E1(this.basename,"dirname"),this.path=dr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?dr.extname(this.path):void 0}set extname(t){if(vp(t,"extname"),E1(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=dr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){xv(t)&&(t=cV(t)),xp(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?dr.basename(this.path,this.extname):void 0}set stem(t){xp(t,"stem"),vp(t,"stem"),this.path=dr.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const o=this.message(t,n,r);throw o.fatal=!0,o}info(t,n,r){const o=this.message(t,n,r);return o.fatal=void 0,o}message(t,n,r){const o=new Wt(t,n,r);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function vp(e,t){if(e&&e.includes(dr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+dr.sep+"`")}function xp(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function E1(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function dV(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const pV=(function(e){const r=this.constructor.prototype,o=r[e],a=function(){return o.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),fV={}.hasOwnProperty;class ax extends pV{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Z8()}copy(){const t=new ax;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(gp(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(_p("data",this.frozen),this.namespace[t]=n,this):fV.call(this.namespace,t)&&this.namespace[t]||void 0:t?(_p("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const o=n.call(t,...r);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Ql(t),r=this.parser||this.Parser;return bp("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),bp("process",this.parser||this.Parser),wp("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(a,l){const u=Ql(t),d=r.parse(u);r.run(d,u,function(f,m,g){if(f||!m||!g)return p(f);const v=m,b=r.stringify(v,g);gV(b)?g.value=b:g.result=b,p(f,g)});function p(f,m){f||!m?l(f):a?a(m):n(void 0,m)}}}processSync(t){let n=!1,r;return this.freeze(),bp("processSync",this.parser||this.Parser),wp("processSync",this.compiler||this.Compiler),this.process(t,o),T1("processSync","process",n),r;function o(a,l){n=!0,N1(a),r=l}}run(t,n,r){C1(t),this.freeze();const o=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(l,u){const d=Ql(n);o.run(t,d,p);function p(f,m,g){const v=m||t;f?u(f):l?l(v):r(void 0,v,g)}}}runSync(t,n){let r=!1,o;return this.run(t,n,a),T1("runSync","run",r),o;function a(l,u){N1(l),o=u,r=!0}}stringify(t,n){this.freeze();const r=Ql(n),o=this.compiler||this.Compiler;return wp("stringify",o),C1(t),o(t,r)}use(t,...n){const r=this.attachers,o=this.namespace;if(_p("use",this.frozen),t!=null)if(typeof t=="function")d(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):l(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(p){if(typeof p=="function")d(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[f,...m]=p;d(f,m)}else l(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function l(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(p.plugins),p.settings&&(o.settings=gp(!0,o.settings,p.settings))}function u(p){let f=-1;if(p!=null)if(Array.isArray(p))for(;++f<p.length;){const m=p[f];a(m)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function d(p,f){let m=-1,g=-1;for(;++m<r.length;)if(r[m][0]===p){g=m;break}if(g===-1)r.push([p,...f]);else if(f.length>0){let[v,...b]=f;const x=r[g][1];vv(x)&&vv(v)&&(v=gp(!0,x,v)),r[g]=[p,v,...b]}}}}const hV=new ax().freeze();function bp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function wp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function _p(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function C1(e){if(!vv(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function T1(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Ql(e){return mV(e)?e:new xP(e)}function mV(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function gV(e){return typeof e=="string"||yV(e)}function yV(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const vV="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",A1=[],P1={allowDangerousHtml:!0},xV=/^(https?|ircs?|mailto|xmpp)$/i,bV=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Sp(e){const t=wV(e),n=_V(e);return SV(t.runSync(t.parse(n),n),e)}function wV(e){const t=e.rehypePlugins||A1,n=e.remarkPlugins||A1,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...P1}:P1;return hV().use(t8).use(n).use(Q8,r).use(t)}function _V(e){const t=e.children||"",n=new xP;return typeof t=="string"&&(n.value=t),n}function SV(e,t){const n=t.allowedElements,r=t.allowElement,o=t.components,a=t.disallowedElements,l=t.skipHtml,u=t.unwrapDisallowed,d=t.urlTransform||kV;for(const f of bV)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+vV+f.id,void 0);return vP(e,p),O$(e,{Fragment:s.Fragment,components:o,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function p(f,m,g){if(f.type==="raw"&&g&&typeof m=="number")return l?g.children.splice(m,1):g.children[m]={type:"text",value:f.value},m;if(f.type==="element"){let v;for(v in pp)if(Object.hasOwn(pp,v)&&Object.hasOwn(f.properties,v)){const b=f.properties[v],x=pp[v];(x===null||x.includes(f.tagName))&&(f.properties[v]=d(String(b||""),v,f))}}if(f.type==="element"){let v=n?!n.includes(f.tagName):a?a.includes(f.tagName):!1;if(!v&&r&&typeof m=="number"&&(v=!r(f,m,g)),v&&g&&typeof m=="number")return u&&f.children?g.children.splice(m,1,...f.children):g.children.splice(m,1),m}}}function kV(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),o=e.indexOf("/");return t===-1||o!==-1&&t>o||n!==-1&&t>n||r!==-1&&t>r||xV.test(e.slice(0,t))?e:""}const I1={error:0,warn:1,info:2,debug:3,trace:4},R1=500,bP={request:"",response:"",error:"",state_change:"",tool_call:"",tool_result:"",lifecycle:"",trigger:"",action:""},NV={error:"var(--accent-error)",warn:"var(--accent-warning)",info:"var(--accent-primary)",debug:"var(--text-secondary)",trace:"var(--text-muted)"},jV={all:"*",request:["request"],response:["response"],tool:["tool_call","tool_result"],state:["state_change"],error:["error"],trigger:["trigger"],action:["action"]};function EV(e,t){const n=jV[t];return n==="*"||n.includes(e)}function CV(e){try{return JSON.parse(e)}catch{return null}}function TV(e,t,n){return e.state_snapshot?{nodeId:t,timestamp:Date.now(),inputState:e.state_snapshot.input||{},outputState:e.state_snapshot.output||{},duration:e.duration_ms||0,status:n}:null}function AV(e,t){const[n,r]=j.useState(!1),[o,a]=j.useState(""),[l,u]=j.useState(""),[d,p]=j.useState([]),[f,m]=j.useState([]),[g,v]=j.useState(null),[b,x]=j.useState(0),_=j.useRef([]),[k,S]=j.useState(0),[N,T]=j.useState([]),[A,C]=j.useState(-1),[P,O]=j.useState(new Map),[I,H]=j.useState([]),D=j.useRef(0),[z,W]=j.useState("idle"),[L,q]=j.useState(null),$=j.useRef(null),G=j.useRef(""),U=j.useRef(""),X=j.useRef(null),R=j.useRef(0),B=j.useRef(new Set),Y=(ve,le,ge,_e)=>{m(we=>[...we,{type:ve,timestamp:Date.now(),data:le,agent:ge||U.current,screenshot:_e}])},F=j.useCallback(ve=>{T(le=>{const ge=[...le,ve];return ge.length>100&&ge.shift(),ge}),C(le=>le+1)},[]),K=j.useCallback((ve,le)=>{O(ge=>{const _e=new Map(ge);return _e.set(ve,le),_e})},[]),J=j.useCallback(ve=>{C(Math.max(0,Math.min(ve,N.length-1)))},[N.length]),te=j.useCallback((ve,le,ge,_e)=>{if(!e)return;G.current="",U.current="",R.current=0,B.current=new Set,a(""),u(""),p([]),x(0),_.current=[],T([]),C(-1),O(new Map),q(null),W("trigger_input"),setTimeout(()=>W("input"),500),m(Oe=>[...Oe,{type:"user",timestamp:Date.now(),data:ve}]),r(!0);const we=new URLSearchParams({input:ve});t&&we.set("binary_path",t);const Ce=_e||X.current;Ce&&we.set("session_id",Ce);const Se=new EventSource(`/api/projects/${e}/stream?${we}`);$.current=Se;let Qe=!1;Se.addEventListener("session",Oe=>{X.current=Oe.data,v(Oe.data)}),Se.addEventListener("agent",Oe=>{G.current&&(G.current+=`

`,a(G.current)),U.current=Oe.data,u(Oe.data),Y("agent_start","runtime",Oe.data)}),Se.addEventListener("chunk",Oe=>{G.current=Oe.data,a(G.current)}),Se.addEventListener("trace",Oe=>{const he=CV(Oe.data);if(he){if(he.type==="node_start"){const Ee=he.node||"";B.current.has(Ee)&&(R.current++,x(R.current),B.current.clear()),B.current.add(Ee),U.current=Ee,u(Ee),_.current.push(Ee),S(Ae=>Ae+1),Y("agent_start",`Iter ${R.current+1}, Step ${he.step}`,Ee),G.current="",a(""),W("input"),he.state_keys&&he.state_keys.length>0&&K(Ee,he.state_keys)}else if(he.type==="node_end"){const Ee=he.node||"";Y("agent_end",`${he.duration_ms}ms`,Ee);const Ae=TV(he,Ee,"success");Ae&&(Ae.step=he.step,F(Ae)),he.state_keys&&he.state_keys.length>0&&K(Ee,he.state_keys)}else if(he.type==="state"){const Ee=he.state||he.state_snapshot?.output||{};if(Ee.response){const Ae=typeof Ee.response=="string"?Ee.response:JSON.stringify(Ee.response);Y("model",Ae.slice(0,100)+(Ae.length>100?"...":""),U.current)}}else if(he.type==="done"){const Ee=he.state||he.state_snapshot?.output||{};if(Ee.response){const Ae=typeof Ee.response=="string"?Ee.response:JSON.stringify(Ee.response);Y("model",Ae.slice(0,150)+(Ae.length>150?"...":""))}Y("done",`${he.total_steps} steps`)}}}),Se.addEventListener("log",Oe=>{try{const he=JSON.parse(Oe.data);he.agent&&(U.current=he.agent,u(he.agent)),he.message&&Y("model",he.message,he.agent)}catch(he){console.warn("Failed to parse log event:",he)}}),Se.addEventListener("tool_call",Oe=>{try{const he=JSON.parse(Oe.data);p(Ee=>[...Ee,{name:he.name,args:he.args}]),G.current+=`
 Calling ${he.name}...
`,a(G.current),Y("tool_call",`${he.name}(${JSON.stringify(he.args)})`)}catch(he){console.warn("Failed to parse tool_call event:",he)}}),Se.addEventListener("tool_result",Oe=>{try{const he=JSON.parse(Oe.data),Ee=typeof he.result=="string"?JSON.parse(he.result):he.result;let Ae;Ee?.base64_image&&(Ae=Ee.base64_image);const Ve=Ae?" Screenshot captured":typeof he.result=="string"?he.result:JSON.stringify(he.result).slice(0,200);G.current+=` ${he.name}: ${Ve}
`,a(G.current),Y("tool_result",`${he.name}  ${Ve}`,void 0,Ae)}catch(he){console.warn("Failed to parse tool_result event:",he)}}),Se.addEventListener("interrupt",Oe=>{try{const he=JSON.parse(Oe.data),Ee={nodeId:he.node_id||he.nodeId||"",message:he.message||"Human input required",data:he.data||{}};W("interrupted"),q(Ee),m(Ae=>[...Ae,{type:"interrupt",timestamp:Date.now(),data:Ee.message,agent:Ee.nodeId,interruptData:Ee}])}catch(he){console.warn("Failed to parse interrupt event:",he)}}),Se.addEventListener("resume",Oe=>{try{const he=JSON.parse(Oe.data),Ee=he.node_id||he.nodeId||"";q(null),W("input"),m(Ae=>[...Ae,{type:"resume",timestamp:Date.now(),data:`Resumed from ${Ee}`,agent:Ee}])}catch(he){console.warn("Failed to parse resume event:",he)}}),Se.addEventListener("debug",Oe=>{try{const he=JSON.parse(Oe.data),Ee={id:`debug-${++D.current}`,timestamp:he.timestamp??Date.now(),level:he.level??"debug",category:he.category??"lifecycle",agent:he.agent??"",summary:he.summary??"",detail:he.detail??null};H(Ae=>{const Ve=[...Ae,Ee];return Ve.length>R1?Ve.slice(Ve.length-R1):Ve})}catch(he){console.warn("Failed to parse debug event:",he)}}),Se.addEventListener("end",()=>{Qe=!0;const Oe=G.current;a(""),u(""),r(!1),W("idle"),Se.close(),le(Oe)}),Se.addEventListener("error",Oe=>{if(!Qe){const he=Oe.data||"Connection error";a(""),u(""),r(!1),W("idle"),q(null),Se.close(),Y("error",he),ge?.(he)}})},[e,t,F,K]),re=j.useCallback(()=>{$.current?.close(),a(""),u(""),r(!1),W("idle"),q(null),X.current&&fetch(`/api/sessions/${X.current}`,{method:"DELETE"}).catch(()=>{})},[]),V=j.useCallback(()=>m([]),[]),ne=j.useCallback(()=>H([]),[]),de=j.useCallback(async()=>{X.current&&await fetch(`/api/sessions/${X.current}`,{method:"DELETE"}).catch(()=>{}),X.current=null,v(null),m([]),T([]),C(-1),O(new Map),H([]),q(null),W("idle")},[]);return{send:te,cancel:re,isStreaming:n,streamingText:o,currentAgent:l,toolCalls:d,events:f,clearEvents:V,sessionId:g,newSession:de,iteration:b,snapshots:N,currentSnapshotIndex:A,scrubTo:J,stateKeys:P,flowPhase:z,setFlowPhase:W,interrupt:L,setInterrupt:q,debugEntries:I,clearDebugEntries:ne,nodeStartQueueRef:_,nodeStartTick:k}}function PV(e,t={}){const{onWebhook:n,enabled:r=!0}=t,[o,a]=j.useState(!1),[l,u]=j.useState(null),d=j.useRef(null),p=j.useRef(n);j.useEffect(()=>{p.current=n},[n]);const f=j.useCallback(()=>{d.current&&(d.current.close(),d.current=null,a(!1))},[]),m=j.useCallback(()=>{if(!e||!r)return;f();const v=`/api/projects/${e}/webhook-events`,b=new EventSource(v);d.current=b,b.addEventListener("connected",()=>{a(!0),console.log("[WebhookEvents] Connected to webhook events for project:",e)}),b.addEventListener("webhook",x=>{try{const _=JSON.parse(x.data);console.log("[WebhookEvents] Received webhook:",_),u(_),p.current?.(_)}catch(_){console.error("[WebhookEvents] Failed to parse webhook notification:",_)}}),b.onerror=x=>{console.error("[WebhookEvents] SSE error:",x),a(!1),setTimeout(()=>{d.current===b&&m()},5e3)}},[e,r,f]),g=j.useCallback(()=>{f(),m()},[f,m]);return j.useEffect(()=>(r&&e?m():f(),()=>{f()}),[e,r,m,f]),{isConnected:o,lastWebhook:l,reconnect:g,disconnect:f}}const IV=[{id:"all",label:"All",icon:"",title:"Show all events"},{id:"model",label:"Model",icon:"",title:"Show model and agent events"},{id:"tool",label:"Tool",icon:"",title:"Show tool calls and results"},{id:"session",label:"Session",icon:"",title:"Show session events (user input, done, errors)"}];function RV({currentFilter:e,onFilterChange:t,autoScroll:n=!0,onAutoScrollChange:r}){return s.jsxs("div",{className:"flex items-center justify-between px-2 py-1 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("div",{className:"flex gap-1",children:IV.map(o=>s.jsxs("button",{onClick:()=>t(o.id),className:"px-2 py-0.5 rounded text-xs flex items-center gap-1 transition-colors",style:{backgroundColor:e===o.id?"var(--accent-primary)":"transparent",color:e===o.id?"white":"var(--text-secondary)"},title:o.title,children:[s.jsx("span",{children:o.icon}),s.jsx("span",{children:o.label})]},o.id))}),r&&s.jsxs("button",{onClick:()=>r(!n),className:"px-2 py-0.5 rounded text-xs flex items-center gap-1",style:{backgroundColor:n?"var(--accent-primary)":"transparent",color:n?"white":"var(--text-secondary)"},title:n?"Auto-scroll enabled":"Auto-scroll disabled",children:[s.jsx("span",{children:n?"":""}),s.jsx("span",{children:"Auto-scroll"})]})]})}const OV=["error","warn","info","debug","trace"],MV=[{id:"all",label:"All"},{id:"request",label:"Request"},{id:"response",label:"Response"},{id:"tool",label:"Tool"},{id:"trigger",label:"Trigger"},{id:"action",label:"Action"},{id:"state",label:"State"},{id:"error",label:"Error"}];function DV({levelFilter:e,onLevelChange:t,categoryFilter:n,onCategoryChange:r,searchQuery:o,onSearchChange:a,autoScroll:l,onAutoScrollToggle:u,onCopyAll:d,onClear:p}){return s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 8px",borderBottom:"1px solid var(--border-default)",flexWrap:"wrap"},children:[s.jsx("select",{value:e,onChange:f=>t(f.target.value),title:"Filter by log level",style:{padding:"2px 4px",borderRadius:"3px",border:"1px solid var(--border-default)",backgroundColor:"var(--surface-panel)",color:"var(--text-primary)",fontSize:"11px",cursor:"pointer",outline:"none"},children:OV.map(f=>s.jsx("option",{value:f,children:f.toUpperCase()},f))}),s.jsx("div",{style:{display:"flex",gap:"2px"},children:MV.map(f=>s.jsx("button",{onClick:()=>r(f.id),title:`Filter: ${f.label}`,style:{padding:"2px 6px",borderRadius:"3px",border:"none",fontSize:"11px",cursor:"pointer",backgroundColor:n===f.id?"var(--accent-primary)":"transparent",color:n===f.id?"#fff":"var(--text-secondary)"},children:f.label},f.id))}),s.jsx("input",{type:"text",value:o,onChange:f=>a(f.target.value),placeholder:"Search debug entries...",style:{flex:1,minWidth:"100px",padding:"2px 6px",borderRadius:"3px",border:"1px solid var(--border-default)",backgroundColor:"var(--surface-panel)",color:"var(--text-primary)",fontSize:"11px",outline:"none"}}),s.jsx("button",{onClick:u,title:l?"Auto-scroll enabled":"Auto-scroll disabled",style:{padding:"2px 6px",borderRadius:"3px",border:"none",fontSize:"11px",cursor:"pointer",backgroundColor:l?"var(--accent-primary)":"transparent",color:l?"#fff":"var(--text-secondary)"},children:l?"":""}),s.jsx("button",{onClick:d,title:"Copy all visible entries",style:{padding:"2px 6px",borderRadius:"3px",border:"none",fontSize:"11px",cursor:"pointer",backgroundColor:"transparent",color:"var(--text-secondary)"},children:""}),s.jsx("button",{onClick:p,title:"Clear all debug entries",style:{padding:"2px 6px",borderRadius:"3px",border:"none",fontSize:"11px",cursor:"pointer",backgroundColor:"transparent",color:"var(--text-secondary)"},children:""})]})}function wP(e){const t=new Date(e),n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0"),a=String(t.getMilliseconds()).padStart(3,"0");return`${n}:${r}:${o}.${a}`}function LV({entry:e,isExpanded:t,onToggle:n}){const r=j.useCallback(l=>{l.stopPropagation();const u=JSON.stringify(e.detail,null,2);navigator.clipboard.writeText(u).catch(d=>{console.warn("Failed to copy debug entry to clipboard:",d)})},[e.detail]),o=NV[e.level],a=bP[e.category];return s.jsxs("div",{style:{borderBottom:"1px solid var(--border-default)"},children:[s.jsxs("div",{onClick:n,role:"button",tabIndex:0,onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&n()},style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 8px",cursor:"pointer",fontSize:"12px",lineHeight:"20px",backgroundColor:t?"var(--surface-hover)":"transparent"},children:[s.jsx("span",{style:{fontFamily:"monospace",color:"var(--text-muted)",flexShrink:0,whiteSpace:"nowrap"},children:wP(e.timestamp)}),s.jsx("span",{style:{padding:"0 5px",borderRadius:"3px",fontSize:"10px",fontWeight:600,textTransform:"uppercase",color:"#fff",backgroundColor:o,flexShrink:0},children:e.level}),s.jsx("span",{style:{flexShrink:0},title:e.category,children:a}),s.jsx("span",{style:{color:"var(--accent-primary)",fontWeight:500,flexShrink:0,maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.agent,children:e.agent}),s.jsx("span",{style:{color:"var(--text-primary)",flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.summary,children:e.summary}),s.jsx("button",{onClick:r,title:"Copy detail as JSON",style:{background:"none",border:"none",cursor:"pointer",padding:"2px 4px",fontSize:"12px",color:"var(--text-muted)",flexShrink:0},children:""})]}),t&&s.jsx("pre",{style:{margin:0,padding:"8px 12px 8px 28px",fontFamily:"monospace",fontSize:"11px",lineHeight:"1.5",overflowX:"auto",backgroundColor:"var(--surface-sunken, var(--surface-panel))",color:"var(--text-secondary)",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(e.detail,null,2)})]})}function qV(e,t,n,r){const o=I1[t],a=r.trim().toLowerCase();return e.filter(l=>{if(I1[l.level]>o||!EV(l.category,n))return!1;if(a){const u=l.summary.toLowerCase().includes(a),d=l.agent.toLowerCase().includes(a),p=JSON.stringify(l.detail).toLowerCase().includes(a);if(!u&&!d&&!p)return!1}return!0})}function FV(e){return e.map(t=>{const n=wP(t.timestamp),r=bP[t.category];return`[${n}] ${t.level.toUpperCase()} ${r} [${t.agent}] ${t.summary}`}).join(`
`)}function zV({debugEntries:e,clearDebugEntries:t,autoScroll:n,onAutoScrollChange:r}){const[o,a]=j.useState("debug"),[l,u]=j.useState("all"),[d,p]=j.useState(""),[f,m]=j.useState(new Set),g=j.useRef(null),v=j.useRef(null),b=j.useMemo(()=>qV(e,o,l,d),[e,o,l,d]);j.useEffect(()=>{n&&v.current?.scrollIntoView({behavior:"smooth"})},[e.length,n]);const x=j.useCallback(T=>{m(A=>{const C=new Set(A);return C.has(T)?C.delete(T):C.add(T),C})},[]),_=j.useCallback(()=>{const T=FV(b);navigator.clipboard.writeText(T).catch(A=>{console.warn("Failed to copy debug entries to clipboard:",A)})},[b]),k=j.useCallback(()=>{r(!n)},[n,r]),S=e.length>0,N=b.length>0;return s.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[s.jsx(DV,{levelFilter:o,onLevelChange:a,categoryFilter:l,onCategoryChange:u,searchQuery:d,onSearchChange:p,autoScroll:n,onAutoScrollToggle:k,onCopyAll:_,onClear:t}),s.jsxs("div",{ref:g,style:{flex:1,overflowY:"auto",fontSize:"12px"},children:[!S&&s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)",fontSize:"13px",padding:"24px",textAlign:"center"},children:"No debug entries yet. Run your agent with debug mode enabled to see traces."}),S&&!N&&s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)",fontSize:"13px",padding:"24px",textAlign:"center"},children:"No entries match the current filters."}),b.map(T=>s.jsx(LV,{entry:T,isExpanded:f.has(T.id),onToggle:()=>x(T.id)},T.id)),s.jsx("div",{ref:v})]})]})}function BV(e,t){switch(e){case"no_trigger":return" Add a trigger node to start your workflow";case"no_agent":return" Add an agent to your workflow";case"not_connected":return" Connect your workflow to END";case"not_built":return t==="building"?" Building... please wait":t==="error"?" Build failed - check errors and rebuild":" Click Build to compile your workflow";case"ready":return"Type a message..."}}function $V(e){if(!e)return null;const t=e.actionNodes||{},n=Object.values(t).find(o=>o.type==="trigger");if(!n||n.type!=="trigger")return null;switch(n.triggerType){case"manual":return{triggerType:"manual",inputLabel:n.manual?.inputLabel||zt.inputLabel,defaultPrompt:n.manual?.defaultPrompt||zt.defaultPrompt};case"webhook":return{triggerType:"webhook",inputLabel:"Webhook Input",defaultPrompt:n.webhook?.path?`Webhook payload for ${n.webhook.path}`:"Enter webhook test payload..."};case"schedule":return{triggerType:"schedule",inputLabel:"Schedule Input",defaultPrompt:n.schedule?.defaultPrompt||"Scheduled trigger fired"};case"event":return{triggerType:"event",inputLabel:"Event Input",defaultPrompt:n.event?.eventType?`Event: ${n.event.eventType}`:"Enter event payload..."};default:return{triggerType:"manual",inputLabel:zt.inputLabel,defaultPrompt:zt.defaultPrompt}}}function HV(e,t,n,r){return r?{label:` ${r.nodeId} requires input`,placeholder:r.message,disabled:!1}:e!=="ready"?{label:"",placeholder:BV(e,t),disabled:!0}:{label:n?.inputLabel||zt.inputLabel,placeholder:n?.defaultPrompt||zt.defaultPrompt,disabled:!1}}function O1(e,t,n){if(!e)return"no_trigger";const r=e.actionNodes||{},o=e.agents||{},a=e.workflow?.edges||[];return Object.values(r).some(f=>f.type==="trigger")?Object.keys(o).length>0?a.filter(f=>f.to==="END").map(f=>f.from).length>0?!t||n==="none"||n==="error"?"not_built":"ready":"not_connected":"no_agent":"no_trigger"}function VV({onFlowPhase:e,onActiveAgent:t,onIteration:n,onThought:r,binaryPath:o,onSnapshotsChange:a,buildStatus:l="none",isCollapsed:u,onCollapseChange:d,onInterruptChange:p,autoSendPrompt:f,onAutoSendComplete:m,onCancelReady:g,onBinaryPathDetected:v,onBuild:b,debugMode:x=!1,debugEntries:_,clearDebugEntries:k}){const{currentProject:S,updateActionNode:N}=De(),[T,A]=j.useState([]),[C,P]=j.useState(""),[O,I]=j.useState("chat"),{send:H,cancel:D,isStreaming:z,streamingText:W,currentAgent:L,toolCalls:q,events:$,clearEvents:G,sessionId:U,newSession:X,iteration:R,snapshots:B,currentSnapshotIndex:Y,scrubTo:F,stateKeys:K,interrupt:J,setInterrupt:te,setFlowPhase:re,nodeStartQueueRef:V,nodeStartTick:ne,debugEntries:de,clearDebugEntries:ve}=AV(S?.id??null,o),le=j.useRef(null),ge=j.useRef(null),_e=j.useRef(!1),we=j.useRef(null),Ce=j.useRef(l),Se=j.useRef(!1);j.useEffect(()=>{Se.current=T.length>0},[T.length]),j.useEffect(()=>{const pe=Ce.current;Ce.current=l,pe==="building"&&l==="success"&&(console.log("[TestConsole] Build succeeded, starting fresh session"),Se.current&&A([{role:"assistant",content:" Build complete  session refreshed with updated workflow."}]),X())},[l,X]);const Qe=j.useCallback(pe=>{if(!(o||pe.binary_path)||z||_e.current){console.log("[TestConsole] Ignoring webhook - not ready or already streaming");return}!o&&pe.binary_path&&v?.(pe.binary_path);const He=pe.method==="SCHEDULE",Ze=pe.method==="EVENT",wt=pe.payload,gn=typeof wt?.input=="string"?wt.input:null,An=typeof pe.payload=="string"?pe.payload:JSON.stringify(pe.payload,null,2),yo=He?"":Ze?"":"",vo=He?"Schedule triggered":Ze?"Event received":"Webhook received";A(kt=>[...kt,{role:"user",content:`${yo} ${vo}: ${pe.path}
\`\`\`json
${An}
\`\`\``}]),_e.current=!0,e?.("trigger_input"),we.current=null,ke("running"),Le(null),setTimeout(()=>{e?.("input")},500),H(He&&gn?gn:"__webhook__",kt=>{kt&&A(Vn=>[...Vn,{role:"assistant",content:kt,agent:we.current||void 0}]),e?.("idle"),_e.current=!1,ke("success")},kt=>{A(Vn=>[...Vn,{role:"assistant",content:`Error: ${kt}`}]),e?.("idle"),_e.current=!1,ke("error"),Le(kt)},pe.session_id)},[o,z,e,H,v]);PV(S?.id??null,{onWebhook:Qe,enabled:!0});const[Oe,he]=j.useState(!1),Ee=u!==void 0?u:Oe,Ae=j.useCallback(pe=>{d?d(pe):he(pe)},[d]),[Ve,lt]=j.useState("all"),[ot,ae]=j.useState(!0),[ce,ke]=j.useState("idle"),[ze,Le]=j.useState(null),nt=_??de,At=k??ve;j.useEffect(()=>{I(x?"debug":pe=>pe==="debug"?"chat":pe)},[x]);const et=j.useCallback(pe=>{if(!S)return;const Ue=S.actionNodes||{},He=Object.entries(Ue).find(([,An])=>An.type==="trigger"&&An.triggerType==="manual");if(!He)return;const[Ze,wt]=He;if(wt.type!=="trigger")return;const gn={...wt,manual:{...wt.manual||zt,defaultPrompt:pe}};N(Ze,gn)},[S,N]);j.useEffect(()=>{a?.(B,Y,F,K)},[B,Y,F,K,a]),j.useEffect(()=>{n?.(R)},[R,n]),j.useEffect(()=>{L&&(we.current=L)},[L]),j.useEffect(()=>{const pe=V.current;if(pe.length===0)return;const Ue=pe.splice(0,pe.length);for(const He of Ue)we.current=He,t?.(He)},[ne,t,V]),j.useEffect(()=>{ot&&le.current?.scrollIntoView({behavior:"smooth"})},[T,W,ot]),j.useEffect(()=>{ot&&ge.current?.scrollIntoView({behavior:"smooth"})},[$,ot]),j.useEffect(()=>{const pe=L||we.current;W&&pe?(console.log("[TestConsole] Emitting thought:",pe,W.slice(-50)),r?.(pe,W.slice(-150))):!z&&we.current&&r?.(we.current,null)},[W,L,z,r]),j.useEffect(()=>{W?e?.("output"):z||(e?.("idle"),t?.(null))},[W,z,e,t]);const yt=j.useRef("");j.useEffect(()=>{const pe=yt.current.length>0;yt.current=W,pe&&!W&&z&&e?.("input")},[W,z,e]),j.useEffect(()=>{z&&ke("running")},[z]),j.useEffect(()=>{J&&(A(pe=>[...pe,{role:"interrupt",content:J.message,agent:J.nodeId,interruptData:J}]),p?.(J))},[J,p]),j.useEffect(()=>{J||p?.(null)},[J,p]);const fn=j.useCallback(async pe=>{if(!(!U||!J))try{const Ue=await fetch(`/api/sessions/${U}/resume`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({response:pe})});if(!Ue.ok){const He=await Ue.text();throw new Error(He||"Failed to resume workflow")}A(He=>[...He,{role:"user",content:pe}]),te(null),re("input")}catch(Ue){const He=Ue instanceof Error?Ue.message:"Failed to resume workflow";A(Ze=>[...Ze,{role:"assistant",content:`Error: ${He}`}]),Le(He)}},[U,J,te,re]),ct=()=>{if(!C.trim()||!S||_e.current)return;if(J){fn(C.trim()),P("");return}if(z)return;_e.current=!0;const pe=C.trim();P(""),A(Ue=>[...Ue,{role:"user",content:pe}]),et(pe),e?.("trigger_input"),we.current=null,ke("running"),Le(null),setTimeout(()=>{e?.("input")},500),H(pe,Ue=>{Ue&&A(He=>[...He,{role:"assistant",content:Ue,agent:we.current||void 0}]),e?.("idle"),_e.current=!1,ke("success")},Ue=>{A(He=>[...He,{role:"assistant",content:`Error: ${Ue}`}]),e?.("idle"),_e.current=!1,ke("error"),Le(Ue)})},Rt=j.useCallback(pe=>{if(!pe.trim()||!S||_e.current||z)return;_e.current=!0;const Ue=pe.trim();A(He=>[...He,{role:"user",content:Ue}]),et(Ue),e?.("trigger_input"),we.current=null,ke("running"),Le(null),setTimeout(()=>{e?.("input")},500),H(Ue,He=>{He&&A(Ze=>[...Ze,{role:"assistant",content:He,agent:we.current||void 0}]),e?.("idle"),_e.current=!1,ke("success")},He=>{A(Ze=>[...Ze,{role:"assistant",content:`Error: ${He}`}]),e?.("idle"),_e.current=!1,ke("error"),Le(He)})},[S,z,e,H,et]);j.useEffect(()=>{f&&!z&&!_e.current&&(Rt(f),m?.())},[f,z,Rt,m]);const St=()=>{A([]),X(),ke("idle"),Le(null)},Cn=j.useCallback(()=>{D(),e?.("idle"),ke("idle"),_e.current=!1},[D,e]);j.useEffect(()=>{g?.(Cn)},[Cn,g]);const Hn=()=>{A([]),G(),At(),ke("idle"),Le(null)},hn=z&&!W,Tn=pe=>{const Ue=new Date(pe);return`${Ue.toLocaleTimeString("en-US",{hour12:!1})}:${String(Ue.getMilliseconds()).padStart(3,"0")}`},Lr=pe=>{switch(pe){case"user":return"";case"agent_start":return"";case"agent_end":return"";case"model":return"";case"tool_call":return"";case"tool_result":return"";case"done":return"";case"error":return"";default:return""}},qr=pe=>{switch(pe){case"user":return"var(--accent-primary)";case"agent_start":return"var(--accent-success)";case"agent_end":return"var(--accent-success)";case"model":return"var(--text-secondary)";case"done":return"var(--node-sequential)";case"error":return"var(--accent-error)";default:return"var(--text-muted)"}},Fr=pe=>qr(pe),xr=$.filter(pe=>{switch(Ve){case"model":return pe.type==="model"||pe.type==="agent_start"||pe.type==="agent_end";case"tool":return pe.type==="tool_call"||pe.type==="tool_result";case"session":return pe.type==="user"||pe.type==="done"||pe.type==="error";default:return!0}}),zr=()=>{switch(l){case"building":return{icon:"",text:"Building...",color:"var(--accent-warning)"};case"success":return{icon:"",text:"Built",color:"var(--accent-success)"};case"error":return{icon:"",text:"Build failed",color:"var(--accent-error)"};default:return{icon:"",text:"Not built",color:"var(--text-muted)"}}},br=()=>{switch(ce){case"running":return{icon:"",text:"Running...",color:"var(--accent-warning)"};case"success":return{icon:"",text:"Success",color:"var(--accent-success)"};case"error":return{icon:"",text:"Error",color:"var(--accent-error)"};default:return{icon:"",text:"Idle",color:"var(--text-muted)"}}},mn=zr(),Kt=br();return Ee?s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-t cursor-pointer hover:bg-opacity-50",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},onClick:()=>Ae(!1),children:[s.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[s.jsx("span",{className:"font-medium",children:"Console"}),s.jsxs("span",{style:{color:mn.color},children:[mn.icon," ",mn.text]}),s.jsxs("span",{style:{color:Kt.color},children:[Kt.icon," ",Kt.text]}),ze&&s.jsxs("span",{style:{color:"var(--accent-error)"},title:ze,children:["Last error: ",ze.slice(0,30),ze.length>30?"...":""]})]}),s.jsx("button",{className:"text-xs px-2 py-1 rounded",style:{color:"var(--text-secondary)"},onClick:pe=>{pe.stopPropagation(),Ae(!1)},children:" Expand"})]}):s.jsxs("div",{className:"flex flex-col h-full border-t",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"p-2 border-b text-sm flex justify-between items-center",style:{borderColor:"var(--border-default)"},children:[s.jsxs("div",{className:"flex gap-1 items-center",children:[s.jsx("button",{onClick:()=>I("chat"),className:"px-3 py-1 rounded text-xs",style:{backgroundColor:O==="chat"?"var(--accent-primary)":"transparent",color:O==="chat"?"white":"var(--text-primary)"},children:" Chat"}),s.jsxs("button",{onClick:()=>I("events"),className:"px-3 py-1 rounded text-xs",style:{backgroundColor:O==="events"?"var(--accent-primary)":"transparent",color:O==="events"?"white":"var(--text-primary)"},children:[" Events ",$.length>0&&`(${$.length})`]}),x&&s.jsxs("button",{onClick:()=>I("debug"),className:"px-3 py-1 rounded text-xs",style:{backgroundColor:O==="debug"?"var(--accent-primary)":"transparent",color:O==="debug"?"white":"var(--text-primary)"},children:[" Debug ",nt.length>0&&`(${nt.length})`]}),U&&s.jsxs("span",{className:"ml-2 text-xs",style:{color:"var(--text-muted)"},title:U,children:["Session: ",U.slice(0,8),"..."]}),s.jsx("span",{className:"ml-2 text-xs",style:{color:mn.color},children:mn.icon}),s.jsx("span",{className:"text-xs",style:{color:Kt.color},children:Kt.icon})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("button",{onClick:Hn,className:"text-xs flex items-center gap-1",style:{color:"var(--text-muted)"},title:"Clear history",children:" Clear"}),s.jsx("button",{onClick:St,className:"text-xs flex items-center gap-1",style:{color:"var(--accent-success)"},title:"Start new conversation",children:" New"}),z&&s.jsx("button",{onClick:Cn,className:"text-xs",style:{color:"var(--accent-error)"},children:"Stop"}),s.jsx("button",{onClick:()=>Ae(!0),className:"text-xs px-2 py-1 rounded",style:{color:"var(--text-secondary)"},title:"Collapse console",children:""})]})]}),O==="chat"&&s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[T.length===0&&!W&&!hn&&s.jsx("div",{className:"text-sm",style:{color:"var(--text-muted)"},children:(()=>{switch(O1(S,o,l)){case"no_trigger":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{children:" Welcome! To get started:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:["Add a ",s.jsx("strong",{children:"Trigger"})," node from the palette"]}),s.jsxs("li",{children:["Add an ",s.jsx("strong",{children:"Agent"})," to process requests"]}),s.jsxs("li",{children:["Click ",s.jsx("strong",{children:"Build"})," to compile"]})]})]});case"no_agent":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{children:" Trigger added! Next:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:["Add an ",s.jsx("strong",{children:"Agent"})," from the palette"]}),s.jsx("li",{children:"Connect it to your workflow"}),s.jsxs("li",{children:["Click ",s.jsx("strong",{children:"Build"})," to compile"]})]})]});case"not_connected":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{children:" Almost there!"}),s.jsxs("p",{children:["Connect your workflow to the ",s.jsx("strong",{children:"END"})," node, then click ",s.jsx("strong",{children:"Build"}),"."]})]});case"not_built":return s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{children:" Workflow ready!"}),s.jsxs("p",{children:["Click ",s.jsx("strong",{children:"Build"})," to compile your workflow, then you can start chatting."]})]});case"ready":return"Send a message to test your agent..."}})()}),T.map((pe,Ue)=>s.jsx("div",{className:`text-sm ${pe.role==="interrupt"?"my-3":""}`,style:{color:pe.role==="user"?"var(--accent-primary)":pe.role==="interrupt"?"var(--accent-warning)":"var(--text-primary)"},children:pe.role==="interrupt"?s.jsxs("div",{className:"p-3 rounded-lg border-l-4",style:{backgroundColor:"var(--bg-secondary)",borderLeftColor:"var(--accent-warning)"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("span",{className:"font-semibold",children:["INTERRUPT: ",pe.agent," requires input"]})]}),s.jsx("div",{className:"prose prose-sm max-w-none",style:{color:"var(--text-primary)"},children:s.jsx(Sp,{children:pe.content})}),pe.interruptData?.data&&Object.keys(pe.interruptData.data).length>0&&s.jsx("div",{className:"mt-2 p-2 rounded text-xs font-mono",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-secondary)"},children:Object.entries(pe.interruptData.data).map(([He,Ze])=>s.jsxs("div",{className:"mb-1",children:[s.jsxs("span",{className:"font-semibold",children:[He,":"]})," ",s.jsx("span",{children:typeof Ze=="string"?Ze:JSON.stringify(Ze)})]},He))})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"font-semibold",children:pe.role==="user"?"You: ":`${pe.agent||"Agent"}: `}),pe.role==="user"?s.jsx("span",{children:pe.content}):s.jsx("div",{className:"prose prose-sm max-w-none inline",style:{color:"var(--text-primary)"},children:s.jsx(Sp,{children:pe.content})})]})},Ue)),hn&&s.jsxs("div",{className:"text-sm flex items-center gap-2",style:{color:"var(--text-muted)"},children:[s.jsx("span",{className:"animate-spin",children:""}),s.jsx("span",{children:L?`${L} is thinking...`:"Thinking..."})]}),W&&s.jsxs("div",{className:"text-sm",style:{color:"var(--text-primary)"},children:[s.jsxs("span",{className:"font-semibold",children:[L||"Agent",": "]}),s.jsx("div",{className:"prose prose-sm max-w-none inline",style:{color:"var(--text-primary)"},children:s.jsx(Sp,{children:W})}),s.jsx("span",{className:"animate-pulse",children:""})]}),q.length>0&&z&&s.jsxs("div",{className:"text-xs mt-1",style:{color:"var(--accent-warning)"},children:["Tools used: ",q.map(pe=>pe.name).join(", ")]}),s.jsx("div",{ref:le})]}),O==="events"&&s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(RV,{currentFilter:Ve,onFilterChange:lt,autoScroll:ot,onAutoScrollChange:ae}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-2 font-mono text-xs",children:[xr.length===0&&s.jsx("div",{style:{color:"var(--text-muted)"},children:$.length===0?"No events yet. Send a message to see the trace.":"No events match the current filter."}),xr.map((pe,Ue)=>s.jsxs("div",{className:"py-1 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"w-24 flex-shrink-0",style:{color:"var(--text-muted)"},children:Tn(pe.timestamp)}),s.jsx("span",{children:Lr(pe.type)}),s.jsxs("span",{className:"flex-1",style:{color:Fr(pe.type)},children:[pe.agent&&s.jsxs("span",{style:{color:"var(--accent-warning)"},className:"mr-2",children:["[",pe.agent,"]"]}),pe.type==="user"?`Input: ${pe.data}`:pe.type==="agent_start"?`Started ${pe.data}`:pe.type==="agent_end"?`Completed in ${pe.data}`:pe.type==="model"?`Response: ${pe.data}`:pe.type==="done"?`Done (${pe.data})`:pe.data]})]}),pe.screenshot&&s.jsx("div",{className:"ml-28 mt-2 mb-2",children:s.jsx("img",{src:`data:image/png;base64,${pe.screenshot}`,alt:"Browser screenshot",className:"max-w-full max-h-64 rounded border",style:{borderColor:"var(--border-default)"}})})]},Ue)),s.jsx("div",{ref:ge})]})]}),O==="debug"&&s.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:s.jsx(zV,{debugEntries:nt,clearDebugEntries:At,autoScroll:ot,onAutoScrollChange:ae})}),s.jsx("div",{className:"p-2 border-t flex flex-col gap-2",style:{borderColor:"var(--border-default)"},children:(()=>{const pe=O1(S,o,l),Ue=$V(S),He=HV(pe,l,Ue,J),Ze=He.disabled||z&&!J;return s.jsxs(s.Fragment,{children:[He.label&&s.jsx("label",{className:"text-xs font-medium px-1",style:{color:J?"var(--accent-warning)":"var(--accent-primary)",letterSpacing:"0.025em"},children:He.label}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:C,onChange:wt=>P(wt.target.value),onKeyDown:wt=>{wt.key==="Enter"&&!wt.repeat&&!He.disabled&&(wt.preventDefault(),ct())},placeholder:He.placeholder,className:"test-console-input flex-1 px-3 py-2 rounded text-sm",style:{backgroundColor:Ze?"var(--bg-secondary)":"var(--bg-primary)",border:`1px solid ${J||He.disabled?"var(--accent-warning)":"var(--border-default)"}`,color:Ze?"var(--text-muted)":"var(--text-primary)",cursor:Ze?"not-allowed":"text"},disabled:Ze}),s.jsx("button",{onClick:()=>{if(pe==="not_built"&&b){b();return}ct()},disabled:pe==="not_built"?l==="building":Ze||!C.trim(),className:"px-4 py-2 rounded text-sm disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:pe==="not_built"?l==="building"?"var(--accent-warning)":"var(--accent-primary)":J?"var(--accent-warning)":"var(--accent-primary)",color:"white"},title:pe==="not_built"?l==="building"?"Building...":"Build your workflow":He.disabled?He.placeholder:J?"Send response to resume workflow":"Send message",children:pe==="not_built"?l==="building"?" Building...":" Build":J?"Resume":"Send"})]})]})})()})]})}const UV=j.memo(function({snapshots:t,currentIndex:n,onScrub:r,isCollapsed:o,onToggleCollapse:a}){const l=j.useMemo(()=>t.filter(p=>!p.nodeId.startsWith("__")),[t]),u=j.useCallback(p=>{const f=l[p],m=t.findIndex(g=>g===f);m>=0&&r(m)},[l,t,r]),d=j.useMemo(()=>{if(n<0)return-1;const p=t[n];return l.findIndex(f=>f===p)},[n,t,l]);return s.jsxs("div",{className:`timeline-container ${o?"collapsed":"expanded"}`,children:[s.jsxs("div",{className:"timeline-header",onClick:a,children:[s.jsxs("div",{className:"timeline-header-left",children:[s.jsx("span",{className:"timeline-title",children:"Execution Timeline"}),l.length>0&&s.jsxs("span",{className:"timeline-count",children:[l.length," steps"]})]}),s.jsx(GV,{className:`timeline-toggle-icon ${o?"collapsed":""}`})]}),!o&&s.jsx(s.Fragment,{children:l.length===0?s.jsx(KV,{}):s.jsx("div",{className:"timeline-track",children:l.map((p,f)=>s.jsx(WV,{snapshot:p,index:f,isActive:f===d,onClick:()=>u(f),showConnector:f<l.length-1,isConnectorActive:f<d},`${p.nodeId}-step${p.step??f}-${f}`))})})]})}),WV=j.memo(function({snapshot:t,index:n,isActive:r,onClick:o,showConnector:a,isConnectorActive:l}){const u=`status-${t.status}`,d=t.status==="error";return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`timeline-node ${u} ${r?"active":""}`,onClick:o,role:"button",tabIndex:0,onKeyDown:p=>p.key==="Enter"&&o(),"aria-label":`Step ${n+1}: ${t.nodeLabel||t.nodeId}, ${t.status}${d&&t.error?`: ${t.error}`:""}, ${M1(t.duration)}`,title:d&&t.error?`Error: ${t.error}`:void 0,children:[s.jsx("div",{className:"timeline-node-status",children:s.jsx(Wv,{status:t.status==="running"?"running":t.status,size:"sm"})}),s.jsx("span",{className:"timeline-node-label",title:t.nodeLabel||t.nodeId,children:t.nodeLabel||t.nodeId}),s.jsx("span",{className:"timeline-node-duration",children:M1(t.duration)}),t.step!==void 0&&s.jsxs("span",{className:"timeline-node-step",children:["Step ",t.step]}),d&&s.jsx("span",{className:"timeline-node-error-badge",title:t.error,children:""})]}),a&&s.jsx("div",{className:`timeline-connector ${l?"active":""}`,children:s.jsx("div",{className:"timeline-connector-line"})})]})});function KV(){return s.jsxs("div",{className:"timeline-empty",children:[s.jsx("span",{className:"timeline-empty-icon",children:""}),s.jsx("span",{className:"timeline-empty-text",children:"Run the workflow to see execution timeline"})]})}function GV({className:e}){return s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:s.jsx("polyline",{points:"6 9 12 15 18 9"})})}function M1(e){if(e<1e3)return`${e}ms`;if(e<6e4)return`${(e/1e3).toFixed(1)}s`;const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return`${t}m ${n}s`}j.memo(function({snapshots:t,currentIndex:n,onScrub:r,onScrubStart:o,onScrubEnd:a}){const l=j.useRef(null),[u,d]=j.useState(!1),p=t.filter(A=>!A.nodeId.startsWith("__")),f=Math.max(0,p.length-1),m=t[n]?p.findIndex(A=>A===t[n]):-1,g=Math.max(0,m),v=f>0?g/f*100:0,b=j.useCallback(A=>{if(!l.current||f===0)return 0;const C=l.current.getBoundingClientRect(),P=A-C.left,O=Math.max(0,Math.min(1,P/C.width));return Math.round(O*f)},[f]),x=j.useCallback(A=>{if(A<0||A>=p.length)return-1;const C=p[A];return t.findIndex(P=>P===C)},[p,t]),_=j.useCallback(A=>{A.preventDefault(),d(!0),o?.();const C=b(A.clientX),P=x(C);P>=0&&r(P)},[b,x,r,o]);j.useEffect(()=>{if(!u)return;const A=P=>{const O=b(P.clientX),I=x(O);I>=0&&r(I)},C=()=>{d(!1),a?.()};return document.addEventListener("mousemove",A),document.addEventListener("mouseup",C),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",C)}},[u,b,x,r,a]);const k=j.useCallback(A=>{const C=b(A.clientX),P=x(C);P>=0&&r(P)},[b,x,r]),S=j.useCallback(A=>{let C=g;switch(A.key){case"ArrowLeft":case"ArrowDown":C=Math.max(0,g-1);break;case"ArrowRight":case"ArrowUp":C=Math.min(f,g+1);break;case"Home":C=0;break;case"End":C=f;break;default:return}A.preventDefault();const P=x(C);P>=0&&r(P)},[g,f,x,r]);if(p.length===0)return null;const N=p[g],T=N?.nodeLabel||N?.nodeId||"Unknown";return s.jsxs("div",{className:"timeline-scrubber",children:[s.jsxs("div",{ref:l,className:"timeline-scrubber-track",onMouseDown:_,onClick:k,role:"slider","aria-label":"Timeline scrubber","aria-valuemin":0,"aria-valuemax":f,"aria-valuenow":g,"aria-valuetext":`Step ${g+1} of ${p.length}: ${T}`,tabIndex:0,onKeyDown:S,children:[s.jsx("div",{className:"timeline-scrubber-progress",style:{width:`${v}%`}}),s.jsx("div",{className:"timeline-scrubber-thumb",style:{left:`${v}%`}})]}),s.jsxs("div",{className:"timeline-scrubber-labels",children:[s.jsxs("span",{children:["Step ",g+1," / ",p.length]}),s.jsx("span",{title:T,children:YV(T,30)})]})]})});function YV(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}function QV({showConsole:e,showTimeline:t,debugMode:n,hasRunnableWorkflow:r,builtBinaryPath:o,snapshots:a,currentSnapshotIndex:l,scrubToFn:u,timelineCollapsed:d,onToggleTimelineCollapse:p,consoleCollapsed:f,onConsoleCollapseChange:m,buildStatus:g,autoSendPrompt:v,onAutoSendComplete:b,onCancelReady:x,onFlowPhase:_,onActiveAgent:k,onIteration:S,onThought:N,onSnapshotsChange:T,onInterruptChange:A,onBuild:C,onBinaryPathDetected:P}){return s.jsxs(s.Fragment,{children:[e&&n&&t&&r&&o&&a.length>0&&s.jsx(UV,{snapshots:a,currentIndex:l,onScrub:u||(()=>{}),isCollapsed:d,onToggleCollapse:p}),e&&r&&s.jsx("div",{className:f?"":"h-64",children:s.jsx(VV,{onFlowPhase:_,onActiveAgent:k,onIteration:S,onThought:N,binaryPath:o,onSnapshotsChange:T,buildStatus:g,isCollapsed:f,onCollapseChange:m,onInterruptChange:A,autoSendPrompt:v,onAutoSendComplete:b,onCancelReady:x,onBinaryPathDetected:P,onBuild:C,debugMode:n})}),e&&!r&&s.jsx("div",{className:"h-32 border-t flex items-center justify-center",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-muted)"},children:"Drag an Agent or Action node onto the canvas to get started"})]})}const XV=[{type:"llm",label:"LLM Agent",color:"#3182CE"},{type:"sequential",label:"Sequential Agent",color:"#805AD5"},{type:"loop",label:"Loop Agent",color:"#D69E2E"},{type:"parallel",label:"Parallel Agent",color:"#38A169"},{type:"router",label:"Router Agent",color:"#DD6B20"}];function JV({onDragStart:e,onCreate:t}){return s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Agents"}),s.jsx("div",{className:"space-y-1",children:XV.map(({type:n,label:r,color:o})=>s.jsxs("div",{draggable:!0,onDragStart:a=>e(a,n),onClick:()=>t(n),className:"p-1.5 rounded text-xs cursor-grab hover:opacity-80 text-white font-medium",style:{backgroundColor:o},children:[" ",r]},n))})]})}const _c=[{type:"function",label:"Function Tool",icon:"",configurable:!0},{type:"mcp",label:"MCP Tool",icon:"",configurable:!0},{type:"browser",label:"Browser Tool",icon:"",configurable:!0},{type:"exit_loop",label:"Exit Loop",icon:"",configurable:!0},{type:"google_search",label:"Google Search",icon:"",configurable:!0},{type:"load_artifact",label:"Load Artifact",icon:"",configurable:!0}];function ZV({selectedNodeId:e,agentTools:t,onAdd:n,onRemove:r}){const o=(a,l)=>{a.dataTransfer.setData("text/plain",`tool:${l}`),a.dataTransfer.effectAllowed="copy"};return s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Tools"}),s.jsx("div",{className:"space-y-1",children:_c.map(({type:a,label:l,icon:u})=>{const d=a==="function"||a==="mcp",p=d?t.some(m=>m.startsWith(a)):t.includes(a),f=d?t.filter(m=>m.startsWith(a)).length:0;return s.jsxs("div",{draggable:!0,onDragStart:m=>o(m,a),className:`p-1.5 rounded text-xs cursor-grab flex items-center gap-2 border ${e?"":"opacity-50"}`,style:{backgroundColor:p?"#38A169":"var(--bg-secondary)",color:p?"white":"var(--text-primary)",borderColor:"var(--border-default)"},onClick:()=>{e&&(d||!p?n(a):r(a))},children:[s.jsx("span",{children:u}),s.jsx("span",{className:"text-xs",children:l}),d&&f>0&&s.jsx("span",{className:"ml-auto text-xs bg-blue-600 text-white px-1 rounded",children:f}),!d&&p&&s.jsx("span",{className:"ml-auto text-xs",children:""})]},a)})})]})}function lx({value:e,onChange:t,compact:n=!1}){const[r,o]=Lt.useState(()=>F4(e)),[a,l]=Lt.useState(!1),[u,d]=Lt.useState(""),p=Lt.useRef(null),f=Zn.find(x=>x.id===r)||Zn[0],m=f.models.find(x=>x.id===e);Lt.useEffect(()=>{function x(_){p.current&&!p.current.contains(_.target)&&l(!1)}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const g=f.models.filter(x=>x.name.toLowerCase().includes(u.toLowerCase())||x.description.toLowerCase().includes(u.toLowerCase())),v=x=>{o(x);const _=Zn.find(k=>k.id===x);_&&_.models.length>0&&t(_.models[0].id)},b=x=>{t(x.id),l(!1),d("")};return n?s.jsx(tU,{value:e,provider:f,providers:Zn,onProviderChange:v,onModelChange:t}):s.jsxs("div",{className:"space-y-2",ref:p,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Provider"}),s.jsx("select",{className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},value:r,onChange:x=>v(x.target.value),children:Zn.map(x=>s.jsxs("option",{value:x.id,children:[x.icon," ",x.name]},x.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Model"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>l(!a),className:"w-full px-3 py-2 rounded text-sm text-left flex items-center justify-between",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("span",{className:"truncate",children:m?.name||e||"Select model..."}),m&&s.jsx("span",{className:"text-xs px-1 rounded",style:{backgroundColor:iA(m.tier),color:"white"},children:m.tier})]}),s.jsx("span",{style:{color:"var(--text-muted)"},children:a?"":""})]}),a&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 rounded shadow-lg max-h-80 overflow-hidden",style:{backgroundColor:"var(--surface-panel)",border:"1px solid var(--border-default)"},children:[s.jsx("div",{className:"p-2",style:{borderBottom:"1px solid var(--border-default)"},children:s.jsx("input",{type:"text",placeholder:"Search models...",value:u,onChange:x=>d(x.target.value),className:"w-full px-2 py-1 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},autoFocus:!0})}),s.jsxs("div",{className:"overflow-y-auto max-h-60",children:[g.map(x=>s.jsx(eU,{model:x,isSelected:x.id===e,onClick:()=>b(x)},x.id)),g.length===0&&s.jsx("div",{className:"p-3 text-center text-sm",style:{color:"var(--text-muted)"},children:"No models found"})]}),s.jsxs("div",{className:"p-2 text-xs",style:{borderTop:"1px solid var(--border-default)",color:"var(--text-muted)",backgroundColor:"var(--bg-secondary)"},children:[s.jsx("span",{children:"Requires: "}),s.jsx("code",{style:{color:"var(--accent-primary)"},children:f.envVar}),f.envVarAlt&&s.jsxs("span",{children:[" or ",s.jsx("code",{style:{color:"var(--accent-primary)"},children:f.envVarAlt})]})]})]})]})]}),m&&s.jsxs("div",{className:"text-xs p-2 rounded",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:[s.jsx("div",{className:"mb-1",children:m.description}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{title:"Context window",children:[" ",sA(m.contextWindow)]}),m.capabilities.map(x=>s.jsx("span",{title:x,children:oA(x)},x))]})]})]})}function eU({model:e,isSelected:t,onClick:n}){return s.jsxs("button",{onClick:n,className:"w-full px-3 py-2 text-left hover:opacity-90 transition-colors",style:{backgroundColor:t?"var(--accent-primary)":"transparent",color:t?"white":"var(--text-primary)"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-sm",children:e.name}),s.jsx("span",{className:"text-xs px-1 rounded",style:{backgroundColor:t?"rgba(255,255,255,0.2)":iA(e.tier),color:"white"},children:e.tier})]}),s.jsx("div",{className:"text-xs mt-0.5",style:{color:t?"rgba(255,255,255,0.8)":"var(--text-muted)"},children:e.description}),s.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs",style:{color:t?"rgba(255,255,255,0.7)":"var(--text-muted)"},children:[s.jsxs("span",{children:[" ",sA(e.contextWindow)]}),e.capabilities.slice(0,4).map(r=>s.jsx("span",{children:oA(r)},r)),e.capabilities.length>4&&s.jsxs("span",{children:["+",e.capabilities.length-4]})]})]})}function tU({value:e,provider:t,providers:n,onProviderChange:r,onModelChange:o}){return s.jsxs("div",{className:"flex gap-1",children:[s.jsx("select",{className:"px-1 py-1 rounded text-xs",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-default)",color:"var(--text-primary)",width:"70px"},value:t.id,onChange:a=>r(a.target.value),children:n.map(a=>s.jsxs("option",{value:a.id,children:[a.icon," ",a.id]},a.id))}),s.jsx("select",{className:"flex-1 px-1 py-1 rounded text-xs",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},value:e,onChange:a=>o(a.target.value),children:t.models.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))})]})}function nU({nodeId:e,agent:t,agents:n,toolConfigs:r,onUpdate:o,onRename:a,onAddSubAgent:l,onClose:u,onSelectTool:d,onRemoveTool:p}){const f=t.type==="sequential"||t.type==="loop"||t.type==="parallel",[m,g]=Lt.useState(!1),[v,b]=Lt.useState(e),x=()=>{const S=v.trim().replace(/\s+/g,"_");S&&S!==e&&!n[S]?a(e,S):b(e),g(!1)},_=(S,N)=>{const T=n[S];T&&o(S,{tools:T.tools.filter(A=>A!==N)})},k=(S,N)=>{const T=n[S];if(T){let A=N;if(N==="function"||N==="mcp"){const C=T.tools.filter(P=>P.startsWith(N));A=`${N}_${C.length+1}`}else if(T.tools.includes(N))return;o(S,{tools:[...T.tools,A]})}};return s.jsxs("div",{className:"w-72 border-l p-4 overflow-y-auto",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m?s.jsx("input",{autoFocus:!0,className:"flex-1 px-2 py-1 border border-blue-500 rounded text-sm font-semibold",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},value:v,onChange:S=>b(S.target.value),onBlur:x,onKeyDown:S=>S.key==="Enter"&&x()}):s.jsxs("h3",{className:"font-semibold cursor-pointer hover:text-blue-500",style:{color:"var(--text-primary)"},onClick:()=>g(!0),title:"Click to rename",children:[e," ",s.jsx("span",{style:{color:"var(--text-muted)"},className:"text-xs",children:""})]}),s.jsx("button",{onClick:u,className:"px-2 py-1 rounded text-xs ml-2",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Close"})]}),f?s.jsx(rU,{nodeId:e,agent:t,agents:n,onUpdate:o,onAddSubAgent:l,onSelectTool:d,onRemoveTool:_,onAddTool:k}):t.type==="router"?s.jsx(oU,{nodeId:e,agent:t,onUpdate:o}):s.jsx(iU,{nodeId:e,agent:t,toolConfigs:r,onUpdate:o,onSelectTool:d,onRemoveTool:p})]})}function rU({nodeId:e,agent:t,agents:n,onUpdate:r,onAddSubAgent:o,onSelectTool:a,onRemoveTool:l,onAddTool:u}){const[d,p]=Lt.useState(null);return s.jsxs("div",{children:[t.type==="loop"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4 p-2 rounded text-xs",style:{backgroundColor:"rgba(128, 90, 213, 0.15)",border:"1px solid var(--node-loop)",color:"var(--text-primary)"},children:[s.jsx("div",{className:"font-semibold mb-1",style:{color:"var(--node-loop)"},children:" Loop Agent Tips"}),s.jsx("p",{style:{color:"var(--text-secondary)"},children:"Sub-agents run repeatedly until max iterations or exit_loop tool is called."})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Max Iterations"}),s.jsx("input",{type:"number",min:"1",className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.max_iterations||3,onChange:f=>r(e,{max_iterations:parseInt(f.target.value)||3})})]})]}),s.jsxs("label",{className:"block text-sm mb-2",style:{color:"var(--text-secondary)"},children:["Sub-Agents ",t.type==="parallel"?"(run concurrently)":"(in order)"]}),(t.sub_agents||[]).map((f,m)=>{const g=n[f];if(!g)return null;const v=d===f;return s.jsxs("div",{className:"mb-2 rounded overflow-hidden",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)"},children:[s.jsxs("div",{className:"p-2 cursor-pointer flex items-center justify-between",style:{color:"var(--text-primary)"},onClick:()=>p(v?null:f),children:[s.jsxs("span",{className:"text-sm font-medium",children:[t.type==="parallel"?"":`${m+1}.`," ",f]}),s.jsx("span",{style:{color:"var(--text-muted)"},className:"text-xs",children:v?"":""})]}),v&&s.jsxs("div",{className:"p-2 pt-0",style:{borderTop:"1px solid var(--border-default)"},children:[s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Model"}),s.jsx("div",{className:"mb-2",children:s.jsx(lx,{value:g.model||"",onChange:b=>r(f,{model:b}),compact:!0})}),s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Instruction"}),s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-xs h-16 mb-2",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:g.instruction,onChange:b=>r(f,{instruction:b.target.value})}),s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Tools"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:(g.tools||[]).map(b=>{const x=b.startsWith("function")?"function":b.startsWith("mcp")?"mcp":b,_=_c.find(S=>S.type===x),k=`${f}_${b}`;return s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded flex items-center gap-1 cursor-pointer",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:()=>a(k),children:[_?.icon," ",b," ",s.jsx("button",{onClick:S=>{S.stopPropagation(),l(f,b)},style:{color:"var(--accent-error)"},children:""})]},b)})}),s.jsx("div",{className:"flex flex-wrap gap-1",children:_c.filter(b=>!g.tools?.includes(b.type)||b.type==="function"||b.type==="mcp").map(b=>s.jsxs("button",{onClick:()=>u(f,b.type),className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:["+ ",b.icon]},b.type))})]})]},f)}),s.jsx("button",{onClick:o,className:"w-full py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"+ Add Sub-Agent"})]})}function oU({nodeId:e,agent:t,onUpdate:n}){return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Model"}),s.jsx("div",{className:"mb-3",children:s.jsx(lx,{value:t.model||"",onChange:r=>n(e,{model:r})})}),s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Routing Instruction"}),s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-sm h-20 mb-3",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.instruction,onChange:r=>n(e,{instruction:r.target.value})}),s.jsx("label",{className:"block text-sm mb-2",style:{color:"var(--text-secondary)"},children:"Routes"}),(t.routes||[]).map((r,o)=>s.jsxs("div",{className:"flex gap-1 mb-2 items-center",children:[s.jsx("input",{className:"flex-1 px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"condition",value:r.condition,onChange:a=>{const l=[...t.routes||[]];l[o]={...r,condition:a.target.value},n(e,{routes:l})}}),s.jsx("span",{style:{color:"var(--text-muted)"},children:""}),s.jsx("input",{className:"flex-1 px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"target",value:r.target,onChange:a=>{const l=[...t.routes||[]];l[o]={...r,target:a.target.value},n(e,{routes:l})}}),s.jsx("button",{style:{color:"var(--accent-error)"},className:"text-sm",onClick:()=>n(e,{routes:(t.routes||[]).filter((a,l)=>l!==o)}),children:""})]},o)),s.jsx("button",{className:"w-full py-1 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:()=>n(e,{routes:[...t.routes||[],{condition:"",target:""}]}),children:"+ Add Route"})]})}function iU({nodeId:e,agent:t,toolConfigs:n,onUpdate:r,onSelectTool:o,onRemoveTool:a}){const[l,u]=Lt.useState(!1);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(D1,{title:"Basic",children:[s.jsx(Xn,{label:"Model",children:s.jsx(lx,{value:t.model||"",onChange:d=>r(e,{model:d})})}),s.jsx(Xn,{label:"Instruction",children:s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-sm h-24",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.instruction,onChange:d=>r(e,{instruction:d.target.value}),placeholder:"You are a helpful assistant..."})}),s.jsx(Xn,{label:"Description",hint:"Optional agent description",children:s.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.description||"",onChange:d=>r(e,{description:d.target.value}),placeholder:"What this agent does"})})]}),t.tools.length>0&&s.jsx(D1,{title:"Tools",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:t.tools.map(d=>{const p=d.startsWith("function")?"function":d.startsWith("mcp")?"mcp":d,f=_c.find(b=>b.type===p),m=`${e}_${d}`,g=n[m],v=g&&"name"in g&&g.name?g.name:f?.label||d;return s.jsxs("span",{className:"text-xs px-2 py-1 rounded flex items-center gap-1 cursor-pointer hover:opacity-80",style:{backgroundColor:g?"#38A169":"var(--bg-secondary)",color:g?"white":"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:()=>o(m),children:[f?.icon," ",v," ",s.jsx("span",{className:"text-blue-400",children:""}),s.jsx("button",{onClick:b=>{b.stopPropagation(),a(d)},className:"ml-1 text-red-500 hover:text-red-400",children:""})]},d)})})}),s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>u(!l),className:"w-full text-left text-xs flex items-center gap-1",style:{color:"var(--text-secondary)"},children:[s.jsx("span",{children:l?"":""})," Advanced Settings"]}),l&&s.jsxs("div",{className:"mt-2 space-y-3 pl-2 border-l",style:{borderColor:"var(--border-default)"},children:[s.jsx(Xn,{label:"Global Instruction",hint:"System-level instruction prepended to all prompts",children:s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-xs h-16",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.global_instruction||"",onChange:d=>r(e,{global_instruction:d.target.value}),placeholder:"Always respond in JSON format..."})}),s.jsx(Xn,{label:"Output Key",hint:"Custom state key for agent output",children:s.jsx("input",{className:"w-full px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.output_key||"",onChange:d=>r(e,{output_key:d.target.value}),placeholder:"response (default)"})}),s.jsx(Xn,{label:"Output Schema",hint:"JSON Schema for structured output",children:s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-xs h-20 font-mono",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.output_schema||"",onChange:d=>r(e,{output_schema:d.target.value}),placeholder:'{"type": "object", "properties": {...}}'})}),s.jsx(Xn,{label:"Temperature",hint:"Controls randomness (0.0 = deterministic, 2.0 = creative)",children:s.jsx("input",{type:"number",className:"w-full px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.temperature??"",onChange:d=>r(e,{temperature:d.target.value?parseFloat(d.target.value):void 0}),placeholder:"Default (provider-specific)",min:"0",max:"2",step:"0.1"})}),s.jsx(Xn,{label:"Max Output Tokens",hint:"Maximum tokens in the response",children:s.jsx("input",{type:"number",className:"w-full px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.max_output_tokens??"",onChange:d=>r(e,{max_output_tokens:d.target.value?parseInt(d.target.value):void 0}),placeholder:"Default (provider-specific)",min:"1",step:"1"})}),s.jsx(Xn,{label:"Top P",hint:"Nucleus sampling threshold (0.0 - 1.0)",children:s.jsx("input",{type:"number",className:"w-full px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.top_p??"",onChange:d=>r(e,{top_p:d.target.value?parseFloat(d.target.value):void 0}),placeholder:"Default (provider-specific)",min:"0",max:"1",step:"0.05"})}),s.jsx(Xn,{label:"Top K",hint:"Limits token selection to top K candidates",children:s.jsx("input",{type:"number",className:"w-full px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.top_k??"",onChange:d=>r(e,{top_k:d.target.value?parseInt(d.target.value):void 0}),placeholder:"Default (provider-specific)",min:"1",step:"1"})}),s.jsx(Xn,{label:"Include Contents",children:s.jsxs("select",{className:"w-full px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.include_contents||"all",onChange:d=>r(e,{include_contents:d.target.value}),children:[s.jsx("option",{value:"all",children:"All history"}),s.jsx("option",{value:"last",children:"Last message only"}),s.jsx("option",{value:"none",children:"None"})]})})]})]})]})}function D1({title:e,children:t}){return s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:"var(--text-muted)"},children:e}),s.jsx("div",{className:"space-y-2",children:t})]})}function Xn({label:e,hint:t,children:n}){return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:[e,t&&s.jsxs("span",{className:"text-xs ml-1",style:{color:"var(--text-muted)"},children:["(",t,")"]})]}),n]})}function sU({toolId:e,config:t,onUpdate:n,onClose:r,onOpenCodeEditor:o}){const a=e.includes("_mcp")?"mcp":e.includes("_function")?"function":e.includes("_browser")?"browser":e.includes("_exit_loop")?"exit_loop":e.includes("_google_search")?"google_search":"",u=t||(a==="mcp"?{type:"mcp",server_command:"",server_args:[],tool_filter:[]}:a==="function"?{type:"function",name:"",description:"",parameters:[]}:a==="browser"?{type:"browser",headless:!0,timeout_ms:3e4}:null),d=["exit_loop","google_search","load_artifact"].includes(a);return!u&&!d?null:s.jsxs("div",{className:"w-80 border-l p-4 overflow-y-auto",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Configure Tool"}),s.jsx("button",{onClick:r,className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Close"})]}),a==="mcp"&&s.jsx(aU,{config:u,onUpdate:n}),a==="function"&&s.jsx(lU,{config:u,onUpdate:n,onOpenCodeEditor:o}),a==="browser"&&s.jsx(cU,{config:u,onUpdate:n}),d&&s.jsx(uU,{type:a})]})}function aU({config:e,onUpdate:t}){return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-2",style:{color:"var(--text-secondary)"},children:"Quick Templates"}),s.jsx("div",{className:"grid grid-cols-2 gap-1 mb-3",children:ZB.map(n=>s.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},title:n.desc,onClick:()=>t({...e,name:n.name,server_command:n.command,server_args:n.args}),children:[s.jsx("span",{children:n.icon}),s.jsx("span",{className:"truncate",children:n.name})]},n.name))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Server Command"}),s.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"npx, uvx...",value:e.server_command,onChange:n=>t({...e,server_command:n.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Server Args (one per line)"}),s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-sm h-20",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:e.server_args.join(`
`),onChange:n=>t({...e,server_args:n.target.value.split(`
`).filter(Boolean)})})]})]})}function lU({config:e,onUpdate:t,onOpenCodeEditor:n}){const r=()=>t({...e,parameters:[...e.parameters,{name:"",param_type:"string",description:"",required:!1}]}),o=(l,u)=>{const d=[...e.parameters];d[l]={...d[l],...u},t({...e,parameters:d})},a=l=>t({...e,parameters:e.parameters.filter((u,d)=>d!==l)});return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Function Name"}),s.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"get_weather",value:e.name,onChange:l=>t({...e,name:l.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Description"}),s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-sm h-16",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:e.description,onChange:l=>t({...e,description:l.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Parameters"}),e.parameters.map((l,u)=>s.jsxs("div",{className:"flex gap-1 mb-1 items-center",children:[s.jsx("input",{className:"flex-1 px-1 py-0.5 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"name",value:l.name,onChange:d=>o(u,{name:d.target.value})}),s.jsxs("select",{className:"px-1 py-0.5 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:l.param_type,onChange:d=>o(u,{param_type:d.target.value}),children:[s.jsx("option",{value:"string",children:"string"}),s.jsx("option",{value:"number",children:"number"}),s.jsx("option",{value:"boolean",children:"boolean"})]}),s.jsxs("label",{className:"text-xs flex items-center gap-1",style:{color:"var(--text-secondary)"},children:[s.jsx("input",{type:"checkbox",checked:l.required,onChange:d=>o(u,{required:d.target.checked})}),"req"]}),s.jsx("button",{style:{color:"var(--accent-error)"},className:"text-xs",onClick:()=>a(u),children:""})]},u)),s.jsx("button",{className:"w-full py-1 rounded text-xs mt-1",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:r,children:"+ Add Parameter"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("label",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Code (Rust)"}),s.jsx("button",{className:"text-xs",style:{color:"var(--accent-primary)"},onClick:n,children:" Edit"})]}),s.jsx("textarea",{className:"w-full px-2 py-2 border rounded text-xs font-mono h-32 cursor-pointer",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-default)",color:"var(--text-muted)"},value:qA(e),readOnly:!0,onClick:n})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-2",style:{color:"var(--text-secondary)"},children:"Templates"}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:JB.map(l=>s.jsxs("button",{className:"px-2 py-1 rounded text-xs flex items-center gap-1",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:()=>t({...e,...l.template}),children:[s.jsx("span",{children:l.icon}),s.jsx("span",{className:"truncate",children:l.name})]},l.name))})]})]})}function cU({config:e,onUpdate:t}){return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-2 rounded text-xs",style:{backgroundColor:"rgba(234, 179, 8, 0.15)",border:"1px solid var(--accent-warning)",color:"var(--text-primary)"},children:[s.jsx("div",{className:"font-semibold mb-1",style:{color:"var(--accent-warning)"},children:" Requirements"}),s.jsx("p",{style:{color:"var(--text-secondary)"},children:"Chrome + ChromeDriver required"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"headless",checked:e.headless,onChange:n=>t({...e,headless:n.target.checked})}),s.jsx("label",{htmlFor:"headless",className:"text-sm",style:{color:"var(--text-primary)"},children:"Headless Mode"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Timeout (ms)"}),s.jsx("input",{type:"number",className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:e.timeout_ms,onChange:n=>t({...e,timeout_ms:parseInt(n.target.value)||3e4})})]})]})}function uU({type:e}){const t={exit_loop:{title:"Exit Loop Tool",desc:"Allows agent to exit a loop when task is complete."},google_search:{title:"Google Search Tool",desc:"Web search via Google Grounding API."},load_artifact:{title:"Load Artifact Tool",desc:"Load artifacts from session store."}},{title:n,desc:r}=t[e]||{title:"Tool",desc:"No configuration needed."};return s.jsxs("div",{className:"p-2 rounded text-xs",style:{backgroundColor:"rgba(59, 130, 246, 0.15)",border:"1px solid var(--node-agent)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"font-semibold mb-1",style:{color:"var(--node-agent)"},children:[" ",n]}),s.jsx("p",{style:{color:"var(--text-secondary)"},children:r})]})}const dU=j.memo(function({snapshot:t,previousSnapshot:n,snapshots:r=[],currentIndex:o=-1,onHistorySelect:a,onClose:l}){const u=j.useMemo(()=>!t||!n?new Set:yU(n.outputState,t.outputState),[t,n]),d=j.useMemo(()=>t?r.map((p,f)=>({snapshot:p,index:f})).filter(({snapshot:p})=>p.nodeId===t.nodeId):[],[r,t]);return t?s.jsxs("div",{className:"state-inspector",children:[s.jsx(L1,{onClose:l}),s.jsxs("div",{className:"state-inspector-content",children:[s.jsx(pU,{snapshot:t}),s.jsx(q1,{title:"Input State",data:t.inputState,changedKeys:new Set,emptyMessage:"No input state"}),s.jsx(q1,{title:"Output State",data:t.outputState,changedKeys:u,emptyMessage:"No output state"}),s.jsx(hU,{snapshot:t}),d.length>1&&s.jsx(mU,{history:d,currentIndex:o,onSelect:a})]})]}):s.jsxs("div",{className:"state-inspector",children:[s.jsx(L1,{onClose:l}),s.jsxs("div",{className:"state-inspector-empty",children:[s.jsx("span",{className:"state-inspector-empty-icon",children:""}),s.jsx("span",{className:"state-inspector-empty-text",children:"Run the workflow to inspect state at each node"})]})]})});function L1({onClose:e}){return s.jsxs("div",{className:"state-inspector-header",children:[s.jsxs("span",{className:"state-inspector-title",children:[s.jsx("span",{className:"state-inspector-title-icon",children:""}),"State Inspector"]}),e&&s.jsx("button",{className:"state-inspector-close",onClick:e,"aria-label":"Close state inspector",children:s.jsx(gU,{})})]})}function pU({snapshot:e}){const t=bU(e.nodeId);return s.jsxs("div",{className:"state-node-info",children:[s.jsx("span",{className:"state-node-icon",children:t}),s.jsxs("div",{className:"state-node-details",children:[s.jsx("div",{className:"state-node-name",title:e.nodeLabel||e.nodeId,children:e.nodeLabel||e.nodeId}),e.step!==void 0&&s.jsxs("div",{className:"state-node-step",children:["Step ",e.step]})]})]})}function q1({title:e,data:t,changedKeys:n,emptyMessage:r}){const o=Object.keys(t).length;return s.jsxs("div",{className:"state-section",children:[s.jsx("div",{className:"state-section-header",children:s.jsxs("span",{className:"state-section-title",children:[e,o>0&&s.jsxs("span",{className:"state-section-badge",children:[o," keys"]})]})}),s.jsx(fU,{data:t,changedKeys:n,emptyMessage:r})]})}function fU({data:e,changedKeys:t=new Set,emptyMessage:n="Empty"}){return Object.keys(e).length===0?s.jsx("div",{className:"json-viewer",children:s.jsx("span",{className:"json-viewer-empty",children:n})}):s.jsx("div",{className:"json-viewer",children:s.jsx(_P,{data:e,changedKeys:t,depth:0})})}function _P({data:e,changedKeys:t,depth:n,parentKey:r=""}){const[o,a]=j.useState({}),l=j.useCallback(d=>{a(p=>({...p,[d]:!p[d]}))},[]),u=Object.entries(e);return s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"json-bracket",children:"{"}),u.length>0&&s.jsx("div",{className:n>0?"json-nested":"",children:u.map(([d,p],f)=>{const m=r?`${r}.${d}`:d,g=t.has(d)||t.has(m),v=f===u.length-1,b=Sc(p)||Array.isArray(p),x=o[d];return s.jsxs("div",{children:[b?s.jsxs("span",{className:"json-collapsible",onClick:()=>l(d),children:[s.jsx("span",{className:"json-collapse-icon",children:x?"":""}),s.jsxs("span",{className:`json-key ${g?"changed":""}`,children:['"',d,'"']}),s.jsx("span",{className:"json-colon",children:": "}),x?s.jsx("span",{className:"json-collapsed-preview",children:Array.isArray(p)?`[${p.length} items]`:`{${Object.keys(p).length} keys}`}):null]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:`json-key ${g?"changed":""}`,children:['"',d,'"']}),s.jsx("span",{className:"json-colon",children:": "})]}),!x&&s.jsx("span",{className:g?"json-value changed":"",children:s.jsx(SP,{value:p,changedKeys:t,depth:n,parentKey:m})}),!v&&s.jsx("span",{className:"json-comma",children:","})]},d)})}),s.jsx("span",{className:"json-bracket",children:"}"})]})}function SP({value:e,changedKeys:t,depth:n,parentKey:r}){if(e===null)return s.jsx("span",{className:"json-null",children:"null"});if(e===void 0)return s.jsx("span",{className:"json-null",children:"undefined"});if(typeof e=="string"){const o=e.length>100?e.slice(0,100)+"...":e;return s.jsxs("span",{className:"json-string",children:['"',vU(o),'"']})}return typeof e=="number"?s.jsx("span",{className:"json-number",children:e}):typeof e=="boolean"?s.jsx("span",{className:"json-boolean",children:e.toString()}):Array.isArray(e)?e.length===0?s.jsx("span",{className:"json-bracket",children:"[]"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"json-bracket",children:"["}),s.jsx("div",{className:"json-nested",children:e.map((o,a)=>s.jsxs("div",{children:[s.jsx(SP,{value:o,changedKeys:t,depth:n+1,parentKey:`${r}[${a}]`}),a<e.length-1&&s.jsx("span",{className:"json-comma",children:","})]},a))}),s.jsx("span",{className:"json-bracket",children:"]"})]}):Sc(e)?s.jsx(_P,{data:e,changedKeys:t,depth:n+1,parentKey:r}):s.jsx("span",{className:"json-string",children:String(e)})}function hU({snapshot:e}){return s.jsxs("div",{className:"state-meta",children:[s.jsxs("div",{className:"state-meta-item",children:[s.jsx("span",{className:"state-meta-label",children:"Duration:"}),s.jsx("span",{className:"state-meta-value",children:kP(e.duration)})]}),s.jsxs("div",{className:"state-meta-item",children:[s.jsx("span",{className:"state-meta-label",children:"Status:"}),s.jsx("span",{className:`state-meta-value ${e.status}`,children:e.status==="success"?" Success":e.status==="error"?" Error":" Running"})]}),e.iteration!==void 0&&e.iteration>0&&s.jsxs("div",{className:"state-meta-item",children:[s.jsx("span",{className:"state-meta-label",children:"Iteration:"}),s.jsx("span",{className:"state-meta-value",children:e.iteration})]}),e.error&&s.jsxs("div",{className:"state-meta-item",style:{width:"100%"},children:[s.jsx("span",{className:"state-meta-label",children:"Error:"}),s.jsx("span",{className:"state-meta-value error",title:e.error,children:xU(e.error,50)})]})]})}function mU({history:e,currentIndex:t,onSelect:n}){return s.jsxs("div",{className:"state-history",children:[s.jsx("div",{className:"state-history-header",children:s.jsxs("span",{className:"state-history-title",children:["History (",e.length,")"]})}),s.jsx("div",{className:"state-history-list",children:e.map(({snapshot:r,index:o})=>s.jsxs("div",{className:`state-history-item ${o===t?"active":""}`,onClick:()=>n?.(o),role:"button",tabIndex:0,onKeyDown:a=>a.key==="Enter"&&n?.(o),children:[s.jsx("span",{className:"state-history-step",children:r.step!==void 0?`#${r.step}`:`@${o}`}),s.jsx("span",{className:"state-history-node",children:kP(r.duration)}),s.jsx("span",{className:`state-history-status ${r.status}`,children:r.status==="success"?"":r.status==="error"?"":""})]},`${r.nodeId}-hist-${o}`))})]})}function gU(){return s.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}function yU(e,t){const n=new Set;if(!e||!t)return n;for(const r of Object.keys(t))r in e&&bv(e[r],t[r])||n.add(r);for(const r of Object.keys(e))r in t||n.add(r);return n}function bv(e,t){if(e===t)return!0;if(e===null||t===null)return e===t;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length!==t.length?!1:e.every((n,r)=>bv(n,t[r]));if(Sc(e)&&Sc(t)){const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:n.every(o=>bv(e[o],t[o]))}return!1}function Sc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function vU(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")}function kP(e){if(e<1e3)return`${e}ms`;if(e<6e4)return`${(e/1e3).toFixed(1)}s`;const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return`${t}m ${n}s`}function xU(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}function bU(e){const t=e.toLowerCase();return t.startsWith("trigger")?"":t.startsWith("http")?"":t.startsWith("set")?"":t.startsWith("transform")?"":t.startsWith("switch")?"":t.startsWith("merge")?"":t.startsWith("wait")?"":t.startsWith("code")?"":t.startsWith("database")?"":t.includes("loop")?"":t.includes("parallel")?"":t.includes("sequential")?"":t.includes("router")?"":t==="start"?"":t==="end"?"":""}function Me({title:e,defaultOpen:t=!0,children:n}){const[r,o]=j.useState(t);return s.jsxs("div",{className:"collapsible-section",children:[s.jsxs("button",{className:"collapsible-section-header",onClick:()=>o(!r),type:"button",children:[s.jsx("span",{className:"collapsible-section-toggle",children:r?"":""}),s.jsx("span",{className:"collapsible-section-title",children:e})]}),r&&s.jsx("div",{className:"collapsible-section-content",children:n})]})}function ue({label:e,hint:t,required:n,tooltip:r,children:o}){const a=s.jsxs("label",{className:"shared-field-label",children:[e,n&&s.jsx("span",{className:"shared-field-required",children:"*"}),t&&s.jsxs("span",{className:"shared-field-hint",children:["(",t,")"]}),r&&s.jsx("span",{className:"shared-field-tooltip-icon",title:r,children:""})]});return s.jsxs("div",{className:"shared-field",children:[r?s.jsx(Kv,{content:r,position:"right",delay:300,children:a}):a,o]})}function F1({value:e,options:t,onChange:n,labels:r}){return s.jsx("select",{className:"standard-props-select",value:e,onChange:o=>n(o.target.value),children:t.map(o=>s.jsx("option",{value:o,children:r?.[o]??o},o))})}function kp({value:e,onChange:t,min:n,max:r,step:o=1,placeholder:a}){return s.jsx("input",{type:"number",className:"standard-props-input",value:e,onChange:l=>t(parseInt(l.target.value,10)||0),min:n,max:r,step:o,placeholder:a})}function uo({value:e,onChange:t,placeholder:n,multiline:r=!1}){return r?s.jsx("textarea",{className:"standard-props-textarea",value:e,onChange:o=>t(o.target.value),placeholder:n,rows:3}):s.jsx("input",{type:"text",className:"standard-props-input",value:e,onChange:o=>t(o.target.value),placeholder:n})}function wU({value:e,onChange:t,label:n}){return s.jsxs("label",{className:"standard-props-toggle",children:[s.jsx("input",{type:"checkbox",checked:e,onChange:r=>t(r.target.checked)}),s.jsx("span",{className:"standard-props-toggle-slider"}),n&&s.jsx("span",{className:"standard-props-toggle-label",children:n})]})}function _U({value:e,onChange:t,keyPlaceholder:n="State key",valuePlaceholder:r="Node input"}){const o=Object.entries(e),a=()=>{t({...e,"":""})},l=p=>{const f={...e};delete f[p],t(f)},u=(p,f)=>{const m={};for(const[g,v]of Object.entries(e))g===p?m[f]=v:m[g]=v;t(m)},d=(p,f)=>{t({...e,[p]:f})};return s.jsxs("div",{className:"standard-props-kv-editor",children:[o.map(([p,f],m)=>s.jsxs("div",{className:"standard-props-kv-row",children:[s.jsx("input",{type:"text",className:"standard-props-kv-key",value:p,onChange:g=>u(p,g.target.value),placeholder:n}),s.jsx("span",{className:"standard-props-kv-arrow",children:""}),s.jsx("input",{type:"text",className:"standard-props-kv-value",value:f,onChange:g=>d(p,g.target.value),placeholder:r}),s.jsx("button",{type:"button",className:"standard-props-kv-remove",onClick:()=>l(p),title:"Remove mapping",children:""})]},m)),s.jsx("button",{type:"button",className:"standard-props-kv-add",onClick:a,children:"+ Add Mapping"})]})}const SU=["stop","continue","retry","fallback"],kU={stop:"Stop on Error",continue:"Continue on Error",retry:"Retry on Error",fallback:"Use Fallback Value"},NU=["none","error","info","debug"],jU={none:"None",error:"Error Only",info:"Info",debug:"Debug (Verbose)"};function ir({properties:e,onChange:t,showIdentity:n=!1}){const r=j.useCallback(d=>{t({...e,errorHandling:{...e.errorHandling,...d}})},[e,t]),o=j.useCallback(d=>{t({...e,tracing:{...e.tracing,...d}})},[e,t]),a=j.useCallback(d=>{t({...e,callbacks:{...e.callbacks,...d}})},[e,t]),l=j.useCallback(d=>{t({...e,execution:{...e.execution,...d}})},[e,t]),u=j.useCallback(d=>{t({...e,mapping:{...e.mapping,...d}})},[e,t]);return s.jsxs("div",{className:"standard-properties-panel",children:[n&&s.jsxs(Me,{title:"Identity",defaultOpen:!0,children:[s.jsx(ue,{label:"Name",children:s.jsx(uo,{value:e.name,onChange:d=>t({...e,name:d}),placeholder:"Node name"})}),s.jsx(ue,{label:"Description",hint:"optional",children:s.jsx(uo,{value:e.description||"",onChange:d=>t({...e,description:d||void 0}),placeholder:"What this node does",multiline:!0})})]}),s.jsxs(Me,{title:"Error Handling",defaultOpen:!1,children:[s.jsx(ue,{label:"Error Mode",tooltip:an.errorHandling,children:s.jsx(F1,{value:e.errorHandling.mode,options:SU,labels:kU,onChange:d=>r({mode:d})})}),e.errorHandling.mode==="retry"&&s.jsxs(s.Fragment,{children:[s.jsx(ue,{label:"Retry Count",hint:"1-10",children:s.jsx(kp,{value:e.errorHandling.retryCount??3,onChange:d=>r({retryCount:d}),min:1,max:10})}),s.jsx(ue,{label:"Retry Delay",hint:"ms",children:s.jsx(kp,{value:e.errorHandling.retryDelay??1e3,onChange:d=>r({retryDelay:d}),min:0,step:100})})]}),e.errorHandling.mode==="fallback"&&s.jsx(ue,{label:"Fallback Value",hint:"JSON",children:s.jsx(uo,{value:e.errorHandling.fallbackValue!==void 0?JSON.stringify(e.errorHandling.fallbackValue):"",onChange:d=>{try{const p=d?JSON.parse(d):void 0;r({fallbackValue:p})}catch{r({fallbackValue:d||void 0})}},placeholder:'{"default": "value"}',multiline:!0})})]}),s.jsxs(Me,{title:"Tracing & Logging",defaultOpen:!1,children:[s.jsx(ue,{label:"Enable Tracing",tooltip:an.tracing,children:s.jsx(wU,{value:e.tracing.enabled,onChange:d=>o({enabled:d})})}),s.jsx(ue,{label:"Log Level",children:s.jsx(F1,{value:e.tracing.logLevel,options:NU,labels:jU,onChange:d=>o({logLevel:d})})})]}),s.jsxs(Me,{title:"Callbacks",defaultOpen:!1,children:[s.jsx(ue,{label:"onStart",hint:"function name or code",tooltip:an.callbacks,children:s.jsx(uo,{value:e.callbacks.onStart||"",onChange:d=>a({onStart:d||void 0}),placeholder:"handleStart"})}),s.jsx(ue,{label:"onComplete",hint:"function name or code",children:s.jsx(uo,{value:e.callbacks.onComplete||"",onChange:d=>a({onComplete:d||void 0}),placeholder:"handleComplete"})}),s.jsx(ue,{label:"onError",hint:"function name or code",children:s.jsx(uo,{value:e.callbacks.onError||"",onChange:d=>a({onError:d||void 0}),placeholder:"handleError"})})]}),s.jsxs(Me,{title:"Execution Control",defaultOpen:!1,children:[s.jsx(ue,{label:"Timeout",hint:"ms",tooltip:an.executionControl,children:s.jsx(kp,{value:e.execution.timeout,onChange:d=>l({timeout:d}),min:0,step:1e3})}),s.jsx(ue,{label:"Skip Condition",hint:"expression",children:s.jsx(uo,{value:e.execution.condition||"",onChange:d=>l({condition:d||void 0}),placeholder:"state.shouldRun === true"})})]}),s.jsxs(Me,{title:"Input/Output Mapping",defaultOpen:!0,children:[s.jsx(ue,{label:"Input Mapping",hint:"state  node",tooltip:an.inputOutputMapping,children:s.jsx(_U,{value:e.mapping.inputMapping||{},onChange:d=>u({inputMapping:d}),keyPlaceholder:"state.field",valuePlaceholder:"nodeInput"})}),s.jsx(ue,{label:"Output Key",hint:"where to store result",children:s.jsx(uo,{value:e.mapping.outputKey,onChange:d=>u({outputKey:d}),placeholder:"result"})})]})]})}const EU=["manual","webhook","schedule","event"],z1={manual:{label:"Manual",icon:"",description:"Triggered by user action (Run button or API)"},webhook:{label:"Webhook",icon:"",description:"Triggered by HTTP request"},schedule:{label:"Schedule",icon:"",description:"Triggered on a cron schedule"},event:{label:"Event",icon:"",description:"Triggered by external events"}},CU=["GET","POST"],TU=["none","bearer","api_key"],AU={none:"No Authentication",bearer:"Bearer Token",api_key:"API Key"},PU=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Asia/Singapore","Australia/Sydney"];function IU({node:e,onChange:t}){const n=j.useCallback(p=>{const f={triggerType:p};p==="manual"&&!e.manual?f.manual={...zt}:p==="webhook"&&!e.webhook?f.webhook={path:"/api/webhook/trigger",method:"POST",auth:"none"}:p==="schedule"&&!e.schedule?f.schedule={cron:"0 * * * *",timezone:"UTC"}:p==="event"&&!e.event&&(f.event={source:"",eventType:""}),t({...e,...f})},[e,t]),r=j.useCallback(p=>{t({...e,webhook:{...e.webhook,...p}})},[e,t]),o=j.useCallback(p=>{t({...e,schedule:{...e.schedule,...p}})},[e,t]),a=j.useCallback(p=>{t({...e,event:{...e.event,...p}})},[e,t]),l=j.useCallback(p=>{t({...e,manual:{...zt,...e.manual,...p}})},[e,t]),u=j.useCallback(p=>{t({...e,...p})},[e,t]),d=z1[e.triggerType];return s.jsxs("div",{className:"trigger-panel",children:[s.jsx("div",{className:"trigger-type-tabs",children:EU.map(p=>{const f=z1[p];return s.jsxs("button",{type:"button",className:`trigger-type-tab ${e.triggerType===p?"selected":""}`,onClick:()=>n(p),title:f.description,children:[s.jsx("span",{className:"trigger-type-tab-icon",children:f.icon}),s.jsx("span",{className:"trigger-type-tab-label",children:f.label})]},p)})}),s.jsxs("div",{className:"trigger-type-description",children:[s.jsx("span",{className:"trigger-type-description-icon",children:d.icon}),s.jsx("span",{className:"trigger-type-description-text",children:d.description})]}),e.triggerType==="manual"&&s.jsxs(Me,{title:"Manual Trigger Settings",defaultOpen:!0,children:[s.jsx(ue,{label:"Input Label",hint:"shown above chat input",tooltip:"The label displayed above the chat input field when the workflow is ready to receive input",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.manual?.inputLabel||zt.inputLabel,onChange:p=>l({inputLabel:p.target.value}),placeholder:"e.g., Enter your question"})}),s.jsx(ue,{label:"Default Prompt",hint:"placeholder text",tooltip:"Placeholder text shown in the chat input field to guide users on what to enter",children:s.jsx("textarea",{className:"trigger-panel-textarea",value:e.manual?.defaultPrompt??zt.defaultPrompt,onChange:p=>l({defaultPrompt:p.target.value}),onFocus:p=>{p.target.value===zt.defaultPrompt&&l({defaultPrompt:""})},placeholder:"Placeholder text for input field",rows:3})}),s.jsxs("div",{className:"trigger-panel-preview",children:[s.jsx("span",{className:"trigger-panel-preview-label",children:"Preview:"}),s.jsxs("div",{className:"trigger-panel-manual-preview",children:[s.jsx("span",{className:"trigger-panel-manual-preview-label",children:e.manual?.inputLabel||zt.inputLabel}),s.jsx("span",{className:"trigger-panel-manual-preview-placeholder",children:e.manual?.defaultPrompt||zt.defaultPrompt})]})]}),s.jsxs("div",{className:"trigger-panel-info",children:[s.jsx("span",{className:"trigger-panel-info-icon",children:""}),s.jsxs("span",{className:"trigger-panel-info-text",children:["Click the ",s.jsx("strong",{children:"Run"})," button or use the API to start this workflow."]})]})]}),e.triggerType==="webhook"&&e.webhook&&s.jsxs(s.Fragment,{children:[s.jsxs(Me,{title:"Endpoint Configuration",defaultOpen:!0,children:[s.jsx(ue,{label:"Webhook Path",required:!0,hint:"e.g., /api/webhook/my-flow",tooltip:an.webhookPath,children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.webhook.path,onChange:p=>r({path:p.target.value}),placeholder:"/api/webhook/trigger"})}),s.jsx(ue,{label:"HTTP Method",required:!0,tooltip:an.webhookMethod,children:s.jsx("div",{className:"trigger-panel-button-group",children:CU.map(p=>s.jsx("button",{type:"button",className:`trigger-panel-button ${e.webhook?.method===p?"selected":""}`,onClick:()=>r({method:p}),children:p},p))})}),s.jsxs("div",{className:"trigger-panel-preview",children:[s.jsx("span",{className:"trigger-panel-preview-label",children:"Endpoint:"}),s.jsxs("code",{className:"trigger-panel-preview-value",children:[e.webhook.method," ",e.webhook.path]})]})]}),s.jsxs(Me,{title:"Authentication",defaultOpen:e.webhook.auth!=="none",children:[s.jsx(ue,{label:"Auth Type",tooltip:an.webhookAuth,children:s.jsx("select",{className:"trigger-panel-select",value:e.webhook.auth,onChange:p=>r({auth:p.target.value}),children:TU.map(p=>s.jsx("option",{value:p,children:AU[p]},p))})}),e.webhook.auth==="bearer"&&s.jsx(ue,{label:"Token Environment Variable",hint:"env var name",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.webhook.authConfig?.tokenEnvVar||"",onChange:p=>r({authConfig:{...e.webhook?.authConfig,tokenEnvVar:p.target.value}}),placeholder:"WEBHOOK_TOKEN"})}),e.webhook.auth==="api_key"&&s.jsxs(s.Fragment,{children:[s.jsx(ue,{label:"Header Name",hint:"e.g., X-API-Key",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.webhook.authConfig?.headerName||"",onChange:p=>r({authConfig:{...e.webhook?.authConfig,headerName:p.target.value}}),placeholder:"X-API-Key"})}),s.jsx(ue,{label:"API Key Environment Variable",hint:"env var name",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.webhook.authConfig?.tokenEnvVar||"",onChange:p=>r({authConfig:{...e.webhook?.authConfig,tokenEnvVar:p.target.value}}),placeholder:"API_KEY"})})]}),e.webhook.auth==="none"&&s.jsxs("div",{className:"trigger-panel-info",children:[s.jsx("span",{className:"trigger-panel-info-icon",children:""}),s.jsx("span",{className:"trigger-panel-info-text",children:"No authentication. Anyone with the URL can trigger this workflow."})]})]})]}),e.triggerType==="schedule"&&e.schedule&&s.jsxs(s.Fragment,{children:[s.jsx(Me,{title:"Schedule Configuration",defaultOpen:!0,children:s.jsx(RU,{schedule:e.schedule,onChange:o})}),s.jsxs(Me,{title:"Trigger Input",defaultOpen:!0,children:[s.jsx(ue,{label:"Default Prompt",hint:"sent when schedule fires",tooltip:"The prompt/input that will be sent to the workflow when the schedule triggers",children:s.jsx("textarea",{className:"trigger-panel-textarea",value:e.schedule.defaultPrompt||"",onChange:p=>o({defaultPrompt:p.target.value}),placeholder:"e.g., Generate daily report for {{date}}",rows:3})}),s.jsxs("div",{className:"trigger-panel-info",children:[s.jsx("span",{className:"trigger-panel-info-icon",children:""}),s.jsx("span",{className:"trigger-panel-info-text",children:"This prompt will be sent to the first agent when the schedule fires. Leave empty to send schedule metadata (cron, timezone, timestamp)."})]})]})]}),e.triggerType==="event"&&e.event&&s.jsxs(s.Fragment,{children:[s.jsxs(Me,{title:"Event Source",defaultOpen:!0,children:[s.jsx(ue,{label:"Source Identifier",required:!0,hint:"unique identifier",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.event.source,onChange:p=>a({source:p.target.value}),placeholder:"my-event-source"})}),s.jsx(ue,{label:"Event Type",hint:"filter by type",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.event.eventType,onChange:p=>a({eventType:p.target.value}),placeholder:"user.created"})})]}),s.jsxs(Me,{title:"Event Filters",defaultOpen:!1,children:[s.jsxs("div",{className:"trigger-panel-info",children:[s.jsx("span",{className:"trigger-panel-info-icon",children:""}),s.jsx("span",{className:"trigger-panel-info-text",children:"Event filters allow you to only trigger on events matching specific criteria. Use JSONPath expressions to filter event payloads."})]}),s.jsx(ue,{label:"Filter Expression",hint:"JSONPath",children:s.jsx("input",{type:"text",className:"trigger-panel-input trigger-panel-input-mono",value:e.event.filter||"",onChange:p=>a({filter:p.target.value}),placeholder:"$.data.status == 'active'"})})]})]}),s.jsx(ir,{properties:e,onChange:u,showIdentity:!0})]})}function RU({schedule:e,onChange:t}){const[n,r]=j.useState(null),o=u=>{const d=u.trim().split(/\s+/);return d.length<5||d.length>6?(r("Cron expression must have 5 or 6 fields"),!1):(r(null),!0)},a=u=>{o(u),t({cron:u})},l=u=>{const d=u.trim().split(/\s+/);if(d.length<5)return"Invalid cron expression";const[p,f,m,g,v]=d;if(u==="* * * * *")return"Every minute";if(u==="0 * * * *")return"Every hour";if(u==="0 0 * * *")return"Every day at midnight";if(u==="0 0 * * 0")return"Every Sunday at midnight";if(u==="0 0 1 * *")return"First day of every month at midnight";const b=[];if(p==="*"?b.push("Every minute"):p.includes("/")?b.push(`Every ${p.split("/")[1]} minutes`):b.push(`At minute ${p}`),f!=="*"&&(f.includes("/")?b.push(`every ${f.split("/")[1]} hours`):b.push(`at ${f}:00`)),m!=="*"&&b.push(`on day ${m}`),g!=="*"&&b.push(`in month ${g}`),v!=="*"){const x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_=parseInt(v,10);!isNaN(_)&&_>=0&&_<=6&&b.push(`on ${x[_]}`)}return b.join(" ")||"Custom schedule"};return s.jsxs(s.Fragment,{children:[s.jsxs(ue,{label:"Cron Expression",required:!0,hint:"minute hour day month weekday",tooltip:an.cronExpression,children:[s.jsx("input",{type:"text",className:`trigger-panel-input trigger-panel-input-mono ${n?"error":""}`,value:e.cron,onChange:u=>a(u.target.value),placeholder:"0 * * * *"}),n&&s.jsx("span",{className:"trigger-panel-error",children:n})]}),s.jsxs("div",{className:"trigger-panel-presets",children:[s.jsx("span",{className:"trigger-panel-presets-label",children:"Presets:"}),s.jsxs("div",{className:"trigger-panel-presets-buttons",children:[s.jsx("button",{type:"button",onClick:()=>t({cron:"* * * * *"}),children:"Every minute"}),s.jsx("button",{type:"button",onClick:()=>t({cron:"0 * * * *"}),children:"Hourly"}),s.jsx("button",{type:"button",onClick:()=>t({cron:"0 0 * * *"}),children:"Daily"}),s.jsx("button",{type:"button",onClick:()=>t({cron:"0 0 * * 0"}),children:"Weekly"}),s.jsx("button",{type:"button",onClick:()=>t({cron:"0 0 1 * *"}),children:"Monthly"})]})]}),s.jsx(ue,{label:"Timezone",tooltip:an.timezone,children:s.jsx("select",{className:"trigger-panel-select",value:e.timezone,onChange:u=>t({timezone:u.target.value}),children:PU.map(u=>s.jsx("option",{value:u,children:u},u))})}),s.jsxs("div",{className:"trigger-panel-preview",children:[s.jsx("span",{className:"trigger-panel-preview-label",children:"Schedule:"}),s.jsx("span",{className:"trigger-panel-preview-value",children:l(e.cron)}),s.jsxs("span",{className:"trigger-panel-preview-tz",children:["(",e.timezone,")"]})]})]})}const OU=["GET","POST","PUT","PATCH","DELETE"],MU={GET:"Retrieve data",POST:"Create resource",PUT:"Replace resource",PATCH:"Update resource",DELETE:"Remove resource"},DU=["none","bearer","basic","api_key"],LU={none:"No Authentication",bearer:"Bearer Token",basic:"Basic Auth",api_key:"API Key"},qU=["none","json","form","raw"],FU={none:"No Body",json:"JSON",form:"Form Data",raw:"Raw Text"},zU=["json","text","binary"],BU={json:"JSON",text:"Plain Text",binary:"Binary"};function $U({node:e,onChange:t}){const n=j.useCallback(f=>{t({...e,method:f})},[e,t]),r=j.useCallback(f=>{t({...e,url:f})},[e,t]),o=j.useCallback(f=>{t({...e,auth:{...e.auth,...f}})},[e,t]),a=j.useCallback(f=>{t({...e,headers:f})},[e,t]),l=j.useCallback(f=>{t({...e,body:{...e.body,...f}})},[e,t]),u=j.useCallback(f=>{t({...e,response:{...e.response,...f}})},[e,t]),d=j.useCallback(f=>{if(f===null){const{rateLimit:m,...g}=e;t(g)}else t({...e,rateLimit:{...e.rateLimit,...f}})},[e,t]),p=j.useCallback(f=>{t({...e,...f})},[e,t]);return s.jsxs("div",{className:"http-panel",children:[s.jsxs(Me,{title:"Request",defaultOpen:!0,children:[s.jsx(ue,{label:"HTTP Method",required:!0,tooltip:an.httpMethod,children:s.jsx("div",{className:"http-method-selector",children:OU.map(f=>s.jsx("button",{type:"button",className:`http-method-option ${e.method===f?"selected":""} http-method-${f.toLowerCase()}`,onClick:()=>n(f),title:MU[f],children:f},f))})}),s.jsxs(ue,{label:"URL",required:!0,hint:"supports {{variable}} interpolation",tooltip:an.httpUrl,children:[s.jsx("input",{type:"text",className:"http-panel-input http-panel-input-mono",value:e.url,onChange:f=>r(f.target.value),placeholder:"https://api.example.com/endpoint"}),e.url&&/\{\{[^}]+\}\}/.test(e.url)&&s.jsxs("div",{className:"http-panel-url-vars",children:[s.jsx("span",{className:"http-panel-url-vars-label",children:"Variables detected:"}),s.jsx("span",{className:"http-panel-url-vars-list",children:(e.url.match(/\{\{([^}]+)\}\}/g)||[]).map((f,m)=>s.jsx("code",{className:"http-panel-url-var",children:f},m))})]})]})]}),s.jsx(HU,{auth:e.auth,onChange:o}),s.jsx(VU,{headers:e.headers,onChange:a}),s.jsx(UU,{body:e.body,method:e.method,onChange:l}),s.jsx(WU,{response:e.response,onChange:u}),s.jsx(KU,{rateLimit:e.rateLimit,onChange:d}),s.jsx(ir,{properties:e,onChange:p,showIdentity:!0})]})}function HU({auth:e,onChange:t}){return s.jsxs(Me,{title:"Authentication",defaultOpen:e.type!=="none",children:[s.jsx(ue,{label:"Auth Type",tooltip:an.httpAuth,children:s.jsx("select",{className:"http-panel-select",value:e.type,onChange:n=>t({type:n.target.value}),children:DU.map(n=>s.jsx("option",{value:n,children:LU[n]},n))})}),e.type==="bearer"&&s.jsx(ue,{label:"Bearer Token",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"http-panel-input",value:e.bearer?.token||"",onChange:n=>t({bearer:{token:n.target.value}}),placeholder:"Enter token or {{TOKEN_VAR}}"})}),e.type==="basic"&&s.jsxs(s.Fragment,{children:[s.jsx(ue,{label:"Username",required:!0,children:s.jsx("input",{type:"text",className:"http-panel-input",value:e.basic?.username||"",onChange:n=>t({basic:{...e.basic,username:n.target.value,password:e.basic?.password||""}}),placeholder:"Username"})}),s.jsx(ue,{label:"Password",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"http-panel-input",value:e.basic?.password||"",onChange:n=>t({basic:{...e.basic,username:e.basic?.username||"",password:n.target.value}}),placeholder:"Password or {{PASSWORD_VAR}}"})})]}),e.type==="api_key"&&s.jsxs(s.Fragment,{children:[s.jsx(ue,{label:"Header Name",required:!0,hint:"e.g., X-API-Key",children:s.jsx("input",{type:"text",className:"http-panel-input",value:e.apiKey?.headerName||"",onChange:n=>t({apiKey:{...e.apiKey,headerName:n.target.value,value:e.apiKey?.value||""}}),placeholder:"X-API-Key"})}),s.jsx(ue,{label:"API Key Value",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"http-panel-input",value:e.apiKey?.value||"",onChange:n=>t({apiKey:{...e.apiKey,headerName:e.apiKey?.headerName||"",value:n.target.value}}),placeholder:"API key or {{API_KEY_VAR}}"})})]})]})}function VU({headers:e,onChange:t}){const n=Object.entries(e),r=()=>{t({...e,"":""})},o=u=>{const d={...e};delete d[u],t(d)},a=(u,d)=>{const p={};for(const[f,m]of Object.entries(e))f===u?p[d]=m:p[f]=m;t(p)},l=(u,d)=>{t({...e,[u]:d})};return s.jsxs(Me,{title:"Headers",defaultOpen:n.length>0,children:[s.jsxs("div",{className:"http-panel-kv-editor",children:[n.map(([u,d],p)=>s.jsxs("div",{className:"http-panel-kv-row",children:[s.jsx("input",{type:"text",className:"http-panel-kv-key",value:u,onChange:f=>a(u,f.target.value),placeholder:"Header name"}),s.jsx("span",{className:"http-panel-kv-separator",children:":"}),s.jsx("input",{type:"text",className:"http-panel-kv-value",value:d,onChange:f=>l(u,f.target.value),placeholder:"Header value"}),s.jsx("button",{type:"button",className:"http-panel-kv-remove",onClick:()=>o(u),title:"Remove header",children:""})]},p)),s.jsx("button",{type:"button",className:"http-panel-kv-add",onClick:r,children:"+ Add Header"})]}),s.jsxs("div",{className:"http-panel-quick-headers",children:[s.jsx("span",{className:"http-panel-quick-label",children:"Quick add:"}),s.jsx("button",{type:"button",onClick:()=>t({...e,"Content-Type":"application/json"}),disabled:"Content-Type"in e,children:"Content-Type"}),s.jsx("button",{type:"button",onClick:()=>t({...e,Accept:"application/json"}),disabled:"Accept"in e,children:"Accept"}),s.jsx("button",{type:"button",onClick:()=>t({...e,"User-Agent":"ADK-Studio/1.0"}),disabled:"User-Agent"in e,children:"User-Agent"})]})]})}function UU({body:e,method:t,onChange:n}){const[r,o]=j.useState(null),a=(t==="GET"||t==="DELETE")&&e.type!=="none",l=u=>{if(e.type==="json")try{u.trim()&&JSON.parse(u),o(null)}catch{o("Invalid JSON syntax")}n({content:u})};return s.jsxs(Me,{title:"Body",defaultOpen:e.type!=="none",children:[s.jsx(ue,{label:"Body Type",children:s.jsx("div",{className:"http-body-type-selector",children:qU.map(u=>s.jsx("button",{type:"button",className:`http-body-type-option ${e.type===u?"selected":""}`,onClick:()=>n({type:u,content:u==="none"?void 0:e.content}),children:FU[u]},u))})}),a&&s.jsxs("div",{className:"http-panel-warning",children:[" ",t," requests typically don't include a body"]}),e.type==="json"&&s.jsxs(ue,{label:"JSON Body",hint:"supports {{variable}}",children:[s.jsx("textarea",{className:`http-panel-textarea http-panel-textarea-mono ${r?"error":""}`,value:typeof e.content=="string"?e.content:JSON.stringify(e.content,null,2),onChange:u=>l(u.target.value),placeholder:'{"key": "value", "data": "{{variable}}"}',rows:6}),r&&s.jsx("span",{className:"http-panel-error",children:r})]}),e.type==="form"&&s.jsx(ue,{label:"Form Data",hint:"key=value pairs",children:s.jsx("textarea",{className:"http-panel-textarea",value:typeof e.content=="string"?e.content:"",onChange:u=>n({content:u.target.value}),placeholder:`field1=value1
field2={{variable}}`,rows:4})}),e.type==="raw"&&s.jsx(ue,{label:"Raw Body",children:s.jsx("textarea",{className:"http-panel-textarea",value:typeof e.content=="string"?e.content:"",onChange:u=>n({content:u.target.value}),placeholder:"Raw request body content",rows:4})})]})}function WU({response:e,onChange:t}){return s.jsxs(Me,{title:"Response Handling",defaultOpen:!1,children:[s.jsx(ue,{label:"Response Type",children:s.jsx("select",{className:"http-panel-select",value:e.type,onChange:n=>t({type:n.target.value}),children:zU.map(n=>s.jsx("option",{value:n,children:BU[n]},n))})}),s.jsxs(ue,{label:"Status Validation",hint:"e.g., 200-299, 200,201",children:[s.jsx("input",{type:"text",className:"http-panel-input",value:e.statusValidation||"",onChange:n=>t({statusValidation:n.target.value||void 0}),placeholder:"200-299"}),s.jsx("div",{className:"http-panel-field-help",children:"Leave empty to accept any status. Use ranges (200-299) or comma-separated values (200,201,204)."})]}),e.type==="json"&&s.jsxs(ue,{label:"JSONPath Extraction",hint:"extract specific field",children:[s.jsx("input",{type:"text",className:"http-panel-input http-panel-input-mono",value:e.jsonPath||"",onChange:n=>t({jsonPath:n.target.value||void 0}),placeholder:"$.data.items[0].id"}),s.jsx("div",{className:"http-panel-field-help",children:"Use JSONPath syntax to extract a specific value from the response. Leave empty to use full response."})]}),s.jsxs("div",{className:"http-panel-info",children:[s.jsx("span",{className:"http-panel-info-icon",children:""}),s.jsx("span",{className:"http-panel-info-text",children:"The full response (status, headers, body) is available in the output. Use JSONPath to extract specific values."})]})]})}function KU({rateLimit:e,onChange:t}){const[n,r]=j.useState(!!e),o=a=>{r(a),a&&!e?t({requestsPerWindow:10,windowMs:1e3}):a||t(null)};return s.jsxs(Me,{title:"Rate Limiting",defaultOpen:!1,children:[s.jsx(ue,{label:"Enable Rate Limiting",children:s.jsxs("label",{className:"http-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:a=>o(a.target.checked)}),s.jsx("span",{className:"http-panel-toggle-slider"}),s.jsx("span",{className:"http-panel-toggle-label",children:n?"Enabled":"Disabled"})]})}),n&&e&&s.jsxs(s.Fragment,{children:[s.jsx(ue,{label:"Requests per Window",hint:"max requests",children:s.jsx("input",{type:"number",className:"http-panel-input",value:e.requestsPerWindow,onChange:a=>t({requestsPerWindow:parseInt(a.target.value,10)||1}),min:1,max:1e3})}),s.jsxs(ue,{label:"Window Duration",hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"http-panel-input",value:e.windowMs,onChange:a=>t({windowMs:parseInt(a.target.value,10)||1e3}),min:100,step:100}),s.jsxs("div",{className:"http-panel-field-help",children:[e.requestsPerWindow," request",e.requestsPerWindow!==1?"s":""," per ",e.windowMs,"ms = ",Math.round(e.requestsPerWindow/e.windowMs*1e3*60)," requests/minute"]})]})]})]})}const GU=["set","merge","delete"],YU={set:{label:"Set",description:"Create or overwrite variables",icon:""},merge:{label:"Merge",description:"Deep merge with existing values",icon:""},delete:{label:"Delete",description:"Remove variables from state",icon:""}},QU=["string","number","boolean","json","expression"],XU={string:"String",number:"Number",boolean:"Boolean",json:"JSON",expression:"Expression"},B1={string:"Enter text value",number:"0",boolean:"true or false",json:'{"key": "value"}',expression:"{{input.field}}"};function JU({node:e,onChange:t}){const n=j.useCallback(l=>{t({...e,mode:l})},[e,t]),r=j.useCallback(l=>{t({...e,variables:l})},[e,t]),o=j.useCallback(l=>{if(l===null){const{envVars:u,...d}=e;t(d)}else t({...e,envVars:{...e.envVars,...l}})},[e,t]),a=j.useCallback(l=>{t({...e,...l})},[e,t]);return s.jsxs("div",{className:"set-panel",children:[s.jsx(Me,{title:"Operation Mode",defaultOpen:!0,children:s.jsx("div",{className:"set-mode-selector",children:GU.map(l=>{const u=YU[l];return s.jsxs("button",{type:"button",className:`set-mode-option ${e.mode===l?"selected":""}`,onClick:()=>n(l),children:[s.jsx("span",{className:"set-mode-icon",children:u.icon}),s.jsx("span",{className:"set-mode-label",children:u.label}),s.jsx("span",{className:"set-mode-description",children:u.description})]},l)})})}),s.jsx(Me,{title:"Variables",defaultOpen:!0,children:s.jsx(ZU,{variables:e.variables||[],onChange:r,mode:e.mode})}),s.jsx(tW,{envVars:e.envVars,onChange:o}),s.jsx(ir,{properties:e,onChange:a,showIdentity:!0})]})}function ZU({variables:e,onChange:t,mode:n}){const r=()=>{const d={key:"",value:"",valueType:"string",isSecret:!1};t([...e,d])},o=d=>{const p=[...e];p.splice(d,1),t(p)},a=(d,p)=>{const f=[...e];f[d]={...f[d],...p},t(f)},l=d=>{if(d===0)return;const p=[...e];[p[d-1],p[d]]=[p[d],p[d-1]],t(p)},u=d=>{if(d===e.length-1)return;const p=[...e];[p[d],p[d+1]]=[p[d+1],p[d]],t(p)};return s.jsxs("div",{className:"set-panel-var-editor",children:[e.length===0?s.jsxs("div",{className:"set-panel-empty",children:[s.jsx("span",{className:"set-panel-empty-icon",children:""}),s.jsx("span",{className:"set-panel-empty-text",children:"No variables defined"}),s.jsx("span",{className:"set-panel-empty-hint",children:'Click "Add Variable" to create one'})]}):s.jsx("div",{className:"set-panel-var-list",children:e.map((d,p)=>s.jsx(eW,{variable:d,index:p,total:e.length,mode:n,onUpdate:f=>a(p,f),onRemove:()=>o(p),onMoveUp:()=>l(p),onMoveDown:()=>u(p)},p))}),s.jsx("button",{type:"button",className:"set-panel-var-add",onClick:r,children:"+ Add Variable"})]})}function eW({variable:e,index:t,total:n,mode:r,onUpdate:o,onRemove:a,onMoveUp:l,onMoveDown:u}){const[d,p]=j.useState(!0),[f,m]=j.useState(null),g=x=>{if(e.valueType==="json")try{x.trim()&&JSON.parse(x),m(null)}catch{m("Invalid JSON")}o({value:x})},v=x=>{let _=e.value;if(x==="number")_=Number(e.value)||0;else if(x==="boolean")_=e.value==="true"||e.value===!0;else if(x==="json")try{_=typeof e.value=="string"?JSON.parse(e.value):e.value}catch{_={}}else _=String(e.value);o({valueType:x,value:_}),m(null)},b=r!=="delete";return s.jsxs("div",{className:`set-panel-var-row ${d?"expanded":"collapsed"}`,children:[s.jsxs("div",{className:"set-panel-var-header",children:[s.jsx("button",{type:"button",className:"set-panel-var-toggle",onClick:()=>p(!d),children:d?"":""}),s.jsx("input",{type:"text",className:"set-panel-var-key",value:e.key,onChange:x=>o({key:x.target.value}),placeholder:"Variable name"}),e.isSecret&&s.jsx("span",{className:"set-panel-var-secret-badge",title:"Secret variable",children:""}),s.jsxs("div",{className:"set-panel-var-actions",children:[s.jsx("button",{type:"button",className:"set-panel-var-action",onClick:l,disabled:t===0,title:"Move up",children:""}),s.jsx("button",{type:"button",className:"set-panel-var-action",onClick:u,disabled:t===n-1,title:"Move down",children:""}),s.jsx("button",{type:"button",className:"set-panel-var-remove",onClick:a,title:"Remove variable",children:""})]})]}),d&&b&&s.jsxs("div",{className:"set-panel-var-body",children:[s.jsxs("div",{className:"set-panel-var-type-row",children:[s.jsx("label",{className:"set-panel-var-type-label",children:"Type:"}),s.jsx("select",{className:"set-panel-var-type-select",value:e.valueType,onChange:x=>v(x.target.value),children:QU.map(x=>s.jsx("option",{value:x,children:XU[x]},x))}),s.jsxs("label",{className:"set-panel-var-secret-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.isSecret,onChange:x=>o({isSecret:x.target.checked})}),s.jsx("span",{className:"set-panel-var-secret-label",children:"Secret"})]})]}),s.jsx("div",{className:"set-panel-var-value-row",children:e.valueType==="boolean"?s.jsxs("select",{className:"set-panel-var-value-select",value:String(e.value),onChange:x=>o({value:x.target.value==="true"}),children:[s.jsx("option",{value:"true",children:"true"}),s.jsx("option",{value:"false",children:"false"})]}):e.valueType==="json"?s.jsxs("div",{className:"set-panel-var-json-wrapper",children:[s.jsx("textarea",{className:`set-panel-var-value-textarea ${f?"error":""}`,value:typeof e.value=="object"?JSON.stringify(e.value,null,2):String(e.value),onChange:x=>g(x.target.value),placeholder:B1[e.valueType],rows:4}),f&&s.jsx("span",{className:"set-panel-var-error",children:f})]}):s.jsx("input",{type:e.valueType==="number"?"number":"text",className:"set-panel-var-value-input",value:String(e.value),onChange:x=>g((e.valueType==="number",x.target.value)),placeholder:B1[e.valueType]})}),e.valueType==="expression"&&s.jsxs("div",{className:"set-panel-var-hint",children:["Use ",s.jsx("code",{children:"{{variable}}"})," syntax to reference state values"]})]})]})}function tW({envVars:e,onChange:t}){const[n,r]=j.useState(e?.loadFromEnv??!1),o=a=>{r(a),t(a?{loadFromEnv:!0}:null)};return s.jsxs(Me,{title:"Environment Variables",defaultOpen:!1,children:[s.jsx(ue,{label:"Load from .env",children:s.jsxs("label",{className:"set-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:a=>o(a.target.checked)}),s.jsx("span",{className:"set-panel-toggle-slider"}),s.jsx("span",{className:"set-panel-toggle-label",children:n?"Enabled":"Disabled"})]})}),n&&s.jsxs(s.Fragment,{children:[s.jsxs(ue,{label:"Prefix Filter",hint:"optional",children:[s.jsx("input",{type:"text",className:"set-panel-input",value:e?.prefix||"",onChange:a=>t({prefix:a.target.value||void 0}),placeholder:"e.g., APP_, API_"}),s.jsx("div",{className:"set-panel-field-help",children:"Only load environment variables starting with this prefix. Leave empty to load all variables."})]}),s.jsxs("div",{className:"set-panel-info",children:[s.jsx("span",{className:"set-panel-info-icon",children:""}),s.jsx("span",{className:"set-panel-info-text",children:"Environment variables will be loaded at runtime from the .env file. They will be available in the workflow state under their original names."})]})]})]})}const Xl=[{type:"template",label:"Template",description:"Simple variable substitution",icon:"",example:"Hello {{name}}, your order #{{orderId}} is ready!",placeholder:"Enter template with {{variable}} placeholders...",help:["{{variable}} - Insert value from state","{{response}} - Previous agent response","{{message}} - Original user message"]},{type:"jsonpath",label:"JSONPath",description:"Extract data from JSON",icon:"",example:"$.data.items[0].name",placeholder:"Enter JSONPath expression (e.g., $.data.items[*].name)",help:["$ - Root object","$.field - Access field","$[0] - Array index","$[*] - All array elements"]},{type:"jmespath",label:"JMESPath",description:"Query and transform JSON",icon:"",example:"data.items[*].{name: name, price: price}",placeholder:"Enter JMESPath expression...",help:["field.nested - Nested access","[*].name - Project from array","{a: x, b: y} - Reshape object"]},{type:"javascript",label:"JavaScript",description:"Custom code transformation",icon:"",example:'return input.items.map(i => i.name).join(", ");',placeholder:"return input.field; // Transform and return result",help:["input - The input data object","return value; - Return result","Sandboxed execution"]}],nW=["string","number","boolean","array","object"];function rW({node:e,onChange:t}){const n=Xl.find(u=>u.type===e.transformType)||Xl[0],r=j.useCallback(u=>{const d=Xl.find(p=>p.type===u);t({...e,transformType:u,expression:d?.example||""})},[e,t]),o=j.useCallback(u=>{t({...e,expression:u})},[e,t]),a=j.useCallback(u=>{if(u===void 0){const{typeCoercion:d,...p}=e;t(p)}else t({...e,typeCoercion:u})},[e,t]),l=j.useCallback(u=>{t({...e,...u})},[e,t]);return s.jsxs("div",{className:"transform-panel",children:[s.jsxs("div",{className:"transform-panel-step",children:[s.jsxs("div",{className:"transform-panel-step-header",children:[s.jsx("span",{className:"transform-panel-step-number",children:"1"}),s.jsx("span",{className:"transform-panel-step-title",children:"Choose Transform Type"})]}),s.jsx("div",{className:"transform-type-grid",children:Xl.map(u=>s.jsxs("button",{type:"button",className:`transform-type-card ${e.transformType===u.type?"selected":""}`,onClick:()=>r(u.type),children:[s.jsx("span",{className:"transform-type-card-icon",children:u.icon}),s.jsx("span",{className:"transform-type-card-label",children:u.label}),s.jsx("span",{className:"transform-type-card-desc",children:u.description})]},u.type))})]}),s.jsxs("div",{className:"transform-panel-step",children:[s.jsxs("div",{className:"transform-panel-step-header",children:[s.jsx("span",{className:"transform-panel-step-number",children:"2"}),s.jsxs("span",{className:"transform-panel-step-title",children:["Write Your ",n.label]})]}),s.jsxs("div",{className:"transform-quick-ref",children:[s.jsx("div",{className:"transform-quick-ref-title",children:"Quick Reference:"}),s.jsx("div",{className:"transform-quick-ref-items",children:n.help.map((u,d)=>s.jsx("code",{className:"transform-quick-ref-item",children:u},d))})]}),s.jsxs("div",{className:"transform-expression-container",children:[s.jsx("textarea",{className:"transform-expression-input",value:e.expression,onChange:u=>o(u.target.value),placeholder:n.placeholder,rows:n.type==="javascript"?8:4,spellCheck:!1}),e.expression!==n.example&&s.jsx("button",{type:"button",className:"transform-example-btn",onClick:()=>o(n.example),title:"Load example",children:" Load Example"})]}),s.jsx("div",{className:"transform-preview",children:s.jsxs("div",{className:"transform-preview-label",children:[s.jsx("span",{className:"transform-preview-icon",children:""}),s.jsxs("span",{children:["Result will be stored in: ",s.jsx("code",{children:e.mapping?.outputKey||"result"})]})]})})]}),s.jsx(Me,{title:"Advanced: Type Coercion",defaultOpen:!1,children:s.jsx(oW,{typeCoercion:e.typeCoercion,onChange:a})}),s.jsx(ir,{properties:e,onChange:l,showIdentity:!0})]})}function oW({typeCoercion:e,onChange:t}){const[n,r]=j.useState(!!e),o=a=>{r(a),t(a?{targetType:"string"}:void 0)};return s.jsxs("div",{className:"transform-coercion",children:[s.jsxs("label",{className:"transform-coercion-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:a=>o(a.target.checked)}),s.jsx("span",{children:"Convert result to specific type"})]}),n&&e&&s.jsx("select",{className:"transform-coercion-select",value:e.targetType,onChange:a=>t({targetType:a.target.value}),children:nW.map(a=>s.jsx("option",{value:a,children:a},a))})]})}const iW=["first_match","all_match"],sW={first_match:{label:"First Match",description:"Stop at first matching condition",icon:"1"},all_match:{label:"All Match (Fan Out)",description:"Execute all branches in parallel",icon:""}},aW=["eq","neq","gt","lt","gte","lte","contains","startsWith","endsWith","matches","in","empty","exists"],Np={eq:{label:"=",description:"Equals",requiresValue:!0},neq:{label:"",description:"Not equals",requiresValue:!0},gt:{label:">",description:"Greater than",requiresValue:!0},lt:{label:"<",description:"Less than",requiresValue:!0},gte:{label:"",description:"Greater or equal",requiresValue:!0},lte:{label:"",description:"Less or equal",requiresValue:!0},contains:{label:"contains",description:"Contains substring",requiresValue:!0},startsWith:{label:"starts with",description:"Starts with",requiresValue:!0},endsWith:{label:"ends with",description:"Ends with",requiresValue:!0},matches:{label:"matches",description:"Matches regex",requiresValue:!0},in:{label:"in",description:"In array",requiresValue:!0},empty:{label:"is empty",description:"Is empty/null",requiresValue:!1},exists:{label:"exists",description:"Field exists",requiresValue:!1}};function lW({node:e,onChange:t}){const n=j.useCallback(d=>{t({...e,evaluationMode:d})},[e,t]),r=j.useCallback(d=>{t({...e,conditions:d})},[e,t]),o=j.useCallback(d=>{if(d===void 0||d===""){const{defaultBranch:p,...f}=e;t(f)}else t({...e,defaultBranch:d})},[e,t]),a=j.useCallback(d=>{if(d===void 0){const{expressionMode:p,...f}=e;t(f)}else t({...e,expressionMode:d})},[e,t]),l=j.useCallback(d=>{t({...e,...d})},[e,t]),u=e.expressionMode?.enabled??!1;return s.jsxs("div",{className:"switch-panel",children:[s.jsx(Me,{title:"Evaluation Mode",defaultOpen:!0,children:s.jsx(cW,{mode:e.evaluationMode,onChange:n})}),s.jsx(Me,{title:"Routing Mode",defaultOpen:!0,children:s.jsx(uW,{isExpressionMode:u,onToggle:d=>{a(d?{enabled:!0,expression:""}:void 0)}})}),!u&&s.jsx(Me,{title:"Conditions",defaultOpen:!0,children:s.jsx(dW,{conditions:e.conditions,onChange:r})}),u&&s.jsx(Me,{title:"Expression",defaultOpen:!0,children:s.jsx(fW,{expressionMode:e.expressionMode,onChange:a})}),s.jsx(Me,{title:"Default Branch",defaultOpen:!1,children:s.jsx(hW,{defaultBranch:e.defaultBranch,onChange:o})}),s.jsx(ir,{properties:e,onChange:l,showIdentity:!0})]})}function cW({mode:e,onChange:t}){return s.jsx("div",{className:"switch-evaluation-mode-selector",children:iW.map(n=>{const r=sW[n];return s.jsxs("button",{type:"button",className:`switch-evaluation-mode-option ${e===n?"selected":""}`,onClick:()=>t(n),children:[s.jsx("span",{className:"switch-evaluation-mode-icon",children:r.icon}),s.jsx("span",{className:"switch-evaluation-mode-label",children:r.label}),s.jsx("span",{className:"switch-evaluation-mode-description",children:r.description})]},n)})})}function uW({isExpressionMode:e,onToggle:t}){return s.jsxs("div",{className:"switch-mode-toggle",children:[s.jsxs("button",{type:"button",className:`switch-mode-option ${e?"":"selected"}`,onClick:()=>t(!1),children:[s.jsx("span",{className:"switch-mode-icon",children:""}),s.jsx("span",{className:"switch-mode-label",children:"Condition Builder"}),s.jsx("span",{className:"switch-mode-hint",children:"Visual condition editor"})]}),s.jsxs("button",{type:"button",className:`switch-mode-option ${e?"selected":""}`,onClick:()=>t(!0),children:[s.jsx("span",{className:"switch-mode-icon",children:""}),s.jsx("span",{className:"switch-mode-label",children:"Expression"}),s.jsx("span",{className:"switch-mode-hint",children:"JavaScript expression"})]})]})}function dW({conditions:e,onChange:t}){const n=()=>{const u={id:`cond_${Date.now()}`,name:`Condition ${e.length+1}`,field:"",operator:"eq",value:"",outputPort:`branch_${e.length+1}`};t([...e,u])},r=u=>{const d=[...e];d.splice(u,1),t(d)},o=(u,d)=>{const p=[...e];p[u]={...p[u],...d},t(p)},a=u=>{if(u===0)return;const d=[...e];[d[u-1],d[u]]=[d[u],d[u-1]],t(d)},l=u=>{if(u===e.length-1)return;const d=[...e];[d[u],d[u+1]]=[d[u+1],d[u]],t(d)};return s.jsxs("div",{className:"switch-condition-builder",children:[e.length===0?s.jsxs("div",{className:"switch-panel-empty",children:[s.jsx("span",{className:"switch-panel-empty-icon",children:""}),s.jsx("span",{className:"switch-panel-empty-text",children:"No conditions defined"}),s.jsx("span",{className:"switch-panel-empty-hint",children:"Add conditions to create routing branches"})]}):s.jsx("div",{className:"switch-conditions-list",children:e.map((u,d)=>s.jsx(pW,{condition:u,index:d,total:e.length,onUpdate:p=>o(d,p),onRemove:()=>r(d),onMoveUp:()=>a(d),onMoveDown:()=>l(d)},u.id))}),s.jsx("button",{type:"button",className:"switch-condition-add",onClick:n,children:"+ Add Condition"})]})}function pW({condition:e,index:t,total:n,onUpdate:r,onRemove:o,onMoveUp:a,onMoveDown:l}){const[u,d]=j.useState(!0),p=Np[e.operator]??{label:e.operator,description:e.operator,requiresValue:!0};return s.jsxs("div",{className:`switch-condition-row ${u?"expanded":"collapsed"}`,children:[s.jsxs("div",{className:"switch-condition-header",children:[s.jsx("button",{type:"button",className:"switch-condition-toggle",onClick:()=>d(!u),children:u?"":""}),s.jsxs("span",{className:"switch-condition-index",children:["#",t+1]}),s.jsx("input",{type:"text",className:"switch-condition-name-input",value:e.name,onChange:f=>r({name:f.target.value}),placeholder:"Condition name"}),s.jsxs("div",{className:"switch-condition-actions",children:[s.jsx("button",{type:"button",className:"switch-condition-action",onClick:a,disabled:t===0,title:"Move up",children:""}),s.jsx("button",{type:"button",className:"switch-condition-action",onClick:l,disabled:t===n-1,title:"Move down",children:""}),s.jsx("button",{type:"button",className:"switch-condition-remove",onClick:o,title:"Remove condition",children:""})]})]}),u&&s.jsxs("div",{className:"switch-condition-body",children:[s.jsx(ue,{label:"Field",required:!0,hint:"state path",children:s.jsx("input",{type:"text",className:"switch-panel-input switch-panel-input-mono",value:e.field,onChange:f=>r({field:f.target.value}),placeholder:"state.field.path"})}),s.jsx(ue,{label:"Operator",required:!0,children:s.jsx("select",{className:"switch-panel-select",value:e.operator,onChange:f=>r({operator:f.target.value}),children:aW.map(f=>s.jsxs("option",{value:f,children:[Np[f].label," (",Np[f].description,")"]},f))})}),p.requiresValue&&s.jsx(ue,{label:"Value",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"text",className:"switch-panel-input",value:e.value!==void 0?String(e.value):"",onChange:f=>{const m=f.target.value;let g=m;m==="true"?g=!0:m==="false"?g=!1:!isNaN(Number(m))&&m!==""&&(g=Number(m)),r({value:g})},placeholder:"Value to compare"})}),s.jsxs(ue,{label:"Output Port",required:!0,hint:"branch identifier",children:[s.jsx("input",{type:"text",className:"switch-panel-input",value:e.outputPort,onChange:f=>r({outputPort:f.target.value}),placeholder:"branch_name"}),s.jsx("div",{className:"switch-panel-field-help",children:"This identifier is used to connect edges from this branch."})]})]})]})}function fW({expressionMode:e,onChange:t}){return s.jsxs("div",{className:"switch-expression-section",children:[s.jsx(ue,{label:"JavaScript Expression",required:!0,hint:"returns branch name",children:s.jsx("textarea",{className:"switch-panel-expression",value:e.expression,onChange:n=>t({...e,expression:n.target.value}),placeholder:`// Return the branch name to route to
// Available: state (full workflow state)

if (state.score > 80) {
  return 'high';
} else if (state.score > 50) {
  return 'medium';
} else {
  return 'low';
}`,rows:10,spellCheck:!1})}),s.jsx("div",{className:"switch-expression-hints",children:s.jsxs("div",{className:"switch-hint-box",children:[s.jsx("div",{className:"switch-hint-title",children:"Expression Context"}),s.jsxs("ul",{className:"switch-hint-list",children:[s.jsxs("li",{children:[s.jsx("code",{children:"state"})," - Full workflow state object"]}),s.jsxs("li",{children:[s.jsx("code",{children:"return 'branchName'"})," - Route to named branch"]}),s.jsx("li",{children:"Standard JavaScript syntax supported"}),s.jsx("li",{children:"Runs in sandboxed environment"})]})]})}),s.jsxs("div",{className:"switch-panel-info",children:[s.jsx("span",{className:"switch-panel-info-icon",children:""}),s.jsx("span",{className:"switch-panel-info-text",children:"The expression should return a string matching one of your output port names. If no match is found, the default branch (if configured) will be used."})]})]})}function hW({defaultBranch:e,onChange:t}){const[n,r]=j.useState(!!e),o=a=>{r(a),t(a?"default":void 0)};return s.jsxs("div",{className:"switch-default-branch-section",children:[s.jsx(ue,{label:"Enable Default Branch",children:s.jsxs("label",{className:"switch-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:a=>o(a.target.checked)}),s.jsx("span",{className:"switch-panel-toggle-slider"}),s.jsx("span",{className:"switch-panel-toggle-label",children:n?"Enabled":"Disabled"})]})}),n&&s.jsxs(ue,{label:"Default Port Name",hint:"fallback branch",children:[s.jsx("input",{type:"text",className:"switch-panel-input",value:e||"",onChange:a=>t(a.target.value||void 0),placeholder:"default"}),s.jsx("div",{className:"switch-panel-field-help",children:"This branch is used when no conditions match (condition mode) or when the expression returns an unknown branch name."})]})]})}const mW=["forEach","while","times"],gW={forEach:{label:"For Each",description:"Iterate over each item in an array",icon:""},while:{label:"While",description:"Loop while a condition is true",icon:""},times:{label:"Times",description:"Repeat a fixed number of times",icon:""}};function yW({node:e,onChange:t}){const n=j.useCallback(p=>{const f={loopType:p};p==="forEach"&&!e.forEach?f.forEach={sourceArray:"",itemVar:"item",indexVar:"index"}:p==="while"&&!e.while?f.while={condition:""}:p==="times"&&!e.times&&(f.times={count:10}),t({...e,...f})},[e,t]),r=j.useCallback(p=>{t({...e,forEach:{...e.forEach,...p}})},[e,t]),o=j.useCallback(p=>{t({...e,while:{...e.while,...p}})},[e,t]),a=j.useCallback(p=>{t({...e,times:{...e.times,...p}})},[e,t]),l=j.useCallback(p=>{t({...e,parallel:{...e.parallel,...p}})},[e,t]),u=j.useCallback(p=>{t({...e,results:{...e.results,...p}})},[e,t]),d=j.useCallback(p=>{t({...e,...p})},[e,t]);return s.jsxs("div",{className:"loop-panel",children:[s.jsx(Me,{title:"Loop Type",defaultOpen:!0,children:s.jsx(vW,{loopType:e.loopType,onChange:n})}),e.loopType==="forEach"&&s.jsx(Me,{title:"ForEach Configuration",defaultOpen:!0,children:s.jsx(xW,{config:e.forEach||{sourceArray:"",itemVar:"item",indexVar:"index"},onChange:r})}),e.loopType==="while"&&s.jsx(Me,{title:"While Configuration",defaultOpen:!0,children:s.jsx(bW,{config:e.while||{condition:""},onChange:o})}),e.loopType==="times"&&s.jsx(Me,{title:"Times Configuration",defaultOpen:!0,children:s.jsx(wW,{config:e.times||{count:10},onChange:a})}),s.jsx(Me,{title:"Parallel Execution",defaultOpen:!1,children:s.jsx(_W,{config:e.parallel,onChange:l})}),s.jsx(Me,{title:"Result Aggregation",defaultOpen:!1,children:s.jsx(SW,{config:e.results,onChange:u})}),s.jsx(ir,{properties:e,onChange:d,showIdentity:!0})]})}function vW({loopType:e,onChange:t}){return s.jsx("div",{className:"loop-type-selector",children:mW.map(n=>{const r=gW[n];return s.jsxs("button",{type:"button",className:`loop-type-option ${e===n?"selected":""}`,onClick:()=>t(n),children:[s.jsx("span",{className:"loop-type-icon",children:r.icon}),s.jsx("span",{className:"loop-type-label",children:r.label}),s.jsx("span",{className:"loop-type-description",children:r.description})]},n)})})}function xW({config:e,onChange:t}){return s.jsxs("div",{className:"loop-foreach-section",children:[s.jsxs(ue,{label:"Source Array",required:!0,hint:"state path to array",children:[s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:e.sourceArray,onChange:n=>t({sourceArray:n.target.value}),placeholder:"state.items"}),s.jsx("div",{className:"loop-panel-field-help",children:"Path to the array in workflow state to iterate over."})]}),s.jsxs("div",{className:"loop-foreach-vars",children:[s.jsx(ue,{label:"Item Variable",hint:"default: item",children:s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:e.itemVar,onChange:n=>t({itemVar:n.target.value||"item"}),placeholder:"item"})}),s.jsx(ue,{label:"Index Variable",hint:"default: index",children:s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:e.indexVar,onChange:n=>t({indexVar:n.target.value||"index"}),placeholder:"index"})})]}),s.jsxs("div",{className:"loop-panel-info",children:[s.jsx("span",{className:"loop-panel-info-icon",children:""}),s.jsxs("span",{className:"loop-panel-info-text",children:["Inside the loop body, access the current item as ",s.jsx("code",{children:e.itemVar||"item"})," and the current index as ",s.jsx("code",{children:e.indexVar||"index"}),"."]})]})]})}function bW({config:e,onChange:t}){return s.jsxs("div",{className:"loop-while-section",children:[s.jsx(ue,{label:"Condition",required:!0,hint:"JavaScript expression",children:s.jsx("textarea",{className:"loop-panel-expression",value:e.condition,onChange:n=>t({condition:n.target.value}),placeholder:`// Loop while this expression is true
// Available: state (workflow state)

state.counter < 10`,rows:6,spellCheck:!1})}),s.jsxs("div",{className:"loop-panel-info loop-panel-info-warning",children:[s.jsx("span",{className:"loop-panel-info-icon",children:""}),s.jsx("span",{className:"loop-panel-info-text",children:"Ensure your condition eventually becomes false to avoid infinite loops. Consider using a maximum iteration limit in the execution control settings."})]})]})}function wW({config:e,onChange:t}){const n=typeof e.count=="string",[r,o]=j.useState(n),a=l=>{if(o(l),l)t({count:String(e.count)});else{const u=typeof e.count=="string"?parseInt(e.count,10)||10:e.count;t({count:u})}};return s.jsxs("div",{className:"loop-times-section",children:[s.jsx(ue,{label:"Use Expression",children:s.jsxs("label",{className:"loop-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:r,onChange:l=>a(l.target.checked)}),s.jsx("span",{className:"loop-panel-toggle-slider"}),s.jsx("span",{className:"loop-panel-toggle-label",children:r?"Dynamic count from expression":"Fixed count"})]})}),r?s.jsxs(ue,{label:"Count Expression",required:!0,hint:"returns number",children:[s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:String(e.count),onChange:l=>t({count:l.target.value}),placeholder:"state.repeatCount"}),s.jsx("div",{className:"loop-panel-field-help",children:"Expression that evaluates to the number of iterations."})]}):s.jsxs(ue,{label:"Iteration Count",required:!0,children:[s.jsx("input",{type:"number",className:"loop-panel-input",value:typeof e.count=="number"?e.count:10,onChange:l=>t({count:parseInt(l.target.value,10)||1}),min:1,max:1e4}),s.jsx("div",{className:"loop-panel-field-help",children:"Number of times to repeat the loop body."})]})]})}function _W({config:e,onChange:t}){return s.jsxs("div",{className:"loop-parallel-section",children:[s.jsx(ue,{label:"Enable Parallel Execution",children:s.jsxs("label",{className:"loop-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.enabled,onChange:n=>t({enabled:n.target.checked})}),s.jsx("span",{className:"loop-panel-toggle-slider"}),s.jsx("span",{className:"loop-panel-toggle-label",children:e.enabled?"Enabled":"Disabled"})]})}),e.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs(ue,{label:"Batch Size",hint:"items per batch",children:[s.jsx("input",{type:"number",className:"loop-panel-input",value:e.batchSize??10,onChange:n=>t({batchSize:parseInt(n.target.value,10)||void 0}),min:1,max:100,placeholder:"10"}),s.jsx("div",{className:"loop-panel-field-help",children:"Number of items to process in parallel. Leave empty for unlimited."})]}),s.jsxs(ue,{label:"Delay Between Batches",hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"loop-panel-input",value:e.delayBetween??0,onChange:n=>t({delayBetween:parseInt(n.target.value,10)||void 0}),min:0,step:100,placeholder:"0"}),s.jsx("div",{className:"loop-panel-field-help",children:"Delay in milliseconds between processing batches."})]})]}),s.jsxs("div",{className:"loop-panel-info",children:[s.jsx("span",{className:"loop-panel-info-icon",children:""}),s.jsx("span",{className:"loop-panel-info-text",children:"Parallel execution processes multiple items simultaneously, improving performance for I/O-bound operations."})]})]})}function SW({config:e,onChange:t}){return s.jsxs("div",{className:"loop-results-section",children:[s.jsx(ue,{label:"Collect Results",children:s.jsxs("label",{className:"loop-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.collect,onChange:n=>t({collect:n.target.checked})}),s.jsx("span",{className:"loop-panel-toggle-slider"}),s.jsx("span",{className:"loop-panel-toggle-label",children:e.collect?"Collect into array":"Discard results"})]})}),e.collect&&s.jsxs(ue,{label:"Aggregation Key",hint:"state key for results",children:[s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:e.aggregationKey??"",onChange:n=>t({aggregationKey:n.target.value||void 0}),placeholder:"loopResults"}),s.jsx("div",{className:"loop-panel-field-help",children:"State key where the array of results will be stored. If empty, uses the node's output key."})]}),s.jsxs("div",{className:"loop-panel-info",children:[s.jsx("span",{className:"loop-panel-info-icon",children:""}),s.jsx("span",{className:"loop-panel-info-text",children:"When collecting results, each iteration's output is gathered into an array that can be used by subsequent nodes."})]})]})}const kW=["wait_all","wait_any","wait_n"],NW={wait_all:{label:"Wait All",description:"Wait for all incoming branches to complete",icon:""},wait_any:{label:"Wait Any",description:"Continue when first branch completes",icon:""},wait_n:{label:"Wait N",description:"Wait for N branches to complete",icon:""}},jW=["array","object","first","last"],EW={array:{label:"Array",description:"Collect outputs into an array",icon:""},object:{label:"Object",description:"Merge into object with branch keys",icon:""},first:{label:"First",description:"Use first completed branch output",icon:"1"},last:{label:"Last",description:"Use last completed branch output",icon:""}},CW=["continue","error"],TW={continue:"Continue with available results",error:"Throw error on timeout"};function AW({node:e,onChange:t}){const n=j.useCallback(d=>{const p={mode:d};d==="wait_n"&&!e.waitCount&&(p.waitCount=2),t({...e,...p})},[e,t]),r=j.useCallback(d=>{t({...e,waitCount:d})},[e,t]),o=j.useCallback(d=>{const p={combineStrategy:d};d==="object"&&(!e.branchKeys||e.branchKeys.length===0)&&(p.branchKeys=["branch1","branch2"]),t({...e,...p})},[e,t]),a=j.useCallback(d=>{t({...e,branchKeys:d})},[e,t]),l=j.useCallback(d=>{t({...e,timeout:{...e.timeout,...d}})},[e,t]),u=j.useCallback(d=>{t({...e,...d})},[e,t]);return s.jsxs("div",{className:"merge-panel",children:[s.jsx(Me,{title:"Merge Mode",defaultOpen:!0,children:s.jsx(PW,{mode:e.mode,waitCount:e.waitCount,onChange:n,onWaitCountChange:r})}),s.jsx(Me,{title:"Combine Strategy",defaultOpen:!0,children:s.jsx(IW,{strategy:e.combineStrategy,branchKeys:e.branchKeys,onChange:o,onBranchKeysChange:a})}),s.jsx(Me,{title:"Timeout Handling",defaultOpen:!1,children:s.jsx(OW,{timeout:e.timeout,onChange:l})}),s.jsx(ir,{properties:e,onChange:u,showIdentity:!0})]})}function PW({mode:e,waitCount:t,onChange:n,onWaitCountChange:r}){return s.jsxs("div",{className:"merge-mode-section",children:[s.jsx("div",{className:"merge-mode-selector",children:kW.map(o=>{const a=NW[o];return s.jsxs("button",{type:"button",className:`merge-mode-option ${e===o?"selected":""}`,onClick:()=>n(o),children:[s.jsx("span",{className:"merge-mode-icon",children:a.icon}),s.jsx("span",{className:"merge-mode-label",children:a.label}),s.jsx("span",{className:"merge-mode-description",children:a.description})]},o)})}),e==="wait_n"&&s.jsx("div",{className:"merge-wait-count",children:s.jsxs(ue,{label:"Wait Count",required:!0,hint:"number of branches",children:[s.jsx("input",{type:"number",className:"merge-panel-input",value:t??2,onChange:o=>r(parseInt(o.target.value,10)||2),min:1,max:100}),s.jsx("div",{className:"merge-panel-field-help",children:"Number of branches that must complete before continuing."})]})}),s.jsxs("div",{className:"merge-panel-info",children:[s.jsx("span",{className:"merge-panel-info-icon",children:""}),s.jsxs("span",{className:"merge-panel-info-text",children:[e==="wait_all"&&"All incoming branches must complete before the workflow continues.",e==="wait_any"&&"The workflow continues as soon as any branch completes. Other branches may still be running.",e==="wait_n"&&`The workflow continues after ${t||2} branches complete.`]})]})]})}function IW({strategy:e,branchKeys:t,onChange:n,onBranchKeysChange:r}){return s.jsxs("div",{className:"merge-strategy-section",children:[s.jsx("div",{className:"merge-strategy-selector",children:jW.map(o=>{const a=EW[o];return s.jsxs("button",{type:"button",className:`merge-strategy-option ${e===o?"selected":""}`,onClick:()=>n(o),children:[s.jsx("span",{className:"merge-strategy-icon",children:a.icon}),s.jsx("span",{className:"merge-strategy-label",children:a.label}),s.jsx("span",{className:"merge-strategy-description",children:a.description})]},o)})}),e==="object"&&s.jsxs("div",{className:"merge-branch-keys",children:[s.jsx(ue,{label:"Branch Keys",hint:"keys for merged object",children:s.jsx(RW,{keys:t||[],onChange:r})}),s.jsx("div",{className:"merge-panel-field-help",children:"Each branch output will be stored under its corresponding key in the merged object."})]}),s.jsxs("div",{className:"merge-panel-info",children:[s.jsx("span",{className:"merge-panel-info-icon",children:""}),s.jsxs("span",{className:"merge-panel-info-text",children:[e==="array"&&"Branch outputs are collected into an array in completion order.",e==="object"&&"Branch outputs are merged into an object using the specified keys.",e==="first"&&"Only the first completed branch output is used.",e==="last"&&"Only the last completed branch output is used."]})]})]})}function RW({keys:e,onChange:t}){const n=()=>{t([...e,`branch${e.length+1}`])},r=a=>{const l=[...e];l.splice(a,1),t(l)},o=(a,l)=>{const u=[...e];u[a]=l,t(u)};return s.jsxs("div",{className:"merge-branch-keys-editor",children:[e.length===0?s.jsx("div",{className:"merge-panel-empty",children:s.jsx("span",{className:"merge-panel-empty-text",children:"No branch keys defined"})}):s.jsx("div",{className:"merge-branch-keys-list",children:e.map((a,l)=>s.jsxs("div",{className:"merge-branch-key-row",children:[s.jsxs("span",{className:"merge-branch-key-index",children:["#",l+1]}),s.jsx("input",{type:"text",className:"merge-panel-input merge-panel-input-mono",value:a,onChange:u=>o(l,u.target.value),placeholder:`branch${l+1}`}),s.jsx("button",{type:"button",className:"merge-branch-key-remove",onClick:()=>r(l),title:"Remove key",children:""})]},l))}),s.jsx("button",{type:"button",className:"merge-branch-key-add",onClick:n,children:"+ Add Branch Key"})]})}function OW({timeout:e,onChange:t}){return s.jsxs("div",{className:"merge-timeout-section",children:[s.jsx(ue,{label:"Enable Timeout",children:s.jsxs("label",{className:"merge-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.enabled,onChange:n=>t({enabled:n.target.checked})}),s.jsx("span",{className:"merge-panel-toggle-slider"}),s.jsx("span",{className:"merge-panel-toggle-label",children:e.enabled?"Enabled":"Disabled"})]})}),e.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs(ue,{label:"Timeout Duration",required:!0,hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"merge-panel-input",value:e.ms,onChange:n=>t({ms:parseInt(n.target.value,10)||3e4}),min:0,step:1e3,placeholder:"30000"}),s.jsx("div",{className:"merge-panel-field-help",children:"Maximum time to wait for branches to complete."})]}),s.jsx(ue,{label:"Timeout Behavior",required:!0,children:s.jsx("select",{className:"merge-panel-select",value:e.behavior,onChange:n=>t({behavior:n.target.value}),children:CW.map(n=>s.jsx("option",{value:n,children:TW[n]},n))})})]}),s.jsxs("div",{className:"merge-panel-info merge-panel-info-warning",children:[s.jsx("span",{className:"merge-panel-info-icon",children:""}),s.jsx("span",{className:"merge-panel-info-text",children:e.enabled?e.behavior==="continue"?"If timeout occurs, the merge will continue with whatever results are available.":"If timeout occurs, the workflow will fail with a timeout error.":"Without a timeout, the merge will wait indefinitely for all required branches."})]})]})}const MW=["fixed","until","webhook","condition"],DW={fixed:{label:"Fixed Duration",description:"Wait for a specific amount of time",icon:""},until:{label:"Until Timestamp",description:"Wait until a specific date/time",icon:""},webhook:{label:"Webhook Callback",description:"Wait for an external webhook call",icon:""},condition:{label:"Condition Polling",description:"Poll until a condition becomes true",icon:""}},LW=["ms","s","m","h"],qW={ms:"Milliseconds",s:"Seconds",m:"Minutes",h:"Hours"};function FW({node:e,onChange:t}){const n=j.useCallback(d=>{const p={waitType:d};d==="fixed"&&!e.fixed?p.fixed={duration:5,unit:"s"}:d==="until"&&!e.until?p.until={timestamp:new Date(Date.now()+36e5).toISOString()}:d==="webhook"&&!e.webhook?p.webhook={path:"/api/webhook/wait-callback",timeout:3e5}:d==="condition"&&!e.condition&&(p.condition={expression:"state.isReady === true",pollInterval:5e3,maxWait:3e5}),t({...e,...p})},[e,t]),r=j.useCallback(d=>{t({...e,fixed:{...e.fixed,...d}})},[e,t]),o=j.useCallback(d=>{t({...e,until:{...e.until,...d}})},[e,t]),a=j.useCallback(d=>{t({...e,webhook:{...e.webhook,...d}})},[e,t]),l=j.useCallback(d=>{t({...e,condition:{...e.condition,...d}})},[e,t]),u=j.useCallback(d=>{t({...e,...d})},[e,t]);return s.jsxs("div",{className:"wait-panel",children:[s.jsx(Me,{title:"Wait Type",defaultOpen:!0,children:s.jsx(zW,{waitType:e.waitType,onChange:n})}),e.waitType==="fixed"&&e.fixed&&s.jsx(Me,{title:"Duration Configuration",defaultOpen:!0,children:s.jsx(BW,{fixed:e.fixed,onChange:r})}),e.waitType==="until"&&e.until&&s.jsx(Me,{title:"Timestamp Configuration",defaultOpen:!0,children:s.jsx($W,{until:e.until,onChange:o})}),e.waitType==="webhook"&&e.webhook&&s.jsx(Me,{title:"Webhook Configuration",defaultOpen:!0,children:s.jsx(HW,{webhook:e.webhook,onChange:a})}),e.waitType==="condition"&&e.condition&&s.jsx(Me,{title:"Condition Configuration",defaultOpen:!0,children:s.jsx(VW,{condition:e.condition,onChange:l})}),s.jsx(ir,{properties:e,onChange:u,showIdentity:!0})]})}function zW({waitType:e,onChange:t}){return s.jsx("div",{className:"wait-type-section",children:s.jsx("div",{className:"wait-type-selector",children:MW.map(n=>{const r=DW[n];return s.jsxs("button",{type:"button",className:`wait-type-option ${e===n?"selected":""}`,onClick:()=>t(n),children:[s.jsx("span",{className:"wait-type-icon",children:r.icon}),s.jsx("span",{className:"wait-type-label",children:r.label}),s.jsx("span",{className:"wait-type-description",children:r.description})]},n)})})})}function BW({fixed:e,onChange:t}){const n=()=>{const{duration:r,unit:o}=e;let a=r;switch(o){case"s":a=r*1e3;break;case"m":a=r*6e4;break;case"h":a=r*36e5;break}return a<1e3?`${a} milliseconds`:a<6e4?`${a/1e3} seconds`:a<36e5?`${(a/6e4).toFixed(1)} minutes`:`${(a/36e5).toFixed(2)} hours`};return s.jsxs("div",{className:"wait-fixed-section",children:[s.jsxs("div",{className:"wait-duration-row",children:[s.jsx(ue,{label:"Duration",required:!0,children:s.jsx("input",{type:"number",className:"wait-panel-input wait-duration-input",value:e.duration,onChange:r=>t({duration:parseInt(r.target.value,10)||0}),min:0,step:1})}),s.jsx(ue,{label:"Unit",required:!0,children:s.jsx("select",{className:"wait-panel-select wait-unit-select",value:e.unit,onChange:r=>t({unit:r.target.value}),children:LW.map(r=>s.jsx("option",{value:r,children:qW[r]},r))})})]}),s.jsxs("div",{className:"wait-panel-presets",children:[s.jsx("span",{className:"wait-panel-presets-label",children:"Presets:"}),s.jsxs("div",{className:"wait-panel-presets-buttons",children:[s.jsx("button",{type:"button",onClick:()=>t({duration:1,unit:"s"}),children:"1s"}),s.jsx("button",{type:"button",onClick:()=>t({duration:5,unit:"s"}),children:"5s"}),s.jsx("button",{type:"button",onClick:()=>t({duration:30,unit:"s"}),children:"30s"}),s.jsx("button",{type:"button",onClick:()=>t({duration:1,unit:"m"}),children:"1m"}),s.jsx("button",{type:"button",onClick:()=>t({duration:5,unit:"m"}),children:"5m"}),s.jsx("button",{type:"button",onClick:()=>t({duration:1,unit:"h"}),children:"1h"})]})]}),s.jsxs("div",{className:"wait-panel-preview",children:[s.jsx("span",{className:"wait-panel-preview-label",children:"Wait for:"}),s.jsx("span",{className:"wait-panel-preview-value",children:n()})]})]})}function $W({until:e,onChange:t}){const[n,r]=j.useState(e.timestamp.startsWith("{{")||e.timestamp.includes("state."));return s.jsxs("div",{className:"wait-until-section",children:[s.jsx("div",{className:"wait-panel-toggle-row",children:s.jsxs("label",{className:"wait-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:o=>r(o.target.checked)}),s.jsx("span",{className:"wait-panel-toggle-slider"}),s.jsx("span",{className:"wait-panel-toggle-label",children:"Use expression"})]})}),n?s.jsxs(ue,{label:"Timestamp Expression",required:!0,hint:"returns ISO string",children:[s.jsx("input",{type:"text",className:"wait-panel-input wait-panel-input-mono",value:e.timestamp,onChange:o=>t({timestamp:o.target.value}),placeholder:"{{state.targetTime}}"}),s.jsx("div",{className:"wait-panel-field-help",children:"Expression should return an ISO 8601 timestamp string."})]}):s.jsx(ue,{label:"Target Date/Time",required:!0,children:s.jsx("input",{type:"datetime-local",className:"wait-panel-input",value:e.timestamp.slice(0,16),onChange:o=>t({timestamp:new Date(o.target.value).toISOString()})})}),s.jsxs("div",{className:"wait-panel-info",children:[s.jsx("span",{className:"wait-panel-info-icon",children:""}),s.jsx("span",{className:"wait-panel-info-text",children:"The workflow will pause until the specified timestamp is reached. If the timestamp is in the past, the wait will complete immediately."})]})]})}function HW({webhook:e,onChange:t}){return s.jsxs("div",{className:"wait-webhook-section",children:[s.jsx(ue,{label:"Callback Path",required:!0,hint:"webhook endpoint",children:s.jsx("input",{type:"text",className:"wait-panel-input wait-panel-input-mono",value:e.path,onChange:n=>t({path:n.target.value}),placeholder:"/api/webhook/callback"})}),s.jsxs(ue,{label:"Timeout",required:!0,hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"wait-panel-input",value:e.timeout,onChange:n=>t({timeout:parseInt(n.target.value,10)||3e5}),min:0,step:1e3}),s.jsxs("div",{className:"wait-panel-field-help",children:["Maximum time to wait for the webhook callback (",(e.timeout/6e4).toFixed(1)," minutes)."]})]}),s.jsxs("div",{className:"wait-panel-presets",children:[s.jsx("span",{className:"wait-panel-presets-label",children:"Timeout presets:"}),s.jsxs("div",{className:"wait-panel-presets-buttons",children:[s.jsx("button",{type:"button",onClick:()=>t({timeout:6e4}),children:"1m"}),s.jsx("button",{type:"button",onClick:()=>t({timeout:3e5}),children:"5m"}),s.jsx("button",{type:"button",onClick:()=>t({timeout:9e5}),children:"15m"}),s.jsx("button",{type:"button",onClick:()=>t({timeout:36e5}),children:"1h"})]})]}),s.jsxs("div",{className:"wait-panel-info",children:[s.jsx("span",{className:"wait-panel-info-icon",children:""}),s.jsx("span",{className:"wait-panel-info-text",children:"The workflow will pause until an HTTP request is received at the callback path. The request body will be available in the workflow state."})]})]})}function VW({condition:e,onChange:t}){return s.jsxs("div",{className:"wait-condition-section",children:[s.jsxs(ue,{label:"Condition Expression",required:!0,hint:"JavaScript expression",children:[s.jsx("textarea",{className:"wait-panel-textarea wait-panel-input-mono",value:e.expression,onChange:n=>t({expression:n.target.value}),placeholder:"state.isReady === true",rows:3}),s.jsx("div",{className:"wait-panel-field-help",children:"Expression is evaluated against the workflow state. Wait completes when it returns true."})]}),s.jsxs(ue,{label:"Poll Interval",required:!0,hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"wait-panel-input",value:e.pollInterval,onChange:n=>t({pollInterval:parseInt(n.target.value,10)||5e3}),min:100,step:1e3}),s.jsxs("div",{className:"wait-panel-field-help",children:["How often to check the condition (",(e.pollInterval/1e3).toFixed(1)," seconds)."]})]}),s.jsxs(ue,{label:"Maximum Wait",required:!0,hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"wait-panel-input",value:e.maxWait,onChange:n=>t({maxWait:parseInt(n.target.value,10)||3e5}),min:0,step:1e3}),s.jsxs("div",{className:"wait-panel-field-help",children:["Maximum time to wait before timing out (",(e.maxWait/6e4).toFixed(1)," minutes)."]})]}),s.jsxs("div",{className:"wait-panel-presets",children:[s.jsx("span",{className:"wait-panel-presets-label",children:"Poll interval presets:"}),s.jsxs("div",{className:"wait-panel-presets-buttons",children:[s.jsx("button",{type:"button",onClick:()=>t({pollInterval:1e3}),children:"1s"}),s.jsx("button",{type:"button",onClick:()=>t({pollInterval:5e3}),children:"5s"}),s.jsx("button",{type:"button",onClick:()=>t({pollInterval:1e4}),children:"10s"}),s.jsx("button",{type:"button",onClick:()=>t({pollInterval:3e4}),children:"30s"})]})]}),s.jsxs("div",{className:"wait-panel-info wait-panel-info-warning",children:[s.jsx("span",{className:"wait-panel-info-icon",children:""}),s.jsxs("span",{className:"wait-panel-info-text",children:["Frequent polling may impact performance. Use longer intervals when possible. If the condition is never met, the wait will timeout after ",(e.maxWait/6e4).toFixed(1)," minutes."]})]})]})}const UW=["javascript","typescript"],kc={javascript:{label:"JavaScript",description:"Standard JavaScript (ES2020+)",icon:"",defaultCode:`// Access input data via 'input' variable
// Return the transformed result

const result = input.data.map(item => ({
  ...item,
  processed: true
}));

return result;`},typescript:{label:"TypeScript",description:"TypeScript (transpiled to JS)",icon:"",defaultCode:`// Access input data via 'input' variable
// Return the transformed result

interface Item {
  id: string;
  name: string;
}

const result: Item[] = input.data.map((item: Item) => ({
  ...item,
  processed: true
}));

return result;`}},WW={networkAccess:!1,fileSystemAccess:!1,memoryLimit:128,timeLimit:5e3};function KW({node:e,onChange:t}){const n=j.useCallback(p=>{t({...e,language:p})},[e,t]),r=j.useCallback(p=>{t({...e,code:p})},[e,t]),o=j.useCallback(p=>{t({...e,sandbox:{...e.sandbox,...p}})},[e,t]),a=j.useCallback(p=>{if(p===void 0||p===""){const{inputType:f,...m}=e;t(m)}else t({...e,inputType:p})},[e,t]),l=j.useCallback(p=>{if(p===void 0||p===""){const{outputType:f,...m}=e;t(m)}else t({...e,outputType:p})},[e,t]),u=j.useCallback(p=>{t({...e,...p})},[e,t]),d=j.useCallback(()=>{const p=kc[e.language];r(p.defaultCode)},[e.language,r]);return s.jsxs("div",{className:"code-panel",children:[s.jsx(Me,{title:"Language",defaultOpen:!0,children:s.jsx("div",{className:"code-language-selector",children:UW.map(p=>{const f=kc[p];return s.jsxs("button",{type:"button",className:`code-language-option ${e.language===p?"selected":""}`,onClick:()=>n(p),children:[s.jsx("span",{className:"code-language-icon",children:f.icon}),s.jsx("span",{className:"code-language-label",children:f.label}),s.jsx("span",{className:"code-language-description",children:f.description})]},p)})})}),s.jsx(GW,{language:e.language,code:e.code,onChange:r,onInsertTemplate:d}),s.jsx(QW,{inputType:e.inputType,outputType:e.outputType,onInputTypeChange:a,onOutputTypeChange:l}),s.jsx(XW,{sandbox:e.sandbox,onChange:o}),s.jsx(ir,{properties:e,onChange:u,showIdentity:!0})]})}function GW({language:e,code:t,onChange:n,onInsertTemplate:r}){const o=j.useRef(null),[a,l]=j.useState(1);j.useEffect(()=>{const d=t.split(`
`).length;l(Math.max(d,1))},[t]);const u=d=>{if(d.key==="Tab"){d.preventDefault();const p=o.current;if(!p)return;const f=p.selectionStart,m=p.selectionEnd,g=t.substring(0,f)+"  "+t.substring(m);n(g),setTimeout(()=>{p.selectionStart=p.selectionEnd=f+2},0)}};return s.jsx(Me,{title:"Code",defaultOpen:!0,children:s.jsxs("div",{className:"code-editor-container",children:[s.jsxs("div",{className:"code-editor-toolbar",children:[s.jsxs("span",{className:"code-editor-language-badge",children:[kc[e].icon," ",kc[e].label]}),s.jsxs("div",{className:"code-editor-actions",children:[s.jsx("button",{type:"button",className:"code-editor-action",onClick:r,title:"Insert template code",children:" Template"}),s.jsx("button",{type:"button",className:"code-editor-action",onClick:()=>n(""),title:"Clear code",children:" Clear"})]})]}),s.jsxs("div",{className:"code-editor-wrapper",children:[s.jsx("div",{className:"code-editor-line-numbers",children:Array.from({length:a},(d,p)=>s.jsx("span",{className:"code-editor-line-number",children:p+1},p+1))}),s.jsx("textarea",{ref:o,className:"code-editor-textarea",value:t,onChange:d=>n(d.target.value),onKeyDown:u,placeholder:"// Enter your code here...",spellCheck:!1,rows:Math.max(10,a)})]}),s.jsx("div",{className:"code-editor-hints",children:s.jsx(YW,{language:e})})]})})}function YW({language:e}){return s.jsxs("div",{className:"code-hint-box",children:[s.jsx("div",{className:"code-hint-title",children:"Available Context"}),s.jsxs("ul",{className:"code-hint-list",children:[s.jsxs("li",{children:[s.jsx("code",{children:"input"})," - Input data from state mapping"]}),s.jsxs("li",{children:[s.jsx("code",{children:"return value;"})," - Return the result"]}),e==="typescript"&&s.jsxs("li",{children:[s.jsx("code",{children:"interface"})," - Define types for better hints"]}),s.jsxs("li",{children:["Standard ",e==="typescript"?"TypeScript":"JavaScript"," APIs available"]})]}),s.jsx("div",{className:"code-hint-warning",children:" Code runs in a sandboxed environment with configurable restrictions"})]})}function QW({inputType:e,outputType:t,onInputTypeChange:n,onOutputTypeChange:r}){return s.jsxs(Me,{title:"Type Hints",defaultOpen:!1,children:[s.jsx(ue,{label:"Input Type",hint:"TypeScript type definition",children:s.jsx("textarea",{className:"code-panel-type-input",value:e||"",onChange:o=>n(o.target.value||void 0),placeholder:"{ data: Array<{ id: string; name: string }> }",rows:3,spellCheck:!1})}),s.jsx(ue,{label:"Output Type",hint:"TypeScript type definition",children:s.jsx("textarea",{className:"code-panel-type-input",value:t||"",onChange:o=>r(o.target.value||void 0),placeholder:"Array<{ id: string; name: string; processed: boolean }>",rows:3,spellCheck:!1})}),s.jsxs("div",{className:"code-panel-info",children:[s.jsx("span",{className:"code-panel-info-icon",children:""}),s.jsx("span",{className:"code-panel-info-text",children:"Type hints improve editor auto-completion and help catch errors early."})]})]})}function XW({sandbox:e,onChange:t}){const r=!e.networkAccess&&!e.fileSystemAccess?"strict":e.networkAccess&&e.fileSystemAccess?"open":"relaxed";return s.jsxs(Me,{title:"Sandbox Security",defaultOpen:!1,children:[s.jsxs("div",{className:`code-sandbox-level code-sandbox-level-${r}`,children:[s.jsx("span",{className:"code-sandbox-level-icon",children:r==="strict"?"":r==="relaxed"?"":""}),s.jsx("span",{className:"code-sandbox-level-label",children:r==="strict"?"Strict Sandbox":r==="relaxed"?"Relaxed Sandbox":"Open Access"}),s.jsx("span",{className:"code-sandbox-level-description",children:r==="strict"?"No network or file system access":r==="relaxed"?"Limited access enabled":"Full access enabled"})]}),s.jsxs("div",{className:"code-sandbox-toggles",children:[s.jsx(ue,{label:"Network Access",hint:"allow HTTP requests",children:s.jsxs("label",{className:"code-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.networkAccess,onChange:o=>t({networkAccess:o.target.checked})}),s.jsx("span",{className:"code-panel-toggle-slider"}),s.jsx("span",{className:"code-panel-toggle-label",children:e.networkAccess?" Enabled":" Disabled"})]})}),s.jsx(ue,{label:"File System Access",hint:"allow file operations",children:s.jsxs("label",{className:"code-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.fileSystemAccess,onChange:o=>t({fileSystemAccess:o.target.checked})}),s.jsx("span",{className:"code-panel-toggle-slider"}),s.jsx("span",{className:"code-panel-toggle-label",children:e.fileSystemAccess?" Enabled":" Disabled"})]})})]}),s.jsxs("div",{className:"code-sandbox-limits",children:[s.jsxs(ue,{label:"Memory Limit",hint:"MB",children:[s.jsxs("div",{className:"code-sandbox-limit-input",children:[s.jsx("input",{type:"number",className:"code-panel-input",value:e.memoryLimit,onChange:o=>t({memoryLimit:parseInt(o.target.value,10)||0}),min:0,max:1024,step:32}),s.jsx("span",{className:"code-sandbox-limit-unit",children:"MB"})]}),s.jsx("div",{className:"code-panel-field-help",children:"Maximum memory allocation. Set to 0 for unlimited (not recommended)."})]}),s.jsxs(ue,{label:"Time Limit",hint:"ms",children:[s.jsxs("div",{className:"code-sandbox-limit-input",children:[s.jsx("input",{type:"number",className:"code-panel-input",value:e.timeLimit,onChange:o=>t({timeLimit:parseInt(o.target.value,10)||0}),min:0,max:6e4,step:1e3}),s.jsx("span",{className:"code-sandbox-limit-unit",children:"ms"})]}),s.jsx("div",{className:"code-panel-field-help",children:"Maximum execution time. Set to 0 for unlimited (not recommended)."})]})]}),r!=="strict"&&s.jsxs("div",{className:"code-sandbox-warning",children:[s.jsx("span",{className:"code-sandbox-warning-icon",children:""}),s.jsx("span",{className:"code-sandbox-warning-text",children:r==="open"?"Full access enabled. Code can make network requests and access the file system. Use with caution.":"Some access restrictions have been relaxed. Ensure the code is trusted."})]}),s.jsx("button",{type:"button",className:"code-sandbox-reset",onClick:()=>t(WW),children:"Reset to Secure Defaults"})]})}const JW=["postgresql","mysql","sqlite","mongodb","redis"],jp={postgresql:{label:"PostgreSQL",icon:"",description:"Advanced open-source relational database"},mysql:{label:"MySQL",icon:"",description:"Popular open-source relational database"},sqlite:{label:"SQLite",icon:"",description:"Lightweight file-based database"},mongodb:{label:"MongoDB",icon:"",description:"Document-oriented NoSQL database"},redis:{label:"Redis",icon:"",description:"In-memory key-value store"}},ZW=["query","insert","update","delete","upsert"],Ep={query:{label:"SELECT",description:"Retrieve data from database",template:"SELECT * FROM table_name WHERE condition = $1"},insert:{label:"INSERT",description:"Insert new records",template:"INSERT INTO table_name (column1, column2) VALUES ($1, $2) RETURNING *"},update:{label:"UPDATE",description:"Update existing records",template:"UPDATE table_name SET column1 = $1 WHERE id = $2 RETURNING *"},delete:{label:"DELETE",description:"Delete records",template:"DELETE FROM table_name WHERE id = $1 RETURNING *"},upsert:{label:"UPSERT",description:"Insert or update on conflict",template:"INSERT INTO table_name (id, column1) VALUES ($1, $2) ON CONFLICT (id) DO UPDATE SET column1 = $2 RETURNING *"}},eK=["find","findOne","insert","update","delete"],tK={find:{label:"find()",description:"Find multiple documents"},findOne:{label:"findOne()",description:"Find a single document"},insert:{label:"insertOne()",description:"Insert a new document"},update:{label:"updateOne()",description:"Update a document"},delete:{label:"deleteOne()",description:"Delete a document"}},nK=["get","set","del","hget","hset","lpush","rpop"],rK={get:{label:"GET",description:"Get string value"},set:{label:"SET",description:"Set string value"},del:{label:"DEL",description:"Delete key"},hget:{label:"HGET",description:"Get hash field"},hset:{label:"HSET",description:"Set hash field"},lpush:{label:"LPUSH",description:"Push to list head"},rpop:{label:"RPOP",description:"Pop from list tail"}};function oK({node:e,onChange:t}){const n=j.useCallback(p=>{const f={dbType:p};p==="mongodb"?(f.sql=void 0,f.redis=void 0,e.mongodb||(f.mongodb={collection:"",operation:"find"})):p==="redis"?(f.sql=void 0,f.mongodb=void 0,e.redis||(f.redis={operation:"get",key:""})):(f.mongodb=void 0,f.redis=void 0,e.sql||(f.sql={operation:"query",query:""})),t({...e,...f})},[e,t]),r=j.useCallback(p=>{t({...e,connection:{...e.connection,...p}})},[e,t]),o=j.useCallback(p=>{t({...e,sql:{...e.sql,...p}})},[e,t]),a=j.useCallback(p=>{t({...e,mongodb:{...e.mongodb,...p}})},[e,t]),l=j.useCallback(p=>{t({...e,redis:{...e.redis,...p}})},[e,t]),u=j.useCallback(p=>{t({...e,...p})},[e,t]),d=["postgresql","mysql","sqlite"].includes(e.dbType);return s.jsxs("div",{className:"db-panel",children:[s.jsxs(Me,{title:"Database Type",defaultOpen:!0,children:[s.jsx(ue,{label:"Select Database",children:s.jsx("div",{className:"db-type-selector",children:JW.map(p=>{const f=jp[p];return s.jsxs("button",{type:"button",className:`db-type-option ${e.dbType===p?"selected":""} db-type-${p}`,onClick:()=>n(p),title:f.description,children:[s.jsx("span",{className:"db-type-icon",children:f.icon}),s.jsx("span",{className:"db-type-label",children:f.label})]},p)})})}),s.jsxs("div",{className:"db-panel-info",children:[s.jsx("span",{className:"db-panel-info-icon",children:jp[e.dbType].icon}),s.jsx("span",{className:"db-panel-info-text",children:jp[e.dbType].description})]})]}),s.jsx(iK,{connection:e.connection,dbType:e.dbType,onChange:r}),d&&e.sql&&s.jsx(sK,{sql:e.sql,onChange:o}),e.dbType==="mongodb"&&e.mongodb&&s.jsx(aK,{mongodb:e.mongodb,onChange:a}),e.dbType==="redis"&&e.redis&&s.jsx(lK,{redis:e.redis,onChange:l}),s.jsx(ir,{properties:e,onChange:u,showIdentity:!0})]})}function iK({connection:e,dbType:t,onChange:n}){const[r,o]=j.useState(!1),a=()=>{switch(t){case"postgresql":return"postgresql://user:password@localhost:5432/database";case"mysql":return"mysql://user:password@localhost:3306/database";case"sqlite":return"./data/database.sqlite";case"mongodb":return"mongodb://user:password@localhost:27017/database";case"redis":return"redis://localhost:6379";default:return"Connection string"}};return s.jsxs(Me,{title:"Connection",defaultOpen:!0,children:[s.jsxs(ue,{label:"Connection String",required:!0,hint:"secret - stored securely",children:[s.jsxs("div",{className:"db-connection-input-wrapper",children:[s.jsx("input",{type:r?"text":"password",className:"db-panel-input db-panel-input-mono",value:e.connectionString,onChange:l=>n({connectionString:l.target.value}),placeholder:a()}),s.jsx("button",{type:"button",className:"db-connection-toggle",onClick:()=>o(!r),title:r?"Hide":"Show",children:r?"":""})]}),s.jsx("div",{className:"db-panel-field-help",children:" Connection strings are stored securely and never logged."})]}),s.jsxs(ue,{label:"Credential Reference",hint:"optional - reference Set node",children:[s.jsx("input",{type:"text",className:"db-panel-input",value:e.credentialRef||"",onChange:l=>n({credentialRef:l.target.value||void 0}),placeholder:"set_node_id.DB_CONNECTION"}),s.jsxs("div",{className:"db-panel-field-help",children:["Reference credentials from a Set node (e.g., ",s.jsx("code",{children:"credentials.DB_URL"}),")"]})]}),t!=="sqlite"&&s.jsxs(ue,{label:"Pool Size",hint:"connections",children:[s.jsx("input",{type:"number",className:"db-panel-input",value:e.poolSize||5,onChange:l=>n({poolSize:parseInt(l.target.value,10)||5}),min:1,max:100}),s.jsx("div",{className:"db-panel-field-help",children:"Number of connections to maintain in the pool (default: 5)"})]}),s.jsxs("button",{type:"button",className:"db-test-connection-btn",disabled:!0,children:[" Test Connection",s.jsx("span",{className:"db-test-connection-hint",children:"(available at runtime)"})]})]})}function sK({sql:e,onChange:t}){const[n,r]=j.useState(e.params?JSON.stringify(e.params,null,2):"{}"),[o,a]=j.useState(null),l=d=>{t({operation:d,query:Ep[d].template})},u=d=>{r(d);try{if(d.trim()){const p=JSON.parse(d);a(null),t({params:p})}else a(null),t({params:void 0})}catch{a("Invalid JSON")}};return s.jsxs(Me,{title:"SQL Operation",defaultOpen:!0,children:[s.jsx(ue,{label:"Operation Type",children:s.jsx("div",{className:"db-operation-selector",children:ZW.map(d=>{const p=Ep[d];return s.jsx("button",{type:"button",className:`db-operation-option ${e.operation===d?"selected":""}`,onClick:()=>l(d),title:p.description,children:p.label},d)})})}),s.jsxs(ue,{label:"SQL Query",required:!0,hint:"parameterized with $1, $2, etc.",children:[s.jsx("textarea",{className:"db-panel-textarea db-panel-textarea-mono",value:e.query,onChange:d=>t({query:d.target.value}),placeholder:Ep[e.operation].template,rows:6}),s.jsxs("div",{className:"db-panel-field-help",children:["Use ",s.jsx("code",{children:"$1"}),", ",s.jsx("code",{children:"$2"}),", etc. for parameterized queries to prevent SQL injection."]})]}),s.jsxs(ue,{label:"Query Parameters",hint:"JSON object",children:[s.jsx("textarea",{className:`db-panel-textarea db-panel-textarea-mono ${o?"error":""}`,value:n,onChange:d=>u(d.target.value),placeholder:'{"$1": "value1", "$2": 123}',rows:4}),o&&s.jsx("span",{className:"db-panel-error",children:o}),s.jsxs("div",{className:"db-panel-field-help",children:["Map parameter placeholders to values. Supports ",s.jsx("code",{children:"{{variable}}"})," interpolation."]})]})]})}function aK({mongodb:e,onChange:t}){const[n,r]=j.useState(e.filter?JSON.stringify(e.filter,null,2):"{}"),[o,a]=j.useState(null),[l,u]=j.useState(e.document?JSON.stringify(e.document,null,2):"{}"),[d,p]=j.useState(null),f=b=>{r(b);try{if(b.trim()){const x=JSON.parse(b);a(null),t({filter:x})}else a(null),t({filter:void 0})}catch{a("Invalid JSON")}},m=b=>{u(b);try{if(b.trim()){const x=JSON.parse(b);p(null),t({document:x})}else p(null),t({document:void 0})}catch{p("Invalid JSON")}},g=["find","findOne","update","delete"].includes(e.operation),v=["insert","update"].includes(e.operation);return s.jsxs(Me,{title:"MongoDB Operation",defaultOpen:!0,children:[s.jsx(ue,{label:"Collection",required:!0,children:s.jsx("input",{type:"text",className:"db-panel-input",value:e.collection,onChange:b=>t({collection:b.target.value}),placeholder:"users"})}),s.jsx(ue,{label:"Operation",children:s.jsx("div",{className:"db-operation-selector",children:eK.map(b=>{const x=tK[b];return s.jsx("button",{type:"button",className:`db-operation-option ${e.operation===b?"selected":""}`,onClick:()=>t({operation:b}),title:x.description,children:x.label},b)})})}),g&&s.jsxs(ue,{label:"Filter",hint:"MongoDB query",children:[s.jsx("textarea",{className:`db-panel-textarea db-panel-textarea-mono ${o?"error":""}`,value:n,onChange:b=>f(b.target.value),placeholder:'{"status": "active", "age": {"$gte": 18}}',rows:4}),o&&s.jsx("span",{className:"db-panel-error",children:o})]}),v&&s.jsxs(ue,{label:"Document",hint:"document to insert/update",children:[s.jsx("textarea",{className:`db-panel-textarea db-panel-textarea-mono ${d?"error":""}`,value:l,onChange:b=>m(b.target.value),placeholder:'{"name": "{{input.name}}", "email": "{{input.email}}"}',rows:4}),d&&s.jsx("span",{className:"db-panel-error",children:d})]})]})}function lK({redis:e,onChange:t}){const[n,r]=j.useState(e.value!==void 0?JSON.stringify(e.value,null,2):""),[o,a]=j.useState(null),l=f=>{if(r(f),!f.trim()){a(null),t({value:void 0});return}try{const m=JSON.parse(f);a(null),t({value:m})}catch{a(null),t({value:f})}},u=["set","hset","lpush"].includes(e.operation),d=["set","hset"].includes(e.operation),p=["hget","hset"].includes(e.operation);return s.jsxs(Me,{title:"Redis Operation",defaultOpen:!0,children:[s.jsx(ue,{label:"Operation",children:s.jsx("div",{className:"db-operation-selector db-operation-selector-wrap",children:nK.map(f=>{const m=rK[f];return s.jsx("button",{type:"button",className:`db-operation-option ${e.operation===f?"selected":""}`,onClick:()=>t({operation:f}),title:m.description,children:m.label},f)})})}),s.jsxs(ue,{label:"Key",required:!0,children:[s.jsx("input",{type:"text",className:"db-panel-input db-panel-input-mono",value:e.key,onChange:f=>t({key:f.target.value}),placeholder:p?"hash_name:field":"cache:user:123"}),p&&s.jsxs("div",{className:"db-panel-field-help",children:["For hash operations, use format: ",s.jsx("code",{children:"hash_name:field"})]})]}),u&&s.jsxs(ue,{label:"Value",hint:"string or JSON",children:[s.jsx("textarea",{className:`db-panel-textarea db-panel-textarea-mono ${o?"error":""}`,value:n,onChange:f=>l(f.target.value),placeholder:'{"data": "{{input.data}}"}',rows:3}),o&&s.jsx("span",{className:"db-panel-error",children:o})]}),d&&s.jsx(ue,{label:"TTL",hint:"seconds, 0 = no expiry",children:s.jsx("input",{type:"number",className:"db-panel-input",value:e.ttl||0,onChange:f=>t({ttl:parseInt(f.target.value,10)||void 0}),min:0,placeholder:"3600"})})]})}const cK=["monitor","send"],uK={monitor:" Monitor Incoming",send:" Send Outgoing"},$1={monitor:"Monitor an email inbox for new messages using IMAP",send:"Send emails using SMTP"},dK=["text","html"],pK={text:"Plain Text",html:"HTML"},wv={host:"",port:993,secure:!0,username:"",password:"",folder:"INBOX",markAsRead:!0},_v={host:"",port:587,secure:!0,username:"",password:"",fromEmail:"",fromName:""},Sv={unreadOnly:!0},kv={to:""},Nv={subject:"",bodyType:"text",body:""};function fK({node:e,onChange:t}){const n=j.useCallback(f=>{const m={mode:f};f==="monitor"&&!e.imap?(m.imap={...wv},m.filters={...Sv}):f==="send"&&!e.smtp&&(m.smtp={..._v},m.recipients={...kv},m.content={...Nv}),t({...e,...m})},[e,t]),r=j.useCallback(f=>{t({...e,imap:{...e.imap||wv,...f}})},[e,t]),o=j.useCallback(f=>{t({...e,filters:{...e.filters||Sv,...f}})},[e,t]),a=j.useCallback(f=>{t({...e,smtp:{...e.smtp||_v,...f}})},[e,t]),l=j.useCallback(f=>{t({...e,recipients:{...e.recipients||kv,...f}})},[e,t]),u=j.useCallback(f=>{t({...e,content:{...e.content||Nv,...f}})},[e,t]),d=j.useCallback(f=>{t({...e,attachments:f})},[e,t]),p=j.useCallback(f=>{t({...e,...f})},[e,t]);return s.jsxs("div",{className:"email-panel",children:[s.jsxs(Me,{title:"Email Mode",defaultOpen:!0,children:[s.jsx(ue,{label:"Mode",required:!0,tooltip:"Choose whether to monitor incoming emails or send outgoing emails",children:s.jsx("div",{className:"email-mode-selector",children:cK.map(f=>s.jsx("button",{type:"button",className:`email-mode-option ${e.mode===f?"selected":""}`,onClick:()=>n(f),title:$1[f],children:uK[f]},f))})}),s.jsx("div",{className:"email-panel-mode-description",children:$1[e.mode]})]}),e.mode==="monitor"&&s.jsx(hK,{imap:e.imap,onChange:r}),e.mode==="monitor"&&s.jsx(mK,{filters:e.filters,onChange:o}),e.mode==="send"&&s.jsx(gK,{smtp:e.smtp,onChange:a}),e.mode==="send"&&s.jsx(yK,{recipients:e.recipients,onChange:l}),e.mode==="send"&&s.jsx(vK,{content:e.content,onChange:u}),s.jsx(xK,{attachments:e.attachments||[],onChange:d,mode:e.mode}),s.jsx(ir,{properties:e,onChange:p,showIdentity:!0})]})}function hK({imap:e,onChange:t}){const n=e||wv;return s.jsxs(Me,{title:"IMAP Connection",defaultOpen:!0,children:[s.jsx(ue,{label:"Host",required:!0,tooltip:"IMAP server hostname (e.g., imap.gmail.com)",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.host,onChange:r=>t({host:r.target.value}),placeholder:"imap.gmail.com"})}),s.jsxs("div",{className:"email-panel-row",children:[s.jsx(ue,{label:"Port",required:!0,children:s.jsx("input",{type:"number",className:"email-panel-input email-panel-input-small",value:n.port,onChange:r=>t({port:parseInt(r.target.value,10)||993}),min:1,max:65535})}),s.jsx(ue,{label:"SSL/TLS",children:s.jsxs("label",{className:"email-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.secure,onChange:r=>t({secure:r.target.checked})}),s.jsx("span",{className:"email-panel-toggle-slider"}),s.jsx("span",{className:"email-panel-toggle-label",children:n.secure?"Enabled":"Disabled"})]})})]}),s.jsx(ue,{label:"Username",required:!0,hint:"email address",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.username,onChange:r=>t({username:r.target.value}),placeholder:"user@example.com"})}),s.jsx(ue,{label:"Password",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"email-panel-input",value:n.password,onChange:r=>t({password:r.target.value}),placeholder:"Password or {{EMAIL_PASSWORD}}"})}),s.jsx(ue,{label:"Folder",tooltip:"IMAP folder to monitor",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.folder,onChange:r=>t({folder:r.target.value}),placeholder:"INBOX"})}),s.jsx(ue,{label:"Mark as Read",children:s.jsxs("label",{className:"email-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.markAsRead,onChange:r=>t({markAsRead:r.target.checked})}),s.jsx("span",{className:"email-panel-toggle-slider"}),s.jsx("span",{className:"email-panel-toggle-label",children:n.markAsRead?"Yes":"No"})]})}),s.jsxs("div",{className:"email-panel-presets",children:[s.jsx("span",{className:"email-panel-presets-label",children:"Quick setup:"}),s.jsx("button",{type:"button",onClick:()=>t({host:"imap.gmail.com",port:993,secure:!0}),children:"Gmail"}),s.jsx("button",{type:"button",onClick:()=>t({host:"outlook.office365.com",port:993,secure:!0}),children:"Outlook"}),s.jsx("button",{type:"button",onClick:()=>t({host:"imap.mail.yahoo.com",port:993,secure:!0}),children:"Yahoo"})]})]})}function mK({filters:e,onChange:t}){const n=e||Sv;return s.jsxs(Me,{title:"Email Filters",defaultOpen:!1,children:[s.jsx(ue,{label:"Unread Only",children:s.jsxs("label",{className:"email-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.unreadOnly,onChange:r=>t({unreadOnly:r.target.checked})}),s.jsx("span",{className:"email-panel-toggle-slider"}),s.jsx("span",{className:"email-panel-toggle-label",children:n.unreadOnly?"Yes":"No"})]})}),s.jsx(ue,{label:"From",hint:"sender filter",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.from||"",onChange:r=>t({from:r.target.value||void 0}),placeholder:"sender@example.com or *@company.com"})}),s.jsx(ue,{label:"Subject",hint:"supports wildcards",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.subject||"",onChange:r=>t({subject:r.target.value||void 0}),placeholder:"*invoice* or Order Confirmation"})}),s.jsxs("div",{className:"email-panel-row",children:[s.jsx(ue,{label:"Date From",children:s.jsx("input",{type:"date",className:"email-panel-input",value:n.dateFrom||"",onChange:r=>t({dateFrom:r.target.value||void 0})})}),s.jsx(ue,{label:"Date To",children:s.jsx("input",{type:"date",className:"email-panel-input",value:n.dateTo||"",onChange:r=>t({dateTo:r.target.value||void 0})})})]})]})}function gK({smtp:e,onChange:t}){const n=e||_v;return s.jsxs(Me,{title:"SMTP Connection",defaultOpen:!0,children:[s.jsx(ue,{label:"Host",required:!0,tooltip:"SMTP server hostname (e.g., smtp.gmail.com)",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.host,onChange:r=>t({host:r.target.value}),placeholder:"smtp.gmail.com"})}),s.jsxs("div",{className:"email-panel-row",children:[s.jsx(ue,{label:"Port",required:!0,children:s.jsx("input",{type:"number",className:"email-panel-input email-panel-input-small",value:n.port,onChange:r=>t({port:parseInt(r.target.value,10)||587}),min:1,max:65535})}),s.jsx(ue,{label:"SSL/TLS",children:s.jsxs("label",{className:"email-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.secure,onChange:r=>t({secure:r.target.checked})}),s.jsx("span",{className:"email-panel-toggle-slider"}),s.jsx("span",{className:"email-panel-toggle-label",children:n.secure?"Enabled":"Disabled"})]})})]}),s.jsx(ue,{label:"Username",required:!0,hint:"email address",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.username,onChange:r=>t({username:r.target.value}),placeholder:"user@example.com"})}),s.jsx(ue,{label:"Password",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"email-panel-input",value:n.password,onChange:r=>t({password:r.target.value}),placeholder:"Password or {{EMAIL_PASSWORD}}"})}),s.jsx(ue,{label:"From Email",required:!0,children:s.jsx("input",{type:"email",className:"email-panel-input",value:n.fromEmail,onChange:r=>t({fromEmail:r.target.value}),placeholder:"noreply@example.com"})}),s.jsx(ue,{label:"From Name",hint:"display name",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.fromName||"",onChange:r=>t({fromName:r.target.value||void 0}),placeholder:"My Application"})}),s.jsxs("div",{className:"email-panel-presets",children:[s.jsx("span",{className:"email-panel-presets-label",children:"Quick setup:"}),s.jsx("button",{type:"button",onClick:()=>t({host:"smtp.gmail.com",port:587,secure:!0}),children:"Gmail"}),s.jsx("button",{type:"button",onClick:()=>t({host:"smtp.office365.com",port:587,secure:!0}),children:"Outlook"}),s.jsx("button",{type:"button",onClick:()=>t({host:"smtp.sendgrid.net",port:587,secure:!0}),children:"SendGrid"})]})]})}function yK({recipients:e,onChange:t}){const n=e||kv;return s.jsxs(Me,{title:"Recipients",defaultOpen:!0,children:[s.jsx(ue,{label:"To",required:!0,hint:"comma-separated or {{variable}}",children:s.jsx("textarea",{className:"email-panel-textarea",value:n.to,onChange:r=>t({to:r.target.value}),placeholder:"recipient@example.com, another@example.com",rows:2})}),s.jsx(ue,{label:"CC",hint:"comma-separated",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.cc||"",onChange:r=>t({cc:r.target.value||void 0}),placeholder:"cc@example.com"})}),s.jsx(ue,{label:"BCC",hint:"comma-separated",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.bcc||"",onChange:r=>t({bcc:r.target.value||void 0}),placeholder:"bcc@example.com"})})]})}function vK({content:e,onChange:t}){const n=e||Nv;return s.jsxs(Me,{title:"Email Content",defaultOpen:!0,children:[s.jsx(ue,{label:"Subject",required:!0,hint:"supports {{variable}}",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.subject,onChange:r=>t({subject:r.target.value}),placeholder:"Your order {{orderId}} has shipped"})}),s.jsx(ue,{label:"Body Type",children:s.jsx("div",{className:"email-body-type-selector",children:dK.map(r=>s.jsx("button",{type:"button",className:`email-body-type-option ${n.bodyType===r?"selected":""}`,onClick:()=>t({bodyType:r}),children:pK[r]},r))})}),s.jsx(ue,{label:"Body",required:!0,hint:"supports {{variable}}",children:s.jsx("textarea",{className:`email-panel-textarea email-panel-textarea-large ${n.bodyType==="html"?"email-panel-textarea-mono":""}`,value:n.body,onChange:r=>t({body:r.target.value}),placeholder:n.bodyType==="html"?"<html><body><h1>Hello {{name}}</h1></body></html>":`Hello {{name}},

Your order has shipped.

Best regards`,rows:8})}),n.bodyType==="html"&&s.jsxs("div",{className:"email-panel-info",children:[s.jsx("span",{className:"email-panel-info-icon",children:""}),s.jsxs("span",{className:"email-panel-info-text",children:["Use HTML tags for formatting. Variables like ","{{name}}"," will be interpolated from state."]})]})]})}function xK({attachments:e,onChange:t,mode:n}){const r=()=>{t([...e,{filename:"",stateKey:""}])},o=l=>{t(e.filter((u,d)=>d!==l))},a=(l,u)=>{t(e.map((d,p)=>p===l?{...d,...u}:d))};return s.jsxs(Me,{title:"Attachments",defaultOpen:e.length>0,children:[n==="monitor"?s.jsxs("div",{className:"email-panel-info",children:[s.jsx("span",{className:"email-panel-info-icon",children:""}),s.jsx("span",{className:"email-panel-info-text",children:"Attachments from monitored emails will be available in the output state. Configure state keys below to map specific attachments."})]}):s.jsxs("div",{className:"email-panel-info",children:[s.jsx("span",{className:"email-panel-info-icon",children:""}),s.jsx("span",{className:"email-panel-info-text",children:"Attach files from workflow state. The state key should contain base64 data or a file path."})]}),s.jsxs("div",{className:"email-attachments-list",children:[e.map((l,u)=>s.jsxs("div",{className:"email-attachment-row",children:[s.jsx("input",{type:"text",className:"email-panel-input email-attachment-filename",value:l.filename,onChange:d=>a(u,{filename:d.target.value}),placeholder:"report.pdf"}),s.jsx("span",{className:"email-attachment-arrow",children:""}),s.jsx("input",{type:"text",className:"email-panel-input email-attachment-statekey",value:l.stateKey,onChange:d=>a(u,{stateKey:d.target.value}),placeholder:"state.fileData"}),s.jsx("input",{type:"text",className:"email-panel-input email-attachment-mime",value:l.mimeType||"",onChange:d=>a(u,{mimeType:d.target.value||void 0}),placeholder:"application/pdf"}),s.jsx("button",{type:"button",className:"email-attachment-remove",onClick:()=>o(u),title:"Remove attachment",children:""})]},u)),s.jsx("button",{type:"button",className:"email-attachment-add",onClick:r,children:"+ Add Attachment"})]})]})}function bK({nodeId:e,onClose:t}){const{currentProject:n,updateActionNode:r,removeActionNode:o}=De(),a=n?.actionNodes?.[e];if(!a)return s.jsxs("div",{className:"action-properties-panel",children:[s.jsxs("div",{className:"action-properties-panel-header",children:[s.jsx("span",{className:"action-properties-panel-title",children:"Action Node"}),s.jsx("button",{className:"action-properties-panel-close",onClick:t,children:""})]}),s.jsx("div",{className:"action-properties-panel-empty",children:"Node not found"})]});const l=m=>{r(e,m)},u=()=>{o(e),t()},p=g_(a)?{label:"Trigger",icon:"",color:"#6366F1"}:y_(a)?{label:"HTTP",icon:"",color:"#3B82F6"}:v_(a)?{label:"Set",icon:"",color:"#8B5CF6"}:x_(a)?{label:"Transform",icon:"",color:"#EC4899"}:b_(a)?{label:"Switch",icon:"",color:"#F59E0B"}:w_(a)?{label:"Loop",icon:"",color:"#10B981"}:__(a)?{label:"Merge",icon:"",color:"#06B6D4"}:S_(a)?{label:"Wait",icon:"",color:"#6B7280"}:k_(a)?{label:"Code",icon:"",color:"#EF4444"}:N_(a)?{label:"Database",icon:"",color:"#14B8A6"}:j_(a)?{label:"Email",icon:"",color:"#EA580C"}:{label:"Action",icon:"",color:"#6B7280"},f=()=>g_(a)?s.jsx(IU,{node:a,onChange:l}):y_(a)?s.jsx($U,{node:a,onChange:l}):v_(a)?s.jsx(JU,{node:a,onChange:l}):x_(a)?s.jsx(rW,{node:a,onChange:l}):b_(a)?s.jsx(lW,{node:a,onChange:l}):w_(a)?s.jsx(yW,{node:a,onChange:l}):__(a)?s.jsx(AW,{node:a,onChange:l}):S_(a)?s.jsx(FW,{node:a,onChange:l}):k_(a)?s.jsx(KW,{node:a,onChange:l}):N_(a)?s.jsx(oK,{node:a,onChange:l}):j_(a)?s.jsx(fK,{node:a,onChange:l}):s.jsx("div",{className:"action-properties-panel-empty",children:"Unknown node type"});return s.jsxs("div",{className:"action-properties-panel",children:[s.jsxs("div",{className:"action-properties-panel-header",children:[s.jsxs("div",{className:"action-properties-panel-title-row",children:[s.jsx("span",{className:"action-properties-panel-icon",style:{backgroundColor:p.color},children:p.icon}),s.jsx("span",{className:"action-properties-panel-title",children:p.label}),s.jsx("span",{className:"action-properties-panel-id",children:e})]}),s.jsxs("div",{className:"action-properties-panel-actions",children:[s.jsx("button",{className:"action-properties-panel-delete",onClick:u,title:"Delete node",children:""}),s.jsx("button",{className:"action-properties-panel-close",onClick:t,title:"Close panel",children:""})]})]}),s.jsx("div",{className:"action-properties-panel-content",children:f()})]})}const NP=[{name:"Entry",types:["trigger"]},{name:"Data",types:["set","transform"]},{name:"Control",types:["switch","loop","merge","wait"]},{name:"Integration",types:["http","database","email"]},{name:"Code",types:["code"]}];NP.flatMap(e=>e.types);function wK({type:e,onDragStart:t,onCreate:n}){const r=kA[e],o=NA[e],a=_F[e];return s.jsxs("div",{draggable:!0,onDragStart:l=>t(l,e),onClick:()=>n(e),className:"p-1.5 rounded text-xs cursor-grab hover:opacity-80 text-white font-medium",style:{backgroundColor:r},title:`Drag or click to add ${a} node`,children:[o," ",a]})}function _K({category:e,onDragStart:t,onCreate:n}){return s.jsxs("div",{className:"mb-1",children:[s.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide mb-1 px-0.5",style:{color:"var(--text-muted)"},children:e.name}),s.jsx("div",{className:"space-y-1",children:e.types.map(r=>s.jsx(wK,{type:r,onDragStart:t,onCreate:n},r))})]})}function SK({onDragStart:e,onCreate:t}){return s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Actions"}),NP.map(n=>s.jsx(_K,{category:n,onDragStart:e,onCreate:t},n.name))]})}function kK({onAgentDragStart:e,onAgentCreate:t,onActionDragStart:n,onActionCreate:r,selectedNodeId:o,agentTools:a,onToolAdd:l,onToolRemove:u,onCompile:d,onBuild:p,building:f,isAutobuild:m,builtBinaryPath:g,autobuildEnabled:v,onToggleAutobuild:b,onShowBuildProgress:x,showConsole:_,onToggleConsole:k,debugMode:S,snapshotCount:N,showStateInspector:T,onToggleStateInspector:A,onShowSettings:C,onCloseProject:P}){return s.jsxs("div",{className:"w-48 border-r p-2 flex flex-col overflow-y-auto",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsx(JV,{onDragStart:e,onCreate:t}),s.jsx("div",{className:"my-2"}),s.jsx(SK,{onDragStart:n,onCreate:r}),s.jsx("div",{className:"my-2"}),s.jsx(ZV,{selectedNodeId:o,agentTools:a,onAdd:l,onRemove:u}),s.jsxs("div",{className:"mt-auto space-y-1.5 pt-2",children:[s.jsx("button",{onClick:d,className:"w-full px-2 py-1.5 bg-blue-600 hover:bg-blue-700 rounded text-xs text-white font-medium",children:" View Code"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>{f&&m?x():p()},disabled:f&&!m,className:`flex-1 px-2 py-1.5 rounded text-xs text-white font-medium ${f?"cursor-pointer":g?"bg-green-600 hover:bg-green-700":"bg-orange-500 hover:bg-orange-600 animate-pulse"}`,style:f?{backgroundColor:"#3B82F6"}:void 0,title:f&&m?"Click to view build progress":void 0,children:f?" Building...":g?" Build":" Build Required"}),s.jsx("button",{onClick:b,className:`px-2 py-1.5 rounded text-xs font-medium transition-colors ${v?"bg-green-600 hover:bg-green-700 text-white":""}`,style:v?void 0:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)",border:"1px solid var(--border-default)"},title:v?"Autobuild ON - builds automatically on changes":"Autobuild OFF - click to enable",children:""})]}),s.jsx("button",{onClick:k,className:"w-full px-2 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:_?"Hide Console":"Show Console"}),_&&S&&N>0&&s.jsx("button",{onClick:A,className:"w-full px-2 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:T?" Hide Inspector":" Show Inspector"}),s.jsx("button",{onClick:C,className:"w-full px-2 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:" Settings"}),s.jsx("button",{onClick:P,className:"w-full px-2 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Back"})]})]})}function NK({selectedNodeId:e,selectedAgent:t,agents:n,toolConfigs:r,onUpdateAgent:o,onRenameAgent:a,onAddSubAgent:l,onCloseAgent:u,onSelectTool:d,onRemoveToolFromAgent:p,selectedActionNodeId:f,hasProject:m,onCloseActionNode:g,selectedToolId:v,toolConfig:b,onUpdateToolConfig:x,onCloseTool:_,onOpenCodeEditor:k,showConsole:S,debugMode:N,showStateInspector:T,snapshots:A,currentSnapshot:C,previousSnapshot:P,currentSnapshotIndex:O,onStateHistorySelect:I,onCloseStateInspector:H}){return s.jsxs(s.Fragment,{children:[t&&e&&s.jsx(nU,{nodeId:e,agent:t,agents:n,toolConfigs:r,onUpdate:o,onRename:a,onAddSubAgent:()=>l(e),onClose:u,onSelectTool:d,onRemoveTool:D=>p(e,D)}),f&&m&&s.jsx(bK,{nodeId:f,onClose:g}),v&&m&&s.jsx(sU,{toolId:v,config:b,onUpdate:D=>x(v,D),onClose:_,onOpenCodeEditor:k}),S&&N&&T&&A.length>0&&s.jsx("div",{className:"w-72 flex-shrink-0",children:s.jsx(dU,{snapshot:C,previousSnapshot:P,snapshots:A,currentIndex:O,onHistorySelect:I,onClose:H})})]})}function cx(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Cp,H1;function jK(){if(H1)return Cp;H1=1;function e(){this.__data__=[],this.size=0}return Cp=e,Cp}var Tp,V1;function Qi(){if(V1)return Tp;V1=1;function e(t,n){return t===n||t!==t&&n!==n}return Tp=e,Tp}var Ap,U1;function Hc(){if(U1)return Ap;U1=1;var e=Qi();function t(n,r){for(var o=n.length;o--;)if(e(n[o][0],r))return o;return-1}return Ap=t,Ap}var Pp,W1;function EK(){if(W1)return Pp;W1=1;var e=Hc(),t=Array.prototype,n=t.splice;function r(o){var a=this.__data__,l=e(a,o);if(l<0)return!1;var u=a.length-1;return l==u?a.pop():n.call(a,l,1),--this.size,!0}return Pp=r,Pp}var Ip,K1;function CK(){if(K1)return Ip;K1=1;var e=Hc();function t(n){var r=this.__data__,o=e(r,n);return o<0?void 0:r[o][1]}return Ip=t,Ip}var Rp,G1;function TK(){if(G1)return Rp;G1=1;var e=Hc();function t(n){return e(this.__data__,n)>-1}return Rp=t,Rp}var Op,Y1;function AK(){if(Y1)return Op;Y1=1;var e=Hc();function t(n,r){var o=this.__data__,a=e(o,n);return a<0?(++this.size,o.push([n,r])):o[a][1]=r,this}return Op=t,Op}var Mp,Q1;function Vc(){if(Q1)return Mp;Q1=1;var e=jK(),t=EK(),n=CK(),r=TK(),o=AK();function a(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var p=l[u];this.set(p[0],p[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,Mp=a,Mp}var Dp,X1;function PK(){if(X1)return Dp;X1=1;var e=Vc();function t(){this.__data__=new e,this.size=0}return Dp=t,Dp}var Lp,J1;function IK(){if(J1)return Lp;J1=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Lp=e,Lp}var qp,Z1;function RK(){if(Z1)return qp;Z1=1;function e(t){return this.__data__.get(t)}return qp=e,qp}var Fp,eS;function OK(){if(eS)return Fp;eS=1;function e(t){return this.__data__.has(t)}return Fp=e,Fp}var zp,tS;function jP(){if(tS)return zp;tS=1;var e=typeof Rl=="object"&&Rl&&Rl.Object===Object&&Rl;return zp=e,zp}var Bp,nS;function sr(){if(nS)return Bp;nS=1;var e=jP(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Bp=n,Bp}var $p,rS;function Xi(){if(rS)return $p;rS=1;var e=sr(),t=e.Symbol;return $p=t,$p}var Hp,oS;function MK(){if(oS)return Hp;oS=1;var e=Xi(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,o=e?e.toStringTag:void 0;function a(l){var u=n.call(l,o),d=l[o];try{l[o]=void 0;var p=!0}catch{}var f=r.call(l);return p&&(u?l[o]=d:delete l[o]),f}return Hp=a,Hp}var Vp,iS;function DK(){if(iS)return Vp;iS=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Vp=n,Vp}var Up,sS;function Wo(){if(sS)return Up;sS=1;var e=Xi(),t=MK(),n=DK(),r="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function l(u){return u==null?u===void 0?o:r:a&&a in Object(u)?t(u):n(u)}return Up=l,Up}var Wp,aS;function Bn(){if(aS)return Wp;aS=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Wp=e,Wp}var Kp,lS;function Na(){if(lS)return Kp;lS=1;var e=Wo(),t=Bn(),n="[object AsyncFunction]",r="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function l(u){if(!t(u))return!1;var d=e(u);return d==r||d==o||d==n||d==a}return Kp=l,Kp}var Gp,cS;function LK(){if(cS)return Gp;cS=1;var e=sr(),t=e["__core-js_shared__"];return Gp=t,Gp}var Yp,uS;function qK(){if(uS)return Yp;uS=1;var e=LK(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return Yp=n,Yp}var Qp,dS;function EP(){if(dS)return Qp;dS=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Qp=n,Qp}var Xp,pS;function FK(){if(pS)return Xp;pS=1;var e=Na(),t=qK(),n=Bn(),r=EP(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,d=l.toString,p=u.hasOwnProperty,f=RegExp("^"+d.call(p).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(g){if(!n(g)||t(g))return!1;var v=e(g)?f:a;return v.test(r(g))}return Xp=m,Xp}var Jp,fS;function zK(){if(fS)return Jp;fS=1;function e(t,n){return t?.[n]}return Jp=e,Jp}var Zp,hS;function Ko(){if(hS)return Zp;hS=1;var e=FK(),t=zK();function n(r,o){var a=t(r,o);return e(a)?a:void 0}return Zp=n,Zp}var ef,mS;function ux(){if(mS)return ef;mS=1;var e=Ko(),t=sr(),n=e(t,"Map");return ef=n,ef}var tf,gS;function Uc(){if(gS)return tf;gS=1;var e=Ko(),t=e(Object,"create");return tf=t,tf}var nf,yS;function BK(){if(yS)return nf;yS=1;var e=Uc();function t(){this.__data__=e?e(null):{},this.size=0}return nf=t,nf}var rf,vS;function $K(){if(vS)return rf;vS=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return rf=e,rf}var of,xS;function HK(){if(xS)return of;xS=1;var e=Uc(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function o(a){var l=this.__data__;if(e){var u=l[a];return u===t?void 0:u}return r.call(l,a)?l[a]:void 0}return of=o,of}var sf,bS;function VK(){if(bS)return sf;bS=1;var e=Uc(),t=Object.prototype,n=t.hasOwnProperty;function r(o){var a=this.__data__;return e?a[o]!==void 0:n.call(a,o)}return sf=r,sf}var af,wS;function UK(){if(wS)return af;wS=1;var e=Uc(),t="__lodash_hash_undefined__";function n(r,o){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&o===void 0?t:o,this}return af=n,af}var lf,_S;function WK(){if(_S)return lf;_S=1;var e=BK(),t=$K(),n=HK(),r=VK(),o=UK();function a(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var p=l[u];this.set(p[0],p[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,lf=a,lf}var cf,SS;function KK(){if(SS)return cf;SS=1;var e=WK(),t=Vc(),n=ux();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return cf=r,cf}var uf,kS;function GK(){if(kS)return uf;kS=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return uf=e,uf}var df,NS;function Wc(){if(NS)return df;NS=1;var e=GK();function t(n,r){var o=n.__data__;return e(r)?o[typeof r=="string"?"string":"hash"]:o.map}return df=t,df}var pf,jS;function YK(){if(jS)return pf;jS=1;var e=Wc();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return pf=t,pf}var ff,ES;function QK(){if(ES)return ff;ES=1;var e=Wc();function t(n){return e(this,n).get(n)}return ff=t,ff}var hf,CS;function XK(){if(CS)return hf;CS=1;var e=Wc();function t(n){return e(this,n).has(n)}return hf=t,hf}var mf,TS;function JK(){if(TS)return mf;TS=1;var e=Wc();function t(n,r){var o=e(this,n),a=o.size;return o.set(n,r),this.size+=o.size==a?0:1,this}return mf=t,mf}var gf,AS;function dx(){if(AS)return gf;AS=1;var e=KK(),t=YK(),n=QK(),r=XK(),o=JK();function a(l){var u=-1,d=l==null?0:l.length;for(this.clear();++u<d;){var p=l[u];this.set(p[0],p[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=o,gf=a,gf}var yf,PS;function ZK(){if(PS)return yf;PS=1;var e=Vc(),t=ux(),n=dx(),r=200;function o(a,l){var u=this.__data__;if(u instanceof e){var d=u.__data__;if(!t||d.length<r-1)return d.push([a,l]),this.size=++u.size,this;u=this.__data__=new n(d)}return u.set(a,l),this.size=u.size,this}return yf=o,yf}var vf,IS;function Kc(){if(IS)return vf;IS=1;var e=Vc(),t=PK(),n=IK(),r=RK(),o=OK(),a=ZK();function l(u){var d=this.__data__=new e(u);this.size=d.size}return l.prototype.clear=t,l.prototype.delete=n,l.prototype.get=r,l.prototype.has=o,l.prototype.set=a,vf=l,vf}var xf,RS;function px(){if(RS)return xf;RS=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o&&n(t[r],r,t)!==!1;);return t}return xf=e,xf}var bf,OS;function CP(){if(OS)return bf;OS=1;var e=Ko(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return bf=t,bf}var wf,MS;function Gc(){if(MS)return wf;MS=1;var e=CP();function t(n,r,o){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o}return wf=t,wf}var _f,DS;function Yc(){if(DS)return _f;DS=1;var e=Gc(),t=Qi(),n=Object.prototype,r=n.hasOwnProperty;function o(a,l,u){var d=a[l];(!(r.call(a,l)&&t(d,u))||u===void 0&&!(l in a))&&e(a,l,u)}return _f=o,_f}var Sf,LS;function ja(){if(LS)return Sf;LS=1;var e=Yc(),t=Gc();function n(r,o,a,l){var u=!a;a||(a={});for(var d=-1,p=o.length;++d<p;){var f=o[d],m=l?l(a[f],r[f],f,a,r):void 0;m===void 0&&(m=r[f]),u?t(a,f,m):e(a,f,m)}return a}return Sf=n,Sf}var kf,qS;function eG(){if(qS)return kf;qS=1;function e(t,n){for(var r=-1,o=Array(t);++r<t;)o[r]=n(r);return o}return kf=e,kf}var Nf,FS;function vr(){if(FS)return Nf;FS=1;function e(t){return t!=null&&typeof t=="object"}return Nf=e,Nf}var jf,zS;function tG(){if(zS)return jf;zS=1;var e=Wo(),t=vr(),n="[object Arguments]";function r(o){return t(o)&&e(o)==n}return jf=r,jf}var Ef,BS;function Ea(){if(BS)return Ef;BS=1;var e=tG(),t=vr(),n=Object.prototype,r=n.hasOwnProperty,o=n.propertyIsEnumerable,a=e((function(){return arguments})())?e:function(l){return t(l)&&r.call(l,"callee")&&!o.call(l,"callee")};return Ef=a,Ef}var Cf,$S;function Tt(){if($S)return Cf;$S=1;var e=Array.isArray;return Cf=e,Cf}var Ws={exports:{}},Tf,HS;function nG(){if(HS)return Tf;HS=1;function e(){return!1}return Tf=e,Tf}Ws.exports;var VS;function Ji(){return VS||(VS=1,(function(e,t){var n=sr(),r=nG(),o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,l=a&&a.exports===o,u=l?n.Buffer:void 0,d=u?u.isBuffer:void 0,p=d||r;e.exports=p})(Ws,Ws.exports)),Ws.exports}var Af,US;function Qc(){if(US)return Af;US=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,o){var a=typeof r;return o=o??e,!!o&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<o}return Af=n,Af}var Pf,WS;function fx(){if(WS)return Pf;WS=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Pf=t,Pf}var If,KS;function rG(){if(KS)return If;KS=1;var e=Wo(),t=fx(),n=vr(),r="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Function]",p="[object Map]",f="[object Number]",m="[object Object]",g="[object RegExp]",v="[object Set]",b="[object String]",x="[object WeakMap]",_="[object ArrayBuffer]",k="[object DataView]",S="[object Float32Array]",N="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",C="[object Int32Array]",P="[object Uint8Array]",O="[object Uint8ClampedArray]",I="[object Uint16Array]",H="[object Uint32Array]",D={};D[S]=D[N]=D[T]=D[A]=D[C]=D[P]=D[O]=D[I]=D[H]=!0,D[r]=D[o]=D[_]=D[a]=D[k]=D[l]=D[u]=D[d]=D[p]=D[f]=D[m]=D[g]=D[v]=D[b]=D[x]=!1;function z(W){return n(W)&&t(W.length)&&!!D[e(W)]}return If=z,If}var Rf,GS;function Xc(){if(GS)return Rf;GS=1;function e(t){return function(n){return t(n)}}return Rf=e,Rf}var Ks={exports:{}};Ks.exports;var YS;function hx(){return YS||(YS=1,(function(e,t){var n=jP(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===r,l=a&&n.process,u=(function(){try{var d=o&&o.require&&o.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}})();e.exports=u})(Ks,Ks.exports)),Ks.exports}var Of,QS;function Ca(){if(QS)return Of;QS=1;var e=rG(),t=Xc(),n=hx(),r=n&&n.isTypedArray,o=r?t(r):e;return Of=o,Of}var Mf,XS;function TP(){if(XS)return Mf;XS=1;var e=eG(),t=Ea(),n=Tt(),r=Ji(),o=Qc(),a=Ca(),l=Object.prototype,u=l.hasOwnProperty;function d(p,f){var m=n(p),g=!m&&t(p),v=!m&&!g&&r(p),b=!m&&!g&&!v&&a(p),x=m||g||v||b,_=x?e(p.length,String):[],k=_.length;for(var S in p)(f||u.call(p,S))&&!(x&&(S=="length"||v&&(S=="offset"||S=="parent")||b&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||o(S,k)))&&_.push(S);return _}return Mf=d,Mf}var Df,JS;function Jc(){if(JS)return Df;JS=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,o=typeof r=="function"&&r.prototype||e;return n===o}return Df=t,Df}var Lf,ZS;function AP(){if(ZS)return Lf;ZS=1;function e(t,n){return function(r){return t(n(r))}}return Lf=e,Lf}var qf,ek;function oG(){if(ek)return qf;ek=1;var e=AP(),t=e(Object.keys,Object);return qf=t,qf}var Ff,tk;function mx(){if(tk)return Ff;tk=1;var e=Jc(),t=oG(),n=Object.prototype,r=n.hasOwnProperty;function o(a){if(!e(a))return t(a);var l=[];for(var u in Object(a))r.call(a,u)&&u!="constructor"&&l.push(u);return l}return Ff=o,Ff}var zf,nk;function Mr(){if(nk)return zf;nk=1;var e=Na(),t=fx();function n(r){return r!=null&&t(r.length)&&!e(r)}return zf=n,zf}var Bf,rk;function go(){if(rk)return Bf;rk=1;var e=TP(),t=mx(),n=Mr();function r(o){return n(o)?e(o):t(o)}return Bf=r,Bf}var $f,ok;function iG(){if(ok)return $f;ok=1;var e=ja(),t=go();function n(r,o){return r&&e(o,t(o),r)}return $f=n,$f}var Hf,ik;function sG(){if(ik)return Hf;ik=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return Hf=e,Hf}var Vf,sk;function aG(){if(sk)return Vf;sk=1;var e=Bn(),t=Jc(),n=sG(),r=Object.prototype,o=r.hasOwnProperty;function a(l){if(!e(l))return n(l);var u=t(l),d=[];for(var p in l)p=="constructor"&&(u||!o.call(l,p))||d.push(p);return d}return Vf=a,Vf}var Uf,ak;function Go(){if(ak)return Uf;ak=1;var e=TP(),t=aG(),n=Mr();function r(o){return n(o)?e(o,!0):t(o)}return Uf=r,Uf}var Wf,lk;function lG(){if(lk)return Wf;lk=1;var e=ja(),t=Go();function n(r,o){return r&&e(o,t(o),r)}return Wf=n,Wf}var Gs={exports:{}};Gs.exports;var ck;function PP(){return ck||(ck=1,(function(e,t){var n=sr(),r=t&&!t.nodeType&&t,o=r&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===r,l=a?n.Buffer:void 0,u=l?l.allocUnsafe:void 0;function d(p,f){if(f)return p.slice();var m=p.length,g=u?u(m):new p.constructor(m);return p.copy(g),g}e.exports=d})(Gs,Gs.exports)),Gs.exports}var Kf,uk;function IP(){if(uk)return Kf;uk=1;function e(t,n){var r=-1,o=t.length;for(n||(n=Array(o));++r<o;)n[r]=t[r];return n}return Kf=e,Kf}var Gf,dk;function RP(){if(dk)return Gf;dk=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=0,l=[];++r<o;){var u=t[r];n(u,r,t)&&(l[a++]=u)}return l}return Gf=e,Gf}var Yf,pk;function OP(){if(pk)return Yf;pk=1;function e(){return[]}return Yf=e,Yf}var Qf,fk;function gx(){if(fk)return Qf;fk=1;var e=RP(),t=OP(),n=Object.prototype,r=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(l){return l==null?[]:(l=Object(l),e(o(l),function(u){return r.call(l,u)}))}:t;return Qf=a,Qf}var Xf,hk;function cG(){if(hk)return Xf;hk=1;var e=ja(),t=gx();function n(r,o){return e(r,t(r),o)}return Xf=n,Xf}var Jf,mk;function yx(){if(mk)return Jf;mk=1;function e(t,n){for(var r=-1,o=n.length,a=t.length;++r<o;)t[a+r]=n[r];return t}return Jf=e,Jf}var Zf,gk;function Zc(){if(gk)return Zf;gk=1;var e=AP(),t=e(Object.getPrototypeOf,Object);return Zf=t,Zf}var eh,yk;function MP(){if(yk)return eh;yk=1;var e=yx(),t=Zc(),n=gx(),r=OP(),o=Object.getOwnPropertySymbols,a=o?function(l){for(var u=[];l;)e(u,n(l)),l=t(l);return u}:r;return eh=a,eh}var th,vk;function uG(){if(vk)return th;vk=1;var e=ja(),t=MP();function n(r,o){return e(r,t(r),o)}return th=n,th}var nh,xk;function DP(){if(xk)return nh;xk=1;var e=yx(),t=Tt();function n(r,o,a){var l=o(r);return t(r)?l:e(l,a(r))}return nh=n,nh}var rh,bk;function LP(){if(bk)return rh;bk=1;var e=DP(),t=gx(),n=go();function r(o){return e(o,n,t)}return rh=r,rh}var oh,wk;function dG(){if(wk)return oh;wk=1;var e=DP(),t=MP(),n=Go();function r(o){return e(o,n,t)}return oh=r,oh}var ih,_k;function pG(){if(_k)return ih;_k=1;var e=Ko(),t=sr(),n=e(t,"DataView");return ih=n,ih}var sh,Sk;function fG(){if(Sk)return sh;Sk=1;var e=Ko(),t=sr(),n=e(t,"Promise");return sh=n,sh}var ah,kk;function qP(){if(kk)return ah;kk=1;var e=Ko(),t=sr(),n=e(t,"Set");return ah=n,ah}var lh,Nk;function hG(){if(Nk)return lh;Nk=1;var e=Ko(),t=sr(),n=e(t,"WeakMap");return lh=n,lh}var ch,jk;function Zi(){if(jk)return ch;jk=1;var e=pG(),t=ux(),n=fG(),r=qP(),o=hG(),a=Wo(),l=EP(),u="[object Map]",d="[object Object]",p="[object Promise]",f="[object Set]",m="[object WeakMap]",g="[object DataView]",v=l(e),b=l(t),x=l(n),_=l(r),k=l(o),S=a;return(e&&S(new e(new ArrayBuffer(1)))!=g||t&&S(new t)!=u||n&&S(n.resolve())!=p||r&&S(new r)!=f||o&&S(new o)!=m)&&(S=function(N){var T=a(N),A=T==d?N.constructor:void 0,C=A?l(A):"";if(C)switch(C){case v:return g;case b:return u;case x:return p;case _:return f;case k:return m}return T}),ch=S,ch}var uh,Ek;function mG(){if(Ek)return uh;Ek=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var o=r.length,a=new r.constructor(o);return o&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return uh=n,uh}var dh,Ck;function FP(){if(Ck)return dh;Ck=1;var e=sr(),t=e.Uint8Array;return dh=t,dh}var ph,Tk;function vx(){if(Tk)return ph;Tk=1;var e=FP();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return ph=t,ph}var fh,Ak;function gG(){if(Ak)return fh;Ak=1;var e=vx();function t(n,r){var o=r?e(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.byteLength)}return fh=t,fh}var hh,Pk;function yG(){if(Pk)return hh;Pk=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return hh=t,hh}var mh,Ik;function vG(){if(Ik)return mh;Ik=1;var e=Xi(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(o){return n?Object(n.call(o)):{}}return mh=r,mh}var gh,Rk;function zP(){if(Rk)return gh;Rk=1;var e=vx();function t(n,r){var o=r?e(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.length)}return gh=t,gh}var yh,Ok;function xG(){if(Ok)return yh;Ok=1;var e=vx(),t=gG(),n=yG(),r=vG(),o=zP(),a="[object Boolean]",l="[object Date]",u="[object Map]",d="[object Number]",p="[object RegExp]",f="[object Set]",m="[object String]",g="[object Symbol]",v="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",_="[object Float64Array]",k="[object Int8Array]",S="[object Int16Array]",N="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",C="[object Uint16Array]",P="[object Uint32Array]";function O(I,H,D){var z=I.constructor;switch(H){case v:return e(I);case a:case l:return new z(+I);case b:return t(I,D);case x:case _:case k:case S:case N:case T:case A:case C:case P:return o(I,D);case u:return new z;case d:case m:return new z(I);case p:return n(I);case f:return new z;case g:return r(I)}}return yh=O,yh}var vh,Mk;function BP(){if(Mk)return vh;Mk=1;var e=Bn(),t=Object.create,n=(function(){function r(){}return function(o){if(!e(o))return{};if(t)return t(o);r.prototype=o;var a=new r;return r.prototype=void 0,a}})();return vh=n,vh}var xh,Dk;function $P(){if(Dk)return xh;Dk=1;var e=BP(),t=Zc(),n=Jc();function r(o){return typeof o.constructor=="function"&&!n(o)?e(t(o)):{}}return xh=r,xh}var bh,Lk;function bG(){if(Lk)return bh;Lk=1;var e=Zi(),t=vr(),n="[object Map]";function r(o){return t(o)&&e(o)==n}return bh=r,bh}var wh,qk;function wG(){if(qk)return wh;qk=1;var e=bG(),t=Xc(),n=hx(),r=n&&n.isMap,o=r?t(r):e;return wh=o,wh}var _h,Fk;function _G(){if(Fk)return _h;Fk=1;var e=Zi(),t=vr(),n="[object Set]";function r(o){return t(o)&&e(o)==n}return _h=r,_h}var Sh,zk;function SG(){if(zk)return Sh;zk=1;var e=_G(),t=Xc(),n=hx(),r=n&&n.isSet,o=r?t(r):e;return Sh=o,Sh}var kh,Bk;function HP(){if(Bk)return kh;Bk=1;var e=Kc(),t=px(),n=Yc(),r=iG(),o=lG(),a=PP(),l=IP(),u=cG(),d=uG(),p=LP(),f=dG(),m=Zi(),g=mG(),v=xG(),b=$P(),x=Tt(),_=Ji(),k=wG(),S=Bn(),N=SG(),T=go(),A=Go(),C=1,P=2,O=4,I="[object Arguments]",H="[object Array]",D="[object Boolean]",z="[object Date]",W="[object Error]",L="[object Function]",q="[object GeneratorFunction]",$="[object Map]",G="[object Number]",U="[object Object]",X="[object RegExp]",R="[object Set]",B="[object String]",Y="[object Symbol]",F="[object WeakMap]",K="[object ArrayBuffer]",J="[object DataView]",te="[object Float32Array]",re="[object Float64Array]",V="[object Int8Array]",ne="[object Int16Array]",de="[object Int32Array]",ve="[object Uint8Array]",le="[object Uint8ClampedArray]",ge="[object Uint16Array]",_e="[object Uint32Array]",we={};we[I]=we[H]=we[K]=we[J]=we[D]=we[z]=we[te]=we[re]=we[V]=we[ne]=we[de]=we[$]=we[G]=we[U]=we[X]=we[R]=we[B]=we[Y]=we[ve]=we[le]=we[ge]=we[_e]=!0,we[W]=we[L]=we[F]=!1;function Ce(Se,Qe,Oe,he,Ee,Ae){var Ve,lt=Qe&C,ot=Qe&P,ae=Qe&O;if(Oe&&(Ve=Ee?Oe(Se,he,Ee,Ae):Oe(Se)),Ve!==void 0)return Ve;if(!S(Se))return Se;var ce=x(Se);if(ce){if(Ve=g(Se),!lt)return l(Se,Ve)}else{var ke=m(Se),ze=ke==L||ke==q;if(_(Se))return a(Se,lt);if(ke==U||ke==I||ze&&!Ee){if(Ve=ot||ze?{}:b(Se),!lt)return ot?d(Se,o(Ve,Se)):u(Se,r(Ve,Se))}else{if(!we[ke])return Ee?Se:{};Ve=v(Se,ke,lt)}}Ae||(Ae=new e);var Le=Ae.get(Se);if(Le)return Le;Ae.set(Se,Ve),N(Se)?Se.forEach(function(et){Ve.add(Ce(et,Qe,Oe,et,Se,Ae))}):k(Se)&&Se.forEach(function(et,yt){Ve.set(yt,Ce(et,Qe,Oe,yt,Se,Ae))});var nt=ae?ot?f:p:ot?A:T,At=ce?void 0:nt(Se);return t(At||Se,function(et,yt){At&&(yt=et,et=Se[yt]),n(Ve,yt,Ce(et,Qe,Oe,yt,Se,Ae))}),Ve}return kh=Ce,kh}var Nh,$k;function kG(){if($k)return Nh;$k=1;var e=HP(),t=4;function n(r){return e(r,t)}return Nh=n,Nh}var jh,Hk;function xx(){if(Hk)return jh;Hk=1;function e(t){return function(){return t}}return jh=e,jh}var Eh,Vk;function NG(){if(Vk)return Eh;Vk=1;function e(t){return function(n,r,o){for(var a=-1,l=Object(n),u=o(n),d=u.length;d--;){var p=u[t?d:++a];if(r(l[p],p,l)===!1)break}return n}}return Eh=e,Eh}var Ch,Uk;function bx(){if(Uk)return Ch;Uk=1;var e=NG(),t=e();return Ch=t,Ch}var Th,Wk;function wx(){if(Wk)return Th;Wk=1;var e=bx(),t=go();function n(r,o){return r&&e(r,o,t)}return Th=n,Th}var Ah,Kk;function jG(){if(Kk)return Ah;Kk=1;var e=Mr();function t(n,r){return function(o,a){if(o==null)return o;if(!e(o))return n(o,a);for(var l=o.length,u=r?l:-1,d=Object(o);(r?u--:++u<l)&&a(d[u],u,d)!==!1;);return o}}return Ah=t,Ah}var Ph,Gk;function eu(){if(Gk)return Ph;Gk=1;var e=wx(),t=jG(),n=t(e);return Ph=n,Ph}var Ih,Yk;function Yo(){if(Yk)return Ih;Yk=1;function e(t){return t}return Ih=e,Ih}var Rh,Qk;function VP(){if(Qk)return Rh;Qk=1;var e=Yo();function t(n){return typeof n=="function"?n:e}return Rh=t,Rh}var Oh,Xk;function UP(){if(Xk)return Oh;Xk=1;var e=px(),t=eu(),n=VP(),r=Tt();function o(a,l){var u=r(a)?e:t;return u(a,n(l))}return Oh=o,Oh}var Mh,Jk;function WP(){return Jk||(Jk=1,Mh=UP()),Mh}var Dh,Zk;function EG(){if(Zk)return Dh;Zk=1;var e=eu();function t(n,r){var o=[];return e(n,function(a,l,u){r(a,l,u)&&o.push(a)}),o}return Dh=t,Dh}var Lh,eN;function CG(){if(eN)return Lh;eN=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Lh=t,Lh}var qh,tN;function TG(){if(tN)return qh;tN=1;function e(t){return this.__data__.has(t)}return qh=e,qh}var Fh,nN;function KP(){if(nN)return Fh;nN=1;var e=dx(),t=CG(),n=TG();function r(o){var a=-1,l=o==null?0:o.length;for(this.__data__=new e;++a<l;)this.add(o[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,Fh=r,Fh}var zh,rN;function AG(){if(rN)return zh;rN=1;function e(t,n){for(var r=-1,o=t==null?0:t.length;++r<o;)if(n(t[r],r,t))return!0;return!1}return zh=e,zh}var Bh,oN;function GP(){if(oN)return Bh;oN=1;function e(t,n){return t.has(n)}return Bh=e,Bh}var $h,iN;function YP(){if(iN)return $h;iN=1;var e=KP(),t=AG(),n=GP(),r=1,o=2;function a(l,u,d,p,f,m){var g=d&r,v=l.length,b=u.length;if(v!=b&&!(g&&b>v))return!1;var x=m.get(l),_=m.get(u);if(x&&_)return x==u&&_==l;var k=-1,S=!0,N=d&o?new e:void 0;for(m.set(l,u),m.set(u,l);++k<v;){var T=l[k],A=u[k];if(p)var C=g?p(A,T,k,u,l,m):p(T,A,k,l,u,m);if(C!==void 0){if(C)continue;S=!1;break}if(N){if(!t(u,function(P,O){if(!n(N,O)&&(T===P||f(T,P,d,p,m)))return N.push(O)})){S=!1;break}}else if(!(T===A||f(T,A,d,p,m))){S=!1;break}}return m.delete(l),m.delete(u),S}return $h=a,$h}var Hh,sN;function PG(){if(sN)return Hh;sN=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o,a){r[++n]=[a,o]}),r}return Hh=e,Hh}var Vh,aN;function _x(){if(aN)return Vh;aN=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(o){r[++n]=o}),r}return Vh=e,Vh}var Uh,lN;function IG(){if(lN)return Uh;lN=1;var e=Xi(),t=FP(),n=Qi(),r=YP(),o=PG(),a=_x(),l=1,u=2,d="[object Boolean]",p="[object Date]",f="[object Error]",m="[object Map]",g="[object Number]",v="[object RegExp]",b="[object Set]",x="[object String]",_="[object Symbol]",k="[object ArrayBuffer]",S="[object DataView]",N=e?e.prototype:void 0,T=N?N.valueOf:void 0;function A(C,P,O,I,H,D,z){switch(O){case S:if(C.byteLength!=P.byteLength||C.byteOffset!=P.byteOffset)return!1;C=C.buffer,P=P.buffer;case k:return!(C.byteLength!=P.byteLength||!D(new t(C),new t(P)));case d:case p:case g:return n(+C,+P);case f:return C.name==P.name&&C.message==P.message;case v:case x:return C==P+"";case m:var W=o;case b:var L=I&l;if(W||(W=a),C.size!=P.size&&!L)return!1;var q=z.get(C);if(q)return q==P;I|=u,z.set(C,P);var $=r(W(C),W(P),I,H,D,z);return z.delete(C),$;case _:if(T)return T.call(C)==T.call(P)}return!1}return Uh=A,Uh}var Wh,cN;function RG(){if(cN)return Wh;cN=1;var e=LP(),t=1,n=Object.prototype,r=n.hasOwnProperty;function o(a,l,u,d,p,f){var m=u&t,g=e(a),v=g.length,b=e(l),x=b.length;if(v!=x&&!m)return!1;for(var _=v;_--;){var k=g[_];if(!(m?k in l:r.call(l,k)))return!1}var S=f.get(a),N=f.get(l);if(S&&N)return S==l&&N==a;var T=!0;f.set(a,l),f.set(l,a);for(var A=m;++_<v;){k=g[_];var C=a[k],P=l[k];if(d)var O=m?d(P,C,k,l,a,f):d(C,P,k,a,l,f);if(!(O===void 0?C===P||p(C,P,u,d,f):O)){T=!1;break}A||(A=k=="constructor")}if(T&&!A){var I=a.constructor,H=l.constructor;I!=H&&"constructor"in a&&"constructor"in l&&!(typeof I=="function"&&I instanceof I&&typeof H=="function"&&H instanceof H)&&(T=!1)}return f.delete(a),f.delete(l),T}return Wh=o,Wh}var Kh,uN;function OG(){if(uN)return Kh;uN=1;var e=Kc(),t=YP(),n=IG(),r=RG(),o=Zi(),a=Tt(),l=Ji(),u=Ca(),d=1,p="[object Arguments]",f="[object Array]",m="[object Object]",g=Object.prototype,v=g.hasOwnProperty;function b(x,_,k,S,N,T){var A=a(x),C=a(_),P=A?f:o(x),O=C?f:o(_);P=P==p?m:P,O=O==p?m:O;var I=P==m,H=O==m,D=P==O;if(D&&l(x)){if(!l(_))return!1;A=!0,I=!1}if(D&&!I)return T||(T=new e),A||u(x)?t(x,_,k,S,N,T):n(x,_,P,k,S,N,T);if(!(k&d)){var z=I&&v.call(x,"__wrapped__"),W=H&&v.call(_,"__wrapped__");if(z||W){var L=z?x.value():x,q=W?_.value():_;return T||(T=new e),N(L,q,k,S,T)}}return D?(T||(T=new e),r(x,_,k,S,N,T)):!1}return Kh=b,Kh}var Gh,dN;function QP(){if(dN)return Gh;dN=1;var e=OG(),t=vr();function n(r,o,a,l,u){return r===o?!0:r==null||o==null||!t(r)&&!t(o)?r!==r&&o!==o:e(r,o,a,l,n,u)}return Gh=n,Gh}var Yh,pN;function MG(){if(pN)return Yh;pN=1;var e=Kc(),t=QP(),n=1,r=2;function o(a,l,u,d){var p=u.length,f=p,m=!d;if(a==null)return!f;for(a=Object(a);p--;){var g=u[p];if(m&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++p<f;){g=u[p];var v=g[0],b=a[v],x=g[1];if(m&&g[2]){if(b===void 0&&!(v in a))return!1}else{var _=new e;if(d)var k=d(b,x,v,a,l,_);if(!(k===void 0?t(x,b,n|r,d,_):k))return!1}}return!0}return Yh=o,Yh}var Qh,fN;function XP(){if(fN)return Qh;fN=1;var e=Bn();function t(n){return n===n&&!e(n)}return Qh=t,Qh}var Xh,hN;function DG(){if(hN)return Xh;hN=1;var e=XP(),t=go();function n(r){for(var o=t(r),a=o.length;a--;){var l=o[a],u=r[l];o[a]=[l,u,e(u)]}return o}return Xh=n,Xh}var Jh,mN;function JP(){if(mN)return Jh;mN=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Jh=e,Jh}var Zh,gN;function LG(){if(gN)return Zh;gN=1;var e=MG(),t=DG(),n=JP();function r(o){var a=t(o);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(l){return l===o||e(l,o,a)}}return Zh=r,Zh}var em,yN;function es(){if(yN)return em;yN=1;var e=Wo(),t=vr(),n="[object Symbol]";function r(o){return typeof o=="symbol"||t(o)&&e(o)==n}return em=r,em}var tm,vN;function Sx(){if(vN)return tm;vN=1;var e=Tt(),t=es(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function o(a,l){if(e(a))return!1;var u=typeof a;return u=="number"||u=="symbol"||u=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||l!=null&&a in Object(l)}return tm=o,tm}var nm,xN;function qG(){if(xN)return nm;xN=1;var e=dx(),t="Expected a function";function n(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new TypeError(t);var a=function(){var l=arguments,u=o?o.apply(this,l):l[0],d=a.cache;if(d.has(u))return d.get(u);var p=r.apply(this,l);return a.cache=d.set(u,p)||d,p};return a.cache=new(n.Cache||e),a}return n.Cache=e,nm=n,nm}var rm,bN;function FG(){if(bN)return rm;bN=1;var e=qG(),t=500;function n(r){var o=e(r,function(l){return a.size===t&&a.clear(),l}),a=o.cache;return o}return rm=n,rm}var om,wN;function zG(){if(wN)return om;wN=1;var e=FG(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(t,function(l,u,d,p){a.push(d?p.replace(n,"$1"):u||l)}),a});return om=r,om}var im,_N;function tu(){if(_N)return im;_N=1;function e(t,n){for(var r=-1,o=t==null?0:t.length,a=Array(o);++r<o;)a[r]=n(t[r],r,t);return a}return im=e,im}var sm,SN;function BG(){if(SN)return sm;SN=1;var e=Xi(),t=tu(),n=Tt(),r=es(),o=e?e.prototype:void 0,a=o?o.toString:void 0;function l(u){if(typeof u=="string")return u;if(n(u))return t(u,l)+"";if(r(u))return a?a.call(u):"";var d=u+"";return d=="0"&&1/u==-1/0?"-0":d}return sm=l,sm}var am,kN;function ZP(){if(kN)return am;kN=1;var e=BG();function t(n){return n==null?"":e(n)}return am=t,am}var lm,NN;function nu(){if(NN)return lm;NN=1;var e=Tt(),t=Sx(),n=zG(),r=ZP();function o(a,l){return e(a)?a:t(a,l)?[a]:n(r(a))}return lm=o,lm}var cm,jN;function Ta(){if(jN)return cm;jN=1;var e=es();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return cm=t,cm}var um,EN;function ru(){if(EN)return um;EN=1;var e=nu(),t=Ta();function n(r,o){o=e(o,r);for(var a=0,l=o.length;r!=null&&a<l;)r=r[t(o[a++])];return a&&a==l?r:void 0}return um=n,um}var dm,CN;function $G(){if(CN)return dm;CN=1;var e=ru();function t(n,r,o){var a=n==null?void 0:e(n,r);return a===void 0?o:a}return dm=t,dm}var pm,TN;function HG(){if(TN)return pm;TN=1;function e(t,n){return t!=null&&n in Object(t)}return pm=e,pm}var fm,AN;function e2(){if(AN)return fm;AN=1;var e=nu(),t=Ea(),n=Tt(),r=Qc(),o=fx(),a=Ta();function l(u,d,p){d=e(d,u);for(var f=-1,m=d.length,g=!1;++f<m;){var v=a(d[f]);if(!(g=u!=null&&p(u,v)))break;u=u[v]}return g||++f!=m?g:(m=u==null?0:u.length,!!m&&o(m)&&r(v,m)&&(n(u)||t(u)))}return fm=l,fm}var hm,PN;function t2(){if(PN)return hm;PN=1;var e=HG(),t=e2();function n(r,o){return r!=null&&t(r,o,e)}return hm=n,hm}var mm,IN;function VG(){if(IN)return mm;IN=1;var e=QP(),t=$G(),n=t2(),r=Sx(),o=XP(),a=JP(),l=Ta(),u=1,d=2;function p(f,m){return r(f)&&o(m)?a(l(f),m):function(g){var v=t(g,f);return v===void 0&&v===m?n(g,f):e(m,v,u|d)}}return mm=p,mm}var gm,RN;function n2(){if(RN)return gm;RN=1;function e(t){return function(n){return n?.[t]}}return gm=e,gm}var ym,ON;function UG(){if(ON)return ym;ON=1;var e=ru();function t(n){return function(r){return e(r,n)}}return ym=t,ym}var vm,MN;function WG(){if(MN)return vm;MN=1;var e=n2(),t=UG(),n=Sx(),r=Ta();function o(a){return n(a)?e(r(a)):t(a)}return vm=o,vm}var xm,DN;function Dr(){if(DN)return xm;DN=1;var e=LG(),t=VG(),n=Yo(),r=Tt(),o=WG();function a(l){return typeof l=="function"?l:l==null?n:typeof l=="object"?r(l)?t(l[0],l[1]):e(l):o(l)}return xm=a,xm}var bm,LN;function r2(){if(LN)return bm;LN=1;var e=RP(),t=EG(),n=Dr(),r=Tt();function o(a,l){var u=r(a)?e:t;return u(a,n(l,3))}return bm=o,bm}var wm,qN;function KG(){if(qN)return wm;qN=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,o){return r!=null&&t.call(r,o)}return wm=n,wm}var _m,FN;function o2(){if(FN)return _m;FN=1;var e=KG(),t=e2();function n(r,o){return r!=null&&t(r,o,e)}return _m=n,_m}var Sm,zN;function GG(){if(zN)return Sm;zN=1;var e=mx(),t=Zi(),n=Ea(),r=Tt(),o=Mr(),a=Ji(),l=Jc(),u=Ca(),d="[object Map]",p="[object Set]",f=Object.prototype,m=f.hasOwnProperty;function g(v){if(v==null)return!0;if(o(v)&&(r(v)||typeof v=="string"||typeof v.splice=="function"||a(v)||u(v)||n(v)))return!v.length;var b=t(v);if(b==d||b==p)return!v.size;if(l(v))return!e(v).length;for(var x in v)if(m.call(v,x))return!1;return!0}return Sm=g,Sm}var km,BN;function i2(){if(BN)return km;BN=1;function e(t){return t===void 0}return km=e,km}var Nm,$N;function s2(){if($N)return Nm;$N=1;var e=eu(),t=Mr();function n(r,o){var a=-1,l=t(r)?Array(r.length):[];return e(r,function(u,d,p){l[++a]=o(u,d,p)}),l}return Nm=n,Nm}var jm,HN;function a2(){if(HN)return jm;HN=1;var e=tu(),t=Dr(),n=s2(),r=Tt();function o(a,l){var u=r(a)?e:n;return u(a,t(l,3))}return jm=o,jm}var Em,VN;function YG(){if(VN)return Em;VN=1;function e(t,n,r,o){var a=-1,l=t==null?0:t.length;for(o&&l&&(r=t[++a]);++a<l;)r=n(r,t[a],a,t);return r}return Em=e,Em}var Cm,UN;function QG(){if(UN)return Cm;UN=1;function e(t,n,r,o,a){return a(t,function(l,u,d){r=o?(o=!1,l):n(r,l,u,d)}),r}return Cm=e,Cm}var Tm,WN;function l2(){if(WN)return Tm;WN=1;var e=YG(),t=eu(),n=Dr(),r=QG(),o=Tt();function a(l,u,d){var p=o(l)?e:r,f=arguments.length<3;return p(l,n(u,4),d,f,t)}return Tm=a,Tm}var Am,KN;function XG(){if(KN)return Am;KN=1;var e=Wo(),t=Tt(),n=vr(),r="[object String]";function o(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return Am=o,Am}var Pm,GN;function JG(){if(GN)return Pm;GN=1;var e=n2(),t=e("length");return Pm=t,Pm}var Im,YN;function ZG(){if(YN)return Im;YN=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",l="\\u200d",u=RegExp("["+l+e+o+a+"]");function d(p){return u.test(p)}return Im=d,Im}var Rm,QN;function e9(){if(QN)return Rm;QN=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=t+n+r,a="\\ufe0e\\ufe0f",l="["+e+"]",u="["+o+"]",d="\\ud83c[\\udffb-\\udfff]",p="(?:"+u+"|"+d+")",f="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",b=p+"?",x="["+a+"]?",_="(?:"+v+"(?:"+[f,m,g].join("|")+")"+x+b+")*",k=x+b+_,S="(?:"+[f+u+"?",u,m,g,l].join("|")+")",N=RegExp(d+"(?="+d+")|"+S+k,"g");function T(A){for(var C=N.lastIndex=0;N.test(A);)++C;return C}return Rm=T,Rm}var Om,XN;function t9(){if(XN)return Om;XN=1;var e=JG(),t=ZG(),n=e9();function r(o){return t(o)?n(o):e(o)}return Om=r,Om}var Mm,JN;function n9(){if(JN)return Mm;JN=1;var e=mx(),t=Zi(),n=Mr(),r=XG(),o=t9(),a="[object Map]",l="[object Set]";function u(d){if(d==null)return 0;if(n(d))return r(d)?o(d):d.length;var p=t(d);return p==a||p==l?d.size:e(d).length}return Mm=u,Mm}var Dm,ZN;function r9(){if(ZN)return Dm;ZN=1;var e=px(),t=BP(),n=wx(),r=Dr(),o=Zc(),a=Tt(),l=Ji(),u=Na(),d=Bn(),p=Ca();function f(m,g,v){var b=a(m),x=b||l(m)||p(m);if(g=r(g,4),v==null){var _=m&&m.constructor;x?v=b?new _:[]:d(m)?v=u(_)?t(o(m)):{}:v={}}return(x?e:n)(m,function(k,S,N){return g(v,k,S,N)}),v}return Dm=f,Dm}var Lm,ej;function o9(){if(ej)return Lm;ej=1;var e=Xi(),t=Ea(),n=Tt(),r=e?e.isConcatSpreadable:void 0;function o(a){return n(a)||t(a)||!!(r&&a&&a[r])}return Lm=o,Lm}var qm,tj;function kx(){if(tj)return qm;tj=1;var e=yx(),t=o9();function n(r,o,a,l,u){var d=-1,p=r.length;for(a||(a=t),u||(u=[]);++d<p;){var f=r[d];o>0&&a(f)?o>1?n(f,o-1,a,l,u):e(u,f):l||(u[u.length]=f)}return u}return qm=n,qm}var Fm,nj;function i9(){if(nj)return Fm;nj=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return Fm=e,Fm}var zm,rj;function c2(){if(rj)return zm;rj=1;var e=i9(),t=Math.max;function n(r,o,a){return o=t(o===void 0?r.length-1:o,0),function(){for(var l=arguments,u=-1,d=t(l.length-o,0),p=Array(d);++u<d;)p[u]=l[o+u];u=-1;for(var f=Array(o+1);++u<o;)f[u]=l[u];return f[o]=a(p),e(r,this,f)}}return zm=n,zm}var Bm,oj;function s9(){if(oj)return Bm;oj=1;var e=xx(),t=CP(),n=Yo(),r=t?function(o,a){return t(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return Bm=r,Bm}var $m,ij;function a9(){if(ij)return $m;ij=1;var e=800,t=16,n=Date.now;function r(o){var a=0,l=0;return function(){var u=n(),d=t-(u-l);if(l=u,d>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return $m=r,$m}var Hm,sj;function u2(){if(sj)return Hm;sj=1;var e=s9(),t=a9(),n=t(e);return Hm=n,Hm}var Vm,aj;function ou(){if(aj)return Vm;aj=1;var e=Yo(),t=c2(),n=u2();function r(o,a){return n(t(o,a,e),o+"")}return Vm=r,Vm}var Um,lj;function d2(){if(lj)return Um;lj=1;function e(t,n,r,o){for(var a=t.length,l=r+(o?1:-1);o?l--:++l<a;)if(n(t[l],l,t))return l;return-1}return Um=e,Um}var Wm,cj;function l9(){if(cj)return Wm;cj=1;function e(t){return t!==t}return Wm=e,Wm}var Km,uj;function c9(){if(uj)return Km;uj=1;function e(t,n,r){for(var o=r-1,a=t.length;++o<a;)if(t[o]===n)return o;return-1}return Km=e,Km}var Gm,dj;function u9(){if(dj)return Gm;dj=1;var e=d2(),t=l9(),n=c9();function r(o,a,l){return a===a?n(o,a,l):e(o,t,l)}return Gm=r,Gm}var Ym,pj;function d9(){if(pj)return Ym;pj=1;var e=u9();function t(n,r){var o=n==null?0:n.length;return!!o&&e(n,r,0)>-1}return Ym=t,Ym}var Qm,fj;function p9(){if(fj)return Qm;fj=1;function e(t,n,r){for(var o=-1,a=t==null?0:t.length;++o<a;)if(r(n,t[o]))return!0;return!1}return Qm=e,Qm}var Xm,hj;function f9(){if(hj)return Xm;hj=1;function e(){}return Xm=e,Xm}var Jm,mj;function h9(){if(mj)return Jm;mj=1;var e=qP(),t=f9(),n=_x(),r=1/0,o=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return Jm=o,Jm}var Zm,gj;function m9(){if(gj)return Zm;gj=1;var e=KP(),t=d9(),n=p9(),r=GP(),o=h9(),a=_x(),l=200;function u(d,p,f){var m=-1,g=t,v=d.length,b=!0,x=[],_=x;if(f)b=!1,g=n;else if(v>=l){var k=p?null:o(d);if(k)return a(k);b=!1,g=r,_=new e}else _=p?[]:x;e:for(;++m<v;){var S=d[m],N=p?p(S):S;if(S=f||S!==0?S:0,b&&N===N){for(var T=_.length;T--;)if(_[T]===N)continue e;p&&_.push(N),x.push(S)}else g(_,N,f)||(_!==x&&_.push(N),x.push(S))}return x}return Zm=u,Zm}var eg,yj;function p2(){if(yj)return eg;yj=1;var e=Mr(),t=vr();function n(r){return t(r)&&e(r)}return eg=n,eg}var tg,vj;function g9(){if(vj)return tg;vj=1;var e=kx(),t=ou(),n=m9(),r=p2(),o=t(function(a){return n(e(a,1,r,!0))});return tg=o,tg}var ng,xj;function y9(){if(xj)return ng;xj=1;var e=tu();function t(n,r){return e(r,function(o){return n[o]})}return ng=t,ng}var rg,bj;function f2(){if(bj)return rg;bj=1;var e=y9(),t=go();function n(r){return r==null?[]:e(r,t(r))}return rg=n,rg}var og,wj;function $n(){if(wj)return og;wj=1;var e;if(typeof cx=="function")try{e={clone:kG(),constant:xx(),each:WP(),filter:r2(),has:o2(),isArray:Tt(),isEmpty:GG(),isFunction:Na(),isUndefined:i2(),keys:go(),map:a2(),reduce:l2(),size:n9(),transform:r9(),union:g9(),values:f2()}}catch{}return e||(e=window._),og=e,og}var ig,_j;function Nx(){if(_j)return ig;_j=1;var e=$n();ig=o;var t="\0",n="\0",r="";function o(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(f){return this._label=f,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(m){return e.isEmpty(f._in[m])})},o.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(m){return e.isEmpty(f._out[m])})},o.prototype.setNodes=function(f,m){var g=arguments,v=this;return e.each(f,function(b){g.length>1?v.setNode(b,m):v.setNode(b)}),this},o.prototype.setNode=function(f,m){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=m),this):(this._nodes[f]=arguments.length>1?m:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=n,this._children[f]={},this._children[n][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},o.prototype.node=function(f){return this._nodes[f]},o.prototype.hasNode=function(f){return e.has(this._nodes,f)},o.prototype.removeNode=function(f){var m=this;if(e.has(this._nodes,f)){var g=function(v){m.removeEdge(m._edgeObjs[v])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(v){m.setParent(v)}),delete this._children[f]),e.each(e.keys(this._in[f]),g),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),g),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},o.prototype.setParent=function(f,m){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(m))m=n;else{m+="";for(var g=m;!e.isUndefined(g);g=this.parent(g))if(g===f)throw new Error("Setting "+m+" as parent of "+f+" would create a cycle");this.setNode(m)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=m,this._children[m][f]=!0,this},o.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},o.prototype.parent=function(f){if(this._isCompound){var m=this._parent[f];if(m!==n)return m}},o.prototype.children=function(f){if(e.isUndefined(f)&&(f=n),this._isCompound){var m=this._children[f];if(m)return e.keys(m)}else{if(f===n)return this.nodes();if(this.hasNode(f))return[]}},o.prototype.predecessors=function(f){var m=this._preds[f];if(m)return e.keys(m)},o.prototype.successors=function(f){var m=this._sucs[f];if(m)return e.keys(m)},o.prototype.neighbors=function(f){var m=this.predecessors(f);if(m)return e.union(m,this.successors(f))},o.prototype.isLeaf=function(f){var m;return this.isDirected()?m=this.successors(f):m=this.neighbors(f),m.length===0},o.prototype.filterNodes=function(f){var m=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});m.setGraph(this.graph());var g=this;e.each(this._nodes,function(x,_){f(_)&&m.setNode(_,x)}),e.each(this._edgeObjs,function(x){m.hasNode(x.v)&&m.hasNode(x.w)&&m.setEdge(x,g.edge(x))});var v={};function b(x){var _=g.parent(x);return _===void 0||m.hasNode(_)?(v[x]=_,_):_ in v?v[_]:b(_)}return this._isCompound&&e.each(m.nodes(),function(x){m.setParent(x,b(x))}),m},o.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(f,m){var g=this,v=arguments;return e.reduce(f,function(b,x){return v.length>1?g.setEdge(b,x,m):g.setEdge(b,x),x}),this},o.prototype.setEdge=function(){var f,m,g,v,b=!1,x=arguments[0];typeof x=="object"&&x!==null&&"v"in x?(f=x.v,m=x.w,g=x.name,arguments.length===2&&(v=arguments[1],b=!0)):(f=x,m=arguments[1],g=arguments[3],arguments.length>2&&(v=arguments[2],b=!0)),f=""+f,m=""+m,e.isUndefined(g)||(g=""+g);var _=u(this._isDirected,f,m,g);if(e.has(this._edgeLabels,_))return b&&(this._edgeLabels[_]=v),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(m),this._edgeLabels[_]=b?v:this._defaultEdgeLabelFn(f,m,g);var k=d(this._isDirected,f,m,g);return f=k.v,m=k.w,Object.freeze(k),this._edgeObjs[_]=k,a(this._preds[m],f),a(this._sucs[f],m),this._in[m][_]=k,this._out[f][_]=k,this._edgeCount++,this},o.prototype.edge=function(f,m,g){var v=arguments.length===1?p(this._isDirected,arguments[0]):u(this._isDirected,f,m,g);return this._edgeLabels[v]},o.prototype.hasEdge=function(f,m,g){var v=arguments.length===1?p(this._isDirected,arguments[0]):u(this._isDirected,f,m,g);return e.has(this._edgeLabels,v)},o.prototype.removeEdge=function(f,m,g){var v=arguments.length===1?p(this._isDirected,arguments[0]):u(this._isDirected,f,m,g),b=this._edgeObjs[v];return b&&(f=b.v,m=b.w,delete this._edgeLabels[v],delete this._edgeObjs[v],l(this._preds[m],f),l(this._sucs[f],m),delete this._in[m][v],delete this._out[f][v],this._edgeCount--),this},o.prototype.inEdges=function(f,m){var g=this._in[f];if(g){var v=e.values(g);return m?e.filter(v,function(b){return b.v===m}):v}},o.prototype.outEdges=function(f,m){var g=this._out[f];if(g){var v=e.values(g);return m?e.filter(v,function(b){return b.w===m}):v}},o.prototype.nodeEdges=function(f,m){var g=this.inEdges(f,m);if(g)return g.concat(this.outEdges(f,m))};function a(f,m){f[m]?f[m]++:f[m]=1}function l(f,m){--f[m]||delete f[m]}function u(f,m,g,v){var b=""+m,x=""+g;if(!f&&b>x){var _=b;b=x,x=_}return b+r+x+r+(e.isUndefined(v)?t:v)}function d(f,m,g,v){var b=""+m,x=""+g;if(!f&&b>x){var _=b;b=x,x=_}var k={v:b,w:x};return v&&(k.name=v),k}function p(f,m){return u(f,m.v,m.w,m.name)}return ig}var sg,Sj;function v9(){return Sj||(Sj=1,sg="2.1.8"),sg}var ag,kj;function x9(){return kj||(kj=1,ag={Graph:Nx(),version:v9()}),ag}var lg,Nj;function b9(){if(Nj)return lg;Nj=1;var e=$n(),t=Nx();lg={write:n,read:a};function n(l){var u={options:{directed:l.isDirected(),multigraph:l.isMultigraph(),compound:l.isCompound()},nodes:r(l),edges:o(l)};return e.isUndefined(l.graph())||(u.value=e.clone(l.graph())),u}function r(l){return e.map(l.nodes(),function(u){var d=l.node(u),p=l.parent(u),f={v:u};return e.isUndefined(d)||(f.value=d),e.isUndefined(p)||(f.parent=p),f})}function o(l){return e.map(l.edges(),function(u){var d=l.edge(u),p={v:u.v,w:u.w};return e.isUndefined(u.name)||(p.name=u.name),e.isUndefined(d)||(p.value=d),p})}function a(l){var u=new t(l.options).setGraph(l.value);return e.each(l.nodes,function(d){u.setNode(d.v,d.value),d.parent&&u.setParent(d.v,d.parent)}),e.each(l.edges,function(d){u.setEdge({v:d.v,w:d.w,name:d.name},d.value)}),u}return lg}var cg,jj;function w9(){if(jj)return cg;jj=1;var e=$n();cg=t;function t(n){var r={},o=[],a;function l(u){e.has(r,u)||(r[u]=!0,a.push(u),e.each(n.successors(u),l),e.each(n.predecessors(u),l))}return e.each(n.nodes(),function(u){a=[],l(u),a.length&&o.push(a)}),o}return cg}var ug,Ej;function h2(){if(Ej)return ug;Ej=1;var e=$n();ug=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!e.has(o,n)){var a=this._arr,l=a.length;return o[n]=l,a.push({key:n,priority:r}),this._decrease(l),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},t.prototype._heapify=function(n){var r=this._arr,o=2*n,a=o+1,l=n;o<r.length&&(l=r[o].priority<r[l].priority?o:l,a<r.length&&(l=r[a].priority<r[l].priority?a:l),l!==n&&(this._swap(n,l),this._heapify(l)))},t.prototype._decrease=function(n){for(var r=this._arr,o=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<o));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var o=this._arr,a=this._keyIndices,l=o[n],u=o[r];o[n]=u,o[r]=l,a[u.key]=n,a[l.key]=r},ug}var dg,Cj;function m2(){if(Cj)return dg;Cj=1;var e=$n(),t=h2();dg=r;var n=e.constant(1);function r(a,l,u,d){return o(a,String(l),u||n,d||function(p){return a.outEdges(p)})}function o(a,l,u,d){var p={},f=new t,m,g,v=function(b){var x=b.v!==m?b.v:b.w,_=p[x],k=u(b),S=g.distance+k;if(k<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+b+" Weight: "+k);S<_.distance&&(_.distance=S,_.predecessor=m,f.decrease(x,S))};for(a.nodes().forEach(function(b){var x=b===l?0:Number.POSITIVE_INFINITY;p[b]={distance:x},f.add(b,x)});f.size()>0&&(m=f.removeMin(),g=p[m],g.distance!==Number.POSITIVE_INFINITY);)d(m).forEach(v);return p}return dg}var pg,Tj;function _9(){if(Tj)return pg;Tj=1;var e=m2(),t=$n();pg=n;function n(r,o,a){return t.transform(r.nodes(),function(l,u){l[u]=e(r,u,o,a)},{})}return pg}var fg,Aj;function g2(){if(Aj)return fg;Aj=1;var e=$n();fg=t;function t(n){var r=0,o=[],a={},l=[];function u(d){var p=a[d]={onStack:!0,lowlink:r,index:r++};if(o.push(d),n.successors(d).forEach(function(g){e.has(a,g)?a[g].onStack&&(p.lowlink=Math.min(p.lowlink,a[g].index)):(u(g),p.lowlink=Math.min(p.lowlink,a[g].lowlink))}),p.lowlink===p.index){var f=[],m;do m=o.pop(),a[m].onStack=!1,f.push(m);while(d!==m);l.push(f)}}return n.nodes().forEach(function(d){e.has(a,d)||u(d)}),l}return fg}var hg,Pj;function S9(){if(Pj)return hg;Pj=1;var e=$n(),t=g2();hg=n;function n(r){return e.filter(t(r),function(o){return o.length>1||o.length===1&&r.hasEdge(o[0],o[0])})}return hg}var mg,Ij;function k9(){if(Ij)return mg;Ij=1;var e=$n();mg=n;var t=e.constant(1);function n(o,a,l){return r(o,a||t,l||function(u){return o.outEdges(u)})}function r(o,a,l){var u={},d=o.nodes();return d.forEach(function(p){u[p]={},u[p][p]={distance:0},d.forEach(function(f){p!==f&&(u[p][f]={distance:Number.POSITIVE_INFINITY})}),l(p).forEach(function(f){var m=f.v===p?f.w:f.v,g=a(f);u[p][m]={distance:g,predecessor:p}})}),d.forEach(function(p){var f=u[p];d.forEach(function(m){var g=u[m];d.forEach(function(v){var b=g[p],x=f[v],_=g[v],k=b.distance+x.distance;k<_.distance&&(_.distance=k,_.predecessor=x.predecessor)})})}),u}return mg}var gg,Rj;function y2(){if(Rj)return gg;Rj=1;var e=$n();gg=t,t.CycleException=n;function t(r){var o={},a={},l=[];function u(d){if(e.has(a,d))throw new n;e.has(o,d)||(a[d]=!0,o[d]=!0,e.each(r.predecessors(d),u),delete a[d],l.push(d))}if(e.each(r.sinks(),u),e.size(o)!==r.nodeCount())throw new n;return l}function n(){}return n.prototype=new Error,gg}var yg,Oj;function N9(){if(Oj)return yg;Oj=1;var e=y2();yg=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return yg}var vg,Mj;function v2(){if(Mj)return vg;Mj=1;var e=$n();vg=t;function t(r,o,a){e.isArray(o)||(o=[o]);var l=(r.isDirected()?r.successors:r.neighbors).bind(r),u=[],d={};return e.each(o,function(p){if(!r.hasNode(p))throw new Error("Graph does not have node: "+p);n(r,p,a==="post",d,l,u)}),u}function n(r,o,a,l,u,d){e.has(l,o)||(l[o]=!0,a||d.push(o),e.each(u(o),function(p){n(r,p,a,l,u,d)}),a&&d.push(o))}return vg}var xg,Dj;function j9(){if(Dj)return xg;Dj=1;var e=v2();xg=t;function t(n,r){return e(n,r,"post")}return xg}var bg,Lj;function E9(){if(Lj)return bg;Lj=1;var e=v2();bg=t;function t(n,r){return e(n,r,"pre")}return bg}var wg,qj;function C9(){if(qj)return wg;qj=1;var e=$n(),t=Nx(),n=h2();wg=r;function r(o,a){var l=new t,u={},d=new n,p;function f(g){var v=g.v===p?g.w:g.v,b=d.priority(v);if(b!==void 0){var x=a(g);x<b&&(u[v]=p,d.decrease(v,x))}}if(o.nodeCount()===0)return l;e.each(o.nodes(),function(g){d.add(g,Number.POSITIVE_INFINITY),l.setNode(g)}),d.decrease(o.nodes()[0],0);for(var m=!1;d.size()>0;){if(p=d.removeMin(),e.has(u,p))l.setEdge(p,u[p]);else{if(m)throw new Error("Input graph is not connected: "+o);m=!0}o.nodeEdges(p).forEach(f)}return l}return wg}var _g,Fj;function T9(){return Fj||(Fj=1,_g={components:w9(),dijkstra:m2(),dijkstraAll:_9(),findCycles:S9(),floydWarshall:k9(),isAcyclic:N9(),postorder:j9(),preorder:E9(),prim:C9(),tarjan:g2(),topsort:y2()}),_g}var Sg,zj;function A9(){if(zj)return Sg;zj=1;var e=x9();return Sg={Graph:e.Graph,json:b9(),alg:T9(),version:e.version},Sg}var kg,Bj;function rr(){if(Bj)return kg;Bj=1;var e;if(typeof cx=="function")try{e=A9()}catch{}return e||(e=window.graphlib),kg=e,kg}var Ng,$j;function P9(){if($j)return Ng;$j=1;var e=HP(),t=1,n=4;function r(o){return e(o,t|n)}return Ng=r,Ng}var jg,Hj;function iu(){if(Hj)return jg;Hj=1;var e=Qi(),t=Mr(),n=Qc(),r=Bn();function o(a,l,u){if(!r(u))return!1;var d=typeof l;return(d=="number"?t(u)&&n(l,u.length):d=="string"&&l in u)?e(u[l],a):!1}return jg=o,jg}var Eg,Vj;function I9(){if(Vj)return Eg;Vj=1;var e=ou(),t=Qi(),n=iu(),r=Go(),o=Object.prototype,a=o.hasOwnProperty,l=e(function(u,d){u=Object(u);var p=-1,f=d.length,m=f>2?d[2]:void 0;for(m&&n(d[0],d[1],m)&&(f=1);++p<f;)for(var g=d[p],v=r(g),b=-1,x=v.length;++b<x;){var _=v[b],k=u[_];(k===void 0||t(k,o[_])&&!a.call(u,_))&&(u[_]=g[_])}return u});return Eg=l,Eg}var Cg,Uj;function R9(){if(Uj)return Cg;Uj=1;var e=Dr(),t=Mr(),n=go();function r(o){return function(a,l,u){var d=Object(a);if(!t(a)){var p=e(l,3);a=n(a),l=function(m){return p(d[m],m,d)}}var f=o(a,l,u);return f>-1?d[p?a[f]:f]:void 0}}return Cg=r,Cg}var Tg,Wj;function O9(){if(Wj)return Tg;Wj=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Tg=t,Tg}var Ag,Kj;function M9(){if(Kj)return Ag;Kj=1;var e=O9(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Ag=n,Ag}var Pg,Gj;function D9(){if(Gj)return Pg;Gj=1;var e=M9(),t=Bn(),n=es(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;function d(p){if(typeof p=="number")return p;if(n(p))return r;if(t(p)){var f=typeof p.valueOf=="function"?p.valueOf():p;p=t(f)?f+"":f}if(typeof p!="string")return p===0?p:+p;p=e(p);var m=a.test(p);return m||l.test(p)?u(p.slice(2),m?2:8):o.test(p)?r:+p}return Pg=d,Pg}var Ig,Yj;function x2(){if(Yj)return Ig;Yj=1;var e=D9(),t=1/0,n=17976931348623157e292;function r(o){if(!o)return o===0?o:0;if(o=e(o),o===t||o===-t){var a=o<0?-1:1;return a*n}return o===o?o:0}return Ig=r,Ig}var Rg,Qj;function L9(){if(Qj)return Rg;Qj=1;var e=x2();function t(n){var r=e(n),o=r%1;return r===r?o?r-o:r:0}return Rg=t,Rg}var Og,Xj;function q9(){if(Xj)return Og;Xj=1;var e=d2(),t=Dr(),n=L9(),r=Math.max;function o(a,l,u){var d=a==null?0:a.length;if(!d)return-1;var p=u==null?0:n(u);return p<0&&(p=r(d+p,0)),e(a,t(l,3),p)}return Og=o,Og}var Mg,Jj;function F9(){if(Jj)return Mg;Jj=1;var e=R9(),t=q9(),n=e(t);return Mg=n,Mg}var Dg,Zj;function b2(){if(Zj)return Dg;Zj=1;var e=kx();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Dg=t,Dg}var Lg,eE;function z9(){if(eE)return Lg;eE=1;var e=bx(),t=VP(),n=Go();function r(o,a){return o==null?o:e(o,t(a),n)}return Lg=r,Lg}var qg,tE;function B9(){if(tE)return qg;tE=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return qg=e,qg}var Fg,nE;function $9(){if(nE)return Fg;nE=1;var e=Gc(),t=wx(),n=Dr();function r(o,a){var l={};return a=n(a,3),t(o,function(u,d,p){e(l,d,a(u,d,p))}),l}return Fg=r,Fg}var zg,rE;function jx(){if(rE)return zg;rE=1;var e=es();function t(n,r,o){for(var a=-1,l=n.length;++a<l;){var u=n[a],d=r(u);if(d!=null&&(p===void 0?d===d&&!e(d):o(d,p)))var p=d,f=u}return f}return zg=t,zg}var Bg,oE;function H9(){if(oE)return Bg;oE=1;function e(t,n){return t>n}return Bg=e,Bg}var $g,iE;function V9(){if(iE)return $g;iE=1;var e=jx(),t=H9(),n=Yo();function r(o){return o&&o.length?e(o,n,t):void 0}return $g=r,$g}var Hg,sE;function w2(){if(sE)return Hg;sE=1;var e=Gc(),t=Qi();function n(r,o,a){(a!==void 0&&!t(r[o],a)||a===void 0&&!(o in r))&&e(r,o,a)}return Hg=n,Hg}var Vg,aE;function U9(){if(aE)return Vg;aE=1;var e=Wo(),t=Zc(),n=vr(),r="[object Object]",o=Function.prototype,a=Object.prototype,l=o.toString,u=a.hasOwnProperty,d=l.call(Object);function p(f){if(!n(f)||e(f)!=r)return!1;var m=t(f);if(m===null)return!0;var g=u.call(m,"constructor")&&m.constructor;return typeof g=="function"&&g instanceof g&&l.call(g)==d}return Vg=p,Vg}var Ug,lE;function _2(){if(lE)return Ug;lE=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return Ug=e,Ug}var Wg,cE;function W9(){if(cE)return Wg;cE=1;var e=ja(),t=Go();function n(r){return e(r,t(r))}return Wg=n,Wg}var Kg,uE;function K9(){if(uE)return Kg;uE=1;var e=w2(),t=PP(),n=zP(),r=IP(),o=$P(),a=Ea(),l=Tt(),u=p2(),d=Ji(),p=Na(),f=Bn(),m=U9(),g=Ca(),v=_2(),b=W9();function x(_,k,S,N,T,A,C){var P=v(_,S),O=v(k,S),I=C.get(O);if(I){e(_,S,I);return}var H=A?A(P,O,S+"",_,k,C):void 0,D=H===void 0;if(D){var z=l(O),W=!z&&d(O),L=!z&&!W&&g(O);H=O,z||W||L?l(P)?H=P:u(P)?H=r(P):W?(D=!1,H=t(O,!0)):L?(D=!1,H=n(O,!0)):H=[]:m(O)||a(O)?(H=P,a(P)?H=b(P):(!f(P)||p(P))&&(H=o(O))):D=!1}D&&(C.set(O,H),T(H,O,N,A,C),C.delete(O)),e(_,S,H)}return Kg=x,Kg}var Gg,dE;function G9(){if(dE)return Gg;dE=1;var e=Kc(),t=w2(),n=bx(),r=K9(),o=Bn(),a=Go(),l=_2();function u(d,p,f,m,g){d!==p&&n(p,function(v,b){if(g||(g=new e),o(v))r(d,p,b,f,u,m,g);else{var x=m?m(l(d,b),v,b+"",d,p,g):void 0;x===void 0&&(x=v),t(d,b,x)}},a)}return Gg=u,Gg}var Yg,pE;function Y9(){if(pE)return Yg;pE=1;var e=ou(),t=iu();function n(r){return e(function(o,a){var l=-1,u=a.length,d=u>1?a[u-1]:void 0,p=u>2?a[2]:void 0;for(d=r.length>3&&typeof d=="function"?(u--,d):void 0,p&&t(a[0],a[1],p)&&(d=u<3?void 0:d,u=1),o=Object(o);++l<u;){var f=a[l];f&&r(o,f,l,d)}return o})}return Yg=n,Yg}var Qg,fE;function Q9(){if(fE)return Qg;fE=1;var e=G9(),t=Y9(),n=t(function(r,o,a){e(r,o,a)});return Qg=n,Qg}var Xg,hE;function S2(){if(hE)return Xg;hE=1;function e(t,n){return t<n}return Xg=e,Xg}var Jg,mE;function X9(){if(mE)return Jg;mE=1;var e=jx(),t=S2(),n=Yo();function r(o){return o&&o.length?e(o,n,t):void 0}return Jg=r,Jg}var Zg,gE;function J9(){if(gE)return Zg;gE=1;var e=jx(),t=Dr(),n=S2();function r(o,a){return o&&o.length?e(o,t(a,2),n):void 0}return Zg=r,Zg}var ey,yE;function Z9(){if(yE)return ey;yE=1;var e=sr(),t=function(){return e.Date.now()};return ey=t,ey}var ty,vE;function e7(){if(vE)return ty;vE=1;var e=Yc(),t=nu(),n=Qc(),r=Bn(),o=Ta();function a(l,u,d,p){if(!r(l))return l;u=t(u,l);for(var f=-1,m=u.length,g=m-1,v=l;v!=null&&++f<m;){var b=o(u[f]),x=d;if(b==="__proto__"||b==="constructor"||b==="prototype")return l;if(f!=g){var _=v[b];x=p?p(_,b,v):void 0,x===void 0&&(x=r(_)?_:n(u[f+1])?[]:{})}e(v,b,x),v=v[b]}return l}return ty=a,ty}var ny,xE;function t7(){if(xE)return ny;xE=1;var e=ru(),t=e7(),n=nu();function r(o,a,l){for(var u=-1,d=a.length,p={};++u<d;){var f=a[u],m=e(o,f);l(m,f)&&t(p,n(f,o),m)}return p}return ny=r,ny}var ry,bE;function n7(){if(bE)return ry;bE=1;var e=t7(),t=t2();function n(r,o){return e(r,o,function(a,l){return t(r,l)})}return ry=n,ry}var oy,wE;function r7(){if(wE)return oy;wE=1;var e=b2(),t=c2(),n=u2();function r(o){return n(t(o,void 0,e),o+"")}return oy=r,oy}var iy,_E;function o7(){if(_E)return iy;_E=1;var e=n7(),t=r7(),n=t(function(r,o){return r==null?{}:e(r,o)});return iy=n,iy}var sy,SE;function i7(){if(SE)return sy;SE=1;var e=Math.ceil,t=Math.max;function n(r,o,a,l){for(var u=-1,d=t(e((o-r)/(a||1)),0),p=Array(d);d--;)p[l?d:++u]=r,r+=a;return p}return sy=n,sy}var ay,kE;function s7(){if(kE)return ay;kE=1;var e=i7(),t=iu(),n=x2();function r(o){return function(a,l,u){return u&&typeof u!="number"&&t(a,l,u)&&(l=u=void 0),a=n(a),l===void 0?(l=a,a=0):l=n(l),u=u===void 0?a<l?1:-1:n(u),e(a,l,u,o)}}return ay=r,ay}var ly,NE;function a7(){if(NE)return ly;NE=1;var e=s7(),t=e();return ly=t,ly}var cy,jE;function l7(){if(jE)return cy;jE=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return cy=e,cy}var uy,EE;function c7(){if(EE)return uy;EE=1;var e=es();function t(n,r){if(n!==r){var o=n!==void 0,a=n===null,l=n===n,u=e(n),d=r!==void 0,p=r===null,f=r===r,m=e(r);if(!p&&!m&&!u&&n>r||u&&d&&f&&!p&&!m||a&&d&&f||!o&&f||!l)return 1;if(!a&&!u&&!m&&n<r||m&&o&&l&&!a&&!u||p&&o&&l||!d&&l||!f)return-1}return 0}return uy=t,uy}var dy,CE;function u7(){if(CE)return dy;CE=1;var e=c7();function t(n,r,o){for(var a=-1,l=n.criteria,u=r.criteria,d=l.length,p=o.length;++a<d;){var f=e(l[a],u[a]);if(f){if(a>=p)return f;var m=o[a];return f*(m=="desc"?-1:1)}}return n.index-r.index}return dy=t,dy}var py,TE;function d7(){if(TE)return py;TE=1;var e=tu(),t=ru(),n=Dr(),r=s2(),o=l7(),a=Xc(),l=u7(),u=Yo(),d=Tt();function p(f,m,g){m.length?m=e(m,function(x){return d(x)?function(_){return t(_,x.length===1?x[0]:x)}:x}):m=[u];var v=-1;m=e(m,a(n));var b=r(f,function(x,_,k){var S=e(m,function(N){return N(x)});return{criteria:S,index:++v,value:x}});return o(b,function(x,_){return l(x,_,g)})}return py=p,py}var fy,AE;function p7(){if(AE)return fy;AE=1;var e=kx(),t=d7(),n=ou(),r=iu(),o=n(function(a,l){if(a==null)return[];var u=l.length;return u>1&&r(a,l[0],l[1])?l=[]:u>2&&r(l[0],l[1],l[2])&&(l=[l[0]]),t(a,e(l,1),[])});return fy=o,fy}var hy,PE;function f7(){if(PE)return hy;PE=1;var e=ZP(),t=0;function n(r){var o=++t;return e(r)+o}return hy=n,hy}var my,IE;function h7(){if(IE)return my;IE=1;function e(t,n,r){for(var o=-1,a=t.length,l=n.length,u={};++o<a;){var d=o<l?n[o]:void 0;r(u,t[o],d)}return u}return my=e,my}var gy,RE;function m7(){if(RE)return gy;RE=1;var e=Yc(),t=h7();function n(r,o){return t(r||[],o||[],e)}return gy=n,gy}var yy,OE;function gt(){if(OE)return yy;OE=1;var e;if(typeof cx=="function")try{e={cloneDeep:P9(),constant:xx(),defaults:I9(),each:WP(),filter:r2(),find:F9(),flatten:b2(),forEach:UP(),forIn:z9(),has:o2(),isUndefined:i2(),last:B9(),map:a2(),mapValues:$9(),max:V9(),merge:Q9(),min:X9(),minBy:J9(),now:Z9(),pick:o7(),range:a7(),reduce:l2(),sortBy:p7(),uniqueId:f7(),values:f2(),zipObject:m7()}}catch{}return e||(e=window._),yy=e,yy}var vy,ME;function g7(){if(ME)return vy;ME=1,vy=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,o=r._prev;if(o!==r)return t(o),o},e.prototype.enqueue=function(r){var o=this._sentinel;r._prev&&r._next&&t(r),r._next=o._next,o._next._prev=r,o._next=r,r._prev=o},e.prototype.toString=function(){for(var r=[],o=this._sentinel,a=o._prev;a!==o;)r.push(JSON.stringify(a,n)),a=a._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,o){if(r!=="_next"&&r!=="_prev")return o}return vy}var xy,DE;function y7(){if(DE)return xy;DE=1;var e=gt(),t=rr().Graph,n=g7();xy=o;var r=e.constant(1);function o(p,f){if(p.nodeCount()<=1)return[];var m=u(p,f||r),g=a(m.graph,m.buckets,m.zeroIdx);return e.flatten(e.map(g,function(v){return p.outEdges(v.v,v.w)}),!0)}function a(p,f,m){for(var g=[],v=f[f.length-1],b=f[0],x;p.nodeCount();){for(;x=b.dequeue();)l(p,f,m,x);for(;x=v.dequeue();)l(p,f,m,x);if(p.nodeCount()){for(var _=f.length-2;_>0;--_)if(x=f[_].dequeue(),x){g=g.concat(l(p,f,m,x,!0));break}}}return g}function l(p,f,m,g,v){var b=v?[]:void 0;return e.forEach(p.inEdges(g.v),function(x){var _=p.edge(x),k=p.node(x.v);v&&b.push({v:x.v,w:x.w}),k.out-=_,d(f,m,k)}),e.forEach(p.outEdges(g.v),function(x){var _=p.edge(x),k=x.w,S=p.node(k);S.in-=_,d(f,m,S)}),p.removeNode(g.v),b}function u(p,f){var m=new t,g=0,v=0;e.forEach(p.nodes(),function(_){m.setNode(_,{v:_,in:0,out:0})}),e.forEach(p.edges(),function(_){var k=m.edge(_.v,_.w)||0,S=f(_),N=k+S;m.setEdge(_.v,_.w,N),v=Math.max(v,m.node(_.v).out+=S),g=Math.max(g,m.node(_.w).in+=S)});var b=e.range(v+g+3).map(function(){return new n}),x=g+1;return e.forEach(m.nodes(),function(_){d(b,x,m.node(_))}),{graph:m,buckets:b,zeroIdx:x}}function d(p,f,m){m.out?m.in?p[m.out-m.in+f].enqueue(m):p[p.length-1].enqueue(m):p[0].enqueue(m)}return xy}var by,LE;function v7(){if(LE)return by;LE=1;var e=gt(),t=y7();by={run:n,undo:o};function n(a){var l=a.graph().acyclicer==="greedy"?t(a,u(a)):r(a);e.forEach(l,function(d){var p=a.edge(d);a.removeEdge(d),p.forwardName=d.name,p.reversed=!0,a.setEdge(d.w,d.v,p,e.uniqueId("rev"))});function u(d){return function(p){return d.edge(p).weight}}}function r(a){var l=[],u={},d={};function p(f){e.has(d,f)||(d[f]=!0,u[f]=!0,e.forEach(a.outEdges(f),function(m){e.has(u,m.w)?l.push(m):p(m.w)}),delete u[f])}return e.forEach(a.nodes(),p),l}function o(a){e.forEach(a.edges(),function(l){var u=a.edge(l);if(u.reversed){a.removeEdge(l);var d=u.forwardName;delete u.reversed,delete u.forwardName,a.setEdge(l.w,l.v,u,d)}})}return by}var wy,qE;function un(){if(qE)return wy;qE=1;var e=gt(),t=rr().Graph;wy={addDummyNode:n,simplify:r,asNonCompoundGraph:o,successorWeights:a,predecessorWeights:l,intersectRect:u,buildLayerMatrix:d,normalizeRanks:p,removeEmptyRanks:f,addBorderNode:m,maxRank:g,partition:v,time:b,notime:x};function n(_,k,S,N){var T;do T=e.uniqueId(N);while(_.hasNode(T));return S.dummy=k,_.setNode(T,S),T}function r(_){var k=new t().setGraph(_.graph());return e.forEach(_.nodes(),function(S){k.setNode(S,_.node(S))}),e.forEach(_.edges(),function(S){var N=k.edge(S.v,S.w)||{weight:0,minlen:1},T=_.edge(S);k.setEdge(S.v,S.w,{weight:N.weight+T.weight,minlen:Math.max(N.minlen,T.minlen)})}),k}function o(_){var k=new t({multigraph:_.isMultigraph()}).setGraph(_.graph());return e.forEach(_.nodes(),function(S){_.children(S).length||k.setNode(S,_.node(S))}),e.forEach(_.edges(),function(S){k.setEdge(S,_.edge(S))}),k}function a(_){var k=e.map(_.nodes(),function(S){var N={};return e.forEach(_.outEdges(S),function(T){N[T.w]=(N[T.w]||0)+_.edge(T).weight}),N});return e.zipObject(_.nodes(),k)}function l(_){var k=e.map(_.nodes(),function(S){var N={};return e.forEach(_.inEdges(S),function(T){N[T.v]=(N[T.v]||0)+_.edge(T).weight}),N});return e.zipObject(_.nodes(),k)}function u(_,k){var S=_.x,N=_.y,T=k.x-S,A=k.y-N,C=_.width/2,P=_.height/2;if(!T&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var O,I;return Math.abs(A)*C>Math.abs(T)*P?(A<0&&(P=-P),O=P*T/A,I=P):(T<0&&(C=-C),O=C,I=C*A/T),{x:S+O,y:N+I}}function d(_){var k=e.map(e.range(g(_)+1),function(){return[]});return e.forEach(_.nodes(),function(S){var N=_.node(S),T=N.rank;e.isUndefined(T)||(k[T][N.order]=S)}),k}function p(_){var k=e.min(e.map(_.nodes(),function(S){return _.node(S).rank}));e.forEach(_.nodes(),function(S){var N=_.node(S);e.has(N,"rank")&&(N.rank-=k)})}function f(_){var k=e.min(e.map(_.nodes(),function(A){return _.node(A).rank})),S=[];e.forEach(_.nodes(),function(A){var C=_.node(A).rank-k;S[C]||(S[C]=[]),S[C].push(A)});var N=0,T=_.graph().nodeRankFactor;e.forEach(S,function(A,C){e.isUndefined(A)&&C%T!==0?--N:N&&e.forEach(A,function(P){_.node(P).rank+=N})})}function m(_,k,S,N){var T={width:0,height:0};return arguments.length>=4&&(T.rank=S,T.order=N),n(_,"border",T,k)}function g(_){return e.max(e.map(_.nodes(),function(k){var S=_.node(k).rank;if(!e.isUndefined(S))return S}))}function v(_,k){var S={lhs:[],rhs:[]};return e.forEach(_,function(N){k(N)?S.lhs.push(N):S.rhs.push(N)}),S}function b(_,k){var S=e.now();try{return k()}finally{console.log(_+" time: "+(e.now()-S)+"ms")}}function x(_,k){return k()}return wy}var _y,FE;function x7(){if(FE)return _y;FE=1;var e=gt(),t=un();_y={run:n,undo:o};function n(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(l){r(a,l)})}function r(a,l){var u=l.v,d=a.node(u).rank,p=l.w,f=a.node(p).rank,m=l.name,g=a.edge(l),v=g.labelRank;if(f!==d+1){a.removeEdge(l);var b,x,_;for(_=0,++d;d<f;++_,++d)g.points=[],x={width:0,height:0,edgeLabel:g,edgeObj:l,rank:d},b=t.addDummyNode(a,"edge",x,"_d"),d===v&&(x.width=g.width,x.height=g.height,x.dummy="edge-label",x.labelpos=g.labelpos),a.setEdge(u,b,{weight:g.weight},m),_===0&&a.graph().dummyChains.push(b),u=b;a.setEdge(u,p,{weight:g.weight},m)}}function o(a){e.forEach(a.graph().dummyChains,function(l){var u=a.node(l),d=u.edgeLabel,p;for(a.setEdge(u.edgeObj,d);u.dummy;)p=a.successors(l)[0],a.removeNode(l),d.points.push({x:u.x,y:u.y}),u.dummy==="edge-label"&&(d.x=u.x,d.y=u.y,d.width=u.width,d.height=u.height),l=p,u=a.node(l)})}return _y}var Sy,zE;function Nc(){if(zE)return Sy;zE=1;var e=gt();Sy={longestPath:t,slack:n};function t(r){var o={};function a(l){var u=r.node(l);if(e.has(o,l))return u.rank;o[l]=!0;var d=e.min(e.map(r.outEdges(l),function(p){return a(p.w)-r.edge(p).minlen}));return(d===Number.POSITIVE_INFINITY||d===void 0||d===null)&&(d=0),u.rank=d}e.forEach(r.sources(),a)}function n(r,o){return r.node(o.w).rank-r.node(o.v).rank-r.edge(o).minlen}return Sy}var ky,BE;function k2(){if(BE)return ky;BE=1;var e=gt(),t=rr().Graph,n=Nc().slack;ky=r;function r(u){var d=new t({directed:!1}),p=u.nodes()[0],f=u.nodeCount();d.setNode(p,{});for(var m,g;o(d,u)<f;)m=a(d,u),g=d.hasNode(m.v)?n(u,m):-n(u,m),l(d,u,g);return d}function o(u,d){function p(f){e.forEach(d.nodeEdges(f),function(m){var g=m.v,v=f===g?m.w:g;!u.hasNode(v)&&!n(d,m)&&(u.setNode(v,{}),u.setEdge(f,v,{}),p(v))})}return e.forEach(u.nodes(),p),u.nodeCount()}function a(u,d){return e.minBy(d.edges(),function(p){if(u.hasNode(p.v)!==u.hasNode(p.w))return n(d,p)})}function l(u,d,p){e.forEach(u.nodes(),function(f){d.node(f).rank+=p})}return ky}var Ny,$E;function b7(){if($E)return Ny;$E=1;var e=gt(),t=k2(),n=Nc().slack,r=Nc().longestPath,o=rr().alg.preorder,a=rr().alg.postorder,l=un().simplify;Ny=u,u.initLowLimValues=m,u.initCutValues=d,u.calcCutValue=f,u.leaveEdge=v,u.enterEdge=b,u.exchangeEdges=x;function u(N){N=l(N),r(N);var T=t(N);m(T),d(T,N);for(var A,C;A=v(T);)C=b(T,N,A),x(T,N,A,C)}function d(N,T){var A=a(N,N.nodes());A=A.slice(0,A.length-1),e.forEach(A,function(C){p(N,T,C)})}function p(N,T,A){var C=N.node(A),P=C.parent;N.edge(A,P).cutvalue=f(N,T,A)}function f(N,T,A){var C=N.node(A),P=C.parent,O=!0,I=T.edge(A,P),H=0;return I||(O=!1,I=T.edge(P,A)),H=I.weight,e.forEach(T.nodeEdges(A),function(D){var z=D.v===A,W=z?D.w:D.v;if(W!==P){var L=z===O,q=T.edge(D).weight;if(H+=L?q:-q,k(N,A,W)){var $=N.edge(A,W).cutvalue;H+=L?-$:$}}}),H}function m(N,T){arguments.length<2&&(T=N.nodes()[0]),g(N,{},1,T)}function g(N,T,A,C,P){var O=A,I=N.node(C);return T[C]=!0,e.forEach(N.neighbors(C),function(H){e.has(T,H)||(A=g(N,T,A,H,C))}),I.low=O,I.lim=A++,P?I.parent=P:delete I.parent,A}function v(N){return e.find(N.edges(),function(T){return N.edge(T).cutvalue<0})}function b(N,T,A){var C=A.v,P=A.w;T.hasEdge(C,P)||(C=A.w,P=A.v);var O=N.node(C),I=N.node(P),H=O,D=!1;O.lim>I.lim&&(H=I,D=!0);var z=e.filter(T.edges(),function(W){return D===S(N,N.node(W.v),H)&&D!==S(N,N.node(W.w),H)});return e.minBy(z,function(W){return n(T,W)})}function x(N,T,A,C){var P=A.v,O=A.w;N.removeEdge(P,O),N.setEdge(C.v,C.w,{}),m(N),d(N,T),_(N,T)}function _(N,T){var A=e.find(N.nodes(),function(P){return!T.node(P).parent}),C=o(N,A);C=C.slice(1),e.forEach(C,function(P){var O=N.node(P).parent,I=T.edge(P,O),H=!1;I||(I=T.edge(O,P),H=!0),T.node(P).rank=T.node(O).rank+(H?I.minlen:-I.minlen)})}function k(N,T,A){return N.hasEdge(T,A)}function S(N,T,A){return A.low<=T.lim&&T.lim<=A.lim}return Ny}var jy,HE;function w7(){if(HE)return jy;HE=1;var e=Nc(),t=e.longestPath,n=k2(),r=b7();jy=o;function o(d){switch(d.graph().ranker){case"network-simplex":u(d);break;case"tight-tree":l(d);break;case"longest-path":a(d);break;default:u(d)}}var a=t;function l(d){t(d),n(d)}function u(d){r(d)}return jy}var Ey,VE;function _7(){if(VE)return Ey;VE=1;var e=gt();Ey=t;function t(o){var a=r(o);e.forEach(o.graph().dummyChains,function(l){for(var u=o.node(l),d=u.edgeObj,p=n(o,a,d.v,d.w),f=p.path,m=p.lca,g=0,v=f[g],b=!0;l!==d.w;){if(u=o.node(l),b){for(;(v=f[g])!==m&&o.node(v).maxRank<u.rank;)g++;v===m&&(b=!1)}if(!b){for(;g<f.length-1&&o.node(v=f[g+1]).minRank<=u.rank;)g++;v=f[g]}o.setParent(l,v),l=o.successors(l)[0]}})}function n(o,a,l,u){var d=[],p=[],f=Math.min(a[l].low,a[u].low),m=Math.max(a[l].lim,a[u].lim),g,v;g=l;do g=o.parent(g),d.push(g);while(g&&(a[g].low>f||m>a[g].lim));for(v=g,g=u;(g=o.parent(g))!==v;)p.push(g);return{path:d.concat(p.reverse()),lca:v}}function r(o){var a={},l=0;function u(d){var p=l;e.forEach(o.children(d),u),a[d]={low:p,lim:l++}}return e.forEach(o.children(),u),a}return Ey}var Cy,UE;function S7(){if(UE)return Cy;UE=1;var e=gt(),t=un();Cy={run:n,cleanup:l};function n(u){var d=t.addDummyNode(u,"root",{},"_root"),p=o(u),f=e.max(e.values(p))-1,m=2*f+1;u.graph().nestingRoot=d,e.forEach(u.edges(),function(v){u.edge(v).minlen*=m});var g=a(u)+1;e.forEach(u.children(),function(v){r(u,d,m,g,f,p,v)}),u.graph().nodeRankFactor=m}function r(u,d,p,f,m,g,v){var b=u.children(v);if(!b.length){v!==d&&u.setEdge(d,v,{weight:0,minlen:p});return}var x=t.addBorderNode(u,"_bt"),_=t.addBorderNode(u,"_bb"),k=u.node(v);u.setParent(x,v),k.borderTop=x,u.setParent(_,v),k.borderBottom=_,e.forEach(b,function(S){r(u,d,p,f,m,g,S);var N=u.node(S),T=N.borderTop?N.borderTop:S,A=N.borderBottom?N.borderBottom:S,C=N.borderTop?f:2*f,P=T!==A?1:m-g[v]+1;u.setEdge(x,T,{weight:C,minlen:P,nestingEdge:!0}),u.setEdge(A,_,{weight:C,minlen:P,nestingEdge:!0})}),u.parent(v)||u.setEdge(d,x,{weight:0,minlen:m+g[v]})}function o(u){var d={};function p(f,m){var g=u.children(f);g&&g.length&&e.forEach(g,function(v){p(v,m+1)}),d[f]=m}return e.forEach(u.children(),function(f){p(f,1)}),d}function a(u){return e.reduce(u.edges(),function(d,p){return d+u.edge(p).weight},0)}function l(u){var d=u.graph();u.removeNode(d.nestingRoot),delete d.nestingRoot,e.forEach(u.edges(),function(p){var f=u.edge(p);f.nestingEdge&&u.removeEdge(p)})}return Cy}var Ty,WE;function k7(){if(WE)return Ty;WE=1;var e=gt(),t=un();Ty=n;function n(o){function a(l){var u=o.children(l),d=o.node(l);if(u.length&&e.forEach(u,a),e.has(d,"minRank")){d.borderLeft=[],d.borderRight=[];for(var p=d.minRank,f=d.maxRank+1;p<f;++p)r(o,"borderLeft","_bl",l,d,p),r(o,"borderRight","_br",l,d,p)}}e.forEach(o.children(),a)}function r(o,a,l,u,d,p){var f={width:0,height:0,rank:p,borderType:a},m=d[a][p-1],g=t.addDummyNode(o,"border",f,l);d[a][p]=g,o.setParent(g,u),m&&o.setEdge(m,g,{weight:1})}return Ty}var Ay,KE;function N7(){if(KE)return Ay;KE=1;var e=gt();Ay={adjust:t,undo:n};function t(p){var f=p.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&r(p)}function n(p){var f=p.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&a(p),(f==="lr"||f==="rl")&&(u(p),r(p))}function r(p){e.forEach(p.nodes(),function(f){o(p.node(f))}),e.forEach(p.edges(),function(f){o(p.edge(f))})}function o(p){var f=p.width;p.width=p.height,p.height=f}function a(p){e.forEach(p.nodes(),function(f){l(p.node(f))}),e.forEach(p.edges(),function(f){var m=p.edge(f);e.forEach(m.points,l),e.has(m,"y")&&l(m)})}function l(p){p.y=-p.y}function u(p){e.forEach(p.nodes(),function(f){d(p.node(f))}),e.forEach(p.edges(),function(f){var m=p.edge(f);e.forEach(m.points,d),e.has(m,"x")&&d(m)})}function d(p){var f=p.x;p.x=p.y,p.y=f}return Ay}var Py,GE;function j7(){if(GE)return Py;GE=1;var e=gt();Py=t;function t(n){var r={},o=e.filter(n.nodes(),function(p){return!n.children(p).length}),a=e.max(e.map(o,function(p){return n.node(p).rank})),l=e.map(e.range(a+1),function(){return[]});function u(p){if(!e.has(r,p)){r[p]=!0;var f=n.node(p);l[f.rank].push(p),e.forEach(n.successors(p),u)}}var d=e.sortBy(o,function(p){return n.node(p).rank});return e.forEach(d,u),l}return Py}var Iy,YE;function E7(){if(YE)return Iy;YE=1;var e=gt();Iy=t;function t(r,o){for(var a=0,l=1;l<o.length;++l)a+=n(r,o[l-1],o[l]);return a}function n(r,o,a){for(var l=e.zipObject(a,e.map(a,function(g,v){return v})),u=e.flatten(e.map(o,function(g){return e.sortBy(e.map(r.outEdges(g),function(v){return{pos:l[v.w],weight:r.edge(v).weight}}),"pos")}),!0),d=1;d<a.length;)d<<=1;var p=2*d-1;d-=1;var f=e.map(new Array(p),function(){return 0}),m=0;return e.forEach(u.forEach(function(g){var v=g.pos+d;f[v]+=g.weight;for(var b=0;v>0;)v%2&&(b+=f[v+1]),v=v-1>>1,f[v]+=g.weight;m+=g.weight*b})),m}return Iy}var Ry,QE;function C7(){if(QE)return Ry;QE=1;var e=gt();Ry=t;function t(n,r){return e.map(r,function(o){var a=n.inEdges(o);if(a.length){var l=e.reduce(a,function(u,d){var p=n.edge(d),f=n.node(d.v);return{sum:u.sum+p.weight*f.order,weight:u.weight+p.weight}},{sum:0,weight:0});return{v:o,barycenter:l.sum/l.weight,weight:l.weight}}else return{v:o}})}return Ry}var Oy,XE;function T7(){if(XE)return Oy;XE=1;var e=gt();Oy=t;function t(o,a){var l={};e.forEach(o,function(d,p){var f=l[d.v]={indegree:0,in:[],out:[],vs:[d.v],i:p};e.isUndefined(d.barycenter)||(f.barycenter=d.barycenter,f.weight=d.weight)}),e.forEach(a.edges(),function(d){var p=l[d.v],f=l[d.w];!e.isUndefined(p)&&!e.isUndefined(f)&&(f.indegree++,p.out.push(l[d.w]))});var u=e.filter(l,function(d){return!d.indegree});return n(u)}function n(o){var a=[];function l(p){return function(f){f.merged||(e.isUndefined(f.barycenter)||e.isUndefined(p.barycenter)||f.barycenter>=p.barycenter)&&r(p,f)}}function u(p){return function(f){f.in.push(p),--f.indegree===0&&o.push(f)}}for(;o.length;){var d=o.pop();a.push(d),e.forEach(d.in.reverse(),l(d)),e.forEach(d.out,u(d))}return e.map(e.filter(a,function(p){return!p.merged}),function(p){return e.pick(p,["vs","i","barycenter","weight"])})}function r(o,a){var l=0,u=0;o.weight&&(l+=o.barycenter*o.weight,u+=o.weight),a.weight&&(l+=a.barycenter*a.weight,u+=a.weight),o.vs=a.vs.concat(o.vs),o.barycenter=l/u,o.weight=u,o.i=Math.min(a.i,o.i),a.merged=!0}return Oy}var My,JE;function A7(){if(JE)return My;JE=1;var e=gt(),t=un();My=n;function n(a,l){var u=t.partition(a,function(x){return e.has(x,"barycenter")}),d=u.lhs,p=e.sortBy(u.rhs,function(x){return-x.i}),f=[],m=0,g=0,v=0;d.sort(o(!!l)),v=r(f,p,v),e.forEach(d,function(x){v+=x.vs.length,f.push(x.vs),m+=x.barycenter*x.weight,g+=x.weight,v=r(f,p,v)});var b={vs:e.flatten(f,!0)};return g&&(b.barycenter=m/g,b.weight=g),b}function r(a,l,u){for(var d;l.length&&(d=e.last(l)).i<=u;)l.pop(),a.push(d.vs),u++;return u}function o(a){return function(l,u){return l.barycenter<u.barycenter?-1:l.barycenter>u.barycenter?1:a?u.i-l.i:l.i-u.i}}return My}var Dy,ZE;function P7(){if(ZE)return Dy;ZE=1;var e=gt(),t=C7(),n=T7(),r=A7();Dy=o;function o(u,d,p,f){var m=u.children(d),g=u.node(d),v=g?g.borderLeft:void 0,b=g?g.borderRight:void 0,x={};v&&(m=e.filter(m,function(A){return A!==v&&A!==b}));var _=t(u,m);e.forEach(_,function(A){if(u.children(A.v).length){var C=o(u,A.v,p,f);x[A.v]=C,e.has(C,"barycenter")&&l(A,C)}});var k=n(_,p);a(k,x);var S=r(k,f);if(v&&(S.vs=e.flatten([v,S.vs,b],!0),u.predecessors(v).length)){var N=u.node(u.predecessors(v)[0]),T=u.node(u.predecessors(b)[0]);e.has(S,"barycenter")||(S.barycenter=0,S.weight=0),S.barycenter=(S.barycenter*S.weight+N.order+T.order)/(S.weight+2),S.weight+=2}return S}function a(u,d){e.forEach(u,function(p){p.vs=e.flatten(p.vs.map(function(f){return d[f]?d[f].vs:f}),!0)})}function l(u,d){e.isUndefined(u.barycenter)?(u.barycenter=d.barycenter,u.weight=d.weight):(u.barycenter=(u.barycenter*u.weight+d.barycenter*d.weight)/(u.weight+d.weight),u.weight+=d.weight)}return Dy}var Ly,eC;function I7(){if(eC)return Ly;eC=1;var e=gt(),t=rr().Graph;Ly=n;function n(o,a,l){var u=r(o),d=new t({compound:!0}).setGraph({root:u}).setDefaultNodeLabel(function(p){return o.node(p)});return e.forEach(o.nodes(),function(p){var f=o.node(p),m=o.parent(p);(f.rank===a||f.minRank<=a&&a<=f.maxRank)&&(d.setNode(p),d.setParent(p,m||u),e.forEach(o[l](p),function(g){var v=g.v===p?g.w:g.v,b=d.edge(v,p),x=e.isUndefined(b)?0:b.weight;d.setEdge(v,p,{weight:o.edge(g).weight+x})}),e.has(f,"minRank")&&d.setNode(p,{borderLeft:f.borderLeft[a],borderRight:f.borderRight[a]}))}),d}function r(o){for(var a;o.hasNode(a=e.uniqueId("_root")););return a}return Ly}var qy,tC;function R7(){if(tC)return qy;tC=1;var e=gt();qy=t;function t(n,r,o){var a={},l;e.forEach(o,function(u){for(var d=n.parent(u),p,f;d;){if(p=n.parent(d),p?(f=a[p],a[p]=d):(f=l,l=d),f&&f!==d){r.setEdge(f,d);return}d=p}})}return qy}var Fy,nC;function O7(){if(nC)return Fy;nC=1;var e=gt(),t=j7(),n=E7(),r=P7(),o=I7(),a=R7(),l=rr().Graph,u=un();Fy=d;function d(g){var v=u.maxRank(g),b=p(g,e.range(1,v+1),"inEdges"),x=p(g,e.range(v-1,-1,-1),"outEdges"),_=t(g);m(g,_);for(var k=Number.POSITIVE_INFINITY,S,N=0,T=0;T<4;++N,++T){f(N%2?b:x,N%4>=2),_=u.buildLayerMatrix(g);var A=n(g,_);A<k&&(T=0,S=e.cloneDeep(_),k=A)}m(g,S)}function p(g,v,b){return e.map(v,function(x){return o(g,x,b)})}function f(g,v){var b=new l;e.forEach(g,function(x){var _=x.graph().root,k=r(x,_,b,v);e.forEach(k.vs,function(S,N){x.node(S).order=N}),a(x,b,k.vs)})}function m(g,v){e.forEach(v,function(b){e.forEach(b,function(x,_){g.node(x).order=_})})}return Fy}var zy,rC;function M7(){if(rC)return zy;rC=1;var e=gt(),t=rr().Graph,n=un();zy={positionX:b,findType1Conflicts:r,findType2Conflicts:o,addConflict:l,hasConflict:u,verticalAlignment:d,horizontalCompaction:p,alignCoordinates:g,findSmallestWidthAlignment:m,balance:v};function r(k,S){var N={};function T(A,C){var P=0,O=0,I=A.length,H=e.last(C);return e.forEach(C,function(D,z){var W=a(k,D),L=W?k.node(W).order:I;(W||D===H)&&(e.forEach(C.slice(O,z+1),function(q){e.forEach(k.predecessors(q),function($){var G=k.node($),U=G.order;(U<P||L<U)&&!(G.dummy&&k.node(q).dummy)&&l(N,$,q)})}),O=z+1,P=L)}),C}return e.reduce(S,T),N}function o(k,S){var N={};function T(C,P,O,I,H){var D;e.forEach(e.range(P,O),function(z){D=C[z],k.node(D).dummy&&e.forEach(k.predecessors(D),function(W){var L=k.node(W);L.dummy&&(L.order<I||L.order>H)&&l(N,W,D)})})}function A(C,P){var O=-1,I,H=0;return e.forEach(P,function(D,z){if(k.node(D).dummy==="border"){var W=k.predecessors(D);W.length&&(I=k.node(W[0]).order,T(P,H,z,O,I),H=z,O=I)}T(P,H,P.length,I,C.length)}),P}return e.reduce(S,A),N}function a(k,S){if(k.node(S).dummy)return e.find(k.predecessors(S),function(N){return k.node(N).dummy})}function l(k,S,N){if(S>N){var T=S;S=N,N=T}var A=k[S];A||(k[S]=A={}),A[N]=!0}function u(k,S,N){if(S>N){var T=S;S=N,N=T}return e.has(k[S],N)}function d(k,S,N,T){var A={},C={},P={};return e.forEach(S,function(O){e.forEach(O,function(I,H){A[I]=I,C[I]=I,P[I]=H})}),e.forEach(S,function(O){var I=-1;e.forEach(O,function(H){var D=T(H);if(D.length){D=e.sortBy(D,function($){return P[$]});for(var z=(D.length-1)/2,W=Math.floor(z),L=Math.ceil(z);W<=L;++W){var q=D[W];C[H]===H&&I<P[q]&&!u(N,H,q)&&(C[q]=H,C[H]=A[H]=A[q],I=P[q])}}})}),{root:A,align:C}}function p(k,S,N,T,A){var C={},P=f(k,S,N,A),O=A?"borderLeft":"borderRight";function I(z,W){for(var L=P.nodes(),q=L.pop(),$={};q;)$[q]?z(q):($[q]=!0,L.push(q),L=L.concat(W(q))),q=L.pop()}function H(z){C[z]=P.inEdges(z).reduce(function(W,L){return Math.max(W,C[L.v]+P.edge(L))},0)}function D(z){var W=P.outEdges(z).reduce(function(q,$){return Math.min(q,C[$.w]-P.edge($))},Number.POSITIVE_INFINITY),L=k.node(z);W!==Number.POSITIVE_INFINITY&&L.borderType!==O&&(C[z]=Math.max(C[z],W))}return I(H,P.predecessors.bind(P)),I(D,P.successors.bind(P)),e.forEach(T,function(z){C[z]=C[N[z]]}),C}function f(k,S,N,T){var A=new t,C=k.graph(),P=x(C.nodesep,C.edgesep,T);return e.forEach(S,function(O){var I;e.forEach(O,function(H){var D=N[H];if(A.setNode(D),I){var z=N[I],W=A.edge(z,D);A.setEdge(z,D,Math.max(P(k,H,I),W||0))}I=H})}),A}function m(k,S){return e.minBy(e.values(S),function(N){var T=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return e.forIn(N,function(C,P){var O=_(k,P)/2;T=Math.max(C+O,T),A=Math.min(C-O,A)}),T-A})}function g(k,S){var N=e.values(S),T=e.min(N),A=e.max(N);e.forEach(["u","d"],function(C){e.forEach(["l","r"],function(P){var O=C+P,I=k[O],H;if(I!==S){var D=e.values(I);H=P==="l"?T-e.min(D):A-e.max(D),H&&(k[O]=e.mapValues(I,function(z){return z+H}))}})})}function v(k,S){return e.mapValues(k.ul,function(N,T){if(S)return k[S.toLowerCase()][T];var A=e.sortBy(e.map(k,T));return(A[1]+A[2])/2})}function b(k){var S=n.buildLayerMatrix(k),N=e.merge(r(k,S),o(k,S)),T={},A;e.forEach(["u","d"],function(P){A=P==="u"?S:e.values(S).reverse(),e.forEach(["l","r"],function(O){O==="r"&&(A=e.map(A,function(z){return e.values(z).reverse()}));var I=(P==="u"?k.predecessors:k.successors).bind(k),H=d(k,A,N,I),D=p(k,A,H.root,H.align,O==="r");O==="r"&&(D=e.mapValues(D,function(z){return-z})),T[P+O]=D})});var C=m(k,T);return g(T,C),v(T,k.graph().align)}function x(k,S,N){return function(T,A,C){var P=T.node(A),O=T.node(C),I=0,H;if(I+=P.width/2,e.has(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":H=-P.width/2;break;case"r":H=P.width/2;break}if(H&&(I+=N?H:-H),H=0,I+=(P.dummy?S:k)/2,I+=(O.dummy?S:k)/2,I+=O.width/2,e.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":H=O.width/2;break;case"r":H=-O.width/2;break}return H&&(I+=N?H:-H),H=0,I}}function _(k,S){return k.node(S).width}return zy}var By,oC;function D7(){if(oC)return By;oC=1;var e=gt(),t=un(),n=M7().positionX;By=r;function r(a){a=t.asNonCompoundGraph(a),o(a),e.forEach(n(a),function(l,u){a.node(u).x=l})}function o(a){var l=t.buildLayerMatrix(a),u=a.graph().ranksep,d=0;e.forEach(l,function(p){var f=e.max(e.map(p,function(m){return a.node(m).height}));e.forEach(p,function(m){a.node(m).y=d+f/2}),d+=f+u})}return By}var $y,iC;function L7(){if(iC)return $y;iC=1;var e=gt(),t=v7(),n=x7(),r=w7(),o=un().normalizeRanks,a=_7(),l=un().removeEmptyRanks,u=S7(),d=k7(),p=N7(),f=O7(),m=D7(),g=un(),v=rr().Graph;$y=b;function b(K,J){var te=J&&J.debugTiming?g.time:g.notime;te("layout",function(){var re=te("  buildLayoutGraph",function(){return I(K)});te("  runLayout",function(){x(re,te)}),te("  updateInputGraph",function(){_(K,re)})})}function x(K,J){J("    makeSpaceForEdgeLabels",function(){H(K)}),J("    removeSelfEdges",function(){X(K)}),J("    acyclic",function(){t.run(K)}),J("    nestingGraph.run",function(){u.run(K)}),J("    rank",function(){r(g.asNonCompoundGraph(K))}),J("    injectEdgeLabelProxies",function(){D(K)}),J("    removeEmptyRanks",function(){l(K)}),J("    nestingGraph.cleanup",function(){u.cleanup(K)}),J("    normalizeRanks",function(){o(K)}),J("    assignRankMinMax",function(){z(K)}),J("    removeEdgeLabelProxies",function(){W(K)}),J("    normalize.run",function(){n.run(K)}),J("    parentDummyChains",function(){a(K)}),J("    addBorderSegments",function(){d(K)}),J("    order",function(){f(K)}),J("    insertSelfEdges",function(){R(K)}),J("    adjustCoordinateSystem",function(){p.adjust(K)}),J("    position",function(){m(K)}),J("    positionSelfEdges",function(){B(K)}),J("    removeBorderNodes",function(){U(K)}),J("    normalize.undo",function(){n.undo(K)}),J("    fixupEdgeLabelCoords",function(){$(K)}),J("    undoCoordinateSystem",function(){p.undo(K)}),J("    translateGraph",function(){L(K)}),J("    assignNodeIntersects",function(){q(K)}),J("    reversePoints",function(){G(K)}),J("    acyclic.undo",function(){t.undo(K)})}function _(K,J){e.forEach(K.nodes(),function(te){var re=K.node(te),V=J.node(te);re&&(re.x=V.x,re.y=V.y,J.children(te).length&&(re.width=V.width,re.height=V.height))}),e.forEach(K.edges(),function(te){var re=K.edge(te),V=J.edge(te);re.points=V.points,e.has(V,"x")&&(re.x=V.x,re.y=V.y)}),K.graph().width=J.graph().width,K.graph().height=J.graph().height}var k=["nodesep","edgesep","ranksep","marginx","marginy"],S={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},N=["acyclicer","ranker","rankdir","align"],T=["width","height"],A={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],P={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},O=["labelpos"];function I(K){var J=new v({multigraph:!0,compound:!0}),te=F(K.graph());return J.setGraph(e.merge({},S,Y(te,k),e.pick(te,N))),e.forEach(K.nodes(),function(re){var V=F(K.node(re));J.setNode(re,e.defaults(Y(V,T),A)),J.setParent(re,K.parent(re))}),e.forEach(K.edges(),function(re){var V=F(K.edge(re));J.setEdge(re,e.merge({},P,Y(V,C),e.pick(V,O)))}),J}function H(K){var J=K.graph();J.ranksep/=2,e.forEach(K.edges(),function(te){var re=K.edge(te);re.minlen*=2,re.labelpos.toLowerCase()!=="c"&&(J.rankdir==="TB"||J.rankdir==="BT"?re.width+=re.labeloffset:re.height+=re.labeloffset)})}function D(K){e.forEach(K.edges(),function(J){var te=K.edge(J);if(te.width&&te.height){var re=K.node(J.v),V=K.node(J.w),ne={rank:(V.rank-re.rank)/2+re.rank,e:J};g.addDummyNode(K,"edge-proxy",ne,"_ep")}})}function z(K){var J=0;e.forEach(K.nodes(),function(te){var re=K.node(te);re.borderTop&&(re.minRank=K.node(re.borderTop).rank,re.maxRank=K.node(re.borderBottom).rank,J=e.max(J,re.maxRank))}),K.graph().maxRank=J}function W(K){e.forEach(K.nodes(),function(J){var te=K.node(J);te.dummy==="edge-proxy"&&(K.edge(te.e).labelRank=te.rank,K.removeNode(J))})}function L(K){var J=Number.POSITIVE_INFINITY,te=0,re=Number.POSITIVE_INFINITY,V=0,ne=K.graph(),de=ne.marginx||0,ve=ne.marginy||0;function le(ge){var _e=ge.x,we=ge.y,Ce=ge.width,Se=ge.height;J=Math.min(J,_e-Ce/2),te=Math.max(te,_e+Ce/2),re=Math.min(re,we-Se/2),V=Math.max(V,we+Se/2)}e.forEach(K.nodes(),function(ge){le(K.node(ge))}),e.forEach(K.edges(),function(ge){var _e=K.edge(ge);e.has(_e,"x")&&le(_e)}),J-=de,re-=ve,e.forEach(K.nodes(),function(ge){var _e=K.node(ge);_e.x-=J,_e.y-=re}),e.forEach(K.edges(),function(ge){var _e=K.edge(ge);e.forEach(_e.points,function(we){we.x-=J,we.y-=re}),e.has(_e,"x")&&(_e.x-=J),e.has(_e,"y")&&(_e.y-=re)}),ne.width=te-J+de,ne.height=V-re+ve}function q(K){e.forEach(K.edges(),function(J){var te=K.edge(J),re=K.node(J.v),V=K.node(J.w),ne,de;te.points?(ne=te.points[0],de=te.points[te.points.length-1]):(te.points=[],ne=V,de=re),te.points.unshift(g.intersectRect(re,ne)),te.points.push(g.intersectRect(V,de))})}function $(K){e.forEach(K.edges(),function(J){var te=K.edge(J);if(e.has(te,"x"))switch((te.labelpos==="l"||te.labelpos==="r")&&(te.width-=te.labeloffset),te.labelpos){case"l":te.x-=te.width/2+te.labeloffset;break;case"r":te.x+=te.width/2+te.labeloffset;break}})}function G(K){e.forEach(K.edges(),function(J){var te=K.edge(J);te.reversed&&te.points.reverse()})}function U(K){e.forEach(K.nodes(),function(J){if(K.children(J).length){var te=K.node(J),re=K.node(te.borderTop),V=K.node(te.borderBottom),ne=K.node(e.last(te.borderLeft)),de=K.node(e.last(te.borderRight));te.width=Math.abs(de.x-ne.x),te.height=Math.abs(V.y-re.y),te.x=ne.x+te.width/2,te.y=re.y+te.height/2}}),e.forEach(K.nodes(),function(J){K.node(J).dummy==="border"&&K.removeNode(J)})}function X(K){e.forEach(K.edges(),function(J){if(J.v===J.w){var te=K.node(J.v);te.selfEdges||(te.selfEdges=[]),te.selfEdges.push({e:J,label:K.edge(J)}),K.removeEdge(J)}})}function R(K){var J=g.buildLayerMatrix(K);e.forEach(J,function(te){var re=0;e.forEach(te,function(V,ne){var de=K.node(V);de.order=ne+re,e.forEach(de.selfEdges,function(ve){g.addDummyNode(K,"selfedge",{width:ve.label.width,height:ve.label.height,rank:de.rank,order:ne+ ++re,e:ve.e,label:ve.label},"_se")}),delete de.selfEdges})})}function B(K){e.forEach(K.nodes(),function(J){var te=K.node(J);if(te.dummy==="selfedge"){var re=K.node(te.e.v),V=re.x+re.width/2,ne=re.y,de=te.x-V,ve=re.height/2;K.setEdge(te.e,te.label),K.removeNode(J),te.label.points=[{x:V+2*de/3,y:ne-ve},{x:V+5*de/6,y:ne-ve},{x:V+de,y:ne},{x:V+5*de/6,y:ne+ve},{x:V+2*de/3,y:ne+ve}],te.label.x=te.x,te.label.y=te.y}})}function Y(K,J){return e.mapValues(e.pick(K,J),Number)}function F(K){var J={};return e.forEach(K,function(te,re){J[re.toLowerCase()]=te}),J}return $y}var Hy,sC;function q7(){if(sC)return Hy;sC=1;var e=gt(),t=un(),n=rr().Graph;Hy={debugOrdering:r};function r(o){var a=t.buildLayerMatrix(o),l=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(o.nodes(),function(u){l.setNode(u,{label:u}),l.setParent(u,"layer"+o.node(u).rank)}),e.forEach(o.edges(),function(u){l.setEdge(u.v,u.w,{},u.name)}),e.forEach(a,function(u,d){var p="layer"+d;l.setNode(p,{rank:"same"}),e.reduce(u,function(f,m){return l.setEdge(f,m,{style:"invis"}),m})}),l}return Hy}var Vy,aC;function F7(){return aC||(aC=1,Vy="0.8.5"),Vy}var Uy,lC;function z7(){return lC||(lC=1,Uy={graphlib:rr(),layout:L7(),debug:q7(),util:{time:un().time,notime:un().notime},version:F7()}),Uy}var B7=z7();const cC=Wi(B7);function N2(){const{getNodes:e,getEdges:t,setNodes:n,fitView:r,zoomIn:o,zoomOut:a,getZoom:l}=Ki(),u=De(D=>D.layoutMode),d=De(D=>D.layoutDirection),p=De(D=>D.snapToGrid),f=De(D=>D.gridSize),m=De(D=>D.selectedNodeId),g=De(D=>D.setLayoutMode),v=De(D=>D.setLayoutDirection),b=De(D=>D.setSnapToGrid),x=De(D=>D.setGridSize),_=j.useCallback(()=>({top:.15,left:.1,bottom:.1,right:m?.35:.1}),[m]),k=j.useCallback(D=>{const z=e(),W=t();if(z.length===0)return;const L=new cC.graphlib.Graph;L.setGraph({rankdir:D,nodesep:40,ranksep:100}),L.setDefaultEdgeLabel(()=>({})),z.forEach(q=>L.setNode(q.id,{width:180,height:100})),W.forEach(q=>L.setEdge(q.source,q.target)),cC.layout(L),n(z.map(q=>{const $=L.node(q.id);return{...q,position:{x:$.x-90,y:$.y-50}}})),setTimeout(()=>r({padding:_(),maxZoom:.9}),50)},[e,t,n,r,_]),S=j.useCallback(()=>{const D=d==="LR"?"TB":"LR";v(D),k(D)},[d,v,k]),N=j.useCallback(()=>{const D=u==="free"?"fixed":"free";g(D),D==="fixed"&&k(d)},[u,d,g,k]),T=j.useCallback(()=>{S()},[S]),A=j.useCallback(()=>{const D=De.getState().layoutDirection;k(D)},[k]),C=j.useCallback(()=>{r({padding:_(),duration:300,maxZoom:.9,includeHiddenNodes:!1})},[r,_]),P=j.useCallback((D,z)=>p?{x:Math.round(D/f)*f,y:Math.round(z/f)*f}:{x:D,y:z},[p,f]),O=j.useCallback(()=>{o({duration:200})},[o]),I=j.useCallback(()=>{a({duration:200})},[a]),H=j.useCallback(()=>l(),[l]);return{layoutMode:u,layoutDirection:d,snapToGrid:p,gridSize:f,setLayoutMode:g,toggleMode:N,setLayoutDirection:v,toggleDirection:S,toggleLayout:T,setSnapToGrid:b,setGridSize:x,snapPosition:P,applyLayout:A,fitToView:C,zoomIn:O,zoomOut:I,getZoom:H}}function $7({onFitView:e,showDataFlowOverlay:t,onToggleDataFlowOverlay:n,isRunning:r,onRun:o,onStop:a,showMinimap:l,onToggleMinimap:u,isBuilt:d,isBuilding:p}){const{layoutDirection:f,toggleDirection:m,snapToGrid:g,setSnapToGrid:v,gridSize:b,setGridSize:x}=N2(),_=Gq(),k=Math.round(_.zoom*100),S=f==="LR",N={backgroundColor:"var(--surface-card)",borderColor:"var(--border-default)",color:"var(--text-primary)"},T={backgroundColor:"var(--accent-primary)",borderColor:"var(--accent-primary)",color:"white"},A=[10,20,40];return s.jsxs("div",{className:"absolute top-2 left-2 z-10 flex gap-2",children:[s.jsxs("button",{onClick:m,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:N,title:`Layout: ${S?"Horizontal (Left to Right)":"Vertical (Top to Bottom)"}
Click to switch and auto-arrange nodes`,children:[s.jsx("span",{children:S?"":""}),S?"LR":"TB"]}),s.jsxs("button",{onClick:()=>v(!g),className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:g?T:N,title:`Snap to Grid: ${g?"On":"Off"} (${b}px)
Click to ${g?"disable":"enable"} grid snapping`,children:[s.jsx("span",{children:g?"":""}),"Snap"]}),g&&s.jsx("select",{value:b,onChange:C=>x(Number(C.target.value)),className:"px-2 py-1.5 border rounded text-sm",style:N,title:"Grid size in pixels",children:A.map(C=>s.jsxs("option",{value:C,children:[C,"px"]},C))}),n&&s.jsxs("button",{onClick:n,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:t?T:N,title:`Data Flow Overlay: ${t?"On":"Off"}
Shows state keys flowing between nodes during execution`,children:[s.jsx("span",{children:""}),t?"Flow On":"Flow Off"]}),s.jsxs("button",{onClick:e,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:N,title:"Fit all nodes in view (Ctrl+0)",children:[s.jsx("span",{children:""})," Fit"]}),u&&s.jsxs("button",{onClick:u,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:l?T:N,title:`Minimap: ${l?"On":"Off"}
Shows overview of entire workflow`,children:[s.jsx("span",{children:""}),"Map"]}),s.jsxs("div",{className:"px-3 py-1.5 border rounded text-sm flex items-center gap-1 cursor-default",style:N,title:"Current zoom level (Ctrl+Plus/Minus to zoom)",children:[s.jsx("span",{children:""}),k,"%"]}),s.jsx("div",{className:"w-px h-6 self-center",style:{backgroundColor:"var(--border-default)"}}),o&&!r&&s.jsx(Kv,{content:p?"Build in progress...":d?"Run the workflow (F5)":"Build the project first to run",position:"bottom",delay:100,children:s.jsxs("button",{onClick:o,disabled:!d||p,className:`px-3 py-1.5 border rounded text-sm flex items-center gap-2 transition-opacity ${!d||p?"opacity-50 cursor-not-allowed":"hover:opacity-80"}`,style:{backgroundColor:!d||p?"var(--bg-secondary)":"var(--accent-success)",borderColor:!d||p?"var(--border-default)":"var(--accent-success)",color:!d||p?"var(--text-muted)":"white"},children:[s.jsx("span",{children:p?"":""})," ",p?"Building...":"Run"]})}),a&&r&&s.jsxs("button",{onClick:a,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--accent-error)",borderColor:"var(--accent-error)",color:"white"},title:"Stop execution",children:[s.jsx("span",{children:""})," Stop"]})]})}let jc=null;function H7(){const e=jc;return jc=null,e}function V7(e,t,n,r,o,a){const l=o-n,u=a-r,d=l*l+u*u;if(d===0)return{dist:Math.sqrt((e-n)**2+(t-r)**2),t:0};const p=Math.max(0,Math.min(1,((e-n)*l+(t-r)*u)/d)),f=n+p*l,m=r+p*u;return{dist:Math.sqrt((e-f)**2+(t-m)**2),t:p}}function U7(e,t,n,r,o=200){let a=null,l=o;for(const u of n){const d=r.get(u.from),p=r.get(u.to);if(!d||!p)continue;const{dist:f,t:m}=V7(e,t,d.x,d.y,p.x,p.y);f<l&&m>.05&&m<.95&&(l=f,a=u)}return a}const Wy=220;function W7(e,t,n,r,o,a){const l=r(),u=n==="LR"||n==="RL",d=new Map;for(const O of l){const I=O.measured?.width??O.width??180,H=O.measured?.height??O.height??80;d.set(O.id,{x:O.position.x,y:O.position.y,w:I,h:H})}const p={};for(const O of a)p[O.from]||(p[O.from]=[]),p[O.from].push(O.to);const m=a.find(O=>O.to===e)?.from,g=m?d.get(m):null,v=new Set,b=new Set([e]),x=p[e]||[];for(const O of x)b.has(O)||(b.add(O),v.add(O));const _=[...v];for(;_.length>0;){const O=_.shift();for(const I of p[O]||[])b.has(I)||(b.add(I),v.add(I),_.push(I))}if(v.size===0)return;const k=O=>u?O.x:O.y,S=k(t);let N=1/0;for(const O of v){const I=d.get(O);if(!I)continue;const H=k(I);H<N&&(N=H)}const T=N-S,A=Wy-T;let C=0;if(g){const O=k(g)+(u?g.w||180:g.h||80),I=S-O;I<Wy*.4&&(C=Wy*.4-I)}const P=Math.max(0,A)+C;P<=0&&C<=0||o(O=>O.map(I=>I.id===e&&C>0?{...I,position:u?{x:I.position.x+C,y:I.position.y}:{x:I.position.x,y:I.position.y+C}}:v.has(I.id)&&P>0?{...I,position:u?{x:I.position.x+P,y:I.position.y}:{x:I.position.x,y:I.position.y+P}}:I))}function K7({createAgentWithUndo:e,selectedNodeId:t,applyLayout:n,invalidateBuild:r}){const{screenToFlowPosition:o,getNodes:a,setNodes:l}=Ki(),u=De(S=>S.addActionNode),d=De(S=>S.addEdge),p=De(S=>S.removeEdge),f=De(S=>S.selectActionNode),m=De(S=>S.addToolToAgent),g=(S,N)=>{S.dataTransfer.setData("application/reactflow",N),S.dataTransfer.effectAllowed="move"},v=(S,N)=>{S.dataTransfer.setData("application/actionnode",N),S.dataTransfer.effectAllowed="move"},b=j.useCallback((S,N,T)=>{const A=De.getState().currentProject;if(!A)return;if(N){const I=Object.values(A.actionNodes||{}).find(H=>H.type==="trigger");if(I&&I.id!==S){De.getState().removeActionNode(S),alert("Only one trigger node is allowed per workflow. Remove the existing trigger first.");return}d(S,"START");return}const C=a(),P=new Map;for(const I of C){const H=I.measured?.width??I.width??180,D=I.measured?.height??I.height??80;P.set(I.id,{x:I.position.x+H/2,y:I.position.y+D/2})}if(T){const I=A.workflow.edges.filter(D=>D.to!=="START"),H=U7(T.x,T.y,I,P);if(H){p(H.from,H.to),d(H.from,S),d(S,H.to),setTimeout(()=>{const D=De.getState().currentProject?.workflow.edges||[],z=De.getState().layoutDirection;W7(S,T,z,a,l,D)},50);return}}const O=A.workflow.edges.find(I=>I.to==="END");O?(p(O.from,"END"),d(O.from,S)):d("START",S),d(S,"END")},[d,p,a,l]),x=j.useCallback((S,N)=>{if(!De.getState().currentProject)return;const A=`${S}_${Date.now()}`,C=S.charAt(0).toUpperCase()+S.slice(1),P=lA(A,C,`${S}Result`);let O;switch(S){case"trigger":O={...P,type:"trigger",triggerType:"manual"};break;case"http":O={...P,type:"http",method:"GET",url:"https://api.example.com",auth:{type:"none"},headers:{},body:{type:"none"},response:{type:"json"}};break;case"set":O={...P,type:"set",mode:"set",variables:[]};break;case"transform":O={...P,type:"transform",transformType:"jsonpath",expression:""};break;case"switch":O={...P,type:"switch",evaluationMode:"first_match",conditions:[]};break;case"loop":O={...P,type:"loop",loopType:"forEach",forEach:{sourceArray:"",itemVar:"item",indexVar:"index"},parallel:{enabled:!1},results:{collect:!0}};break;case"merge":O={...P,type:"merge",mode:"wait_all",combineStrategy:"array",timeout:{enabled:!1,ms:3e4,behavior:"error"}};break;case"wait":O={...P,type:"wait",waitType:"fixed",fixed:{duration:1e3,unit:"ms"}};break;case"code":O={...P,type:"code",language:"javascript",code:`// Your code here
return input;`,sandbox:{networkAccess:!1,fileSystemAccess:!1,memoryLimit:128,timeLimit:5e3}};break;case"database":O={...P,type:"database",dbType:"postgresql",connection:{connectionString:""}};break;case"email":O={...P,type:"email",mode:"send",smtp:{host:"smtp.example.com",port:587,secure:!0,username:"",password:"",fromEmail:""},recipients:{to:""},content:{subject:"",body:"",bodyType:"text"},attachments:[]};break;default:return}u(A,O),b(A,S==="trigger",N),f(A),r("onAgentAdd"),N||setTimeout(()=>n(),100)},[u,b,f,n,r]),_=j.useCallback(S=>{S.preventDefault(),S.dataTransfer.dropEffect=S.dataTransfer.types.includes("text/plain")?"copy":"move"},[]),k=j.useCallback(S=>{S.preventDefault();const N=De.getState().currentProject,T=o({x:S.clientX,y:S.clientY}),A=S.dataTransfer.getData("text/plain");if(A.startsWith("tool:")&&t&&N?.agents[t]){m(t,A.slice(5)),r("onToolAdd");return}const C=S.dataTransfer.getData("application/actionnode");if(C){jc=T,x(C,T);return}const P=S.dataTransfer.getData("application/reactflow");if(P){jc=T;const O=e(P,!0);O&&b(O,!1,T),r("onAgentAdd")}},[e,x,t,m,r,o]);return{onDragStart:g,onActionDragStart:v,onDragOver:_,onDrop:k,createActionNode:x}}function uC(e){return`action_${e}`}function G7(e){if(!e)return"";const t=Object.keys(e.agents).sort().join(","),n=Object.keys(e.actionNodes||{}).sort().join(","),r=Object.entries(e.agents).map(([l,u])=>`${l}:${u.model||""}`).sort().join("|"),o=Object.entries(e.agents).map(([l,u])=>`${l}:${(u.tools||[]).join("+")}`).sort().join("|"),a=e.workflow.edges.map(l=>`${l.from}->${l.to}`).sort().join(",");return`${t}|${n}|${r}|${o}|${a}`}function Y7(e,t){const[n,r,o]=Yq([]),[a,l,u]=Qq([]),{activeAgent:d,iteration:p,flowPhase:f,thoughts:m={},stateKeys:g,showDataFlowOverlay:v,highlightedKey:b,onKeyHover:x,executionPath:_=[],isExecuting:k=!1,interruptedNodeId:S=null}=t,N=De(O=>O.layoutDirection),T=N==="LR"||N==="RL",A=j.useRef(""),C=j.useRef([]);j.useEffect(()=>{C.current=n},[n]);const P=j.useMemo(()=>G7(e),[e]);return j.useEffect(()=>{if(!e){r([]);return}if(P===A.current)return;const O=A.current==="";A.current=P;const I=H7(),H=new Map;for(const le of C.current)H.set(le.id,{x:le.position.x,y:le.position.y});const D=Object.keys(e.agents),z=Object.keys(e.actionNodes||{});if(D.length===0&&z.length===0){r([]);return}const W=new Set(D.flatMap(le=>e.agents[le].sub_agents||[])),L=D.filter(le=>!W.has(le)),q=e.workflow.edges.filter(le=>le.to==="START").map(le=>le.from).filter(le=>z.includes(le)||L.includes(le)),$=[...L,...z].filter(le=>!q.includes(le)),G=new Set([...$,"START","END"]),U={},X={};for(const le of G)U[le]=[],X[le]=0;for(const le of e.workflow.edges)q.includes(le.from)||G.has(le.from)&&G.has(le.to)&&(U[le.from].push(le.to),X[le.to]=(X[le.to]||0)+1);const R={},B=["START"];for(R.START=0;B.length>0;){const le=B.shift();for(const ge of U[le]||[]){const _e=R[le]+1;(R[ge]===void 0||_e>R[ge])&&(R[ge]=_e,B.push(ge))}}const Y=Math.max(0,...Object.values(R));for(const le of $)R[le]===void 0&&(R[le]=Y+1);R.END===void 0&&(R.END=Y+1);const F={};for(const[le,ge]of Object.entries(R))le==="START"||le==="END"||$.includes(le)&&(F[ge]||(F[ge]=[]),F[ge].push(le));const K=[],J=200,te=250,re=100,V=re+(q.length>0?J:0),ne=300,de=(le,ge)=>!H.has(le)&&I?{x:I.x,y:I.y}:H.has(le)&&!O?H.get(le):ge;q.forEach((le,ge)=>{const _e=e.actionNodes?.[le];if(_e){const Ce=de(le,T?{x:re,y:200}:{x:ne,y:re}),Se=uC(_e.type);K.push({id:le,type:Se,position:Ce,data:{..._e}})}});const ve=R.END||Y+1;if($.length>0||q.length>0){const le=T?{x:V,y:200}:{x:ne,y:V},ge=T?{x:V+ve*J,y:200}:{x:ne,y:V+ve*J};K.push({id:"START",position:H.get("START")||le,data:{},type:"start"},{id:"END",position:H.get("END")||ge,data:{},type:"end"})}for(const[le,ge]of Object.entries(F)){const _e=Number(le),we=ge.length;ge.forEach((Ce,Se)=>{const Qe=(Se-(we-1)/2)*te,Oe=V+_e*J,he=T?{x:Oe,y:200+Qe}:{x:ne+Qe,y:Oe},Ee=de(Ce,he),Ae=e.agents[Ce];if(Ae){const lt=(Ae.sub_agents||[]).reduce((ot,ae)=>(ot[ae]=e.agents[ae]?.tools||[],ot),{});Ae.type==="sequential"?K.push({id:Ce,type:"sequential",position:Ee,data:{label:Ce,subAgents:Ae.sub_agents,subAgentTools:lt}}):Ae.type==="loop"?K.push({id:Ce,type:"loop",position:Ee,data:{label:Ce,subAgents:Ae.sub_agents,subAgentTools:lt,maxIterations:Ae.max_iterations||3}}):Ae.type==="parallel"?K.push({id:Ce,type:"parallel",position:Ee,data:{label:Ce,subAgents:Ae.sub_agents,subAgentTools:lt}}):Ae.type==="router"?K.push({id:Ce,type:"router",position:Ee,data:{label:Ce,routes:Ae.routes||[]}}):K.push({id:Ce,type:"llm",position:Ee,data:{label:Ce,model:Ae.model,tools:Ae.tools||[]}});return}const Ve=e.actionNodes?.[Ce];if(Ve){const lt=uC(Ve.type);K.push({id:Ce,type:lt,position:Ee,data:{...Ve}})}})}r(K)},[e,P,r]),j.useEffect(()=>{e&&r(O=>O.map(I=>{if(I.id==="START"||I.id==="END"){const $=_.includes(I.id);return{...I,data:{...I.data,isInExecutionPath:$},className:$?"node-execution-path":void 0}}const H=e.actionNodes?.[I.id];if(H){const $=d===I.id,G=_.includes(I.id),U=S===I.id;return{...I,data:{...I.data,...H,isActive:$,isInterrupted:U,isInExecutionPath:G},className:U?"node-interrupted":$?"node-active":G?"node-execution-path":void 0}}const D=e.agents[I.id];if(!D)return I;const z=d===I.id||d&&D.sub_agents?.includes(d),W=d&&D.sub_agents?.includes(d)?d:void 0,L=_.includes(I.id),q=S===I.id;return{...I,data:{...I.data,isActive:z,isInterrupted:q,activeSubAgent:W,currentIteration:D.type==="loop"?p:void 0,thought:I.type==="llm"?m[I.id]:void 0,isInExecutionPath:L},className:q?"node-interrupted":z?"node-active":L?"node-execution-path":void 0}}))},[e,d,p,m,_,S,r]),j.useEffect(()=>{if(!e)return;const O=Object.entries(e.actionNodes||{}).find(([I,H])=>H.type==="trigger")?.[0];l(e.workflow.edges.map((I,H)=>{const D=f==="trigger_input"&&I.from===O&&I.to==="START",z=_.indexOf(I.from),W=_.indexOf(I.to),L=z!==-1&&W!==-1&&W===z+1,q=k&&d&&I.to===d&&_.includes(I.from),$=f==="output"&&I.to==="END"&&_.includes(I.from),G=D||q||$,U=e.actionNodes?.[I.from]!==void 0,X=e.actionNodes?.[I.to]!==void 0,R=I.from==="START"||I.from==="END",B=I.to==="START"||I.to==="END";let Y,F;U?Y="output-0":Y=T?"right":"bottom",X?F="input-0":F=T?"left":"top";const K=L&&!G;return{id:`e${H}-${N}${G?"-anim":K?"-path":""}`,source:I.from,target:I.to,type:v?"dataflow":"animated",data:{animated:G,stateKeys:g?.get(I.from)||[],showOverlay:v,highlightedKey:b,onKeyHover:x,isExecutionPath:K},sourceHandle:I.fromPort||Y,targetHandle:I.toPort||F}}))},[e?.workflow.edges,f,d,l,N,T,g,v,b,x,_,k]),{nodes:n,edges:a,setNodes:r,setEdges:l,onNodesChange:o,onEdgesChange:u}}function Q7(){const e=De(u=>u.addAgent),t=De(u=>u.removeAgent),n=De(u=>u.addEdge),r=De(u=>u.removeEdge),o=De(u=>u.selectNode),a=j.useCallback((u="llm",d)=>{const p=De.getState().currentProject;if(!p)return;const f={sequential:"seq",loop:"loop",parallel:"par",router:"router"}[u]||"agent",m=Object.keys(p.agents),g=new RegExp(`^${f}_(\\d+)$`);let v=0;for(const O of m){const I=O.match(g);I&&(v=Math.max(v,parseInt(I[1],10)))}const b=`${f}_${v+1}`,x=m.length,_=250,k=100,S=200,N=250,T=p.settings.defaultProvider||"gemini",A=p.settings.default_model||"gemini-2.0-flash",C=T==="gemini"?["google_search"]:[];if(["sequential","loop","parallel"].includes(u)){const O=`${b}_agent_1`,I=`${b}_agent_2`,H=u==="loop";e(O,{type:"llm",model:A,instruction:H?"Process and refine.":"Agent 1.",tools:[...C],sub_agents:[],position:{x:0,y:0}}),e(I,{type:"llm",model:A,instruction:H?"Review. Call exit_loop when done.":"Agent 2.",tools:H?["exit_loop",...C]:[...C],sub_agents:[],position:{x:0,y:0}}),e(b,{type:u,instruction:"",tools:[],sub_agents:[O,I],position:{x:_+x*N,y:k},max_iterations:H?3:void 0})}else u==="router"?e(b,{type:"router",model:A,instruction:"Route based on intent.",tools:[...C],sub_agents:[],position:{x:_+x*S,y:k},routes:[{condition:"default",target:"END"}]}):e(b,{type:"llm",model:A,instruction:"You are a helpful assistant.",tools:[...C],sub_agents:[],position:{x:_+x*S,y:k}});const P=De.getState().currentProject;if(!P)return b;if(!d){const O=P.workflow.edges.find(I=>I.to==="END");O?(r(O.from,"END"),n(O.from,b)):n("START",b),n(b,"END")}return o(b),b},[e,n,r,o]),l=j.useCallback(u=>{const d=De.getState().currentProject;if(!d)return null;const p=d.agents[u];if(!p)return null;const f=`${u}_copy`;return e(f,{...p,position:{x:(p.position?.x||50)+50,y:(p.position?.y||50)+50}}),f},[e]);return{createAgent:a,duplicateAgent:l,removeAgent:t}}function X7(e,t){const n=Vo(),r={showMinimap:e?.showMinimap??n.showMinimap,showDataFlowOverlay:e?.showDataFlowOverlay??n.showDataFlowOverlay,showTimeline:e?.showTimeline??n.showTimeline,showConsole:!0},[o,a]=j.useState({x:0,y:0,zoom:1}),[l,u]=j.useState(r);j.useEffect(()=>{e&&u(k=>({...k,showMinimap:e.showMinimap??k.showMinimap,showDataFlowOverlay:e.showDataFlowOverlay??k.showDataFlowOverlay,showTimeline:e.showTimeline??k.showTimeline}))},[e?.showMinimap,e?.showDataFlowOverlay,e?.showTimeline]);const d=j.useCallback(()=>{u(k=>{const S=!k.showMinimap;return t?.("showMinimap",S),{...k,showMinimap:S}})},[t]),p=j.useCallback(()=>{u(k=>{const S=!k.showDataFlowOverlay;return t?.("showDataFlowOverlay",S),{...k,showDataFlowOverlay:S}})},[t]),f=j.useCallback(()=>{u(k=>{const S=!k.showTimeline;return t?.("showTimeline",S),{...k,showTimeline:S}})},[t]),m=j.useCallback(()=>{u(k=>({...k,showConsole:!k.showConsole}))},[]),g=j.useCallback(k=>{u(S=>({...S,showMinimap:k})),t?.("showMinimap",k)},[t]),v=j.useCallback(k=>{u(S=>({...S,showDataFlowOverlay:k})),t?.("showDataFlowOverlay",k)},[t]),b=j.useCallback(k=>{u(S=>({...S,showTimeline:k})),t?.("showTimeline",k)},[t]),x=j.useCallback(k=>{u(S=>({...S,showConsole:k}))},[]),_=j.useCallback(k=>{a(k)},[]);return{viewport:o,setViewport:a,onViewportChange:_,showMinimap:l.showMinimap,showDataFlowOverlay:l.showDataFlowOverlay,showTimeline:l.showTimeline,showConsole:l.showConsole,toggleMinimap:d,toggleDataFlowOverlay:p,toggleTimeline:f,toggleConsole:m,setShowMinimap:g,setShowDataFlowOverlay:v,setShowTimeline:b,setShowConsole:x}}function J7(){return Vo().autobuildTriggers}const j2="adk-studio-autobuild";function Z7(){try{const e=localStorage.getItem(j2);return e!==null?e==="true":Vo().autobuildEnabled}catch{return!0}}function eY(e){try{localStorage.setItem(j2,String(e))}catch{}}function tY(e,t,n,r){const[o,a]=j.useState(!1),[l,u]=j.useState(null),[d,p]=j.useState(null),[f,m]=j.useState(null),[g,v]=j.useState(()=>n!==void 0?n:Z7()),[b,x]=j.useState(!1),_=j.useRef(null),k=j.useRef(null);j.useEffect(()=>{n!==void 0&&v(n)},[n]);const S=j.useCallback(async()=>{if(!e)return null;try{const W=await Jt.projects.compile(e);return m(W),W}catch(W){return alert("Compile failed: "+W.message),null}},[e]),N=j.useCallback(async W=>{if(!e||o||r&&!r())return;a(!0),x(W),W||u({success:!1,output:"",path:null}),k.current&&k.current.close();const L=new EventSource(`/api/projects/${e}/build-stream`);k.current=L;let q="";L.addEventListener("status",$=>{q+=$.data+`
`,(!W||T.current)&&u({success:!1,output:q,path:null})}),L.addEventListener("output",$=>{q+=$.data+`
`,(!W||T.current)&&u({success:!1,output:q,path:null})}),L.addEventListener("done",$=>{(!W||T.current)&&u({success:!0,output:q,path:$.data}),p($.data),a(!1),x(!1),L.close(),k.current=null}),L.addEventListener("error",$=>{q+=`
Error: `+($.data||"Build failed"),u({success:!1,output:q,path:null}),a(!1),x(!1),L.close(),k.current=null}),L.onerror=()=>{a(!1),x(!1),L.close(),k.current=null}},[e,o,r]),T=j.useRef(!1);j.useEffect(()=>{T.current=l!==null},[l]);const A=j.useCallback(async()=>{await N(!1)},[N]),C=j.useCallback(W=>{!g||o||W&&!(t||J7())[W]||(_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{N(!0)},1e3))},[g,o,N,t]),P=j.useCallback(()=>{u(null)},[]),O=j.useCallback(()=>{m(null)},[]),I=j.useCallback(W=>{p(null),C(W)},[C]),H=j.useCallback(()=>{const W=!g;v(W),eY(W),W&&!d&&!o&&C()},[g,d,o,C]),D=j.useCallback(()=>{o&&b&&u({success:!1,output:"Build in progress...",path:null})},[o,b]),z=j.useCallback(W=>{p(W)},[]);return j.useEffect(()=>()=>{_.current&&clearTimeout(_.current),k.current&&k.current.close()},[]),{building:o,buildOutput:l,builtBinaryPath:d,compiledCode:f,autobuildEnabled:g,isAutobuild:b,build:A,compile:S,clearBuildOutput:P,clearCompiledCode:O,invalidateBuild:I,toggleAutobuild:H,showBuildProgress:D,setBinaryPath:z,needsBuild:!d}}const dC={path:[],activeNodeId:null,isExecuting:!1};function nY(){const[e,t]=j.useState(dC),n=j.useCallback(()=>{t({path:["START"],activeNodeId:"START",isExecuting:!0})},[]),r=j.useCallback(v=>{t(b=>({...b,path:[...b.path,v],activeNodeId:v}))},[]),o=j.useCallback(()=>{t(v=>({...v,path:[...v.path,"END"],activeNodeId:null,isExecuting:!1}))},[]),a=j.useCallback(()=>{t(dC)},[]),l=j.useCallback(v=>e.path.includes(v),[e.path]),u=j.useCallback(v=>e.activeNodeId===v,[e.activeNodeId]),d=j.useCallback((v,b)=>{const x=e.path.indexOf(v),_=e.path.indexOf(b);return x!==-1&&_!==-1&&_===x+1},[e.path]),p=j.useCallback((v,b)=>e.isExecuting&&b===e.activeNodeId&&e.path.includes(v),[e.isExecuting,e.activeNodeId,e.path]),f=j.useCallback(v=>v.filter(b=>d(b.from,b.to)),[d]),m=j.useCallback(v=>u(v)?"active":l(v)?"path":"none",[u,l]),g=j.useCallback((v,b)=>p(v,b)?"animated":d(v,b)?"path":"none",[p,d]);return{...e,startExecution:n,moveToNode:r,completeExecution:o,resetPath:a,isNodeInPath:l,isNodeActive:u,isEdgeInPath:d,isEdgeAnimated:p,getPathEdges:f,getNodeStatus:m,getEdgeStatus:g}}function rY(e){const{showDataFlowOverlay:t,setShowDataFlowOverlay:n}=e,[r,o]=j.useState("idle"),[a,l]=j.useState(null),[u,d]=j.useState(0),[p,f]=j.useState({}),m=nY(),g=j.useRef(m);g.current=m;const[v,b]=j.useState(!1),[x,_]=j.useState([]),[k,S]=j.useState(-1),[N,T]=j.useState(null),[A,C]=j.useState(!0),[P,O]=j.useState(null),[I,H]=j.useState(new Map),[D,z]=j.useState(null),W=j.useRef([]),L=j.useRef(!1),q=j.useRef(null),$=j.useRef(!1),G=j.useRef(!1),U=j.useCallback(ne=>{o(ne);const de=g.current;ne==="trigger_input"?(W.current=[],L.current=!1,$.current=!1,G.current=!1,q.current=null,de.startExecution()):ne==="idle"&&de.isExecuting&&(L.current||W.current.length>0?G.current=!0:de.completeExecution())},[]),X=j.useCallback(()=>{if(L.current)return;const ne=W.current.shift();if(!ne){if($.current&&($.current=!1,q.current=null,l(null)),G.current){G.current=!1;const ve=g.current;ve.isExecuting&&ve.completeExecution()}return}L.current=!0,q.current=ne,l(ne);const de=g.current;de.isExecuting&&!de.path.includes(ne)&&de.moveToNode(ne),setTimeout(()=>{L.current=!1,X()},300)},[]),R=j.useCallback(ne=>{if(!ne){$.current=!0,!L.current&&W.current.length===0&&($.current=!1,q.current=null,l(null));return}if($.current=!1,q.current===ne)return;const de=W.current;de.length>0&&de[de.length-1]===ne||(de.push(ne),X())},[X]),B=j.useCallback((ne,de)=>{f(ve=>de?{...ve,[ne]:de}:Object.fromEntries(Object.entries(ve).filter(([le])=>le!==ne)))},[]),Y=j.useCallback(ne=>{z(ne)},[]),F=j.useCallback(()=>{n(!t)},[t,n]),K=j.useCallback(ne=>{O(ne?.nodeId||null)},[]),J=j.useCallback((ne,de,ve,le)=>{_(ne),S(de),T(()=>ve),le&&H(le)},[]),te=j.useMemo(()=>k<0||k>=x.length?null:x[k],[x,k]),re=j.useMemo(()=>{const ne=k-1;return ne<0||ne>=x.length?null:x[ne]},[x,k]),V=j.useCallback(ne=>{N&&N(ne)},[N]);return{flowPhase:r,activeAgent:a,iteration:u,setIteration:d,thoughts:p,executionPath:m,timelineCollapsed:v,setTimelineCollapsed:b,snapshots:x,currentSnapshotIndex:k,scrubToFn:N,showStateInspector:A,setShowStateInspector:C,currentSnapshot:te,previousSnapshot:re,interruptedNodeId:P,stateKeys:I,highlightedKey:D,handleFlowPhase:U,handleActiveAgent:R,handleThought:B,handleKeyHover:Y,handleToggleDataFlowOverlay:F,handleInterruptChange:K,handleSnapshotsChange:J,handleStateHistorySelect:V}}function oY(e,t){if(e==="START")return!1;const n=t[e];return!(n&&n.type==="trigger")}function iY(e){return e!=="END"}function sY(e,t){if(e==="START")return 0;const n=t[e];if(n){if(n.type==="trigger")return 0;if(n.type==="merge")return 1/0}return 1}function aY(e,t,n,r,o){if(e===t)return{valid:!1,reason:"Cannot connect a node to itself"};if(!iY(e))return{valid:!1,reason:"Source node cannot have outgoing connections"};if(!oY(t,r))return r[t]?.type==="trigger"?{valid:!1,reason:"Trigger nodes are entry points and cannot have incoming connections"}:{valid:!1,reason:"Target node cannot have incoming connections"};if(o.some(u=>u.from===e&&u.to===t))return{valid:!1,reason:"Connection already exists"};const l=sY(t,r);return l!==1/0&&o.filter(d=>d.to===t).length>=l?{valid:!1,reason:`Target node already has maximum inputs (${l})`}:{valid:!0}}function lY(e){const{currentProject:t,removeAgentWithUndo:n,removeActionNode:r,invalidateBuild:o,applyLayout:a,debouncedSave:l}=e,{selectNode:u,selectActionNode:d,addEdge:p,removeEdge:f,updateAgent:m,updateToolConfig:g,addToolToAgent:v,selectTool:b}=De(),x=j.useCallback(O=>{if(O.source&&O.target&&t){const I=aY(O.source,O.target,t.agents,t.actionNodes||{},t.workflow.edges);if(!I.valid){console.warn("Invalid connection:",I.reason);return}const H=O.sourceHandle||void 0,D=O.targetHandle||void 0;p(O.source,O.target,H,D),o("onEdgeAdd")}},[p,o,t]),_=j.useCallback(O=>{O.forEach(I=>f(I.source,I.target)),O.length>0&&o("onEdgeDelete")},[f,o]),k=j.useCallback(O=>{let I=!1,H=!1;O.forEach(D=>{D.id==="START"||D.id==="END"||(D.type?.startsWith("action_")?(r(D.id),I=!0):(n(D.id),H=!0))}),I&&!H&&(o("onAgentDelete"),setTimeout(()=>a(),100))},[n,r,o,a]),S=j.useCallback((O,I)=>{f(I.source,I.target),o("onEdgeDelete")},[f,o]),N=j.useCallback((O,I)=>{if(I.id==="START"||I.id==="END"){u(null),d(null);return}I.type?.startsWith("action_")?(d(I.id),u(null)):(u(I.id),d(null))},[u,d]),T=j.useCallback(()=>{u(null),d(null)},[u,d]),A=j.useCallback((O,I)=>{m(O,I),o("onAgentUpdate"),l()},[m,o,l]),C=j.useCallback((O,I)=>{g(O,I),o("onToolUpdate"),l()},[g,o,l]),P=j.useCallback(O=>{const I=De.getState().selectedNodeId;if(!I)return;v(I,O);const H=t?.agents[I]?.tools||[],z=O==="function"||O==="mcp"?`${I}_${O}_${H.filter(W=>W.startsWith(O)).length+1}`:`${I}_${O}`;setTimeout(()=>b(z),0)},[t,v,b]);return{onConnect:x,onEdgesDelete:_,onNodesDelete:k,onEdgeDoubleClick:S,onNodeClick:N,onPaneClick:T,updateAgent:A,updateToolConfig:C,handleAddTool:P}}const Jl=20,E2=ba((e,t)=>({undoStack:[],redoStack:[],canUndo:!1,canRedo:!1,recordAddNode:(n,r,o,a)=>{const l={type:"add_node",timestamp:Date.now(),nodeId:n,agent:r,edges:o,edgesBefore:a};e(u=>{const d=[...u.undoStack,l];return d.length>Jl&&d.shift(),{undoStack:d,redoStack:[],canUndo:!0,canRedo:!1}})},recordDeleteNode:(n,r,o,a)=>{const l={type:"delete_node",timestamp:Date.now(),nodeId:n,agent:r,edges:o,edgesBefore:a};e(u=>{const d=[...u.undoStack,l];return d.length>Jl&&d.shift(),{undoStack:d,redoStack:[],canUndo:!0,canRedo:!1}})},popUndo:()=>{const{undoStack:n}=t();if(n.length===0)return null;const r=n[n.length-1];return e(o=>({undoStack:o.undoStack.slice(0,-1),canUndo:o.undoStack.length>1})),r},popRedo:()=>{const{redoStack:n}=t();if(n.length===0)return null;const r=n[n.length-1];return e(o=>({redoStack:o.redoStack.slice(0,-1),canRedo:o.redoStack.length>1})),r},pushRedo:n=>{e(r=>{const o=[...r.redoStack,n];return o.length>Jl&&o.shift(),{redoStack:o,canRedo:!0}})},pushUndo:n=>{e(r=>{const o=[...r.undoStack,n];return o.length>Jl&&o.shift(),{undoStack:o,canUndo:!0}})},clearHistory:()=>{e({undoStack:[],redoStack:[],canUndo:!1,canRedo:!1})}}));function cY(e){const t=E2();return{undo:()=>{const l=t.popUndo();l&&(l.type==="add_node"?(e.onRemoveNode(l.nodeId),e.onSetEdges(l.edgesBefore)):l.type==="delete_node"&&(e.onAddNode(l.nodeId,l.agent),e.onSetEdges(l.edgesBefore)),t.pushRedo(l))},redo:()=>{const l=t.popRedo();if(l){if(l.type==="add_node"){e.onAddNode(l.nodeId,l.agent);const u=[...l.edgesBefore];l.edges.forEach(d=>{const p=u.findIndex(f=>d.from===l.nodeId&&f.to===d.to||d.to===l.nodeId&&f.from===d.from);p>=0&&u.splice(p,1)}),l.edges.forEach(d=>{u.some(p=>p.from===d.from&&p.to===d.to)||u.push(d)}),e.onSetEdges(u)}else if(l.type==="delete_node"){e.onRemoveNode(l.nodeId);const u=l.edgesBefore.filter(d=>d.from!==l.nodeId&&d.to!==l.nodeId);e.onSetEdges(u)}t.pushUndo(l)}},recordAddNode:(l,u,d,p)=>{t.recordAddNode(l,u,d,p)},recordDeleteNode:(l,u)=>{const d=e.getAgent(l);if(!d)return;const p=e.getEdgesForNode(l);t.recordDeleteNode(l,d,p,u)},canUndo:t.canUndo,canRedo:t.canRedo,clearHistory:t.clearHistory}}function uY(e){const{createAgent:t,removeAgent:n,removeActionNode:r,applyLayout:o,invalidateBuild:a,currentProjectId:l,nodeCount:u}=e,{addAgent:d,addEdge:p,removeEdge:f}=De(),{clearHistory:m}=E2(),g=j.useCallback(C=>{const P=De.getState().currentProject;return P?P.workflow.edges.filter(O=>O.from===C||O.to===C):[]},[]),v=j.useCallback(()=>De.getState().currentProject?.workflow.edges||[],[]),b=j.useCallback(C=>De.getState().currentProject?.agents[C],[]),x=j.useCallback(C=>{De.getState().setEdges(C)},[]),_=cY({onAddNode:(C,P)=>{d(C,P)},onRemoveNode:C=>{De.getState().removeAgent(C)},onAddEdge:p,onRemoveEdge:f,onSetEdges:x,getAgent:b,getEdgesForNode:g,getAllEdges:v}),k=j.useCallback((C,P)=>{const O=[...De.getState().currentProject?.workflow.edges||[]],I=t(C,P);return setTimeout(()=>{const D=De.getState().currentProject;if(!D)return;const z=D.workflow.edges.filter(L=>!O.some(q=>q.from===L.from&&q.to===L.to)),W=z.find(L=>L.to==="END")?.from||(I&&D.agents[I]?I:void 0);W&&D.agents[W]&&_.recordAddNode(W,D.agents[W],z,O)},0),I},[t,_]),S=j.useCallback(C=>{if(C==="START"||C==="END")return;const P=[...De.getState().currentProject?.workflow.edges||[]];_.recordDeleteNode(C,P),n(C),a("onAgentDelete"),setTimeout(()=>o(),100)},[n,_,a,o]),N=j.useCallback(C=>{r(C),a("onAgentDelete"),setTimeout(()=>o(),100)},[r,a,o]),T=j.useRef(null),A=j.useRef(null);return l!==T.current&&(T.current=l||null,A.current=null,m()),j.useEffect(()=>{if(!l||u===0||A.current===l)return;const C=setTimeout(()=>{o()},100),P=setTimeout(()=>{o(),A.current=l},300);return()=>{clearTimeout(C),clearTimeout(P)}},[l,u,o]),{undoRedo:_,createAgentWithUndo:k,removeAgentWithUndo:S,removeActionNodeWithLayout:N}}function dY(){const{currentProject:e,openProject:t,closeProject:n,saveProject:r,selectedNodeId:o,selectedToolId:a,selectTool:l,renameAgent:u,addEdge:d,removeToolFromAgent:p,addSubAgentToContainer:f,addAgent:m,addActionNode:g,selectedActionNodeId:v,selectActionNode:b,selectNode:x,showDataFlowOverlay:_,setShowDataFlowOverlay:k,debugMode:S,setDebugMode:N,updateProjectMeta:T,updateProjectSettings:A,snapToGrid:C,gridSize:P,showApiKeySetup:O,clearApiKeySetup:I}=De(),H=j.useCallback((rt,Nt)=>{A({[rt]:Nt})},[A]),{showConsole:D,toggleConsole:z,showMinimap:W,toggleMinimap:L,showTimeline:q}=X7(e?.settings,H),$=j.useCallback(()=>{if(!e)return!1;const rt=Object.keys(e.agents).length,Nt=Object.keys(e.actionNodes||{}).length;return(rt>0||Nt>0)&&e.workflow.edges.length>0},[e]),{building:G,buildOutput:U,builtBinaryPath:X,compiledCode:R,autobuildEnabled:B,isAutobuild:Y,build:F,compile:K,clearBuildOutput:J,clearCompiledCode:te,invalidateBuild:re,toggleAutobuild:V,showBuildProgress:ne,setBinaryPath:de}=tY(e?.id,e?.settings?.autobuildTriggers,e?.settings?.autobuildEnabled,$),ve=G?"building":U?.success?"success":U&&!U.success?"error":X?"success":"none",[le,ge]=j.useState(!1),[_e,we]=j.useState(null),Ce=j.useRef(null),[Se,Qe]=j.useState(!1),[Oe,he]=j.useState(!1),[Ee,Ae]=j.useState(!1),[Ve,lt]=j.useState(void 0),[ot,ae]=j.useState(!1);j.useEffect(()=>{O&&(lt("env"),ae(!0),Ae(!0),I())},[O,I]);const ce=rY({showDataFlowOverlay:_,setShowDataFlowOverlay:k}),{applyLayout:ke,fitToView:ze,zoomIn:Le,zoomOut:nt}=N2(),{createAgent:At,duplicateAgent:et,removeAgent:yt}=Q7(),fn=e?Object.keys(e.agents).length+Object.keys(e.actionNodes||{}).length:0,{undoRedo:ct,createAgentWithUndo:Rt,removeAgentWithUndo:St,removeActionNodeWithLayout:Cn}=uY({createAgent:At,removeAgent:yt,removeActionNode:De.getState().removeActionNode,applyLayout:ke,invalidateBuild:re,currentProjectId:e?.id,nodeCount:fn}),Hn=j.useRef(null),hn=j.useCallback(()=>{Hn.current&&clearTimeout(Hn.current),Hn.current=setTimeout(()=>r(),500)},[r]),{onConnect:Tn,onEdgesDelete:Lr,onNodesDelete:qr,onEdgeDoubleClick:Fr,onNodeClick:xr,onPaneClick:zr,updateAgent:br,updateToolConfig:mn,handleAddTool:Kt}=lY({currentProject:e,removeAgentWithUndo:St,removeActionNode:Cn,invalidateBuild:re,applyLayout:ke,debouncedSave:hn}),{nodes:pe,edges:Ue,onNodesChange:He,onEdgesChange:Ze}=Y7(e,{activeAgent:ce.activeAgent,iteration:ce.iteration,flowPhase:ce.flowPhase,thoughts:ce.thoughts,stateKeys:ce.stateKeys,showDataFlowOverlay:_,highlightedKey:ce.highlightedKey,onKeyHover:ce.handleKeyHover,executionPath:ce.executionPath.path,isExecuting:ce.executionPath.isExecuting,interruptedNodeId:ce.interruptedNodeId});p5({selectedNodeId:o,selectedToolId:a,selectedActionNodeId:v,onDeleteNode:St,onDeleteActionNode:Cn,onDeleteTool:p,onDuplicateNode:et,onSelectNode:x,onSelectActionNode:b,onSelectTool:l,onAutoLayout:ke,onFitView:ze,onZoomIn:Le,onZoomOut:nt,onUndo:ct.undo,onRedo:ct.redo,onRun:X?()=>{D||z(),le&&ge(!1),setTimeout(()=>we(Xo()),100)}:void 0});const{onDragStart:wt,onActionDragStart:gn,onDragOver:An,onDrop:yo,createActionNode:vo}=K7({createAgentWithUndo:Rt,selectedNodeId:o,applyLayout:ke,invalidateBuild:re});if(!e)return null;const Qo=o?e.agents[o]:null,kt=Object.keys(e.agents).length>0||Object.keys(e.actionNodes||{}).length>0,Vn=o?e.agents[o]?.tools||[]:[],xo=a&&e.tool_configs?.[a]?.type==="function"?e.tool_configs[a]:null,Xo=()=>{const rt=e.actionNodes||{},Nt=Object.values(rt).find(Gt=>Gt.type==="trigger"&&Gt.triggerType==="manual");return Nt&&Nt.type==="trigger"&&Nt.manual&&Nt.manual.defaultPrompt||zt.defaultPrompt},Jo=j.useCallback(async rt=>{he(!1);const Nt=await Jt.projects.create(rt);await t(Nt.id);const Gt=Vv.find(Yt=>Yt.id==="simple_chat");Gt&&(Gt.actionNodes&&Object.entries(Gt.actionNodes).forEach(([Yt,bo])=>{g(Yt,bo)}),Object.entries(Gt.agents).forEach(([Yt,bo])=>{m(Yt,bo)}),Gt.edges.forEach(Yt=>d(Yt.from,Yt.to)),setTimeout(()=>ke(),100))},[t,g,m,d,ke]),Zo=j.useCallback((rt,Nt,Gt)=>{T(Nt,Gt),A(rt),Ae(!1),lt(void 0),ae(!1)},[T,A]),{mode:ei}=Or(),wr=ei==="light",ts=wr?"#E3E6EA":"#333",ti="#4ade80",ut=wr?"#94a3b8":"#666";return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(eF,{onExportCode:()=>Qe(!0),onNewProject:()=>he(!0),onTemplateApplied:()=>setTimeout(()=>ke(),100),onRunTemplate:()=>{D||z(),X||F()},buildStatus:ve,onBuildStatusClick:()=>{G&&Y?ne():U||X||F()},debugMode:S,onDebugModeToggle:()=>N(!S)}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsx(kK,{onAgentDragStart:wt,onAgentCreate:rt=>{Rt(rt),re("onAgentAdd"),setTimeout(()=>ke(),100)},onActionDragStart:gn,onActionCreate:rt=>vo(rt),selectedNodeId:o,agentTools:Vn,onToolAdd:Kt,onToolRemove:rt=>o&&p(o,rt),onCompile:K,onBuild:F,building:G,isAutobuild:Y,builtBinaryPath:X,autobuildEnabled:B,onToggleAutobuild:V,onShowBuildProgress:ne,showConsole:D,onToggleConsole:z,debugMode:S,snapshotCount:ce.snapshots.length,showStateInspector:ce.showStateInspector,onToggleStateInspector:()=>ce.setShowStateInspector(!ce.showStateInspector),onShowSettings:()=>Ae(!0),onCloseProject:n}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(Vq,{nodes:pe,edges:Ue,nodeTypes:Tz,edgeTypes:Pz,onNodesChange:He,onEdgesChange:Ze,onEdgesDelete:Lr,onNodesDelete:qr,onEdgeDoubleClick:Fr,onConnect:Tn,onNodeClick:xr,onPaneClick:zr,onDrop:yo,onDragOver:An,deleteKeyCode:["Backspace","Delete"],defaultViewport:{x:0,y:0,zoom:1},minZoom:.1,maxZoom:2,snapToGrid:C,snapGrid:[P,P],proOptions:{hideAttribution:!0},connectionLineStyle:{stroke:"var(--accent-primary)",strokeWidth:2},defaultEdgeOptions:{type:"animated"},fitView:!0,fitViewOptions:{padding:.2,maxZoom:.9},nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,panOnDrag:!0,zoomOnScroll:!0,zoomOnPinch:!0,selectNodesOnDrag:!1,children:[s.jsx(t4,{color:ts,gap:P}),s.jsx(l4,{}),W&&s.jsx(w4,{nodeColor:rt=>rt.data?.isActive?ti:ut,maskColor:wr?"rgba(247, 248, 250, 0.8)":"rgba(0, 0, 0, 0.8)",style:{background:wr?"#F7F8FA":"#1a1a2e"}})]}),s.jsx($7,{onFitView:ze,showDataFlowOverlay:_,onToggleDataFlowOverlay:ce.handleToggleDataFlowOverlay,showMinimap:W,onToggleMinimap:L,isRunning:ce.flowPhase!=="idle",isBuilt:!!X,isBuilding:G,onRun:()=>{D||z(),le&&ge(!1),setTimeout(()=>we(Xo()),100)},onStop:()=>{Ce.current&&Ce.current()}})]}),s.jsx(NK,{selectedNodeId:o,selectedAgent:Qo,agents:e.agents,toolConfigs:e.tool_configs||{},onUpdateAgent:br,onRenameAgent:u,onAddSubAgent:rt=>f(rt),onCloseAgent:()=>x(null),onSelectTool:l,onRemoveToolFromAgent:(rt,Nt)=>p(rt,Nt),selectedActionNodeId:v,hasProject:!!e,onCloseActionNode:()=>b(null),selectedToolId:a,toolConfig:e.tool_configs?.[a||""]||null,onUpdateToolConfig:mn,onCloseTool:()=>l(null),onOpenCodeEditor:()=>Qe(!0),showConsole:D,debugMode:S,showStateInspector:ce.showStateInspector,snapshots:ce.snapshots,currentSnapshot:ce.currentSnapshot,previousSnapshot:ce.previousSnapshot,currentSnapshotIndex:ce.currentSnapshotIndex,onStateHistorySelect:ce.handleStateHistorySelect,onCloseStateInspector:()=>ce.setShowStateInspector(!1)})]}),s.jsx(QV,{showConsole:D,showTimeline:q,debugMode:S,hasRunnableWorkflow:kt,builtBinaryPath:X,snapshots:ce.snapshots,currentSnapshotIndex:ce.currentSnapshotIndex,scrubToFn:ce.scrubToFn,timelineCollapsed:ce.timelineCollapsed,onToggleTimelineCollapse:()=>ce.setTimelineCollapsed(!ce.timelineCollapsed),consoleCollapsed:le,onConsoleCollapseChange:ge,buildStatus:ve,autoSendPrompt:_e,onAutoSendComplete:()=>we(null),onCancelReady:rt=>{Ce.current=rt},onFlowPhase:ce.handleFlowPhase,onActiveAgent:ce.handleActiveAgent,onIteration:ce.setIteration,onThought:ce.handleThought,onSnapshotsChange:ce.handleSnapshotsChange,onInterruptChange:ce.handleInterruptChange,onBuild:F,onBinaryPathDetected:de}),s.jsx(i$,{compiledCode:R,onClearCompiledCode:te,buildOutput:U,building:G,isAutobuild:Y,onClearBuildOutput:J,showCodeEditor:Se,fnConfig:xo,selectedToolId:a,onUpdateToolConfig:mn,onCloseCodeEditor:()=>Qe(!1),showNewProjectModal:Oe,onNewProjectConfirm:Jo,onCloseNewProjectModal:()=>he(!1),showSettingsModal:Ee,projectId:e.id,projectSettings:e.settings,projectName:e.name,projectDescription:e.description,settingsInitialTab:Ve,showApiKeyBanner:ot,onSaveSettings:Zo,onCloseSettingsModal:()=>{Ae(!1),lt(void 0),ae(!1)}})]})}function pY({children:e}){const t=Or(n=>n.mode);return j.useEffect(()=>{document.documentElement.setAttribute("data-theme",t);const n=document.querySelector('meta[name="theme-color"]');n&&n.setAttribute("content",t==="light"?"#F7F8FA":"#1a1a2e")},[t]),s.jsx(s.Fragment,{children:e})}function fY({className:e="",size:t=18}){const{mode:n,toggle:r}=Or(),o=n==="light";return s.jsx("button",{onClick:r,className:`p-2 rounded-md transition-colors ${e}`,style:{color:"var(--text-secondary)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="var(--bg-secondary)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="transparent",title:o?"Switch to dark mode":"Switch to light mode","aria-label":o?"Switch to dark mode":"Switch to light mode",children:o?s.jsx(j5,{size:t,className:"transition-transform"}):s.jsx(O5,{size:t,className:"transition-transform"})})}function C2(e){switch(e){case"light":case"high-contrast-light":return"light";case"dark":case"high-contrast-dark":return"dark";default:return"dark"}}function hY(e){const t=document.documentElement;for(const[n,r]of Object.entries(e))r&&t.style.setProperty(n,r)}function mY(){const e=document.documentElement,t=e.style,n=[];for(let r=0;r<t.length;r++){const o=t[r];o.startsWith("--vscode-")&&n.push(o)}n.forEach(r=>e.style.removeProperty(r))}function gY(){const t=new URLSearchParams(window.location.search).get("theme");if(!t)return!1;const n=C2(t);document.documentElement.setAttribute("data-theme",n);const r={state:{mode:n},version:0};return localStorage.setItem("adk-studio-theme",JSON.stringify(r)),!0}function yY(){const{setMode:e}=Or();j.useEffect(()=>{function t(n){const r=n.data;if(!r||r.type!=="themeChanged")return;const o=r.themeKind;o&&e(C2(o));const a=r.variables;a&&(mY(),hY(a))}return window.addEventListener("message",t),()=>window.removeEventListener("message",t)},[e])}function vY(){const{setMode:e}=Or();return j.useEffect(()=>{const t=Vo();if(t.theme==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;e(n?"dark":"light")}else e(t.theme)},[e]),null}function xY(){const{currentProject:e,fetchProjects:t}=De(),[n,r]=j.useState(!1),[o,a]=j.useState(!1),[l,u]=j.useState(null);yY();const{isVisible:d,complete:p,skip:f,hide:m,shouldShowOnFirstRun:g,show:v}=cA();j.useEffect(()=>{t()},[t]),j.useEffect(()=>{g()&&v()},[g,v]);const b=j.useCallback(async()=>{if(!(!e||o)){a(!0),u(null);try{const x=await Jt.projects.deploy(e.id,{register:!0,openSpatialOs:!0});x.openUrl&&window.open(x.openUrl,"_blank","noopener,noreferrer"),x.registration.success?u(`Deployed. Manifest: ${x.manifestPath}`):u(`Manifest created. Spatial OS registration failed: ${x.registration.message}`)}catch(x){const _=x instanceof Error?x.message:"Unknown error";u(`Deploy failed: ${_}`)}finally{a(!1)}}},[e,o]);return s.jsxs(pY,{children:[s.jsx(vY,{}),s.jsxs("div",{className:"h-screen flex flex-col",style:{backgroundColor:"var(--bg-primary)"},children:[s.jsxs("header",{className:"h-12 border-b flex items-center justify-between px-4",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("h1",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx("img",{src:"https://adk-rust.com/icon.svg",alt:"ADK",className:"w-7 h-7"})," ADK Studio"]}),e&&s.jsxs("span",{className:"ml-4",style:{color:"var(--text-secondary)"},children:["/ ",e.name]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:b,disabled:!e||o,className:"px-3 py-1.5 rounded text-xs font-semibold border transition-opacity disabled:opacity-50",style:{borderColor:"var(--accent-primary)",color:"var(--accent-primary)",backgroundColor:"transparent"},title:"Create deploy manifest and register with ADK Spatial OS",children:o?"Deploying...":"Deploy"}),s.jsx("button",{onClick:()=>r(!0),className:"p-1.5 rounded hover:opacity-80 transition-opacity",style:{color:"var(--text-secondary)"},title:e?"Project Settings":"Settings",children:""}),s.jsx(fY,{size:20})]})]}),s.jsxs("main",{className:"flex-1 overflow-hidden",style:{backgroundColor:"var(--bg-canvas)"},children:[l&&s.jsx("div",{className:"px-4 py-2 text-xs border-b",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-secondary)"},children:l}),e?s.jsx(XT,{children:s.jsx(dY,{})}):s.jsx(l5,{})]}),d&&s.jsx(r$,{onComplete:p,onSkip:f,onClose:m}),n&&s.jsx(vc,{settings:e?.settings,projectName:e?.name,projectDescription:e?.description,projectId:e?.id,onSave:e?(x,_,k)=>{const{updateProjectSettings:S,updateProjectMeta:N}=De.getState();N(_,k),S(x)}:void 0,onClose:()=>r(!1)}),s.jsx(o$,{onAction:(x,_)=>{x==="open-env"?r(!0):x==="open-docs"&&window.open(`https://github.com/zavora-ai/adk-rust/blob/main/adk-studio/ui/src/components/Templates/docs/${_}.md`,"_blank")}})]})]})}class bY extends j.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ADK Studio caught an error:",t,n.componentStack)}render(){return this.state.hasError?s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",fontFamily:"system-ui, sans-serif",padding:"2rem",textAlign:"center",backgroundColor:"#1a1a2e",color:"#e0e0e0"},children:[s.jsx("h2",{style:{marginBottom:"1rem",color:"#f87171"},children:"Something went wrong"}),s.jsx("p",{style:{marginBottom:"1.5rem",maxWidth:"500px",color:"#a0a0b0"},children:this.state.error?.message||"An unexpected error occurred."}),s.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},style:{padding:"0.5rem 1.5rem",borderRadius:"6px",border:"none",backgroundColor:"#0F8A8A",color:"white",cursor:"pointer",fontSize:"0.9rem"},children:"Reload ADK Studio"})]}):this.props.children}}gY();mR.createRoot(document.getElementById("root")).render(s.jsx(Lt.StrictMode,{children:s.jsx(bY,{children:s.jsx(xY,{})})}));
