(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ps(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dp={exports:{}},ca={},pp={exports:{}},ze={};var c0;function yR(){if(c0)return ze;c0=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(B){return B===null||typeof B!="object"?null:(B=m&&B[m]||B["@@iterator"],typeof B=="function"?B:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function k(B,K,D){this.props=B,this.context=K,this.refs=b,this.updater=D||v}k.prototype.isReactComponent={},k.prototype.setState=function(B,K){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,K,"setState")},k.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function _(){}_.prototype=k.prototype;function N(B,K,D){this.props=B,this.context=K,this.refs=b,this.updater=D||v}var S=N.prototype=new _;S.constructor=N,w(S,k.prototype),S.isPureReactComponent=!0;var A=Array.isArray,P=Object.prototype.hasOwnProperty,T={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function z(B,K,D){var U,te={},Z=null,ee=null;if(K!=null)for(U in K.ref!==void 0&&(ee=K.ref),K.key!==void 0&&(Z=""+K.key),K)P.call(K,U)&&!C.hasOwnProperty(U)&&(te[U]=K[U]);var Q=arguments.length-2;if(Q===1)te.children=D;else if(1<Q){for(var ae=Array(Q),pe=0;pe<Q;pe++)ae[pe]=arguments[pe+2];te.children=ae}if(B&&B.defaultProps)for(U in Q=B.defaultProps,Q)te[U]===void 0&&(te[U]=Q[U]);return{$$typeof:e,type:B,key:Z,ref:ee,props:te,_owner:T.current}}function F(B,K){return{$$typeof:e,type:B.type,key:K,ref:B.ref,props:B.props,_owner:B._owner}}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function L(B){var K={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(D){return K[D]})}var q=/\/+/g;function G(B,K){return typeof B=="object"&&B!==null&&B.key!=null?L(""+B.key):K.toString(36)}function R(B,K,D,U,te){var Z=typeof B;(Z==="undefined"||Z==="boolean")&&(B=null);var ee=!1;if(B===null)ee=!0;else switch(Z){case"string":case"number":ee=!0;break;case"object":switch(B.$$typeof){case e:case t:ee=!0}}if(ee)return ee=B,te=te(ee),B=U===""?"."+G(ee,0):U,A(te)?(D="",B!=null&&(D=B.replace(q,"$&/")+"/"),R(te,K,D,"",function(pe){return pe})):te!=null&&(V(te)&&(te=F(te,D+(!te.key||ee&&ee.key===te.key?"":(""+te.key).replace(q,"$&/")+"/")+B)),K.push(te)),1;if(ee=0,U=U===""?".":U+":",A(B))for(var Q=0;Q<B.length;Q++){Z=B[Q];var ae=U+G(Z,Q);ee+=R(Z,K,D,ae,te)}else if(ae=g(B),typeof ae=="function")for(B=ae.call(B),Q=0;!(Z=B.next()).done;)Z=Z.value,ae=U+G(Z,Q++),ee+=R(Z,K,D,ae,te);else if(Z==="object")throw K=String(B),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return ee}function M(B,K,D){if(B==null)return B;var U=[],te=0;return R(B,U,"","",function(Z){return K.call(D,Z,te++)}),U}function H(B){if(B._status===-1){var K=B._result;K=K(),K.then(function(D){(B._status===0||B._status===-1)&&(B._status=1,B._result=D)},function(D){(B._status===0||B._status===-1)&&(B._status=2,B._result=D)}),B._status===-1&&(B._status=0,B._result=K)}if(B._status===1)return B._result.default;throw B._result}var X={current:null},$={transition:null},Y={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:$,ReactCurrentOwner:T};function I(){throw Error("act(...) is not supported in production builds of React.")}return ze.Children={map:M,forEach:function(B,K,D){M(B,function(){K.apply(this,arguments)},D)},count:function(B){var K=0;return M(B,function(){K++}),K},toArray:function(B){return M(B,function(K){return K})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},ze.Component=k,ze.Fragment=n,ze.Profiler=i,ze.PureComponent=N,ze.StrictMode=r,ze.Suspense=d,ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,ze.act=I,ze.cloneElement=function(B,K,D){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var U=w({},B.props),te=B.key,Z=B.ref,ee=B._owner;if(K!=null){if(K.ref!==void 0&&(Z=K.ref,ee=T.current),K.key!==void 0&&(te=""+K.key),B.type&&B.type.defaultProps)var Q=B.type.defaultProps;for(ae in K)P.call(K,ae)&&!C.hasOwnProperty(ae)&&(U[ae]=K[ae]===void 0&&Q!==void 0?Q[ae]:K[ae])}var ae=arguments.length-2;if(ae===1)U.children=D;else if(1<ae){Q=Array(ae);for(var pe=0;pe<ae;pe++)Q[pe]=arguments[pe+2];U.children=Q}return{$$typeof:e,type:B.type,key:te,ref:Z,props:U,_owner:ee}},ze.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},ze.createElement=z,ze.createFactory=function(B){var K=z.bind(null,B);return K.type=B,K},ze.createRef=function(){return{current:null}},ze.forwardRef=function(B){return{$$typeof:u,render:B}},ze.isValidElement=V,ze.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:H}},ze.memo=function(B,K){return{$$typeof:p,type:B,compare:K===void 0?null:K}},ze.startTransition=function(B){var K=$.transition;$.transition={};try{B()}finally{$.transition=K}},ze.unstable_act=I,ze.useCallback=function(B,K){return X.current.useCallback(B,K)},ze.useContext=function(B){return X.current.useContext(B)},ze.useDebugValue=function(){},ze.useDeferredValue=function(B){return X.current.useDeferredValue(B)},ze.useEffect=function(B,K){return X.current.useEffect(B,K)},ze.useId=function(){return X.current.useId()},ze.useImperativeHandle=function(B,K,D){return X.current.useImperativeHandle(B,K,D)},ze.useInsertionEffect=function(B,K){return X.current.useInsertionEffect(B,K)},ze.useLayoutEffect=function(B,K){return X.current.useLayoutEffect(B,K)},ze.useMemo=function(B,K){return X.current.useMemo(B,K)},ze.useReducer=function(B,K,D){return X.current.useReducer(B,K,D)},ze.useRef=function(B){return X.current.useRef(B)},ze.useState=function(B){return X.current.useState(B)},ze.useSyncExternalStore=function(B,K,D){return X.current.useSyncExternalStore(B,K,D)},ze.useTransition=function(){return X.current.useTransition()},ze.version="18.3.1",ze}var u0;function Va(){return u0||(u0=1,pp.exports=yR()),pp.exports}var d0;function vR(){if(d0)return ca;d0=1;var e=Va(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,p){var f,m={},g=null,v=null;p!==void 0&&(g=""+p),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(v=d.ref);for(f in d)r.call(d,f)&&!a.hasOwnProperty(f)&&(m[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:t,type:u,key:g,ref:v,props:m,_owner:i.current}}return ca.Fragment=n,ca.jsx=c,ca.jsxs=c,ca}var p0;function xR(){return p0||(p0=1,dp.exports=vR()),dp.exports}var s=xR(),E=Va();const Rt=ps(E);var uc={},fp={exports:{}},tn={},hp={exports:{}},mp={};var f0;function bR(){return f0||(f0=1,(function(e){function t($,Y){var I=$.length;$.push(Y);e:for(;0<I;){var B=I-1>>>1,K=$[B];if(0<i(K,Y))$[B]=Y,$[I]=K,I=B;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Y=$[0],I=$.pop();if(I!==Y){$[0]=I;e:for(var B=0,K=$.length,D=K>>>1;B<D;){var U=2*(B+1)-1,te=$[U],Z=U+1,ee=$[Z];if(0>i(te,I))Z<K&&0>i(ee,te)?($[B]=ee,$[Z]=I,B=Z):($[B]=te,$[U]=I,B=U);else if(Z<K&&0>i(ee,I))$[B]=ee,$[Z]=I,B=Z;else break e}}return Y}function i($,Y){var I=$.sortIndex-Y.sortIndex;return I!==0?I:$.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var d=[],p=[],f=1,m=null,g=3,v=!1,w=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S($){for(var Y=n(p);Y!==null;){if(Y.callback===null)r(p);else if(Y.startTime<=$)r(p),Y.sortIndex=Y.expirationTime,t(d,Y);else break;Y=n(p)}}function A($){if(b=!1,S($),!w)if(n(d)!==null)w=!0,H(P);else{var Y=n(p);Y!==null&&X(A,Y.startTime-$)}}function P($,Y){w=!1,b&&(b=!1,_(z),z=-1),v=!0;var I=g;try{for(S(Y),m=n(d);m!==null&&(!(m.expirationTime>Y)||$&&!L());){var B=m.callback;if(typeof B=="function"){m.callback=null,g=m.priorityLevel;var K=B(m.expirationTime<=Y);Y=e.unstable_now(),typeof K=="function"?m.callback=K:m===n(d)&&r(d),S(Y)}else r(d);m=n(d)}if(m!==null)var D=!0;else{var U=n(p);U!==null&&X(A,U.startTime-Y),D=!1}return D}finally{m=null,g=I,v=!1}}var T=!1,C=null,z=-1,F=5,V=-1;function L(){return!(e.unstable_now()-V<F)}function q(){if(C!==null){var $=e.unstable_now();V=$;var Y=!0;try{Y=C(!0,$)}finally{Y?G():(T=!1,C=null)}}else T=!1}var G;if(typeof N=="function")G=function(){N(q)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,M=R.port2;R.port1.onmessage=q,G=function(){M.postMessage(null)}}else G=function(){k(q,0)};function H($){C=$,T||(T=!0,G())}function X($,Y){z=k(function(){$(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,H(P))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function($){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var I=g;g=Y;try{return $()}finally{g=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var I=g;g=$;try{return Y()}finally{g=I}},e.unstable_scheduleCallback=function($,Y,I){var B=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?B+I:B):I=B,$){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=I+K,$={id:f++,callback:Y,priorityLevel:$,startTime:I,expirationTime:K,sortIndex:-1},I>B?($.sortIndex=I,t(p,$),n(d)===null&&$===n(p)&&(b?(_(z),z=-1):b=!0,X(A,I-B))):($.sortIndex=K,t(d,$),w||v||(w=!0,H(P))),$},e.unstable_shouldYield=L,e.unstable_wrapCallback=function($){var Y=g;return function(){var I=g;g=Y;try{return $.apply(this,arguments)}finally{g=I}}}})(mp)),mp}var h0;function wR(){return h0||(h0=1,hp.exports=bR()),hp.exports}var m0;function _R(){if(m0)return tn;m0=1;var e=Va(),t=wR();function n(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(o,l){c(o,l),c(o+"Capture",l)}function c(o,l){for(i[o]=l,o=0;o<l.length;o++)r.add(l[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(o){return d.call(m,o)?!0:d.call(f,o)?!1:p.test(o)?m[o]=!0:(f[o]=!0,!1)}function v(o,l,h,y){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function w(o,l,h,y){if(l===null||typeof l>"u"||v(o,l,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function b(o,l,h,y,x,j,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=y,this.attributeNamespace=x,this.mustUseProperty=h,this.propertyName=o,this.type=l,this.sanitizeURL=j,this.removeEmptyString=O}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){k[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];k[l]=new b(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){k[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){k[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){k[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){k[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){k[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){k[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){k[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function N(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(_,N);k[l]=new b(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(_,N);k[l]=new b(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(_,N);k[l]=new b(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){k[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),k.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){k[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function S(o,l,h,y){var x=k.hasOwnProperty(l)?k[l]:null;(x!==null?x.type!==0:y||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(w(l,h,x,y)&&(h=null),y||x===null?g(l)&&(h===null?o.removeAttribute(l):o.setAttribute(l,""+h)):x.mustUseProperty?o[x.propertyName]=h===null?x.type===3?!1:"":h:(l=x.attributeName,y=x.attributeNamespace,h===null?o.removeAttribute(l):(x=x.type,h=x===3||x===4&&h===!0?"":""+h,y?o.setAttributeNS(y,l,h):o.setAttribute(l,h))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),T=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),L=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),$=Symbol.iterator;function Y(o){return o===null||typeof o!="object"?null:(o=$&&o[$]||o["@@iterator"],typeof o=="function"?o:null)}var I=Object.assign,B;function K(o){if(B===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);B=l&&l[1]||""}return`
`+B+o}var D=!1;function U(o,l){if(!o||D)return"";D=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(se){var y=se}Reflect.construct(o,[],l)}else{try{l.call()}catch(se){y=se}o.call(l.prototype)}else{try{throw Error()}catch(se){y=se}o()}}catch(se){if(se&&y&&typeof se.stack=="string"){for(var x=se.stack.split(`
`),j=y.stack.split(`
`),O=x.length-1,W=j.length-1;1<=O&&0<=W&&x[O]!==j[W];)W--;for(;1<=O&&0<=W;O--,W--)if(x[O]!==j[W]){if(O!==1||W!==1)do if(O--,W--,0>W||x[O]!==j[W]){var J=`
`+x[O].replace(" at new "," at ");return o.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",o.displayName)),J}while(1<=O&&0<=W);break}}}finally{D=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?K(o):""}function te(o){switch(o.tag){case 5:return K(o.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return o=U(o.type,!1),o;case 11:return o=U(o.type.render,!1),o;case 1:return o=U(o.type,!0),o;default:return""}}function Z(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case C:return"Fragment";case T:return"Portal";case F:return"Profiler";case z:return"StrictMode";case G:return"Suspense";case R:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case L:return(o.displayName||"Context")+".Consumer";case V:return(o._context.displayName||"Context")+".Provider";case q:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case M:return l=o.displayName||null,l!==null?l:Z(o.type)||"Memo";case H:l=o._payload,o=o._init;try{return Z(o(l))}catch{}}return null}function ee(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(l);case 8:return l===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Q(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function ae(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function pe(o){var l=ae(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),y=""+o[l];if(!o.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,j=h.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return x.call(this)},set:function(O){y=""+O,j.call(this,O)}}),Object.defineProperty(o,l,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function ye(o){o._valueTracker||(o._valueTracker=pe(o))}function Ne(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),y="";return o&&(y=ae(o)?o.checked?"true":"false":o.value),o=y,o!==h?(l.setValue(o),!0):!1}function xe(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ae(o,l){var h=l.checked;return I({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function be(o,l){var h=l.defaultValue==null?"":l.defaultValue,y=l.checked!=null?l.checked:l.defaultChecked;h=Q(l.value!=null?l.value:h),o._wrapperState={initialChecked:y,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function De(o,l){l=l.checked,l!=null&&S(o,"checked",l,!1)}function Ce(o,l){De(o,l);var h=Q(l.value),y=l.type;if(h!=null)y==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?Ye(o,l.type,h):l.hasOwnProperty("defaultValue")&&Ye(o,l.type,Q(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function ot(o,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var y=l.type;if(!(y!=="submit"&&y!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,h||l===o.value||(o.value=l),o.defaultValue=l}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Ye(o,l,h){(l!=="number"||xe(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var dt=Array.isArray;function pt(o,l,h,y){if(o=o.options,l){l={};for(var x=0;x<h.length;x++)l["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=l.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&y&&(o[h].defaultSelected=!0)}else{for(h=""+Q(h),l=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,y&&(o[x].defaultSelected=!0);return}l!==null||o[x].disabled||(l=o[x])}l!==null&&(l.selected=!0)}}function Be(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return I({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ve(o,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(n(92));if(dt(h)){if(1<h.length)throw Error(n(93));h=h[0]}l=h}l==null&&(l=""),h=l}o._wrapperState={initialValue:Q(h)}}function yt(o,l){var h=Q(l.value),y=Q(l.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),l.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),y!=null&&(o.defaultValue=""+y)}function ge(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function oe(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?oe(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var je,Me=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,y,x){MSApp.execUnsafeLocalFunction(function(){return o(l,h,y,x)})}:o})(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(je=je||document.createElement("div"),je.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=je.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Le(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var st={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qt=["Webkit","ms","Moz","O"];Object.keys(st).forEach(function(o){qt.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),st[l]=st[o]})});function He(o,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||st.hasOwnProperty(o)&&st[o]?(""+l).trim():l+"px"}function bt(o,l){o=o.style;for(var h in l)if(l.hasOwnProperty(h)){var y=h.indexOf("--")===0,x=He(h,l[h],y);h==="float"&&(h="cssFloat"),y?o.setProperty(h,x):o[h]=x}}var Ct=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(o,l){if(l){if(Ct[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function Ot(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mt=null;function fr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var qr=null,Xn=null,Qn=null;function po(o){if(o=Gs(o)){if(typeof qr!="function")throw Error(n(280));var l=o.stateNode;l&&(l=Sl(l),qr(o.stateNode,o.type,l))}}function fo(o){Xn?Qn?Qn.push(o):Qn=[o]:Xn=o}function ho(){if(Xn){var o=Xn,l=Qn;if(Qn=Xn=null,po(o),l)for(o=0;o<l.length;o++)po(l[o])}}function mo(o,l){return o(l)}function go(){}var wi=!1;function yo(o,l,h){if(wi)return o(l,h);wi=!0;try{return mo(o,l,h)}finally{wi=!1,(Xn!==null||Qn!==null)&&(go(),ho())}}function hr(o,l){var h=o.stateNode;if(h===null)return null;var y=Sl(h);if(y===null)return null;h=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var _i=!1;if(u)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){_i=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{_i=!1}function _s(o,l,h,y,x,j,O,W,J){var se=Array.prototype.slice.call(arguments,3);try{l.apply(h,se)}catch(ue){this.onError(ue)}}var gr=!1,wt=null,yr=!1,ki=null,ks={onError:function(o){gr=!0,wt=o}};function Si(o,l,h,y,x,j,O,W,J){gr=!1,wt=null,_s.apply(ks,arguments)}function Ss(o,l,h,y,x,j,O,W,J){if(Si.apply(this,arguments),gr){if(gr){var se=wt;gr=!1,wt=null}else throw Error(n(198));yr||(yr=!0,ki=se)}}function dn(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function Ni(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function ji(o){if(dn(o)!==o)throw Error(n(188))}function Ns(o){var l=o.alternate;if(!l){if(l=dn(o),l===null)throw Error(n(188));return l!==o?null:o}for(var h=o,y=l;;){var x=h.return;if(x===null)break;var j=x.alternate;if(j===null){if(y=x.return,y!==null){h=y;continue}break}if(x.child===j.child){for(j=x.child;j;){if(j===h)return ji(x),o;if(j===y)return ji(x),l;j=j.sibling}throw Error(n(188))}if(h.return!==y.return)h=x,y=j;else{for(var O=!1,W=x.child;W;){if(W===h){O=!0,h=x,y=j;break}if(W===y){O=!0,y=x,h=j;break}W=W.sibling}if(!O){for(W=j.child;W;){if(W===h){O=!0,h=j,y=x;break}if(W===y){O=!0,y=j,h=x;break}W=W.sibling}if(!O)throw Error(n(189))}}if(h.alternate!==y)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:l}function vo(o){return o=Ns(o),o!==null?xo(o):null}function xo(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=xo(o);if(l!==null)return l;o=o.sibling}return null}var Mn=t.unstable_scheduleCallback,Ei=t.unstable_cancelCallback,Ci=t.unstable_shouldYield,bo=t.unstable_requestPaint,Xe=t.unstable_now,js=t.unstable_getCurrentPriorityLevel,vr=t.unstable_ImmediatePriority,xr=t.unstable_UserBlockingPriority,Fr=t.unstable_NormalPriority,wo=t.unstable_LowPriority,_o=t.unstable_IdlePriority,br=null,Ft=null;function Es(o){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(br,o,void 0,(o.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:As,Cs=Math.log,Ts=Math.LN2;function As(o){return o>>>=0,o===0?32:31-(Cs(o)/Ts|0)|0}var zr=64,Br=4194304;function Jn(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function $r(o,l){var h=o.pendingLanes;if(h===0)return 0;var y=0,x=o.suspendedLanes,j=o.pingedLanes,O=h&268435455;if(O!==0){var W=O&~x;W!==0?y=Jn(W):(j&=O,j!==0&&(y=Jn(j)))}else O=h&~x,O!==0?y=Jn(O):j!==0&&(y=Jn(j));if(y===0)return 0;if(l!==0&&l!==y&&(l&x)===0&&(x=y&-y,j=l&-l,x>=j||x===16&&(j&4194240)!==0))return l;if((y&4)!==0&&(y|=h&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=y;0<l;)h=31-Ut(l),x=1<<h,y|=o[h],l&=~x;return y}function Ti(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hr(o,l){for(var h=o.suspendedLanes,y=o.pingedLanes,x=o.expirationTimes,j=o.pendingLanes;0<j;){var O=31-Ut(j),W=1<<O,J=x[O];J===-1?((W&h)===0||(W&y)!==0)&&(x[O]=Ti(W,l)):J<=l&&(o.expiredLanes|=W),j&=~W}}function Ai(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function wr(){var o=zr;return zr<<=1,(zr&4194240)===0&&(zr=64),o}function Pi(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function kn(o,l,h){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-Ut(l),o[l]=h}function ko(o,l){var h=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<h;){var x=31-Ut(h),j=1<<x;l[x]=0,y[x]=-1,o[x]=-1,h&=~j}}function Ps(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var y=31-Ut(h),x=1<<y;x&l|o[y]&l&&(o[y]|=l),h&=~x}}var Ke=0;function le(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var _e,at,qe,tt,pn,Zn=!1,Ii=[],Vr=null,Ur=null,Wr=null,Is=new Map,Rs=new Map,Kr=[],FP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wx(o,l){switch(o){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Is.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(l.pointerId)}}function Os(o,l,h,y,x,j){return o===null||o.nativeEvent!==j?(o={blockedOn:l,domEventName:h,eventSystemFlags:y,nativeEvent:j,targetContainers:[x]},l!==null&&(l=Gs(l),l!==null&&at(l)),o):(o.eventSystemFlags|=y,l=o.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),o)}function zP(o,l,h,y,x){switch(l){case"focusin":return Vr=Os(Vr,o,l,h,y,x),!0;case"dragenter":return Ur=Os(Ur,o,l,h,y,x),!0;case"mouseover":return Wr=Os(Wr,o,l,h,y,x),!0;case"pointerover":var j=x.pointerId;return Is.set(j,Os(Is.get(j)||null,o,l,h,y,x)),!0;case"gotpointercapture":return j=x.pointerId,Rs.set(j,Os(Rs.get(j)||null,o,l,h,y,x)),!0}return!1}function Kx(o){var l=Ri(o.target);if(l!==null){var h=dn(l);if(h!==null){if(l=h.tag,l===13){if(l=Ni(h),l!==null){o.blockedOn=l,pn(o.priority,function(){qe(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ul(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=qu(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var y=new h.constructor(h.type,h);Mt=y,h.target.dispatchEvent(y),Mt=null}else return l=Gs(h),l!==null&&at(l),o.blockedOn=h,!1;l.shift()}return!0}function Gx(o,l,h){ul(o)&&h.delete(l)}function BP(){Zn=!1,Vr!==null&&ul(Vr)&&(Vr=null),Ur!==null&&ul(Ur)&&(Ur=null),Wr!==null&&ul(Wr)&&(Wr=null),Is.forEach(Gx),Rs.forEach(Gx)}function Ms(o,l){o.blockedOn===l&&(o.blockedOn=null,Zn||(Zn=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,BP)))}function Ls(o){function l(x){return Ms(x,o)}if(0<Ii.length){Ms(Ii[0],o);for(var h=1;h<Ii.length;h++){var y=Ii[h];y.blockedOn===o&&(y.blockedOn=null)}}for(Vr!==null&&Ms(Vr,o),Ur!==null&&Ms(Ur,o),Wr!==null&&Ms(Wr,o),Is.forEach(l),Rs.forEach(l),h=0;h<Kr.length;h++)y=Kr[h],y.blockedOn===o&&(y.blockedOn=null);for(;0<Kr.length&&(h=Kr[0],h.blockedOn===null);)Kx(h),h.blockedOn===null&&Kr.shift()}var So=A.ReactCurrentBatchConfig,dl=!0;function $P(o,l,h,y){var x=Ke,j=So.transition;So.transition=null;try{Ke=1,Du(o,l,h,y)}finally{Ke=x,So.transition=j}}function HP(o,l,h,y){var x=Ke,j=So.transition;So.transition=null;try{Ke=4,Du(o,l,h,y)}finally{Ke=x,So.transition=j}}function Du(o,l,h,y){if(dl){var x=qu(o,l,h,y);if(x===null)td(o,l,y,pl,h),Wx(o,y);else if(zP(x,o,l,h,y))y.stopPropagation();else if(Wx(o,y),l&4&&-1<FP.indexOf(o)){for(;x!==null;){var j=Gs(x);if(j!==null&&_e(j),j=qu(o,l,h,y),j===null&&td(o,l,y,pl,h),j===x)break;x=j}x!==null&&y.stopPropagation()}else td(o,l,y,null,h)}}var pl=null;function qu(o,l,h,y){if(pl=null,o=fr(y),o=Ri(o),o!==null)if(l=dn(o),l===null)o=null;else if(h=l.tag,h===13){if(o=Ni(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return pl=o,null}function Yx(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(js()){case vr:return 1;case xr:return 4;case Fr:case wo:return 16;case _o:return 536870912;default:return 16}default:return 16}}var Gr=null,Fu=null,fl=null;function Xx(){if(fl)return fl;var o,l=Fu,h=l.length,y,x="value"in Gr?Gr.value:Gr.textContent,j=x.length;for(o=0;o<h&&l[o]===x[o];o++);var O=h-o;for(y=1;y<=O&&l[h-y]===x[j-y];y++);return fl=x.slice(o,1<y?1-y:void 0)}function hl(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function ml(){return!0}function Qx(){return!1}function fn(o){function l(h,y,x,j,O){this._reactName=h,this._targetInst=x,this.type=y,this.nativeEvent=j,this.target=O,this.currentTarget=null;for(var W in o)o.hasOwnProperty(W)&&(h=o[W],this[W]=h?h(j):j[W]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?ml:Qx,this.isPropagationStopped=Qx,this}return I(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),l}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zu=fn(No),Ds=I({},No,{view:0,detail:0}),VP=fn(Ds),Bu,$u,qs,gl=I({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vu,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==qs&&(qs&&o.type==="mousemove"?(Bu=o.screenX-qs.screenX,$u=o.screenY-qs.screenY):$u=Bu=0,qs=o),Bu)},movementY:function(o){return"movementY"in o?o.movementY:$u}}),Jx=fn(gl),UP=I({},gl,{dataTransfer:0}),WP=fn(UP),KP=I({},Ds,{relatedTarget:0}),Hu=fn(KP),GP=I({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),YP=fn(GP),XP=I({},No,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),QP=fn(XP),JP=I({},No,{data:0}),Zx=fn(JP),ZP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nI(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=tI[o])?!!l[o]:!1}function Vu(){return nI}var rI=I({},Ds,{key:function(o){if(o.key){var l=ZP[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=hl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?eI[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vu,charCode:function(o){return o.type==="keypress"?hl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?hl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),iI=fn(rI),oI=I({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eb=fn(oI),sI=I({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vu}),aI=fn(sI),lI=I({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),cI=fn(lI),uI=I({},gl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),dI=fn(uI),pI=[9,13,27,32],Uu=u&&"CompositionEvent"in window,Fs=null;u&&"documentMode"in document&&(Fs=document.documentMode);var fI=u&&"TextEvent"in window&&!Fs,tb=u&&(!Uu||Fs&&8<Fs&&11>=Fs),nb=" ",rb=!1;function ib(o,l){switch(o){case"keyup":return pI.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ob(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var jo=!1;function hI(o,l){switch(o){case"compositionend":return ob(l);case"keypress":return l.which!==32?null:(rb=!0,nb);case"textInput":return o=l.data,o===nb&&rb?null:o;default:return null}}function mI(o,l){if(jo)return o==="compositionend"||!Uu&&ib(o,l)?(o=Xx(),fl=Fu=Gr=null,jo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return tb&&l.locale!=="ko"?null:l.data;default:return null}}var gI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sb(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!gI[o.type]:l==="textarea"}function ab(o,l,h,y){fo(y),l=wl(l,"onChange"),0<l.length&&(h=new zu("onChange","change",null,h,y),o.push({event:h,listeners:l}))}var zs=null,Bs=null;function yI(o){Nb(o,0)}function yl(o){var l=Po(o);if(Ne(l))return o}function vI(o,l){if(o==="change")return l}var lb=!1;if(u){var Wu;if(u){var Ku="oninput"in document;if(!Ku){var cb=document.createElement("div");cb.setAttribute("oninput","return;"),Ku=typeof cb.oninput=="function"}Wu=Ku}else Wu=!1;lb=Wu&&(!document.documentMode||9<document.documentMode)}function ub(){zs&&(zs.detachEvent("onpropertychange",db),Bs=zs=null)}function db(o){if(o.propertyName==="value"&&yl(Bs)){var l=[];ab(l,Bs,o,fr(o)),yo(yI,l)}}function xI(o,l,h){o==="focusin"?(ub(),zs=l,Bs=h,zs.attachEvent("onpropertychange",db)):o==="focusout"&&ub()}function bI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return yl(Bs)}function wI(o,l){if(o==="click")return yl(l)}function _I(o,l){if(o==="input"||o==="change")return yl(l)}function kI(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Ln=typeof Object.is=="function"?Object.is:kI;function $s(o,l){if(Ln(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),y=Object.keys(l);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var x=h[y];if(!d.call(l,x)||!Ln(o[x],l[x]))return!1}return!0}function pb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function fb(o,l){var h=pb(o);o=0;for(var y;h;){if(h.nodeType===3){if(y=o+h.textContent.length,o<=l&&y>=l)return{node:h,offset:l-o};o=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=pb(h)}}function hb(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?hb(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function mb(){for(var o=window,l=xe();l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=xe(o.document)}return l}function Gu(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function SI(o){var l=mb(),h=o.focusedElem,y=o.selectionRange;if(l!==h&&h&&h.ownerDocument&&hb(h.ownerDocument.documentElement,h)){if(y!==null&&Gu(h)){if(l=y.start,o=y.end,o===void 0&&(o=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(o,h.value.length);else if(o=(l=h.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var x=h.textContent.length,j=Math.min(y.start,x);y=y.end===void 0?j:Math.min(y.end,x),!o.extend&&j>y&&(x=y,y=j,j=x),x=fb(h,j);var O=fb(h,y);x&&O&&(o.rangeCount!==1||o.anchorNode!==x.node||o.anchorOffset!==x.offset||o.focusNode!==O.node||o.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(x.node,x.offset),o.removeAllRanges(),j>y?(o.addRange(l),o.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),o.addRange(l)))}}for(l=[],o=h;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)o=l[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var NI=u&&"documentMode"in document&&11>=document.documentMode,Eo=null,Yu=null,Hs=null,Xu=!1;function gb(o,l,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Xu||Eo==null||Eo!==xe(y)||(y=Eo,"selectionStart"in y&&Gu(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Hs&&$s(Hs,y)||(Hs=y,y=wl(Yu,"onSelect"),0<y.length&&(l=new zu("onSelect","select",null,l,h),o.push({event:l,listeners:y}),l.target=Eo)))}function vl(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var Co={animationend:vl("Animation","AnimationEnd"),animationiteration:vl("Animation","AnimationIteration"),animationstart:vl("Animation","AnimationStart"),transitionend:vl("Transition","TransitionEnd")},Qu={},yb={};u&&(yb=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function xl(o){if(Qu[o])return Qu[o];if(!Co[o])return o;var l=Co[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in yb)return Qu[o]=l[h];return o}var vb=xl("animationend"),xb=xl("animationiteration"),bb=xl("animationstart"),wb=xl("transitionend"),_b=new Map,kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yr(o,l){_b.set(o,l),a(l,[o])}for(var Ju=0;Ju<kb.length;Ju++){var Zu=kb[Ju],jI=Zu.toLowerCase(),EI=Zu[0].toUpperCase()+Zu.slice(1);Yr(jI,"on"+EI)}Yr(vb,"onAnimationEnd"),Yr(xb,"onAnimationIteration"),Yr(bb,"onAnimationStart"),Yr("dblclick","onDoubleClick"),Yr("focusin","onFocus"),Yr("focusout","onBlur"),Yr(wb,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vs));function Sb(o,l,h){var y=o.type||"unknown-event";o.currentTarget=h,Ss(y,l,void 0,o),o.currentTarget=null}function Nb(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var y=o[h],x=y.event;y=y.listeners;e:{var j=void 0;if(l)for(var O=y.length-1;0<=O;O--){var W=y[O],J=W.instance,se=W.currentTarget;if(W=W.listener,J!==j&&x.isPropagationStopped())break e;Sb(x,W,se),j=J}else for(O=0;O<y.length;O++){if(W=y[O],J=W.instance,se=W.currentTarget,W=W.listener,J!==j&&x.isPropagationStopped())break e;Sb(x,W,se),j=J}}}if(yr)throw o=ki,yr=!1,ki=null,o}function nt(o,l){var h=l[ad];h===void 0&&(h=l[ad]=new Set);var y=o+"__bubble";h.has(y)||(jb(l,o,2,!1),h.add(y))}function ed(o,l,h){var y=0;l&&(y|=4),jb(h,o,y,l)}var bl="_reactListening"+Math.random().toString(36).slice(2);function Us(o){if(!o[bl]){o[bl]=!0,r.forEach(function(h){h!=="selectionchange"&&(CI.has(h)||ed(h,!1,o),ed(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[bl]||(l[bl]=!0,ed("selectionchange",!1,l))}}function jb(o,l,h,y){switch(Yx(l)){case 1:var x=$P;break;case 4:x=HP;break;default:x=Du}h=x.bind(null,l,h,o),x=void 0,!_i||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),y?x!==void 0?o.addEventListener(l,h,{capture:!0,passive:x}):o.addEventListener(l,h,!0):x!==void 0?o.addEventListener(l,h,{passive:x}):o.addEventListener(l,h,!1)}function td(o,l,h,y,x){var j=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var W=y.stateNode.containerInfo;if(W===x||W.nodeType===8&&W.parentNode===x)break;if(O===4)for(O=y.return;O!==null;){var J=O.tag;if((J===3||J===4)&&(J=O.stateNode.containerInfo,J===x||J.nodeType===8&&J.parentNode===x))return;O=O.return}for(;W!==null;){if(O=Ri(W),O===null)return;if(J=O.tag,J===5||J===6){y=j=O;continue e}W=W.parentNode}}y=y.return}yo(function(){var se=j,ue=fr(h),fe=[];e:{var ce=_b.get(o);if(ce!==void 0){var ve=zu,ke=o;switch(o){case"keypress":if(hl(h)===0)break e;case"keydown":case"keyup":ve=iI;break;case"focusin":ke="focus",ve=Hu;break;case"focusout":ke="blur",ve=Hu;break;case"beforeblur":case"afterblur":ve=Hu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=Jx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=WP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=aI;break;case vb:case xb:case bb:ve=YP;break;case wb:ve=cI;break;case"scroll":ve=VP;break;case"wheel":ve=dI;break;case"copy":case"cut":case"paste":ve=QP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=eb}var Ee=(l&4)!==0,xt=!Ee&&o==="scroll",re=Ee?ce!==null?ce+"Capture":null:ce;Ee=[];for(var ne=se,ie;ne!==null;){ie=ne;var me=ie.stateNode;if(ie.tag===5&&me!==null&&(ie=me,re!==null&&(me=hr(ne,re),me!=null&&Ee.push(Ws(ne,me,ie)))),xt)break;ne=ne.return}0<Ee.length&&(ce=new ve(ce,ke,null,h,ue),fe.push({event:ce,listeners:Ee}))}}if((l&7)===0){e:{if(ce=o==="mouseover"||o==="pointerover",ve=o==="mouseout"||o==="pointerout",ce&&h!==Mt&&(ke=h.relatedTarget||h.fromElement)&&(Ri(ke)||ke[_r]))break e;if((ve||ce)&&(ce=ue.window===ue?ue:(ce=ue.ownerDocument)?ce.defaultView||ce.parentWindow:window,ve?(ke=h.relatedTarget||h.toElement,ve=se,ke=ke?Ri(ke):null,ke!==null&&(xt=dn(ke),ke!==xt||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(ve=null,ke=se),ve!==ke)){if(Ee=Jx,me="onMouseLeave",re="onMouseEnter",ne="mouse",(o==="pointerout"||o==="pointerover")&&(Ee=eb,me="onPointerLeave",re="onPointerEnter",ne="pointer"),xt=ve==null?ce:Po(ve),ie=ke==null?ce:Po(ke),ce=new Ee(me,ne+"leave",ve,h,ue),ce.target=xt,ce.relatedTarget=ie,me=null,Ri(ue)===se&&(Ee=new Ee(re,ne+"enter",ke,h,ue),Ee.target=ie,Ee.relatedTarget=xt,me=Ee),xt=me,ve&&ke)t:{for(Ee=ve,re=ke,ne=0,ie=Ee;ie;ie=To(ie))ne++;for(ie=0,me=re;me;me=To(me))ie++;for(;0<ne-ie;)Ee=To(Ee),ne--;for(;0<ie-ne;)re=To(re),ie--;for(;ne--;){if(Ee===re||re!==null&&Ee===re.alternate)break t;Ee=To(Ee),re=To(re)}Ee=null}else Ee=null;ve!==null&&Eb(fe,ce,ve,Ee,!1),ke!==null&&xt!==null&&Eb(fe,xt,ke,Ee,!0)}}e:{if(ce=se?Po(se):window,ve=ce.nodeName&&ce.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ce.type==="file")var Te=vI;else if(sb(ce))if(lb)Te=_I;else{Te=bI;var Pe=xI}else(ve=ce.nodeName)&&ve.toLowerCase()==="input"&&(ce.type==="checkbox"||ce.type==="radio")&&(Te=wI);if(Te&&(Te=Te(o,se))){ab(fe,Te,h,ue);break e}Pe&&Pe(o,ce,se),o==="focusout"&&(Pe=ce._wrapperState)&&Pe.controlled&&ce.type==="number"&&Ye(ce,"number",ce.value)}switch(Pe=se?Po(se):window,o){case"focusin":(sb(Pe)||Pe.contentEditable==="true")&&(Eo=Pe,Yu=se,Hs=null);break;case"focusout":Hs=Yu=Eo=null;break;case"mousedown":Xu=!0;break;case"contextmenu":case"mouseup":case"dragend":Xu=!1,gb(fe,h,ue);break;case"selectionchange":if(NI)break;case"keydown":case"keyup":gb(fe,h,ue)}var Ie;if(Uu)e:{switch(o){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else jo?ib(o,h)&&(Re="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Re="onCompositionStart");Re&&(tb&&h.locale!=="ko"&&(jo||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&jo&&(Ie=Xx()):(Gr=ue,Fu="value"in Gr?Gr.value:Gr.textContent,jo=!0)),Pe=wl(se,Re),0<Pe.length&&(Re=new Zx(Re,o,null,h,ue),fe.push({event:Re,listeners:Pe}),Ie?Re.data=Ie:(Ie=ob(h),Ie!==null&&(Re.data=Ie)))),(Ie=fI?hI(o,h):mI(o,h))&&(se=wl(se,"onBeforeInput"),0<se.length&&(ue=new Zx("onBeforeInput","beforeinput",null,h,ue),fe.push({event:ue,listeners:se}),ue.data=Ie))}Nb(fe,l)})}function Ws(o,l,h){return{instance:o,listener:l,currentTarget:h}}function wl(o,l){for(var h=l+"Capture",y=[];o!==null;){var x=o,j=x.stateNode;x.tag===5&&j!==null&&(x=j,j=hr(o,h),j!=null&&y.unshift(Ws(o,j,x)),j=hr(o,l),j!=null&&y.push(Ws(o,j,x))),o=o.return}return y}function To(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Eb(o,l,h,y,x){for(var j=l._reactName,O=[];h!==null&&h!==y;){var W=h,J=W.alternate,se=W.stateNode;if(J!==null&&J===y)break;W.tag===5&&se!==null&&(W=se,x?(J=hr(h,j),J!=null&&O.unshift(Ws(h,J,W))):x||(J=hr(h,j),J!=null&&O.push(Ws(h,J,W)))),h=h.return}O.length!==0&&o.push({event:l,listeners:O})}var TI=/\r\n?/g,AI=/\u0000|\uFFFD/g;function Cb(o){return(typeof o=="string"?o:""+o).replace(TI,`
`).replace(AI,"")}function _l(o,l,h){if(l=Cb(l),Cb(o)!==l&&h)throw Error(n(425))}function kl(){}var nd=null,rd=null;function id(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var od=typeof setTimeout=="function"?setTimeout:void 0,PI=typeof clearTimeout=="function"?clearTimeout:void 0,Tb=typeof Promise=="function"?Promise:void 0,II=typeof queueMicrotask=="function"?queueMicrotask:typeof Tb<"u"?function(o){return Tb.resolve(null).then(o).catch(RI)}:od;function RI(o){setTimeout(function(){throw o})}function sd(o,l){var h=l,y=0;do{var x=h.nextSibling;if(o.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"){if(y===0){o.removeChild(x),Ls(l);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=x}while(h);Ls(l)}function Xr(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function Ab(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return o;l--}else h==="/$"&&l++}o=o.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),er="__reactFiber$"+Ao,Ks="__reactProps$"+Ao,_r="__reactContainer$"+Ao,ad="__reactEvents$"+Ao,OI="__reactListeners$"+Ao,MI="__reactHandles$"+Ao;function Ri(o){var l=o[er];if(l)return l;for(var h=o.parentNode;h;){if(l=h[_r]||h[er]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=Ab(o);o!==null;){if(h=o[er])return h;o=Ab(o)}return l}o=h,h=o.parentNode}return null}function Gs(o){return o=o[er]||o[_r],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Po(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function Sl(o){return o[Ks]||null}var ld=[],Io=-1;function Qr(o){return{current:o}}function rt(o){0>Io||(o.current=ld[Io],ld[Io]=null,Io--)}function Qe(o,l){Io++,ld[Io]=o.current,o.current=l}var Jr={},zt=Qr(Jr),Xt=Qr(!1),Oi=Jr;function Ro(o,l){var h=o.type.contextTypes;if(!h)return Jr;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===l)return y.__reactInternalMemoizedMaskedChildContext;var x={},j;for(j in h)x[j]=l[j];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=x),x}function Qt(o){return o=o.childContextTypes,o!=null}function Nl(){rt(Xt),rt(zt)}function Pb(o,l,h){if(zt.current!==Jr)throw Error(n(168));Qe(zt,l),Qe(Xt,h)}function Ib(o,l,h){var y=o.stateNode;if(l=l.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var x in y)if(!(x in l))throw Error(n(108,ee(o)||"Unknown",x));return I({},h,y)}function jl(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Jr,Oi=zt.current,Qe(zt,o),Qe(Xt,Xt.current),!0}function Rb(o,l,h){var y=o.stateNode;if(!y)throw Error(n(169));h?(o=Ib(o,l,Oi),y.__reactInternalMemoizedMergedChildContext=o,rt(Xt),rt(zt),Qe(zt,o)):rt(Xt),Qe(Xt,h)}var kr=null,El=!1,cd=!1;function Ob(o){kr===null?kr=[o]:kr.push(o)}function LI(o){El=!0,Ob(o)}function Zr(){if(!cd&&kr!==null){cd=!0;var o=0,l=Ke;try{var h=kr;for(Ke=1;o<h.length;o++){var y=h[o];do y=y(!0);while(y!==null)}kr=null,El=!1}catch(x){throw kr!==null&&(kr=kr.slice(o+1)),Mn(vr,Zr),x}finally{Ke=l,cd=!1}}return null}var Oo=[],Mo=0,Cl=null,Tl=0,Sn=[],Nn=0,Mi=null,Sr=1,Nr="";function Li(o,l){Oo[Mo++]=Tl,Oo[Mo++]=Cl,Cl=o,Tl=l}function Mb(o,l,h){Sn[Nn++]=Sr,Sn[Nn++]=Nr,Sn[Nn++]=Mi,Mi=o;var y=Sr;o=Nr;var x=32-Ut(y)-1;y&=~(1<<x),h+=1;var j=32-Ut(l)+x;if(30<j){var O=x-x%5;j=(y&(1<<O)-1).toString(32),y>>=O,x-=O,Sr=1<<32-Ut(l)+x|h<<x|y,Nr=j+o}else Sr=1<<j|h<<x|y,Nr=o}function ud(o){o.return!==null&&(Li(o,1),Mb(o,1,0))}function dd(o){for(;o===Cl;)Cl=Oo[--Mo],Oo[Mo]=null,Tl=Oo[--Mo],Oo[Mo]=null;for(;o===Mi;)Mi=Sn[--Nn],Sn[Nn]=null,Nr=Sn[--Nn],Sn[Nn]=null,Sr=Sn[--Nn],Sn[Nn]=null}var hn=null,mn=null,lt=!1,Dn=null;function Lb(o,l){var h=Tn(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=o,l=o.deletions,l===null?(o.deletions=[h],o.flags|=16):l.push(h)}function Db(o,l){switch(o.tag){case 5:var h=o.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,hn=o,mn=Xr(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,hn=o,mn=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=Mi!==null?{id:Sr,overflow:Nr}:null,o.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=Tn(18,null,null,0),h.stateNode=l,h.return=o,o.child=h,hn=o,mn=null,!0):!1;default:return!1}}function pd(o){return(o.mode&1)!==0&&(o.flags&128)===0}function fd(o){if(lt){var l=mn;if(l){var h=l;if(!Db(o,l)){if(pd(o))throw Error(n(418));l=Xr(h.nextSibling);var y=hn;l&&Db(o,l)?Lb(y,h):(o.flags=o.flags&-4097|2,lt=!1,hn=o)}}else{if(pd(o))throw Error(n(418));o.flags=o.flags&-4097|2,lt=!1,hn=o}}}function qb(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;hn=o}function Al(o){if(o!==hn)return!1;if(!lt)return qb(o),lt=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!id(o.type,o.memoizedProps)),l&&(l=mn)){if(pd(o))throw Fb(),Error(n(418));for(;l;)Lb(o,l),l=Xr(l.nextSibling)}if(qb(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(l===0){mn=Xr(o.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}o=o.nextSibling}mn=null}}else mn=hn?Xr(o.stateNode.nextSibling):null;return!0}function Fb(){for(var o=mn;o;)o=Xr(o.nextSibling)}function Lo(){mn=hn=null,lt=!1}function hd(o){Dn===null?Dn=[o]:Dn.push(o)}var DI=A.ReactCurrentBatchConfig;function Ys(o,l,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var y=h.stateNode}if(!y)throw Error(n(147,o));var x=y,j=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===j?l.ref:(l=function(O){var W=x.refs;O===null?delete W[j]:W[j]=O},l._stringRef=j,l)}if(typeof o!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,o))}return o}function Pl(o,l){throw o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function zb(o){var l=o._init;return l(o._payload)}function Bb(o){function l(re,ne){if(o){var ie=re.deletions;ie===null?(re.deletions=[ne],re.flags|=16):ie.push(ne)}}function h(re,ne){if(!o)return null;for(;ne!==null;)l(re,ne),ne=ne.sibling;return null}function y(re,ne){for(re=new Map;ne!==null;)ne.key!==null?re.set(ne.key,ne):re.set(ne.index,ne),ne=ne.sibling;return re}function x(re,ne){return re=ai(re,ne),re.index=0,re.sibling=null,re}function j(re,ne,ie){return re.index=ie,o?(ie=re.alternate,ie!==null?(ie=ie.index,ie<ne?(re.flags|=2,ne):ie):(re.flags|=2,ne)):(re.flags|=1048576,ne)}function O(re){return o&&re.alternate===null&&(re.flags|=2),re}function W(re,ne,ie,me){return ne===null||ne.tag!==6?(ne=op(ie,re.mode,me),ne.return=re,ne):(ne=x(ne,ie),ne.return=re,ne)}function J(re,ne,ie,me){var Te=ie.type;return Te===C?ue(re,ne,ie.props.children,me,ie.key):ne!==null&&(ne.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===H&&zb(Te)===ne.type)?(me=x(ne,ie.props),me.ref=Ys(re,ne,ie),me.return=re,me):(me=tc(ie.type,ie.key,ie.props,null,re.mode,me),me.ref=Ys(re,ne,ie),me.return=re,me)}function se(re,ne,ie,me){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ie.containerInfo||ne.stateNode.implementation!==ie.implementation?(ne=sp(ie,re.mode,me),ne.return=re,ne):(ne=x(ne,ie.children||[]),ne.return=re,ne)}function ue(re,ne,ie,me,Te){return ne===null||ne.tag!==7?(ne=Vi(ie,re.mode,me,Te),ne.return=re,ne):(ne=x(ne,ie),ne.return=re,ne)}function fe(re,ne,ie){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=op(""+ne,re.mode,ie),ne.return=re,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case P:return ie=tc(ne.type,ne.key,ne.props,null,re.mode,ie),ie.ref=Ys(re,null,ne),ie.return=re,ie;case T:return ne=sp(ne,re.mode,ie),ne.return=re,ne;case H:var me=ne._init;return fe(re,me(ne._payload),ie)}if(dt(ne)||Y(ne))return ne=Vi(ne,re.mode,ie,null),ne.return=re,ne;Pl(re,ne)}return null}function ce(re,ne,ie,me){var Te=ne!==null?ne.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return Te!==null?null:W(re,ne,""+ie,me);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:return ie.key===Te?J(re,ne,ie,me):null;case T:return ie.key===Te?se(re,ne,ie,me):null;case H:return Te=ie._init,ce(re,ne,Te(ie._payload),me)}if(dt(ie)||Y(ie))return Te!==null?null:ue(re,ne,ie,me,null);Pl(re,ie)}return null}function ve(re,ne,ie,me,Te){if(typeof me=="string"&&me!==""||typeof me=="number")return re=re.get(ie)||null,W(ne,re,""+me,Te);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case P:return re=re.get(me.key===null?ie:me.key)||null,J(ne,re,me,Te);case T:return re=re.get(me.key===null?ie:me.key)||null,se(ne,re,me,Te);case H:var Pe=me._init;return ve(re,ne,ie,Pe(me._payload),Te)}if(dt(me)||Y(me))return re=re.get(ie)||null,ue(ne,re,me,Te,null);Pl(ne,me)}return null}function ke(re,ne,ie,me){for(var Te=null,Pe=null,Ie=ne,Re=ne=0,Pt=null;Ie!==null&&Re<ie.length;Re++){Ie.index>Re?(Pt=Ie,Ie=null):Pt=Ie.sibling;var We=ce(re,Ie,ie[Re],me);if(We===null){Ie===null&&(Ie=Pt);break}o&&Ie&&We.alternate===null&&l(re,Ie),ne=j(We,ne,Re),Pe===null?Te=We:Pe.sibling=We,Pe=We,Ie=Pt}if(Re===ie.length)return h(re,Ie),lt&&Li(re,Re),Te;if(Ie===null){for(;Re<ie.length;Re++)Ie=fe(re,ie[Re],me),Ie!==null&&(ne=j(Ie,ne,Re),Pe===null?Te=Ie:Pe.sibling=Ie,Pe=Ie);return lt&&Li(re,Re),Te}for(Ie=y(re,Ie);Re<ie.length;Re++)Pt=ve(Ie,re,Re,ie[Re],me),Pt!==null&&(o&&Pt.alternate!==null&&Ie.delete(Pt.key===null?Re:Pt.key),ne=j(Pt,ne,Re),Pe===null?Te=Pt:Pe.sibling=Pt,Pe=Pt);return o&&Ie.forEach(function(li){return l(re,li)}),lt&&Li(re,Re),Te}function Ee(re,ne,ie,me){var Te=Y(ie);if(typeof Te!="function")throw Error(n(150));if(ie=Te.call(ie),ie==null)throw Error(n(151));for(var Pe=Te=null,Ie=ne,Re=ne=0,Pt=null,We=ie.next();Ie!==null&&!We.done;Re++,We=ie.next()){Ie.index>Re?(Pt=Ie,Ie=null):Pt=Ie.sibling;var li=ce(re,Ie,We.value,me);if(li===null){Ie===null&&(Ie=Pt);break}o&&Ie&&li.alternate===null&&l(re,Ie),ne=j(li,ne,Re),Pe===null?Te=li:Pe.sibling=li,Pe=li,Ie=Pt}if(We.done)return h(re,Ie),lt&&Li(re,Re),Te;if(Ie===null){for(;!We.done;Re++,We=ie.next())We=fe(re,We.value,me),We!==null&&(ne=j(We,ne,Re),Pe===null?Te=We:Pe.sibling=We,Pe=We);return lt&&Li(re,Re),Te}for(Ie=y(re,Ie);!We.done;Re++,We=ie.next())We=ve(Ie,re,Re,We.value,me),We!==null&&(o&&We.alternate!==null&&Ie.delete(We.key===null?Re:We.key),ne=j(We,ne,Re),Pe===null?Te=We:Pe.sibling=We,Pe=We);return o&&Ie.forEach(function(gR){return l(re,gR)}),lt&&Li(re,Re),Te}function xt(re,ne,ie,me){if(typeof ie=="object"&&ie!==null&&ie.type===C&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case P:e:{for(var Te=ie.key,Pe=ne;Pe!==null;){if(Pe.key===Te){if(Te=ie.type,Te===C){if(Pe.tag===7){h(re,Pe.sibling),ne=x(Pe,ie.props.children),ne.return=re,re=ne;break e}}else if(Pe.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===H&&zb(Te)===Pe.type){h(re,Pe.sibling),ne=x(Pe,ie.props),ne.ref=Ys(re,Pe,ie),ne.return=re,re=ne;break e}h(re,Pe);break}else l(re,Pe);Pe=Pe.sibling}ie.type===C?(ne=Vi(ie.props.children,re.mode,me,ie.key),ne.return=re,re=ne):(me=tc(ie.type,ie.key,ie.props,null,re.mode,me),me.ref=Ys(re,ne,ie),me.return=re,re=me)}return O(re);case T:e:{for(Pe=ie.key;ne!==null;){if(ne.key===Pe)if(ne.tag===4&&ne.stateNode.containerInfo===ie.containerInfo&&ne.stateNode.implementation===ie.implementation){h(re,ne.sibling),ne=x(ne,ie.children||[]),ne.return=re,re=ne;break e}else{h(re,ne);break}else l(re,ne);ne=ne.sibling}ne=sp(ie,re.mode,me),ne.return=re,re=ne}return O(re);case H:return Pe=ie._init,xt(re,ne,Pe(ie._payload),me)}if(dt(ie))return ke(re,ne,ie,me);if(Y(ie))return Ee(re,ne,ie,me);Pl(re,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,ne!==null&&ne.tag===6?(h(re,ne.sibling),ne=x(ne,ie),ne.return=re,re=ne):(h(re,ne),ne=op(ie,re.mode,me),ne.return=re,re=ne),O(re)):h(re,ne)}return xt}var Do=Bb(!0),$b=Bb(!1),Il=Qr(null),Rl=null,qo=null,md=null;function gd(){md=qo=Rl=null}function yd(o){var l=Il.current;rt(Il),o._currentValue=l}function vd(o,l,h){for(;o!==null;){var y=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),o===h)break;o=o.return}}function Fo(o,l){Rl=o,md=qo=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(Jt=!0),o.firstContext=null)}function jn(o){var l=o._currentValue;if(md!==o)if(o={context:o,memoizedValue:l,next:null},qo===null){if(Rl===null)throw Error(n(308));qo=o,Rl.dependencies={lanes:0,firstContext:o}}else qo=qo.next=o;return l}var Di=null;function xd(o){Di===null?Di=[o]:Di.push(o)}function Hb(o,l,h,y){var x=l.interleaved;return x===null?(h.next=h,xd(l)):(h.next=x.next,x.next=h),l.interleaved=h,jr(o,y)}function jr(o,l){o.lanes|=l;var h=o.alternate;for(h!==null&&(h.lanes|=l),h=o,o=o.return;o!==null;)o.childLanes|=l,h=o.alternate,h!==null&&(h.childLanes|=l),h=o,o=o.return;return h.tag===3?h.stateNode:null}var ei=!1;function bd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vb(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Er(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function ti(o,l,h){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Ue&2)!==0){var x=y.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),y.pending=l,jr(o,h)}return x=y.interleaved,x===null?(l.next=l,xd(y)):(l.next=x.next,x.next=l),y.interleaved=l,jr(o,h)}function Ol(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var y=l.lanes;y&=o.pendingLanes,h|=y,l.lanes=h,Ps(o,h)}}function Ub(o,l){var h=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var x=null,j=null;if(h=h.firstBaseUpdate,h!==null){do{var O={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};j===null?x=j=O:j=j.next=O,h=h.next}while(h!==null);j===null?x=j=l:j=j.next=l}else x=j=l;h={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:j,shared:y.shared,effects:y.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}function Ml(o,l,h,y){var x=o.updateQueue;ei=!1;var j=x.firstBaseUpdate,O=x.lastBaseUpdate,W=x.shared.pending;if(W!==null){x.shared.pending=null;var J=W,se=J.next;J.next=null,O===null?j=se:O.next=se,O=J;var ue=o.alternate;ue!==null&&(ue=ue.updateQueue,W=ue.lastBaseUpdate,W!==O&&(W===null?ue.firstBaseUpdate=se:W.next=se,ue.lastBaseUpdate=J))}if(j!==null){var fe=x.baseState;O=0,ue=se=J=null,W=j;do{var ce=W.lane,ve=W.eventTime;if((y&ce)===ce){ue!==null&&(ue=ue.next={eventTime:ve,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var ke=o,Ee=W;switch(ce=l,ve=h,Ee.tag){case 1:if(ke=Ee.payload,typeof ke=="function"){fe=ke.call(ve,fe,ce);break e}fe=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Ee.payload,ce=typeof ke=="function"?ke.call(ve,fe,ce):ke,ce==null)break e;fe=I({},fe,ce);break e;case 2:ei=!0}}W.callback!==null&&W.lane!==0&&(o.flags|=64,ce=x.effects,ce===null?x.effects=[W]:ce.push(W))}else ve={eventTime:ve,lane:ce,tag:W.tag,payload:W.payload,callback:W.callback,next:null},ue===null?(se=ue=ve,J=fe):ue=ue.next=ve,O|=ce;if(W=W.next,W===null){if(W=x.shared.pending,W===null)break;ce=W,W=ce.next,ce.next=null,x.lastBaseUpdate=ce,x.shared.pending=null}}while(!0);if(ue===null&&(J=fe),x.baseState=J,x.firstBaseUpdate=se,x.lastBaseUpdate=ue,l=x.shared.interleaved,l!==null){x=l;do O|=x.lane,x=x.next;while(x!==l)}else j===null&&(x.shared.lanes=0);zi|=O,o.lanes=O,o.memoizedState=fe}}function Wb(o,l,h){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var y=o[l],x=y.callback;if(x!==null){if(y.callback=null,y=h,typeof x!="function")throw Error(n(191,x));x.call(y)}}}var Xs={},tr=Qr(Xs),Qs=Qr(Xs),Js=Qr(Xs);function qi(o){if(o===Xs)throw Error(n(174));return o}function wd(o,l){switch(Qe(Js,l),Qe(Qs,o),Qe(tr,Xs),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:de(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=de(l,o)}rt(tr),Qe(tr,l)}function zo(){rt(tr),rt(Qs),rt(Js)}function Kb(o){qi(Js.current);var l=qi(tr.current),h=de(l,o.type);l!==h&&(Qe(Qs,o),Qe(tr,h))}function _d(o){Qs.current===o&&(rt(tr),rt(Qs))}var ft=Qr(0);function Ll(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var kd=[];function Sd(){for(var o=0;o<kd.length;o++)kd[o]._workInProgressVersionPrimary=null;kd.length=0}var Dl=A.ReactCurrentDispatcher,Nd=A.ReactCurrentBatchConfig,Fi=0,ht=null,jt=null,Tt=null,ql=!1,Zs=!1,ea=0,qI=0;function Bt(){throw Error(n(321))}function jd(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Ln(o[h],l[h]))return!1;return!0}function Ed(o,l,h,y,x,j){if(Fi=j,ht=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Dl.current=o===null||o.memoizedState===null?$I:HI,o=h(y,x),Zs){j=0;do{if(Zs=!1,ea=0,25<=j)throw Error(n(301));j+=1,Tt=jt=null,l.updateQueue=null,Dl.current=VI,o=h(y,x)}while(Zs)}if(Dl.current=Bl,l=jt!==null&&jt.next!==null,Fi=0,Tt=jt=ht=null,ql=!1,l)throw Error(n(300));return o}function Cd(){var o=ea!==0;return ea=0,o}function nr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?ht.memoizedState=Tt=o:Tt=Tt.next=o,Tt}function En(){if(jt===null){var o=ht.alternate;o=o!==null?o.memoizedState:null}else o=jt.next;var l=Tt===null?ht.memoizedState:Tt.next;if(l!==null)Tt=l,jt=o;else{if(o===null)throw Error(n(310));jt=o,o={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Tt===null?ht.memoizedState=Tt=o:Tt=Tt.next=o}return Tt}function ta(o,l){return typeof l=="function"?l(o):l}function Td(o){var l=En(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var y=jt,x=y.baseQueue,j=h.pending;if(j!==null){if(x!==null){var O=x.next;x.next=j.next,j.next=O}y.baseQueue=x=j,h.pending=null}if(x!==null){j=x.next,y=y.baseState;var W=O=null,J=null,se=j;do{var ue=se.lane;if((Fi&ue)===ue)J!==null&&(J=J.next={lane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),y=se.hasEagerState?se.eagerState:o(y,se.action);else{var fe={lane:ue,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null};J===null?(W=J=fe,O=y):J=J.next=fe,ht.lanes|=ue,zi|=ue}se=se.next}while(se!==null&&se!==j);J===null?O=y:J.next=W,Ln(y,l.memoizedState)||(Jt=!0),l.memoizedState=y,l.baseState=O,l.baseQueue=J,h.lastRenderedState=y}if(o=h.interleaved,o!==null){x=o;do j=x.lane,ht.lanes|=j,zi|=j,x=x.next;while(x!==o)}else x===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function Ad(o){var l=En(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var y=h.dispatch,x=h.pending,j=l.memoizedState;if(x!==null){h.pending=null;var O=x=x.next;do j=o(j,O.action),O=O.next;while(O!==x);Ln(j,l.memoizedState)||(Jt=!0),l.memoizedState=j,l.baseQueue===null&&(l.baseState=j),h.lastRenderedState=j}return[j,y]}function Gb(){}function Yb(o,l){var h=ht,y=En(),x=l(),j=!Ln(y.memoizedState,x);if(j&&(y.memoizedState=x,Jt=!0),y=y.queue,Pd(Jb.bind(null,h,y,o),[o]),y.getSnapshot!==l||j||Tt!==null&&Tt.memoizedState.tag&1){if(h.flags|=2048,na(9,Qb.bind(null,h,y,x,l),void 0,null),At===null)throw Error(n(349));(Fi&30)!==0||Xb(h,l,x)}return x}function Xb(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=ht.updateQueue,l===null?(l={lastEffect:null,stores:null},ht.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function Qb(o,l,h,y){l.value=h,l.getSnapshot=y,Zb(l)&&ew(o)}function Jb(o,l,h){return h(function(){Zb(l)&&ew(o)})}function Zb(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Ln(o,h)}catch{return!0}}function ew(o){var l=jr(o,1);l!==null&&Bn(l,o,1,-1)}function tw(o){var l=nr();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:o},l.queue=o,o=o.dispatch=BI.bind(null,ht,o),[l.memoizedState,o]}function na(o,l,h,y){return o={tag:o,create:l,destroy:h,deps:y,next:null},l=ht.updateQueue,l===null?(l={lastEffect:null,stores:null},ht.updateQueue=l,l.lastEffect=o.next=o):(h=l.lastEffect,h===null?l.lastEffect=o.next=o:(y=h.next,h.next=o,o.next=y,l.lastEffect=o)),o}function nw(){return En().memoizedState}function Fl(o,l,h,y){var x=nr();ht.flags|=o,x.memoizedState=na(1|l,h,void 0,y===void 0?null:y)}function zl(o,l,h,y){var x=En();y=y===void 0?null:y;var j=void 0;if(jt!==null){var O=jt.memoizedState;if(j=O.destroy,y!==null&&jd(y,O.deps)){x.memoizedState=na(l,h,j,y);return}}ht.flags|=o,x.memoizedState=na(1|l,h,j,y)}function rw(o,l){return Fl(8390656,8,o,l)}function Pd(o,l){return zl(2048,8,o,l)}function iw(o,l){return zl(4,2,o,l)}function ow(o,l){return zl(4,4,o,l)}function sw(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function aw(o,l,h){return h=h!=null?h.concat([o]):null,zl(4,4,sw.bind(null,l,o),h)}function Id(){}function lw(o,l){var h=En();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&jd(l,y[1])?y[0]:(h.memoizedState=[o,l],o)}function cw(o,l){var h=En();l=l===void 0?null:l;var y=h.memoizedState;return y!==null&&l!==null&&jd(l,y[1])?y[0]:(o=o(),h.memoizedState=[o,l],o)}function uw(o,l,h){return(Fi&21)===0?(o.baseState&&(o.baseState=!1,Jt=!0),o.memoizedState=h):(Ln(h,l)||(h=wr(),ht.lanes|=h,zi|=h,o.baseState=!0),l)}function FI(o,l){var h=Ke;Ke=h!==0&&4>h?h:4,o(!0);var y=Nd.transition;Nd.transition={};try{o(!1),l()}finally{Ke=h,Nd.transition=y}}function dw(){return En().memoizedState}function zI(o,l,h){var y=oi(o);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},pw(o))fw(l,h);else if(h=Hb(o,l,h,y),h!==null){var x=Kt();Bn(h,o,y,x),hw(h,l,y)}}function BI(o,l,h){var y=oi(o),x={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(pw(o))fw(l,x);else{var j=o.alternate;if(o.lanes===0&&(j===null||j.lanes===0)&&(j=l.lastRenderedReducer,j!==null))try{var O=l.lastRenderedState,W=j(O,h);if(x.hasEagerState=!0,x.eagerState=W,Ln(W,O)){var J=l.interleaved;J===null?(x.next=x,xd(l)):(x.next=J.next,J.next=x),l.interleaved=x;return}}catch{}h=Hb(o,l,x,y),h!==null&&(x=Kt(),Bn(h,o,y,x),hw(h,l,y))}}function pw(o){var l=o.alternate;return o===ht||l!==null&&l===ht}function fw(o,l){Zs=ql=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function hw(o,l,h){if((h&4194240)!==0){var y=l.lanes;y&=o.pendingLanes,h|=y,l.lanes=h,Ps(o,h)}}var Bl={readContext:jn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},$I={readContext:jn,useCallback:function(o,l){return nr().memoizedState=[o,l===void 0?null:l],o},useContext:jn,useEffect:rw,useImperativeHandle:function(o,l,h){return h=h!=null?h.concat([o]):null,Fl(4194308,4,sw.bind(null,l,o),h)},useLayoutEffect:function(o,l){return Fl(4194308,4,o,l)},useInsertionEffect:function(o,l){return Fl(4,2,o,l)},useMemo:function(o,l){var h=nr();return l=l===void 0?null:l,o=o(),h.memoizedState=[o,l],o},useReducer:function(o,l,h){var y=nr();return l=h!==void 0?h(l):l,y.memoizedState=y.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},y.queue=o,o=o.dispatch=zI.bind(null,ht,o),[y.memoizedState,o]},useRef:function(o){var l=nr();return o={current:o},l.memoizedState=o},useState:tw,useDebugValue:Id,useDeferredValue:function(o){return nr().memoizedState=o},useTransition:function(){var o=tw(!1),l=o[0];return o=FI.bind(null,o[1]),nr().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,h){var y=ht,x=nr();if(lt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),At===null)throw Error(n(349));(Fi&30)!==0||Xb(y,l,h)}x.memoizedState=h;var j={value:h,getSnapshot:l};return x.queue=j,rw(Jb.bind(null,y,j,o),[o]),y.flags|=2048,na(9,Qb.bind(null,y,j,h,l),void 0,null),h},useId:function(){var o=nr(),l=At.identifierPrefix;if(lt){var h=Nr,y=Sr;h=(y&~(1<<32-Ut(y)-1)).toString(32)+h,l=":"+l+"R"+h,h=ea++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=qI++,l=":"+l+"r"+h.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},HI={readContext:jn,useCallback:lw,useContext:jn,useEffect:Pd,useImperativeHandle:aw,useInsertionEffect:iw,useLayoutEffect:ow,useMemo:cw,useReducer:Td,useRef:nw,useState:function(){return Td(ta)},useDebugValue:Id,useDeferredValue:function(o){var l=En();return uw(l,jt.memoizedState,o)},useTransition:function(){var o=Td(ta)[0],l=En().memoizedState;return[o,l]},useMutableSource:Gb,useSyncExternalStore:Yb,useId:dw,unstable_isNewReconciler:!1},VI={readContext:jn,useCallback:lw,useContext:jn,useEffect:Pd,useImperativeHandle:aw,useInsertionEffect:iw,useLayoutEffect:ow,useMemo:cw,useReducer:Ad,useRef:nw,useState:function(){return Ad(ta)},useDebugValue:Id,useDeferredValue:function(o){var l=En();return jt===null?l.memoizedState=o:uw(l,jt.memoizedState,o)},useTransition:function(){var o=Ad(ta)[0],l=En().memoizedState;return[o,l]},useMutableSource:Gb,useSyncExternalStore:Yb,useId:dw,unstable_isNewReconciler:!1};function qn(o,l){if(o&&o.defaultProps){l=I({},l),o=o.defaultProps;for(var h in o)l[h]===void 0&&(l[h]=o[h]);return l}return l}function Rd(o,l,h,y){l=o.memoizedState,h=h(y,l),h=h==null?l:I({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var $l={isMounted:function(o){return(o=o._reactInternals)?dn(o)===o:!1},enqueueSetState:function(o,l,h){o=o._reactInternals;var y=Kt(),x=oi(o),j=Er(y,x);j.payload=l,h!=null&&(j.callback=h),l=ti(o,j,x),l!==null&&(Bn(l,o,x,y),Ol(l,o,x))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var y=Kt(),x=oi(o),j=Er(y,x);j.tag=1,j.payload=l,h!=null&&(j.callback=h),l=ti(o,j,x),l!==null&&(Bn(l,o,x,y),Ol(l,o,x))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=Kt(),y=oi(o),x=Er(h,y);x.tag=2,l!=null&&(x.callback=l),l=ti(o,x,y),l!==null&&(Bn(l,o,y,h),Ol(l,o,y))}};function mw(o,l,h,y,x,j,O){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,j,O):l.prototype&&l.prototype.isPureReactComponent?!$s(h,y)||!$s(x,j):!0}function gw(o,l,h){var y=!1,x=Jr,j=l.contextType;return typeof j=="object"&&j!==null?j=jn(j):(x=Qt(l)?Oi:zt.current,y=l.contextTypes,j=(y=y!=null)?Ro(o,x):Jr),l=new l(h,j),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=$l,o.stateNode=l,l._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=x,o.__reactInternalMemoizedMaskedChildContext=j),l}function yw(o,l,h,y){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,y),l.state!==o&&$l.enqueueReplaceState(l,l.state,null)}function Od(o,l,h,y){var x=o.stateNode;x.props=h,x.state=o.memoizedState,x.refs={},bd(o);var j=l.contextType;typeof j=="object"&&j!==null?x.context=jn(j):(j=Qt(l)?Oi:zt.current,x.context=Ro(o,j)),x.state=o.memoizedState,j=l.getDerivedStateFromProps,typeof j=="function"&&(Rd(o,l,j,h),x.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(l=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),l!==x.state&&$l.enqueueReplaceState(x,x.state,null),Ml(o,h,x,y),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308)}function Bo(o,l){try{var h="",y=l;do h+=te(y),y=y.return;while(y);var x=h}catch(j){x=`
Error generating stack: `+j.message+`
`+j.stack}return{value:o,source:l,stack:x,digest:null}}function Md(o,l,h){return{value:o,source:null,stack:h??null,digest:l??null}}function Ld(o,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var UI=typeof WeakMap=="function"?WeakMap:Map;function vw(o,l,h){h=Er(-1,h),h.tag=3,h.payload={element:null};var y=l.value;return h.callback=function(){Yl||(Yl=!0,Qd=y),Ld(o,l)},h}function xw(o,l,h){h=Er(-1,h),h.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var x=l.value;h.payload=function(){return y(x)},h.callback=function(){Ld(o,l)}}var j=o.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(h.callback=function(){Ld(o,l),typeof y!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),h}function bw(o,l,h){var y=o.pingCache;if(y===null){y=o.pingCache=new UI;var x=new Set;y.set(l,x)}else x=y.get(l),x===void 0&&(x=new Set,y.set(l,x));x.has(h)||(x.add(h),o=oR.bind(null,o,l,h),l.then(o,o))}function ww(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function _w(o,l,h,y,x){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=Er(-1,1),l.tag=2,ti(h,l,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=x,o)}var WI=A.ReactCurrentOwner,Jt=!1;function Wt(o,l,h,y){l.child=o===null?$b(l,null,h,y):Do(l,o.child,h,y)}function kw(o,l,h,y,x){h=h.render;var j=l.ref;return Fo(l,x),y=Ed(o,l,h,y,j,x),h=Cd(),o!==null&&!Jt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~x,Cr(o,l,x)):(lt&&h&&ud(l),l.flags|=1,Wt(o,l,y,x),l.child)}function Sw(o,l,h,y,x){if(o===null){var j=h.type;return typeof j=="function"&&!ip(j)&&j.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=j,Nw(o,l,j,y,x)):(o=tc(h.type,null,y,l,l.mode,x),o.ref=l.ref,o.return=l,l.child=o)}if(j=o.child,(o.lanes&x)===0){var O=j.memoizedProps;if(h=h.compare,h=h!==null?h:$s,h(O,y)&&o.ref===l.ref)return Cr(o,l,x)}return l.flags|=1,o=ai(j,y),o.ref=l.ref,o.return=l,l.child=o}function Nw(o,l,h,y,x){if(o!==null){var j=o.memoizedProps;if($s(j,y)&&o.ref===l.ref)if(Jt=!1,l.pendingProps=y=j,(o.lanes&x)!==0)(o.flags&131072)!==0&&(Jt=!0);else return l.lanes=o.lanes,Cr(o,l,x)}return Dd(o,l,h,y,x)}function jw(o,l,h){var y=l.pendingProps,x=y.children,j=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Ho,gn),gn|=h;else{if((h&1073741824)===0)return o=j!==null?j.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,Qe(Ho,gn),gn|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=j!==null?j.baseLanes:h,Qe(Ho,gn),gn|=y}else j!==null?(y=j.baseLanes|h,l.memoizedState=null):y=h,Qe(Ho,gn),gn|=y;return Wt(o,l,x,h),l.child}function Ew(o,l){var h=l.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function Dd(o,l,h,y,x){var j=Qt(h)?Oi:zt.current;return j=Ro(l,j),Fo(l,x),h=Ed(o,l,h,y,j,x),y=Cd(),o!==null&&!Jt?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~x,Cr(o,l,x)):(lt&&y&&ud(l),l.flags|=1,Wt(o,l,h,x),l.child)}function Cw(o,l,h,y,x){if(Qt(h)){var j=!0;jl(l)}else j=!1;if(Fo(l,x),l.stateNode===null)Vl(o,l),gw(l,h,y),Od(l,h,y,x),y=!0;else if(o===null){var O=l.stateNode,W=l.memoizedProps;O.props=W;var J=O.context,se=h.contextType;typeof se=="object"&&se!==null?se=jn(se):(se=Qt(h)?Oi:zt.current,se=Ro(l,se));var ue=h.getDerivedStateFromProps,fe=typeof ue=="function"||typeof O.getSnapshotBeforeUpdate=="function";fe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==y||J!==se)&&yw(l,O,y,se),ei=!1;var ce=l.memoizedState;O.state=ce,Ml(l,y,O,x),J=l.memoizedState,W!==y||ce!==J||Xt.current||ei?(typeof ue=="function"&&(Rd(l,h,ue,y),J=l.memoizedState),(W=ei||mw(l,h,W,y,ce,J,se))?(fe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=J),O.props=y,O.state=J,O.context=se,y=W):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{O=l.stateNode,Vb(o,l),W=l.memoizedProps,se=l.type===l.elementType?W:qn(l.type,W),O.props=se,fe=l.pendingProps,ce=O.context,J=h.contextType,typeof J=="object"&&J!==null?J=jn(J):(J=Qt(h)?Oi:zt.current,J=Ro(l,J));var ve=h.getDerivedStateFromProps;(ue=typeof ve=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==fe||ce!==J)&&yw(l,O,y,J),ei=!1,ce=l.memoizedState,O.state=ce,Ml(l,y,O,x);var ke=l.memoizedState;W!==fe||ce!==ke||Xt.current||ei?(typeof ve=="function"&&(Rd(l,h,ve,y),ke=l.memoizedState),(se=ei||mw(l,h,se,y,ce,ke,J)||!1)?(ue||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,ke,J),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,ke,J)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||W===o.memoizedProps&&ce===o.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===o.memoizedProps&&ce===o.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=ke),O.props=y,O.state=ke,O.context=J,y=se):(typeof O.componentDidUpdate!="function"||W===o.memoizedProps&&ce===o.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===o.memoizedProps&&ce===o.memoizedState||(l.flags|=1024),y=!1)}return qd(o,l,h,y,j,x)}function qd(o,l,h,y,x,j){Ew(o,l);var O=(l.flags&128)!==0;if(!y&&!O)return x&&Rb(l,h,!1),Cr(o,l,j);y=l.stateNode,WI.current=l;var W=O&&typeof h.getDerivedStateFromError!="function"?null:y.render();return l.flags|=1,o!==null&&O?(l.child=Do(l,o.child,null,j),l.child=Do(l,null,W,j)):Wt(o,l,W,j),l.memoizedState=y.state,x&&Rb(l,h,!0),l.child}function Tw(o){var l=o.stateNode;l.pendingContext?Pb(o,l.pendingContext,l.pendingContext!==l.context):l.context&&Pb(o,l.context,!1),wd(o,l.containerInfo)}function Aw(o,l,h,y,x){return Lo(),hd(x),l.flags|=256,Wt(o,l,h,y),l.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function zd(o){return{baseLanes:o,cachePool:null,transitions:null}}function Pw(o,l,h){var y=l.pendingProps,x=ft.current,j=!1,O=(l.flags&128)!==0,W;if((W=O)||(W=o!==null&&o.memoizedState===null?!1:(x&2)!==0),W?(j=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(x|=1),Qe(ft,x&1),o===null)return fd(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=y.children,o=y.fallback,j?(y=l.mode,j=l.child,O={mode:"hidden",children:O},(y&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=O):j=nc(O,y,0,null),o=Vi(o,y,h,null),j.return=l,o.return=l,j.sibling=o,l.child=j,l.child.memoizedState=zd(h),l.memoizedState=Fd,o):Bd(l,O));if(x=o.memoizedState,x!==null&&(W=x.dehydrated,W!==null))return KI(o,l,O,y,W,x,h);if(j){j=y.fallback,O=l.mode,x=o.child,W=x.sibling;var J={mode:"hidden",children:y.children};return(O&1)===0&&l.child!==x?(y=l.child,y.childLanes=0,y.pendingProps=J,l.deletions=null):(y=ai(x,J),y.subtreeFlags=x.subtreeFlags&14680064),W!==null?j=ai(W,j):(j=Vi(j,O,h,null),j.flags|=2),j.return=l,y.return=l,y.sibling=j,l.child=y,y=j,j=l.child,O=o.child.memoizedState,O=O===null?zd(h):{baseLanes:O.baseLanes|h,cachePool:null,transitions:O.transitions},j.memoizedState=O,j.childLanes=o.childLanes&~h,l.memoizedState=Fd,y}return j=o.child,o=j.sibling,y=ai(j,{mode:"visible",children:y.children}),(l.mode&1)===0&&(y.lanes=h),y.return=l,y.sibling=null,o!==null&&(h=l.deletions,h===null?(l.deletions=[o],l.flags|=16):h.push(o)),l.child=y,l.memoizedState=null,y}function Bd(o,l){return l=nc({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Hl(o,l,h,y){return y!==null&&hd(y),Do(l,o.child,null,h),o=Bd(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function KI(o,l,h,y,x,j,O){if(h)return l.flags&256?(l.flags&=-257,y=Md(Error(n(422))),Hl(o,l,O,y)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(j=y.fallback,x=l.mode,y=nc({mode:"visible",children:y.children},x,0,null),j=Vi(j,x,O,null),j.flags|=2,y.return=l,j.return=l,y.sibling=j,l.child=y,(l.mode&1)!==0&&Do(l,o.child,null,O),l.child.memoizedState=zd(O),l.memoizedState=Fd,j);if((l.mode&1)===0)return Hl(o,l,O,null);if(x.data==="$!"){if(y=x.nextSibling&&x.nextSibling.dataset,y)var W=y.dgst;return y=W,j=Error(n(419)),y=Md(j,y,void 0),Hl(o,l,O,y)}if(W=(O&o.childLanes)!==0,Jt||W){if(y=At,y!==null){switch(O&-O){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(y.suspendedLanes|O))!==0?0:x,x!==0&&x!==j.retryLane&&(j.retryLane=x,jr(o,x),Bn(y,o,x,-1))}return rp(),y=Md(Error(n(421))),Hl(o,l,O,y)}return x.data==="$?"?(l.flags|=128,l.child=o.child,l=sR.bind(null,o),x._reactRetry=l,null):(o=j.treeContext,mn=Xr(x.nextSibling),hn=l,lt=!0,Dn=null,o!==null&&(Sn[Nn++]=Sr,Sn[Nn++]=Nr,Sn[Nn++]=Mi,Sr=o.id,Nr=o.overflow,Mi=l),l=Bd(l,y.children),l.flags|=4096,l)}function Iw(o,l,h){o.lanes|=l;var y=o.alternate;y!==null&&(y.lanes|=l),vd(o.return,l,h)}function $d(o,l,h,y,x){var j=o.memoizedState;j===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:x}:(j.isBackwards=l,j.rendering=null,j.renderingStartTime=0,j.last=y,j.tail=h,j.tailMode=x)}function Rw(o,l,h){var y=l.pendingProps,x=y.revealOrder,j=y.tail;if(Wt(o,l,y.children,h),y=ft.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Iw(o,h,l);else if(o.tag===19)Iw(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(Qe(ft,y),(l.mode&1)===0)l.memoizedState=null;else switch(x){case"forwards":for(h=l.child,x=null;h!==null;)o=h.alternate,o!==null&&Ll(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=l.child,l.child=null):(x=h.sibling,h.sibling=null),$d(l,!1,x,h,j);break;case"backwards":for(h=null,x=l.child,l.child=null;x!==null;){if(o=x.alternate,o!==null&&Ll(o)===null){l.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}$d(l,!0,h,null,j);break;case"together":$d(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Vl(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Cr(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),zi|=l.lanes,(h&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,h=ai(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=ai(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function GI(o,l,h){switch(l.tag){case 3:Tw(l),Lo();break;case 5:Kb(l);break;case 1:Qt(l.type)&&jl(l);break;case 4:wd(l,l.stateNode.containerInfo);break;case 10:var y=l.type._context,x=l.memoizedProps.value;Qe(Il,y._currentValue),y._currentValue=x;break;case 13:if(y=l.memoizedState,y!==null)return y.dehydrated!==null?(Qe(ft,ft.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?Pw(o,l,h):(Qe(ft,ft.current&1),o=Cr(o,l,h),o!==null?o.sibling:null);Qe(ft,ft.current&1);break;case 19:if(y=(h&l.childLanes)!==0,(o.flags&128)!==0){if(y)return Rw(o,l,h);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Qe(ft,ft.current),y)break;return null;case 22:case 23:return l.lanes=0,jw(o,l,h)}return Cr(o,l,h)}var Ow,Hd,Mw,Lw;Ow=function(o,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Hd=function(){},Mw=function(o,l,h,y){var x=o.memoizedProps;if(x!==y){o=l.stateNode,qi(tr.current);var j=null;switch(h){case"input":x=Ae(o,x),y=Ae(o,y),j=[];break;case"select":x=I({},x,{value:void 0}),y=I({},y,{value:void 0}),j=[];break;case"textarea":x=Be(o,x),y=Be(o,y),j=[];break;default:typeof x.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=kl)}vt(h,y);var O;h=null;for(se in x)if(!y.hasOwnProperty(se)&&x.hasOwnProperty(se)&&x[se]!=null)if(se==="style"){var W=x[se];for(O in W)W.hasOwnProperty(O)&&(h||(h={}),h[O]="")}else se!=="dangerouslySetInnerHTML"&&se!=="children"&&se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&se!=="autoFocus"&&(i.hasOwnProperty(se)?j||(j=[]):(j=j||[]).push(se,null));for(se in y){var J=y[se];if(W=x?.[se],y.hasOwnProperty(se)&&J!==W&&(J!=null||W!=null))if(se==="style")if(W){for(O in W)!W.hasOwnProperty(O)||J&&J.hasOwnProperty(O)||(h||(h={}),h[O]="");for(O in J)J.hasOwnProperty(O)&&W[O]!==J[O]&&(h||(h={}),h[O]=J[O])}else h||(j||(j=[]),j.push(se,h)),h=J;else se==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,W=W?W.__html:void 0,J!=null&&W!==J&&(j=j||[]).push(se,J)):se==="children"?typeof J!="string"&&typeof J!="number"||(j=j||[]).push(se,""+J):se!=="suppressContentEditableWarning"&&se!=="suppressHydrationWarning"&&(i.hasOwnProperty(se)?(J!=null&&se==="onScroll"&&nt("scroll",o),j||W===J||(j=[])):(j=j||[]).push(se,J))}h&&(j=j||[]).push("style",h);var se=j;(l.updateQueue=se)&&(l.flags|=4)}},Lw=function(o,l,h,y){h!==y&&(l.flags|=4)};function ra(o,l){if(!lt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function $t(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,y=0;if(l)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags&14680064,y|=x.flags&14680064,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=y,o.childLanes=h,l}function YI(o,l,h){var y=l.pendingProps;switch(dd(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(l),null;case 1:return Qt(l.type)&&Nl(),$t(l),null;case 3:return y=l.stateNode,zo(),rt(Xt),rt(zt),Sd(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(Al(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Dn!==null&&(ep(Dn),Dn=null))),Hd(o,l),$t(l),null;case 5:_d(l);var x=qi(Js.current);if(h=l.type,o!==null&&l.stateNode!=null)Mw(o,l,h,y,x),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!y){if(l.stateNode===null)throw Error(n(166));return $t(l),null}if(o=qi(tr.current),Al(l)){y=l.stateNode,h=l.type;var j=l.memoizedProps;switch(y[er]=l,y[Ks]=j,o=(l.mode&1)!==0,h){case"dialog":nt("cancel",y),nt("close",y);break;case"iframe":case"object":case"embed":nt("load",y);break;case"video":case"audio":for(x=0;x<Vs.length;x++)nt(Vs[x],y);break;case"source":nt("error",y);break;case"img":case"image":case"link":nt("error",y),nt("load",y);break;case"details":nt("toggle",y);break;case"input":be(y,j),nt("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!j.multiple},nt("invalid",y);break;case"textarea":Ve(y,j),nt("invalid",y)}vt(h,j),x=null;for(var O in j)if(j.hasOwnProperty(O)){var W=j[O];O==="children"?typeof W=="string"?y.textContent!==W&&(j.suppressHydrationWarning!==!0&&_l(y.textContent,W,o),x=["children",W]):typeof W=="number"&&y.textContent!==""+W&&(j.suppressHydrationWarning!==!0&&_l(y.textContent,W,o),x=["children",""+W]):i.hasOwnProperty(O)&&W!=null&&O==="onScroll"&&nt("scroll",y)}switch(h){case"input":ye(y),ot(y,j,!0);break;case"textarea":ye(y),ge(y);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(y.onclick=kl)}y=x,l.updateQueue=y,y!==null&&(l.flags|=4)}else{O=x.nodeType===9?x:x.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=oe(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=O.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=O.createElement(h,{is:y.is}):(o=O.createElement(h),h==="select"&&(O=o,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):o=O.createElementNS(o,h),o[er]=l,o[Ks]=y,Ow(o,l,!1,!1),l.stateNode=o;e:{switch(O=Ot(h,y),h){case"dialog":nt("cancel",o),nt("close",o),x=y;break;case"iframe":case"object":case"embed":nt("load",o),x=y;break;case"video":case"audio":for(x=0;x<Vs.length;x++)nt(Vs[x],o);x=y;break;case"source":nt("error",o),x=y;break;case"img":case"image":case"link":nt("error",o),nt("load",o),x=y;break;case"details":nt("toggle",o),x=y;break;case"input":be(o,y),x=Ae(o,y),nt("invalid",o);break;case"option":x=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},x=I({},y,{value:void 0}),nt("invalid",o);break;case"textarea":Ve(o,y),x=Be(o,y),nt("invalid",o);break;default:x=y}vt(h,x),W=x;for(j in W)if(W.hasOwnProperty(j)){var J=W[j];j==="style"?bt(o,J):j==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Me(o,J)):j==="children"?typeof J=="string"?(h!=="textarea"||J!=="")&&Le(o,J):typeof J=="number"&&Le(o,""+J):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?J!=null&&j==="onScroll"&&nt("scroll",o):J!=null&&S(o,j,J,O))}switch(h){case"input":ye(o),ot(o,y,!1);break;case"textarea":ye(o),ge(o);break;case"option":y.value!=null&&o.setAttribute("value",""+Q(y.value));break;case"select":o.multiple=!!y.multiple,j=y.value,j!=null?pt(o,!!y.multiple,j,!1):y.defaultValue!=null&&pt(o,!!y.multiple,y.defaultValue,!0);break;default:typeof x.onClick=="function"&&(o.onclick=kl)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return $t(l),null;case 6:if(o&&l.stateNode!=null)Lw(o,l,o.memoizedProps,y);else{if(typeof y!="string"&&l.stateNode===null)throw Error(n(166));if(h=qi(Js.current),qi(tr.current),Al(l)){if(y=l.stateNode,h=l.memoizedProps,y[er]=l,(j=y.nodeValue!==h)&&(o=hn,o!==null))switch(o.tag){case 3:_l(y.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&_l(y.nodeValue,h,(o.mode&1)!==0)}j&&(l.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[er]=l,l.stateNode=y}return $t(l),null;case 13:if(rt(ft),y=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(lt&&mn!==null&&(l.mode&1)!==0&&(l.flags&128)===0)Fb(),Lo(),l.flags|=98560,j=!1;else if(j=Al(l),y!==null&&y.dehydrated!==null){if(o===null){if(!j)throw Error(n(318));if(j=l.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(n(317));j[er]=l}else Lo(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;$t(l),j=!1}else Dn!==null&&(ep(Dn),Dn=null),j=!0;if(!j)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(ft.current&1)!==0?Et===0&&(Et=3):rp())),l.updateQueue!==null&&(l.flags|=4),$t(l),null);case 4:return zo(),Hd(o,l),o===null&&Us(l.stateNode.containerInfo),$t(l),null;case 10:return yd(l.type._context),$t(l),null;case 17:return Qt(l.type)&&Nl(),$t(l),null;case 19:if(rt(ft),j=l.memoizedState,j===null)return $t(l),null;if(y=(l.flags&128)!==0,O=j.rendering,O===null)if(y)ra(j,!1);else{if(Et!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(O=Ll(o),O!==null){for(l.flags|=128,ra(j,!1),y=O.updateQueue,y!==null&&(l.updateQueue=y,l.flags|=4),l.subtreeFlags=0,y=h,h=l.child;h!==null;)j=h,o=y,j.flags&=14680066,O=j.alternate,O===null?(j.childLanes=0,j.lanes=o,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=O.childLanes,j.lanes=O.lanes,j.child=O.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=O.memoizedProps,j.memoizedState=O.memoizedState,j.updateQueue=O.updateQueue,j.type=O.type,o=O.dependencies,j.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Qe(ft,ft.current&1|2),l.child}o=o.sibling}j.tail!==null&&Xe()>Vo&&(l.flags|=128,y=!0,ra(j,!1),l.lanes=4194304)}else{if(!y)if(o=Ll(O),o!==null){if(l.flags|=128,y=!0,h=o.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),ra(j,!0),j.tail===null&&j.tailMode==="hidden"&&!O.alternate&&!lt)return $t(l),null}else 2*Xe()-j.renderingStartTime>Vo&&h!==1073741824&&(l.flags|=128,y=!0,ra(j,!1),l.lanes=4194304);j.isBackwards?(O.sibling=l.child,l.child=O):(h=j.last,h!==null?h.sibling=O:l.child=O,j.last=O)}return j.tail!==null?(l=j.tail,j.rendering=l,j.tail=l.sibling,j.renderingStartTime=Xe(),l.sibling=null,h=ft.current,Qe(ft,y?h&1|2:h&1),l):($t(l),null);case 22:case 23:return np(),y=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(l.flags|=8192),y&&(l.mode&1)!==0?(gn&1073741824)!==0&&($t(l),l.subtreeFlags&6&&(l.flags|=8192)):$t(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function XI(o,l){switch(dd(l),l.tag){case 1:return Qt(l.type)&&Nl(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return zo(),rt(Xt),rt(zt),Sd(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return _d(l),null;case 13:if(rt(ft),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Lo()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return rt(ft),null;case 4:return zo(),null;case 10:return yd(l.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var Ul=!1,Ht=!1,QI=typeof WeakSet=="function"?WeakSet:Set,we=null;function $o(o,l){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){mt(o,l,y)}else h.current=null}function Vd(o,l,h){try{h()}catch(y){mt(o,l,y)}}var Dw=!1;function JI(o,l){if(nd=dl,o=mb(),Gu(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var x=y.anchorOffset,j=y.focusNode;y=y.focusOffset;try{h.nodeType,j.nodeType}catch{h=null;break e}var O=0,W=-1,J=-1,se=0,ue=0,fe=o,ce=null;t:for(;;){for(var ve;fe!==h||x!==0&&fe.nodeType!==3||(W=O+x),fe!==j||y!==0&&fe.nodeType!==3||(J=O+y),fe.nodeType===3&&(O+=fe.nodeValue.length),(ve=fe.firstChild)!==null;)ce=fe,fe=ve;for(;;){if(fe===o)break t;if(ce===h&&++se===x&&(W=O),ce===j&&++ue===y&&(J=O),(ve=fe.nextSibling)!==null)break;fe=ce,ce=fe.parentNode}fe=ve}h=W===-1||J===-1?null:{start:W,end:J}}else h=null}h=h||{start:0,end:0}}else h=null;for(rd={focusedElem:o,selectionRange:h},dl=!1,we=l;we!==null;)if(l=we,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,we=o;else for(;we!==null;){l=we;try{var ke=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var Ee=ke.memoizedProps,xt=ke.memoizedState,re=l.stateNode,ne=re.getSnapshotBeforeUpdate(l.elementType===l.type?Ee:qn(l.type,Ee),xt);re.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var ie=l.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(me){mt(l,l.return,me)}if(o=l.sibling,o!==null){o.return=l.return,we=o;break}we=l.return}return ke=Dw,Dw=!1,ke}function ia(o,l,h){var y=l.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var x=y=y.next;do{if((x.tag&o)===o){var j=x.destroy;x.destroy=void 0,j!==void 0&&Vd(l,h,j)}x=x.next}while(x!==y)}}function Wl(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&o)===o){var y=h.create;h.destroy=y()}h=h.next}while(h!==l)}}function Ud(o){var l=o.ref;if(l!==null){var h=o.stateNode;o.tag,o=h,typeof l=="function"?l(o):l.current=o}}function qw(o){var l=o.alternate;l!==null&&(o.alternate=null,qw(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[er],delete l[Ks],delete l[ad],delete l[OI],delete l[MI])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Fw(o){return o.tag===5||o.tag===3||o.tag===4}function zw(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Fw(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Wd(o,l,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(o,l):h.insertBefore(o,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(o,h)):(l=h,l.appendChild(o)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=kl));else if(y!==4&&(o=o.child,o!==null))for(Wd(o,l,h),o=o.sibling;o!==null;)Wd(o,l,h),o=o.sibling}function Kd(o,l,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(Kd(o,l,h),o=o.sibling;o!==null;)Kd(o,l,h),o=o.sibling}var Lt=null,Fn=!1;function ni(o,l,h){for(h=h.child;h!==null;)Bw(o,l,h),h=h.sibling}function Bw(o,l,h){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(br,h)}catch{}switch(h.tag){case 5:Ht||$o(h,l);case 6:var y=Lt,x=Fn;Lt=null,ni(o,l,h),Lt=y,Fn=x,Lt!==null&&(Fn?(o=Lt,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):Lt.removeChild(h.stateNode));break;case 18:Lt!==null&&(Fn?(o=Lt,h=h.stateNode,o.nodeType===8?sd(o.parentNode,h):o.nodeType===1&&sd(o,h),Ls(o)):sd(Lt,h.stateNode));break;case 4:y=Lt,x=Fn,Lt=h.stateNode.containerInfo,Fn=!0,ni(o,l,h),Lt=y,Fn=x;break;case 0:case 11:case 14:case 15:if(!Ht&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){x=y=y.next;do{var j=x,O=j.destroy;j=j.tag,O!==void 0&&((j&2)!==0||(j&4)!==0)&&Vd(h,l,O),x=x.next}while(x!==y)}ni(o,l,h);break;case 1:if(!Ht&&($o(h,l),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(W){mt(h,l,W)}ni(o,l,h);break;case 21:ni(o,l,h);break;case 22:h.mode&1?(Ht=(y=Ht)||h.memoizedState!==null,ni(o,l,h),Ht=y):ni(o,l,h);break;default:ni(o,l,h)}}function $w(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new QI),l.forEach(function(y){var x=aR.bind(null,o,y);h.has(y)||(h.add(y),y.then(x,x))})}}function zn(o,l){var h=l.deletions;if(h!==null)for(var y=0;y<h.length;y++){var x=h[y];try{var j=o,O=l,W=O;e:for(;W!==null;){switch(W.tag){case 5:Lt=W.stateNode,Fn=!1;break e;case 3:Lt=W.stateNode.containerInfo,Fn=!0;break e;case 4:Lt=W.stateNode.containerInfo,Fn=!0;break e}W=W.return}if(Lt===null)throw Error(n(160));Bw(j,O,x),Lt=null,Fn=!1;var J=x.alternate;J!==null&&(J.return=null),x.return=null}catch(se){mt(x,l,se)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)Hw(l,o),l=l.sibling}function Hw(o,l){var h=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(zn(l,o),rr(o),y&4){try{ia(3,o,o.return),Wl(3,o)}catch(Ee){mt(o,o.return,Ee)}try{ia(5,o,o.return)}catch(Ee){mt(o,o.return,Ee)}}break;case 1:zn(l,o),rr(o),y&512&&h!==null&&$o(h,h.return);break;case 5:if(zn(l,o),rr(o),y&512&&h!==null&&$o(h,h.return),o.flags&32){var x=o.stateNode;try{Le(x,"")}catch(Ee){mt(o,o.return,Ee)}}if(y&4&&(x=o.stateNode,x!=null)){var j=o.memoizedProps,O=h!==null?h.memoizedProps:j,W=o.type,J=o.updateQueue;if(o.updateQueue=null,J!==null)try{W==="input"&&j.type==="radio"&&j.name!=null&&De(x,j),Ot(W,O);var se=Ot(W,j);for(O=0;O<J.length;O+=2){var ue=J[O],fe=J[O+1];ue==="style"?bt(x,fe):ue==="dangerouslySetInnerHTML"?Me(x,fe):ue==="children"?Le(x,fe):S(x,ue,fe,se)}switch(W){case"input":Ce(x,j);break;case"textarea":yt(x,j);break;case"select":var ce=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!j.multiple;var ve=j.value;ve!=null?pt(x,!!j.multiple,ve,!1):ce!==!!j.multiple&&(j.defaultValue!=null?pt(x,!!j.multiple,j.defaultValue,!0):pt(x,!!j.multiple,j.multiple?[]:"",!1))}x[Ks]=j}catch(Ee){mt(o,o.return,Ee)}}break;case 6:if(zn(l,o),rr(o),y&4){if(o.stateNode===null)throw Error(n(162));x=o.stateNode,j=o.memoizedProps;try{x.nodeValue=j}catch(Ee){mt(o,o.return,Ee)}}break;case 3:if(zn(l,o),rr(o),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Ls(l.containerInfo)}catch(Ee){mt(o,o.return,Ee)}break;case 4:zn(l,o),rr(o);break;case 13:zn(l,o),rr(o),x=o.child,x.flags&8192&&(j=x.memoizedState!==null,x.stateNode.isHidden=j,!j||x.alternate!==null&&x.alternate.memoizedState!==null||(Xd=Xe())),y&4&&$w(o);break;case 22:if(ue=h!==null&&h.memoizedState!==null,o.mode&1?(Ht=(se=Ht)||ue,zn(l,o),Ht=se):zn(l,o),rr(o),y&8192){if(se=o.memoizedState!==null,(o.stateNode.isHidden=se)&&!ue&&(o.mode&1)!==0)for(we=o,ue=o.child;ue!==null;){for(fe=we=ue;we!==null;){switch(ce=we,ve=ce.child,ce.tag){case 0:case 11:case 14:case 15:ia(4,ce,ce.return);break;case 1:$o(ce,ce.return);var ke=ce.stateNode;if(typeof ke.componentWillUnmount=="function"){y=ce,h=ce.return;try{l=y,ke.props=l.memoizedProps,ke.state=l.memoizedState,ke.componentWillUnmount()}catch(Ee){mt(y,h,Ee)}}break;case 5:$o(ce,ce.return);break;case 22:if(ce.memoizedState!==null){Ww(fe);continue}}ve!==null?(ve.return=ce,we=ve):Ww(fe)}ue=ue.sibling}e:for(ue=null,fe=o;;){if(fe.tag===5){if(ue===null){ue=fe;try{x=fe.stateNode,se?(j=x.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(W=fe.stateNode,J=fe.memoizedProps.style,O=J!=null&&J.hasOwnProperty("display")?J.display:null,W.style.display=He("display",O))}catch(Ee){mt(o,o.return,Ee)}}}else if(fe.tag===6){if(ue===null)try{fe.stateNode.nodeValue=se?"":fe.memoizedProps}catch(Ee){mt(o,o.return,Ee)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===o)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===o)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===o)break e;ue===fe&&(ue=null),fe=fe.return}ue===fe&&(ue=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:zn(l,o),rr(o),y&4&&$w(o);break;case 21:break;default:zn(l,o),rr(o)}}function rr(o){var l=o.flags;if(l&2){try{e:{for(var h=o.return;h!==null;){if(Fw(h)){var y=h;break e}h=h.return}throw Error(n(160))}switch(y.tag){case 5:var x=y.stateNode;y.flags&32&&(Le(x,""),y.flags&=-33);var j=zw(o);Kd(o,j,x);break;case 3:case 4:var O=y.stateNode.containerInfo,W=zw(o);Wd(o,W,O);break;default:throw Error(n(161))}}catch(J){mt(o,o.return,J)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function ZI(o,l,h){we=o,Vw(o)}function Vw(o,l,h){for(var y=(o.mode&1)!==0;we!==null;){var x=we,j=x.child;if(x.tag===22&&y){var O=x.memoizedState!==null||Ul;if(!O){var W=x.alternate,J=W!==null&&W.memoizedState!==null||Ht;W=Ul;var se=Ht;if(Ul=O,(Ht=J)&&!se)for(we=x;we!==null;)O=we,J=O.child,O.tag===22&&O.memoizedState!==null?Kw(x):J!==null?(J.return=O,we=J):Kw(x);for(;j!==null;)we=j,Vw(j),j=j.sibling;we=x,Ul=W,Ht=se}Uw(o)}else(x.subtreeFlags&8772)!==0&&j!==null?(j.return=x,we=j):Uw(o)}}function Uw(o){for(;we!==null;){var l=we;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Ht||Wl(5,l);break;case 1:var y=l.stateNode;if(l.flags&4&&!Ht)if(h===null)y.componentDidMount();else{var x=l.elementType===l.type?h.memoizedProps:qn(l.type,h.memoizedProps);y.componentDidUpdate(x,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var j=l.updateQueue;j!==null&&Wb(l,j,y);break;case 3:var O=l.updateQueue;if(O!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}Wb(l,O,h)}break;case 5:var W=l.stateNode;if(h===null&&l.flags&4){h=W;var J=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&h.focus();break;case"img":J.src&&(h.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var se=l.alternate;if(se!==null){var ue=se.memoizedState;if(ue!==null){var fe=ue.dehydrated;fe!==null&&Ls(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ht||l.flags&512&&Ud(l)}catch(ce){mt(l,l.return,ce)}}if(l===o){we=null;break}if(h=l.sibling,h!==null){h.return=l.return,we=h;break}we=l.return}}function Ww(o){for(;we!==null;){var l=we;if(l===o){we=null;break}var h=l.sibling;if(h!==null){h.return=l.return,we=h;break}we=l.return}}function Kw(o){for(;we!==null;){var l=we;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{Wl(4,l)}catch(J){mt(l,h,J)}break;case 1:var y=l.stateNode;if(typeof y.componentDidMount=="function"){var x=l.return;try{y.componentDidMount()}catch(J){mt(l,x,J)}}var j=l.return;try{Ud(l)}catch(J){mt(l,j,J)}break;case 5:var O=l.return;try{Ud(l)}catch(J){mt(l,O,J)}}}catch(J){mt(l,l.return,J)}if(l===o){we=null;break}var W=l.sibling;if(W!==null){W.return=l.return,we=W;break}we=l.return}}var eR=Math.ceil,Kl=A.ReactCurrentDispatcher,Gd=A.ReactCurrentOwner,Cn=A.ReactCurrentBatchConfig,Ue=0,At=null,_t=null,Dt=0,gn=0,Ho=Qr(0),Et=0,oa=null,zi=0,Gl=0,Yd=0,sa=null,Zt=null,Xd=0,Vo=1/0,Tr=null,Yl=!1,Qd=null,ri=null,Xl=!1,ii=null,Ql=0,aa=0,Jd=null,Jl=-1,Zl=0;function Kt(){return(Ue&6)!==0?Xe():Jl!==-1?Jl:Jl=Xe()}function oi(o){return(o.mode&1)===0?1:(Ue&2)!==0&&Dt!==0?Dt&-Dt:DI.transition!==null?(Zl===0&&(Zl=wr()),Zl):(o=Ke,o!==0||(o=window.event,o=o===void 0?16:Yx(o.type)),o)}function Bn(o,l,h,y){if(50<aa)throw aa=0,Jd=null,Error(n(185));kn(o,h,y),((Ue&2)===0||o!==At)&&(o===At&&((Ue&2)===0&&(Gl|=h),Et===4&&si(o,Dt)),en(o,y),h===1&&Ue===0&&(l.mode&1)===0&&(Vo=Xe()+500,El&&Zr()))}function en(o,l){var h=o.callbackNode;Hr(o,l);var y=$r(o,o===At?Dt:0);if(y===0)h!==null&&Ei(h),o.callbackNode=null,o.callbackPriority=0;else if(l=y&-y,o.callbackPriority!==l){if(h!=null&&Ei(h),l===1)o.tag===0?LI(Yw.bind(null,o)):Ob(Yw.bind(null,o)),II(function(){(Ue&6)===0&&Zr()}),h=null;else{switch(le(y)){case 1:h=vr;break;case 4:h=xr;break;case 16:h=Fr;break;case 536870912:h=_o;break;default:h=Fr}h=r0(h,Gw.bind(null,o))}o.callbackPriority=l,o.callbackNode=h}}function Gw(o,l){if(Jl=-1,Zl=0,(Ue&6)!==0)throw Error(n(327));var h=o.callbackNode;if(Uo()&&o.callbackNode!==h)return null;var y=$r(o,o===At?Dt:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||l)l=ec(o,y);else{l=y;var x=Ue;Ue|=2;var j=Qw();(At!==o||Dt!==l)&&(Tr=null,Vo=Xe()+500,$i(o,l));do try{rR();break}catch(W){Xw(o,W)}while(!0);gd(),Kl.current=j,Ue=x,_t!==null?l=0:(At=null,Dt=0,l=Et)}if(l!==0){if(l===2&&(x=Ai(o),x!==0&&(y=x,l=Zd(o,x))),l===1)throw h=oa,$i(o,0),si(o,y),en(o,Xe()),h;if(l===6)si(o,y);else{if(x=o.current.alternate,(y&30)===0&&!tR(x)&&(l=ec(o,y),l===2&&(j=Ai(o),j!==0&&(y=j,l=Zd(o,j))),l===1))throw h=oa,$i(o,0),si(o,y),en(o,Xe()),h;switch(o.finishedWork=x,o.finishedLanes=y,l){case 0:case 1:throw Error(n(345));case 2:Hi(o,Zt,Tr);break;case 3:if(si(o,y),(y&130023424)===y&&(l=Xd+500-Xe(),10<l)){if($r(o,0)!==0)break;if(x=o.suspendedLanes,(x&y)!==y){Kt(),o.pingedLanes|=o.suspendedLanes&x;break}o.timeoutHandle=od(Hi.bind(null,o,Zt,Tr),l);break}Hi(o,Zt,Tr);break;case 4:if(si(o,y),(y&4194240)===y)break;for(l=o.eventTimes,x=-1;0<y;){var O=31-Ut(y);j=1<<O,O=l[O],O>x&&(x=O),y&=~j}if(y=x,y=Xe()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*eR(y/1960))-y,10<y){o.timeoutHandle=od(Hi.bind(null,o,Zt,Tr),y);break}Hi(o,Zt,Tr);break;case 5:Hi(o,Zt,Tr);break;default:throw Error(n(329))}}}return en(o,Xe()),o.callbackNode===h?Gw.bind(null,o):null}function Zd(o,l){var h=sa;return o.current.memoizedState.isDehydrated&&($i(o,l).flags|=256),o=ec(o,l),o!==2&&(l=Zt,Zt=h,l!==null&&ep(l)),o}function ep(o){Zt===null?Zt=o:Zt.push.apply(Zt,o)}function tR(o){for(var l=o;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var x=h[y],j=x.getSnapshot;x=x.value;try{if(!Ln(j(),x))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function si(o,l){for(l&=~Yd,l&=~Gl,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var h=31-Ut(l),y=1<<h;o[h]=-1,l&=~y}}function Yw(o){if((Ue&6)!==0)throw Error(n(327));Uo();var l=$r(o,0);if((l&1)===0)return en(o,Xe()),null;var h=ec(o,l);if(o.tag!==0&&h===2){var y=Ai(o);y!==0&&(l=y,h=Zd(o,y))}if(h===1)throw h=oa,$i(o,0),si(o,l),en(o,Xe()),h;if(h===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Hi(o,Zt,Tr),en(o,Xe()),null}function tp(o,l){var h=Ue;Ue|=1;try{return o(l)}finally{Ue=h,Ue===0&&(Vo=Xe()+500,El&&Zr())}}function Bi(o){ii!==null&&ii.tag===0&&(Ue&6)===0&&Uo();var l=Ue;Ue|=1;var h=Cn.transition,y=Ke;try{if(Cn.transition=null,Ke=1,o)return o()}finally{Ke=y,Cn.transition=h,Ue=l,(Ue&6)===0&&Zr()}}function np(){gn=Ho.current,rt(Ho)}function $i(o,l){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,PI(h)),_t!==null)for(h=_t.return;h!==null;){var y=h;switch(dd(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Nl();break;case 3:zo(),rt(Xt),rt(zt),Sd();break;case 5:_d(y);break;case 4:zo();break;case 13:rt(ft);break;case 19:rt(ft);break;case 10:yd(y.type._context);break;case 22:case 23:np()}h=h.return}if(At=o,_t=o=ai(o.current,null),Dt=gn=l,Et=0,oa=null,Yd=Gl=zi=0,Zt=sa=null,Di!==null){for(l=0;l<Di.length;l++)if(h=Di[l],y=h.interleaved,y!==null){h.interleaved=null;var x=y.next,j=h.pending;if(j!==null){var O=j.next;j.next=x,y.next=O}h.pending=y}Di=null}return o}function Xw(o,l){do{var h=_t;try{if(gd(),Dl.current=Bl,ql){for(var y=ht.memoizedState;y!==null;){var x=y.queue;x!==null&&(x.pending=null),y=y.next}ql=!1}if(Fi=0,Tt=jt=ht=null,Zs=!1,ea=0,Gd.current=null,h===null||h.return===null){Et=1,oa=l,_t=null;break}e:{var j=o,O=h.return,W=h,J=l;if(l=Dt,W.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var se=J,ue=W,fe=ue.tag;if((ue.mode&1)===0&&(fe===0||fe===11||fe===15)){var ce=ue.alternate;ce?(ue.updateQueue=ce.updateQueue,ue.memoizedState=ce.memoizedState,ue.lanes=ce.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var ve=ww(O);if(ve!==null){ve.flags&=-257,_w(ve,O,W,j,l),ve.mode&1&&bw(j,se,l),l=ve,J=se;var ke=l.updateQueue;if(ke===null){var Ee=new Set;Ee.add(J),l.updateQueue=Ee}else ke.add(J);break e}else{if((l&1)===0){bw(j,se,l),rp();break e}J=Error(n(426))}}else if(lt&&W.mode&1){var xt=ww(O);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),_w(xt,O,W,j,l),hd(Bo(J,W));break e}}j=J=Bo(J,W),Et!==4&&(Et=2),sa===null?sa=[j]:sa.push(j),j=O;do{switch(j.tag){case 3:j.flags|=65536,l&=-l,j.lanes|=l;var re=vw(j,J,l);Ub(j,re);break e;case 1:W=J;var ne=j.type,ie=j.stateNode;if((j.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(ri===null||!ri.has(ie)))){j.flags|=65536,l&=-l,j.lanes|=l;var me=xw(j,W,l);Ub(j,me);break e}}j=j.return}while(j!==null)}Zw(h)}catch(Te){l=Te,_t===h&&h!==null&&(_t=h=h.return);continue}break}while(!0)}function Qw(){var o=Kl.current;return Kl.current=Bl,o===null?Bl:o}function rp(){(Et===0||Et===3||Et===2)&&(Et=4),At===null||(zi&268435455)===0&&(Gl&268435455)===0||si(At,Dt)}function ec(o,l){var h=Ue;Ue|=2;var y=Qw();(At!==o||Dt!==l)&&(Tr=null,$i(o,l));do try{nR();break}catch(x){Xw(o,x)}while(!0);if(gd(),Ue=h,Kl.current=y,_t!==null)throw Error(n(261));return At=null,Dt=0,Et}function nR(){for(;_t!==null;)Jw(_t)}function rR(){for(;_t!==null&&!Ci();)Jw(_t)}function Jw(o){var l=n0(o.alternate,o,gn);o.memoizedProps=o.pendingProps,l===null?Zw(o):_t=l,Gd.current=null}function Zw(o){var l=o;do{var h=l.alternate;if(o=l.return,(l.flags&32768)===0){if(h=YI(h,l,gn),h!==null){_t=h;return}}else{if(h=XI(h,l),h!==null){h.flags&=32767,_t=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Et=6,_t=null;return}}if(l=l.sibling,l!==null){_t=l;return}_t=l=o}while(l!==null);Et===0&&(Et=5)}function Hi(o,l,h){var y=Ke,x=Cn.transition;try{Cn.transition=null,Ke=1,iR(o,l,h,y)}finally{Cn.transition=x,Ke=y}return null}function iR(o,l,h,y){do Uo();while(ii!==null);if((Ue&6)!==0)throw Error(n(327));h=o.finishedWork;var x=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var j=h.lanes|h.childLanes;if(ko(o,j),o===At&&(_t=At=null,Dt=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Xl||(Xl=!0,r0(Fr,function(){return Uo(),null})),j=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||j){j=Cn.transition,Cn.transition=null;var O=Ke;Ke=1;var W=Ue;Ue|=4,Gd.current=null,JI(o,h),Hw(h,o),SI(rd),dl=!!nd,rd=nd=null,o.current=h,ZI(h),bo(),Ue=W,Ke=O,Cn.transition=j}else o.current=h;if(Xl&&(Xl=!1,ii=o,Ql=x),j=o.pendingLanes,j===0&&(ri=null),Es(h.stateNode),en(o,Xe()),l!==null)for(y=o.onRecoverableError,h=0;h<l.length;h++)x=l[h],y(x.value,{componentStack:x.stack,digest:x.digest});if(Yl)throw Yl=!1,o=Qd,Qd=null,o;return(Ql&1)!==0&&o.tag!==0&&Uo(),j=o.pendingLanes,(j&1)!==0?o===Jd?aa++:(aa=0,Jd=o):aa=0,Zr(),null}function Uo(){if(ii!==null){var o=le(Ql),l=Cn.transition,h=Ke;try{if(Cn.transition=null,Ke=16>o?16:o,ii===null)var y=!1;else{if(o=ii,ii=null,Ql=0,(Ue&6)!==0)throw Error(n(331));var x=Ue;for(Ue|=4,we=o.current;we!==null;){var j=we,O=j.child;if((we.flags&16)!==0){var W=j.deletions;if(W!==null){for(var J=0;J<W.length;J++){var se=W[J];for(we=se;we!==null;){var ue=we;switch(ue.tag){case 0:case 11:case 15:ia(8,ue,j)}var fe=ue.child;if(fe!==null)fe.return=ue,we=fe;else for(;we!==null;){ue=we;var ce=ue.sibling,ve=ue.return;if(qw(ue),ue===se){we=null;break}if(ce!==null){ce.return=ve,we=ce;break}we=ve}}}var ke=j.alternate;if(ke!==null){var Ee=ke.child;if(Ee!==null){ke.child=null;do{var xt=Ee.sibling;Ee.sibling=null,Ee=xt}while(Ee!==null)}}we=j}}if((j.subtreeFlags&2064)!==0&&O!==null)O.return=j,we=O;else e:for(;we!==null;){if(j=we,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:ia(9,j,j.return)}var re=j.sibling;if(re!==null){re.return=j.return,we=re;break e}we=j.return}}var ne=o.current;for(we=ne;we!==null;){O=we;var ie=O.child;if((O.subtreeFlags&2064)!==0&&ie!==null)ie.return=O,we=ie;else e:for(O=ne;we!==null;){if(W=we,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:Wl(9,W)}}catch(Te){mt(W,W.return,Te)}if(W===O){we=null;break e}var me=W.sibling;if(me!==null){me.return=W.return,we=me;break e}we=W.return}}if(Ue=x,Zr(),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(br,o)}catch{}y=!0}return y}finally{Ke=h,Cn.transition=l}}return!1}function e0(o,l,h){l=Bo(h,l),l=vw(o,l,1),o=ti(o,l,1),l=Kt(),o!==null&&(kn(o,1,l),en(o,l))}function mt(o,l,h){if(o.tag===3)e0(o,o,h);else for(;l!==null;){if(l.tag===3){e0(l,o,h);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ri===null||!ri.has(y))){o=Bo(h,o),o=xw(l,o,1),l=ti(l,o,1),o=Kt(),l!==null&&(kn(l,1,o),en(l,o));break}}l=l.return}}function oR(o,l,h){var y=o.pingCache;y!==null&&y.delete(l),l=Kt(),o.pingedLanes|=o.suspendedLanes&h,At===o&&(Dt&h)===h&&(Et===4||Et===3&&(Dt&130023424)===Dt&&500>Xe()-Xd?$i(o,0):Yd|=h),en(o,l)}function t0(o,l){l===0&&((o.mode&1)===0?l=1:(l=Br,Br<<=1,(Br&130023424)===0&&(Br=4194304)));var h=Kt();o=jr(o,l),o!==null&&(kn(o,l,h),en(o,h))}function sR(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),t0(o,h)}function aR(o,l){var h=0;switch(o.tag){case 13:var y=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(l),t0(o,h)}var n0;n0=function(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps||Xt.current)Jt=!0;else{if((o.lanes&h)===0&&(l.flags&128)===0)return Jt=!1,GI(o,l,h);Jt=(o.flags&131072)!==0}else Jt=!1,lt&&(l.flags&1048576)!==0&&Mb(l,Tl,l.index);switch(l.lanes=0,l.tag){case 2:var y=l.type;Vl(o,l),o=l.pendingProps;var x=Ro(l,zt.current);Fo(l,h),x=Ed(null,l,y,o,x,h);var j=Cd();return l.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Qt(y)?(j=!0,jl(l)):j=!1,l.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,bd(l),x.updater=$l,l.stateNode=x,x._reactInternals=l,Od(l,y,o,h),l=qd(null,l,y,!0,j,h)):(l.tag=0,lt&&j&&ud(l),Wt(null,l,x,h),l=l.child),l;case 16:y=l.elementType;e:{switch(Vl(o,l),o=l.pendingProps,x=y._init,y=x(y._payload),l.type=y,x=l.tag=cR(y),o=qn(y,o),x){case 0:l=Dd(null,l,y,o,h);break e;case 1:l=Cw(null,l,y,o,h);break e;case 11:l=kw(null,l,y,o,h);break e;case 14:l=Sw(null,l,y,qn(y.type,o),h);break e}throw Error(n(306,y,""))}return l;case 0:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:qn(y,x),Dd(o,l,y,x,h);case 1:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:qn(y,x),Cw(o,l,y,x,h);case 3:e:{if(Tw(l),o===null)throw Error(n(387));y=l.pendingProps,j=l.memoizedState,x=j.element,Vb(o,l),Ml(l,y,null,h);var O=l.memoizedState;if(y=O.element,j.isDehydrated)if(j={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=j,l.memoizedState=j,l.flags&256){x=Bo(Error(n(423)),l),l=Aw(o,l,y,h,x);break e}else if(y!==x){x=Bo(Error(n(424)),l),l=Aw(o,l,y,h,x);break e}else for(mn=Xr(l.stateNode.containerInfo.firstChild),hn=l,lt=!0,Dn=null,h=$b(l,null,y,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Lo(),y===x){l=Cr(o,l,h);break e}Wt(o,l,y,h)}l=l.child}return l;case 5:return Kb(l),o===null&&fd(l),y=l.type,x=l.pendingProps,j=o!==null?o.memoizedProps:null,O=x.children,id(y,x)?O=null:j!==null&&id(y,j)&&(l.flags|=32),Ew(o,l),Wt(o,l,O,h),l.child;case 6:return o===null&&fd(l),null;case 13:return Pw(o,l,h);case 4:return wd(l,l.stateNode.containerInfo),y=l.pendingProps,o===null?l.child=Do(l,null,y,h):Wt(o,l,y,h),l.child;case 11:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:qn(y,x),kw(o,l,y,x,h);case 7:return Wt(o,l,l.pendingProps,h),l.child;case 8:return Wt(o,l,l.pendingProps.children,h),l.child;case 12:return Wt(o,l,l.pendingProps.children,h),l.child;case 10:e:{if(y=l.type._context,x=l.pendingProps,j=l.memoizedProps,O=x.value,Qe(Il,y._currentValue),y._currentValue=O,j!==null)if(Ln(j.value,O)){if(j.children===x.children&&!Xt.current){l=Cr(o,l,h);break e}}else for(j=l.child,j!==null&&(j.return=l);j!==null;){var W=j.dependencies;if(W!==null){O=j.child;for(var J=W.firstContext;J!==null;){if(J.context===y){if(j.tag===1){J=Er(-1,h&-h),J.tag=2;var se=j.updateQueue;if(se!==null){se=se.shared;var ue=se.pending;ue===null?J.next=J:(J.next=ue.next,ue.next=J),se.pending=J}}j.lanes|=h,J=j.alternate,J!==null&&(J.lanes|=h),vd(j.return,h,l),W.lanes|=h;break}J=J.next}}else if(j.tag===10)O=j.type===l.type?null:j.child;else if(j.tag===18){if(O=j.return,O===null)throw Error(n(341));O.lanes|=h,W=O.alternate,W!==null&&(W.lanes|=h),vd(O,h,l),O=j.sibling}else O=j.child;if(O!==null)O.return=j;else for(O=j;O!==null;){if(O===l){O=null;break}if(j=O.sibling,j!==null){j.return=O.return,O=j;break}O=O.return}j=O}Wt(o,l,x.children,h),l=l.child}return l;case 9:return x=l.type,y=l.pendingProps.children,Fo(l,h),x=jn(x),y=y(x),l.flags|=1,Wt(o,l,y,h),l.child;case 14:return y=l.type,x=qn(y,l.pendingProps),x=qn(y.type,x),Sw(o,l,y,x,h);case 15:return Nw(o,l,l.type,l.pendingProps,h);case 17:return y=l.type,x=l.pendingProps,x=l.elementType===y?x:qn(y,x),Vl(o,l),l.tag=1,Qt(y)?(o=!0,jl(l)):o=!1,Fo(l,h),gw(l,y,x),Od(l,y,x,h),qd(null,l,y,!0,o,h);case 19:return Rw(o,l,h);case 22:return jw(o,l,h)}throw Error(n(156,l.tag))};function r0(o,l){return Mn(o,l)}function lR(o,l,h,y){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(o,l,h,y){return new lR(o,l,h,y)}function ip(o){return o=o.prototype,!(!o||!o.isReactComponent)}function cR(o){if(typeof o=="function")return ip(o)?1:0;if(o!=null){if(o=o.$$typeof,o===q)return 11;if(o===M)return 14}return 2}function ai(o,l){var h=o.alternate;return h===null?(h=Tn(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function tc(o,l,h,y,x,j){var O=2;if(y=o,typeof o=="function")ip(o)&&(O=1);else if(typeof o=="string")O=5;else e:switch(o){case C:return Vi(h.children,x,j,l);case z:O=8,x|=8;break;case F:return o=Tn(12,h,l,x|2),o.elementType=F,o.lanes=j,o;case G:return o=Tn(13,h,l,x),o.elementType=G,o.lanes=j,o;case R:return o=Tn(19,h,l,x),o.elementType=R,o.lanes=j,o;case X:return nc(h,x,j,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case V:O=10;break e;case L:O=9;break e;case q:O=11;break e;case M:O=14;break e;case H:O=16,y=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return l=Tn(O,h,l,x),l.elementType=o,l.type=y,l.lanes=j,l}function Vi(o,l,h,y){return o=Tn(7,o,y,l),o.lanes=h,o}function nc(o,l,h,y){return o=Tn(22,o,y,l),o.elementType=X,o.lanes=h,o.stateNode={isHidden:!1},o}function op(o,l,h){return o=Tn(6,o,null,l),o.lanes=h,o}function sp(o,l,h){return l=Tn(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function uR(o,l,h,y,x){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pi(0),this.expirationTimes=Pi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.identifierPrefix=y,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function ap(o,l,h,y,x,j,O,W,J){return o=new uR(o,l,h,W,J),l===1?(l=1,j===!0&&(l|=8)):l=0,j=Tn(3,null,null,l),o.current=j,j.stateNode=o,j.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(j),o}function dR(o,l,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:y==null?null:""+y,children:o,containerInfo:l,implementation:h}}function i0(o){if(!o)return Jr;o=o._reactInternals;e:{if(dn(o)!==o||o.tag!==1)throw Error(n(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Qt(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(o.tag===1){var h=o.type;if(Qt(h))return Ib(o,h,l)}return l}function o0(o,l,h,y,x,j,O,W,J){return o=ap(h,y,!0,o,x,j,O,W,J),o.context=i0(null),h=o.current,y=Kt(),x=oi(h),j=Er(y,x),j.callback=l??null,ti(h,j,x),o.current.lanes=x,kn(o,x,y),en(o,y),o}function rc(o,l,h,y){var x=l.current,j=Kt(),O=oi(x);return h=i0(h),l.context===null?l.context=h:l.pendingContext=h,l=Er(j,O),l.payload={element:o},y=y===void 0?null:y,y!==null&&(l.callback=y),o=ti(x,l,O),o!==null&&(Bn(o,x,O,j),Ol(o,x,O)),O}function ic(o){return o=o.current,o.child?(o.child.tag===5,o.child.stateNode):null}function s0(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function lp(o,l){s0(o,l),(o=o.alternate)&&s0(o,l)}function pR(){return null}var a0=typeof reportError=="function"?reportError:function(o){console.error(o)};function cp(o){this._internalRoot=o}oc.prototype.render=cp.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));rc(o,l,null,null)},oc.prototype.unmount=cp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Bi(function(){rc(null,o,null,null)}),l[_r]=null}};function oc(o){this._internalRoot=o}oc.prototype.unstable_scheduleHydration=function(o){if(o){var l=tt();o={blockedOn:null,target:o,priority:l};for(var h=0;h<Kr.length&&l!==0&&l<Kr[h].priority;h++);Kr.splice(h,0,o),h===0&&Kx(o)}};function up(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function sc(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function l0(){}function fR(o,l,h,y,x){if(x){if(typeof y=="function"){var j=y;y=function(){var se=ic(O);j.call(se)}}var O=o0(l,y,o,0,null,!1,!1,"",l0);return o._reactRootContainer=O,o[_r]=O.current,Us(o.nodeType===8?o.parentNode:o),Bi(),O}for(;x=o.lastChild;)o.removeChild(x);if(typeof y=="function"){var W=y;y=function(){var se=ic(J);W.call(se)}}var J=ap(o,0,!1,null,null,!1,!1,"",l0);return o._reactRootContainer=J,o[_r]=J.current,Us(o.nodeType===8?o.parentNode:o),Bi(function(){rc(l,J,h,y)}),J}function ac(o,l,h,y,x){var j=h._reactRootContainer;if(j){var O=j;if(typeof x=="function"){var W=x;x=function(){var J=ic(O);W.call(J)}}rc(l,O,o,x)}else O=fR(h,l,o,x,y);return ic(O)}_e=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var h=Jn(l.pendingLanes);h!==0&&(Ps(l,h|1),en(l,Xe()),(Ue&6)===0&&(Vo=Xe()+500,Zr()))}break;case 13:Bi(function(){var y=jr(o,1);if(y!==null){var x=Kt();Bn(y,o,1,x)}}),lp(o,1)}},at=function(o){if(o.tag===13){var l=jr(o,134217728);if(l!==null){var h=Kt();Bn(l,o,134217728,h)}lp(o,134217728)}},qe=function(o){if(o.tag===13){var l=oi(o),h=jr(o,l);if(h!==null){var y=Kt();Bn(h,o,l,y)}lp(o,l)}},tt=function(){return Ke},pn=function(o,l){var h=Ke;try{return Ke=o,l()}finally{Ke=h}},qr=function(o,l,h){switch(l){case"input":if(Ce(o,h),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var y=h[l];if(y!==o&&y.form===o.form){var x=Sl(y);if(!x)throw Error(n(90));Ne(y),Ce(y,x)}}}break;case"textarea":yt(o,h);break;case"select":l=h.value,l!=null&&pt(o,!!h.multiple,l,!1)}},mo=tp,go=Bi;var hR={usingClientEntryPoint:!1,Events:[Gs,Po,Sl,fo,ho,tp]},la={findFiberByHostInstance:Ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mR={bundleType:la.bundleType,version:la.version,rendererPackageName:la.rendererPackageName,rendererConfig:la.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=vo(o),o===null?null:o.stateNode},findFiberByHostInstance:la.findFiberByHostInstance||pR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{br=lc.inject(mR),Ft=lc}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR,tn.createPortal=function(o,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!up(l))throw Error(n(200));return dR(o,l,null,h)},tn.createRoot=function(o,l){if(!up(o))throw Error(n(299));var h=!1,y="",x=a0;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),l=ap(o,1,!1,null,null,h,!1,y,x),o[_r]=l.current,Us(o.nodeType===8?o.parentNode:o),new cp(l)},tn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=vo(l),o=o===null?null:o.stateNode,o},tn.flushSync=function(o){return Bi(o)},tn.hydrate=function(o,l,h){if(!sc(l))throw Error(n(200));return ac(null,o,l,!0,h)},tn.hydrateRoot=function(o,l,h){if(!up(o))throw Error(n(405));var y=h!=null&&h.hydratedSources||null,x=!1,j="",O=a0;if(h!=null&&(h.unstable_strictMode===!0&&(x=!0),h.identifierPrefix!==void 0&&(j=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),l=o0(l,null,o,1,h??null,x,!1,j,O),o[_r]=l.current,Us(o),y)for(o=0;o<y.length;o++)h=y[o],x=h._getVersion,x=x(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,x]:l.mutableSourceEagerHydrationData.push(h,x);return new oc(l)},tn.render=function(o,l,h){if(!sc(l))throw Error(n(200));return ac(null,o,l,!1,h)},tn.unmountComponentAtNode=function(o){if(!sc(o))throw Error(n(40));return o._reactRootContainer?(Bi(function(){ac(null,null,o,!1,function(){o._reactRootContainer=null,o[_r]=null})}),!0):!1},tn.unstable_batchedUpdates=tp,tn.unstable_renderSubtreeIntoContainer=function(o,l,h,y){if(!sc(h))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return ac(o,l,h,!1,y)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var g0;function wC(){if(g0)return fp.exports;g0=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fp.exports=_R(),fp.exports}var y0;function kR(){if(y0)return uc;y0=1;var e=wC();return uc.createRoot=e.createRoot,uc.hydrateRoot=e.hydrateRoot,uc}var SR=kR();const NR=ps(SR);function St(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=St(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var jR={value:()=>{}};function ru(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Pc(n)}function Pc(e){this._=e}function ER(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Pc.prototype=ru.prototype={constructor:Pc,on:function(e,t){var n=this._,r=ER(e+"",n),i,a=-1,c=r.length;if(arguments.length<2){for(;++a<c;)if((i=(e=r[a]).type)&&(i=CR(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<c;)if(i=(e=r[a]).type)n[i]=v0(n[i],e.name,t);else if(t==null)for(i in n)n[i]=v0(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Pc(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function CR(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function v0(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=jR,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var hv="http://www.w3.org/1999/xhtml";const x0={svg:"http://www.w3.org/2000/svg",xhtml:hv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function iu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),x0.hasOwnProperty(t)?{space:x0[t],local:e}:e}function TR(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===hv&&t.documentElement.namespaceURI===hv?t.createElement(e):t.createElementNS(n,e)}}function AR(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _C(e){var t=iu(e);return(t.local?AR:TR)(t)}function PR(){}function Kv(e){return e==null?PR:function(){return this.querySelector(e)}}function IR(e){typeof e!="function"&&(e=Kv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],c=a.length,u=r[i]=new Array(c),d,p,f=0;f<c;++f)(d=a[f])&&(p=e.call(d,d.__data__,f,a))&&("__data__"in d&&(p.__data__=d.__data__),u[f]=p);return new _n(r,this._parents)}function RR(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function OR(){return[]}function kC(e){return e==null?OR:function(){return this.querySelectorAll(e)}}function MR(e){return function(){return RR(e.apply(this,arguments))}}function LR(e){typeof e=="function"?e=MR(e):e=kC(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var c=t[a],u=c.length,d,p=0;p<u;++p)(d=c[p])&&(r.push(e.call(d,d.__data__,p,c)),i.push(d));return new _n(r,i)}function SC(e){return function(){return this.matches(e)}}function NC(e){return function(t){return t.matches(e)}}var DR=Array.prototype.find;function qR(e){return function(){return DR.call(this.children,e)}}function FR(){return this.firstElementChild}function zR(e){return this.select(e==null?FR:qR(typeof e=="function"?e:NC(e)))}var BR=Array.prototype.filter;function $R(){return Array.from(this.children)}function HR(e){return function(){return BR.call(this.children,e)}}function VR(e){return this.selectAll(e==null?$R:HR(typeof e=="function"?e:NC(e)))}function UR(e){typeof e!="function"&&(e=SC(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],c=a.length,u=r[i]=[],d,p=0;p<c;++p)(d=a[p])&&e.call(d,d.__data__,p,a)&&u.push(d);return new _n(r,this._parents)}function jC(e){return new Array(e.length)}function WR(){return new _n(this._enter||this._groups.map(jC),this._parents)}function qc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qc.prototype={constructor:qc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function KR(e){return function(){return e}}function GR(e,t,n,r,i,a){for(var c=0,u,d=t.length,p=a.length;c<p;++c)(u=t[c])?(u.__data__=a[c],r[c]=u):n[c]=new qc(e,a[c]);for(;c<d;++c)(u=t[c])&&(i[c]=u)}function YR(e,t,n,r,i,a,c){var u,d,p=new Map,f=t.length,m=a.length,g=new Array(f),v;for(u=0;u<f;++u)(d=t[u])&&(g[u]=v=c.call(d,d.__data__,u,t)+"",p.has(v)?i[u]=d:p.set(v,d));for(u=0;u<m;++u)v=c.call(e,a[u],u,a)+"",(d=p.get(v))?(r[u]=d,d.__data__=a[u],p.delete(v)):n[u]=new qc(e,a[u]);for(u=0;u<f;++u)(d=t[u])&&p.get(g[u])===d&&(i[u]=d)}function XR(e){return e.__data__}function QR(e,t){if(!arguments.length)return Array.from(this,XR);var n=t?YR:GR,r=this._parents,i=this._groups;typeof e!="function"&&(e=KR(e));for(var a=i.length,c=new Array(a),u=new Array(a),d=new Array(a),p=0;p<a;++p){var f=r[p],m=i[p],g=m.length,v=JR(e.call(f,f&&f.__data__,p,r)),w=v.length,b=u[p]=new Array(w),k=c[p]=new Array(w),_=d[p]=new Array(g);n(f,m,b,k,_,v,t);for(var N=0,S=0,A,P;N<w;++N)if(A=b[N]){for(N>=S&&(S=N+1);!(P=k[S])&&++S<w;);A._next=P||null}}return c=new _n(c,r),c._enter=u,c._exit=d,c}function JR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ZR(){return new _n(this._exit||this._groups.map(jC),this._parents)}function eO(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function tO(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,c=Math.min(i,a),u=new Array(i),d=0;d<c;++d)for(var p=n[d],f=r[d],m=p.length,g=u[d]=new Array(m),v,w=0;w<m;++w)(v=p[w]||f[w])&&(g[w]=v);for(;d<i;++d)u[d]=n[d];return new _n(u,this._parents)}function nO(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],c;--i>=0;)(c=r[i])&&(a&&c.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(c,a),a=c);return this}function rO(e){e||(e=iO);function t(m,g){return m&&g?e(m.__data__,g.__data__):!m-!g}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var c=n[a],u=c.length,d=i[a]=new Array(u),p,f=0;f<u;++f)(p=c[f])&&(d[f]=p);d.sort(t)}return new _n(i,this._parents).order()}function iO(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function oO(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sO(){return Array.from(this)}function aO(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var c=r[i];if(c)return c}return null}function lO(){let e=0;for(const t of this)++e;return e}function cO(){return!this.node()}function uO(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,c=i.length,u;a<c;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function dO(e){return function(){this.removeAttribute(e)}}function pO(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fO(e,t){return function(){this.setAttribute(e,t)}}function hO(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function gO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yO(e,t){var n=iu(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?pO:dO:typeof t=="function"?n.local?gO:mO:n.local?hO:fO)(n,t))}function EC(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vO(e){return function(){this.style.removeProperty(e)}}function xO(e,t,n){return function(){this.style.setProperty(e,t,n)}}function bO(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function wO(e,t,n){return arguments.length>1?this.each((t==null?vO:typeof t=="function"?bO:xO)(e,t,n??"")):os(this.node(),e)}function os(e,t){return e.style.getPropertyValue(t)||EC(e).getComputedStyle(e,null).getPropertyValue(t)}function _O(e){return function(){delete this[e]}}function kO(e,t){return function(){this[e]=t}}function SO(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function NO(e,t){return arguments.length>1?this.each((t==null?_O:typeof t=="function"?SO:kO)(e,t)):this.node()[e]}function CC(e){return e.trim().split(/^|\s+/)}function Gv(e){return e.classList||new TC(e)}function TC(e){this._node=e,this._names=CC(e.getAttribute("class")||"")}TC.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function AC(e,t){for(var n=Gv(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function PC(e,t){for(var n=Gv(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function jO(e){return function(){AC(this,e)}}function EO(e){return function(){PC(this,e)}}function CO(e,t){return function(){(t.apply(this,arguments)?AC:PC)(this,e)}}function TO(e,t){var n=CC(e+"");if(arguments.length<2){for(var r=Gv(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?CO:t?jO:EO)(n,t))}function AO(){this.textContent=""}function PO(e){return function(){this.textContent=e}}function IO(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function RO(e){return arguments.length?this.each(e==null?AO:(typeof e=="function"?IO:PO)(e)):this.node().textContent}function OO(){this.innerHTML=""}function MO(e){return function(){this.innerHTML=e}}function LO(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function DO(e){return arguments.length?this.each(e==null?OO:(typeof e=="function"?LO:MO)(e)):this.node().innerHTML}function qO(){this.nextSibling&&this.parentNode.appendChild(this)}function FO(){return this.each(qO)}function zO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function BO(){return this.each(zO)}function $O(e){var t=typeof e=="function"?e:_C(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function HO(){return null}function VO(e,t){var n=typeof e=="function"?e:_C(e),r=t==null?HO:typeof t=="function"?t:Kv(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function UO(){var e=this.parentNode;e&&e.removeChild(this)}function WO(){return this.each(UO)}function KO(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function GO(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function YO(e){return this.select(e?GO:KO)}function XO(e){return arguments.length?this.property("__data__",e):this.node().__data__}function QO(e){return function(t){e.call(this,t,this.__data__)}}function JO(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ZO(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function eM(e,t,n){return function(){var r=this.__on,i,a=QO(t);if(r){for(var c=0,u=r.length;c<u;++c)if((i=r[c]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function tM(e,t,n){var r=JO(e+""),i,a=r.length,c;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,p=u.length,f;d<p;++d)for(i=0,f=u[d];i<a;++i)if((c=r[i]).type===f.type&&c.name===f.name)return f.value}return}for(u=t?eM:ZO,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function IC(e,t,n){var r=EC(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function nM(e,t){return function(){return IC(this,e,t)}}function rM(e,t){return function(){return IC(this,e,t.apply(this,arguments))}}function iM(e,t){return this.each((typeof t=="function"?rM:nM)(e,t))}function*oM(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,c;i<a;++i)(c=r[i])&&(yield c)}var RC=[null];function _n(e,t){this._groups=e,this._parents=t}function Ua(){return new _n([[document.documentElement]],RC)}function sM(){return this}_n.prototype=Ua.prototype={constructor:_n,select:IR,selectAll:LR,selectChild:zR,selectChildren:VR,filter:UR,data:QR,enter:WR,exit:ZR,join:eO,merge:tO,selection:sM,order:nO,sort:rO,call:oO,nodes:sO,node:aO,size:lO,empty:cO,each:uO,attr:yO,style:wO,property:NO,classed:TO,text:RO,html:DO,raise:FO,lower:BO,append:$O,insert:VO,remove:WO,clone:YO,datum:XO,on:tM,dispatch:iM,[Symbol.iterator]:oM};function xn(e){return typeof e=="string"?new _n([[document.querySelector(e)]],[document.documentElement]):new _n([[e]],RC)}function aM(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $n(e,t){if(e=aM(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const lM={passive:!1},Pa={capture:!0,passive:!1};function gp(e){e.stopImmediatePropagation()}function ts(e){e.preventDefault(),e.stopImmediatePropagation()}function OC(e){var t=e.document.documentElement,n=xn(e).on("dragstart.drag",ts,Pa);"onselectstart"in t?n.on("selectstart.drag",ts,Pa):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function MC(e,t){var n=e.document.documentElement,r=xn(e).on("dragstart.drag",null);t&&(r.on("click.drag",ts,Pa),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const dc=e=>()=>e;function mv(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:c,y:u,dx:d,dy:p,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:f}})}mv.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function cM(e){return!e.ctrlKey&&!e.button}function uM(){return this.parentNode}function dM(e,t){return t??{x:e.x,y:e.y}}function pM(){return navigator.maxTouchPoints||"ontouchstart"in this}function LC(){var e=cM,t=uM,n=dM,r=pM,i={},a=ru("start","drag","end"),c=0,u,d,p,f,m=0;function g(A){A.on("mousedown.drag",v).filter(r).on("touchstart.drag",k).on("touchmove.drag",_,lM).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(A,P){if(!(f||!e.call(this,A,P))){var T=S(this,t.call(this,A,P),A,P,"mouse");T&&(xn(A.view).on("mousemove.drag",w,Pa).on("mouseup.drag",b,Pa),OC(A.view),gp(A),p=!1,u=A.clientX,d=A.clientY,T("start",A))}}function w(A){if(ts(A),!p){var P=A.clientX-u,T=A.clientY-d;p=P*P+T*T>m}i.mouse("drag",A)}function b(A){xn(A.view).on("mousemove.drag mouseup.drag",null),MC(A.view,p),ts(A),i.mouse("end",A)}function k(A,P){if(e.call(this,A,P)){var T=A.changedTouches,C=t.call(this,A,P),z=T.length,F,V;for(F=0;F<z;++F)(V=S(this,C,A,P,T[F].identifier,T[F]))&&(gp(A),V("start",A,T[F]))}}function _(A){var P=A.changedTouches,T=P.length,C,z;for(C=0;C<T;++C)(z=i[P[C].identifier])&&(ts(A),z("drag",A,P[C]))}function N(A){var P=A.changedTouches,T=P.length,C,z;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),C=0;C<T;++C)(z=i[P[C].identifier])&&(gp(A),z("end",A,P[C]))}function S(A,P,T,C,z,F){var V=a.copy(),L=$n(F||T,P),q,G,R;if((R=n.call(A,new mv("beforestart",{sourceEvent:T,target:g,identifier:z,active:c,x:L[0],y:L[1],dx:0,dy:0,dispatch:V}),C))!=null)return q=R.x-L[0]||0,G=R.y-L[1]||0,function M(H,X,$){var Y=L,I;switch(H){case"start":i[z]=M,I=c++;break;case"end":delete i[z],--c;case"drag":L=$n($||X,P),I=c;break}V.call(H,A,new mv(H,{sourceEvent:X,subject:R,target:g,identifier:z,active:I,x:L[0]+q,y:L[1]+G,dx:L[0]-Y[0],dy:L[1]-Y[1],dispatch:V}),C)}}return g.filter=function(A){return arguments.length?(e=typeof A=="function"?A:dc(!!A),g):e},g.container=function(A){return arguments.length?(t=typeof A=="function"?A:dc(A),g):t},g.subject=function(A){return arguments.length?(n=typeof A=="function"?A:dc(A),g):n},g.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:dc(!!A),g):r},g.on=function(){var A=a.on.apply(a,arguments);return A===a?g:A},g.clickDistance=function(A){return arguments.length?(m=(A=+A)*A,g):Math.sqrt(m)},g}function Yv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function DC(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Wa(){}var Ia=.7,Fc=1/Ia,ns="\\s*([+-]?\\d+)\\s*",Ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fM=/^#([0-9a-f]{3,8})$/,hM=new RegExp(`^rgb\\(${ns},${ns},${ns}\\)$`),mM=new RegExp(`^rgb\\(${lr},${lr},${lr}\\)$`),gM=new RegExp(`^rgba\\(${ns},${ns},${ns},${Ra}\\)$`),yM=new RegExp(`^rgba\\(${lr},${lr},${lr},${Ra}\\)$`),vM=new RegExp(`^hsl\\(${Ra},${lr},${lr}\\)$`),xM=new RegExp(`^hsla\\(${Ra},${lr},${lr},${Ra}\\)$`),b0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yv(Wa,to,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:w0,formatHex:w0,formatHex8:bM,formatHsl:wM,formatRgb:_0,toString:_0});function w0(){return this.rgb().formatHex()}function bM(){return this.rgb().formatHex8()}function wM(){return qC(this).formatHsl()}function _0(){return this.rgb().formatRgb()}function to(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fM.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?k0(t):n===3?new on(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hM.exec(e))?new on(t[1],t[2],t[3],1):(t=mM.exec(e))?new on(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gM.exec(e))?pc(t[1],t[2],t[3],t[4]):(t=yM.exec(e))?pc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vM.exec(e))?j0(t[1],t[2]/100,t[3]/100,1):(t=xM.exec(e))?j0(t[1],t[2]/100,t[3]/100,t[4]):b0.hasOwnProperty(e)?k0(b0[e]):e==="transparent"?new on(NaN,NaN,NaN,0):null}function k0(e){return new on(e>>16&255,e>>8&255,e&255,1)}function pc(e,t,n,r){return r<=0&&(e=t=n=NaN),new on(e,t,n,r)}function _M(e){return e instanceof Wa||(e=to(e)),e?(e=e.rgb(),new on(e.r,e.g,e.b,e.opacity)):new on}function gv(e,t,n,r){return arguments.length===1?_M(e):new on(e,t,n,r??1)}function on(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Yv(on,gv,DC(Wa,{brighter(e){return e=e==null?Fc:Math.pow(Fc,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ia:Math.pow(Ia,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new on(Zi(this.r),Zi(this.g),Zi(this.b),zc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S0,formatHex:S0,formatHex8:kM,formatRgb:N0,toString:N0}));function S0(){return`#${Qi(this.r)}${Qi(this.g)}${Qi(this.b)}`}function kM(){return`#${Qi(this.r)}${Qi(this.g)}${Qi(this.b)}${Qi((isNaN(this.opacity)?1:this.opacity)*255)}`}function N0(){const e=zc(this.opacity);return`${e===1?"rgb(":"rgba("}${Zi(this.r)}, ${Zi(this.g)}, ${Zi(this.b)}${e===1?")":`, ${e})`}`}function zc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qi(e){return e=Zi(e),(e<16?"0":"")+e.toString(16)}function j0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hn(e,t,n,r)}function qC(e){if(e instanceof Hn)return new Hn(e.h,e.s,e.l,e.opacity);if(e instanceof Wa||(e=to(e)),!e)return new Hn;if(e instanceof Hn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),c=NaN,u=a-i,d=(a+i)/2;return u?(t===a?c=(n-r)/u+(n<r)*6:n===a?c=(r-t)/u+2:c=(t-n)/u+4,u/=d<.5?a+i:2-a-i,c*=60):u=d>0&&d<1?0:c,new Hn(c,u,d,e.opacity)}function SM(e,t,n,r){return arguments.length===1?qC(e):new Hn(e,t,n,r??1)}function Hn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Yv(Hn,SM,DC(Wa,{brighter(e){return e=e==null?Fc:Math.pow(Fc,e),new Hn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ia:Math.pow(Ia,e),new Hn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new on(yp(e>=240?e-240:e+120,i,r),yp(e,i,r),yp(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Hn(E0(this.h),fc(this.s),fc(this.l),zc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zc(this.opacity);return`${e===1?"hsl(":"hsla("}${E0(this.h)}, ${fc(this.s)*100}%, ${fc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function E0(e){return e=(e||0)%360,e<0?e+360:e}function fc(e){return Math.max(0,Math.min(1,e||0))}function yp(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xv=e=>()=>e;function NM(e,t){return function(n){return e+n*t}}function jM(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function EM(e){return(e=+e)==1?FC:function(t,n){return n-t?jM(t,n,e):Xv(isNaN(t)?n:t)}}function FC(e,t){var n=t-e;return n?NM(e,n):Xv(isNaN(e)?t:e)}const Bc=(function e(t){var n=EM(t);function r(i,a){var c=n((i=gv(i)).r,(a=gv(a)).r),u=n(i.g,a.g),d=n(i.b,a.b),p=FC(i.opacity,a.opacity);return function(f){return i.r=c(f),i.g=u(f),i.b=d(f),i.opacity=p(f),i+""}}return r.gamma=e,r})(1);function CM(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function TM(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function AM(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),c;for(c=0;c<r;++c)i[c]=Sa(e[c],t[c]);for(;c<n;++c)a[c]=t[c];return function(u){for(c=0;c<r;++c)a[c]=i[c](u);return a}}function PM(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function sr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function IM(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Sa(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var yv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vp=new RegExp(yv.source,"g");function RM(e){return function(){return e}}function OM(e){return function(t){return e(t)+""}}function zC(e,t){var n=yv.lastIndex=vp.lastIndex=0,r,i,a,c=-1,u=[],d=[];for(e=e+"",t=t+"";(r=yv.exec(e))&&(i=vp.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[c]?u[c]+=a:u[++c]=a),(r=r[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,d.push({i:c,x:sr(r,i)})),n=vp.lastIndex;return n<t.length&&(a=t.slice(n),u[c]?u[c]+=a:u[++c]=a),u.length<2?d[0]?OM(d[0].x):RM(t):(t=d.length,function(p){for(var f=0,m;f<t;++f)u[(m=d[f]).i]=m.x(p);return u.join("")})}function Sa(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xv(t):(n==="number"?sr:n==="string"?(r=to(t))?(t=r,Bc):zC:t instanceof to?Bc:t instanceof Date?PM:TM(t)?CM:Array.isArray(t)?AM:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?IM:sr)(e,t)}var C0=180/Math.PI,vv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function BC(e,t,n,r,i,a){var c,u,d;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(d=e*n+t*r)&&(n-=e*d,r-=t*d),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,d/=u),e*r<t*n&&(e=-e,t=-t,d=-d,c=-c),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*C0,skewX:Math.atan(d)*C0,scaleX:c,scaleY:u}}var hc;function MM(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vv:BC(t.a,t.b,t.c,t.d,t.e,t.f)}function LM(e){return e==null||(hc||(hc=document.createElementNS("http://www.w3.org/2000/svg","g")),hc.setAttribute("transform",e),!(e=hc.transform.baseVal.consolidate()))?vv:(e=e.matrix,BC(e.a,e.b,e.c,e.d,e.e,e.f))}function $C(e,t,n,r){function i(p){return p.length?p.pop()+" ":""}function a(p,f,m,g,v,w){if(p!==m||f!==g){var b=v.push("translate(",null,t,null,n);w.push({i:b-4,x:sr(p,m)},{i:b-2,x:sr(f,g)})}else(m||g)&&v.push("translate("+m+t+g+n)}function c(p,f,m,g){p!==f?(p-f>180?f+=360:f-p>180&&(p+=360),g.push({i:m.push(i(m)+"rotate(",null,r)-2,x:sr(p,f)})):f&&m.push(i(m)+"rotate("+f+r)}function u(p,f,m,g){p!==f?g.push({i:m.push(i(m)+"skewX(",null,r)-2,x:sr(p,f)}):f&&m.push(i(m)+"skewX("+f+r)}function d(p,f,m,g,v,w){if(p!==m||f!==g){var b=v.push(i(v)+"scale(",null,",",null,")");w.push({i:b-4,x:sr(p,m)},{i:b-2,x:sr(f,g)})}else(m!==1||g!==1)&&v.push(i(v)+"scale("+m+","+g+")")}return function(p,f){var m=[],g=[];return p=e(p),f=e(f),a(p.translateX,p.translateY,f.translateX,f.translateY,m,g),c(p.rotate,f.rotate,m,g),u(p.skewX,f.skewX,m,g),d(p.scaleX,p.scaleY,f.scaleX,f.scaleY,m,g),p=f=null,function(v){for(var w=-1,b=g.length,k;++w<b;)m[(k=g[w]).i]=k.x(v);return m.join("")}}}var DM=$C(MM,"px, ","px)","deg)"),qM=$C(LM,", ",")",")"),FM=1e-12;function T0(e){return((e=Math.exp(e))+1/e)/2}function zM(e){return((e=Math.exp(e))-1/e)/2}function BM(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ic=(function e(t,n,r){function i(a,c){var u=a[0],d=a[1],p=a[2],f=c[0],m=c[1],g=c[2],v=f-u,w=m-d,b=v*v+w*w,k,_;if(b<FM)_=Math.log(g/p)/t,k=function(C){return[u+C*v,d+C*w,p*Math.exp(t*C*_)]};else{var N=Math.sqrt(b),S=(g*g-p*p+r*b)/(2*p*n*N),A=(g*g-p*p-r*b)/(2*g*n*N),P=Math.log(Math.sqrt(S*S+1)-S),T=Math.log(Math.sqrt(A*A+1)-A);_=(T-P)/t,k=function(C){var z=C*_,F=T0(P),V=p/(n*N)*(F*BM(t*z+P)-zM(P));return[u+V*v,d+V*w,p*F/T0(t*z+P)]}}return k.duration=_*1e3*t/Math.SQRT2,k}return i.rho=function(a){var c=Math.max(.001,+a),u=c*c,d=u*u;return e(c,u,d)},i})(Math.SQRT2,2,4);var ss=0,va=0,ua=0,HC=1e3,$c,xa,Hc=0,no=0,ou=0,Oa=typeof performance=="object"&&performance.now?performance:Date,VC=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qv(){return no||(VC($M),no=Oa.now()+ou)}function $M(){no=0}function Vc(){this._call=this._time=this._next=null}Vc.prototype=UC.prototype={constructor:Vc,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Qv():+n)+(t==null?0:+t),!this._next&&xa!==this&&(xa?xa._next=this:$c=this,xa=this),this._call=e,this._time=n,xv()},stop:function(){this._call&&(this._call=null,this._time=1/0,xv())}};function UC(e,t,n){var r=new Vc;return r.restart(e,t,n),r}function HM(){Qv(),++ss;for(var e=$c,t;e;)(t=no-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ss}function A0(){no=(Hc=Oa.now())+ou,ss=va=0;try{HM()}finally{ss=0,UM(),no=0}}function VM(){var e=Oa.now(),t=e-Hc;t>HC&&(ou-=t,Hc=e)}function UM(){for(var e,t=$c,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:$c=n);xa=e,xv(r)}function xv(e){if(!ss){va&&(va=clearTimeout(va));var t=e-no;t>24?(e<1/0&&(va=setTimeout(A0,e-Oa.now()-ou)),ua&&(ua=clearInterval(ua))):(ua||(Hc=Oa.now(),ua=setInterval(VM,HC)),ss=1,VC(A0))}}function P0(e,t,n){var r=new Vc;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var WM=ru("start","end","cancel","interrupt"),KM=[],WC=0,I0=1,bv=2,Rc=3,R0=4,wv=5,Oc=6;function su(e,t,n,r,i,a){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;GM(e,n,{name:t,index:r,group:i,on:WM,tween:KM,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:WC})}function Jv(e,t){var n=Kn(e,t);if(n.state>WC)throw new Error("too late; already scheduled");return n}function dr(e,t){var n=Kn(e,t);if(n.state>Rc)throw new Error("too late; already running");return n}function Kn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function GM(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=UC(a,0,n.time);function a(p){n.state=I0,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var f,m,g,v;if(n.state!==I0)return d();for(f in r)if(v=r[f],v.name===n.name){if(v.state===Rc)return P0(c);v.state===R0?(v.state=Oc,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete r[f]):+f<t&&(v.state=Oc,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete r[f])}if(P0(function(){n.state===Rc&&(n.state=R0,n.timer.restart(u,n.delay,n.time),u(p))}),n.state=bv,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bv){for(n.state=Rc,i=new Array(g=n.tween.length),f=0,m=-1;f<g;++f)(v=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++m]=v);i.length=m+1}}function u(p){for(var f=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(d),n.state=wv,1),m=-1,g=i.length;++m<g;)i[m].call(e,f);n.state===wv&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Oc,n.timer.stop(),delete r[t];for(var p in r)return;delete e.__transition}}function Mc(e,t){var n=e.__transition,r,i,a=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){a=!1;continue}i=r.state>bv&&r.state<wv,r.state=Oc,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}a&&delete e.__transition}}function YM(e){return this.each(function(){Mc(this,e)})}function XM(e,t){var n,r;return function(){var i=dr(this,e),a=i.tween;if(a!==n){r=n=a;for(var c=0,u=r.length;c<u;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}i.tween=r}}function QM(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=dr(this,e),c=a.tween;if(c!==r){i=(r=c).slice();for(var u={name:t,value:n},d=0,p=i.length;d<p;++d)if(i[d].name===t){i[d]=u;break}d===p&&i.push(u)}a.tween=i}}function JM(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Kn(this.node(),n).tween,i=0,a=r.length,c;i<a;++i)if((c=r[i]).name===e)return c.value;return null}return this.each((t==null?XM:QM)(n,e,t))}function Zv(e,t,n){var r=e._id;return e.each(function(){var i=dr(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Kn(i,r).value[t]}}function KC(e,t){var n;return(typeof t=="number"?sr:t instanceof to?Bc:(n=to(t))?(t=n,Bc):zC)(e,t)}function ZM(e){return function(){this.removeAttribute(e)}}function eL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tL(e,t,n){var r,i=n+"",a;return function(){var c=this.getAttribute(e);return c===i?null:c===r?a:a=t(r=c,n)}}function nL(e,t,n){var r,i=n+"",a;return function(){var c=this.getAttributeNS(e.space,e.local);return c===i?null:c===r?a:a=t(r=c,n)}}function rL(e,t,n){var r,i,a;return function(){var c,u=n(this),d;return u==null?void this.removeAttribute(e):(c=this.getAttribute(e),d=u+"",c===d?null:c===r&&d===i?a:(i=d,a=t(r=c,u)))}}function iL(e,t,n){var r,i,a;return function(){var c,u=n(this),d;return u==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),d=u+"",c===d?null:c===r&&d===i?a:(i=d,a=t(r=c,u)))}}function oL(e,t){var n=iu(e),r=n==="transform"?qM:KC;return this.attrTween(e,typeof t=="function"?(n.local?iL:rL)(n,r,Zv(this,"attr."+e,t)):t==null?(n.local?eL:ZM)(n):(n.local?nL:tL)(n,r,t))}function sL(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function aL(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lL(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&aL(e,a)),n}return i._value=t,i}function cL(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&sL(e,a)),n}return i._value=t,i}function uL(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=iu(e);return this.tween(n,(r.local?lL:cL)(r,t))}function dL(e,t){return function(){Jv(this,e).delay=+t.apply(this,arguments)}}function pL(e,t){return t=+t,function(){Jv(this,e).delay=t}}function fL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dL:pL)(t,e)):Kn(this.node(),t).delay}function hL(e,t){return function(){dr(this,e).duration=+t.apply(this,arguments)}}function mL(e,t){return t=+t,function(){dr(this,e).duration=t}}function gL(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hL:mL)(t,e)):Kn(this.node(),t).duration}function yL(e,t){if(typeof t!="function")throw new Error;return function(){dr(this,e).ease=t}}function vL(e){var t=this._id;return arguments.length?this.each(yL(t,e)):Kn(this.node(),t).ease}function xL(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;dr(this,e).ease=n}}function bL(e){if(typeof e!="function")throw new Error;return this.each(xL(this._id,e))}function wL(e){typeof e!="function"&&(e=SC(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],c=a.length,u=r[i]=[],d,p=0;p<c;++p)(d=a[p])&&e.call(d,d.__data__,p,a)&&u.push(d);return new Or(r,this._parents,this._name,this._id)}function _L(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),c=new Array(r),u=0;u<a;++u)for(var d=t[u],p=n[u],f=d.length,m=c[u]=new Array(f),g,v=0;v<f;++v)(g=d[v]||p[v])&&(m[v]=g);for(;u<r;++u)c[u]=t[u];return new Or(c,this._parents,this._name,this._id)}function kL(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function SL(e,t,n){var r,i,a=kL(t)?Jv:dr;return function(){var c=a(this,e),u=c.on;u!==r&&(i=(r=u).copy()).on(t,n),c.on=i}}function NL(e,t){var n=this._id;return arguments.length<2?Kn(this.node(),n).on.on(e):this.each(SL(n,e,t))}function jL(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function EL(){return this.on("end.remove",jL(this._id))}function CL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Kv(e));for(var r=this._groups,i=r.length,a=new Array(i),c=0;c<i;++c)for(var u=r[c],d=u.length,p=a[c]=new Array(d),f,m,g=0;g<d;++g)(f=u[g])&&(m=e.call(f,f.__data__,g,u))&&("__data__"in f&&(m.__data__=f.__data__),p[g]=m,su(p[g],t,n,g,p,Kn(f,n)));return new Or(a,this._parents,t,n)}function TL(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kC(e));for(var r=this._groups,i=r.length,a=[],c=[],u=0;u<i;++u)for(var d=r[u],p=d.length,f,m=0;m<p;++m)if(f=d[m]){for(var g=e.call(f,f.__data__,m,d),v,w=Kn(f,n),b=0,k=g.length;b<k;++b)(v=g[b])&&su(v,t,n,b,g,w);a.push(g),c.push(f)}return new Or(a,c,t,n)}var AL=Ua.prototype.constructor;function PL(){return new AL(this._groups,this._parents)}function IL(e,t){var n,r,i;return function(){var a=os(this,e),c=(this.style.removeProperty(e),os(this,e));return a===c?null:a===n&&c===r?i:i=t(n=a,r=c)}}function GC(e){return function(){this.style.removeProperty(e)}}function RL(e,t,n){var r,i=n+"",a;return function(){var c=os(this,e);return c===i?null:c===r?a:a=t(r=c,n)}}function OL(e,t,n){var r,i,a;return function(){var c=os(this,e),u=n(this),d=u+"";return u==null&&(d=u=(this.style.removeProperty(e),os(this,e))),c===d?null:c===r&&d===i?a:(i=d,a=t(r=c,u))}}function ML(e,t){var n,r,i,a="style."+t,c="end."+a,u;return function(){var d=dr(this,e),p=d.on,f=d.value[a]==null?u||(u=GC(t)):void 0;(p!==n||i!==f)&&(r=(n=p).copy()).on(c,i=f),d.on=r}}function LL(e,t,n){var r=(e+="")=="transform"?DM:KC;return t==null?this.styleTween(e,IL(e,r)).on("end.style."+e,GC(e)):typeof t=="function"?this.styleTween(e,OL(e,r,Zv(this,"style."+e,t))).each(ML(this._id,e)):this.styleTween(e,RL(e,r,t),n).on("end.style."+e,null)}function DL(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function qL(e,t,n){var r,i;function a(){var c=t.apply(this,arguments);return c!==i&&(r=(i=c)&&DL(e,c,n)),r}return a._value=t,a}function FL(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,qL(e,t,n??""))}function zL(e){return function(){this.textContent=e}}function BL(e){return function(){var t=e(this);this.textContent=t??""}}function $L(e){return this.tween("text",typeof e=="function"?BL(Zv(this,"text",e)):zL(e==null?"":e+""))}function HL(e){return function(t){this.textContent=e.call(this,t)}}function VL(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&HL(i)),t}return r._value=e,r}function UL(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,VL(e))}function WL(){for(var e=this._name,t=this._id,n=YC(),r=this._groups,i=r.length,a=0;a<i;++a)for(var c=r[a],u=c.length,d,p=0;p<u;++p)if(d=c[p]){var f=Kn(d,t);su(d,e,n,p,c,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Or(r,this._parents,e,n)}function KL(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,c){var u={value:c},d={value:function(){--i===0&&a()}};n.each(function(){var p=dr(this,r),f=p.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(d)),p.on=t}),i===0&&a()})}var GL=0;function Or(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function YC(){return++GL}var Ar=Ua.prototype;Or.prototype={constructor:Or,select:CL,selectAll:TL,selectChild:Ar.selectChild,selectChildren:Ar.selectChildren,filter:wL,merge:_L,selection:PL,transition:WL,call:Ar.call,nodes:Ar.nodes,node:Ar.node,size:Ar.size,empty:Ar.empty,each:Ar.each,on:NL,attr:oL,attrTween:uL,style:LL,styleTween:FL,text:$L,textTween:UL,remove:EL,tween:JM,delay:fL,duration:gL,ease:vL,easeVarying:bL,end:KL,[Symbol.iterator]:Ar[Symbol.iterator]};function YL(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var XL={time:null,delay:0,duration:250,ease:YL};function QL(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function JL(e){var t,n;e instanceof Or?(t=e._id,e=e._name):(t=YC(),(n=XL).time=Qv(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var c=r[a],u=c.length,d,p=0;p<u;++p)(d=c[p])&&su(d,e,t,p,c,n||QL(d,t));return new Or(r,this._parents,e,t)}Ua.prototype.interrupt=YM;Ua.prototype.transition=JL;const mc=e=>()=>e;function ZL(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ir(e,t,n){this.k=e,this.x=t,this.y=n}Ir.prototype={constructor:Ir,scale:function(e){return e===1?this:new Ir(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ir(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var au=new Ir(1,0,0);XC.prototype=Ir.prototype;function XC(e){for(;!e.__zoom;)if(!(e=e.parentNode))return au;return e.__zoom}function xp(e){e.stopImmediatePropagation()}function da(e){e.preventDefault(),e.stopImmediatePropagation()}function eD(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function tD(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function O0(){return this.__zoom||au}function nD(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rD(){return navigator.maxTouchPoints||"ontouchstart"in this}function iD(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),c>a?(a+c)/2:Math.min(0,a)||Math.max(0,c))}function QC(){var e=eD,t=tD,n=iD,r=nD,i=rD,a=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=Ic,p=ru("start","zoom","end"),f,m,g,v=500,w=150,b=0,k=10;function _(R){R.property("__zoom",O0).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",V).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(R,M,H,X){var $=R.selection?R.selection():R;$.property("__zoom",O0),R!==$?P(R,M,H,X):$.interrupt().each(function(){T(this,arguments).event(X).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},_.scaleBy=function(R,M,H,X){_.scaleTo(R,function(){var $=this.__zoom.k,Y=typeof M=="function"?M.apply(this,arguments):M;return $*Y},H,X)},_.scaleTo=function(R,M,H,X){_.transform(R,function(){var $=t.apply(this,arguments),Y=this.__zoom,I=H==null?A($):typeof H=="function"?H.apply(this,arguments):H,B=Y.invert(I),K=typeof M=="function"?M.apply(this,arguments):M;return n(S(N(Y,K),I,B),$,c)},H,X)},_.translateBy=function(R,M,H,X){_.transform(R,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),c)},null,X)},_.translateTo=function(R,M,H,X,$){_.transform(R,function(){var Y=t.apply(this,arguments),I=this.__zoom,B=X==null?A(Y):typeof X=="function"?X.apply(this,arguments):X;return n(au.translate(B[0],B[1]).scale(I.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof H=="function"?-H.apply(this,arguments):-H),Y,c)},X,$)};function N(R,M){return M=Math.max(a[0],Math.min(a[1],M)),M===R.k?R:new Ir(M,R.x,R.y)}function S(R,M,H){var X=M[0]-H[0]*R.k,$=M[1]-H[1]*R.k;return X===R.x&&$===R.y?R:new Ir(R.k,X,$)}function A(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function P(R,M,H,X){R.on("start.zoom",function(){T(this,arguments).event(X).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(X).end()}).tween("zoom",function(){var $=this,Y=arguments,I=T($,Y).event(X),B=t.apply($,Y),K=H==null?A(B):typeof H=="function"?H.apply($,Y):H,D=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),U=$.__zoom,te=typeof M=="function"?M.apply($,Y):M,Z=d(U.invert(K).concat(D/U.k),te.invert(K).concat(D/te.k));return function(ee){if(ee===1)ee=te;else{var Q=Z(ee),ae=D/Q[2];ee=new Ir(ae,K[0]-Q[0]*ae,K[1]-Q[1]*ae)}I.zoom(null,ee)}})}function T(R,M,H){return!H&&R.__zooming||new C(R,M)}function C(R,M){this.that=R,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(R,M),this.taps=0}C.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,M){return this.mouse&&R!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var M=xn(this.that).datum();p.call(R,this.that,new ZL(R,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:p}),M)}};function z(R,...M){if(!e.apply(this,arguments))return;var H=T(this,M).event(R),X=this.__zoom,$=Math.max(a[0],Math.min(a[1],X.k*Math.pow(2,r.apply(this,arguments)))),Y=$n(R);if(H.wheel)(H.mouse[0][0]!==Y[0]||H.mouse[0][1]!==Y[1])&&(H.mouse[1]=X.invert(H.mouse[0]=Y)),clearTimeout(H.wheel);else{if(X.k===$)return;H.mouse=[Y,X.invert(Y)],Mc(this),H.start()}da(R),H.wheel=setTimeout(I,w),H.zoom("mouse",n(S(N(X,$),H.mouse[0],H.mouse[1]),H.extent,c));function I(){H.wheel=null,H.end()}}function F(R,...M){if(g||!e.apply(this,arguments))return;var H=R.currentTarget,X=T(this,M,!0).event(R),$=xn(R.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",D,!0),Y=$n(R,H),I=R.clientX,B=R.clientY;OC(R.view),xp(R),X.mouse=[Y,this.__zoom.invert(Y)],Mc(this),X.start();function K(U){if(da(U),!X.moved){var te=U.clientX-I,Z=U.clientY-B;X.moved=te*te+Z*Z>b}X.event(U).zoom("mouse",n(S(X.that.__zoom,X.mouse[0]=$n(U,H),X.mouse[1]),X.extent,c))}function D(U){$.on("mousemove.zoom mouseup.zoom",null),MC(U.view,X.moved),da(U),X.event(U).end()}}function V(R,...M){if(e.apply(this,arguments)){var H=this.__zoom,X=$n(R.changedTouches?R.changedTouches[0]:R,this),$=H.invert(X),Y=H.k*(R.shiftKey?.5:2),I=n(S(N(H,Y),X,$),t.apply(this,M),c);da(R),u>0?xn(this).transition().duration(u).call(P,I,X,R):xn(this).call(_.transform,I,X,R)}}function L(R,...M){if(e.apply(this,arguments)){var H=R.touches,X=H.length,$=T(this,M,R.changedTouches.length===X).event(R),Y,I,B,K;for(xp(R),I=0;I<X;++I)B=H[I],K=$n(B,this),K=[K,this.__zoom.invert(K),B.identifier],$.touch0?!$.touch1&&$.touch0[2]!==K[2]&&($.touch1=K,$.taps=0):($.touch0=K,Y=!0,$.taps=1+!!f);f&&(f=clearTimeout(f)),Y&&($.taps<2&&(m=K[0],f=setTimeout(function(){f=null},v)),Mc(this),$.start())}}function q(R,...M){if(this.__zooming){var H=T(this,M).event(R),X=R.changedTouches,$=X.length,Y,I,B,K;for(da(R),Y=0;Y<$;++Y)I=X[Y],B=$n(I,this),H.touch0&&H.touch0[2]===I.identifier?H.touch0[0]=B:H.touch1&&H.touch1[2]===I.identifier&&(H.touch1[0]=B);if(I=H.that.__zoom,H.touch1){var D=H.touch0[0],U=H.touch0[1],te=H.touch1[0],Z=H.touch1[1],ee=(ee=te[0]-D[0])*ee+(ee=te[1]-D[1])*ee,Q=(Q=Z[0]-U[0])*Q+(Q=Z[1]-U[1])*Q;I=N(I,Math.sqrt(ee/Q)),B=[(D[0]+te[0])/2,(D[1]+te[1])/2],K=[(U[0]+Z[0])/2,(U[1]+Z[1])/2]}else if(H.touch0)B=H.touch0[0],K=H.touch0[1];else return;H.zoom("touch",n(S(I,B,K),H.extent,c))}}function G(R,...M){if(this.__zooming){var H=T(this,M).event(R),X=R.changedTouches,$=X.length,Y,I;for(xp(R),g&&clearTimeout(g),g=setTimeout(function(){g=null},v),Y=0;Y<$;++Y)I=X[Y],H.touch0&&H.touch0[2]===I.identifier?delete H.touch0:H.touch1&&H.touch1[2]===I.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(I=$n(I,this),Math.hypot(m[0]-I[0],m[1]-I[1])<k)){var B=xn(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return _.wheelDelta=function(R){return arguments.length?(r=typeof R=="function"?R:mc(+R),_):r},_.filter=function(R){return arguments.length?(e=typeof R=="function"?R:mc(!!R),_):e},_.touchable=function(R){return arguments.length?(i=typeof R=="function"?R:mc(!!R),_):i},_.extent=function(R){return arguments.length?(t=typeof R=="function"?R:mc([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),_):t},_.scaleExtent=function(R){return arguments.length?(a[0]=+R[0],a[1]=+R[1],_):[a[0],a[1]]},_.translateExtent=function(R){return arguments.length?(c[0][0]=+R[0][0],c[1][0]=+R[1][0],c[0][1]=+R[0][1],c[1][1]=+R[1][1],_):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},_.constrain=function(R){return arguments.length?(n=R,_):n},_.duration=function(R){return arguments.length?(u=+R,_):u},_.interpolate=function(R){return arguments.length?(d=R,_):d},_.on=function(){var R=p.on.apply(p,arguments);return R===p?_:R},_.clickDistance=function(R){return arguments.length?(b=(R=+R)*R,_):Math.sqrt(b)},_.tapDistance=function(R){return arguments.length?(k=+R,_):k},_}const cr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ma=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],JC=["Enter"," ","Escape"],ZC={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var as;(function(e){e.Strict="strict",e.Loose="loose"})(as||(as={}));var eo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(eo||(eo={}));var La;(function(e){e.Partial="partial",e.Full="full"})(La||(La={}));const eT={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var hi;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(hi||(hi={}));var Uc;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Uc||(Uc={}));var Se;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Se||(Se={}));const M0={[Se.Left]:Se.Right,[Se.Right]:Se.Left,[Se.Top]:Se.Bottom,[Se.Bottom]:Se.Top};function tT(e){return e===null?null:e?"valid":"invalid"}const nT=e=>"id"in e&&"source"in e&&"target"in e,oD=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ex=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ka=(e,t=[0,0])=>{const{width:n,height:r}=Mr(e),i=e.origin??t,a=n*i[0],c=r*i[1];return{x:e.position.x-a,y:e.position.y-c}},sD=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const a=typeof i=="string";let c=!t.nodeLookup&&!a?i:void 0;t.nodeLookup&&(c=a?t.nodeLookup.get(i):ex(i)?i:t.nodeLookup.get(i.id));const u=c?Wc(c,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return lu(r,u)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return cu(n)},Ga=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=lu(n,Wc(i)),r=!0)}),r?cu(n):{x:0,y:0,width:0,height:0}},tx=(e,t,[n,r,i]=[0,0,1],a=!1,c=!1)=>{const u={...Xa(t,[n,r,i]),width:t.width/i,height:t.height/i},d=[];for(const p of e.values()){const{measured:f,selectable:m=!0,hidden:g=!1}=p;if(c&&!m||g)continue;const v=f.width??p.width??p.initialWidth??null,w=f.height??p.height??p.initialHeight??null,b=Da(u,cs(p)),k=(v??0)*(w??0),_=a&&b>0;(!p.internals.handleBounds||_||b>=k||p.dragging)&&d.push(p)}return d},aD=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function lD(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function cD({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:a},c){if(e.size===0)return Promise.resolve(!0);const u=lD(e,c),d=Ga(u),p=nx(d,t,n,c?.minZoom??i,c?.maxZoom??a,c?.padding??.1);return await r.setViewport(p,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)}function rT({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:a}){const c=n.get(e),u=c.parentId?n.get(c.parentId):void 0,{x:d,y:p}=u?u.internals.positionAbsolute:{x:0,y:0},f=c.origin??r;let m=c.extent||i;if(c.extent==="parent"&&!c.expandParent)if(!u)a?.("005",cr.error005());else{const v=u.measured.width,w=u.measured.height;v&&w&&(m=[[d,p],[d+v,p+w]])}else u&&us(c.extent)&&(m=[[c.extent[0][0]+d,c.extent[0][1]+p],[c.extent[1][0]+d,c.extent[1][1]+p]]);const g=us(m)?ro(t,m,c.measured):t;return(c.measured.width===void 0||c.measured.height===void 0)&&a?.("015",cr.error015()),{position:{x:g.x-d+(c.measured.width??0)*f[0],y:g.y-p+(c.measured.height??0)*f[1]},positionAbsolute:g}}async function uD({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const a=new Set(e.map(g=>g.id)),c=[];for(const g of n){if(g.deletable===!1)continue;const v=a.has(g.id),w=!v&&g.parentId&&c.find(b=>b.id===g.parentId);(v||w)&&c.push(g)}const u=new Set(t.map(g=>g.id)),d=r.filter(g=>g.deletable!==!1),f=aD(c,d);for(const g of d)u.has(g.id)&&!f.find(w=>w.id===g.id)&&f.push(g);if(!i)return{edges:f,nodes:c};const m=await i({nodes:c,edges:f});return typeof m=="boolean"?m?{edges:f,nodes:c}:{edges:[],nodes:[]}:m}const ls=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ro=(e={x:0,y:0},t,n)=>({x:ls(e.x,t[0][0],t[1][0]-(n?.width??0)),y:ls(e.y,t[0][1],t[1][1]-(n?.height??0))});function iT(e,t,n){const{width:r,height:i}=Mr(n),{x:a,y:c}=n.internals.positionAbsolute;return ro(e,[[a,c],[a+r,c+i]],t)}const L0=(e,t,n)=>e<t?ls(Math.abs(e-t),1,t)/t:e>n?-ls(Math.abs(e-n),1,t)/t:0,oT=(e,t,n=15,r=40)=>{const i=L0(e.x,r,t.width-r)*n,a=L0(e.y,r,t.height-r)*n;return[i,a]},lu=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),_v=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),cu=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),cs=(e,t=[0,0])=>{const{x:n,y:r}=ex(e)?e.internals.positionAbsolute:Ka(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Wc=(e,t=[0,0])=>{const{x:n,y:r}=ex(e)?e.internals.positionAbsolute:Ka(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},sT=(e,t)=>cu(lu(_v(e),_v(t))),Da=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},D0=e=>Vn(e.width)&&Vn(e.height)&&Vn(e.x)&&Vn(e.y),Vn=e=>!isNaN(e)&&isFinite(e),dD=(e,t)=>{},Ya=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Xa=({x:e,y:t},[n,r,i],a=!1,c=[1,1])=>{const u={x:(e-n)/i,y:(t-r)/i};return a?Ya(u,c):u},Kc=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Wo(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function pD(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Wo(e,n),i=Wo(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Wo(e.top??e.y??0,n),i=Wo(e.bottom??e.y??0,n),a=Wo(e.left??e.x??0,t),c=Wo(e.right??e.x??0,t);return{top:r,right:c,bottom:i,left:a,x:a+c,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function fD(e,t,n,r,i,a){const{x:c,y:u}=Kc(e,[t,n,r]),{x:d,y:p}=Kc({x:e.x+e.width,y:e.y+e.height},[t,n,r]),f=i-d,m=a-p;return{left:Math.floor(c),top:Math.floor(u),right:Math.floor(f),bottom:Math.floor(m)}}const nx=(e,t,n,r,i,a)=>{const c=pD(a,t,n),u=(t-c.x)/e.width,d=(n-c.y)/e.height,p=Math.min(u,d),f=ls(p,r,i),m=e.x+e.width/2,g=e.y+e.height/2,v=t/2-m*f,w=n/2-g*f,b=fD(e,v,w,f,t,n),k={left:Math.min(b.left-c.left,0),top:Math.min(b.top-c.top,0),right:Math.min(b.right-c.right,0),bottom:Math.min(b.bottom-c.bottom,0)};return{x:v-k.left+k.right,y:w-k.top+k.bottom,zoom:f}},qa=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function us(e){return e!=null&&e!=="parent"}function Mr(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function aT(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function lT(e,t={width:0,height:0},n,r,i){const a={...e},c=r.get(n);if(c){const u=c.origin||i;a.x+=c.internals.positionAbsolute.x-(t.width??0)*u[0],a.y+=c.internals.positionAbsolute.y-(t.height??0)*u[1]}return a}function q0(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function hD(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function mD(e){return{...ZC,...e||{}}}function Na(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:a,y:c}=Un(e),u=Xa({x:a-(i?.left??0),y:c-(i?.top??0)},r),{x:d,y:p}=n?Ya(u,t):u;return{xSnapped:d,ySnapped:p,...u}}const rx=e=>({width:e.offsetWidth,height:e.offsetHeight}),cT=e=>e?.getRootNode?.()||window?.document,gD=["INPUT","SELECT","TEXTAREA"];function uT(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:gD.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const dT=e=>"clientX"in e,Un=(e,t)=>{const n=dT(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},F0=(e,t,n,r,i)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),type:e,nodeId:i,position:c.getAttribute("data-handlepos"),x:(u.left-n.left)/r,y:(u.top-n.top)/r,...rx(c)}})};function pT({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:c,targetControlY:u}){const d=e*.125+i*.375+c*.375+n*.125,p=t*.125+a*.375+u*.375+r*.125,f=Math.abs(d-e),m=Math.abs(p-t);return[d,p,f,m]}function gc(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function z0({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){switch(e){case Se.Left:return[t-gc(t-r,a),n];case Se.Right:return[t+gc(r-t,a),n];case Se.Top:return[t,n-gc(n-i,a)];case Se.Bottom:return[t,n+gc(i-n,a)]}}function ix({sourceX:e,sourceY:t,sourcePosition:n=Se.Bottom,targetX:r,targetY:i,targetPosition:a=Se.Top,curvature:c=.25}){const[u,d]=z0({pos:n,x1:e,y1:t,x2:r,y2:i,c}),[p,f]=z0({pos:a,x1:r,y1:i,x2:e,y2:t,c}),[m,g,v,w]=pT({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:u,sourceControlY:d,targetControlX:p,targetControlY:f});return[`M${e},${t} C${u},${d} ${p},${f} ${r},${i}`,m,g,v,w]}function fT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,c=Math.abs(r-t)/2,u=r<t?r+c:r-c;return[a,u,i,c]}function yD({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:i=!1,zIndexMode:a="basic"}){if(a==="manual")return r;const c=i&&n?r+1e3:r,u=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return c+u}function vD({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const a=lu(Wc(e),Wc(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const c={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Da(c,cu(a))>0}const xD=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,bD=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),wD=(e,t,n={})=>{if(!e.source||!e.target)return t;const r=n.getEdgeId||xD;let i;return nT(e)?i={...e}:i={...e,id:r(e)},bD(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function hT({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,a,c,u]=fT({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,a,c,u]}const B0={[Se.Left]:{x:-1,y:0},[Se.Right]:{x:1,y:0},[Se.Top]:{x:0,y:-1},[Se.Bottom]:{x:0,y:1}},_D=({source:e,sourcePosition:t=Se.Bottom,target:n})=>t===Se.Left||t===Se.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},$0=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kD({source:e,sourcePosition:t=Se.Bottom,target:n,targetPosition:r=Se.Top,center:i,offset:a,stepPosition:c}){const u=B0[t],d=B0[r],p={x:e.x+u.x*a,y:e.y+u.y*a},f={x:n.x+d.x*a,y:n.y+d.y*a},m=_D({source:p,sourcePosition:t,target:f}),g=m.x!==0?"x":"y",v=m[g];let w=[],b,k;const _={x:0,y:0},N={x:0,y:0},[,,S,A]=fT({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(u[g]*d[g]===-1){g==="x"?(b=i.x??p.x+(f.x-p.x)*c,k=i.y??(p.y+f.y)/2):(b=i.x??(p.x+f.x)/2,k=i.y??p.y+(f.y-p.y)*c);const T=[{x:b,y:p.y},{x:b,y:f.y}],C=[{x:p.x,y:k},{x:f.x,y:k}];u[g]===v?w=g==="x"?T:C:w=g==="x"?C:T}else{const T=[{x:p.x,y:f.y}],C=[{x:f.x,y:p.y}];if(g==="x"?w=u.x===v?C:T:w=u.y===v?T:C,t===r){const q=Math.abs(e[g]-n[g]);if(q<=a){const G=Math.min(a-1,a-q);u[g]===v?_[g]=(p[g]>e[g]?-1:1)*G:N[g]=(f[g]>n[g]?-1:1)*G}}if(t!==r){const q=g==="x"?"y":"x",G=u[g]===d[q],R=p[q]>f[q],M=p[q]<f[q];(u[g]===1&&(!G&&R||G&&M)||u[g]!==1&&(!G&&M||G&&R))&&(w=g==="x"?T:C)}const z={x:p.x+_.x,y:p.y+_.y},F={x:f.x+N.x,y:f.y+N.y},V=Math.max(Math.abs(z.x-w[0].x),Math.abs(F.x-w[0].x)),L=Math.max(Math.abs(z.y-w[0].y),Math.abs(F.y-w[0].y));V>=L?(b=(z.x+F.x)/2,k=w[0].y):(b=w[0].x,k=(z.y+F.y)/2)}return[[e,{x:p.x+_.x,y:p.y+_.y},...w,{x:f.x+N.x,y:f.y+N.y},n],b,k,S,A]}function SD(e,t,n,r){const i=Math.min($0(e,t)/2,$0(t,n)/2,r),{x:a,y:c}=t;if(e.x===a&&a===n.x||e.y===c&&c===n.y)return`L${a} ${c}`;if(e.y===c){const p=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${a+i*p},${c}Q ${a},${c} ${a},${c+i*f}`}const u=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${a},${c+i*d}Q ${a},${c} ${a+i*u},${c}`}function Gc({sourceX:e,sourceY:t,sourcePosition:n=Se.Bottom,targetX:r,targetY:i,targetPosition:a=Se.Top,borderRadius:c=5,centerX:u,centerY:d,offset:p=20,stepPosition:f=.5}){const[m,g,v,w,b]=kD({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:a,center:{x:u,y:d},offset:p,stepPosition:f});return[m.reduce((_,N,S)=>{let A="";return S>0&&S<m.length-1?A=SD(m[S-1],N,m[S+1],c):A=`${S===0?"M":"L"}${N.x} ${N.y}`,_+=A,_},""),g,v,w,b]}function H0(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function ND(e){const{sourceNode:t,targetNode:n}=e;if(!H0(t)||!H0(n))return null;const r=t.internals.handleBounds||V0(t.handles),i=n.internals.handleBounds||V0(n.handles),a=U0(r?.source??[],e.sourceHandle),c=U0(e.connectionMode===as.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!a||!c)return e.onError?.("008",cr.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const u=a?.position||Se.Bottom,d=c?.position||Se.Top,p=io(t,a,u),f=io(n,c,d);return{sourceX:p.x,sourceY:p.y,targetX:f.x,targetY:f.y,sourcePosition:u,targetPosition:d}}function V0(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function io(e,t,n=Se.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,a=(t?.y??0)+e.internals.positionAbsolute.y,{width:c,height:u}=t??Mr(e);if(r)return{x:i+c/2,y:a+u/2};switch(t?.position??n){case Se.Top:return{x:i+c/2,y:a};case Se.Right:return{x:i+c,y:a+u/2};case Se.Bottom:return{x:i+c/2,y:a+u};case Se.Left:return{x:i,y:a+u/2}}}function U0(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function kv(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function jD(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const a=new Set;return e.reduce((c,u)=>([u.markerStart||r,u.markerEnd||i].forEach(d=>{if(d&&typeof d=="object"){const p=kv(d,t);a.has(p)||(c.push({id:p,color:d.color||n,...d}),a.add(p))}}),c),[]).sort((c,u)=>c.id.localeCompare(u.id))}const mT=1e3,ED=10,ox={nodeOrigin:[0,0],nodeExtent:Ma,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},CD={...ox,checkEquality:!0};function sx(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function TD(e,t,n){const r=sx(ox,n);for(const i of e.values())if(i.parentId)lx(i,e,t,r);else{const a=Ka(i,r.nodeOrigin),c=us(i.extent)?i.extent:r.nodeExtent,u=ro(a,c,Mr(i));i.internals.positionAbsolute=u}}function AD(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const a={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(a):i.type==="target"&&r.push(a)}return{source:n,target:r}}function ax(e){return e==="manual"}function Sv(e,t,n,r={}){const i=sx(CD,r),a={i:0},c=new Map(t),u=i?.elevateNodesOnSelect&&!ax(i.zIndexMode)?mT:0;let d=e.length>0;t.clear(),n.clear();for(const p of e){let f=c.get(p.id);if(i.checkEquality&&p===f?.internals.userNode)t.set(p.id,f);else{const m=Ka(p,i.nodeOrigin),g=us(p.extent)?p.extent:i.nodeExtent,v=ro(m,g,Mr(p));f={...i.defaults,...p,measured:{width:p.measured?.width,height:p.measured?.height},internals:{positionAbsolute:v,handleBounds:AD(p,f),z:gT(p,u,i.zIndexMode),userNode:p}},t.set(p.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(d=!1),p.parentId&&lx(f,t,n,r,a)}return d}function PD(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function lx(e,t,n,r,i){const{elevateNodesOnSelect:a,nodeOrigin:c,nodeExtent:u,zIndexMode:d}=sx(ox,r),p=e.parentId,f=t.get(p);if(!f){console.warn(`Parent node ${p} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}PD(e,n),i&&!f.parentId&&f.internals.rootParentIndex===void 0&&d==="auto"&&(f.internals.rootParentIndex=++i.i,f.internals.z=f.internals.z+i.i*ED),i&&f.internals.rootParentIndex!==void 0&&(i.i=f.internals.rootParentIndex);const m=a&&!ax(d)?mT:0,{x:g,y:v,z:w}=ID(e,f,c,u,m,d),{positionAbsolute:b}=e.internals,k=g!==b.x||v!==b.y;(k||w!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:k?{x:g,y:v}:b,z:w}})}function gT(e,t,n){const r=Vn(e.zIndex)?e.zIndex:0;return ax(n)?r:r+(e.selected?t:0)}function ID(e,t,n,r,i,a){const{x:c,y:u}=t.internals.positionAbsolute,d=Mr(e),p=Ka(e,n),f=us(e.extent)?ro(p,e.extent,d):p;let m=ro({x:c+f.x,y:u+f.y},r,d);e.extent==="parent"&&(m=iT(m,d,t));const g=gT(e,i,a),v=t.internals.z??0;return{x:m.x,y:m.y,z:v>=g?v+1:g}}function cx(e,t,n,r=[0,0]){const i=[],a=new Map;for(const c of e){const u=t.get(c.parentId);if(!u)continue;const d=a.get(c.parentId)?.expandedRect??cs(u),p=sT(d,c.rect);a.set(c.parentId,{expandedRect:p,parent:u})}return a.size>0&&a.forEach(({expandedRect:c,parent:u},d)=>{const p=u.internals.positionAbsolute,f=Mr(u),m=u.origin??r,g=c.x<p.x?Math.round(Math.abs(p.x-c.x)):0,v=c.y<p.y?Math.round(Math.abs(p.y-c.y)):0,w=Math.max(f.width,Math.round(c.width)),b=Math.max(f.height,Math.round(c.height)),k=(w-f.width)*m[0],_=(b-f.height)*m[1];(g>0||v>0||k||_)&&(i.push({id:d,type:"position",position:{x:u.position.x-g+k,y:u.position.y-v+_}}),n.get(d)?.forEach(N=>{e.some(S=>S.id===N.id)||i.push({id:N.id,type:"position",position:{x:N.position.x+g,y:N.position.y+v}})})),(f.width<c.width||f.height<c.height||g||v)&&i.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:w+(g?m[0]*g-k:0),height:b+(v?m[1]*v-_:0)}})}),i}function RD(e,t,n,r,i,a,c){const u=r?.querySelector(".xyflow__viewport");let d=!1;if(!u)return{changes:[],updatedInternals:d};const p=[],f=window.getComputedStyle(u),{m22:m}=new window.DOMMatrixReadOnly(f.transform),g=[];for(const v of e.values()){const w=t.get(v.id);if(!w)continue;if(w.hidden){t.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),d=!0;continue}const b=rx(v.nodeElement),k=w.measured.width!==b.width||w.measured.height!==b.height;if(!!(b.width&&b.height&&(k||!w.internals.handleBounds||v.force))){const N=v.nodeElement.getBoundingClientRect(),S=us(w.extent)?w.extent:a;let{positionAbsolute:A}=w.internals;w.parentId&&w.extent==="parent"?A=iT(A,b,t.get(w.parentId)):S&&(A=ro(A,S,b));const P={...w,measured:b,internals:{...w.internals,positionAbsolute:A,handleBounds:{source:F0("source",v.nodeElement,N,m,w.id),target:F0("target",v.nodeElement,N,m,w.id)}}};t.set(w.id,P),w.parentId&&lx(P,t,n,{nodeOrigin:i,zIndexMode:c}),d=!0,k&&(p.push({id:w.id,type:"dimensions",dimensions:b}),w.expandParent&&w.parentId&&g.push({id:w.id,parentId:w.parentId,rect:cs(P,i)}))}}if(g.length>0){const v=cx(g,t,n,i);p.push(...v)}return{changes:p,updatedInternals:d}}async function OD({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const c=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,a]],r),u=!!c&&(c.x!==n[0]||c.y!==n[1]||c.k!==n[2]);return Promise.resolve(u)}function W0(e,t,n,r,i,a){let c=i;const u=r.get(c)||new Map;r.set(c,u.set(n,t)),c=`${i}-${e}`;const d=r.get(c)||new Map;if(r.set(c,d.set(n,t)),a){c=`${i}-${e}-${a}`;const p=r.get(c)||new Map;r.set(c,p.set(n,t))}}function yT(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:a,sourceHandle:c=null,targetHandle:u=null}=r,d={edgeId:r.id,source:i,target:a,sourceHandle:c,targetHandle:u},p=`${i}-${c}--${a}-${u}`,f=`${a}-${u}--${i}-${c}`;W0("source",d,f,e,i,c),W0("target",d,p,e,a,u),t.set(r.id,r)}}function vT(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:vT(n,t):!1}function K0(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function MD(e,t,n,r){const i=new Map;for(const[a,c]of e)if((c.selected||c.id===r)&&(!c.parentId||!vT(c,e))&&(c.draggable||t&&typeof c.draggable>"u")){const u=e.get(a);u&&i.set(a,{id:a,position:u.position||{x:0,y:0},distance:{x:n.x-u.internals.positionAbsolute.x,y:n.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:u.measured.width??0,height:u.measured.height??0}})}return i}function bp({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[c,u]of t){const d=n.get(c)?.internals.userNode;d&&i.push({...d,position:u.position,dragging:r})}if(!e)return[i[0],i];const a=n.get(e)?.internals.userNode;return[a?{...a,position:t.get(e)?.position||a.position,dragging:r}:i[0],i]}function LD({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const a={x:n-i.distance.x,y:r-i.distance.y},c=Ya(a,t);return{x:c.x-a.x,y:c.y-a.y}}function DD({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let a={x:null,y:null},c=0,u=new Map,d=!1,p={x:0,y:0},f=null,m=!1,g=null,v=!1,w=!1,b=null;function k({noDragClassName:N,handleSelector:S,domNode:A,isSelectable:P,nodeId:T,nodeClickDistance:C=0}){g=xn(A);function z({x:q,y:G}){const{nodeLookup:R,nodeExtent:M,snapGrid:H,snapToGrid:X,nodeOrigin:$,onNodeDrag:Y,onSelectionDrag:I,onError:B,updateNodePositions:K}=t();a={x:q,y:G};let D=!1;const U=u.size>1,te=U&&M?_v(Ga(u)):null,Z=U&&X?LD({dragItems:u,snapGrid:H,x:q,y:G}):null;for(const[ee,Q]of u){if(!R.has(ee))continue;let ae={x:q-Q.distance.x,y:G-Q.distance.y};X&&(ae=Z?{x:Math.round(ae.x+Z.x),y:Math.round(ae.y+Z.y)}:Ya(ae,H));let pe=null;if(U&&M&&!Q.extent&&te){const{positionAbsolute:xe}=Q.internals,Ae=xe.x-te.x+M[0][0],be=xe.x+Q.measured.width-te.x2+M[1][0],De=xe.y-te.y+M[0][1],Ce=xe.y+Q.measured.height-te.y2+M[1][1];pe=[[Ae,De],[be,Ce]]}const{position:ye,positionAbsolute:Ne}=rT({nodeId:ee,nextPosition:ae,nodeLookup:R,nodeExtent:pe||M,nodeOrigin:$,onError:B});D=D||Q.position.x!==ye.x||Q.position.y!==ye.y,Q.position=ye,Q.internals.positionAbsolute=Ne}if(w=w||D,!!D&&(K(u,!0),b&&(r||Y||!T&&I))){const[ee,Q]=bp({nodeId:T,dragItems:u,nodeLookup:R});r?.(b,u,ee,Q),Y?.(b,ee,Q),T||I?.(b,Q)}}async function F(){if(!f)return;const{transform:q,panBy:G,autoPanSpeed:R,autoPanOnNodeDrag:M}=t();if(!M){d=!1,cancelAnimationFrame(c);return}const[H,X]=oT(p,f,R);(H!==0||X!==0)&&(a.x=(a.x??0)-H/q[2],a.y=(a.y??0)-X/q[2],await G({x:H,y:X})&&z(a)),c=requestAnimationFrame(F)}function V(q){const{nodeLookup:G,multiSelectionActive:R,nodesDraggable:M,transform:H,snapGrid:X,snapToGrid:$,selectNodesOnDrag:Y,onNodeDragStart:I,onSelectionDragStart:B,unselectNodesAndEdges:K}=t();m=!0,(!Y||!P)&&!R&&T&&(G.get(T)?.selected||K()),P&&Y&&T&&e?.(T);const D=Na(q.sourceEvent,{transform:H,snapGrid:X,snapToGrid:$,containerBounds:f});if(a=D,u=MD(G,M,D,T),u.size>0&&(n||I||!T&&B)){const[U,te]=bp({nodeId:T,dragItems:u,nodeLookup:G});n?.(q.sourceEvent,u,U,te),I?.(q.sourceEvent,U,te),T||B?.(q.sourceEvent,te)}}const L=LC().clickDistance(C).on("start",q=>{const{domNode:G,nodeDragThreshold:R,transform:M,snapGrid:H,snapToGrid:X}=t();f=G?.getBoundingClientRect()||null,v=!1,w=!1,b=q.sourceEvent,R===0&&V(q),a=Na(q.sourceEvent,{transform:M,snapGrid:H,snapToGrid:X,containerBounds:f}),p=Un(q.sourceEvent,f)}).on("drag",q=>{const{autoPanOnNodeDrag:G,transform:R,snapGrid:M,snapToGrid:H,nodeDragThreshold:X,nodeLookup:$}=t(),Y=Na(q.sourceEvent,{transform:R,snapGrid:M,snapToGrid:H,containerBounds:f});if(b=q.sourceEvent,(q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1||T&&!$.has(T))&&(v=!0),!v){if(!d&&G&&m&&(d=!0,F()),!m){const I=Un(q.sourceEvent,f),B=I.x-p.x,K=I.y-p.y;Math.sqrt(B*B+K*K)>X&&V(q)}(a.x!==Y.xSnapped||a.y!==Y.ySnapped)&&u&&m&&(p=Un(q.sourceEvent,f),z(Y))}}).on("end",q=>{if(!(!m||v)&&(d=!1,m=!1,cancelAnimationFrame(c),u.size>0)){const{nodeLookup:G,updateNodePositions:R,onNodeDragStop:M,onSelectionDragStop:H}=t();if(w&&(R(u,!1),w=!1),i||M||!T&&H){const[X,$]=bp({nodeId:T,dragItems:u,nodeLookup:G,dragging:!1});i?.(q.sourceEvent,u,X,$),M?.(q.sourceEvent,X,$),T||H?.(q.sourceEvent,$)}}}).filter(q=>{const G=q.target;return!q.button&&(!N||!K0(G,`.${N}`,A))&&(!S||K0(G,S,A))});g.call(L)}function _(){g?.on(".drag",null)}return{update:k,destroy:_}}function qD(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())Da(i,cs(a))>0&&r.push(a);return r}const FD=250;function zD(e,t,n,r){let i=[],a=1/0;const c=qD(e,n,t+FD);for(const u of c){const d=[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]];for(const p of d){if(r.nodeId===p.nodeId&&r.type===p.type&&r.id===p.id)continue;const{x:f,y:m}=io(u,p,p.position,!0),g=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(m-e.y,2));g>t||(g<a?(i=[{...p,x:f,y:m}],a=g):g===a&&i.push({...p,x:f,y:m}))}}if(!i.length)return null;if(i.length>1){const u=r.type==="source"?"target":"source";return i.find(d=>d.type===u)??i[0]}return i[0]}function xT(e,t,n,r,i,a=!1){const c=r.get(e);if(!c)return null;const u=i==="strict"?c.internals.handleBounds?.[t]:[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]],d=(n?u?.find(p=>p.id===n):u?.[0])??null;return d&&a?{...d,...io(c,d,d.position,!0)}:d}function bT(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function BD(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const wT=()=>!0;function $D(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:a,isTarget:c,domNode:u,nodeLookup:d,lib:p,autoPanOnConnect:f,flowId:m,panBy:g,cancelConnection:v,onConnectStart:w,onConnect:b,onConnectEnd:k,isValidConnection:_=wT,onReconnectEnd:N,updateConnection:S,getTransform:A,getFromHandle:P,autoPanSpeed:T,dragThreshold:C=1,handleDomNode:z}){const F=cT(e.target);let V=0,L;const{x:q,y:G}=Un(e),R=bT(a,z),M=u?.getBoundingClientRect();let H=!1;if(!M||!R)return;const X=xT(i,R,r,d,t);if(!X)return;let $=Un(e,M),Y=!1,I=null,B=!1,K=null;function D(){if(!f||!M)return;const[ye,Ne]=oT($,M,T);g({x:ye,y:Ne}),V=requestAnimationFrame(D)}const U={...X,nodeId:i,type:R,position:X.position},te=d.get(i);let ee={inProgress:!0,isValid:null,from:io(te,U,Se.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:te,to:$,toHandle:null,toPosition:M0[U.position],toNode:null,pointer:$};function Q(){H=!0,S(ee),w?.(e,{nodeId:i,handleId:r,handleType:R})}C===0&&Q();function ae(ye){if(!H){const{x:Ce,y:ot}=Un(ye),Ye=Ce-q,dt=ot-G;if(!(Ye*Ye+dt*dt>C*C))return;Q()}if(!P()||!U){pe(ye);return}const Ne=A();$=Un(ye,M),L=zD(Xa($,Ne,!1,[1,1]),n,d,U),Y||(D(),Y=!0);const xe=_T(ye,{handle:L,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:c?"target":"source",isValidConnection:_,doc:F,lib:p,flowId:m,nodeLookup:d});K=xe.handleDomNode,I=xe.connection,B=BD(!!L,xe.isValid);const Ae=d.get(i),be=Ae?io(Ae,U,Se.Left,!0):ee.from,De={...ee,from:be,isValid:B,to:xe.toHandle&&B?Kc({x:xe.toHandle.x,y:xe.toHandle.y},Ne):$,toHandle:xe.toHandle,toPosition:B&&xe.toHandle?xe.toHandle.position:M0[U.position],toNode:xe.toHandle?d.get(xe.toHandle.nodeId):null,pointer:$};S(De),ee=De}function pe(ye){if(!("touches"in ye&&ye.touches.length>0)){if(H){(L||K)&&I&&B&&b?.(I);const{inProgress:Ne,...xe}=ee,Ae={...xe,toPosition:ee.toHandle?ee.toPosition:null};k?.(ye,Ae),a&&N?.(ye,Ae)}v(),cancelAnimationFrame(V),Y=!1,B=!1,I=null,K=null,F.removeEventListener("mousemove",ae),F.removeEventListener("mouseup",pe),F.removeEventListener("touchmove",ae),F.removeEventListener("touchend",pe)}}F.addEventListener("mousemove",ae),F.addEventListener("mouseup",pe),F.addEventListener("touchmove",ae),F.addEventListener("touchend",pe)}function _T(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:a,doc:c,lib:u,flowId:d,isValidConnection:p=wT,nodeLookup:f}){const m=a==="target",g=t?c.querySelector(`.${u}-flow__handle[data-id="${d}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:v,y:w}=Un(e),b=c.elementFromPoint(v,w),k=b?.classList.contains(`${u}-flow__handle`)?b:g,_={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const N=bT(void 0,k),S=k.getAttribute("data-nodeid"),A=k.getAttribute("data-handleid"),P=k.classList.contains("connectable"),T=k.classList.contains("connectableend");if(!S||!N)return _;const C={source:m?S:r,sourceHandle:m?A:i,target:m?r:S,targetHandle:m?i:A};_.connection=C;const F=P&&T&&(n===as.Strict?m&&N==="source"||!m&&N==="target":S!==r||A!==i);_.isValid=F&&p(C),_.toHandle=xT(S,N,A,f,n,!0)}return _}const Nv={onPointerDown:$D,isValid:_T};function HD({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=xn(e);function a({translateExtent:u,width:d,height:p,zoomStep:f=1,pannable:m=!0,zoomable:g=!0,inversePan:v=!1}){const w=S=>{if(S.sourceEvent.type!=="wheel"||!t)return;const A=n(),P=S.sourceEvent.ctrlKey&&qa()?10:1,T=-S.sourceEvent.deltaY*(S.sourceEvent.deltaMode===1?.05:S.sourceEvent.deltaMode?1:.002)*f,C=A[2]*Math.pow(2,T*P);t.scaleTo(C)};let b=[0,0];const k=S=>{(S.sourceEvent.type==="mousedown"||S.sourceEvent.type==="touchstart")&&(b=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY])},_=S=>{const A=n();if(S.sourceEvent.type!=="mousemove"&&S.sourceEvent.type!=="touchmove"||!t)return;const P=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY],T=[P[0]-b[0],P[1]-b[1]];b=P;const C=r()*Math.max(A[2],Math.log(A[2]))*(v?-1:1),z={x:A[0]-T[0]*C,y:A[1]-T[1]*C},F=[[0,0],[d,p]];t.setViewportConstrained({x:z.x,y:z.y,zoom:A[2]},F,u)},N=QC().on("start",k).on("zoom",m?_:null).on("zoom.wheel",g?w:null);i.call(N,{})}function c(){i.on("zoom",null)}return{update:a,destroy:c,pointer:$n}}const uu=e=>({x:e.x,y:e.y,zoom:e.k}),wp=({x:e,y:t,zoom:n})=>au.translate(e,t).scale(n),Qo=(e,t)=>e.target.closest(`.${t}`),kT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),VD=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,_p=(e,t=0,n=VD,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},ST=e=>{const t=e.ctrlKey&&qa()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function UD({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:a,zoomOnPinch:c,onPanZoomStart:u,onPanZoom:d,onPanZoomEnd:p}){return f=>{if(Qo(f,t))return f.ctrlKey&&f.preventDefault(),!1;f.preventDefault(),f.stopImmediatePropagation();const m=n.property("__zoom").k||1;if(f.ctrlKey&&c){const k=$n(f),_=ST(f),N=m*Math.pow(2,_);r.scaleTo(n,N,k,f);return}const g=f.deltaMode===1?20:1;let v=i===eo.Vertical?0:f.deltaX*g,w=i===eo.Horizontal?0:f.deltaY*g;!qa()&&f.shiftKey&&i!==eo.Vertical&&(v=f.deltaY*g,w=0),r.translateBy(n,-(v/m)*a,-(w/m)*a,{internal:!0});const b=uu(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d?.(f,b),e.panScrollTimeout=setTimeout(()=>{p?.(f,b),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,u?.(f,b))}}function WD({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const a=r.type==="wheel",c=!t&&a&&!r.ctrlKey,u=Qo(r,e);if(r.ctrlKey&&a&&u&&r.preventDefault(),c||u)return null;r.preventDefault(),n.call(this,r,i)}}function KD({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=uu(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function GD({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return a=>{e.usedRightMouseButton=!!(n&&kT(t,e.mouseButton??0)),a.sourceEvent?.sync||r([a.transform.x,a.transform.y,a.transform.k]),i&&!a.sourceEvent?.internal&&i?.(a.sourceEvent,uu(a.transform))}}function YD({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:a}){return c=>{if(!c.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,a&&kT(t,e.mouseButton??0)&&!e.usedRightMouseButton&&c.sourceEvent&&a(c.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const u=uu(c.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(c.sourceEvent,u)},n?150:0)}}}function XD({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:a,userSelectionActive:c,noWheelClassName:u,noPanClassName:d,lib:p,connectionInProgress:f}){return m=>{const g=e||t,v=n&&m.ctrlKey,w=m.type==="wheel";if(m.button===1&&m.type==="mousedown"&&(Qo(m,`${p}-flow__node`)||Qo(m,`${p}-flow__edge`)))return!0;if(!r&&!g&&!i&&!a&&!n||c||f&&!w||Qo(m,u)&&w||Qo(m,d)&&(!w||i&&w&&!e)||!n&&m.ctrlKey&&w)return!1;if(!n&&m.type==="touchstart"&&m.touches?.length>1)return m.preventDefault(),!1;if(!g&&!i&&!v&&w||!r&&(m.type==="mousedown"||m.type==="touchstart")||Array.isArray(r)&&!r.includes(m.button)&&m.type==="mousedown")return!1;const b=Array.isArray(r)&&r.includes(m.button)||!m.button||m.button<=1;return(!m.ctrlKey||w)&&b}}function QD({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:i,onPanZoom:a,onPanZoomStart:c,onPanZoomEnd:u,onDraggingChange:d}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),m=QC().scaleExtent([t,n]).translateExtent(r),g=xn(e).call(m);N({x:i.x,y:i.y,zoom:ls(i.zoom,t,n)},[[0,0],[f.width,f.height]],r);const v=g.on("wheel.zoom"),w=g.on("dblclick.zoom");m.wheelDelta(ST);function b(L,q){return g?new Promise(G=>{m?.interpolate(q?.interpolate==="linear"?Sa:Ic).transform(_p(g,q?.duration,q?.ease,()=>G(!0)),L)}):Promise.resolve(!1)}function k({noWheelClassName:L,noPanClassName:q,onPaneContextMenu:G,userSelectionActive:R,panOnScroll:M,panOnDrag:H,panOnScrollMode:X,panOnScrollSpeed:$,preventScrolling:Y,zoomOnPinch:I,zoomOnScroll:B,zoomOnDoubleClick:K,zoomActivationKeyPressed:D,lib:U,onTransformChange:te,connectionInProgress:Z,paneClickDistance:ee,selectionOnDrag:Q}){R&&!p.isZoomingOrPanning&&_();const ae=M&&!D&&!R;m.clickDistance(Q?1/0:!Vn(ee)||ee<0?0:ee);const pe=ae?UD({zoomPanValues:p,noWheelClassName:L,d3Selection:g,d3Zoom:m,panOnScrollMode:X,panOnScrollSpeed:$,zoomOnPinch:I,onPanZoomStart:c,onPanZoom:a,onPanZoomEnd:u}):WD({noWheelClassName:L,preventScrolling:Y,d3ZoomHandler:v});if(g.on("wheel.zoom",pe,{passive:!1}),!R){const Ne=KD({zoomPanValues:p,onDraggingChange:d,onPanZoomStart:c});m.on("start",Ne);const xe=GD({zoomPanValues:p,panOnDrag:H,onPaneContextMenu:!!G,onPanZoom:a,onTransformChange:te});m.on("zoom",xe);const Ae=YD({zoomPanValues:p,panOnDrag:H,panOnScroll:M,onPaneContextMenu:G,onPanZoomEnd:u,onDraggingChange:d});m.on("end",Ae)}const ye=XD({zoomActivationKeyPressed:D,panOnDrag:H,zoomOnScroll:B,panOnScroll:M,zoomOnDoubleClick:K,zoomOnPinch:I,userSelectionActive:R,noPanClassName:q,noWheelClassName:L,lib:U,connectionInProgress:Z});m.filter(ye),K?g.on("dblclick.zoom",w):g.on("dblclick.zoom",null)}function _(){m.on("zoom",null)}async function N(L,q,G){const R=wp(L),M=m?.constrain()(R,q,G);return M&&await b(M),new Promise(H=>H(M))}async function S(L,q){const G=wp(L);return await b(G,q),new Promise(R=>R(G))}function A(L){if(g){const q=wp(L),G=g.property("__zoom");(G.k!==L.zoom||G.x!==L.x||G.y!==L.y)&&m?.transform(g,q,null,{sync:!0})}}function P(){const L=g?XC(g.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function T(L,q){return g?new Promise(G=>{m?.interpolate(q?.interpolate==="linear"?Sa:Ic).scaleTo(_p(g,q?.duration,q?.ease,()=>G(!0)),L)}):Promise.resolve(!1)}function C(L,q){return g?new Promise(G=>{m?.interpolate(q?.interpolate==="linear"?Sa:Ic).scaleBy(_p(g,q?.duration,q?.ease,()=>G(!0)),L)}):Promise.resolve(!1)}function z(L){m?.scaleExtent(L)}function F(L){m?.translateExtent(L)}function V(L){const q=!Vn(L)||L<0?0:L;m?.clickDistance(q)}return{update:k,destroy:_,setViewport:S,setViewportConstrained:N,getViewport:P,scaleTo:T,scaleBy:C,setScaleExtent:z,setTranslateExtent:F,syncViewport:A,setClickDistance:V}}var ds;(function(e){e.Line="line",e.Handle="handle"})(ds||(ds={}));function JD({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:a}){const c=e-t,u=n-r,d=[c>0?1:c<0?-1:0,u>0?1:u<0?-1:0];return c&&i&&(d[0]=d[0]*-1),u&&a&&(d[1]=d[1]*-1),d}function G0(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function ci(e,t){return Math.max(0,t-e)}function ui(e,t){return Math.max(0,e-t)}function yc(e,t,n){return Math.max(0,t-e,e-n)}function Y0(e,t){return e?!t:t}function ZD(e,t,n,r,i,a,c,u){let{affectsX:d,affectsY:p}=t;const{isHorizontal:f,isVertical:m}=t,g=f&&m,{xSnapped:v,ySnapped:w}=n,{minWidth:b,maxWidth:k,minHeight:_,maxHeight:N}=r,{x:S,y:A,width:P,height:T,aspectRatio:C}=e;let z=Math.floor(f?v-e.pointerX:0),F=Math.floor(m?w-e.pointerY:0);const V=P+(d?-z:z),L=T+(p?-F:F),q=-a[0]*P,G=-a[1]*T;let R=yc(V,b,k),M=yc(L,_,N);if(c){let $=0,Y=0;d&&z<0?$=ci(S+z+q,c[0][0]):!d&&z>0&&($=ui(S+V+q,c[1][0])),p&&F<0?Y=ci(A+F+G,c[0][1]):!p&&F>0&&(Y=ui(A+L+G,c[1][1])),R=Math.max(R,$),M=Math.max(M,Y)}if(u){let $=0,Y=0;d&&z>0?$=ui(S+z,u[0][0]):!d&&z<0&&($=ci(S+V,u[1][0])),p&&F>0?Y=ui(A+F,u[0][1]):!p&&F<0&&(Y=ci(A+L,u[1][1])),R=Math.max(R,$),M=Math.max(M,Y)}if(i){if(f){const $=yc(V/C,_,N)*C;if(R=Math.max(R,$),c){let Y=0;!d&&!p||d&&!p&&g?Y=ui(A+G+V/C,c[1][1])*C:Y=ci(A+G+(d?z:-z)/C,c[0][1])*C,R=Math.max(R,Y)}if(u){let Y=0;!d&&!p||d&&!p&&g?Y=ci(A+V/C,u[1][1])*C:Y=ui(A+(d?z:-z)/C,u[0][1])*C,R=Math.max(R,Y)}}if(m){const $=yc(L*C,b,k)/C;if(M=Math.max(M,$),c){let Y=0;!d&&!p||p&&!d&&g?Y=ui(S+L*C+q,c[1][0])/C:Y=ci(S+(p?F:-F)*C+q,c[0][0])/C,M=Math.max(M,Y)}if(u){let Y=0;!d&&!p||p&&!d&&g?Y=ci(S+L*C,u[1][0])/C:Y=ui(S+(p?F:-F)*C,u[0][0])/C,M=Math.max(M,Y)}}}F=F+(F<0?M:-M),z=z+(z<0?R:-R),i&&(g?V>L*C?F=(Y0(d,p)?-z:z)/C:z=(Y0(d,p)?-F:F)*C:f?(F=z/C,p=d):(z=F*C,d=p));const H=d?S+z:S,X=p?A+F:A;return{width:P+(d?-z:z),height:T+(p?-F:F),x:a[0]*z*(d?-1:1)+H,y:a[1]*F*(p?-1:1)+X}}const NT={width:0,height:0,x:0,y:0},e3={...NT,pointerX:0,pointerY:0,aspectRatio:1};function t3(e){return[[0,0],[e.measured.width,e.measured.height]]}function n3(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,a=e.measured.width??0,c=e.measured.height??0,u=n[0]*a,d=n[1]*c;return[[r-u,i-d],[r+a-u,i+c-d]]}function r3({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const a=xn(e);let c={controlDirection:G0("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function u({controlPosition:p,boundaries:f,keepAspectRatio:m,resizeDirection:g,onResizeStart:v,onResize:w,onResizeEnd:b,shouldResize:k}){let _={...NT},N={...e3};c={boundaries:f,resizeDirection:g,keepAspectRatio:m,controlDirection:G0(p)};let S,A=null,P=[],T,C,z,F=!1;const V=LC().on("start",L=>{const{nodeLookup:q,transform:G,snapGrid:R,snapToGrid:M,nodeOrigin:H,paneDomNode:X}=n();if(S=q.get(t),!S)return;A=X?.getBoundingClientRect()??null;const{xSnapped:$,ySnapped:Y}=Na(L.sourceEvent,{transform:G,snapGrid:R,snapToGrid:M,containerBounds:A});_={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},N={..._,pointerX:$,pointerY:Y,aspectRatio:_.width/_.height},T=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&(T=q.get(S.parentId),C=T&&S.extent==="parent"?t3(T):void 0),P=[],z=void 0;for(const[I,B]of q)if(B.parentId===t&&(P.push({id:I,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const K=n3(B,S,B.origin??H);z?z=[[Math.min(K[0][0],z[0][0]),Math.min(K[0][1],z[0][1])],[Math.max(K[1][0],z[1][0]),Math.max(K[1][1],z[1][1])]]:z=K}v?.(L,{..._})}).on("drag",L=>{const{transform:q,snapGrid:G,snapToGrid:R,nodeOrigin:M}=n(),H=Na(L.sourceEvent,{transform:q,snapGrid:G,snapToGrid:R,containerBounds:A}),X=[];if(!S)return;const{x:$,y:Y,width:I,height:B}=_,K={},D=S.origin??M,{width:U,height:te,x:Z,y:ee}=ZD(N,c.controlDirection,H,c.boundaries,c.keepAspectRatio,D,C,z),Q=U!==I,ae=te!==B,pe=Z!==$&&Q,ye=ee!==Y&&ae;if(!pe&&!ye&&!Q&&!ae)return;if((pe||ye||D[0]===1||D[1]===1)&&(K.x=pe?Z:_.x,K.y=ye?ee:_.y,_.x=K.x,_.y=K.y,P.length>0)){const be=Z-$,De=ee-Y;for(const Ce of P)Ce.position={x:Ce.position.x-be+D[0]*(U-I),y:Ce.position.y-De+D[1]*(te-B)},X.push(Ce)}if((Q||ae)&&(K.width=Q&&(!c.resizeDirection||c.resizeDirection==="horizontal")?U:_.width,K.height=ae&&(!c.resizeDirection||c.resizeDirection==="vertical")?te:_.height,_.width=K.width,_.height=K.height),T&&S.expandParent){const be=D[0]*(K.width??0);K.x&&K.x<be&&(_.x=be,N.x=N.x-(K.x-be));const De=D[1]*(K.height??0);K.y&&K.y<De&&(_.y=De,N.y=N.y-(K.y-De))}const Ne=JD({width:_.width,prevWidth:I,height:_.height,prevHeight:B,affectsX:c.controlDirection.affectsX,affectsY:c.controlDirection.affectsY}),xe={..._,direction:Ne};k?.(L,xe)!==!1&&(F=!0,w?.(L,xe),r(K,X))}).on("end",L=>{F&&(b?.(L,{..._}),i?.({..._}),F=!1)});a.call(V)}function d(){a.on(".drag",null)}return{update:u,destroy:d}}var kp={exports:{}},Sp={},Np={exports:{}},jp={};var X0;function i3(){if(X0)return jp;X0=1;var e=Va();function t(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,c=e.useDebugValue;function u(m,g){var v=g(),w=r({inst:{value:v,getSnapshot:g}}),b=w[0].inst,k=w[1];return a(function(){b.value=v,b.getSnapshot=g,d(b)&&k({inst:b})},[m,v,g]),i(function(){return d(b)&&k({inst:b}),m(function(){d(b)&&k({inst:b})})},[m]),c(v),v}function d(m){var g=m.getSnapshot;m=m.value;try{var v=g();return!n(m,v)}catch{return!0}}function p(m,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return jp.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,jp}var Q0;function o3(){return Q0||(Q0=1,Np.exports=i3()),Np.exports}var J0;function s3(){if(J0)return Sp;J0=1;var e=Va(),t=o3();function n(p,f){return p===f&&(p!==0||1/p===1/f)||p!==p&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,a=e.useRef,c=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Sp.useSyncExternalStoreWithSelector=function(p,f,m,g,v){var w=a(null);if(w.current===null){var b={hasValue:!1,value:null};w.current=b}else b=w.current;w=u(function(){function _(T){if(!N){if(N=!0,S=T,T=g(T),v!==void 0&&b.hasValue){var C=b.value;if(v(C,T))return A=C}return A=T}if(C=A,r(S,T))return C;var z=g(T);return v!==void 0&&v(C,z)?(S=T,C):(S=T,A=z)}var N=!1,S,A,P=m===void 0?null:m;return[function(){return _(f())},P===null?void 0:function(){return _(P())}]},[f,m,g,v]);var k=i(p,w[0],w[1]);return c(function(){b.hasValue=!0,b.value=k},[k]),d(k),k},Sp}var Z0;function a3(){return Z0||(Z0=1,kp.exports=s3()),kp.exports}var l3=a3();const jT=ps(l3),c3={},e_=e=>{let t;const n=new Set,r=(f,m)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const v=t;t=m??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(w=>w(t,v))}},i=()=>t,d={setState:r,getState:i,getInitialState:()=>p,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(c3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(r,i,d);return d},ET=e=>e?e_(e):e_,{useDebugValue:u3}=Rt,{useSyncExternalStoreWithSelector:d3}=jT,p3=e=>e;function CT(e,t=p3,n){const r=d3(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return u3(r),r}const t_=(e,t)=>{const n=ET(e),r=(i,a=t)=>CT(n,i,a);return Object.assign(r,n),r},f3=(e,t)=>e?t_(e,t):t_;function it(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var h3=wC();const du=E.createContext(null),m3=du.Provider,TT=cr.error001();function $e(e,t){const n=E.useContext(du);if(n===null)throw new Error(TT);return CT(n,e,t)}function ct(){const e=E.useContext(du);if(e===null)throw new Error(TT);return E.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const n_={display:"none"},g3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},AT="react-flow__node-desc",PT="react-flow__edge-desc",y3="react-flow__aria-live",v3=e=>e.ariaLiveMessage,x3=e=>e.ariaLabelConfig;function b3({rfId:e}){const t=$e(v3);return s.jsx("div",{id:`${y3}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:g3,children:t})}function w3({rfId:e,disableKeyboardA11y:t}){const n=$e(x3);return s.jsxs(s.Fragment,{children:[s.jsx("div",{id:`${AT}-${e}`,style:n_,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),s.jsx("div",{id:`${PT}-${e}`,style:n_,children:n["edge.a11yDescription.default"]}),!t&&s.jsx(b3,{rfId:e})]})}const pu=E.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},a)=>{const c=`${e}`.split("-");return s.jsx("div",{className:St(["react-flow__panel",n,...c]),style:r,ref:a,...i,children:t})});pu.displayName="Panel";function _3({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:s.jsx(pu,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:s.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const k3=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},vc=e=>e.id;function S3(e,t){return it(e.selectedNodes.map(vc),t.selectedNodes.map(vc))&&it(e.selectedEdges.map(vc),t.selectedEdges.map(vc))}function N3({onSelectionChange:e}){const t=ct(),{selectedNodes:n,selectedEdges:r}=$e(k3,S3);return E.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(a=>a(i))},[n,r,e]),null}const j3=e=>!!e.onSelectionChangeHandlers;function E3({onSelectionChange:e}){const t=$e(j3);return e||t?s.jsx(N3,{onSelectionChange:e}):null}const IT=[0,0],C3={x:0,y:0,zoom:1},T3=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],r_=[...T3,"rfId"],A3=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),i_={translateExtent:Ma,nodeOrigin:IT,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function P3(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:c,reset:u,setDefaultNodesAndEdges:d}=$e(A3,it),p=ct();E.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{f.current=i_,u()}),[]);const f=E.useRef(i_);return E.useEffect(()=>{for(const m of r_){const g=e[m],v=f.current[m];g!==v&&(typeof e[m]>"u"||(m==="nodes"?t(g):m==="edges"?n(g):m==="minZoom"?r(g):m==="maxZoom"?i(g):m==="translateExtent"?a(g):m==="nodeExtent"?c(g):m==="ariaLabelConfig"?p.setState({ariaLabelConfig:mD(g)}):m==="fitView"?p.setState({fitViewQueued:g}):m==="fitViewOptions"?p.setState({fitViewOptions:g}):p.setState({[m]:g})))}f.current=e},r_.map(m=>e[m])),null}function o_(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function I3(e){const[t,n]=E.useState(e==="system"?null:e);return E.useEffect(()=>{if(e!=="system"){n(e);return}const r=o_(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:o_()?.matches?"dark":"light"}const s_=typeof document<"u"?document:null;function Fa(e=null,t={target:s_,actInsideInputWithModifier:!0}){const[n,r]=E.useState(!1),i=E.useRef(!1),a=E.useRef(new Set([])),[c,u]=E.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=p.reduce((m,g)=>m.concat(...g),[]);return[p,f]}return[[],[]]},[e]);return E.useEffect(()=>{const d=t?.target??s_,p=t?.actInsideInputWithModifier??!0;if(e!==null){const f=v=>{if(i.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!i.current||i.current&&!p)&&uT(v))return!1;const b=l_(v.code,u);if(a.current.add(v[b]),a_(c,a.current,!1)){const k=v.composedPath?.()?.[0]||v.target,_=k?.nodeName==="BUTTON"||k?.nodeName==="A";t.preventDefault!==!1&&(i.current||!_)&&v.preventDefault(),r(!0)}},m=v=>{const w=l_(v.code,u);a_(c,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(v[w]),v.key==="Meta"&&a.current.clear(),i.current=!1},g=()=>{a.current.clear(),r(!1)};return d?.addEventListener("keydown",f),d?.addEventListener("keyup",m),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{d?.removeEventListener("keydown",f),d?.removeEventListener("keyup",m),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function a_(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function l_(e,t){return t.includes(e)?"code":"key"}const R3=()=>{const e=ct();return E.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,a],panZoom:c}=e.getState();return c?(await c.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??a},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:a,maxZoom:c,panZoom:u}=e.getState(),d=nx(t,r,i,a,c,n?.padding??.1);return u?(await u.setViewport(d,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:a,domNode:c}=e.getState();if(!c)return t;const{x:u,y:d}=c.getBoundingClientRect(),p={x:t.x-u,y:t.y-d},f=n.snapGrid??i,m=n.snapToGrid??a;return Xa(p,r,m,f)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:a}=r.getBoundingClientRect(),c=Kc(t,n);return{x:c.x+i,y:c.y+a}}}),[])};function RT(e,t){const n=[],r=new Map,i=[];for(const a of e)if(a.type==="add"){i.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const c=r.get(a.id);c?c.push(a):r.set(a.id,[a])}for(const a of t){const c=r.get(a.id);if(!c){n.push(a);continue}if(c[0].type==="remove")continue;if(c[0].type==="replace"){n.push({...c[0].item});continue}const u={...a};for(const d of c)O3(d,u);n.push(u)}return i.length&&i.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function O3(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function OT(e,t){return RT(e,t)}function MT(e,t){return RT(e,t)}function Xi(e,t){return{id:e,type:"select",selected:t}}function Jo(e,t=new Set,n=!1){const r=[];for(const[i,a]of e){const c=t.has(i);!(a.selected===void 0&&!c)&&a.selected!==c&&(n&&(a.selected=c),r.push(Xi(a.id,c)))}return r}function c_({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,a]of e.entries()){const c=t.get(a.id),u=c?.internals?.userNode??c;u!==void 0&&u!==a&&n.push({id:a.id,item:a,type:"replace"}),u===void 0&&n.push({item:a,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function u_(e){return{id:e.id,type:"remove"}}const d_=e=>oD(e),M3=e=>nT(e);function LT(e){return E.forwardRef(e)}const L3=typeof window<"u"?E.useLayoutEffect:E.useEffect;function p_(e){const[t,n]=E.useState(BigInt(0)),[r]=E.useState(()=>D3(()=>n(i=>i+BigInt(1))));return L3(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function D3(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const DT=E.createContext(null);function q3({children:e}){const t=ct(),n=E.useCallback(u=>{const{nodes:d=[],setNodes:p,hasDefaultNodes:f,onNodesChange:m,nodeLookup:g,fitViewQueued:v,onNodesChangeMiddlewareMap:w}=t.getState();let b=d;for(const _ of u)b=typeof _=="function"?_(b):_;let k=c_({items:b,lookup:g});for(const _ of w.values())k=_(k);f&&p(b),k.length>0?m?.(k):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:_,nodes:N,setNodes:S}=t.getState();_&&S(N)})},[]),r=p_(n),i=E.useCallback(u=>{const{edges:d=[],setEdges:p,hasDefaultEdges:f,onEdgesChange:m,edgeLookup:g}=t.getState();let v=d;for(const w of u)v=typeof w=="function"?w(v):w;f?p(v):m&&m(c_({items:v,lookup:g}))},[]),a=p_(i),c=E.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return s.jsx(DT.Provider,{value:c,children:e})}function F3(){const e=E.useContext(DT);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const z3=e=>!!e.panZoom;function Qa(){const e=R3(),t=ct(),n=F3(),r=$e(z3),i=E.useMemo(()=>{const a=m=>t.getState().nodeLookup.get(m),c=m=>{n.nodeQueue.push(m)},u=m=>{n.edgeQueue.push(m)},d=m=>{const{nodeLookup:g,nodeOrigin:v}=t.getState(),w=d_(m)?m:g.get(m.id),b=w.parentId?lT(w.position,w.measured,w.parentId,g,v):w.position,k={...w,position:b,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return cs(k)},p=(m,g,v={replace:!1})=>{c(w=>w.map(b=>{if(b.id===m){const k=typeof g=="function"?g(b):g;return v.replace&&d_(k)?k:{...b,...k}}return b}))},f=(m,g,v={replace:!1})=>{u(w=>w.map(b=>{if(b.id===m){const k=typeof g=="function"?g(b):g;return v.replace&&M3(k)?k:{...b,...k}}return b}))};return{getNodes:()=>t.getState().nodes.map(m=>({...m})),getNode:m=>a(m)?.internals.userNode,getInternalNode:a,getEdges:()=>{const{edges:m=[]}=t.getState();return m.map(g=>({...g}))},getEdge:m=>t.getState().edgeLookup.get(m),setNodes:c,setEdges:u,addNodes:m=>{const g=Array.isArray(m)?m:[m];n.nodeQueue.push(v=>[...v,...g])},addEdges:m=>{const g=Array.isArray(m)?m:[m];n.edgeQueue.push(v=>[...v,...g])},toObject:()=>{const{nodes:m=[],edges:g=[],transform:v}=t.getState(),[w,b,k]=v;return{nodes:m.map(_=>({..._})),edges:g.map(_=>({..._})),viewport:{x:w,y:b,zoom:k}}},deleteElements:async({nodes:m=[],edges:g=[]})=>{const{nodes:v,edges:w,onNodesDelete:b,onEdgesDelete:k,triggerNodeChanges:_,triggerEdgeChanges:N,onDelete:S,onBeforeDelete:A}=t.getState(),{nodes:P,edges:T}=await uD({nodesToRemove:m,edgesToRemove:g,nodes:v,edges:w,onBeforeDelete:A}),C=T.length>0,z=P.length>0;if(C){const F=T.map(u_);k?.(T),N(F)}if(z){const F=P.map(u_);b?.(P),_(F)}return(z||C)&&S?.({nodes:P,edges:T}),{deletedNodes:P,deletedEdges:T}},getIntersectingNodes:(m,g=!0,v)=>{const w=D0(m),b=w?m:d(m),k=v!==void 0;return b?(v||t.getState().nodes).filter(_=>{const N=t.getState().nodeLookup.get(_.id);if(N&&!w&&(_.id===m.id||!N.internals.positionAbsolute))return!1;const S=cs(k?_:N),A=Da(S,b);return g&&A>0||A>=S.width*S.height||A>=b.width*b.height}):[]},isNodeIntersecting:(m,g,v=!0)=>{const b=D0(m)?m:d(m);if(!b)return!1;const k=Da(b,g);return v&&k>0||k>=g.width*g.height||k>=b.width*b.height},updateNode:p,updateNodeData:(m,g,v={replace:!1})=>{p(m,w=>{const b=typeof g=="function"?g(w):g;return v.replace?{...w,data:b}:{...w,data:{...w.data,...b}}},v)},updateEdge:f,updateEdgeData:(m,g,v={replace:!1})=>{f(m,w=>{const b=typeof g=="function"?g(w):g;return v.replace?{...w,data:b}:{...w,data:{...w.data,...b}}},v)},getNodesBounds:m=>{const{nodeLookup:g,nodeOrigin:v}=t.getState();return sD(m,{nodeLookup:g,nodeOrigin:v})},getHandleConnections:({type:m,id:g,nodeId:v})=>Array.from(t.getState().connectionLookup.get(`${v}-${m}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:m,handleId:g,nodeId:v})=>Array.from(t.getState().connectionLookup.get(`${v}${m?g?`-${m}-${g}`:`-${m}`:""}`)?.values()??[]),fitView:async m=>{const g=t.getState().fitViewResolver??hD();return t.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:g}),n.nodeQueue.push(v=>[...v]),g.promise}}},[]);return E.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const f_=e=>e.selected,B3=typeof window<"u"?window:void 0;function $3({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ct(),{deleteElements:r}=Qa(),i=Fa(e,{actInsideInputWithModifier:!1}),a=Fa(t,{target:B3});E.useEffect(()=>{if(i){const{edges:c,nodes:u}=n.getState();r({nodes:u.filter(f_),edges:c.filter(f_)}),n.setState({nodesSelectionActive:!1})}},[i]),E.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function H3(e){const t=ct();E.useEffect(()=>{const n=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const r=rx(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",cr.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const fu={position:"absolute",width:"100%",height:"100%",top:0,left:0},V3=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function U3({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:a=eo.Free,zoomOnDoubleClick:c=!0,panOnDrag:u=!0,defaultViewport:d,translateExtent:p,minZoom:f,maxZoom:m,zoomActivationKeyCode:g,preventScrolling:v=!0,children:w,noWheelClassName:b,noPanClassName:k,onViewportChange:_,isControlledViewport:N,paneClickDistance:S,selectionOnDrag:A}){const P=ct(),T=E.useRef(null),{userSelectionActive:C,lib:z,connectionInProgress:F}=$e(V3,it),V=Fa(g),L=E.useRef();H3(T);const q=E.useCallback(G=>{_?.({x:G[0],y:G[1],zoom:G[2]}),N||P.setState({transform:G})},[_,N]);return E.useEffect(()=>{if(T.current){L.current=QD({domNode:T.current,minZoom:f,maxZoom:m,translateExtent:p,viewport:d,onDraggingChange:H=>P.setState({paneDragging:H}),onPanZoomStart:(H,X)=>{const{onViewportChangeStart:$,onMoveStart:Y}=P.getState();Y?.(H,X),$?.(X)},onPanZoom:(H,X)=>{const{onViewportChange:$,onMove:Y}=P.getState();Y?.(H,X),$?.(X)},onPanZoomEnd:(H,X)=>{const{onViewportChangeEnd:$,onMoveEnd:Y}=P.getState();Y?.(H,X),$?.(X)}});const{x:G,y:R,zoom:M}=L.current.getViewport();return P.setState({panZoom:L.current,transform:[G,R,M],domNode:T.current.closest(".react-flow")}),()=>{L.current?.destroy()}}},[]),E.useEffect(()=>{L.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:a,zoomOnDoubleClick:c,panOnDrag:u,zoomActivationKeyPressed:V,preventScrolling:v,noPanClassName:k,userSelectionActive:C,noWheelClassName:b,lib:z,onTransformChange:q,connectionInProgress:F,selectionOnDrag:A,paneClickDistance:S})},[e,t,n,r,i,a,c,u,V,v,k,C,b,z,q,F,A,S]),s.jsx("div",{className:"react-flow__renderer",ref:T,style:fu,children:w})}const W3=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function K3(){const{userSelectionActive:e,userSelectionRect:t}=$e(W3,it);return e&&t?s.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Ep=(e,t)=>n=>{n.target===t.current&&e?.(n)},G3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Y3({isSelecting:e,selectionKeyPressed:t,selectionMode:n=La.Full,panOnDrag:r,paneClickDistance:i,selectionOnDrag:a,onSelectionStart:c,onSelectionEnd:u,onPaneClick:d,onPaneContextMenu:p,onPaneScroll:f,onPaneMouseEnter:m,onPaneMouseMove:g,onPaneMouseLeave:v,children:w}){const b=ct(),{userSelectionActive:k,elementsSelectable:_,dragging:N,connectionInProgress:S}=$e(G3,it),A=_&&(e||k),P=E.useRef(null),T=E.useRef(),C=E.useRef(new Set),z=E.useRef(new Set),F=E.useRef(!1),V=$=>{if(F.current||S){F.current=!1;return}d?.($),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},L=$=>{if(Array.isArray(r)&&r?.includes(2)){$.preventDefault();return}p?.($)},q=f?$=>f($):void 0,G=$=>{F.current&&($.stopPropagation(),F.current=!1)},R=$=>{const{domNode:Y}=b.getState();if(T.current=Y?.getBoundingClientRect(),!T.current)return;const I=$.target===P.current;if(!I&&!!$.target.closest(".nokey")||!e||!(a&&I||t)||$.button!==0||!$.isPrimary)return;$.target?.setPointerCapture?.($.pointerId),F.current=!1;const{x:D,y:U}=Un($.nativeEvent,T.current);b.setState({userSelectionRect:{width:0,height:0,startX:D,startY:U,x:D,y:U}}),I||($.stopPropagation(),$.preventDefault())},M=$=>{const{userSelectionRect:Y,transform:I,nodeLookup:B,edgeLookup:K,connectionLookup:D,triggerNodeChanges:U,triggerEdgeChanges:te,defaultEdgeOptions:Z,resetSelectedElements:ee}=b.getState();if(!T.current||!Y)return;const{x:Q,y:ae}=Un($.nativeEvent,T.current),{startX:pe,startY:ye}=Y;if(!F.current){const De=t?0:i;if(Math.hypot(Q-pe,ae-ye)<=De)return;ee(),c?.($)}F.current=!0;const Ne={startX:pe,startY:ye,x:Q<pe?Q:pe,y:ae<ye?ae:ye,width:Math.abs(Q-pe),height:Math.abs(ae-ye)},xe=C.current,Ae=z.current;C.current=new Set(tx(B,Ne,I,n===La.Partial,!0).map(De=>De.id)),z.current=new Set;const be=Z?.selectable??!0;for(const De of C.current){const Ce=D.get(De);if(Ce)for(const{edgeId:ot}of Ce.values()){const Ye=K.get(ot);Ye&&(Ye.selectable??be)&&z.current.add(ot)}}if(!q0(xe,C.current)){const De=Jo(B,C.current,!0);U(De)}if(!q0(Ae,z.current)){const De=Jo(K,z.current);te(De)}b.setState({userSelectionRect:Ne,userSelectionActive:!0,nodesSelectionActive:!1})},H=$=>{$.button===0&&($.target?.releasePointerCapture?.($.pointerId),!k&&$.target===P.current&&b.getState().userSelectionRect&&V?.($),b.setState({userSelectionActive:!1,userSelectionRect:null}),F.current&&(u?.($),b.setState({nodesSelectionActive:C.current.size>0})))},X=r===!0||Array.isArray(r)&&r.includes(0);return s.jsxs("div",{className:St(["react-flow__pane",{draggable:X,dragging:N,selection:e}]),onClick:A?void 0:Ep(V,P),onContextMenu:Ep(L,P),onWheel:Ep(q,P),onPointerEnter:A?void 0:m,onPointerMove:A?M:g,onPointerUp:A?H:void 0,onPointerDownCapture:A?R:void 0,onClickCapture:A?G:void 0,onPointerLeave:v,ref:P,style:fu,children:[w,s.jsx(K3,{})]})}function jv({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:a,multiSelectionActive:c,nodeLookup:u,onError:d}=t.getState(),p=u.get(e);if(!p){d?.("012",cr.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(a({nodes:[p],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function qT({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:a,nodeClickDistance:c}){const u=ct(),[d,p]=E.useState(!1),f=E.useRef();return E.useEffect(()=>{f.current=DD({getStoreItems:()=>u.getState(),onNodeMouseDown:m=>{jv({id:m,store:u,nodeRef:e})},onDragStart:()=>{p(!0)},onDragStop:()=>{p(!1)}})},[]),E.useEffect(()=>{if(t)f.current?.destroy();else if(e.current)return f.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:i,nodeClickDistance:c}),()=>{f.current?.destroy()}},[n,r,t,a,e,i]),d}const X3=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function FT(){const e=ct();return E.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:a,nodesDraggable:c,onError:u,updateNodePositions:d,nodeLookup:p,nodeOrigin:f}=e.getState(),m=new Map,g=X3(c),v=i?a[0]:5,w=i?a[1]:5,b=n.direction.x*v*n.factor,k=n.direction.y*w*n.factor;for(const[,_]of p){if(!g(_))continue;let N={x:_.internals.positionAbsolute.x+b,y:_.internals.positionAbsolute.y+k};i&&(N=Ya(N,a));const{position:S,positionAbsolute:A}=rT({nodeId:_.id,nextPosition:N,nodeLookup:p,nodeExtent:r,nodeOrigin:f,onError:u});_.position=S,_.internals.positionAbsolute=A,m.set(_.id,_)}d(m)},[])}const ux=E.createContext(null),Q3=ux.Provider;ux.Consumer;const zT=()=>E.useContext(ux),J3=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Z3=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:a,connection:c}=r,{fromHandle:u,toHandle:d,isValid:p}=c,f=d?.nodeId===e&&d?.id===t&&d?.type===n;return{connectingFrom:u?.nodeId===e&&u?.id===t&&u?.type===n,connectingTo:f,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:a===as.Strict?u?.type!==n:e!==u?.nodeId||t!==u?.id,connectionInProcess:!!u,clickConnectionInProcess:!!i,valid:f&&p}};function eq({type:e="source",position:t=Se.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:a=!0,id:c,onConnect:u,children:d,className:p,onMouseDown:f,onTouchStart:m,...g},v){const w=c||null,b=e==="target",k=ct(),_=zT(),{connectOnClick:N,noPanClassName:S,rfId:A}=$e(J3,it),{connectingFrom:P,connectingTo:T,clickConnecting:C,isPossibleEndHandle:z,connectionInProcess:F,clickConnectionInProcess:V,valid:L}=$e(Z3(_,w,e),it);_||k.getState().onError?.("010",cr.error010());const q=M=>{const{defaultEdgeOptions:H,onConnect:X,hasDefaultEdges:$}=k.getState(),Y={...H,...M};if($){const{edges:I,setEdges:B}=k.getState();B(wD(Y,I))}X?.(Y),u?.(Y)},G=M=>{if(!_)return;const H=dT(M.nativeEvent);if(i&&(H&&M.button===0||!H)){const X=k.getState();Nv.onPointerDown(M.nativeEvent,{handleDomNode:M.currentTarget,autoPanOnConnect:X.autoPanOnConnect,connectionMode:X.connectionMode,connectionRadius:X.connectionRadius,domNode:X.domNode,nodeLookup:X.nodeLookup,lib:X.lib,isTarget:b,handleId:w,nodeId:_,flowId:X.rfId,panBy:X.panBy,cancelConnection:X.cancelConnection,onConnectStart:X.onConnectStart,onConnectEnd:X.onConnectEnd,updateConnection:X.updateConnection,onConnect:q,isValidConnection:n||X.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:X.autoPanSpeed,dragThreshold:X.connectionDragThreshold})}H?f?.(M):m?.(M)},R=M=>{const{onClickConnectStart:H,onClickConnectEnd:X,connectionClickStartHandle:$,connectionMode:Y,isValidConnection:I,lib:B,rfId:K,nodeLookup:D,connection:U}=k.getState();if(!_||!$&&!i)return;if(!$){H?.(M.nativeEvent,{nodeId:_,handleId:w,handleType:e}),k.setState({connectionClickStartHandle:{nodeId:_,type:e,id:w}});return}const te=cT(M.target),Z=n||I,{connection:ee,isValid:Q}=Nv.isValid(M.nativeEvent,{handle:{nodeId:_,id:w,type:e},connectionMode:Y,fromNodeId:$.nodeId,fromHandleId:$.id||null,fromType:$.type,isValidConnection:Z,flowId:K,doc:te,lib:B,nodeLookup:D});Q&&ee&&q(ee);const ae=structuredClone(U);delete ae.inProgress,ae.toPosition=ae.toHandle?ae.toHandle.position:null,X?.(M,ae),k.setState({connectionClickStartHandle:null})};return s.jsx("div",{"data-handleid":w,"data-nodeid":_,"data-handlepos":t,"data-id":`${A}-${_}-${w}-${e}`,className:St(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,p,{source:!b,target:b,connectable:r,connectablestart:i,connectableend:a,clickconnecting:C,connectingfrom:P,connectingto:T,valid:L,connectionindicator:r&&(!F||z)&&(F||V?a:i)}]),onMouseDown:G,onTouchStart:G,onClick:N?R:void 0,ref:v,...g,children:d})}const sn=E.memo(LT(eq));function tq({data:e,isConnectable:t,sourcePosition:n=Se.Bottom}){return s.jsxs(s.Fragment,{children:[e?.label,s.jsx(sn,{type:"source",position:n,isConnectable:t})]})}function nq({data:e,isConnectable:t,targetPosition:n=Se.Top,sourcePosition:r=Se.Bottom}){return s.jsxs(s.Fragment,{children:[s.jsx(sn,{type:"target",position:n,isConnectable:t}),e?.label,s.jsx(sn,{type:"source",position:r,isConnectable:t})]})}function rq(){return null}function iq({data:e,isConnectable:t,targetPosition:n=Se.Top}){return s.jsxs(s.Fragment,{children:[s.jsx(sn,{type:"target",position:n,isConnectable:t}),e?.label]})}const Yc={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},h_={input:tq,default:nq,output:iq,group:rq};function oq(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const sq=e=>{const{width:t,height:n,x:r,y:i}=Ga(e.nodeLookup,{filter:a=>!!a.selected});return{width:Vn(t)?t:null,height:Vn(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function aq({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ct(),{width:i,height:a,transformString:c,userSelectionActive:u}=$e(sq,it),d=FT(),p=E.useRef(null);if(E.useEffect(()=>{n||p.current?.focus({preventScroll:!0})},[n]),qT({nodeRef:p}),u||!i||!a)return null;const f=e?g=>{const v=r.getState().nodes.filter(w=>w.selected);e(g,v)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(Yc,g.key)&&(g.preventDefault(),d({direction:Yc[g.key],factor:g.shiftKey?4:1}))};return s.jsx("div",{className:St(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c},children:s.jsx("div",{ref:p,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:i,height:a}})})}const m_=typeof window<"u"?window:void 0,lq=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function BT({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:c,paneClickDistance:u,deleteKeyCode:d,selectionKeyCode:p,selectionOnDrag:f,selectionMode:m,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:w,panActivationKeyCode:b,zoomActivationKeyCode:k,elementsSelectable:_,zoomOnScroll:N,zoomOnPinch:S,panOnScroll:A,panOnScrollSpeed:P,panOnScrollMode:T,zoomOnDoubleClick:C,panOnDrag:z,defaultViewport:F,translateExtent:V,minZoom:L,maxZoom:q,preventScrolling:G,onSelectionContextMenu:R,noWheelClassName:M,noPanClassName:H,disableKeyboardA11y:X,onViewportChange:$,isControlledViewport:Y}){const{nodesSelectionActive:I,userSelectionActive:B}=$e(lq,it),K=Fa(p,{target:m_}),D=Fa(b,{target:m_}),U=D||z,te=D||A,Z=f&&U!==!0,ee=K||B||Z;return $3({deleteKeyCode:d,multiSelectionKeyCode:w}),s.jsx(U3,{onPaneContextMenu:a,elementsSelectable:_,zoomOnScroll:N,zoomOnPinch:S,panOnScroll:te,panOnScrollSpeed:P,panOnScrollMode:T,zoomOnDoubleClick:C,panOnDrag:!K&&U,defaultViewport:F,translateExtent:V,minZoom:L,maxZoom:q,zoomActivationKeyCode:k,preventScrolling:G,noWheelClassName:M,noPanClassName:H,onViewportChange:$,isControlledViewport:Y,paneClickDistance:u,selectionOnDrag:Z,children:s.jsxs(Y3,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:c,panOnDrag:U,isSelecting:!!ee,selectionMode:m,selectionKeyPressed:K,paneClickDistance:u,selectionOnDrag:Z,children:[e,I&&s.jsx(aq,{onSelectionContextMenu:R,noPanClassName:H,disableKeyboardA11y:X})]})})}BT.displayName="FlowRenderer";const cq=E.memo(BT),uq=e=>t=>e?tx(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function dq(e){return $e(E.useCallback(uq(e),[e]),it)}const pq=e=>e.updateNodeInternals;function fq(){const e=$e(pq),[t]=E.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const a=i.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:i.target,force:!0})}),e(r)}));return E.useEffect(()=>()=>{t?.disconnect()},[t]),t}function hq({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=ct(),a=E.useRef(null),c=E.useRef(null),u=E.useRef(e.sourcePosition),d=E.useRef(e.targetPosition),p=E.useRef(t),f=n&&!!e.internals.handleBounds;return E.useEffect(()=>{a.current&&!e.hidden&&(!f||c.current!==a.current)&&(c.current&&r?.unobserve(c.current),r?.observe(a.current),c.current=a.current)},[f,e.hidden]),E.useEffect(()=>()=>{c.current&&(r?.unobserve(c.current),c.current=null)},[]),E.useEffect(()=>{if(a.current){const m=p.current!==t,g=u.current!==e.sourcePosition,v=d.current!==e.targetPosition;(m||g||v)&&(p.current=t,u.current=e.sourcePosition,d.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function mq({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:a,onDoubleClick:c,nodesDraggable:u,elementsSelectable:d,nodesConnectable:p,nodesFocusable:f,resizeObserver:m,noDragClassName:g,noPanClassName:v,disableKeyboardA11y:w,rfId:b,nodeTypes:k,nodeClickDistance:_,onError:N}){const{node:S,internals:A,isParent:P}=$e(Q=>{const ae=Q.nodeLookup.get(e),pe=Q.parentLookup.has(e);return{node:ae,internals:ae.internals,isParent:pe}},it);let T=S.type||"default",C=k?.[T]||h_[T];C===void 0&&(N?.("003",cr.error003(T)),T="default",C=k?.default||h_.default);const z=!!(S.draggable||u&&typeof S.draggable>"u"),F=!!(S.selectable||d&&typeof S.selectable>"u"),V=!!(S.connectable||p&&typeof S.connectable>"u"),L=!!(S.focusable||f&&typeof S.focusable>"u"),q=ct(),G=aT(S),R=hq({node:S,nodeType:T,hasDimensions:G,resizeObserver:m}),M=qT({nodeRef:R,disabled:S.hidden||!z,noDragClassName:g,handleSelector:S.dragHandle,nodeId:e,isSelectable:F,nodeClickDistance:_}),H=FT();if(S.hidden)return null;const X=Mr(S),$=oq(S),Y=F||z||t||n||r||i,I=n?Q=>n(Q,{...A.userNode}):void 0,B=r?Q=>r(Q,{...A.userNode}):void 0,K=i?Q=>i(Q,{...A.userNode}):void 0,D=a?Q=>a(Q,{...A.userNode}):void 0,U=c?Q=>c(Q,{...A.userNode}):void 0,te=Q=>{const{selectNodesOnDrag:ae,nodeDragThreshold:pe}=q.getState();F&&(!ae||!z||pe>0)&&jv({id:e,store:q,nodeRef:R}),t&&t(Q,{...A.userNode})},Z=Q=>{if(!(uT(Q.nativeEvent)||w)){if(JC.includes(Q.key)&&F){const ae=Q.key==="Escape";jv({id:e,store:q,unselect:ae,nodeRef:R})}else if(z&&S.selected&&Object.prototype.hasOwnProperty.call(Yc,Q.key)){Q.preventDefault();const{ariaLabelConfig:ae}=q.getState();q.setState({ariaLiveMessage:ae["node.a11yDescription.ariaLiveMessage"]({direction:Q.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),H({direction:Yc[Q.key],factor:Q.shiftKey?4:1})}}},ee=()=>{if(w||!R.current?.matches(":focus-visible"))return;const{transform:Q,width:ae,height:pe,autoPanOnNodeFocus:ye,setCenter:Ne}=q.getState();if(!ye)return;tx(new Map([[e,S]]),{x:0,y:0,width:ae,height:pe},Q,!0).length>0||Ne(S.position.x+X.width/2,S.position.y+X.height/2,{zoom:Q[2]})};return s.jsx("div",{className:St(["react-flow__node",`react-flow__node-${T}`,{[v]:z},S.className,{selected:S.selected,selectable:F,parent:P,draggable:z,dragging:M}]),ref:R,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:Y?"all":"none",visibility:G?"visible":"hidden",...S.style,...$},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:I,onMouseMove:B,onMouseLeave:K,onContextMenu:D,onClick:te,onDoubleClick:U,onKeyDown:L?Z:void 0,tabIndex:L?0:void 0,onFocus:L?ee:void 0,role:S.ariaRole??(L?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${AT}-${b}`,"aria-label":S.ariaLabel,...S.domAttributes,children:s.jsx(Q3,{value:e,children:s.jsx(C,{id:e,data:S.data,type:T,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:S.selected??!1,selectable:F,draggable:z,deletable:S.deletable??!0,isConnectable:V,sourcePosition:S.sourcePosition,targetPosition:S.targetPosition,dragging:M,dragHandle:S.dragHandle,zIndex:A.z,parentId:S.parentId,...X})})})}var gq=E.memo(mq);const yq=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function $T(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:a}=$e(yq,it),c=dq(e.onlyRenderVisibleElements),u=fq();return s.jsx("div",{className:"react-flow__nodes",style:fu,children:c.map(d=>s.jsx(gq,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},d))})}$T.displayName="NodeRenderer";const vq=E.memo($T);function xq(e){return $e(E.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const a=n.nodeLookup.get(i.source),c=n.nodeLookup.get(i.target);a&&c&&vD({sourceNode:a,targetNode:c,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),it)}const bq=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return s.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},wq=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return s.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},g_={[Uc.Arrow]:bq,[Uc.ArrowClosed]:wq};function _q(e){const t=ct();return E.useMemo(()=>Object.prototype.hasOwnProperty.call(g_,e)?g_[e]:(t.getState().onError?.("009",cr.error009(e)),null),[e])}const kq=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:a="strokeWidth",strokeWidth:c,orient:u="auto-start-reverse"})=>{const d=_q(t);return d?s.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:u,refX:"0",refY:"0",children:s.jsx(d,{color:n,strokeWidth:c})}):null},HT=({defaultColor:e,rfId:t})=>{const n=$e(a=>a.edges),r=$e(a=>a.defaultEdgeOptions),i=E.useMemo(()=>jD(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?s.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:s.jsx("defs",{children:i.map(a=>s.jsx(kq,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};HT.displayName="MarkerDefinitions";var Sq=E.memo(HT);function VT({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:a,labelBgPadding:c=[2,4],labelBgBorderRadius:u=2,children:d,className:p,...f}){const[m,g]=E.useState({x:1,y:0,width:0,height:0}),v=St(["react-flow__edge-textwrapper",p]),w=E.useRef(null);return E.useEffect(()=>{if(w.current){const b=w.current.getBBox();g({x:b.x,y:b.y,width:b.width,height:b.height})}},[n]),n?s.jsxs("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:v,visibility:m.width?"visible":"hidden",...f,children:[i&&s.jsx("rect",{width:m.width+2*c[0],x:-c[0],y:-c[1],height:m.height+2*c[1],className:"react-flow__edge-textbg",style:a,rx:u,ry:u}),s.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:w,style:r,children:n}),d]}):null}VT.displayName="EdgeText";const Nq=E.memo(VT);function hu({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,interactionWidth:p=20,...f}){return s.jsxs(s.Fragment,{children:[s.jsx("path",{...f,d:e,fill:"none",className:St(["react-flow__edge-path",f.className])}),p?s.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}):null,r&&Vn(t)&&Vn(n)?s.jsx(Nq,{x:t,y:n,label:r,labelStyle:i,labelShowBg:a,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d}):null]})}function y_({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Se.Left||e===Se.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function UT({sourceX:e,sourceY:t,sourcePosition:n=Se.Bottom,targetX:r,targetY:i,targetPosition:a=Se.Top}){const[c,u]=y_({pos:n,x1:e,y1:t,x2:r,y2:i}),[d,p]=y_({pos:a,x1:r,y1:i,x2:e,y2:t}),[f,m,g,v]=pT({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:c,sourceControlY:u,targetControlX:d,targetControlY:p});return[`M${e},${t} C${c},${u} ${d},${p} ${r},${i}`,f,m,g,v]}function WT(e){return E.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:c,targetPosition:u,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,style:w,markerEnd:b,markerStart:k,interactionWidth:_})=>{const[N,S,A]=UT({sourceX:n,sourceY:r,sourcePosition:c,targetX:i,targetY:a,targetPosition:u}),P=e.isInternal?void 0:t;return s.jsx(hu,{id:P,path:N,labelX:S,labelY:A,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,style:w,markerEnd:b,markerStart:k,interactionWidth:_})})}const jq=WT({isInternal:!1}),KT=WT({isInternal:!0});jq.displayName="SimpleBezierEdge";KT.displayName="SimpleBezierEdgeInternal";function GT(e){return E.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,sourcePosition:v=Se.Bottom,targetPosition:w=Se.Top,markerEnd:b,markerStart:k,pathOptions:_,interactionWidth:N})=>{const[S,A,P]=Gc({sourceX:n,sourceY:r,sourcePosition:v,targetX:i,targetY:a,targetPosition:w,borderRadius:_?.borderRadius,offset:_?.offset,stepPosition:_?.stepPosition}),T=e.isInternal?void 0:t;return s.jsx(hu,{id:T,path:S,labelX:A,labelY:P,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,markerEnd:b,markerStart:k,interactionWidth:N})})}const YT=GT({isInternal:!1}),XT=GT({isInternal:!0});YT.displayName="SmoothStepEdge";XT.displayName="SmoothStepEdgeInternal";function QT(e){return E.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return s.jsx(YT,{...n,id:r,pathOptions:E.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Eq=QT({isInternal:!1}),JT=QT({isInternal:!0});Eq.displayName="StepEdge";JT.displayName="StepEdgeInternal";function ZT(e){return E.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,markerEnd:v,markerStart:w,interactionWidth:b})=>{const[k,_,N]=hT({sourceX:n,sourceY:r,targetX:i,targetY:a}),S=e.isInternal?void 0:t;return s.jsx(hu,{id:S,path:k,labelX:_,labelY:N,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:p,labelBgPadding:f,labelBgBorderRadius:m,style:g,markerEnd:v,markerStart:w,interactionWidth:b})})}const Cq=ZT({isInternal:!1}),eA=ZT({isInternal:!0});Cq.displayName="StraightEdge";eA.displayName="StraightEdgeInternal";function tA(e){return E.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:c=Se.Bottom,targetPosition:u=Se.Top,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,style:w,markerEnd:b,markerStart:k,pathOptions:_,interactionWidth:N})=>{const[S,A,P]=ix({sourceX:n,sourceY:r,sourcePosition:c,targetX:i,targetY:a,targetPosition:u,curvature:_?.curvature}),T=e.isInternal?void 0:t;return s.jsx(hu,{id:T,path:S,labelX:A,labelY:P,label:d,labelStyle:p,labelShowBg:f,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:v,style:w,markerEnd:b,markerStart:k,interactionWidth:N})})}const Tq=tA({isInternal:!1}),nA=tA({isInternal:!0});Tq.displayName="BezierEdge";nA.displayName="BezierEdgeInternal";const v_={default:nA,straight:eA,step:JT,smoothstep:XT,simplebezier:KT},x_={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Aq=(e,t,n)=>n===Se.Left?e-t:n===Se.Right?e+t:e,Pq=(e,t,n)=>n===Se.Top?e-t:n===Se.Bottom?e+t:e,b_="react-flow__edgeupdater";function w_({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:c,type:u}){return s.jsx("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:c,className:St([b_,`${b_}-${u}`]),cx:Aq(t,r,e),cy:Pq(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Iq({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:a,targetY:c,sourcePosition:u,targetPosition:d,onReconnect:p,onReconnectStart:f,onReconnectEnd:m,setReconnecting:g,setUpdateHover:v}){const w=ct(),b=(A,P)=>{if(A.button!==0)return;const{autoPanOnConnect:T,domNode:C,isValidConnection:z,connectionMode:F,connectionRadius:V,lib:L,onConnectStart:q,onConnectEnd:G,cancelConnection:R,nodeLookup:M,rfId:H,panBy:X,updateConnection:$}=w.getState(),Y=P.type==="target",I=(D,U)=>{g(!1),m?.(D,n,P.type,U)},B=D=>p?.(n,D),K=(D,U)=>{g(!0),f?.(A,n,P.type),q?.(D,U)};Nv.onPointerDown(A.nativeEvent,{autoPanOnConnect:T,connectionMode:F,connectionRadius:V,domNode:C,handleId:P.id,nodeId:P.nodeId,nodeLookup:M,isTarget:Y,edgeUpdaterType:P.type,lib:L,flowId:H,cancelConnection:R,panBy:X,isValidConnection:z,onConnect:B,onConnectStart:K,onConnectEnd:G,onReconnectEnd:I,updateConnection:$,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:A.currentTarget})},k=A=>b(A,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),_=A=>b(A,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>v(!0),S=()=>v(!1);return s.jsxs(s.Fragment,{children:[(e===!0||e==="source")&&s.jsx(w_,{position:u,centerX:r,centerY:i,radius:t,onMouseDown:k,onMouseEnter:N,onMouseOut:S,type:"source"}),(e===!0||e==="target")&&s.jsx(w_,{position:d,centerX:a,centerY:c,radius:t,onMouseDown:_,onMouseEnter:N,onMouseOut:S,type:"target"})]})}function Rq({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:a,onContextMenu:c,onMouseEnter:u,onMouseMove:d,onMouseLeave:p,reconnectRadius:f,onReconnect:m,onReconnectStart:g,onReconnectEnd:v,rfId:w,edgeTypes:b,noPanClassName:k,onError:_,disableKeyboardA11y:N}){let S=$e(Ne=>Ne.edgeLookup.get(e));const A=$e(Ne=>Ne.defaultEdgeOptions);S=A?{...A,...S}:S;let P=S.type||"default",T=b?.[P]||v_[P];T===void 0&&(_?.("011",cr.error011(P)),P="default",T=b?.default||v_.default);const C=!!(S.focusable||t&&typeof S.focusable>"u"),z=typeof m<"u"&&(S.reconnectable||n&&typeof S.reconnectable>"u"),F=!!(S.selectable||r&&typeof S.selectable>"u"),V=E.useRef(null),[L,q]=E.useState(!1),[G,R]=E.useState(!1),M=ct(),{zIndex:H,sourceX:X,sourceY:$,targetX:Y,targetY:I,sourcePosition:B,targetPosition:K}=$e(E.useCallback(Ne=>{const xe=Ne.nodeLookup.get(S.source),Ae=Ne.nodeLookup.get(S.target);if(!xe||!Ae)return{zIndex:S.zIndex,...x_};const be=ND({id:e,sourceNode:xe,targetNode:Ae,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:Ne.connectionMode,onError:_});return{zIndex:yD({selected:S.selected,zIndex:S.zIndex,sourceNode:xe,targetNode:Ae,elevateOnSelect:Ne.elevateEdgesOnSelect,zIndexMode:Ne.zIndexMode}),...be||x_}},[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),it),D=E.useMemo(()=>S.markerStart?`url('#${kv(S.markerStart,w)}')`:void 0,[S.markerStart,w]),U=E.useMemo(()=>S.markerEnd?`url('#${kv(S.markerEnd,w)}')`:void 0,[S.markerEnd,w]);if(S.hidden||X===null||$===null||Y===null||I===null)return null;const te=Ne=>{const{addSelectedEdges:xe,unselectNodesAndEdges:Ae,multiSelectionActive:be}=M.getState();F&&(M.setState({nodesSelectionActive:!1}),S.selected&&be?(Ae({nodes:[],edges:[S]}),V.current?.blur()):xe([e])),i&&i(Ne,S)},Z=a?Ne=>{a(Ne,{...S})}:void 0,ee=c?Ne=>{c(Ne,{...S})}:void 0,Q=u?Ne=>{u(Ne,{...S})}:void 0,ae=d?Ne=>{d(Ne,{...S})}:void 0,pe=p?Ne=>{p(Ne,{...S})}:void 0,ye=Ne=>{if(!N&&JC.includes(Ne.key)&&F){const{unselectNodesAndEdges:xe,addSelectedEdges:Ae}=M.getState();Ne.key==="Escape"?(V.current?.blur(),xe({edges:[S]})):Ae([e])}};return s.jsx("svg",{style:{zIndex:H},children:s.jsxs("g",{className:St(["react-flow__edge",`react-flow__edge-${P}`,S.className,k,{selected:S.selected,animated:S.animated,inactive:!F&&!i,updating:L,selectable:F}]),onClick:te,onDoubleClick:Z,onContextMenu:ee,onMouseEnter:Q,onMouseMove:ae,onMouseLeave:pe,onKeyDown:C?ye:void 0,tabIndex:C?0:void 0,role:S.ariaRole??(C?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":S.ariaLabel===null?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":C?`${PT}-${w}`:void 0,ref:V,...S.domAttributes,children:[!G&&s.jsx(T,{id:e,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:F,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:X,sourceY:$,targetX:Y,targetY:I,sourcePosition:B,targetPosition:K,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:D,markerEnd:U,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),z&&s.jsx(Iq,{edge:S,isReconnectable:z,reconnectRadius:f,onReconnect:m,onReconnectStart:g,onReconnectEnd:v,sourceX:X,sourceY:$,targetX:Y,targetY:I,sourcePosition:B,targetPosition:K,setUpdateHover:q,setReconnecting:R})]})})}var Oq=E.memo(Rq);const Mq=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function rA({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:a,onEdgeContextMenu:c,onEdgeMouseEnter:u,onEdgeMouseMove:d,onEdgeMouseLeave:p,onEdgeClick:f,reconnectRadius:m,onEdgeDoubleClick:g,onReconnectStart:v,onReconnectEnd:w,disableKeyboardA11y:b}){const{edgesFocusable:k,edgesReconnectable:_,elementsSelectable:N,onError:S}=$e(Mq,it),A=xq(t);return s.jsxs("div",{className:"react-flow__edges",children:[s.jsx(Sq,{defaultColor:e,rfId:n}),A.map(P=>s.jsx(Oq,{id:P,edgesFocusable:k,edgesReconnectable:_,elementsSelectable:N,noPanClassName:i,onReconnect:a,onContextMenu:c,onMouseEnter:u,onMouseMove:d,onMouseLeave:p,onClick:f,reconnectRadius:m,onDoubleClick:g,onReconnectStart:v,onReconnectEnd:w,rfId:n,onError:S,edgeTypes:r,disableKeyboardA11y:b},P))]})}rA.displayName="EdgeRenderer";const Lq=E.memo(rA),Dq=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function qq({children:e}){const t=$e(Dq);return s.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Fq(e){const t=Qa(),n=E.useRef(!1);E.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const zq=e=>e.panZoom?.syncViewport;function Bq(e){const t=$e(zq),n=ct();return E.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function $q(e){return e.connection.inProgress?{...e.connection,to:Xa(e.connection.to,e.transform)}:{...e.connection}}function Hq(e){return $q}function Vq(e){const t=Hq();return $e(t,it)}const Uq=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Wq({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:a,height:c,isValid:u,inProgress:d}=$e(Uq,it);return!(a&&i&&d)?null:s.jsx("svg",{style:e,width:a,height:c,className:"react-flow__connectionline react-flow__container",children:s.jsx("g",{className:St(["react-flow__connection",tT(u)]),children:s.jsx(iA,{style:t,type:n,CustomComponent:r,isValid:u})})})}const iA=({style:e,type:t=hi.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:a,fromNode:c,fromHandle:u,fromPosition:d,to:p,toNode:f,toHandle:m,toPosition:g,pointer:v}=Vq();if(!i)return;if(n)return s.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:c,fromHandle:u,fromX:a.x,fromY:a.y,toX:p.x,toY:p.y,fromPosition:d,toPosition:g,connectionStatus:tT(r),toNode:f,toHandle:m,pointer:v});let w="";const b={sourceX:a.x,sourceY:a.y,sourcePosition:d,targetX:p.x,targetY:p.y,targetPosition:g};switch(t){case hi.Bezier:[w]=ix(b);break;case hi.SimpleBezier:[w]=UT(b);break;case hi.Step:[w]=Gc({...b,borderRadius:0});break;case hi.SmoothStep:[w]=Gc(b);break;default:[w]=hT(b)}return s.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};iA.displayName="ConnectionLine";const Kq={};function __(e=Kq){E.useRef(e),ct(),E.useEffect(()=>{},[e])}function Gq(){ct(),E.useRef(!1),E.useEffect(()=>{},[])}function oA({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:a,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:f,onSelectionContextMenu:m,onSelectionStart:g,onSelectionEnd:v,connectionLineType:w,connectionLineStyle:b,connectionLineComponent:k,connectionLineContainerStyle:_,selectionKeyCode:N,selectionOnDrag:S,selectionMode:A,multiSelectionKeyCode:P,panActivationKeyCode:T,zoomActivationKeyCode:C,deleteKeyCode:z,onlyRenderVisibleElements:F,elementsSelectable:V,defaultViewport:L,translateExtent:q,minZoom:G,maxZoom:R,preventScrolling:M,defaultMarkerColor:H,zoomOnScroll:X,zoomOnPinch:$,panOnScroll:Y,panOnScrollSpeed:I,panOnScrollMode:B,zoomOnDoubleClick:K,panOnDrag:D,onPaneClick:U,onPaneMouseEnter:te,onPaneMouseMove:Z,onPaneMouseLeave:ee,onPaneScroll:Q,onPaneContextMenu:ae,paneClickDistance:pe,nodeClickDistance:ye,onEdgeContextMenu:Ne,onEdgeMouseEnter:xe,onEdgeMouseMove:Ae,onEdgeMouseLeave:be,reconnectRadius:De,onReconnect:Ce,onReconnectStart:ot,onReconnectEnd:Ye,noDragClassName:dt,noWheelClassName:pt,noPanClassName:Be,disableKeyboardA11y:Ve,nodeExtent:yt,rfId:ge,viewport:oe,onViewportChange:de}){return __(e),__(t),Gq(),Fq(n),Bq(oe),s.jsx(cq,{onPaneClick:U,onPaneMouseEnter:te,onPaneMouseMove:Z,onPaneMouseLeave:ee,onPaneContextMenu:ae,onPaneScroll:Q,paneClickDistance:pe,deleteKeyCode:z,selectionKeyCode:N,selectionOnDrag:S,selectionMode:A,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:P,panActivationKeyCode:T,zoomActivationKeyCode:C,elementsSelectable:V,zoomOnScroll:X,zoomOnPinch:$,zoomOnDoubleClick:K,panOnScroll:Y,panOnScrollSpeed:I,panOnScrollMode:B,panOnDrag:D,defaultViewport:L,translateExtent:q,minZoom:G,maxZoom:R,onSelectionContextMenu:m,preventScrolling:M,noDragClassName:dt,noWheelClassName:pt,noPanClassName:Be,disableKeyboardA11y:Ve,onViewportChange:de,isControlledViewport:!!oe,children:s.jsxs(qq,{children:[s.jsx(Lq,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:c,onReconnect:Ce,onReconnectStart:ot,onReconnectEnd:Ye,onlyRenderVisibleElements:F,onEdgeContextMenu:Ne,onEdgeMouseEnter:xe,onEdgeMouseMove:Ae,onEdgeMouseLeave:be,reconnectRadius:De,defaultMarkerColor:H,noPanClassName:Be,disableKeyboardA11y:Ve,rfId:ge}),s.jsx(Wq,{style:b,type:w,component:k,containerStyle:_}),s.jsx("div",{className:"react-flow__edgelabel-renderer"}),s.jsx(vq,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:u,onNodeMouseMove:d,onNodeMouseLeave:p,onNodeContextMenu:f,nodeClickDistance:ye,onlyRenderVisibleElements:F,noPanClassName:Be,noDragClassName:dt,disableKeyboardA11y:Ve,nodeExtent:yt,rfId:ge}),s.jsx("div",{className:"react-flow__viewport-portal"})]})})}oA.displayName="GraphView";const Yq=E.memo(oA),k_=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:c,fitViewOptions:u,minZoom:d=.5,maxZoom:p=2,nodeOrigin:f,nodeExtent:m,zIndexMode:g="basic"}={})=>{const v=new Map,w=new Map,b=new Map,k=new Map,_=r??t??[],N=n??e??[],S=f??[0,0],A=m??Ma;yT(b,k,_);const P=Sv(N,v,w,{nodeOrigin:S,nodeExtent:A,zIndexMode:g});let T=[0,0,1];if(c&&i&&a){const C=Ga(v,{filter:L=>!!((L.width||L.initialWidth)&&(L.height||L.initialHeight))}),{x:z,y:F,zoom:V}=nx(C,i,a,d,p,u?.padding??.1);T=[z,F,V]}return{rfId:"1",width:i??0,height:a??0,transform:T,nodes:N,nodesInitialized:P,nodeLookup:v,parentLookup:w,edges:_,edgeLookup:k,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:d,maxZoom:p,translateExtent:Ma,nodeExtent:A,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:as.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:c??!1,fitViewOptions:u,fitViewResolver:null,connection:{...eT},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:dD,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:ZC,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},Xq=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:c,fitViewOptions:u,minZoom:d,maxZoom:p,nodeOrigin:f,nodeExtent:m,zIndexMode:g})=>f3((v,w)=>{async function b(){const{nodeLookup:k,panZoom:_,fitViewOptions:N,fitViewResolver:S,width:A,height:P,minZoom:T,maxZoom:C}=w();_&&(await cD({nodes:k,width:A,height:P,panZoom:_,minZoom:T,maxZoom:C},N),S?.resolve(!0),v({fitViewResolver:null}))}return{...k_({nodes:e,edges:t,width:i,height:a,fitView:c,fitViewOptions:u,minZoom:d,maxZoom:p,nodeOrigin:f,nodeExtent:m,defaultNodes:n,defaultEdges:r,zIndexMode:g}),setNodes:k=>{const{nodeLookup:_,parentLookup:N,nodeOrigin:S,elevateNodesOnSelect:A,fitViewQueued:P,zIndexMode:T}=w(),C=Sv(k,_,N,{nodeOrigin:S,nodeExtent:m,elevateNodesOnSelect:A,checkEquality:!0,zIndexMode:T});P&&C?(b(),v({nodes:k,nodesInitialized:C,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:k,nodesInitialized:C})},setEdges:k=>{const{connectionLookup:_,edgeLookup:N}=w();yT(_,N,k),v({edges:k})},setDefaultNodesAndEdges:(k,_)=>{if(k){const{setNodes:N}=w();N(k),v({hasDefaultNodes:!0})}if(_){const{setEdges:N}=w();N(_),v({hasDefaultEdges:!0})}},updateNodeInternals:k=>{const{triggerNodeChanges:_,nodeLookup:N,parentLookup:S,domNode:A,nodeOrigin:P,nodeExtent:T,debug:C,fitViewQueued:z,zIndexMode:F}=w(),{changes:V,updatedInternals:L}=RD(k,N,S,A,P,T,F);L&&(TD(N,S,{nodeOrigin:P,nodeExtent:T,zIndexMode:F}),z?(b(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),V?.length>0&&(C&&console.log("React Flow: trigger node changes",V),_?.(V)))},updateNodePositions:(k,_=!1)=>{const N=[];let S=[];const{nodeLookup:A,triggerNodeChanges:P,connection:T,updateConnection:C,onNodesChangeMiddlewareMap:z}=w();for(const[F,V]of k){const L=A.get(F),q=!!(L?.expandParent&&L?.parentId&&V?.position),G={id:F,type:"position",position:q?{x:Math.max(0,V.position.x),y:Math.max(0,V.position.y)}:V.position,dragging:_};if(L&&T.inProgress&&T.fromNode.id===L.id){const R=io(L,T.fromHandle,Se.Left,!0);C({...T,from:R})}q&&L.parentId&&N.push({id:F,parentId:L.parentId,rect:{...V.internals.positionAbsolute,width:V.measured.width??0,height:V.measured.height??0}}),S.push(G)}if(N.length>0){const{parentLookup:F,nodeOrigin:V}=w(),L=cx(N,A,F,V);S.push(...L)}for(const F of z.values())S=F(S);P(S)},triggerNodeChanges:k=>{const{onNodesChange:_,setNodes:N,nodes:S,hasDefaultNodes:A,debug:P}=w();if(k?.length){if(A){const T=OT(k,S);N(T)}P&&console.log("React Flow: trigger node changes",k),_?.(k)}},triggerEdgeChanges:k=>{const{onEdgesChange:_,setEdges:N,edges:S,hasDefaultEdges:A,debug:P}=w();if(k?.length){if(A){const T=MT(k,S);N(T)}P&&console.log("React Flow: trigger edge changes",k),_?.(k)}},addSelectedNodes:k=>{const{multiSelectionActive:_,edgeLookup:N,nodeLookup:S,triggerNodeChanges:A,triggerEdgeChanges:P}=w();if(_){const T=k.map(C=>Xi(C,!0));A(T);return}A(Jo(S,new Set([...k]),!0)),P(Jo(N))},addSelectedEdges:k=>{const{multiSelectionActive:_,edgeLookup:N,nodeLookup:S,triggerNodeChanges:A,triggerEdgeChanges:P}=w();if(_){const T=k.map(C=>Xi(C,!0));P(T);return}P(Jo(N,new Set([...k]))),A(Jo(S,new Set,!0))},unselectNodesAndEdges:({nodes:k,edges:_}={})=>{const{edges:N,nodes:S,nodeLookup:A,triggerNodeChanges:P,triggerEdgeChanges:T}=w(),C=k||S,z=_||N,F=C.map(L=>{const q=A.get(L.id);return q&&(q.selected=!1),Xi(L.id,!1)}),V=z.map(L=>Xi(L.id,!1));P(F),T(V)},setMinZoom:k=>{const{panZoom:_,maxZoom:N}=w();_?.setScaleExtent([k,N]),v({minZoom:k})},setMaxZoom:k=>{const{panZoom:_,minZoom:N}=w();_?.setScaleExtent([N,k]),v({maxZoom:k})},setTranslateExtent:k=>{w().panZoom?.setTranslateExtent(k),v({translateExtent:k})},resetSelectedElements:()=>{const{edges:k,nodes:_,triggerNodeChanges:N,triggerEdgeChanges:S,elementsSelectable:A}=w();if(!A)return;const P=_.reduce((C,z)=>z.selected?[...C,Xi(z.id,!1)]:C,[]),T=k.reduce((C,z)=>z.selected?[...C,Xi(z.id,!1)]:C,[]);N(P),S(T)},setNodeExtent:k=>{const{nodes:_,nodeLookup:N,parentLookup:S,nodeOrigin:A,elevateNodesOnSelect:P,nodeExtent:T,zIndexMode:C}=w();k[0][0]===T[0][0]&&k[0][1]===T[0][1]&&k[1][0]===T[1][0]&&k[1][1]===T[1][1]||(Sv(_,N,S,{nodeOrigin:A,nodeExtent:k,elevateNodesOnSelect:P,checkEquality:!1,zIndexMode:C}),v({nodeExtent:k}))},panBy:k=>{const{transform:_,width:N,height:S,panZoom:A,translateExtent:P}=w();return OD({delta:k,panZoom:A,transform:_,translateExtent:P,width:N,height:S})},setCenter:async(k,_,N)=>{const{width:S,height:A,maxZoom:P,panZoom:T}=w();if(!T)return Promise.resolve(!1);const C=typeof N?.zoom<"u"?N.zoom:P;return await T.setViewport({x:S/2-k*C,y:A/2-_*C,zoom:C},{duration:N?.duration,ease:N?.ease,interpolate:N?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...eT}})},updateConnection:k=>{v({connection:k})},reset:()=>v({...k_()})}},Object.is);function sA({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:a,initialMinZoom:c,initialMaxZoom:u,initialFitViewOptions:d,fitView:p,nodeOrigin:f,nodeExtent:m,zIndexMode:g,children:v}){const[w]=E.useState(()=>Xq({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:a,fitView:p,minZoom:c,maxZoom:u,fitViewOptions:d,nodeOrigin:f,nodeExtent:m,zIndexMode:g}));return s.jsx(m3,{value:w,children:s.jsx(q3,{children:v})})}function Qq({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:a,height:c,fitView:u,fitViewOptions:d,minZoom:p,maxZoom:f,nodeOrigin:m,nodeExtent:g,zIndexMode:v}){return E.useContext(du)?s.jsx(s.Fragment,{children:e}):s.jsx(sA,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:a,initialHeight:c,fitView:u,initialFitViewOptions:d,initialMinZoom:p,initialMaxZoom:f,nodeOrigin:m,nodeExtent:g,zIndexMode:v,children:e})}const Jq={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Zq({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:a,edgeTypes:c,onNodeClick:u,onEdgeClick:d,onInit:p,onMove:f,onMoveStart:m,onMoveEnd:g,onConnect:v,onConnectStart:w,onConnectEnd:b,onClickConnectStart:k,onClickConnectEnd:_,onNodeMouseEnter:N,onNodeMouseMove:S,onNodeMouseLeave:A,onNodeContextMenu:P,onNodeDoubleClick:T,onNodeDragStart:C,onNodeDrag:z,onNodeDragStop:F,onNodesDelete:V,onEdgesDelete:L,onDelete:q,onSelectionChange:G,onSelectionDragStart:R,onSelectionDrag:M,onSelectionDragStop:H,onSelectionContextMenu:X,onSelectionStart:$,onSelectionEnd:Y,onBeforeDelete:I,connectionMode:B,connectionLineType:K=hi.Bezier,connectionLineStyle:D,connectionLineComponent:U,connectionLineContainerStyle:te,deleteKeyCode:Z="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:Q=!1,selectionMode:ae=La.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:ye=qa()?"Meta":"Control",zoomActivationKeyCode:Ne=qa()?"Meta":"Control",snapToGrid:xe,snapGrid:Ae,onlyRenderVisibleElements:be=!1,selectNodesOnDrag:De,nodesDraggable:Ce,autoPanOnNodeFocus:ot,nodesConnectable:Ye,nodesFocusable:dt,nodeOrigin:pt=IT,edgesFocusable:Be,edgesReconnectable:Ve,elementsSelectable:yt=!0,defaultViewport:ge=C3,minZoom:oe=.5,maxZoom:de=2,translateExtent:je=Ma,preventScrolling:Me=!0,nodeExtent:Le,defaultMarkerColor:st="#b1b1b7",zoomOnScroll:qt=!0,zoomOnPinch:He=!0,panOnScroll:bt=!1,panOnScrollSpeed:Ct=.5,panOnScrollMode:vt=eo.Free,zoomOnDoubleClick:Ot=!0,panOnDrag:Mt=!0,onPaneClick:fr,onPaneMouseEnter:qr,onPaneMouseMove:Xn,onPaneMouseLeave:Qn,onPaneScroll:po,onPaneContextMenu:fo,paneClickDistance:ho=1,nodeClickDistance:mo=0,children:go,onReconnect:wi,onReconnectStart:yo,onReconnectEnd:hr,onEdgeContextMenu:_i,onEdgeDoubleClick:mr,onEdgeMouseEnter:_s,onEdgeMouseMove:gr,onEdgeMouseLeave:wt,reconnectRadius:yr=10,onNodesChange:ki,onEdgesChange:ks,noDragClassName:Si="nodrag",noWheelClassName:Ss="nowheel",noPanClassName:dn="nopan",fitView:Ni,fitViewOptions:ji,connectOnClick:Ns,attributionPosition:vo,proOptions:xo,defaultEdgeOptions:Mn,elevateNodesOnSelect:Ei=!0,elevateEdgesOnSelect:Ci=!1,disableKeyboardA11y:bo=!1,autoPanOnConnect:Xe,autoPanOnNodeDrag:js,autoPanSpeed:vr,connectionRadius:xr,isValidConnection:Fr,onError:wo,style:_o,id:br,nodeDragThreshold:Ft,connectionDragThreshold:Es,viewport:Ut,onViewportChange:Cs,width:Ts,height:As,colorMode:zr="light",debug:Br,onScroll:Jn,ariaLabelConfig:$r,zIndexMode:Ti="basic",...Hr},Ai){const wr=br||"1",Pi=I3(zr),kn=E.useCallback(ko=>{ko.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Jn?.(ko)},[Jn]);return s.jsx("div",{"data-testid":"rf__wrapper",...Hr,onScroll:kn,style:{..._o,...Jq},ref:Ai,className:St(["react-flow",i,Pi]),id:br,role:"application",children:s.jsxs(Qq,{nodes:e,edges:t,width:Ts,height:As,fitView:Ni,fitViewOptions:ji,minZoom:oe,maxZoom:de,nodeOrigin:pt,nodeExtent:Le,zIndexMode:Ti,children:[s.jsx(Yq,{onInit:p,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:N,onNodeMouseMove:S,onNodeMouseLeave:A,onNodeContextMenu:P,onNodeDoubleClick:T,nodeTypes:a,edgeTypes:c,connectionLineType:K,connectionLineStyle:D,connectionLineComponent:U,connectionLineContainerStyle:te,selectionKeyCode:ee,selectionOnDrag:Q,selectionMode:ae,deleteKeyCode:Z,multiSelectionKeyCode:ye,panActivationKeyCode:pe,zoomActivationKeyCode:Ne,onlyRenderVisibleElements:be,defaultViewport:ge,translateExtent:je,minZoom:oe,maxZoom:de,preventScrolling:Me,zoomOnScroll:qt,zoomOnPinch:He,zoomOnDoubleClick:Ot,panOnScroll:bt,panOnScrollSpeed:Ct,panOnScrollMode:vt,panOnDrag:Mt,onPaneClick:fr,onPaneMouseEnter:qr,onPaneMouseMove:Xn,onPaneMouseLeave:Qn,onPaneScroll:po,onPaneContextMenu:fo,paneClickDistance:ho,nodeClickDistance:mo,onSelectionContextMenu:X,onSelectionStart:$,onSelectionEnd:Y,onReconnect:wi,onReconnectStart:yo,onReconnectEnd:hr,onEdgeContextMenu:_i,onEdgeDoubleClick:mr,onEdgeMouseEnter:_s,onEdgeMouseMove:gr,onEdgeMouseLeave:wt,reconnectRadius:yr,defaultMarkerColor:st,noDragClassName:Si,noWheelClassName:Ss,noPanClassName:dn,rfId:wr,disableKeyboardA11y:bo,nodeExtent:Le,viewport:Ut,onViewportChange:Cs}),s.jsx(P3,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:v,onConnectStart:w,onConnectEnd:b,onClickConnectStart:k,onClickConnectEnd:_,nodesDraggable:Ce,autoPanOnNodeFocus:ot,nodesConnectable:Ye,nodesFocusable:dt,edgesFocusable:Be,edgesReconnectable:Ve,elementsSelectable:yt,elevateNodesOnSelect:Ei,elevateEdgesOnSelect:Ci,minZoom:oe,maxZoom:de,nodeExtent:Le,onNodesChange:ki,onEdgesChange:ks,snapToGrid:xe,snapGrid:Ae,connectionMode:B,translateExtent:je,connectOnClick:Ns,defaultEdgeOptions:Mn,fitView:Ni,fitViewOptions:ji,onNodesDelete:V,onEdgesDelete:L,onDelete:q,onNodeDragStart:C,onNodeDrag:z,onNodeDragStop:F,onSelectionDrag:M,onSelectionDragStart:R,onSelectionDragStop:H,onMove:f,onMoveStart:m,onMoveEnd:g,noPanClassName:dn,nodeOrigin:pt,rfId:wr,autoPanOnConnect:Xe,autoPanOnNodeDrag:js,autoPanSpeed:vr,onError:wo,connectionRadius:xr,isValidConnection:Fr,selectNodesOnDrag:De,nodeDragThreshold:Ft,connectionDragThreshold:Es,onBeforeDelete:I,debug:Br,ariaLabelConfig:$r,zIndexMode:Ti}),s.jsx(E3,{onSelectionChange:G}),go,s.jsx(_3,{proOptions:xo,position:vo}),s.jsx(w3,{rfId:wr,disableKeyboardA11y:bo})]})})}var e4=LT(Zq);const t4=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function n4({children:e}){const t=$e(t4);return t?h3.createPortal(e,t):null}const r4=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function i4(){return $e(r4,it)}function o4(e){const[t,n]=E.useState(e),r=E.useCallback(i=>n(a=>OT(i,a)),[]);return[t,n,r]}function s4(e){const[t,n]=E.useState(e),r=E.useCallback(i=>n(a=>MT(i,a)),[]);return[t,n,r]}function a4({dimensions:e,lineWidth:t,variant:n,className:r}){return s.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:St(["react-flow__background-pattern",n,r])})}function l4({radius:e,className:t}){return s.jsx("circle",{cx:e,cy:e,r:e,className:St(["react-flow__background-pattern","dots",t])})}var gi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(gi||(gi={}));const c4={[gi.Dots]:1,[gi.Lines]:1,[gi.Cross]:6},u4=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function aA({id:e,variant:t=gi.Dots,gap:n=20,size:r,lineWidth:i=1,offset:a=0,color:c,bgColor:u,style:d,className:p,patternClassName:f}){const m=E.useRef(null),{transform:g,patternId:v}=$e(u4,it),w=r||c4[t],b=t===gi.Dots,k=t===gi.Cross,_=Array.isArray(n)?n:[n,n],N=[_[0]*g[2]||1,_[1]*g[2]||1],S=w*g[2],A=Array.isArray(a)?a:[a,a],P=k?[S,S]:N,T=[A[0]*g[2]||1+P[0]/2,A[1]*g[2]||1+P[1]/2],C=`${v}${e||""}`;return s.jsxs("svg",{className:St(["react-flow__background",p]),style:{...d,...fu,"--xy-background-color-props":u,"--xy-background-pattern-color-props":c},ref:m,"data-testid":"rf__background",children:[s.jsx("pattern",{id:C,x:g[0]%N[0],y:g[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`,children:b?s.jsx(l4,{radius:S/2,className:f}):s.jsx(a4,{dimensions:P,lineWidth:i,variant:t,className:f})}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${C})`})]})}aA.displayName="Background";const d4=E.memo(aA);function p4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:s.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function f4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:s.jsx("path",{d:"M0 0h32v4.2H0z"})})}function h4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:s.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function m4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function g4(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function xc({children:e,className:t,...n}){return s.jsx("button",{type:"button",className:St(["react-flow__controls-button",t]),...n,children:e})}const y4=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function lA({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:c,onFitView:u,onInteractiveChange:d,className:p,children:f,position:m="bottom-left",orientation:g="vertical","aria-label":v}){const w=ct(),{isInteractive:b,minZoomReached:k,maxZoomReached:_,ariaLabelConfig:N}=$e(y4,it),{zoomIn:S,zoomOut:A,fitView:P}=Qa(),T=()=>{S(),a?.()},C=()=>{A(),c?.()},z=()=>{P(i),u?.()},F=()=>{w.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),d?.(!b)},V=g==="horizontal"?"horizontal":"vertical";return s.jsxs(pu,{className:St(["react-flow__controls",V,p]),position:m,style:e,"data-testid":"rf__controls","aria-label":v??N["controls.ariaLabel"],children:[t&&s.jsxs(s.Fragment,{children:[s.jsx(xc,{onClick:T,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:_,children:s.jsx(p4,{})}),s.jsx(xc,{onClick:C,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:k,children:s.jsx(f4,{})})]}),n&&s.jsx(xc,{className:"react-flow__controls-fitview",onClick:z,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:s.jsx(h4,{})}),r&&s.jsx(xc,{className:"react-flow__controls-interactive",onClick:F,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:b?s.jsx(g4,{}):s.jsx(m4,{})}),f]})}lA.displayName="Controls";const v4=E.memo(lA);function x4({id:e,x:t,y:n,width:r,height:i,style:a,color:c,strokeColor:u,strokeWidth:d,className:p,borderRadius:f,shapeRendering:m,selected:g,onClick:v}){const{background:w,backgroundColor:b}=a||{},k=c||w||b;return s.jsx("rect",{className:St(["react-flow__minimap-node",{selected:g},p]),x:t,y:n,rx:f,ry:f,width:r,height:i,style:{fill:k,stroke:u,strokeWidth:d},shapeRendering:m,onClick:v?_=>v(_,e):void 0})}const b4=E.memo(x4),w4=e=>e.nodes.map(t=>t.id),Cp=e=>e instanceof Function?e:()=>e;function _4({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:a=b4,onClick:c}){const u=$e(w4,it),d=Cp(t),p=Cp(e),f=Cp(n),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return s.jsx(s.Fragment,{children:u.map(g=>s.jsx(S4,{id:g,nodeColorFunc:d,nodeStrokeColorFunc:p,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:a,onClick:c,shapeRendering:m},g))})}function k4({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:c,NodeComponent:u,onClick:d}){const{node:p,x:f,y:m,width:g,height:v}=$e(w=>{const{internals:b}=w.nodeLookup.get(e),k=b.userNode,{x:_,y:N}=b.positionAbsolute,{width:S,height:A}=Mr(k);return{node:k,x:_,y:N,width:S,height:A}},it);return!p||p.hidden||!aT(p)?null:s.jsx(u,{x:f,y:m,width:g,height:v,style:p.style,selected:!!p.selected,className:r(p),color:t(p),borderRadius:i,strokeColor:n(p),strokeWidth:a,shapeRendering:c,onClick:d,id:p.id})}const S4=E.memo(k4);var N4=E.memo(_4);const j4=200,E4=150,C4=e=>!e.hidden,T4=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?sT(Ga(e.nodeLookup,{filter:C4}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},A4="react-flow__minimap-desc";function cA({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:a=5,nodeStrokeWidth:c,nodeComponent:u,bgColor:d,maskColor:p,maskStrokeColor:f,maskStrokeWidth:m,position:g="bottom-right",onClick:v,onNodeClick:w,pannable:b=!1,zoomable:k=!1,ariaLabel:_,inversePan:N,zoomStep:S=1,offsetScale:A=5}){const P=ct(),T=E.useRef(null),{boundingRect:C,viewBB:z,rfId:F,panZoom:V,translateExtent:L,flowWidth:q,flowHeight:G,ariaLabelConfig:R}=$e(T4,it),M=e?.width??j4,H=e?.height??E4,X=C.width/M,$=C.height/H,Y=Math.max(X,$),I=Y*M,B=Y*H,K=A*Y,D=C.x-(I-C.width)/2-K,U=C.y-(B-C.height)/2-K,te=I+K*2,Z=B+K*2,ee=`${A4}-${F}`,Q=E.useRef(0),ae=E.useRef();Q.current=Y,E.useEffect(()=>{if(T.current&&V)return ae.current=HD({domNode:T.current,panZoom:V,getTransform:()=>P.getState().transform,getViewScale:()=>Q.current}),()=>{ae.current?.destroy()}},[V]),E.useEffect(()=>{ae.current?.update({translateExtent:L,width:q,height:G,inversePan:N,pannable:b,zoomStep:S,zoomable:k})},[b,k,N,S,L,q,G]);const pe=v?xe=>{const[Ae,be]=ae.current?.pointer(xe)||[0,0];v(xe,{x:Ae,y:be})}:void 0,ye=w?E.useCallback((xe,Ae)=>{const be=P.getState().nodeLookup.get(Ae).internals.userNode;w(xe,be)},[]):void 0,Ne=_??R["minimap.ariaLabel"];return s.jsx(pu,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*Y:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof c=="number"?c:void 0},className:St(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:s.jsxs("svg",{width:M,height:H,viewBox:`${D} ${U} ${te} ${Z}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ee,ref:T,onClick:pe,children:[Ne&&s.jsx("title",{id:ee,children:Ne}),s.jsx(N4,{onClick:ye,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:i,nodeStrokeWidth:c,nodeComponent:u}),s.jsx("path",{className:"react-flow__minimap-mask",d:`M${D-K},${U-K}h${te+K*2}v${Z+K*2}h${-te-K*2}z
        M${z.x},${z.y}h${z.width}v${z.height}h${-z.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}cA.displayName="MiniMap";const P4=E.memo(cA),I4=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,R4={[ds.Line]:"right",[ds.Handle]:"bottom-right"};function O4({nodeId:e,position:t,variant:n=ds.Handle,className:r,style:i=void 0,children:a,color:c,minWidth:u=10,minHeight:d=10,maxWidth:p=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:g,autoScale:v=!0,shouldResize:w,onResizeStart:b,onResize:k,onResizeEnd:_}){const N=zT(),S=typeof e=="string"?e:N,A=ct(),P=E.useRef(null),T=n===ds.Handle,C=$e(E.useCallback(I4(T&&v),[T,v]),it),z=E.useRef(null),F=t??R4[n];E.useEffect(()=>{if(!(!P.current||!S))return z.current||(z.current=r3({domNode:P.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:L,transform:q,snapGrid:G,snapToGrid:R,nodeOrigin:M,domNode:H}=A.getState();return{nodeLookup:L,transform:q,snapGrid:G,snapToGrid:R,nodeOrigin:M,paneDomNode:H}},onChange:(L,q)=>{const{triggerNodeChanges:G,nodeLookup:R,parentLookup:M,nodeOrigin:H}=A.getState(),X=[],$={x:L.x,y:L.y},Y=R.get(S);if(Y&&Y.expandParent&&Y.parentId){const I=Y.origin??H,B=L.width??Y.measured.width??0,K=L.height??Y.measured.height??0,D={id:Y.id,parentId:Y.parentId,rect:{width:B,height:K,...lT({x:L.x??Y.position.x,y:L.y??Y.position.y},{width:B,height:K},Y.parentId,R,I)}},U=cx([D],R,M,H);X.push(...U),$.x=L.x?Math.max(I[0]*B,L.x):void 0,$.y=L.y?Math.max(I[1]*K,L.y):void 0}if($.x!==void 0&&$.y!==void 0){const I={id:S,type:"position",position:{...$}};X.push(I)}if(L.width!==void 0&&L.height!==void 0){const B={id:S,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:L.width,height:L.height}};X.push(B)}for(const I of q){const B={...I,type:"position"};X.push(B)}G(X)},onEnd:({width:L,height:q})=>{const G={id:S,type:"dimensions",resizing:!1,dimensions:{width:L,height:q}};A.getState().triggerNodeChanges([G])}})),z.current.update({controlPosition:F,boundaries:{minWidth:u,minHeight:d,maxWidth:p,maxHeight:f},keepAspectRatio:m,resizeDirection:g,onResizeStart:b,onResize:k,onResizeEnd:_,shouldResize:w}),()=>{z.current?.destroy()}},[F,u,d,p,f,m,b,k,_,w]);const V=F.split("-");return s.jsx("div",{className:St(["react-flow__resize-control","nodrag",...V,n,r]),ref:P,style:{...i,scale:C,...c&&{[T?"backgroundColor":"borderColor"]:c}},children:a})}E.memo(O4);const uA={},{useDebugValue:M4}=Rt,{useSyncExternalStoreWithSelector:L4}=jT;let S_=!1;const D4=e=>e;function q4(e,t=D4,n){(uA?"production":void 0)!=="production"&&n&&!S_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),S_=!0);const r=L4(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return M4(r),r}const N_=e=>{(uA?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?ET(e):e,n=(r,i)=>q4(t,r,i);return Object.assign(n,t),n},Ja=e=>e?N_(e):N_,F4="/api";async function Ui(e,t){const n=await fetch(`${F4}${e}`,{headers:{"Content-Type":"application/json"},...t});if(!n.ok){const r=await n.json().catch(()=>({error:n.statusText}));throw new Error(r.error||"Request failed")}if(n.status!==204)return n.json()}const mi={projects:{list:()=>Ui("/projects"),get:e=>Ui(`/projects/${e}`),create:(e,t="")=>Ui("/projects",{method:"POST",body:JSON.stringify({name:e,description:t})}),update:(e,t)=>Ui(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>Ui(`/projects/${e}`,{method:"DELETE"}),compile:e=>Ui(`/projects/${e}/compile`),build:e=>Ui(`/projects/${e}/build`,{method:"POST"})}},j_=Object.freeze(Object.defineProperty({__proto__:null,api:mi},Symbol.toStringTag,{value:"Module"})),Ev={defaultProvider:"gemini",defaultModel:"gemini-2.5-flash",adkVersion:"0.2.2",rustEdition:"2024",theme:"dark",showMinimap:!0,showTimeline:!0,showDataFlowOverlay:!1,autobuildEnabled:!0,autobuildTriggers:{onAgentAdd:!0,onAgentDelete:!0,onAgentUpdate:!0,onToolAdd:!0,onToolUpdate:!0,onEdgeAdd:!0,onEdgeDelete:!0},layoutMode:"free",layoutDirection:"LR"},dA="adk-studio-global-settings";function fs(){try{const e=localStorage.getItem(dA);if(e)return{...Ev,...JSON.parse(e)}}catch{}return Ev}function z4(e){try{localStorage.setItem(dA,JSON.stringify(e))}catch{}}const gt=Ja((e,t)=>({projects:[],loadingProjects:!1,currentProject:null,selectedNodeId:null,selectedToolId:null,selectedActionNodeId:null,layoutMode:"free",layoutDirection:"TB",snapToGrid:!0,gridSize:20,showDataFlowOverlay:!1,fetchProjects:async()=>{e({loadingProjects:!0});try{const n=await mi.projects.list();e({projects:n})}finally{e({loadingProjects:!1})}},createProject:async(n,r)=>{const i=await mi.projects.create(n,r);return e(a=>({projects:[{id:i.id,name:n,description:r||"",updated_at:i.updated_at},...a.projects]})),i},openProject:async n=>{const r=await mi.projects.get(n),i=fs(),a=r.settings?.layoutMode||i.layoutMode,c=r.settings?.layoutDirection||i.layoutDirection,u=r.settings?.showDataFlowOverlay??i.showDataFlowOverlay;e({currentProject:r,selectedNodeId:null,layoutMode:a,layoutDirection:c,showDataFlowOverlay:u})},saveProject:async()=>{const{currentProject:n,layoutMode:r,layoutDirection:i,showDataFlowOverlay:a}=t();if(!n)return;const c={...n,settings:{...n.settings,layoutMode:r,layoutDirection:i,showDataFlowOverlay:a}};await mi.projects.update(n.id,c)},closeProject:()=>e({currentProject:null,selectedNodeId:null,selectedActionNodeId:null}),deleteProject:async n=>{await mi.projects.delete(n),e(r=>({projects:r.projects.filter(i=>i.id!==n)}))},updateProjectMeta:(n,r)=>{e(i=>i.currentProject?{currentProject:{...i.currentProject,name:n,description:r},projects:i.projects.map(a=>a.id===i.currentProject?.id?{...a,name:n,description:r}:a)}:i),setTimeout(()=>t().saveProject(),0)},updateProjectSettings:n=>{e(r=>{if(!r.currentProject)return r;const i={...r.currentProject.settings,...n},a={currentProject:{...r.currentProject,settings:i}};return n.layoutMode!==void 0&&(a.layoutMode=n.layoutMode),n.layoutDirection!==void 0&&(a.layoutDirection=n.layoutDirection),n.showDataFlowOverlay!==void 0&&(a.showDataFlowOverlay=n.showDataFlowOverlay),a}),setTimeout(()=>t().saveProject(),0)},selectNode:n=>e({selectedNodeId:n}),updateAgent:(n,r)=>e(i=>i.currentProject?{currentProject:{...i.currentProject,agents:{...i.currentProject.agents,[n]:{...i.currentProject.agents[n],...r}}}}:i),renameAgent:(n,r)=>{n!==r&&(e(i=>{if(!i.currentProject||!i.currentProject.agents[n])return i;const a={...i.currentProject.agents};a[r]=a[n],delete a[n],Object.keys(a).forEach(d=>{a[d].sub_agents?.includes(n)&&(a[d]={...a[d],sub_agents:a[d].sub_agents.map(p=>p===n?r:p)})});const c=i.currentProject.workflow.edges.map(d=>({...d,from:d.from===n?r:d.from,to:d.to===n?r:d.to})),u={...i.currentProject.tool_configs};return Object.keys(u).forEach(d=>{if(d.startsWith(`${n}_`)){const p=d.replace(`${n}_`,`${r}_`);u[p]=u[d],delete u[d]}}),{currentProject:{...i.currentProject,agents:a,tool_configs:u,workflow:{...i.currentProject.workflow,edges:c}},selectedNodeId:i.selectedNodeId===n?r:i.selectedNodeId}}),t().saveProject())},addAgent:(n,r)=>{e(i=>i.currentProject?{currentProject:{...i.currentProject,agents:{...i.currentProject.agents,[n]:r}}}:i),setTimeout(()=>t().saveProject(),0)},removeAgent:n=>{e(r=>{if(!r.currentProject)return r;const i=r.currentProject.agents[n],a=[n];i?.sub_agents&&a.push(...i.sub_agents);const c={...r.currentProject.agents};a.forEach(m=>delete c[m]);const u={...r.currentProject.tool_configs};Object.keys(u).forEach(m=>{a.some(g=>m.startsWith(`${g}_`))&&delete u[m]});const d=r.currentProject.workflow.edges,p=[];for(const m of a){const g=d.filter(w=>w.to===m),v=d.filter(w=>w.from===m);for(const w of g)for(const b of v)w.from!==b.to&&(p.some(_=>_.from===w.from&&_.to===b.to)||d.some(_=>_.from===w.from&&_.to===b.to&&!a.includes(_.from)&&!a.includes(_.to))||p.push({from:w.from,to:b.to}))}const f=d.filter(m=>!a.includes(m.from)&&!a.includes(m.to));return{currentProject:{...r.currentProject,agents:c,tool_configs:u,workflow:{...r.currentProject.workflow,edges:[...f,...p]}}}}),setTimeout(()=>t().saveProject(),0)},addEdge:(n,r,i,a)=>{e(c=>{if(!c.currentProject)return c;const u={from:n,to:r};return i&&(u.fromPort=i),a&&(u.toPort=a),{currentProject:{...c.currentProject,workflow:{...c.currentProject.workflow,edges:[...c.currentProject.workflow.edges,u]}}}}),setTimeout(()=>t().saveProject(),0)},removeEdge:(n,r)=>{e(i=>i.currentProject?{currentProject:{...i.currentProject,workflow:{...i.currentProject.workflow,edges:i.currentProject.workflow.edges.filter(a=>!(a.from===n&&a.to===r))}}}:i),setTimeout(()=>t().saveProject(),0)},setEdges:n=>{e(r=>r.currentProject?{currentProject:{...r.currentProject,workflow:{...r.currentProject.workflow,edges:n}}}:r),setTimeout(()=>t().saveProject(),0)},addToolToAgent:(n,r)=>{e(i=>{if(!i.currentProject)return i;const a=i.currentProject.agents[n];if(!a)return i;let c=r;if(r==="function"||r==="mcp"){const u=a.tools.filter(d=>d.startsWith(r));c=`${r}_${u.length+1}`}else if(a.tools.includes(r))return i;return{currentProject:{...i.currentProject,agents:{...i.currentProject.agents,[n]:{...a,tools:[...a.tools,c]}}}}}),setTimeout(()=>t().saveProject(),0)},removeToolFromAgent:(n,r)=>{e(i=>{if(!i.currentProject)return i;const a=i.currentProject.agents[n];if(!a)return i;const c=`${n}_${r}`,{[c]:u,...d}=i.currentProject.tool_configs;return{currentProject:{...i.currentProject,agents:{...i.currentProject.agents,[n]:{...a,tools:a.tools.filter(p=>p!==r)}},tool_configs:d},selectedToolId:i.selectedToolId===c?null:i.selectedToolId}}),setTimeout(()=>t().saveProject(),0)},addSubAgentToContainer:n=>{const{currentProject:r,addAgent:i,updateAgent:a,saveProject:c}=t();if(!r)return;const u=r.agents[n];if(!u)return;const d=u.sub_agents.length+1,p=`${n}_agent_${d}`;i(p,{type:"llm",model:"gemini-2.0-flash",instruction:`You are agent ${d}.`,tools:[],sub_agents:[],position:{x:0,y:0}}),a(n,{sub_agents:[...u.sub_agents,p]}),c()},selectTool:n=>e({selectedToolId:n}),updateToolConfig:(n,r)=>{e(i=>i.currentProject?{currentProject:{...i.currentProject,tool_configs:{...i.currentProject.tool_configs,[n]:r}}}:i),setTimeout(()=>t().saveProject(),0)},selectActionNode:n=>e(r=>({selectedActionNodeId:n,selectedNodeId:n?null:r.selectedNodeId,selectedToolId:n?null:r.selectedToolId})),addActionNode:(n,r)=>{e(i=>{if(!i.currentProject)return i;const a=i.currentProject.actionNodes||{};return{currentProject:{...i.currentProject,actionNodes:{...a,[n]:r}}}}),setTimeout(()=>t().saveProject(),0)},updateActionNode:(n,r)=>{e(i=>{if(!i.currentProject)return i;const a=i.currentProject.actionNodes||{};return a[n]?{currentProject:{...i.currentProject,actionNodes:{...a,[n]:{...a[n],...r}}}}:i}),setTimeout(()=>t().saveProject(),0)},removeActionNode:n=>{e(r=>{if(!r.currentProject)return r;const i={...r.currentProject.actionNodes||{}};delete i[n];const a=r.currentProject.workflow.edges,c=[],u=a.filter(f=>f.to===n),d=a.filter(f=>f.from===n);for(const f of u)for(const m of d)f.from!==m.to&&(c.some(v=>v.from===f.from&&v.to===m.to)||a.some(v=>v.from===f.from&&v.to===m.to&&v.from!==n&&v.to!==n)||c.push({from:f.from,to:m.to}));const p=a.filter(f=>f.from!==n&&f.to!==n);return{currentProject:{...r.currentProject,actionNodes:i,workflow:{...r.currentProject.workflow,edges:[...p,...c]}},selectedActionNodeId:r.selectedActionNodeId===n?null:r.selectedActionNodeId}}),setTimeout(()=>t().saveProject(),0)},renameActionNode:(n,r)=>{n!==r&&(e(i=>{if(!i.currentProject)return i;const a=i.currentProject.actionNodes||{};if(!a[n])return i;const c={...a};c[r]={...c[n],id:r},delete c[n];const u=i.currentProject.workflow.edges.map(d=>({...d,from:d.from===n?r:d.from,to:d.to===n?r:d.to}));return{currentProject:{...i.currentProject,actionNodes:c,workflow:{...i.currentProject.workflow,edges:u}},selectedActionNodeId:i.selectedActionNodeId===n?r:i.selectedActionNodeId}}),setTimeout(()=>t().saveProject(),0))},setLayoutMode:n=>e({layoutMode:n}),setLayoutDirection:n=>e({layoutDirection:n}),setSnapToGrid:n=>e({snapToGrid:n}),setGridSize:n=>e({gridSize:n}),setShowDataFlowOverlay:n=>{e({showDataFlowOverlay:n}),setTimeout(()=>t().saveProject(),0)}})),B4="modulepreload",$4=function(e){return"/"+e},E_={},C_=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let p=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var c=p;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");i=p(n.map(f=>{if(f=$4(f),f in E_)return;E_[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":B4,m||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),m)return new Promise((w,b)=>{v.addEventListener("load",w),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return i.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})},bn=[{id:"gemini",name:"Google Gemini",icon:"",envVar:"GOOGLE_API_KEY",envVarAlt:"GEMINI_API_KEY",docsUrl:"https://ai.google.dev/gemini-api/docs/models",models:[{id:"gemini-3-pro",name:"Gemini 3 Pro",description:"Most intelligent model for complex agentic workflows and coding",contextWindow:2e6,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gemini-3-flash",name:"Gemini 3 Flash",description:"Fast and efficient for most tasks",contextWindow:1e6,capabilities:["text","vision","audio","code","tools"],tier:"standard"},{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",description:"Advanced reasoning and multimodal understanding",contextWindow:1e6,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"Balanced speed and capability",contextWindow:1e6,capabilities:["text","vision","audio","code","tools"],tier:"standard"},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",description:"Ultra-fast for high-volume tasks",contextWindow:1e6,capabilities:["text","vision","code","tools"],tier:"free"},{id:"gemini-2.0-flash",name:"Gemini 2.0 Flash",description:"Fast multimodal model (retiring March 2026)",contextWindow:1e6,capabilities:["text","vision","audio","code","tools"],tier:"standard"},{id:"gemini-live-2.5-flash-native-audio",name:"Gemini Live 2.5 Flash Native Audio",description:"Real-time voice conversations",contextWindow:32e3,capabilities:["text","audio","tools"],tier:"premium"}]},{id:"openai",name:"OpenAI",icon:"",envVar:"OPENAI_API_KEY",docsUrl:"https://platform.openai.com/docs/models",models:[{id:"gpt-5",name:"GPT-5",description:"State-of-the-art unified model with adaptive thinking",contextWindow:256e3,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gpt-5-mini",name:"GPT-5 Mini",description:"Efficient version for most tasks",contextWindow:128e3,capabilities:["text","vision","code","tools"],tier:"standard"},{id:"gpt-5.1",name:"GPT-5.1",description:"Latest iteration with improved performance",contextWindow:256e3,capabilities:["text","vision","audio","code","reasoning","tools"],tier:"premium"},{id:"gpt-4o",name:"GPT-4o",description:"Multimodal model (deprecated August 2025)",contextWindow:128e3,capabilities:["text","vision","audio","code","tools"],tier:"standard"},{id:"gpt-4o-mini",name:"GPT-4o Mini",description:"Fast and affordable (deprecated August 2025)",contextWindow:128e3,capabilities:["text","vision","code","tools"],tier:"free"}]},{id:"anthropic",name:"Anthropic Claude",icon:"",envVar:"ANTHROPIC_API_KEY",docsUrl:"https://docs.anthropic.com/en/docs/about-claude/models",models:[{id:"claude-opus-4.5",name:"Claude Opus 4.5",description:"Most capable model for complex autonomous tasks",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"premium"},{id:"claude-sonnet-4.5",name:"Claude Sonnet 4.5",description:"Balanced intelligence and cost for production",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"standard"},{id:"claude-haiku-4.5",name:"Claude Haiku 4.5",description:"Ultra-efficient for high-volume workloads",contextWindow:2e5,capabilities:["text","vision","code","tools"],tier:"free"},{id:"claude-opus-4",name:"Claude Opus 4",description:"Hybrid model with extended thinking",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"premium"},{id:"claude-sonnet-4",name:"Claude Sonnet 4",description:"Balanced model with extended thinking",contextWindow:2e5,capabilities:["text","vision","code","reasoning","tools"],tier:"standard"}]},{id:"deepseek",name:"DeepSeek",icon:"",envVar:"DEEPSEEK_API_KEY",docsUrl:"https://platform.deepseek.com/docs",models:[{id:"deepseek-r1-0528",name:"DeepSeek R1 (0528)",description:"Latest reasoning model with enhanced thinking depth",contextWindow:128e3,capabilities:["text","code","reasoning","tools"],tier:"premium"},{id:"deepseek-r1",name:"DeepSeek R1",description:"Advanced reasoning comparable to o1",contextWindow:128e3,capabilities:["text","code","reasoning","tools"],tier:"standard"},{id:"deepseek-v3.1",name:"DeepSeek V3.1",description:"Latest 671B MoE model for general tasks",contextWindow:128e3,capabilities:["text","code","tools"],tier:"standard"},{id:"deepseek-chat",name:"DeepSeek Chat (V3)",description:"671B MoE model, excellent for code and Chinese",contextWindow:128e3,capabilities:["text","code","tools"],tier:"free"},{id:"deepseek-vl2",name:"DeepSeek VL2",description:"Vision-language model",contextWindow:32e3,capabilities:["text","vision","code"],tier:"standard"}]},{id:"groq",name:"Groq",icon:"",envVar:"GROQ_API_KEY",docsUrl:"https://console.groq.com/docs",models:[{id:"llama-4-scout",name:"Llama 4 Scout (17Bx16E)",description:"Fast Llama 4 inference via Groq LPU",contextWindow:128e3,capabilities:["text","vision","code","tools"],tier:"standard"},{id:"llama-3.2-90b-text-preview",name:"Llama 3.2 90B",description:"Large text model",contextWindow:128e3,capabilities:["text","code","tools"],tier:"standard"},{id:"llama-3.2-11b-text-preview",name:"Llama 3.2 11B",description:"Balanced text model",contextWindow:128e3,capabilities:["text","code","tools"],tier:"free"},{id:"llama-3.2-3b-preview",name:"Llama 3.2 3B",description:"Fast small model",contextWindow:128e3,capabilities:["text","code"],tier:"free"},{id:"llama-3.1-70b-versatile",name:"Llama 3.1 70B Versatile",description:"Versatile large model",contextWindow:128e3,capabilities:["text","code","tools"],tier:"standard"},{id:"llama-3.1-8b-instant",name:"Llama 3.1 8B Instant",description:"Ultra-fast instruction model",contextWindow:128e3,capabilities:["text","code","tools"],tier:"free"},{id:"mixtral-8x7b-32768",name:"Mixtral 8x7B",description:"MoE model with 32K context",contextWindow:32768,capabilities:["text","code","tools"],tier:"free"}]},{id:"ollama",name:"Ollama (Local)",icon:"",envVar:"OLLAMA_HOST",docsUrl:"https://ollama.ai/library",models:[{id:"llama3.3:70b",name:"Llama 3.3 70B",description:"Latest Llama for local deployment",contextWindow:128e3,capabilities:["text","code","tools"],tier:"premium"},{id:"llama3.2:3b",name:"Llama 3.2 3B",description:"Efficient small model",contextWindow:128e3,capabilities:["text","code"],tier:"free"},{id:"llama3.1:8b",name:"Llama 3.1 8B",description:"Popular balanced model",contextWindow:128e3,capabilities:["text","code","tools"],tier:"free"},{id:"deepseek-r1:14b",name:"DeepSeek R1 14B",description:"Distilled reasoning model",contextWindow:64e3,capabilities:["text","code","reasoning"],tier:"standard"},{id:"deepseek-r1:32b",name:"DeepSeek R1 32B",description:"Larger distilled reasoning model",contextWindow:64e3,capabilities:["text","code","reasoning"],tier:"standard"},{id:"qwen3:14b",name:"Qwen 3 14B",description:"Strong multilingual and coding",contextWindow:32e3,capabilities:["text","code","tools"],tier:"standard"},{id:"qwen2.5:7b",name:"Qwen 2.5 7B",description:"Efficient multilingual model",contextWindow:32e3,capabilities:["text","code","tools"],tier:"free"},{id:"mistral:7b",name:"Mistral 7B",description:"Fast and capable",contextWindow:32e3,capabilities:["text","code","tools"],tier:"free"},{id:"mistral-nemo:12b",name:"Mistral Nemo 12B",description:"Enhanced Mistral variant",contextWindow:128e3,capabilities:["text","code","tools"],tier:"standard"},{id:"gemma3:9b",name:"Gemma 3 9B",description:"Google's efficient open model",contextWindow:8192,capabilities:["text","vision","code"],tier:"free"},{id:"devstral:24b",name:"Devstral 24B",description:"Optimized for coding tasks",contextWindow:64e3,capabilities:["text","code","tools"],tier:"standard"},{id:"codellama:13b",name:"Code Llama 13B",description:"Code-focused Llama variant",contextWindow:16e3,capabilities:["text","code"],tier:"free"}]}];function H4(e){if(!e)return"gemini";const t=e.toLowerCase();return t.includes("gemini")||t.includes("gemma")?"gemini":t.includes("gpt")||t.includes("o1")||t.includes("o3")?"openai":t.includes("claude")?"anthropic":t.includes("deepseek")?"deepseek":t.includes("llama")||t.includes("mixtral")?t.includes(":")?"ollama":"groq":t.includes("qwen")||t.includes("mistral")||t.includes("codellama")||t.includes("devstral")?"ollama":"gemini"}function pA(e){switch(e){case"text":return"";case"vision":return"";case"audio":return"";case"code":return"";case"reasoning":return"";case"tools":return"";default:return""}}function fA(e){switch(e){case"free":return"var(--accent-success)";case"standard":return"var(--accent-primary)";case"premium":return"var(--accent-warning)";default:return"var(--text-muted)"}}function hA(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(0)}K`:e.toString()}const V4=["0.2.2","0.2.1","0.2.0","0.1.9","0.1.0"],U4=["2024","2021"];function mA({settings:e,projectName:t,projectDescription:n,onSave:r,onClose:i}){const[a,c]=E.useState("general"),[u,d]=E.useState({...e}),[p,f]=E.useState(t),[m,g]=E.useState(n),[v,w]=E.useState(""),[b,k]=E.useState("");E.useEffect(()=>{d({...e,adkVersion:e.adkVersion||"0.2.2",rustEdition:e.rustEdition||"2024",defaultProvider:e.defaultProvider||"gemini",default_model:e.default_model||"gemini-2.5-flash",autobuildEnabled:e.autobuildEnabled??!0,showMinimap:e.showMinimap??!0,showTimeline:e.showTimeline??!0,consolePosition:e.consolePosition||"bottom"})},[e]);const _=()=>{r(u,p,m),i()},N=(C,z)=>{d(F=>({...F,[C]:z}))},S=()=>{v.trim()&&(d(C=>({...C,env_vars:{...C.env_vars,[v.trim()]:b}})),w(""),k(""))},A=C=>{d(z=>{const{[C]:F,...V}=z.env_vars;return{...z,env_vars:V}})},P=bn.find(C=>C.id===u.defaultProvider)||bn[0],T=[{id:"general",label:"General",icon:""},{id:"codegen",label:"Code Generation",icon:""},{id:"ui",label:"UI Preferences",icon:""},{id:"env",label:"Environment",icon:""}];return s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:i,children:s.jsxs("div",{className:"rounded-lg w-[600px] max-h-[80vh] flex flex-col",style:{backgroundColor:"var(--surface-panel)"},onClick:C=>C.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:" Project Settings"}),s.jsx("button",{onClick:i,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsx("div",{className:"flex border-b",style:{borderColor:"var(--border-default)"},children:T.map(C=>s.jsxs("button",{onClick:()=>c(C.id),className:"px-4 py-2 text-sm font-medium transition-colors",style:{color:a===C.id?"var(--accent-primary)":"var(--text-secondary)",borderBottom:a===C.id?"2px solid var(--accent-primary)":"2px solid transparent"},children:[C.icon," ",C.label]},C.id))}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a==="general"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(di,{label:"Project Name",children:s.jsx("input",{type:"text",value:p,onChange:C=>f(C.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"}})}),s.jsx(di,{label:"Description",children:s.jsx("textarea",{value:m,onChange:C=>g(C.target.value),rows:3,className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"}})}),s.jsx(di,{label:"Default Provider",children:s.jsx("select",{value:u.defaultProvider||"gemini",onChange:C=>{const z=bn.find(F=>F.id===C.target.value);N("defaultProvider",C.target.value),z&&z.models.length>0&&N("default_model",z.models[0].id)},className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:bn.map(C=>s.jsxs("option",{value:C.id,children:[C.icon," ",C.name]},C.id))})}),s.jsx(di,{label:"Default Model",children:s.jsx("select",{value:u.default_model,onChange:C=>N("default_model",C.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:P.models.map(C=>s.jsx("option",{value:C.id,children:C.name},C.id))})})]}),a==="codegen"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(di,{label:"ADK-Rust Version",hint:"Version of ADK crates to use in generated code",children:s.jsx("select",{value:u.adkVersion||"0.2.2",onChange:C=>N("adkVersion",C.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:V4.map(C=>s.jsxs("option",{value:C,children:[C,C==="0.2.2"?" (latest)":""]},C))})}),s.jsx(di,{label:"Rust Edition",hint:"Rust edition for generated Cargo.toml",children:s.jsx("select",{value:u.rustEdition||"2024",onChange:C=>N("rustEdition",C.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:U4.map(C=>s.jsxs("option",{value:C,children:[C,C==="2024"?" (latest)":""]},C))})}),s.jsxs("div",{className:"p-3 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[s.jsx("div",{className:"font-medium mb-1",children:"Generated Code Preview:"}),s.jsxs("code",{className:"block font-mono",children:["[package]",s.jsx("br",{}),'edition = "',u.rustEdition||"2024",'"',s.jsx("br",{}),s.jsx("br",{}),"[dependencies]",s.jsx("br",{}),'adk-core = "',u.adkVersion||"0.2.2",'"',s.jsx("br",{}),'adk-agent = "',u.adkVersion||"0.2.2",'"',s.jsx("br",{}),"..."]})]})]}),a==="ui"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(bc,{label:"Autobuild",hint:"Automatically rebuild when project changes",checked:u.autobuildEnabled??!0,onChange:C=>N("autobuildEnabled",C)}),(u.autobuildEnabled??!0)&&s.jsxs("div",{className:"p-3 rounded space-y-2",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)"},children:[s.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--text-muted)"},children:"Autobuild Triggers:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(Wi,{label:"Agent Add",checked:u.autobuildTriggers?.onAgentAdd??!0,onChange:C=>N("autobuildTriggers",{...u.autobuildTriggers,onAgentAdd:C})}),s.jsx(Wi,{label:"Agent Delete",checked:u.autobuildTriggers?.onAgentDelete??!0,onChange:C=>N("autobuildTriggers",{...u.autobuildTriggers,onAgentDelete:C})}),s.jsx(Wi,{label:"Agent Update",checked:u.autobuildTriggers?.onAgentUpdate??!0,onChange:C=>N("autobuildTriggers",{...u.autobuildTriggers,onAgentUpdate:C})}),s.jsx(Wi,{label:"Tool Add",checked:u.autobuildTriggers?.onToolAdd??!0,onChange:C=>N("autobuildTriggers",{...u.autobuildTriggers,onToolAdd:C})}),s.jsx(Wi,{label:"Tool Update",checked:u.autobuildTriggers?.onToolUpdate??!0,onChange:C=>N("autobuildTriggers",{...u.autobuildTriggers,onToolUpdate:C})}),s.jsx(Wi,{label:"Edge Add",checked:u.autobuildTriggers?.onEdgeAdd??!0,onChange:C=>N("autobuildTriggers",{...u.autobuildTriggers,onEdgeAdd:C})}),s.jsx(Wi,{label:"Edge Delete",checked:u.autobuildTriggers?.onEdgeDelete??!0,onChange:C=>N("autobuildTriggers",{...u.autobuildTriggers,onEdgeDelete:C})})]})]}),s.jsx(bc,{label:"Show Minimap",hint:"Display minimap in canvas corner",checked:u.showMinimap??!0,onChange:C=>N("showMinimap",C)}),s.jsx(bc,{label:"Show Timeline",hint:"Display execution timeline during runs",checked:u.showTimeline??!0,onChange:C=>N("showTimeline",C)}),s.jsx(bc,{label:"Show Data Flow Overlay",hint:"Display state keys on edges",checked:u.showDataFlowOverlay??!1,onChange:C=>N("showDataFlowOverlay",C)}),s.jsx(di,{label:"Layout Mode",children:s.jsxs("select",{value:u.layoutMode||"free",onChange:C=>N("layoutMode",C.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"free",children:"Free (drag anywhere)"}),s.jsx("option",{value:"fixed",children:"Fixed (auto-layout)"})]})}),s.jsx(di,{label:"Layout Direction",children:s.jsxs("select",{value:u.layoutDirection||"TB",onChange:C=>N("layoutDirection",C.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"TB",children:"Top to Bottom "}),s.jsx("option",{value:"LR",children:"Left to Right "}),s.jsx("option",{value:"BT",children:"Bottom to Top "}),s.jsx("option",{value:"RL",children:"Right to Left "})]})})]}),a==="env"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-3 rounded text-xs",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid var(--accent-primary)",color:"var(--text-secondary)"},children:[s.jsx("div",{className:"font-medium mb-1",style:{color:"var(--accent-primary)"},children:" Environment Variables"}),s.jsx("p",{children:"These are stored in the project and used when running the generated code. Sensitive values are stored locally only."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"KEY",value:v,onChange:C=>w(C.target.value.toUpperCase()),className:"flex-1 px-3 py-2 rounded text-sm font-mono",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"}}),s.jsx("input",{type:"password",placeholder:"value",value:b,onChange:C=>k(C.target.value),className:"flex-1 px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"}}),s.jsx("button",{onClick:S,className:"px-3 py-2 rounded text-sm font-medium",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Add"})]}),s.jsxs("div",{className:"space-y-2",children:[Object.entries(u.env_vars||{}).map(([C,z])=>s.jsxs("div",{className:"flex items-center gap-2 p-2 rounded",style:{backgroundColor:"var(--bg-secondary)"},children:[s.jsx("code",{className:"flex-1 text-sm font-mono",style:{color:"var(--accent-primary)"},children:C}),s.jsx("span",{className:"text-sm",style:{color:"var(--text-muted)"},children:z?"":"(empty)"}),s.jsx("button",{onClick:()=>A(C),className:"text-red-500 hover:text-red-400 text-sm",children:""})]},C)),Object.keys(u.env_vars||{}).length===0&&s.jsx("div",{className:"text-sm text-center py-4",style:{color:"var(--text-muted)"},children:"No environment variables configured"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--text-muted)"},children:"Quick Add:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:["GOOGLE_API_KEY","OPENAI_API_KEY","ANTHROPIC_API_KEY","DEEPSEEK_API_KEY","GROQ_API_KEY"].map(C=>s.jsxs("button",{onClick:()=>{u.env_vars?.[C]||w(C)},disabled:!!u.env_vars?.[C],className:"px-2 py-1 rounded text-xs",style:{backgroundColor:u.env_vars?.[C]?"var(--accent-success)":"var(--bg-secondary)",color:u.env_vars?.[C]?"white":"var(--text-secondary)",border:"1px solid var(--border-default)",opacity:u.env_vars?.[C]?.7:1},children:[u.env_vars?.[C]?" ":"+ ",C]},C))})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",style:{borderColor:"var(--border-default)"},children:[s.jsx("button",{onClick:i,className:"px-4 py-2 rounded text-sm font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Cancel"}),s.jsx("button",{onClick:_,className:"px-4 py-2 rounded text-sm font-medium",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Save Settings"})]})]})})}function di({label:e,hint:t,children:n}){return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text-secondary)"},children:[e,t&&s.jsxs("span",{className:"font-normal ml-1",style:{color:"var(--text-muted)"},children:["(",t,")"]})]}),n]})}function bc({label:e,hint:t,checked:n,onChange:r}){return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:e}),t&&s.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:t})]}),s.jsx("button",{onClick:()=>r(!n),className:"w-12 h-6 rounded-full transition-colors relative",style:{backgroundColor:n?"var(--accent-primary)":"var(--bg-secondary)"},children:s.jsx("div",{className:"w-5 h-5 rounded-full bg-white absolute top-0.5 transition-transform",style:{transform:n?"translateX(26px)":"translateX(2px)"}})})]})}function Wi({label:e,checked:t,onChange:n}){return s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:t,onChange:r=>n(r.target.checked),className:"w-4 h-4 rounded",style:{accentColor:"var(--accent-primary)"}}),s.jsx("span",{className:"text-xs",style:{color:"var(--text-secondary)"},children:e})]})}const W4={};function K4(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var a;const c=d=>d===null?null:JSON.parse(d,void 0),u=(a=n.getItem(i))!=null?a:null;return u instanceof Promise?u.then(c):c(u)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>n.removeItem(i)}}const za=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return za(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return za(r)(n)}}}},G4=(e,t)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:k=>k,version:0,merge:(k,_)=>({..._,...k}),...t},c=!1;const u=new Set,d=new Set;let p;try{p=a.getStorage()}catch{}if(!p)return e((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...k)},r,i);const f=za(a.serialize),m=()=>{const k=a.partialize({...r()});let _;const N=f({state:k,version:a.version}).then(S=>p.setItem(a.name,S)).catch(S=>{_=S});if(_)throw _;return N},g=i.setState;i.setState=(k,_)=>{g(k,_),m()};const v=e((...k)=>{n(...k),m()},r,i);let w;const b=()=>{var k;if(!p)return;c=!1,u.forEach(N=>N(r()));const _=((k=a.onRehydrateStorage)==null?void 0:k.call(a,r()))||void 0;return za(p.getItem.bind(p))(a.name).then(N=>{if(N)return a.deserialize(N)}).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==a.version){if(a.migrate)return a.migrate(N.state,N.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return N.state}).then(N=>{var S;return w=a.merge(N,(S=r())!=null?S:v),n(w,!0),m()}).then(()=>{_?.(w,void 0),c=!0,d.forEach(N=>N(w))}).catch(N=>{_?.(void 0,N)})};return i.persist={setOptions:k=>{a={...a,...k},k.getStorage&&(p=k.getStorage())},clearStorage:()=>{p?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>b(),hasHydrated:()=>c,onHydrate:k=>(u.add(k),()=>{u.delete(k)}),onFinishHydration:k=>(d.add(k),()=>{d.delete(k)})},b(),w||v},Y4=(e,t)=>(n,r,i)=>{let a={storage:K4(()=>localStorage),partialize:b=>b,version:0,merge:(b,k)=>({...k,...b}),...t},c=!1;const u=new Set,d=new Set;let p=a.storage;if(!p)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...b)},r,i);const f=()=>{const b=a.partialize({...r()});return p.setItem(a.name,{state:b,version:a.version})},m=i.setState;i.setState=(b,k)=>{m(b,k),f()};const g=e((...b)=>{n(...b),f()},r,i);i.getInitialState=()=>g;let v;const w=()=>{var b,k;if(!p)return;c=!1,u.forEach(N=>{var S;return N((S=r())!=null?S:g)});const _=((k=a.onRehydrateStorage)==null?void 0:k.call(a,(b=r())!=null?b:g))||void 0;return za(p.getItem.bind(p))(a.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==a.version){if(a.migrate)return[!0,a.migrate(N.state,N.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var S;const[A,P]=N;if(v=a.merge(P,(S=r())!=null?S:g),n(v,!0),A)return f()}).then(()=>{_?.(v,void 0),v=r(),c=!0,d.forEach(N=>N(v))}).catch(N=>{_?.(void 0,N)})};return i.persist={setOptions:b=>{a={...a,...b},b.storage&&(p=b.storage)},clearStorage:()=>{p?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>w(),hasHydrated:()=>c,onHydrate:b=>(u.add(b),()=>{u.delete(b)}),onFinishHydration:b=>(d.add(b),()=>{d.delete(b)})},a.skipHydration||w(),v||g},X4=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((W4?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),G4(e,t)):Y4(e,t),gA=X4,Q4={bgPrimary:"#F7F8FA",bgSecondary:"#FFFFFF",bgCanvas:"#F0F2F5",surfaceCard:"#FFFFFF",surfacePanel:"#FFFFFF",borderDefault:"#E3E6EA",borderFocus:"#0F8A8A",textPrimary:"#1C232B",textSecondary:"#4A5568",textMuted:"#A0AEC0",accentPrimary:"#0F8A8A",accentWarning:"#F59F00",accentSuccess:"#38A169",accentError:"#E53E3E",nodeAgent:"#3182CE",nodeSequential:"#805AD5",nodeLoop:"#D69E2E",nodeParallel:"#38A169",nodeRouter:"#DD6B20",gridColor:"#E3E6EA",handleColor:"#0F8A8A",minimapMask:"rgba(247, 248, 250, 0.8)",controlsBg:"#FFFFFF",controlsBorder:"#E3E6EA"},J4={bgPrimary:"#1a1a2e",bgSecondary:"#16213e",bgCanvas:"#0f0f1a",surfaceCard:"#1e2a4a",surfacePanel:"#16213e",borderDefault:"#2d3748",borderFocus:"#4fd1c5",textPrimary:"#F7FAFC",textSecondary:"#A0AEC0",textMuted:"#718096",accentPrimary:"#4fd1c5",accentWarning:"#F6AD55",accentSuccess:"#68D391",accentError:"#FC8181",nodeAgent:"#63B3ED",nodeSequential:"#B794F4",nodeLoop:"#F6E05E",nodeParallel:"#68D391",nodeRouter:"#F6AD55",gridColor:"#333333",handleColor:"#e94560",minimapMask:"rgba(0, 0, 0, 0.8)",controlsBg:"#16213e",controlsBorder:"#e94560"};function Z4(e){return e==="light"?Q4:J4}const eF="adk-studio-theme",vi=Ja()(gA((e,t)=>({mode:"light",setMode:n=>e({mode:n}),toggle:()=>e(n=>({mode:n.mode==="light"?"dark":"light"})),getTokens:()=>Z4(t().mode)}),{name:eF,partialize:e=>({mode:e.mode})})),tF=["0.2.2","0.2.1","0.2.0","0.1.9","0.1.0"],nF=["2024","2021"];function yA({onClose:e,onThemeChange:t}){const[n,r]=E.useState("defaults"),[i,a]=E.useState(Ev),{mode:c,setMode:u}=vi();E.useEffect(()=>{a(fs())},[]);const d=()=>{z4(i),t&&t(i.theme),i.theme!=="system"&&u(i.theme),e()},p=(g,v)=>{a(w=>({...w,[g]:v}))},f=bn.find(g=>g.id===i.defaultProvider)||bn[0],m=[{id:"defaults",label:"Defaults",icon:""},{id:"codegen",label:"Code Generation",icon:""},{id:"ui",label:"UI Preferences",icon:""},{id:"build",label:"Build Settings",icon:""}];return s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:e,children:s.jsxs("div",{className:"rounded-lg w-[600px] max-h-[80vh] flex flex-col",style:{backgroundColor:"var(--surface-panel)"},onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:" Global Settings"}),s.jsx("button",{onClick:e,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsxs("div",{className:"mx-4 mt-4 p-3 rounded text-xs",style:{backgroundColor:"rgba(59, 130, 246, 0.1)",border:"1px solid var(--accent-primary)",color:"var(--text-secondary)"},children:[s.jsx("div",{className:"font-medium mb-1",style:{color:"var(--accent-primary)"},children:" Global Settings"}),s.jsx("p",{children:"These settings apply as defaults for all new projects. Individual projects can override these in their own settings."})]}),s.jsx("div",{className:"flex border-b mt-4",style:{borderColor:"var(--border-default)"},children:m.map(g=>s.jsxs("button",{onClick:()=>r(g.id),className:"px-4 py-2 text-sm font-medium transition-colors",style:{color:n===g.id?"var(--accent-primary)":"var(--text-secondary)",borderBottom:n===g.id?"2px solid var(--accent-primary)":"2px solid transparent"},children:[g.icon," ",g.label]},g.id))}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[n==="defaults"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ki,{label:"Default Provider",hint:"Provider for new agents",children:s.jsx("select",{value:i.defaultProvider,onChange:g=>{const v=bn.find(w=>w.id===g.target.value);p("defaultProvider",g.target.value),v&&v.models.length>0&&p("defaultModel",v.models[0].id)},className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:bn.map(g=>s.jsxs("option",{value:g.id,children:[g.icon," ",g.name]},g.id))})}),s.jsx(Ki,{label:"Default Model",hint:"Model for new agents",children:s.jsx("select",{value:i.defaultModel,onChange:g=>p("defaultModel",g.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:f.models.map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))})}),s.jsx(Ki,{label:"Default Layout Mode",children:s.jsxs("select",{value:i.layoutMode,onChange:g=>p("layoutMode",g.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"free",children:"Free (drag anywhere)"}),s.jsx("option",{value:"fixed",children:"Fixed (auto-layout)"})]})}),s.jsx(Ki,{label:"Default Layout Direction",children:s.jsxs("select",{value:i.layoutDirection,onChange:g=>p("layoutDirection",g.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"TB",children:"Top to Bottom "}),s.jsx("option",{value:"LR",children:"Left to Right "}),s.jsx("option",{value:"BT",children:"Bottom to Top "}),s.jsx("option",{value:"RL",children:"Right to Left "})]})})]}),n==="codegen"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ki,{label:"ADK-Rust Version",hint:"Default version for generated code",children:s.jsx("select",{value:i.adkVersion,onChange:g=>p("adkVersion",g.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:tF.map(g=>s.jsxs("option",{value:g,children:[g,g==="0.2.2"?" (latest)":""]},g))})}),s.jsx(Ki,{label:"Rust Edition",hint:"Default edition for Cargo.toml",children:s.jsx("select",{value:i.rustEdition,onChange:g=>p("rustEdition",g.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:nF.map(g=>s.jsxs("option",{value:g,children:[g,g==="2024"?" (latest)":""]},g))})}),s.jsxs("div",{className:"p-3 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)"},children:[s.jsx("div",{className:"font-medium mb-1",children:"Generated Code Preview:"}),s.jsxs("code",{className:"block font-mono",children:["[package]",s.jsx("br",{}),'edition = "',i.rustEdition,'"',s.jsx("br",{}),s.jsx("br",{}),"[dependencies]",s.jsx("br",{}),'adk-core = "',i.adkVersion,'"',s.jsx("br",{}),'adk-agent = "',i.adkVersion,'"',s.jsx("br",{}),"..."]})]})]}),n==="ui"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(Ki,{label:"Theme",children:s.jsxs("select",{value:i.theme,onChange:g=>p("theme",g.target.value),className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsx("option",{value:"dark",children:" Dark"}),s.jsx("option",{value:"light",children:" Light"}),s.jsx("option",{value:"system",children:" System"})]})}),s.jsx(wc,{label:"Show Minimap",hint:"Display minimap in canvas corner by default",checked:i.showMinimap,onChange:g=>p("showMinimap",g)}),s.jsx(wc,{label:"Show Timeline",hint:"Display execution timeline during runs by default",checked:i.showTimeline,onChange:g=>p("showTimeline",g)}),s.jsx(wc,{label:"Show Data Flow Overlay",hint:"Display state keys on edges by default",checked:i.showDataFlowOverlay,onChange:g=>p("showDataFlowOverlay",g)})]}),n==="build"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(wc,{label:"Autobuild Enabled",hint:"Automatically rebuild when project changes",checked:i.autobuildEnabled,onChange:g=>p("autobuildEnabled",g)}),i.autobuildEnabled&&s.jsxs("div",{className:"p-3 rounded space-y-2",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)"},children:[s.jsx("div",{className:"text-xs font-medium mb-2",style:{color:"var(--text-muted)"},children:"Default Autobuild Triggers:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(Gi,{label:"Agent Add",checked:i.autobuildTriggers.onAgentAdd,onChange:g=>p("autobuildTriggers",{...i.autobuildTriggers,onAgentAdd:g})}),s.jsx(Gi,{label:"Agent Delete",checked:i.autobuildTriggers.onAgentDelete,onChange:g=>p("autobuildTriggers",{...i.autobuildTriggers,onAgentDelete:g})}),s.jsx(Gi,{label:"Agent Update",checked:i.autobuildTriggers.onAgentUpdate,onChange:g=>p("autobuildTriggers",{...i.autobuildTriggers,onAgentUpdate:g})}),s.jsx(Gi,{label:"Tool Add",checked:i.autobuildTriggers.onToolAdd,onChange:g=>p("autobuildTriggers",{...i.autobuildTriggers,onToolAdd:g})}),s.jsx(Gi,{label:"Tool Update",checked:i.autobuildTriggers.onToolUpdate,onChange:g=>p("autobuildTriggers",{...i.autobuildTriggers,onToolUpdate:g})}),s.jsx(Gi,{label:"Edge Add",checked:i.autobuildTriggers.onEdgeAdd,onChange:g=>p("autobuildTriggers",{...i.autobuildTriggers,onEdgeAdd:g})}),s.jsx(Gi,{label:"Edge Delete",checked:i.autobuildTriggers.onEdgeDelete,onChange:g=>p("autobuildTriggers",{...i.autobuildTriggers,onEdgeDelete:g})})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",style:{borderColor:"var(--border-default)"},children:[s.jsx("button",{onClick:e,className:"px-4 py-2 rounded text-sm font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Cancel"}),s.jsx("button",{onClick:d,className:"px-4 py-2 rounded text-sm font-medium",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Save Settings"})]})]})})}function Ki({label:e,hint:t,children:n}){return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-1",style:{color:"var(--text-secondary)"},children:[e,t&&s.jsxs("span",{className:"font-normal ml-1",style:{color:"var(--text-muted)"},children:["(",t,")"]})]}),n]})}function wc({label:e,hint:t,checked:n,onChange:r}){return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:e}),t&&s.jsx("div",{className:"text-xs",style:{color:"var(--text-muted)"},children:t})]}),s.jsx("button",{onClick:()=>r(!n),className:"w-12 h-6 rounded-full transition-colors relative",style:{backgroundColor:n?"var(--accent-primary)":"var(--bg-secondary)"},children:s.jsx("div",{className:"w-5 h-5 rounded-full bg-white absolute top-0.5 transition-transform",style:{transform:n?"translateX(26px)":"translateX(2px)"}})})]})}function Gi({label:e,checked:t,onChange:n}){return s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:t,onChange:r=>n(r.target.checked),className:"w-4 h-4 rounded",style:{accentColor:"var(--accent-primary)"}}),s.jsx("span",{className:"text-xs",style:{color:"var(--text-secondary)"},children:e})]})}function rF(){const{projects:e,loadingProjects:t,createProject:n,openProject:r,deleteProject:i}=gt(),[a,c]=E.useState(!1),[u,d]=E.useState(""),[p,f]=E.useState(null),[m,g]=E.useState(null),[v,w]=E.useState(!1),b=async()=>{if(!u.trim())return;const N=await n(u.trim());d(""),c(!1),r(N.id)},k=async(N,S)=>{N.stopPropagation();const{api:A}=await C_(async()=>{const{api:T}=await Promise.resolve().then(()=>j_);return{api:T}},void 0),P=await A.projects.get(S);f(S),g({name:P.name,description:P.description,settings:P.settings})},_=async(N,S,A)=>{if(!p)return;const{api:P}=await C_(async()=>{const{api:z}=await Promise.resolve().then(()=>j_);return{api:z}},void 0),T=await P.projects.get(p);await P.projects.update(p,{...T,name:S,description:A,settings:N});const{fetchProjects:C}=gt.getState();await C(),f(null),g(null)};return s.jsxs("div",{className:"p-8 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-theme-primary",children:"Projects"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-theme-secondary text-theme-primary border border-theme-default rounded hover:border-studio-accent font-medium",title:"Global Settings",children:" Settings"}),s.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-studio-highlight text-white rounded hover:opacity-90 font-medium",children:"+ New Project"})]})]}),a&&s.jsxs("div",{className:"mb-6 p-4 bg-theme-card rounded-lg border border-theme-default shadow-md",children:[s.jsx("input",{type:"text",placeholder:"Project name",value:u,onChange:N=>d(N.target.value),onKeyDown:N=>N.key==="Enter"&&b(),className:"w-full px-3 py-2 bg-theme-secondary border border-theme-default rounded mb-3 text-theme-primary placeholder-theme-muted focus:border-studio-accent focus:outline-none",autoFocus:!0}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:b,className:"px-4 py-2 bg-studio-highlight text-white rounded font-medium",children:"Create"}),s.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-theme-secondary text-theme-primary border border-theme-default rounded",children:"Cancel"})]})]}),t?s.jsx("div",{className:"text-theme-muted",children:"Loading..."}):e.length===0?s.jsx("div",{className:"text-theme-muted text-center py-12",children:"No projects yet. Create one to get started!"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(N=>s.jsxs("div",{className:"p-4 bg-theme-card rounded-lg border border-theme-default hover:border-studio-accent cursor-pointer group shadow-sm hover:shadow-md transition-shadow",onClick:()=>r(N.id),children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("span",{className:"font-medium text-theme-primary",children:[" ",N.name]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:S=>k(S,N.id),className:"opacity-0 group-hover:opacity-100 text-theme-muted hover:text-theme-primary transition-opacity",title:"Project Settings",children:""}),s.jsx("button",{onClick:S=>{S.stopPropagation(),confirm("Delete?")&&i(N.id)},className:"opacity-0 group-hover:opacity-100 text-theme-muted hover:text-red-500 transition-opacity",children:""})]})]}),N.description&&s.jsx("p",{className:"text-sm text-theme-secondary mt-2",children:N.description}),s.jsx("p",{className:"text-xs text-theme-muted mt-2",children:new Date(N.updated_at).toLocaleDateString()})]},N.id))}),m&&s.jsx(mA,{settings:m.settings,projectName:m.name,projectDescription:m.description,onSave:_,onClose:()=>{f(null),g(null)}}),v&&s.jsx(yA,{onClose:()=>w(!1)})]})}function iF(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const oF=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sF=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,aF={};function T_(e,t){return(aF.jsx?sF:oF).test(e)}const lF=/[ \t\n\f\r]/g;function cF(e){return typeof e=="object"?e.type==="text"?A_(e.value):!1:A_(e)}function A_(e){return e.replace(lF,"")===""}class Za{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Za.prototype.normal={};Za.prototype.property={};Za.prototype.space=void 0;function vA(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Za(n,r,t)}function Cv(e){return e.toLowerCase()}class cn{constructor(t,n){this.attribute=n,this.property=t}}cn.prototype.attribute="";cn.prototype.booleanish=!1;cn.prototype.boolean=!1;cn.prototype.commaOrSpaceSeparated=!1;cn.prototype.commaSeparated=!1;cn.prototype.defined=!1;cn.prototype.mustUseProperty=!1;cn.prototype.number=!1;cn.prototype.overloadedBoolean=!1;cn.prototype.property="";cn.prototype.spaceSeparated=!1;cn.prototype.space=void 0;let uF=0;const Fe=oo(),kt=oo(),Tv=oo(),he=oo(),Je=oo(),rs=oo(),yn=oo();function oo(){return 2**++uF}const Av=Object.freeze(Object.defineProperty({__proto__:null,boolean:Fe,booleanish:kt,commaOrSpaceSeparated:yn,commaSeparated:rs,number:he,overloadedBoolean:Tv,spaceSeparated:Je},Symbol.toStringTag,{value:"Module"})),Tp=Object.keys(Av);class dx extends cn{constructor(t,n,r,i){let a=-1;if(super(t,n),P_(this,"space",i),typeof r=="number")for(;++a<Tp.length;){const c=Tp[a];P_(this,Tp[a],(r&Av[c])===Av[c])}}}dx.prototype.defined=!0;function P_(e,t,n){n&&(e[t]=n)}function hs(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const a=new dx(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[Cv(r)]=r,n[Cv(a.attribute)]=r}return new Za(t,n,e.space)}const xA=hs({properties:{ariaActiveDescendant:null,ariaAtomic:kt,ariaAutoComplete:null,ariaBusy:kt,ariaChecked:kt,ariaColCount:he,ariaColIndex:he,ariaColSpan:he,ariaControls:Je,ariaCurrent:null,ariaDescribedBy:Je,ariaDetails:null,ariaDisabled:kt,ariaDropEffect:Je,ariaErrorMessage:null,ariaExpanded:kt,ariaFlowTo:Je,ariaGrabbed:kt,ariaHasPopup:null,ariaHidden:kt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Je,ariaLevel:he,ariaLive:null,ariaModal:kt,ariaMultiLine:kt,ariaMultiSelectable:kt,ariaOrientation:null,ariaOwns:Je,ariaPlaceholder:null,ariaPosInSet:he,ariaPressed:kt,ariaReadOnly:kt,ariaRelevant:null,ariaRequired:kt,ariaRoleDescription:Je,ariaRowCount:he,ariaRowIndex:he,ariaRowSpan:he,ariaSelected:kt,ariaSetSize:he,ariaSort:null,ariaValueMax:he,ariaValueMin:he,ariaValueNow:he,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function bA(e,t){return t in e?e[t]:t}function wA(e,t){return bA(e,t.toLowerCase())}const dF=hs({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:rs,acceptCharset:Je,accessKey:Je,action:null,allow:null,allowFullScreen:Fe,allowPaymentRequest:Fe,allowUserMedia:Fe,alt:null,as:null,async:Fe,autoCapitalize:null,autoComplete:Je,autoFocus:Fe,autoPlay:Fe,blocking:Je,capture:null,charSet:null,checked:Fe,cite:null,className:Je,cols:he,colSpan:null,content:null,contentEditable:kt,controls:Fe,controlsList:Je,coords:he|rs,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Fe,defer:Fe,dir:null,dirName:null,disabled:Fe,download:Tv,draggable:kt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Fe,formTarget:null,headers:Je,height:he,hidden:Tv,high:he,href:null,hrefLang:null,htmlFor:Je,httpEquiv:Je,id:null,imageSizes:null,imageSrcSet:null,inert:Fe,inputMode:null,integrity:null,is:null,isMap:Fe,itemId:null,itemProp:Je,itemRef:Je,itemScope:Fe,itemType:Je,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Fe,low:he,manifest:null,max:null,maxLength:he,media:null,method:null,min:null,minLength:he,multiple:Fe,muted:Fe,name:null,nonce:null,noModule:Fe,noValidate:Fe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Fe,optimum:he,pattern:null,ping:Je,placeholder:null,playsInline:Fe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Fe,referrerPolicy:null,rel:Je,required:Fe,reversed:Fe,rows:he,rowSpan:he,sandbox:Je,scope:null,scoped:Fe,seamless:Fe,selected:Fe,shadowRootClonable:Fe,shadowRootDelegatesFocus:Fe,shadowRootMode:null,shape:null,size:he,sizes:null,slot:null,span:he,spellCheck:kt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:he,step:null,style:null,tabIndex:he,target:null,title:null,translate:null,type:null,typeMustMatch:Fe,useMap:null,value:kt,width:he,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Je,axis:null,background:null,bgColor:null,border:he,borderColor:null,bottomMargin:he,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Fe,declare:Fe,event:null,face:null,frame:null,frameBorder:null,hSpace:he,leftMargin:he,link:null,longDesc:null,lowSrc:null,marginHeight:he,marginWidth:he,noResize:Fe,noHref:Fe,noShade:Fe,noWrap:Fe,object:null,profile:null,prompt:null,rev:null,rightMargin:he,rules:null,scheme:null,scrolling:kt,standby:null,summary:null,text:null,topMargin:he,valueType:null,version:null,vAlign:null,vLink:null,vSpace:he,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Fe,disableRemotePlayback:Fe,prefix:null,property:null,results:he,security:null,unselectable:null},space:"html",transform:wA}),pF=hs({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:yn,accentHeight:he,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:he,amplitude:he,arabicForm:null,ascent:he,attributeName:null,attributeType:null,azimuth:he,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:he,by:null,calcMode:null,capHeight:he,className:Je,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:he,diffuseConstant:he,direction:null,display:null,dur:null,divisor:he,dominantBaseline:null,download:Fe,dx:null,dy:null,edgeMode:null,editable:null,elevation:he,enableBackground:null,end:null,event:null,exponent:he,externalResourcesRequired:null,fill:null,fillOpacity:he,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:rs,g2:rs,glyphName:rs,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:he,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:he,horizOriginX:he,horizOriginY:he,id:null,ideographic:he,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:he,k:he,k1:he,k2:he,k3:he,k4:he,kernelMatrix:yn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:he,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:he,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:he,overlineThickness:he,paintOrder:null,panose1:null,path:null,pathLength:he,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Je,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:he,pointsAtY:he,pointsAtZ:he,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:yn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:yn,rev:yn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:yn,requiredFeatures:yn,requiredFonts:yn,requiredFormats:yn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:he,specularExponent:he,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:he,strikethroughThickness:he,string:null,stroke:null,strokeDashArray:yn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:he,strokeOpacity:he,strokeWidth:null,style:null,surfaceScale:he,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:yn,tabIndex:he,tableValues:null,target:null,targetX:he,targetY:he,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:yn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:he,underlineThickness:he,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:he,values:null,vAlphabetic:he,vMathematical:he,vectorEffect:null,vHanging:he,vIdeographic:he,version:null,vertAdvY:he,vertOriginX:he,vertOriginY:he,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:he,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:bA}),_A=hs({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),kA=hs({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:wA}),SA=hs({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),fF={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},hF=/[A-Z]/g,I_=/-[a-z]/g,mF=/^data[-\w.:]+$/i;function gF(e,t){const n=Cv(t);let r=t,i=cn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&mF.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(I_,vF);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!I_.test(a)){let c=a.replace(hF,yF);c.charAt(0)!=="-"&&(c="-"+c),t="data"+c}}i=dx}return new i(r,t)}function yF(e){return"-"+e.toLowerCase()}function vF(e){return e.charAt(1).toUpperCase()}const xF=vA([xA,dF,_A,kA,SA],"html"),px=vA([xA,pF,_A,kA,SA],"svg");function bF(e){return e.join(" ").trim()}var Ko={},Ap,R_;function wF(){if(R_)return Ap;R_=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,u=/^\s+|\s+$/g,d=`
`,p="/",f="*",m="",g="comment",v="declaration";function w(k,_){if(typeof k!="string")throw new TypeError("First argument must be a string");if(!k)return[];_=_||{};var N=1,S=1;function A(R){var M=R.match(t);M&&(N+=M.length);var H=R.lastIndexOf(d);S=~H?R.length-H:S+R.length}function P(){var R={line:N,column:S};return function(M){return M.position=new T(R),F(),M}}function T(R){this.start=R,this.end={line:N,column:S},this.source=_.source}T.prototype.content=k;function C(R){var M=new Error(_.source+":"+N+":"+S+": "+R);if(M.reason=R,M.filename=_.source,M.line=N,M.column=S,M.source=k,!_.silent)throw M}function z(R){var M=R.exec(k);if(M){var H=M[0];return A(H),k=k.slice(H.length),M}}function F(){z(n)}function V(R){var M;for(R=R||[];M=L();)M!==!1&&R.push(M);return R}function L(){var R=P();if(!(p!=k.charAt(0)||f!=k.charAt(1))){for(var M=2;m!=k.charAt(M)&&(f!=k.charAt(M)||p!=k.charAt(M+1));)++M;if(M+=2,m===k.charAt(M-1))return C("End of comment missing");var H=k.slice(2,M-2);return S+=2,A(H),k=k.slice(M),S+=2,R({type:g,comment:H})}}function q(){var R=P(),M=z(r);if(M){if(L(),!z(i))return C("property missing ':'");var H=z(a),X=R({type:v,property:b(M[0].replace(e,m)),value:H?b(H[0].replace(e,m)):m});return z(c),X}}function G(){var R=[];V(R);for(var M;M=q();)M!==!1&&(R.push(M),V(R));return R}return F(),G()}function b(k){return k?k.replace(u,m):m}return Ap=w,Ap}var O_;function _F(){if(O_)return Ko;O_=1;var e=Ko&&Ko.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.default=n;const t=e(wF());function n(r,i){let a=null;if(!r||typeof r!="string")return a;const c=(0,t.default)(r),u=typeof i=="function";return c.forEach(d=>{if(d.type!=="declaration")return;const{property:p,value:f}=d;u?i(p,f,d):f&&(a=a||{},a[p]=f)}),a}return Ko}var pa={},M_;function kF(){if(M_)return pa;M_=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(p){return!p||n.test(p)||e.test(p)},c=function(p,f){return f.toUpperCase()},u=function(p,f){return"".concat(f,"-")},d=function(p,f){return f===void 0&&(f={}),a(p)?p:(p=p.toLowerCase(),f.reactCompat?p=p.replace(i,u):p=p.replace(r,u),p.replace(t,c))};return pa.camelCase=d,pa}var fa,L_;function SF(){if(L_)return fa;L_=1;var e=fa&&fa.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(_F()),n=kF();function r(i,a){var c={};return!i||typeof i!="string"||(0,t.default)(i,function(u,d){u&&d&&(c[(0,n.camelCase)(u,a)]=d)}),c}return r.default=r,fa=r,fa}var NF=SF();const jF=ps(NF),NA=jA("end"),fx=jA("start");function jA(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function EF(e){const t=fx(e),n=NA(e);if(t&&n)return{start:t,end:n}}function ja(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?D_(e.position):"start"in e||"end"in e?D_(e):"line"in e||"column"in e?Pv(e):""}function Pv(e){return q_(e&&e.line)+":"+q_(e&&e.column)}function D_(e){return Pv(e&&e.start)+"-"+Pv(e&&e.end)}function q_(e){return e&&typeof e=="number"?e:1}class Vt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},c=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?i=t:!a.cause&&t&&(c=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?a.ruleId=r:(a.source=r.slice(0,d),a.ruleId=r.slice(d+1))}if(!a.place&&a.ancestors&&a.ancestors){const d=a.ancestors[a.ancestors.length-1];d&&(a.place=d.position)}const u=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=u?u.line:void 0,this.name=ja(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=c&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Vt.prototype.file="";Vt.prototype.name="";Vt.prototype.reason="";Vt.prototype.message="";Vt.prototype.stack="";Vt.prototype.column=void 0;Vt.prototype.line=void 0;Vt.prototype.ancestors=void 0;Vt.prototype.cause=void 0;Vt.prototype.fatal=void 0;Vt.prototype.place=void 0;Vt.prototype.ruleId=void 0;Vt.prototype.source=void 0;const hx={}.hasOwnProperty,CF=new Map,TF=/[A-Z]/g,AF=new Set(["table","tbody","thead","tfoot","tr"]),PF=new Set(["td","th"]),EA="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function IF(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=zF(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=FF(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?px:xF,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=CA(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function CA(e,t,n){if(t.type==="element")return RF(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return OF(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return LF(e,t,n);if(t.type==="mdxjsEsm")return MF(e,t);if(t.type==="root")return DF(e,t,n);if(t.type==="text")return qF(e,t)}function RF(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=px,e.schema=i),e.ancestors.push(t);const a=AA(e,t.tagName,!1),c=BF(e,t);let u=gx(e,t);return AF.has(t.tagName)&&(u=u.filter(function(d){return typeof d=="string"?!cF(d):!0})),TA(e,c,a,t),mx(c,u),e.ancestors.pop(),e.schema=r,e.create(t,a,c,n)}function OF(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Ba(e,t.position)}function MF(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ba(e,t.position)}function LF(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=px,e.schema=i),e.ancestors.push(t);const a=t.name===null?e.Fragment:AA(e,t.name,!0),c=$F(e,t),u=gx(e,t);return TA(e,c,a,t),mx(c,u),e.ancestors.pop(),e.schema=r,e.create(t,a,c,n)}function DF(e,t,n){const r={};return mx(r,gx(e,t)),e.create(t,e.Fragment,r,n)}function qF(e,t){return t.value}function TA(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function mx(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function FF(e,t,n){return r;function r(i,a,c,u){const p=Array.isArray(c.children)?n:t;return u?p(a,c,u):p(a,c)}}function zF(e,t){return n;function n(r,i,a,c){const u=Array.isArray(a.children),d=fx(r);return t(i,a,c,u,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function BF(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&hx.call(t.properties,i)){const a=HF(e,i,t.properties[i]);if(a){const[c,u]=a;e.tableCellAlignToStyle&&c==="align"&&typeof u=="string"&&PF.has(t.tagName)?r=u:n[c]=u}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function $F(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const c=a.expression;c.type;const u=c.properties[0];u.type,Object.assign(n,e.evaluater.evaluateExpression(u.argument))}else Ba(e,t.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const u=r.value.data.estree.body[0];u.type,a=e.evaluater.evaluateExpression(u.expression)}else Ba(e,t.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function gx(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:CF;for(;++r<t.children.length;){const a=t.children[r];let c;if(e.passKeys){const d=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(d){const p=i.get(d)||0;c=d+"-"+p,i.set(d,p+1)}}const u=CA(e,a,c);u!==void 0&&n.push(u)}return n}function HF(e,t,n){const r=gF(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?iF(n):bF(n)),r.property==="style"){let i=typeof n=="object"?n:VF(e,String(n));return e.stylePropertyNameCase==="css"&&(i=UF(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?fF[r.property]||r.property:r.attribute,n]}}function VF(e,t){try{return jF(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new Vt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=EA+"#cannot-parse-style-attribute",i}}function AA(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let a=-1,c;for(;++a<i.length;){const u=T_(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};c=c?{type:"MemberExpression",object:c,property:u,computed:!!(a&&u.type==="Literal"),optional:!1}:u}r=c}else r=T_(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return hx.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);Ba(e)}function Ba(e,t){const n=new Vt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=EA+"#cannot-handle-mdx-estrees-without-createevaluater",n}function UF(e){const t={};let n;for(n in e)hx.call(e,n)&&(t[WF(n)]=e[n]);return t}function WF(e){let t=e.replace(TF,KF);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function KF(e){return"-"+e.toLowerCase()}const Pp={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},GF={};function YF(e,t){const n=GF,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return PA(e,r,i)}function PA(e,t,n){if(XF(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return F_(e.children,t,n)}return Array.isArray(e)?F_(e,t,n):""}function F_(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=PA(e[i],t,n);return r.join("")}function XF(e){return!!(e&&typeof e=="object")}const z_=document.createElement("i");function yx(e){const t="&"+e+";";z_.innerHTML=t;const n=z_.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ur(e,t,n,r){const i=e.length;let a=0,c;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)c=Array.from(r),c.unshift(t,n),e.splice(...c);else for(n&&e.splice(t,n);a<r.length;)c=r.slice(a,a+1e4),c.unshift(t,0),e.splice(...c),a+=1e4,t+=1e4}function An(e,t){return e.length>0?(ur(e,e.length,0,t),e):t}const B_={}.hasOwnProperty;function QF(e){const t={};let n=-1;for(;++n<e.length;)JF(t,e[n]);return t}function JF(e,t){let n;for(n in t){const i=(B_.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let c;if(a)for(c in a){B_.call(i,c)||(i[c]=[]);const u=a[c];ZF(i[c],Array.isArray(u)?u:u?[u]:[])}}}function ZF(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ur(e,0,0,r)}function IA(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function is(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ar=xi(/[A-Za-z]/),wn=xi(/[\dA-Za-z]/),ez=xi(/[#-'*+\--9=?A-Z^-~]/);function Iv(e){return e!==null&&(e<32||e===127)}const Rv=xi(/\d/),tz=xi(/[\dA-Fa-f]/),nz=xi(/[!-/:-@[-`{-~]/);function Oe(e){return e!==null&&e<-2}function an(e){return e!==null&&(e<0||e===32)}function Ge(e){return e===-2||e===-1||e===32}const rz=xi(new RegExp("\\p{P}|\\p{S}","u")),iz=xi(/\s/);function xi(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function ms(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const a=e.charCodeAt(n);let c="";if(a===37&&wn(e.charCodeAt(n+1))&&wn(e.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(c=String.fromCharCode(a));else if(a>55295&&a<57344){const u=e.charCodeAt(n+1);a<56320&&u>56319&&u<57344?(c=String.fromCharCode(a,u),i=1):c=""}else c=String.fromCharCode(a);c&&(t.push(e.slice(r,n),encodeURIComponent(c)),r=n+i+1,c=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function et(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return c;function c(d){return Ge(d)?(e.enter(n),u(d)):t(d)}function u(d){return Ge(d)&&a++<i?(e.consume(d),u):(e.exit(n),t(d))}}const oz={tokenize:sz};function sz(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),et(e,t,"linePrefix")}function i(u){return e.enter("paragraph"),a(u)}function a(u){const d=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,c(u)}function c(u){if(u===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(u);return}return Oe(u)?(e.consume(u),e.exit("chunkText"),a):(e.consume(u),c)}}const az={tokenize:lz},$_={tokenize:cz};function lz(e){const t=this,n=[];let r=0,i,a,c;return u;function u(S){if(r<n.length){const A=n[r];return t.containerState=A[1],e.attempt(A[0].continuation,d,p)(S)}return p(S)}function d(S){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&N();const A=t.events.length;let P=A,T;for(;P--;)if(t.events[P][0]==="exit"&&t.events[P][1].type==="chunkFlow"){T=t.events[P][1].end;break}_(r);let C=A;for(;C<t.events.length;)t.events[C][1].end={...T},C++;return ur(t.events,P+1,0,t.events.slice(A)),t.events.length=C,p(S)}return u(S)}function p(S){if(r===n.length){if(!i)return g(S);if(i.currentConstruct&&i.currentConstruct.concrete)return w(S);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check($_,f,m)(S)}function f(S){return i&&N(),_(r),g(S)}function m(S){return t.parser.lazy[t.now().line]=r!==n.length,c=t.now().offset,w(S)}function g(S){return t.containerState={},e.attempt($_,v,w)(S)}function v(S){return r++,n.push([t.currentConstruct,t.containerState]),g(S)}function w(S){if(S===null){i&&N(),_(0),e.consume(S);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),b(S)}function b(S){if(S===null){k(e.exit("chunkFlow"),!0),_(0),e.consume(S);return}return Oe(S)?(e.consume(S),k(e.exit("chunkFlow")),r=0,t.interrupt=void 0,u):(e.consume(S),b)}function k(S,A){const P=t.sliceStream(S);if(A&&P.push(null),S.previous=a,a&&(a.next=S),a=S,i.defineSkip(S.start),i.write(P),t.parser.lazy[S.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<c&&(!i.events[T][1].end||i.events[T][1].end.offset>c))return;const C=t.events.length;let z=C,F,V;for(;z--;)if(t.events[z][0]==="exit"&&t.events[z][1].type==="chunkFlow"){if(F){V=t.events[z][1].end;break}F=!0}for(_(r),T=C;T<t.events.length;)t.events[T][1].end={...V},T++;ur(t.events,z+1,0,t.events.slice(C)),t.events.length=T}}function _(S){let A=n.length;for(;A-- >S;){const P=n[A];t.containerState=P[1],P[0].exit.call(t,e)}n.length=S}function N(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function cz(e,t,n){return et(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function H_(e){if(e===null||an(e)||iz(e))return 1;if(rz(e))return 2}function vx(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const Ov={name:"attention",resolveAll:uz,tokenize:dz};function uz(e,t){let n=-1,r,i,a,c,u,d,p,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;d=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const m={...e[r][1].end},g={...e[n][1].start};V_(m,-d),V_(g,d),c={type:d>1?"strongSequence":"emphasisSequence",start:m,end:{...e[r][1].end}},u={type:d>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:g},a={type:d>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:d>1?"strong":"emphasis",start:{...c.start},end:{...u.end}},e[r][1].end={...c.start},e[n][1].start={...u.end},p=[],e[r][1].end.offset-e[r][1].start.offset&&(p=An(p,[["enter",e[r][1],t],["exit",e[r][1],t]])),p=An(p,[["enter",i,t],["enter",c,t],["exit",c,t],["enter",a,t]]),p=An(p,vx(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),p=An(p,[["exit",a,t],["enter",u,t],["exit",u,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,p=An(p,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,ur(e,r-1,n-r+3,p),n=r+p.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function dz(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=H_(r);let a;return c;function c(d){return a=d,e.enter("attentionSequence"),u(d)}function u(d){if(d===a)return e.consume(d),u;const p=e.exit("attentionSequence"),f=H_(d),m=!f||f===2&&i||n.includes(d),g=!i||i===2&&f||n.includes(r);return p._open=!!(a===42?m:m&&(i||!g)),p._close=!!(a===42?g:g&&(f||!m)),t(d)}}function V_(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const pz={name:"autolink",tokenize:fz};function fz(e,t,n){let r=0;return i;function i(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(v){return ar(v)?(e.consume(v),c):v===64?n(v):p(v)}function c(v){return v===43||v===45||v===46||wn(v)?(r=1,u(v)):p(v)}function u(v){return v===58?(e.consume(v),r=0,d):(v===43||v===45||v===46||wn(v))&&r++<32?(e.consume(v),u):(r=0,p(v))}function d(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||Iv(v)?n(v):(e.consume(v),d)}function p(v){return v===64?(e.consume(v),f):ez(v)?(e.consume(v),p):n(v)}function f(v){return wn(v)?m(v):n(v)}function m(v){return v===46?(e.consume(v),r=0,f):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):g(v)}function g(v){if((v===45||wn(v))&&r++<63){const w=v===45?g:m;return e.consume(v),w}return n(v)}}const mu={partial:!0,tokenize:hz};function hz(e,t,n){return r;function r(a){return Ge(a)?et(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||Oe(a)?t(a):n(a)}}const RA={continuation:{tokenize:gz},exit:yz,name:"blockQuote",tokenize:mz};function mz(e,t,n){const r=this;return i;function i(c){if(c===62){const u=r.containerState;return u.open||(e.enter("blockQuote",{_container:!0}),u.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(c),e.exit("blockQuoteMarker"),a}return n(c)}function a(c){return Ge(c)?(e.enter("blockQuotePrefixWhitespace"),e.consume(c),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(c))}}function gz(e,t,n){const r=this;return i;function i(c){return Ge(c)?et(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):a(c)}function a(c){return e.attempt(RA,t,n)(c)}}function yz(e){e.exit("blockQuote")}const OA={name:"characterEscape",tokenize:vz};function vz(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return nz(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const MA={name:"characterReference",tokenize:xz};function xz(e,t,n){const r=this;let i=0,a,c;return u;function u(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),d}function d(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),p):(e.enter("characterReferenceValue"),a=31,c=wn,f(m))}function p(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,c=tz,f):(e.enter("characterReferenceValue"),a=7,c=Rv,f(m))}function f(m){if(m===59&&i){const g=e.exit("characterReferenceValue");return c===wn&&!yx(r.sliceSerialize(g))?n(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return c(m)&&i++<a?(e.consume(m),f):n(m)}}const U_={partial:!0,tokenize:wz},W_={concrete:!0,name:"codeFenced",tokenize:bz};function bz(e,t,n){const r=this,i={partial:!0,tokenize:P};let a=0,c=0,u;return d;function d(T){return p(T)}function p(T){const C=r.events[r.events.length-1];return a=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,u=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(T)}function f(T){return T===u?(c++,e.consume(T),f):c<3?n(T):(e.exit("codeFencedFenceSequence"),Ge(T)?et(e,m,"whitespace")(T):m(T))}function m(T){return T===null||Oe(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(U_,b,A)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(T))}function g(T){return T===null||Oe(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(T)):Ge(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),et(e,v,"whitespace")(T)):T===96&&T===u?n(T):(e.consume(T),g)}function v(T){return T===null||Oe(T)?m(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),w(T))}function w(T){return T===null||Oe(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(T)):T===96&&T===u?n(T):(e.consume(T),w)}function b(T){return e.attempt(i,A,k)(T)}function k(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),_}function _(T){return a>0&&Ge(T)?et(e,N,"linePrefix",a+1)(T):N(T)}function N(T){return T===null||Oe(T)?e.check(U_,b,A)(T):(e.enter("codeFlowValue"),S(T))}function S(T){return T===null||Oe(T)?(e.exit("codeFlowValue"),N(T)):(e.consume(T),S)}function A(T){return e.exit("codeFenced"),t(T)}function P(T,C,z){let F=0;return V;function V(M){return T.enter("lineEnding"),T.consume(M),T.exit("lineEnding"),L}function L(M){return T.enter("codeFencedFence"),Ge(M)?et(T,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):q(M)}function q(M){return M===u?(T.enter("codeFencedFenceSequence"),G(M)):z(M)}function G(M){return M===u?(F++,T.consume(M),G):F>=c?(T.exit("codeFencedFenceSequence"),Ge(M)?et(T,R,"whitespace")(M):R(M)):z(M)}function R(M){return M===null||Oe(M)?(T.exit("codeFencedFence"),C(M)):z(M)}}}function wz(e,t,n){const r=this;return i;function i(c){return c===null?n(c):(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),a)}function a(c){return r.parser.lazy[r.now().line]?n(c):t(c)}}const Ip={name:"codeIndented",tokenize:kz},_z={partial:!0,tokenize:Sz};function kz(e,t,n){const r=this;return i;function i(p){return e.enter("codeIndented"),et(e,a,"linePrefix",5)(p)}function a(p){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?c(p):n(p)}function c(p){return p===null?d(p):Oe(p)?e.attempt(_z,c,d)(p):(e.enter("codeFlowValue"),u(p))}function u(p){return p===null||Oe(p)?(e.exit("codeFlowValue"),c(p)):(e.consume(p),u)}function d(p){return e.exit("codeIndented"),t(p)}}function Sz(e,t,n){const r=this;return i;function i(c){return r.parser.lazy[r.now().line]?n(c):Oe(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),i):et(e,a,"linePrefix",5)(c)}function a(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(c):Oe(c)?i(c):n(c)}}const Nz={name:"codeText",previous:Ez,resolve:jz,tokenize:Cz};function jz(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Ez(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Cz(e,t,n){let r=0,i,a;return c;function c(m){return e.enter("codeText"),e.enter("codeTextSequence"),u(m)}function u(m){return m===96?(e.consume(m),r++,u):(e.exit("codeTextSequence"),d(m))}function d(m){return m===null?n(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),d):m===96?(a=e.enter("codeTextSequence"),i=0,f(m)):Oe(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("codeTextData"),p(m))}function p(m){return m===null||m===32||m===96||Oe(m)?(e.exit("codeTextData"),d(m)):(e.consume(m),p)}function f(m){return m===96?(e.consume(m),i++,f):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(m)):(a.type="codeTextData",p(m))}}class Tz{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ha(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ha(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ha(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ha(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ha(this.left,n.reverse())}}}function ha(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function LA(e){const t={};let n=-1,r,i,a,c,u,d,p;const f=new Tz(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,a=0,a<d.length&&d[a][1].type==="lineEndingBlank"&&(a+=2),a<d.length&&d[a][1].type==="content"))for(;++a<d.length&&d[a][1].type!=="content";)d[a][1].type==="chunkText"&&(d[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Az(f,n)),n=t[n],p=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(c=f.get(a),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(i&&(f.get(i)[1].type="lineEndingBlank"),c[1].type="lineEnding",i=a);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;i&&(r[1].end={...f.get(i)[1].start},u=f.slice(i,n),u.unshift(r),f.splice(i,n-i+1,u))}}return ur(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!p}function Az(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const a=[];let c=n._tokenizer;c||(c=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const u=c.events,d=[],p={};let f,m,g=-1,v=n,w=0,b=0;const k=[b];for(;v;){for(;e.get(++i)[1]!==v;);a.push(i),v._tokenizer||(f=r.sliceStream(v),v.next||f.push(null),m&&c.defineSkip(v.start),v._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(f),v._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),m=v,v=v.next}for(v=n;++g<u.length;)u[g][0]==="exit"&&u[g-1][0]==="enter"&&u[g][1].type===u[g-1][1].type&&u[g][1].start.line!==u[g][1].end.line&&(b=g+1,k.push(b),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(c.events=[],v?(v._tokenizer=void 0,v.previous=void 0):k.pop(),g=k.length;g--;){const _=u.slice(k[g],k[g+1]),N=a.pop();d.push([N,N+_.length-1]),e.splice(N,2,_)}for(d.reverse(),g=-1;++g<d.length;)p[w+d[g][0]]=w+d[g][1],w+=d[g][1]-d[g][0]-1;return p}const Pz={resolve:Rz,tokenize:Oz},Iz={partial:!0,tokenize:Mz};function Rz(e){return LA(e),e}function Oz(e,t){let n;return r;function r(u){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?a(u):Oe(u)?e.check(Iz,c,a)(u):(e.consume(u),i)}function a(u){return e.exit("chunkContent"),e.exit("content"),t(u)}function c(u){return e.consume(u),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Mz(e,t,n){const r=this;return i;function i(c){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),et(e,a,"linePrefix")}function a(c){if(c===null||Oe(c))return n(c);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?t(c):e.interrupt(r.parser.constructs.flow,n,t)(c)}}function DA(e,t,n,r,i,a,c,u,d){const p=d||Number.POSITIVE_INFINITY;let f=0;return m;function m(_){return _===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(_),e.exit(a),g):_===null||_===32||_===41||Iv(_)?n(_):(e.enter(r),e.enter(c),e.enter(u),e.enter("chunkString",{contentType:"string"}),b(_))}function g(_){return _===62?(e.enter(a),e.consume(_),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),v(_))}function v(_){return _===62?(e.exit("chunkString"),e.exit(u),g(_)):_===null||_===60||Oe(_)?n(_):(e.consume(_),_===92?w:v)}function w(_){return _===60||_===62||_===92?(e.consume(_),v):v(_)}function b(_){return!f&&(_===null||_===41||an(_))?(e.exit("chunkString"),e.exit(u),e.exit(c),e.exit(r),t(_)):f<p&&_===40?(e.consume(_),f++,b):_===41?(e.consume(_),f--,b):_===null||_===32||_===40||Iv(_)?n(_):(e.consume(_),_===92?k:b)}function k(_){return _===40||_===41||_===92?(e.consume(_),b):b(_)}}function qA(e,t,n,r,i,a){const c=this;let u=0,d;return p;function p(v){return e.enter(r),e.enter(i),e.consume(v),e.exit(i),e.enter(a),f}function f(v){return u>999||v===null||v===91||v===93&&!d||v===94&&!u&&"_hiddenFootnoteSupport"in c.parser.constructs?n(v):v===93?(e.exit(a),e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):Oe(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===null||v===91||v===93||Oe(v)||u++>999?(e.exit("chunkString"),f(v)):(e.consume(v),d||(d=!Ge(v)),v===92?g:m)}function g(v){return v===91||v===92||v===93?(e.consume(v),u++,m):m(v)}}function FA(e,t,n,r,i,a){let c;return u;function u(g){return g===34||g===39||g===40?(e.enter(r),e.enter(i),e.consume(g),e.exit(i),c=g===40?41:g,d):n(g)}function d(g){return g===c?(e.enter(i),e.consume(g),e.exit(i),e.exit(r),t):(e.enter(a),p(g))}function p(g){return g===c?(e.exit(a),d(c)):g===null?n(g):Oe(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),et(e,p,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===c||g===null||Oe(g)?(e.exit("chunkString"),p(g)):(e.consume(g),g===92?m:f)}function m(g){return g===c||g===92?(e.consume(g),f):f(g)}}function Ea(e,t){let n;return r;function r(i){return Oe(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Ge(i)?et(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Lz={name:"definition",tokenize:qz},Dz={partial:!0,tokenize:Fz};function qz(e,t,n){const r=this;let i;return a;function a(v){return e.enter("definition"),c(v)}function c(v){return qA.call(r,e,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function u(v){return i=is(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),d):n(v)}function d(v){return an(v)?Ea(e,p)(v):p(v)}function p(v){return DA(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function f(v){return e.attempt(Dz,m,m)(v)}function m(v){return Ge(v)?et(e,g,"whitespace")(v):g(v)}function g(v){return v===null||Oe(v)?(e.exit("definition"),r.parser.defined.push(i),t(v)):n(v)}}function Fz(e,t,n){return r;function r(u){return an(u)?Ea(e,i)(u):n(u)}function i(u){return FA(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function a(u){return Ge(u)?et(e,c,"whitespace")(u):c(u)}function c(u){return u===null||Oe(u)?t(u):n(u)}}const zz={name:"hardBreakEscape",tokenize:Bz};function Bz(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return Oe(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const $z={name:"headingAtx",resolve:Hz,tokenize:Vz};function Hz(e,t){let n=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ur(e,r,n-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function Vz(e,t,n){let r=0;return i;function i(f){return e.enter("atxHeading"),a(f)}function a(f){return e.enter("atxHeadingSequence"),c(f)}function c(f){return f===35&&r++<6?(e.consume(f),c):f===null||an(f)?(e.exit("atxHeadingSequence"),u(f)):n(f)}function u(f){return f===35?(e.enter("atxHeadingSequence"),d(f)):f===null||Oe(f)?(e.exit("atxHeading"),t(f)):Ge(f)?et(e,u,"whitespace")(f):(e.enter("atxHeadingText"),p(f))}function d(f){return f===35?(e.consume(f),d):(e.exit("atxHeadingSequence"),u(f))}function p(f){return f===null||f===35||an(f)?(e.exit("atxHeadingText"),u(f)):(e.consume(f),p)}}const Uz=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],K_=["pre","script","style","textarea"],Wz={concrete:!0,name:"htmlFlow",resolveTo:Yz,tokenize:Xz},Kz={partial:!0,tokenize:Jz},Gz={partial:!0,tokenize:Qz};function Yz(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Xz(e,t,n){const r=this;let i,a,c,u,d;return p;function p(D){return f(D)}function f(D){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(D),m}function m(D){return D===33?(e.consume(D),g):D===47?(e.consume(D),a=!0,b):D===63?(e.consume(D),i=3,r.interrupt?t:I):ar(D)?(e.consume(D),c=String.fromCharCode(D),k):n(D)}function g(D){return D===45?(e.consume(D),i=2,v):D===91?(e.consume(D),i=5,u=0,w):ar(D)?(e.consume(D),i=4,r.interrupt?t:I):n(D)}function v(D){return D===45?(e.consume(D),r.interrupt?t:I):n(D)}function w(D){const U="CDATA[";return D===U.charCodeAt(u++)?(e.consume(D),u===U.length?r.interrupt?t:q:w):n(D)}function b(D){return ar(D)?(e.consume(D),c=String.fromCharCode(D),k):n(D)}function k(D){if(D===null||D===47||D===62||an(D)){const U=D===47,te=c.toLowerCase();return!U&&!a&&K_.includes(te)?(i=1,r.interrupt?t(D):q(D)):Uz.includes(c.toLowerCase())?(i=6,U?(e.consume(D),_):r.interrupt?t(D):q(D)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(D):a?N(D):S(D))}return D===45||wn(D)?(e.consume(D),c+=String.fromCharCode(D),k):n(D)}function _(D){return D===62?(e.consume(D),r.interrupt?t:q):n(D)}function N(D){return Ge(D)?(e.consume(D),N):V(D)}function S(D){return D===47?(e.consume(D),V):D===58||D===95||ar(D)?(e.consume(D),A):Ge(D)?(e.consume(D),S):V(D)}function A(D){return D===45||D===46||D===58||D===95||wn(D)?(e.consume(D),A):P(D)}function P(D){return D===61?(e.consume(D),T):Ge(D)?(e.consume(D),P):S(D)}function T(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),d=D,C):Ge(D)?(e.consume(D),T):z(D)}function C(D){return D===d?(e.consume(D),d=null,F):D===null||Oe(D)?n(D):(e.consume(D),C)}function z(D){return D===null||D===34||D===39||D===47||D===60||D===61||D===62||D===96||an(D)?P(D):(e.consume(D),z)}function F(D){return D===47||D===62||Ge(D)?S(D):n(D)}function V(D){return D===62?(e.consume(D),L):n(D)}function L(D){return D===null||Oe(D)?q(D):Ge(D)?(e.consume(D),L):n(D)}function q(D){return D===45&&i===2?(e.consume(D),H):D===60&&i===1?(e.consume(D),X):D===62&&i===4?(e.consume(D),B):D===63&&i===3?(e.consume(D),I):D===93&&i===5?(e.consume(D),Y):Oe(D)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Kz,K,G)(D)):D===null||Oe(D)?(e.exit("htmlFlowData"),G(D)):(e.consume(D),q)}function G(D){return e.check(Gz,R,K)(D)}function R(D){return e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),M}function M(D){return D===null||Oe(D)?G(D):(e.enter("htmlFlowData"),q(D))}function H(D){return D===45?(e.consume(D),I):q(D)}function X(D){return D===47?(e.consume(D),c="",$):q(D)}function $(D){if(D===62){const U=c.toLowerCase();return K_.includes(U)?(e.consume(D),B):q(D)}return ar(D)&&c.length<8?(e.consume(D),c+=String.fromCharCode(D),$):q(D)}function Y(D){return D===93?(e.consume(D),I):q(D)}function I(D){return D===62?(e.consume(D),B):D===45&&i===2?(e.consume(D),I):q(D)}function B(D){return D===null||Oe(D)?(e.exit("htmlFlowData"),K(D)):(e.consume(D),B)}function K(D){return e.exit("htmlFlow"),t(D)}}function Qz(e,t,n){const r=this;return i;function i(c){return Oe(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),a):n(c)}function a(c){return r.parser.lazy[r.now().line]?n(c):t(c)}}function Jz(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(mu,t,n)}}const Zz={name:"htmlText",tokenize:e5};function e5(e,t,n){const r=this;let i,a,c;return u;function u(I){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(I),d}function d(I){return I===33?(e.consume(I),p):I===47?(e.consume(I),P):I===63?(e.consume(I),S):ar(I)?(e.consume(I),z):n(I)}function p(I){return I===45?(e.consume(I),f):I===91?(e.consume(I),a=0,w):ar(I)?(e.consume(I),N):n(I)}function f(I){return I===45?(e.consume(I),v):n(I)}function m(I){return I===null?n(I):I===45?(e.consume(I),g):Oe(I)?(c=m,X(I)):(e.consume(I),m)}function g(I){return I===45?(e.consume(I),v):m(I)}function v(I){return I===62?H(I):I===45?g(I):m(I)}function w(I){const B="CDATA[";return I===B.charCodeAt(a++)?(e.consume(I),a===B.length?b:w):n(I)}function b(I){return I===null?n(I):I===93?(e.consume(I),k):Oe(I)?(c=b,X(I)):(e.consume(I),b)}function k(I){return I===93?(e.consume(I),_):b(I)}function _(I){return I===62?H(I):I===93?(e.consume(I),_):b(I)}function N(I){return I===null||I===62?H(I):Oe(I)?(c=N,X(I)):(e.consume(I),N)}function S(I){return I===null?n(I):I===63?(e.consume(I),A):Oe(I)?(c=S,X(I)):(e.consume(I),S)}function A(I){return I===62?H(I):S(I)}function P(I){return ar(I)?(e.consume(I),T):n(I)}function T(I){return I===45||wn(I)?(e.consume(I),T):C(I)}function C(I){return Oe(I)?(c=C,X(I)):Ge(I)?(e.consume(I),C):H(I)}function z(I){return I===45||wn(I)?(e.consume(I),z):I===47||I===62||an(I)?F(I):n(I)}function F(I){return I===47?(e.consume(I),H):I===58||I===95||ar(I)?(e.consume(I),V):Oe(I)?(c=F,X(I)):Ge(I)?(e.consume(I),F):H(I)}function V(I){return I===45||I===46||I===58||I===95||wn(I)?(e.consume(I),V):L(I)}function L(I){return I===61?(e.consume(I),q):Oe(I)?(c=L,X(I)):Ge(I)?(e.consume(I),L):F(I)}function q(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(e.consume(I),i=I,G):Oe(I)?(c=q,X(I)):Ge(I)?(e.consume(I),q):(e.consume(I),R)}function G(I){return I===i?(e.consume(I),i=void 0,M):I===null?n(I):Oe(I)?(c=G,X(I)):(e.consume(I),G)}function R(I){return I===null||I===34||I===39||I===60||I===61||I===96?n(I):I===47||I===62||an(I)?F(I):(e.consume(I),R)}function M(I){return I===47||I===62||an(I)?F(I):n(I)}function H(I){return I===62?(e.consume(I),e.exit("htmlTextData"),e.exit("htmlText"),t):n(I)}function X(I){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),$}function $(I){return Ge(I)?et(e,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):Y(I)}function Y(I){return e.enter("htmlTextData"),c(I)}}const xx={name:"labelEnd",resolveAll:i5,resolveTo:o5,tokenize:s5},t5={tokenize:a5},n5={tokenize:l5},r5={tokenize:c5};function i5(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&ur(e,0,e.length,n),e}function o5(e,t){let n=e.length,r=0,i,a,c,u;for(;n--;)if(i=e[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(c){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(c=n);const d={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},p={type:"label",start:{...e[a][1].start},end:{...e[c][1].end}},f={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[c-2][1].start}};return u=[["enter",d,t],["enter",p,t]],u=An(u,e.slice(a+1,a+r+3)),u=An(u,[["enter",f,t]]),u=An(u,vx(t.parser.constructs.insideSpan.null,e.slice(a+r+4,c-3),t)),u=An(u,[["exit",f,t],e[c-2],e[c-1],["exit",p,t]]),u=An(u,e.slice(c+1)),u=An(u,[["exit",d,t]]),ur(e,a,e.length,u),e}function s5(e,t,n){const r=this;let i=r.events.length,a,c;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return u;function u(g){return a?a._inactive?m(g):(c=r.parser.defined.includes(is(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),d):n(g)}function d(g){return g===40?e.attempt(t5,f,c?f:m)(g):g===91?e.attempt(n5,f,c?p:m)(g):c?f(g):m(g)}function p(g){return e.attempt(r5,f,m)(g)}function f(g){return t(g)}function m(g){return a._balanced=!0,n(g)}}function a5(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),i}function i(m){return an(m)?Ea(e,a)(m):a(m)}function a(m){return m===41?f(m):DA(e,c,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function c(m){return an(m)?Ea(e,d)(m):f(m)}function u(m){return n(m)}function d(m){return m===34||m===39||m===40?FA(e,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):f(m)}function p(m){return an(m)?Ea(e,f)(m):f(m)}function f(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function l5(e,t,n){const r=this;return i;function i(u){return qA.call(r,e,a,c,"reference","referenceMarker","referenceString")(u)}function a(u){return r.parser.defined.includes(is(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(u):n(u)}function c(u){return n(u)}}function c5(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const u5={name:"labelStartImage",resolveAll:xx.resolveAll,tokenize:d5};function d5(e,t,n){const r=this;return i;function i(u){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(u),e.exit("labelImageMarker"),a}function a(u){return u===91?(e.enter("labelMarker"),e.consume(u),e.exit("labelMarker"),e.exit("labelImage"),c):n(u)}function c(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):t(u)}}const p5={name:"labelStartLink",resolveAll:xx.resolveAll,tokenize:f5};function f5(e,t,n){const r=this;return i;function i(c){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelLink"),a}function a(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):t(c)}}const Rp={name:"lineEnding",tokenize:h5};function h5(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),et(e,t,"linePrefix")}}const Lc={name:"thematicBreak",tokenize:m5};function m5(e,t,n){let r=0,i;return a;function a(p){return e.enter("thematicBreak"),c(p)}function c(p){return i=p,u(p)}function u(p){return p===i?(e.enter("thematicBreakSequence"),d(p)):r>=3&&(p===null||Oe(p))?(e.exit("thematicBreak"),t(p)):n(p)}function d(p){return p===i?(e.consume(p),r++,d):(e.exit("thematicBreakSequence"),Ge(p)?et(e,u,"whitespace")(p):u(p))}}const nn={continuation:{tokenize:x5},exit:w5,name:"list",tokenize:v5},g5={partial:!0,tokenize:_5},y5={partial:!0,tokenize:b5};function v5(e,t,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,c=0;return u;function u(v){const w=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:Rv(v)){if(r.containerState.type||(r.containerState.type=w,e.enter(w,{_container:!0})),w==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(Lc,n,p)(v):p(v);if(!r.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(v)}return n(v)}function d(v){return Rv(v)&&++c<10?(e.consume(v),d):(!r.interrupt||c<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),p(v)):n(v)}function p(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,e.check(mu,r.interrupt?n:f,e.attempt(g5,g,m))}function f(v){return r.containerState.initialBlankLine=!0,a++,g(v)}function m(v){return Ge(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),g):n(v)}function g(v){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function x5(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(mu,i,a);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,et(e,t,"listItemIndent",r.containerState.size+1)(u)}function a(u){return r.containerState.furtherBlankLines||!Ge(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,c(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(y5,t,c)(u))}function c(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,et(e,e.attempt(nn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function b5(e,t,n){const r=this;return et(e,i,"listItemIndent",r.containerState.size+1);function i(a){const c=r.events[r.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===r.containerState.size?t(a):n(a)}}function w5(e){e.exit(this.containerState.type)}function _5(e,t,n){const r=this;return et(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const c=r.events[r.events.length-1];return!Ge(a)&&c&&c[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const G_={name:"setextUnderline",resolveTo:k5,tokenize:S5};function k5(e,t){let n=e.length,r,i,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const c={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",c,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=c,e.push(["exit",c,t]),e}function S5(e,t,n){const r=this;let i;return a;function a(p){let f=r.events.length,m;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){m=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(e.enter("setextHeadingLine"),i=p,c(p)):n(p)}function c(p){return e.enter("setextHeadingLineSequence"),u(p)}function u(p){return p===i?(e.consume(p),u):(e.exit("setextHeadingLineSequence"),Ge(p)?et(e,d,"lineSuffix")(p):d(p))}function d(p){return p===null||Oe(p)?(e.exit("setextHeadingLine"),t(p)):n(p)}}const N5={tokenize:j5};function j5(e){const t=this,n=e.attempt(mu,r,e.attempt(this.parser.constructs.flowInitial,i,et(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Pz,i)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const E5={resolveAll:BA()},C5=zA("string"),T5=zA("text");function zA(e){return{resolveAll:BA(e==="text"?A5:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],a=n.attempt(i,c,u);return c;function c(f){return p(f)?a(f):u(f)}function u(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),d}function d(f){return p(f)?(n.exit("data"),a(f)):(n.consume(f),d)}function p(f){if(f===null)return!0;const m=i[f];let g=-1;if(m)for(;++g<m.length;){const v=m[g];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function BA(e){return t;function t(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(n,r):n}}function A5(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let a=i.length,c=-1,u=0,d;for(;a--;){const p=i[a];if(typeof p=="string"){for(c=p.length;p.charCodeAt(c-1)===32;)u++,c--;if(c)break;c=-1}else if(p===-2)d=!0,u++;else if(p!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(u=0),u){const p={type:n===e.length||d||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?c:r.start._bufferIndex+c,_index:r.start._index+a,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...p.start},r.start.offset===r.end.offset?Object.assign(r,p):(e.splice(n,0,["enter",p,t],["exit",p,t]),n+=2)}n++}return e}const P5={42:nn,43:nn,45:nn,48:nn,49:nn,50:nn,51:nn,52:nn,53:nn,54:nn,55:nn,56:nn,57:nn,62:RA},I5={91:Lz},R5={[-2]:Ip,[-1]:Ip,32:Ip},O5={35:$z,42:Lc,45:[G_,Lc],60:Wz,61:G_,95:Lc,96:W_,126:W_},M5={38:MA,92:OA},L5={[-5]:Rp,[-4]:Rp,[-3]:Rp,33:u5,38:MA,42:Ov,60:[pz,Zz],91:p5,92:[zz,OA],93:xx,95:Ov,96:Nz},D5={null:[Ov,E5]},q5={null:[42,95]},F5={null:[]},z5=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:q5,contentInitial:I5,disable:F5,document:P5,flow:O5,flowInitial:R5,insideSpan:D5,string:M5,text:L5},Symbol.toStringTag,{value:"Module"}));function B5(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let c=[],u=[];const d={attempt:C(P),check:C(T),consume:N,enter:S,exit:A,interrupt:C(T,{interrupt:!0})},p={code:null,containerState:{},defineSkip:b,events:[],now:w,parser:e,previous:null,sliceSerialize:g,sliceStream:v,write:m};let f=t.tokenize.call(p,d);return t.resolveAll&&a.push(t),p;function m(L){return c=An(c,L),k(),c[c.length-1]!==null?[]:(z(t,0),p.events=vx(a,p.events,p),p.events)}function g(L,q){return H5(v(L),q)}function v(L){return $5(c,L)}function w(){const{_bufferIndex:L,_index:q,line:G,column:R,offset:M}=r;return{_bufferIndex:L,_index:q,line:G,column:R,offset:M}}function b(L){i[L.line]=L.column,V()}function k(){let L;for(;r._index<c.length;){const q=c[r._index];if(typeof q=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<q.length;)_(q.charCodeAt(r._bufferIndex));else _(q)}}function _(L){f=f(L)}function N(L){Oe(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,V()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===c[r._index].length&&(r._bufferIndex=-1,r._index++)),p.previous=L}function S(L,q){const G=q||{};return G.type=L,G.start=w(),p.events.push(["enter",G,p]),u.push(G),G}function A(L){const q=u.pop();return q.end=w(),p.events.push(["exit",q,p]),q}function P(L,q){z(L,q.from)}function T(L,q){q.restore()}function C(L,q){return G;function G(R,M,H){let X,$,Y,I;return Array.isArray(R)?K(R):"tokenize"in R?K([R]):B(R);function B(Z){return ee;function ee(Q){const ae=Q!==null&&Z[Q],pe=Q!==null&&Z.null,ye=[...Array.isArray(ae)?ae:ae?[ae]:[],...Array.isArray(pe)?pe:pe?[pe]:[]];return K(ye)(Q)}}function K(Z){return X=Z,$=0,Z.length===0?H:D(Z[$])}function D(Z){return ee;function ee(Q){return I=F(),Y=Z,Z.partial||(p.currentConstruct=Z),Z.name&&p.parser.constructs.disable.null.includes(Z.name)?te():Z.tokenize.call(q?Object.assign(Object.create(p),q):p,d,U,te)(Q)}}function U(Z){return L(Y,I),M}function te(Z){return I.restore(),++$<X.length?D(X[$]):H}}}function z(L,q){L.resolveAll&&!a.includes(L)&&a.push(L),L.resolve&&ur(p.events,q,p.events.length-q,L.resolve(p.events.slice(q),p)),L.resolveTo&&(p.events=L.resolveTo(p.events,p))}function F(){const L=w(),q=p.previous,G=p.currentConstruct,R=p.events.length,M=Array.from(u);return{from:R,restore:H};function H(){r=L,p.previous=q,p.currentConstruct=G,p.events.length=R,u=M,V()}}function V(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function $5(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let c;if(n===i)c=[e[n].slice(r,a)];else{if(c=e.slice(n,i),r>-1){const u=c[0];typeof u=="string"?c[0]=u.slice(r):c.shift()}a>0&&c.push(e[i].slice(0,a))}return c}function H5(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const a=e[n];let c;if(typeof a=="string")c=a;else switch(a){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=t?" ":"	";break}case-1:{if(!t&&i)continue;c=" ";break}default:c=String.fromCharCode(a)}i=a===-2,r.push(c)}return r.join("")}function V5(e){const r={constructs:QF([z5,...(e||{}).extensions||[]]),content:i(oz),defined:[],document:i(az),flow:i(N5),lazy:{},string:i(C5),text:i(T5)};return r;function i(a){return c;function c(u){return B5(r,a,u)}}}function U5(e){for(;!LA(e););return e}const Y_=/[\0\t\n\r]/g;function W5(){let e=1,t="",n=!0,r;return i;function i(a,c,u){const d=[];let p,f,m,g,v;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(c||void 0).decode(a)),m=0,t="",n&&(a.charCodeAt(0)===65279&&m++,n=void 0);m<a.length;){if(Y_.lastIndex=m,p=Y_.exec(a),g=p&&p.index!==void 0?p.index:a.length,v=a.charCodeAt(g),!p){t=a.slice(m);break}if(v===10&&m===g&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),m<g&&(d.push(a.slice(m,g)),e+=g-m),v){case 0:{d.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,d.push(-2);e++<f;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:r=!0,e=1}m=g+1}return u&&(r&&d.push(-5),t&&d.push(t),d.push(null)),d}}const K5=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function G5(e){return e.replace(K5,Y5)}function Y5(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return IA(n.slice(a?2:1),a?16:10)}return yx(n)||e}const $A={}.hasOwnProperty;function X5(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Q5(n)(U5(V5(n).document().write(W5()(e,t,!0))))}function Q5(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ye),autolinkProtocol:F,autolinkEmail:F,atxHeading:a(be),blockQuote:a(pe),characterEscape:F,characterReference:F,codeFenced:a(ye),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:a(ye,c),codeText:a(Ne,c),codeTextData:F,data:F,codeFlowValue:F,definition:a(xe),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:a(Ae),hardBreakEscape:a(De),hardBreakTrailing:a(De),htmlFlow:a(Ce,c),htmlFlowData:F,htmlText:a(Ce,c),htmlTextData:F,image:a(ot),label:c,link:a(Ye),listItem:a(pt),listItemValue:g,listOrdered:a(dt,m),listUnordered:a(dt),paragraph:a(Be),reference:D,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:a(be),strong:a(Ve),thematicBreak:a(ge)},exit:{atxHeading:d(),atxHeadingSequence:P,autolink:d(),autolinkEmail:ae,autolinkProtocol:Q,blockQuote:d(),characterEscapeValue:V,characterReferenceMarkerHexadecimal:te,characterReferenceMarkerNumeric:te,characterReferenceValue:Z,characterReference:ee,codeFenced:d(k),codeFencedFence:b,codeFencedFenceInfo:v,codeFencedFenceMeta:w,codeFlowValue:V,codeIndented:d(_),codeText:d(M),codeTextData:V,data:V,definition:d(),definitionDestinationString:A,definitionLabelString:N,definitionTitleString:S,emphasis:d(),hardBreakEscape:d(q),hardBreakTrailing:d(q),htmlFlow:d(G),htmlFlowData:V,htmlText:d(R),htmlTextData:V,image:d(X),label:Y,labelText:$,lineEnding:L,link:d(H),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:U,resourceDestinationString:I,resourceTitleString:B,resource:K,setextHeading:d(z),setextHeadingLineSequence:C,setextHeadingText:T,strong:d(),thematicBreak:d()}};HA(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(oe){let de={type:"root",children:[]};const je={stack:[de],tokenStack:[],config:t,enter:u,exit:p,buffer:c,resume:f,data:n},Me=[];let Le=-1;for(;++Le<oe.length;)if(oe[Le][1].type==="listOrdered"||oe[Le][1].type==="listUnordered")if(oe[Le][0]==="enter")Me.push(Le);else{const st=Me.pop();Le=i(oe,st,Le)}for(Le=-1;++Le<oe.length;){const st=t[oe[Le][0]];$A.call(st,oe[Le][1].type)&&st[oe[Le][1].type].call(Object.assign({sliceSerialize:oe[Le][2].sliceSerialize},je),oe[Le][1])}if(je.tokenStack.length>0){const st=je.tokenStack[je.tokenStack.length-1];(st[1]||X_).call(je,void 0,st[0])}for(de.position={start:pi(oe.length>0?oe[0][1].start:{line:1,column:1,offset:0}),end:pi(oe.length>0?oe[oe.length-2][1].end:{line:1,column:1,offset:0})},Le=-1;++Le<t.transforms.length;)de=t.transforms[Le](de)||de;return de}function i(oe,de,je){let Me=de-1,Le=-1,st=!1,qt,He,bt,Ct;for(;++Me<=je;){const vt=oe[Me];switch(vt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{vt[0]==="enter"?Le++:Le--,Ct=void 0;break}case"lineEndingBlank":{vt[0]==="enter"&&(qt&&!Ct&&!Le&&!bt&&(bt=Me),Ct=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ct=void 0}if(!Le&&vt[0]==="enter"&&vt[1].type==="listItemPrefix"||Le===-1&&vt[0]==="exit"&&(vt[1].type==="listUnordered"||vt[1].type==="listOrdered")){if(qt){let Ot=Me;for(He=void 0;Ot--;){const Mt=oe[Ot];if(Mt[1].type==="lineEnding"||Mt[1].type==="lineEndingBlank"){if(Mt[0]==="exit")continue;He&&(oe[He][1].type="lineEndingBlank",st=!0),Mt[1].type="lineEnding",He=Ot}else if(!(Mt[1].type==="linePrefix"||Mt[1].type==="blockQuotePrefix"||Mt[1].type==="blockQuotePrefixWhitespace"||Mt[1].type==="blockQuoteMarker"||Mt[1].type==="listItemIndent"))break}bt&&(!He||bt<He)&&(qt._spread=!0),qt.end=Object.assign({},He?oe[He][1].start:vt[1].end),oe.splice(He||Me,0,["exit",qt,vt[2]]),Me++,je++}if(vt[1].type==="listItemPrefix"){const Ot={type:"listItem",_spread:!1,start:Object.assign({},vt[1].start),end:void 0};qt=Ot,oe.splice(Me,0,["enter",Ot,vt[2]]),Me++,je++,bt=void 0,Ct=!0}}}return oe[de][1]._spread=st,je}function a(oe,de){return je;function je(Me){u.call(this,oe(Me),Me),de&&de.call(this,Me)}}function c(){this.stack.push({type:"fragment",children:[]})}function u(oe,de,je){this.stack[this.stack.length-1].children.push(oe),this.stack.push(oe),this.tokenStack.push([de,je||void 0]),oe.position={start:pi(de.start),end:void 0}}function d(oe){return de;function de(je){oe&&oe.call(this,je),p.call(this,je)}}function p(oe,de){const je=this.stack.pop(),Me=this.tokenStack.pop();if(Me)Me[0].type!==oe.type&&(de?de.call(this,oe,Me[0]):(Me[1]||X_).call(this,oe,Me[0]));else throw new Error("Cannot close `"+oe.type+"` ("+ja({start:oe.start,end:oe.end})+"): its not open");je.position.end=pi(oe.end)}function f(){return YF(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function g(oe){if(this.data.expectingFirstListItemValue){const de=this.stack[this.stack.length-2];de.start=Number.parseInt(this.sliceSerialize(oe),10),this.data.expectingFirstListItemValue=void 0}}function v(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.lang=oe}function w(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.meta=oe}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.value=oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.value=oe.replace(/(\r?\n|\r)$/g,"")}function N(oe){const de=this.resume(),je=this.stack[this.stack.length-1];je.label=de,je.identifier=is(this.sliceSerialize(oe)).toLowerCase()}function S(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.title=oe}function A(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.url=oe}function P(oe){const de=this.stack[this.stack.length-1];if(!de.depth){const je=this.sliceSerialize(oe).length;de.depth=je}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function C(oe){const de=this.stack[this.stack.length-1];de.depth=this.sliceSerialize(oe).codePointAt(0)===61?1:2}function z(){this.data.setextHeadingSlurpLineEnding=void 0}function F(oe){const je=this.stack[this.stack.length-1].children;let Me=je[je.length-1];(!Me||Me.type!=="text")&&(Me=yt(),Me.position={start:pi(oe.start),end:void 0},je.push(Me)),this.stack.push(Me)}function V(oe){const de=this.stack.pop();de.value+=this.sliceSerialize(oe),de.position.end=pi(oe.end)}function L(oe){const de=this.stack[this.stack.length-1];if(this.data.atHardBreak){const je=de.children[de.children.length-1];je.position.end=pi(oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(de.type)&&(F.call(this,oe),V.call(this,oe))}function q(){this.data.atHardBreak=!0}function G(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.value=oe}function R(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.value=oe}function M(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.value=oe}function H(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=de,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function X(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const de=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=de,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function $(oe){const de=this.sliceSerialize(oe),je=this.stack[this.stack.length-2];je.label=G5(de),je.identifier=is(de).toLowerCase()}function Y(){const oe=this.stack[this.stack.length-1],de=this.resume(),je=this.stack[this.stack.length-1];if(this.data.inReference=!0,je.type==="link"){const Me=oe.children;je.children=Me}else je.alt=de}function I(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.url=oe}function B(){const oe=this.resume(),de=this.stack[this.stack.length-1];de.title=oe}function K(){this.data.inReference=void 0}function D(){this.data.referenceType="collapsed"}function U(oe){const de=this.resume(),je=this.stack[this.stack.length-1];je.label=de,je.identifier=is(this.sliceSerialize(oe)).toLowerCase(),this.data.referenceType="full"}function te(oe){this.data.characterReferenceType=oe.type}function Z(oe){const de=this.sliceSerialize(oe),je=this.data.characterReferenceType;let Me;je?(Me=IA(de,je==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Me=yx(de);const Le=this.stack[this.stack.length-1];Le.value+=Me}function ee(oe){const de=this.stack.pop();de.position.end=pi(oe.end)}function Q(oe){V.call(this,oe);const de=this.stack[this.stack.length-1];de.url=this.sliceSerialize(oe)}function ae(oe){V.call(this,oe);const de=this.stack[this.stack.length-1];de.url="mailto:"+this.sliceSerialize(oe)}function pe(){return{type:"blockquote",children:[]}}function ye(){return{type:"code",lang:null,meta:null,value:""}}function Ne(){return{type:"inlineCode",value:""}}function xe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ae(){return{type:"emphasis",children:[]}}function be(){return{type:"heading",depth:0,children:[]}}function De(){return{type:"break"}}function Ce(){return{type:"html",value:""}}function ot(){return{type:"image",title:null,url:"",alt:null}}function Ye(){return{type:"link",title:null,url:"",children:[]}}function dt(oe){return{type:"list",ordered:oe.type==="listOrdered",start:null,spread:oe._spread,children:[]}}function pt(oe){return{type:"listItem",spread:oe._spread,checked:null,children:[]}}function Be(){return{type:"paragraph",children:[]}}function Ve(){return{type:"strong",children:[]}}function yt(){return{type:"text",value:""}}function ge(){return{type:"thematicBreak"}}}function pi(e){return{line:e.line,column:e.column,offset:e.offset}}function HA(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?HA(e,r):J5(e,r)}}function J5(e,t){let n;for(n in t)if($A.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function X_(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ja({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ja({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ja({start:t.start,end:t.end})+") is still open")}function Z5(e){const t=this;t.parser=n;function n(r){return X5(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function eB(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function tB(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function nB(e,t){const n=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function rB(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function iB(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function oB(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=ms(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let c,u=e.footnoteCounts.get(r);u===void 0?(u=0,e.footnoteOrder.push(r),c=e.footnoteOrder.length):c=a+1,u+=1,e.footnoteCounts.set(r,u);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};e.patch(t,d);const p={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(t,p),e.applyData(t,p)}function sB(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aB(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function VA(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const c=i[i.length-1];return c&&c.type==="text"?c.value+=r:i.push({type:"text",value:r}),i}function lB(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return VA(e,t);const i={src:ms(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function cB(e,t){const n={src:ms(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function uB(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function dB(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return VA(e,t);const i={href:ms(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function pB(e,t){const n={href:ms(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function fB(e,t,n){const r=e.all(t),i=n?hB(n):UA(t),a={},c=[];if(typeof t.checked=="boolean"){const f=r[0];let m;f&&f.type==="element"&&f.tagName==="p"?m=f:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const f=r[u];(i||u!==0||f.type!=="element"||f.tagName!=="p")&&c.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!i?c.push(...f.children):c.push(f)}const d=r[r.length-1];d&&(i||d.type!=="element"||d.tagName!=="p")&&c.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:a,children:c};return e.patch(t,p),e.applyData(t,p)}function hB(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=UA(n[r])}return t}function UA(e){const t=e.spread;return t??e.children.length>1}function mB(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const c=r[i];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function gB(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yB(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function vB(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xB(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const c={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],c),i.push(c)}if(n.length>0){const c={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},u=fx(t.children[1]),d=NA(t.children[t.children.length-1]);u&&d&&(c.position={start:u,end:d}),i.push(c)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function bB(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",c=n&&n.type==="table"?n.align:void 0,u=c?c.length:t.children.length;let d=-1;const p=[];for(;++d<u;){const m=t.children[d],g={},v=c?c[d]:void 0;v&&(g.align=v);let w={type:"element",tagName:a,properties:g,children:[]};m&&(w.children=e.all(m),e.patch(m,w),w=e.applyData(m,w)),p.push(w)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(p,!0)};return e.patch(t,f),e.applyData(t,f)}function wB(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Q_=9,J_=32;function _B(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const a=[];for(;r;)a.push(Z_(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return a.push(Z_(t.slice(i),i>0,!1)),a.join("")}function Z_(e,t,n){let r=0,i=e.length;if(t){let a=e.codePointAt(r);for(;a===Q_||a===J_;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(i-1);for(;a===Q_||a===J_;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function kB(e,t){const n={type:"text",value:_B(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function SB(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const NB={blockquote:eB,break:tB,code:nB,delete:rB,emphasis:iB,footnoteReference:oB,heading:sB,html:aB,imageReference:lB,image:cB,inlineCode:uB,linkReference:dB,link:pB,listItem:fB,list:mB,paragraph:gB,root:yB,strong:vB,table:xB,tableCell:wB,tableRow:bB,text:kB,thematicBreak:SB,toml:_c,yaml:_c,definition:_c,footnoteDefinition:_c};function _c(){}const WA=-1,gu=0,Ca=1,Xc=2,bx=3,wx=4,_x=5,kx=6,KA=7,GA=8,e1=typeof self=="object"?self:globalThis,jB=(e,t)=>{const n=(i,a)=>(e.set(a,i),i),r=i=>{if(e.has(i))return e.get(i);const[a,c]=t[i];switch(a){case gu:case WA:return n(c,i);case Ca:{const u=n([],i);for(const d of c)u.push(r(d));return u}case Xc:{const u=n({},i);for(const[d,p]of c)u[r(d)]=r(p);return u}case bx:return n(new Date(c),i);case wx:{const{source:u,flags:d}=c;return n(new RegExp(u,d),i)}case _x:{const u=n(new Map,i);for(const[d,p]of c)u.set(r(d),r(p));return u}case kx:{const u=n(new Set,i);for(const d of c)u.add(r(d));return u}case KA:{const{name:u,message:d}=c;return n(new e1[u](d),i)}case GA:return n(BigInt(c),i);case"BigInt":return n(Object(BigInt(c)),i);case"ArrayBuffer":return n(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:u}=new Uint8Array(c);return n(new DataView(u),c)}}return n(new e1[a](c),i)};return r},t1=e=>jB(new Map,e)(0),Go="",{toString:EB}={},{keys:CB}=Object,ma=e=>{const t=typeof e;if(t!=="object"||!e)return[gu,t];const n=EB.call(e).slice(8,-1);switch(n){case"Array":return[Ca,Go];case"Object":return[Xc,Go];case"Date":return[bx,Go];case"RegExp":return[wx,Go];case"Map":return[_x,Go];case"Set":return[kx,Go];case"DataView":return[Ca,n]}return n.includes("Array")?[Ca,n]:n.includes("Error")?[KA,n]:[Xc,n]},kc=([e,t])=>e===gu&&(t==="function"||t==="symbol"),TB=(e,t,n,r)=>{const i=(c,u)=>{const d=r.push(c)-1;return n.set(u,d),d},a=c=>{if(n.has(c))return n.get(c);let[u,d]=ma(c);switch(u){case gu:{let f=c;switch(d){case"bigint":u=GA,f=c.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);f=null;break;case"undefined":return i([WA],c)}return i([u,f],c)}case Ca:{if(d){let g=c;return d==="DataView"?g=new Uint8Array(c.buffer):d==="ArrayBuffer"&&(g=new Uint8Array(c)),i([d,[...g]],c)}const f=[],m=i([u,f],c);for(const g of c)f.push(a(g));return m}case Xc:{if(d)switch(d){case"BigInt":return i([d,c.toString()],c);case"Boolean":case"Number":case"String":return i([d,c.valueOf()],c)}if(t&&"toJSON"in c)return a(c.toJSON());const f=[],m=i([u,f],c);for(const g of CB(c))(e||!kc(ma(c[g])))&&f.push([a(g),a(c[g])]);return m}case bx:return i([u,c.toISOString()],c);case wx:{const{source:f,flags:m}=c;return i([u,{source:f,flags:m}],c)}case _x:{const f=[],m=i([u,f],c);for(const[g,v]of c)(e||!(kc(ma(g))||kc(ma(v))))&&f.push([a(g),a(v)]);return m}case kx:{const f=[],m=i([u,f],c);for(const g of c)(e||!kc(ma(g)))&&f.push(a(g));return m}}const{message:p}=c;return i([u,{name:d,message:p}],c)};return a},n1=(e,{json:t,lossy:n}={})=>{const r=[];return TB(!(t||n),!!t,new Map,r)(e),r},Qc=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?t1(n1(e,t)):structuredClone(e):(e,t)=>t1(n1(e,t));function AB(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function PB(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function IB(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||AB,r=e.options.footnoteBackLabel||PB,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",c=e.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let d=-1;for(;++d<e.footnoteOrder.length;){const p=e.footnoteById.get(e.footnoteOrder[d]);if(!p)continue;const f=e.all(p),m=String(p.identifier).toUpperCase(),g=ms(m.toLowerCase());let v=0;const w=[],b=e.footnoteCounts.get(m);for(;b!==void 0&&++v<=b;){w.length>0&&w.push({type:"text",value:" "});let N=typeof n=="string"?n:n(d,v);typeof N=="string"&&(N={type:"text",value:N}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,v),className:["data-footnote-backref"]},children:Array.isArray(N)?N:[N]})}const k=f[f.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const N=k.children[k.children.length-1];N&&N.type==="text"?N.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...w)}else f.push(...w);const _={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(f,!0)};e.patch(p,_),u.push(_)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Qc(c),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(u,!0)},{type:"text",value:`
`}]}}const YA=(function(e){if(e==null)return LB;if(typeof e=="function")return yu(e);if(typeof e=="object")return Array.isArray(e)?RB(e):OB(e);if(typeof e=="string")return MB(e);throw new Error("Expected function, string, or object as test")});function RB(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=YA(e[n]);return yu(r);function r(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function OB(e){const t=e;return yu(n);function n(r){const i=r;let a;for(a in e)if(i[a]!==t[a])return!1;return!0}}function MB(e){return yu(t);function t(n){return n&&n.type===e}}function yu(e){return t;function t(n,r,i){return!!(DB(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function LB(){return!0}function DB(e){return e!==null&&typeof e=="object"&&"type"in e}const XA=[],qB=!0,r1=!1,FB="skip";function zB(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const a=YA(i),c=r?-1:1;u(e,void 0,[])();function u(d,p,f){const m=d&&typeof d=="object"?d:{};if(typeof m.type=="string"){const v=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(d.type+(v?"<"+v+">":""))+")"})}return g;function g(){let v=XA,w,b,k;if((!t||a(d,p,f[f.length-1]||void 0))&&(v=BB(n(d,f)),v[0]===r1))return v;if("children"in d&&d.children){const _=d;if(_.children&&v[0]!==FB)for(b=(r?_.children.length:-1)+c,k=f.concat(_);b>-1&&b<_.children.length;){const N=_.children[b];if(w=u(N,b,k)(),w[0]===r1)return w;b=typeof w[1]=="number"?w[1]:b+c}}return v}}}function BB(e){return Array.isArray(e)?e:typeof e=="number"?[qB,e]:e==null?XA:[e]}function QA(e,t,n,r){let i,a,c;typeof t=="function"&&typeof n!="function"?(a=void 0,c=t,i=n):(a=t,c=n,i=r),zB(e,a,u,i);function u(d,p){const f=p[p.length-1],m=f?f.children.indexOf(d):void 0;return c(d,m,f)}}const Mv={}.hasOwnProperty,$B={};function HB(e,t){const n=t||$B,r=new Map,i=new Map,a=new Map,c={...NB,...n.handlers},u={all:p,applyData:UB,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:c,one:d,options:n,patch:VB,wrap:KB};return QA(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const m=f.type==="definition"?r:i,g=String(f.identifier).toUpperCase();m.has(g)||m.set(g,f)}}),u;function d(f,m){const g=f.type,v=u.handlers[g];if(Mv.call(u.handlers,g)&&v)return v(u,f,m);if(u.options.passThrough&&u.options.passThrough.includes(g)){if("children"in f){const{children:b,...k}=f,_=Qc(k);return _.children=u.all(f),_}return Qc(f)}return(u.options.unknownHandler||WB)(u,f,m)}function p(f){const m=[];if("children"in f){const g=f.children;let v=-1;for(;++v<g.length;){const w=u.one(g[v],f);if(w){if(v&&g[v-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=i1(w.value)),!Array.isArray(w)&&w.type==="element")){const b=w.children[0];b&&b.type==="text"&&(b.value=i1(b.value))}Array.isArray(w)?m.push(...w):m.push(w)}}}return m}}function VB(e,t){e.position&&(t.position=EF(e))}function UB(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const c="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:c}}n.type==="element"&&a&&Object.assign(n.properties,Qc(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function WB(e,t){const n=t.data||{},r="value"in t&&!(Mv.call(n,"hProperties")||Mv.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function KB(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function i1(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function o1(e,t){const n=HB(e,t),r=n.one(e,void 0),i=IB(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function GB(e,t){return e&&"run"in e?async function(n,r){const i=o1(n,{file:r,...t});await e.run(i,r)}:function(n,r){return o1(n,{file:r,...e||t})}}function s1(e){if(e)throw e}var Op,a1;function YB(){if(a1)return Op;a1=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},a=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var f=e.call(p,"constructor"),m=p.constructor&&p.constructor.prototype&&e.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!f&&!m)return!1;var g;for(g in p);return typeof g>"u"||e.call(p,g)},c=function(p,f){n&&f.name==="__proto__"?n(p,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):p[f.name]=f.newValue},u=function(p,f){if(f==="__proto__")if(e.call(p,f)){if(r)return r(p,f).value}else return;return p[f]};return Op=function d(){var p,f,m,g,v,w,b=arguments[0],k=1,_=arguments.length,N=!1;for(typeof b=="boolean"&&(N=b,b=arguments[1]||{},k=2),(b==null||typeof b!="object"&&typeof b!="function")&&(b={});k<_;++k)if(p=arguments[k],p!=null)for(f in p)m=u(b,f),g=u(p,f),b!==g&&(N&&g&&(a(g)||(v=i(g)))?(v?(v=!1,w=m&&i(m)?m:[]):w=m&&a(m)?m:{},c(b,{name:f,newValue:d(N,w,g)})):typeof g<"u"&&c(b,{name:f,newValue:g}));return b},Op}var XB=YB();const Mp=ps(XB);function Lv(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function QB(){const e=[],t={run:n,use:r};return t;function n(...i){let a=-1;const c=i.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);u(null,...i);function u(d,...p){const f=e[++a];let m=-1;if(d){c(d);return}for(;++m<i.length;)(p[m]===null||p[m]===void 0)&&(p[m]=i[m]);i=p,f?JB(f,u)(...p):c(null,...p)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function JB(e,t){let n;return r;function r(...c){const u=e.length>c.length;let d;u&&c.push(i);try{d=e.apply(this,c)}catch(p){const f=p;if(u&&n)throw f;return i(f)}u||(d&&d.then&&typeof d.then=="function"?d.then(a,i):d instanceof Error?i(d):a(d))}function i(c,...u){n||(n=!0,t(c,...u))}function a(c){i(null,c)}}const ir={basename:ZB,dirname:e$,extname:t$,join:n$,sep:"/"};function ZB(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');el(e);let n=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let c=-1,u=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){n=i+1;break}}else c<0&&(a=!0,c=i+1),u>-1&&(e.codePointAt(i)===t.codePointAt(u--)?u<0&&(r=i):(u=-1,r=c));return n===r?r=c:r<0&&(r=e.length),e.slice(n,r)}function e$(e){if(el(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function t$(e){el(e);let t=e.length,n=-1,r=0,i=-1,a=0,c;for(;t--;){const u=e.codePointAt(t);if(u===47){if(c){r=t+1;break}continue}n<0&&(c=!0,n=t+1),u===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function n$(...e){let t=-1,n;for(;++t<e.length;)el(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":r$(n)}function r$(e){el(e);const t=e.codePointAt(0)===47;let n=i$(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function i$(e,t){let n="",r=0,i=-1,a=0,c=-1,u,d;for(;++c<=e.length;){if(c<e.length)u=e.codePointAt(c);else{if(u===47)break;u=47}if(u===47){if(!(i===c-1||a===1))if(i!==c-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),i=c,a=0;continue}}else if(n.length>0){n="",r=0,i=c,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,c):n=e.slice(i+1,c),r=c-i-1;i=c,a=0}else u===46&&a>-1?a++:a=-1}return n}function el(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const o$={cwd:s$};function s$(){return"/"}function Dv(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function a$(e){if(typeof e=="string")e=new URL(e);else if(!Dv(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return l$(e)}function l$(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Lp=["history","path","basename","stem","extname","dirname"];class JA{constructor(t){let n;t?Dv(t)?n={path:t}:typeof t=="string"||c$(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":o$.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Lp.length;){const a=Lp[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)Lp.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?ir.basename(this.path):void 0}set basename(t){qp(t,"basename"),Dp(t,"basename"),this.path=ir.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ir.dirname(this.path):void 0}set dirname(t){l1(this.basename,"dirname"),this.path=ir.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ir.extname(this.path):void 0}set extname(t){if(Dp(t,"extname"),l1(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ir.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Dv(t)&&(t=a$(t)),qp(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ir.basename(this.path,this.extname):void 0}set stem(t){qp(t,"stem"),Dp(t,"stem"),this.path=ir.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Vt(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Dp(e,t){if(e&&e.includes(ir.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ir.sep+"`")}function qp(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function l1(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function c$(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const u$=(function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),d$={}.hasOwnProperty;class Sx extends u${constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=QB()}copy(){const t=new Sx;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Mp(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Bp("data",this.frozen),this.namespace[t]=n,this):d$.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Bp("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Sc(t),r=this.parser||this.Parser;return Fp("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Fp("process",this.parser||this.Parser),zp("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,c){const u=Sc(t),d=r.parse(u);r.run(d,u,function(f,m,g){if(f||!m||!g)return p(f);const v=m,w=r.stringify(v,g);h$(w)?g.value=w:g.result=w,p(f,g)});function p(f,m){f||!m?c(f):a?a(m):n(void 0,m)}}}processSync(t){let n=!1,r;return this.freeze(),Fp("processSync",this.parser||this.Parser),zp("processSync",this.compiler||this.Compiler),this.process(t,i),u1("processSync","process",n),r;function i(a,c){n=!0,s1(a),r=c}}run(t,n,r){c1(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(c,u){const d=Sc(n);i.run(t,d,p);function p(f,m,g){const v=m||t;f?u(f):c?c(v):r(void 0,v,g)}}}runSync(t,n){let r=!1,i;return this.run(t,n,a),u1("runSync","run",r),i;function a(c,u){s1(c),i=u,r=!0}}stringify(t,n){this.freeze();const r=Sc(n),i=this.compiler||this.Compiler;return zp("stringify",i),c1(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Bp("use",this.frozen),t!=null)if(typeof t=="function")d(t,n);else if(typeof t=="object")Array.isArray(t)?u(t):c(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(p){if(typeof p=="function")d(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[f,...m]=p;d(f,m)}else c(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function c(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(p.plugins),p.settings&&(i.settings=Mp(!0,i.settings,p.settings))}function u(p){let f=-1;if(p!=null)if(Array.isArray(p))for(;++f<p.length;){const m=p[f];a(m)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function d(p,f){let m=-1,g=-1;for(;++m<r.length;)if(r[m][0]===p){g=m;break}if(g===-1)r.push([p,...f]);else if(f.length>0){let[v,...w]=f;const b=r[g][1];Lv(b)&&Lv(v)&&(v=Mp(!0,b,v)),r[g]=[p,v,...w]}}}}const p$=new Sx().freeze();function Fp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function zp(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Bp(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function c1(e){if(!Lv(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function u1(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Sc(e){return f$(e)?e:new JA(e)}function f$(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function h$(e){return typeof e=="string"||m$(e)}function m$(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const g$="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",d1=[],p1={allowDangerousHtml:!0},y$=/^(https?|ircs?|mailto|xmpp)$/i,v$=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function f1(e){const t=x$(e),n=b$(e);return w$(t.runSync(t.parse(n),n),e)}function x$(e){const t=e.rehypePlugins||d1,n=e.remarkPlugins||d1,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...p1}:p1;return p$().use(Z5).use(n).use(GB,r).use(t)}function b$(e){const t=e.children||"",n=new JA;return typeof t=="string"&&(n.value=t),n}function w$(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,a=t.disallowedElements,c=t.skipHtml,u=t.unwrapDisallowed,d=t.urlTransform||_$;for(const f of v$)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+g$+f.id,void 0);return QA(e,p),IF(e,{Fragment:s.Fragment,components:i,ignoreInvalidStyle:!0,jsx:s.jsx,jsxs:s.jsxs,passKeys:!0,passNode:!0});function p(f,m,g){if(f.type==="raw"&&g&&typeof m=="number")return c?g.children.splice(m,1):g.children[m]={type:"text",value:f.value},m;if(f.type==="element"){let v;for(v in Pp)if(Object.hasOwn(Pp,v)&&Object.hasOwn(f.properties,v)){const w=f.properties[v],b=Pp[v];(b===null||b.includes(f.tagName))&&(f.properties[v]=d(String(w||""),v,f))}}if(f.type==="element"){let v=n?!n.includes(f.tagName):a?a.includes(f.tagName):!1;if(!v&&r&&typeof m=="number"&&(v=!r(f,m,g)),v&&g&&typeof m=="number")return u&&f.children?g.children.splice(m,1,...f.children):g.children.splice(m,1),m}}}function _$(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||y$.test(e.slice(0,t))?e:""}function k$(e){try{return JSON.parse(e)}catch{return null}}function S$(e,t,n){return e.state_snapshot?{nodeId:t,timestamp:Date.now(),inputState:e.state_snapshot.input||{},outputState:e.state_snapshot.output||{},duration:e.duration_ms||0,status:n}:null}function N$(e,t){const[n,r]=E.useState(!1),[i,a]=E.useState(""),[c,u]=E.useState(""),[d,p]=E.useState([]),[f,m]=E.useState([]),[g,v]=E.useState(null),[w,b]=E.useState(0),[k,_]=E.useState([]),[N,S]=E.useState(-1),[A,P]=E.useState(new Map),T=E.useRef(null),C=E.useRef(""),z=E.useRef(""),F=E.useRef(null),V=E.useRef(0),L=E.useRef(new Set),q=(I,B,K,D)=>{m(U=>[...U,{type:I,timestamp:Date.now(),data:B,agent:K||z.current,screenshot:D}])},G=E.useCallback(I=>{_(B=>{const K=[...B,I];return K.length>100&&K.shift(),K}),S(B=>B+1)},[]),R=E.useCallback((I,B)=>{P(K=>{const D=new Map(K);return D.set(I,B),D})},[]),M=E.useCallback(I=>{S(Math.max(0,Math.min(I,k.length-1)))},[k.length]),H=E.useCallback((I,B,K)=>{if(!e)return;C.current="",z.current="",V.current=0,L.current=new Set,a(""),u(""),p([]),b(0),_([]),S(-1),P(new Map),m(Z=>[...Z,{type:"user",timestamp:Date.now(),data:I}]),r(!0);const D=new URLSearchParams({input:I});t&&D.set("binary_path",t),F.current&&D.set("session_id",F.current);const U=new EventSource(`/api/projects/${e}/stream?${D}`);T.current=U;let te=!1;U.addEventListener("session",Z=>{F.current=Z.data,v(Z.data)}),U.addEventListener("agent",Z=>{C.current&&(C.current+=`

`,a(C.current)),z.current=Z.data,u(Z.data),q("agent_start","runtime",Z.data)}),U.addEventListener("chunk",Z=>{C.current=Z.data,a(C.current)}),U.addEventListener("trace",Z=>{const ee=k$(Z.data);if(ee){if(ee.type==="node_start"){const Q=ee.node||"";L.current.has(Q)&&(V.current++,b(V.current),L.current.clear()),L.current.add(Q),z.current=Q,u(Q),q("agent_start",`Iter ${V.current+1}, Step ${ee.step}`,Q),ee.state_keys&&ee.state_keys.length>0&&R(Q,ee.state_keys)}else if(ee.type==="node_end"){const Q=ee.node||"";q("agent_end",`${ee.duration_ms}ms`,Q);const ae=S$(ee,Q,"success");ae&&(ae.step=ee.step,G(ae)),ee.state_keys&&ee.state_keys.length>0&&R(Q,ee.state_keys)}else if(ee.type==="state"){const Q=ee.state||ee.state_snapshot?.output||{};if(Q.response){const ae=typeof Q.response=="string"?Q.response:JSON.stringify(Q.response);q("model",ae.slice(0,100)+(ae.length>100?"...":""),z.current)}}else if(ee.type==="done"){const Q=ee.state||ee.state_snapshot?.output||{};if(Q.response){const ae=typeof Q.response=="string"?Q.response:JSON.stringify(Q.response);q("model",ae.slice(0,150)+(ae.length>150?"...":""))}q("done",`${ee.total_steps} steps`),ee.state_snapshot&&_(ae=>{if(ae.length===0)return ae;const pe=[...ae],ye=pe.length-1;return pe[ye]&&pe[ye].nodeId!=="__done__"&&(pe[ye]={...pe[ye],outputState:ee.state_snapshot?.output||pe[ye].outputState}),pe})}}}),U.addEventListener("log",Z=>{try{const ee=JSON.parse(Z.data);ee.agent&&(z.current=ee.agent,u(ee.agent)),ee.message&&q("model",ee.message,ee.agent)}catch{}}),U.addEventListener("tool_call",Z=>{try{const ee=JSON.parse(Z.data);p(Q=>[...Q,{name:ee.name,args:ee.args}]),C.current+=`
 Calling ${ee.name}...
`,a(C.current),q("tool_call",`${ee.name}(${JSON.stringify(ee.args)})`)}catch{}}),U.addEventListener("tool_result",Z=>{try{const ee=JSON.parse(Z.data),Q=typeof ee.result=="string"?JSON.parse(ee.result):ee.result;let ae;Q?.base64_image&&(ae=Q.base64_image);const pe=ae?" Screenshot captured":typeof ee.result=="string"?ee.result:JSON.stringify(ee.result).slice(0,200);C.current+=` ${ee.name}: ${pe}
`,a(C.current),q("tool_result",`${ee.name}  ${pe}`,void 0,ae)}catch{}}),U.addEventListener("end",()=>{te=!0;const Z=C.current;a(""),u(""),r(!1),U.close(),B(Z)}),U.addEventListener("error",Z=>{if(!te){const ee=Z.data||"Connection error";a(""),u(""),r(!1),U.close(),q("error",ee),K?.(ee)}})},[e,t,G,R]),X=E.useCallback(()=>{T.current?.close(),a(""),u(""),r(!1)},[]),$=E.useCallback(()=>m([]),[]),Y=E.useCallback(async()=>{F.current&&await fetch(`/api/sessions/${F.current}`,{method:"DELETE"}).catch(()=>{}),F.current=null,v(null),m([]),_([]),S(-1),P(new Map)},[]);return{send:H,cancel:X,isStreaming:n,streamingText:i,currentAgent:c,toolCalls:d,events:f,clearEvents:$,sessionId:g,newSession:Y,iteration:w,snapshots:k,currentSnapshotIndex:N,scrubTo:M,stateKeys:A}}const j$=[{id:"all",label:"All",icon:"",title:"Show all events"},{id:"model",label:"Model",icon:"",title:"Show model and agent events"},{id:"tool",label:"Tool",icon:"",title:"Show tool calls and results"},{id:"session",label:"Session",icon:"",title:"Show session events (user input, done, errors)"}];function E$({currentFilter:e,onFilterChange:t,autoScroll:n=!0,onAutoScrollChange:r}){return s.jsxs("div",{className:"flex items-center justify-between px-2 py-1 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("div",{className:"flex gap-1",children:j$.map(i=>s.jsxs("button",{onClick:()=>t(i.id),className:"px-2 py-0.5 rounded text-xs flex items-center gap-1 transition-colors",style:{backgroundColor:e===i.id?"var(--accent-primary)":"transparent",color:e===i.id?"white":"var(--text-secondary)"},title:i.title,children:[s.jsx("span",{children:i.icon}),s.jsx("span",{children:i.label})]},i.id))}),r&&s.jsxs("button",{onClick:()=>r(!n),className:"px-2 py-0.5 rounded text-xs flex items-center gap-1",style:{backgroundColor:n?"var(--accent-primary)":"transparent",color:n?"white":"var(--text-secondary)"},title:n?"Auto-scroll enabled":"Auto-scroll disabled",children:[s.jsx("span",{children:n?"":""}),s.jsx("span",{children:"Auto-scroll"})]})]})}function C$({onFlowPhase:e,onActiveAgent:t,onIteration:n,onThought:r,binaryPath:i,onSnapshotsChange:a,buildStatus:c="none",isCollapsed:u,onCollapseChange:d}){const{currentProject:p}=gt(),[f,m]=E.useState([]),[g,v]=E.useState(""),[w,b]=E.useState("chat"),{send:k,cancel:_,isStreaming:N,streamingText:S,currentAgent:A,toolCalls:P,events:T,clearEvents:C,sessionId:z,newSession:F,iteration:V,snapshots:L,currentSnapshotIndex:q,scrubTo:G,stateKeys:R}=N$(p?.id??null,i),M=E.useRef(null),H=E.useRef(null),X=E.useRef(!1),$=E.useRef(null),[Y,I]=E.useState(!1),B=u!==void 0?u:Y,K=E.useCallback(ge=>{d?d(ge):I(ge)},[d]),[D,U]=E.useState("all"),[te,Z]=E.useState(!0),[ee,Q]=E.useState("idle"),[ae,pe]=E.useState(null);E.useEffect(()=>{a?.(L,q,G,R)},[L,q,G,R,a]),E.useEffect(()=>{n?.(V)},[V,n]),E.useEffect(()=>{A&&($.current=A,t?.(A))},[A,t]),E.useEffect(()=>{te&&M.current?.scrollIntoView({behavior:"smooth"})},[f,S,te]),E.useEffect(()=>{te&&H.current?.scrollIntoView({behavior:"smooth"})},[T,te]),E.useEffect(()=>{const ge=A||$.current;S&&ge?(console.log("[TestConsole] Emitting thought:",ge,S.slice(-50)),r?.(ge,S.slice(-150))):!N&&$.current&&r?.($.current,null)},[S,A,N,r]),E.useEffect(()=>{S?e?.("output"):N||(e?.("idle"),t?.(null))},[S,N,e,t]),E.useEffect(()=>{N&&Q("running")},[N]);const ye=()=>{if(!g.trim()||!p||N||X.current)return;X.current=!0;const ge=g.trim();v(""),m(oe=>[...oe,{role:"user",content:ge}]),e?.("input"),$.current=null,Q("running"),pe(null),k(ge,oe=>{oe&&m(de=>[...de,{role:"assistant",content:oe,agent:$.current||void 0}]),e?.("idle"),X.current=!1,Q("success")},oe=>{m(de=>[...de,{role:"assistant",content:`Error: ${oe}`}]),e?.("idle"),X.current=!1,Q("error"),pe(oe)})},Ne=()=>{m([]),F(),Q("idle"),pe(null)},xe=()=>{_(),e?.("idle"),Q("idle")},Ae=()=>{m([]),C(),Q("idle"),pe(null)},be=N&&!S,De=ge=>{const oe=new Date(ge);return`${oe.toLocaleTimeString("en-US",{hour12:!1})}:${String(oe.getMilliseconds()).padStart(3,"0")}`},Ce=ge=>{switch(ge){case"user":return"";case"agent_start":return"";case"agent_end":return"";case"model":return"";case"tool_call":return"";case"tool_result":return"";case"done":return"";case"error":return"";default:return""}},ot=ge=>{switch(ge){case"user":return"var(--accent-primary)";case"agent_start":return"var(--accent-success)";case"agent_end":return"var(--accent-success)";case"model":return"var(--text-secondary)";case"done":return"var(--node-sequential)";case"error":return"var(--accent-error)";default:return"var(--text-muted)"}},Ye=ge=>ot(ge),dt=T.filter(ge=>{switch(D){case"model":return ge.type==="model"||ge.type==="agent_start"||ge.type==="agent_end";case"tool":return ge.type==="tool_call"||ge.type==="tool_result";case"session":return ge.type==="user"||ge.type==="done"||ge.type==="error";default:return!0}}),pt=()=>{switch(c){case"building":return{icon:"",text:"Building...",color:"var(--accent-warning)"};case"success":return{icon:"",text:"Built",color:"var(--accent-success)"};case"error":return{icon:"",text:"Build failed",color:"var(--accent-error)"};default:return{icon:"",text:"Not built",color:"var(--text-muted)"}}},Be=()=>{switch(ee){case"running":return{icon:"",text:"Running...",color:"var(--accent-warning)"};case"success":return{icon:"",text:"Success",color:"var(--accent-success)"};case"error":return{icon:"",text:"Error",color:"var(--accent-error)"};default:return{icon:"",text:"Idle",color:"var(--text-muted)"}}},Ve=pt(),yt=Be();return B?s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-t cursor-pointer hover:bg-opacity-50",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},onClick:()=>K(!1),children:[s.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[s.jsx("span",{className:"font-medium",children:"Console"}),s.jsxs("span",{style:{color:Ve.color},children:[Ve.icon," ",Ve.text]}),s.jsxs("span",{style:{color:yt.color},children:[yt.icon," ",yt.text]}),ae&&s.jsxs("span",{style:{color:"var(--accent-error)"},title:ae,children:["Last error: ",ae.slice(0,30),ae.length>30?"...":""]})]}),s.jsx("button",{className:"text-xs px-2 py-1 rounded",style:{color:"var(--text-secondary)"},onClick:ge=>{ge.stopPropagation(),K(!1)},children:" Expand"})]}):s.jsxs("div",{className:"flex flex-col h-full border-t",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"p-2 border-b text-sm flex justify-between items-center",style:{borderColor:"var(--border-default)"},children:[s.jsxs("div",{className:"flex gap-1 items-center",children:[s.jsx("button",{onClick:()=>b("chat"),className:"px-3 py-1 rounded text-xs",style:{backgroundColor:w==="chat"?"var(--accent-primary)":"transparent",color:w==="chat"?"white":"var(--text-primary)"},children:" Chat"}),s.jsxs("button",{onClick:()=>b("events"),className:"px-3 py-1 rounded text-xs",style:{backgroundColor:w==="events"?"var(--accent-primary)":"transparent",color:w==="events"?"white":"var(--text-primary)"},children:[" Events ",T.length>0&&`(${T.length})`]}),z&&s.jsxs("span",{className:"ml-2 text-xs",style:{color:"var(--text-muted)"},title:z,children:["Session: ",z.slice(0,8),"..."]}),s.jsx("span",{className:"ml-2 text-xs",style:{color:Ve.color},children:Ve.icon}),s.jsx("span",{className:"text-xs",style:{color:yt.color},children:yt.icon})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("button",{onClick:Ae,className:"text-xs flex items-center gap-1",style:{color:"var(--text-muted)"},title:"Clear history",children:" Clear"}),s.jsx("button",{onClick:Ne,className:"text-xs flex items-center gap-1",style:{color:"var(--accent-success)"},title:"Start new conversation",children:" New"}),N&&s.jsx("button",{onClick:xe,className:"text-xs",style:{color:"var(--accent-error)"},children:"Stop"}),s.jsx("button",{onClick:()=>K(!0),className:"text-xs px-2 py-1 rounded",style:{color:"var(--text-secondary)"},title:"Collapse console",children:""})]})]}),w==="chat"&&s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[f.length===0&&!S&&!be&&s.jsx("div",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Send a message to test your agent..."}),f.map((ge,oe)=>s.jsxs("div",{className:"text-sm",style:{color:ge.role==="user"?"var(--accent-primary)":"var(--text-primary)"},children:[s.jsx("span",{className:"font-semibold",children:ge.role==="user"?"You: ":`${ge.agent||"Agent"}: `}),ge.role==="user"?s.jsx("span",{children:ge.content}):s.jsx("div",{className:"prose prose-sm max-w-none inline",style:{color:"var(--text-primary)"},children:s.jsx(f1,{children:ge.content})})]},oe)),be&&s.jsxs("div",{className:"text-sm flex items-center gap-2",style:{color:"var(--text-muted)"},children:[s.jsx("span",{className:"animate-spin",children:""}),s.jsx("span",{children:A?`${A} is thinking...`:"Thinking..."})]}),S&&s.jsxs("div",{className:"text-sm",style:{color:"var(--text-primary)"},children:[s.jsxs("span",{className:"font-semibold",children:[A||"Agent",": "]}),s.jsx("div",{className:"prose prose-sm max-w-none inline",style:{color:"var(--text-primary)"},children:s.jsx(f1,{children:S})}),s.jsx("span",{className:"animate-pulse",children:""})]}),P.length>0&&N&&s.jsxs("div",{className:"text-xs mt-1",style:{color:"var(--accent-warning)"},children:["Tools used: ",P.map(ge=>ge.name).join(", ")]}),s.jsx("div",{ref:M})]}),w==="events"&&s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx(E$,{currentFilter:D,onFilterChange:U,autoScroll:te,onAutoScrollChange:Z}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-2 font-mono text-xs",children:[dt.length===0&&s.jsx("div",{style:{color:"var(--text-muted)"},children:T.length===0?"No events yet. Send a message to see the trace.":"No events match the current filter."}),dt.map((ge,oe)=>s.jsxs("div",{className:"py-1 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:"w-24 flex-shrink-0",style:{color:"var(--text-muted)"},children:De(ge.timestamp)}),s.jsx("span",{children:Ce(ge.type)}),s.jsxs("span",{className:"flex-1",style:{color:Ye(ge.type)},children:[ge.agent&&s.jsxs("span",{style:{color:"var(--accent-warning)"},className:"mr-2",children:["[",ge.agent,"]"]}),ge.type==="user"?`Input: ${ge.data}`:ge.type==="agent_start"?`Started ${ge.data}`:ge.type==="agent_end"?`Completed in ${ge.data}`:ge.type==="model"?`Response: ${ge.data}`:ge.type==="done"?`Done (${ge.data})`:ge.data]})]}),ge.screenshot&&s.jsx("div",{className:"ml-28 mt-2 mb-2",children:s.jsx("img",{src:`data:image/png;base64,${ge.screenshot}`,alt:"Browser screenshot",className:"max-w-full max-h-64 rounded border",style:{borderColor:"var(--border-default)"}})})]},oe)),s.jsx("div",{ref:H})]})]}),s.jsxs("div",{className:"p-2 border-t flex gap-2",style:{borderColor:"var(--border-default)"},children:[s.jsx("input",{type:"text",value:g,onChange:ge=>v(ge.target.value),onKeyDown:ge=>{ge.key==="Enter"&&!ge.repeat&&(ge.preventDefault(),ye())},placeholder:"Type a message...",className:"flex-1 px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},disabled:N}),s.jsx("button",{onClick:ye,disabled:N||!g.trim(),className:"px-4 py-2 rounded text-sm disabled:opacity-50",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:"Send"})]})]})}const ZA=[{id:"simple_chat",name:"Simple Chat Agent",icon:"",description:"A basic conversational agent",agents:{chat_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a helpful, friendly assistant. Answer questions clearly and concisely. Be conversational but informative.",tools:[],sub_agents:[],position:{x:50,y:150}}},edges:[{from:"START",to:"chat_agent"},{from:"chat_agent",to:"END"}]},{id:"research_pipeline",name:"Research Pipeline",icon:"",description:"Sequential: Researcher  Summarizer",agents:{researcher:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a research specialist. Given a topic, search for comprehensive information using Google Search. Gather key facts, statistics, recent developments, and expert opinions. Present your findings in a structured format.",tools:["google_search"],sub_agents:[],position:{x:0,y:0}},summarizer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are an expert summarizer. Take the research findings and create a clear, concise summary with: 1) Key takeaways (3-5 bullet points), 2) Main findings, 3) Conclusions. Make it easy to understand for a general audience.",tools:[],sub_agents:[],position:{x:0,y:0}},research_pipeline:{type:"sequential",instruction:"",tools:[],sub_agents:["researcher","summarizer"],position:{x:50,y:150}}},edges:[{from:"START",to:"research_pipeline"},{from:"research_pipeline",to:"END"}]},{id:"content_refiner",name:"Content Refiner",icon:"",description:"Loop agent that iteratively improves content",agents:{improver:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a content editor. Review the text and improve it by: fixing grammar and spelling errors, enhancing clarity and flow, improving word choice, and strengthening the overall structure. Output the improved version.",tools:[],sub_agents:[],position:{x:0,y:0}},reviewer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a quality reviewer. Evaluate the content for: clarity, grammar, flow, and completeness. If the content is polished and ready (score 8/10 or higher), call exit_loop. Otherwise, briefly note what still needs improvement and let the improver continue.",tools:["exit_loop"],sub_agents:[],position:{x:0,y:0}},content_refiner:{type:"loop",instruction:"",tools:[],sub_agents:["improver","reviewer"],position:{x:50,y:150},max_iterations:3}},edges:[{from:"START",to:"content_refiner"},{from:"content_refiner",to:"END"}]},{id:"parallel_analyzer",name:"Parallel Analyzer",icon:"",description:"Run multiple analyses concurrently",agents:{sentiment_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:"Analyze the sentiment of the provided text. Identify: 1) Overall sentiment (positive/negative/neutral with confidence %), 2) Emotional tones present (joy, anger, sadness, etc.), 3) Key phrases that indicate sentiment. Format as a brief report.",tools:[],sub_agents:[],position:{x:0,y:0}},entity_extractor:{type:"llm",model:"gemini-2.0-flash",instruction:"Extract key entities from the text. Identify and categorize: 1) People (names, roles), 2) Organizations (companies, institutions), 3) Locations (cities, countries), 4) Dates and times, 5) Key topics/concepts. Format as a structured list.",tools:[],sub_agents:[],position:{x:0,y:0}},parallel_analyzer:{type:"parallel",instruction:"",tools:[],sub_agents:["sentiment_analyzer","entity_extractor"],position:{x:50,y:150}}},edges:[{from:"START",to:"parallel_analyzer"},{from:"parallel_analyzer",to:"END"}]},{id:"support_router",name:"Support Router",icon:"",description:"Route requests to specialized agents",agents:{router:{type:"router",model:"gemini-2.0-flash",instruction:'Classify the user request into one category: "technical" for coding, bugs, API issues, or technical problems; "billing" for payments, subscriptions, refunds, or account charges; "general" for all other questions. Respond with just the category word.',tools:[],sub_agents:[],position:{x:200,y:100},routes:[{condition:"technical",target:"tech_support"},{condition:"billing",target:"billing_support"},{condition:"general",target:"general_support"}]},tech_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a senior technical support engineer. Help users with coding issues, bugs, API problems, and technical troubleshooting. Ask clarifying questions if needed. Provide code examples when helpful. Be patient and thorough.",tools:[],sub_agents:[],position:{x:50,y:350}},billing_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a billing specialist. Help users with payment issues, subscription questions, refund requests, and account billing inquiries. Be empathetic and solution-oriented. Explain charges clearly.",tools:[],sub_agents:[],position:{x:200,y:350}},general_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a friendly general support agent. Help users with general questions, product information, feature requests, and any inquiries that don't fit technical or billing categories. Be helpful and personable.",tools:[],sub_agents:[],position:{x:350,y:350}}},edges:[{from:"START",to:"router"},{from:"router",to:"tech_support"},{from:"router",to:"billing_support"},{from:"router",to:"general_support"},{from:"tech_support",to:"END"},{from:"billing_support",to:"END"},{from:"general_support",to:"END"}]},{id:"web_researcher",name:"Web Researcher",icon:"",description:"Agent that browses the web for information",agents:{web_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a web research assistant with browser capabilities. When asked a question: 1) Navigate to relevant websites to find accurate, up-to-date information, 2) Read and extract key content from pages, 3) Synthesize findings into a clear answer with sources. Always cite your sources.",tools:["browser"],sub_agents:[],position:{x:50,y:150}}},edges:[{from:"START",to:"web_agent"},{from:"web_agent",to:"END"}]}],T$="adk-studio-walkthrough",e2=Ja()(gA((e,t)=>({completed:!1,skipped:!1,isVisible:!1,complete:()=>e({completed:!0,skipped:!1,isVisible:!1}),skip:()=>e({completed:!1,skipped:!0,isVisible:!1}),show:()=>e({isVisible:!0}),hide:()=>e({isVisible:!1}),reset:()=>e({completed:!1,skipped:!1,isVisible:!0}),shouldShowOnFirstRun:()=>{const{completed:n,skipped:r}=t();return!n&&!r}}),{name:T$,partialize:e=>({completed:e.completed,skipped:e.skipped})}));function A$(e){const t=[];if(t.push({id:"overview",title:`Welcome to ${e.name}`,description:e.useCase||e.description,icon:e.icon,tips:[`This template includes ${Object.keys(e.agents).length} AI agent(s)`,...e.actionNodes?[`${Object.keys(e.actionNodes).length} action node(s) for automation`]:[],`${e.edges.length} connections between nodes`]}),e.envVars&&e.envVars.length>0){const r=e.envVars.filter(a=>a.required),i=e.envVars.filter(a=>!a.required);t.push({id:"env-vars",title:"Configure Environment Variables",description:"This template requires some configuration before it can run. Set up the following environment variables:",icon:"",tips:[...r.map(a=>`${a.name} (required): ${a.description}`),...i.length>0?[`Plus ${i.length} optional variable(s)`]:[]],action:{label:"Open Settings",type:"open-env"}})}const n=Object.entries(e.agents);if(n.length>0){const r=n.slice(0,4).map(([i,a])=>{const c=a.type==="llm"?"LLM Agent":a.type==="sequential"?"Sequential":a.type==="parallel"?"Parallel":a.type==="loop"?"Loop":a.type==="router"?"Router":a.type;return`${i}: ${c}${a.tools?.length?` with ${a.tools.length} tool(s)`:""}`});n.length>4&&r.push(`...and ${n.length-4} more agent(s)`),t.push({id:"agents",title:"AI Agents in This Workflow",description:"This template uses AI agents to process and analyze data. Click on any agent to customize its instructions.",icon:"",tips:r,highlightNodes:n.slice(0,3).map(([i])=>i)})}if(e.actionNodes&&Object.keys(e.actionNodes).length>0){const r=Object.entries(e.actionNodes),i=[...new Set(r.map(([,c])=>c.type))],a={trigger:" Trigger - Starts the workflow",http:" HTTP - API calls and webhooks",database:" Database - Data storage",email:" Email - Send/receive emails",transform:" Transform - Data manipulation",switch:" Switch - Conditional routing",loop:" Loop - Iterate over items",wait:" Wait - Delays and scheduling",notification:" Notification - Alerts",set:" Set - Variables"};t.push({id:"action-nodes",title:"Action Nodes for Automation",description:"Action nodes handle the non-AI parts of your workflow like API calls, database operations, and notifications.",icon:"",tips:i.slice(0,5).map(c=>a[c]||`${c} node`),highlightNodes:r.slice(0,3).map(([c])=>c)})}return e.customizationTips&&e.customizationTips.length>0&&t.push({id:"customization",title:"Customize for Your Needs",description:"Here are some ways you can adapt this template to your specific use case:",icon:"",tips:e.customizationTips.slice(0,5)}),t.push({id:"docs",title:"Learn More",description:"Check out the full documentation for detailed setup instructions, examples, and troubleshooting tips.",icon:"",tips:["View detailed setup instructions","See example configurations","Troubleshooting common issues","Best practices and tips"],action:{label:"View Documentation",type:"open-docs"}}),t.push({id:"ready",title:"Ready to Go!",description:"Your template is loaded and ready. Configure any remaining settings, then build and run your workflow!",icon:"",tips:['Click "Build" to compile your workflow',"Use the console to test with sample inputs","Watch the timeline to see execution flow","Check node states in the inspector panel"],action:{label:"Run Workflow",type:"run-workflow"}}),t}const t2=Ja((e,t)=>({template:null,steps:[],currentStep:0,isVisible:!1,start:n=>{const r=A$(n);e({template:n,steps:r,currentStep:0,isVisible:!0})},next:()=>{const{currentStep:n,steps:r}=t();n<r.length-1?e({currentStep:n+1}):t().complete()},previous:()=>{const{currentStep:n}=t();n>0&&e({currentStep:n-1})},goToStep:n=>{const{steps:r}=t();n>=0&&n<r.length&&e({currentStep:n})},skip:()=>{e({isVisible:!1})},complete:()=>{e({isVisible:!1})},reset:()=>{e({template:null,steps:[],currentStep:0,isVisible:!1})}})),P$=[{key:"Delete / Backspace",description:"Delete selected node or tool",category:"Edit"},{key:"Ctrl/Cmd + D",description:"Duplicate selected node",category:"Edit"},{key:"Escape",description:"Deselect all",category:"Edit"},{key:"Ctrl/Cmd + Z",description:"Undo",category:"Edit"},{key:"Ctrl/Cmd + Shift + Z",description:"Redo",category:"Edit"},{key:"Ctrl/Cmd + L",description:"Apply auto-layout",category:"Canvas"},{key:"Ctrl/Cmd + 0",description:"Fit all nodes in view",category:"Canvas"},{key:"Ctrl/Cmd + Plus",description:"Zoom in",category:"Canvas"},{key:"Ctrl/Cmd + Minus",description:"Zoom out",category:"Canvas"}];function I$({selectedNodeId:e,selectedToolId:t,selectedActionNodeId:n,onDeleteNode:r,onDeleteActionNode:i,onDeleteTool:a,onDuplicateNode:c,onSelectNode:u,onSelectActionNode:d,onSelectTool:p,onAutoLayout:f,onFitView:m,onZoomIn:g,onZoomOut:v,onUndo:w,onRedo:b}){E.useEffect(()=>{const k=_=>{const N=document.activeElement;if(N?.tagName==="INPUT"||N?.tagName==="TEXTAREA"||N?.isContentEditable)return;const S=_.metaKey||_.ctrlKey,A=_.shiftKey;if(_.key==="Delete"||_.key==="Backspace"){if(t&&e){const P=t.split("_");a(e,P.slice(-2).join("_")),p(null)}else n&&i?(i(n),d?.(null)):e&&e!=="START"&&e!=="END"&&(r(e),u(null));_.preventDefault();return}if(S&&_.key==="d"&&e&&c){_.preventDefault();const P=c(e);P&&u(P);return}if(S&&_.key==="l"&&f){_.preventDefault(),f();return}if(S&&_.key==="0"&&m){_.preventDefault(),m();return}if(S&&!A&&_.key==="z"&&w){_.preventDefault(),w();return}if(S&&A&&(_.key==="z"||_.key==="Z")&&b){_.preventDefault(),b();return}if(_.key==="Escape"){u(null),p(null);return}if(S&&(_.key==="+"||_.key==="="||_.key==="NumpadAdd")&&g){_.preventDefault(),g();return}if(S&&(_.key==="-"||_.key==="NumpadSubtract")&&v){_.preventDefault(),v();return}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[e,t,n,r,i,a,c,u,d,p,f,m,g,v,w,b])}const R$=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n2=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");var O$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const M$=E.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:c,...u},d)=>E.createElement("svg",{ref:d,...O$,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:n2("lucide",i),...u},[...c.map(([p,f])=>E.createElement(p,f)),...Array.isArray(a)?a:[a]]));const In=(e,t)=>{const n=E.forwardRef(({className:r,...i},a)=>E.createElement(M$,{ref:a,iconNode:t,className:n2(`lucide-${R$(e)}`,r),...i}));return n.displayName=`${e}`,n};const r2=In("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const i2=In("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const o2=In("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const L$=In("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const D$=In("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const q$=In("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const s2=In("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const F$=In("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const z$=In("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const a2=In("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const B$=In("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Nx=In("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$$={id:"ai_lead_generation",name:"AI-Powered Lead Generation",icon:"",description:"Process leads with AI analysis, scoring, and CRM integration",category:"automation",requiredNodeTypes:["trigger","http","switch","notification"],envVars:[{name:"WEBHOOK_SECRET",description:"Secret for webhook authentication",required:!0,example:"whsec_xxx"},{name:"CRM_API_KEY",description:"CRM API key (HubSpot, Salesforce, etc.)",required:!0,example:"pat-xxx"},{name:"CRM_BASE_URL",description:"CRM API base URL",required:!0,example:"https://api.hubapi.com"},{name:"SLACK_WEBHOOK_URL",description:"Slack incoming webhook URL",required:!0,example:"https://hooks.slack.com/services/xxx"}],useCase:"Automatically process incoming leads from web forms, analyze company information and intent with AI, score lead quality, and route high-value leads to sales while updating your CRM.",customizationTips:["Adjust the lead scoring criteria in the scoring agent prompt","Modify the Switch conditions to match your lead routing rules","Add additional CRM fields based on your sales process","Customize Slack message format for your team preferences"],agents:{lead_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a lead analysis expert. Analyze the incoming lead data and extract:
1. Company information (name, size, industry)
2. Contact details (name, role, seniority)
3. Intent signals (what they're looking for, urgency)
4. Potential use cases for our product
5. Any red flags or concerns

Output your analysis as JSON:
{
  "company": {
    "name": "Company Name",
    "size": "small|medium|enterprise",
    "industry": "Industry"
  },
  "contact": {
    "name": "Contact Name",
    "role": "Job Title",
    "seniority": "junior|mid|senior|executive"
  },
  "intent": {
    "description": "What they're looking for",
    "urgency": "low|medium|high",
    "useCases": ["use case 1", "use case 2"]
  },
  "concerns": ["any red flags"],
  "summary": "Brief summary of the lead"
}`,tools:[],sub_agents:[],position:{x:400,y:200}},lead_scorer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a lead scoring expert. Based on the lead analysis provided, calculate a lead score from 0-100 considering:

Scoring Criteria:
- Company size: Enterprise (+30), Medium (+20), Small (+10)
- Contact seniority: Executive (+25), Senior (+20), Mid (+10), Junior (+5)
- Intent urgency: High (+25), Medium (+15), Low (+5)
- Industry fit: High fit (+20), Medium fit (+10), Low fit (+0)

Also determine the lead tier:
- Hot (80-100): Immediate follow-up required
- Warm (50-79): Follow up within 24 hours
- Cold (0-49): Add to nurture campaign

Output as JSON:
{
  "score": 85,
  "tier": "hot|warm|cold",
  "breakdown": {
    "companySize": 30,
    "seniority": 25,
    "urgency": 25,
    "industryFit": 5
  },
  "recommendation": "Recommended next action",
  "assignTo": "sales_team|nurture_campaign|disqualify"
}`,tools:[],sub_agents:[],position:{x:600,y:200}}},actionNodes:{webhook_trigger:{type:"trigger",id:"webhook_trigger",name:"Lead Form Webhook",description:"Receive lead submissions from web forms",triggerType:"webhook",webhook:{path:"/api/webhook/leads",method:"POST",auth:"api_key",authConfig:{headerName:"X-Webhook-Secret",tokenEnvVar:"WEBHOOK_SECRET"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"leadData"}},enrich_lead:{type:"http",id:"enrich_lead",name:"Enrich Lead Data",description:"Fetch additional company information",method:"GET",url:'https://api.clearbit.com/v2/companies/find?domain={{leadData.email.split("@")[1]}}',auth:{type:"bearer",bearer:{token:"{{CLEARBIT_API_KEY}}"}},headers:{},body:{type:"none"},response:{type:"json"},errorHandling:{mode:"fallback",fallbackValue:{}},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"enrichedData"}},route_lead:{type:"switch",id:"route_lead",name:"Route by Lead Score",description:"Route leads based on their score tier",evaluationMode:"first_match",conditions:[{id:"hot",name:"Hot Lead",field:"leadScore.tier",operator:"eq",value:"hot",outputPort:"hot"},{id:"warm",name:"Warm Lead",field:"leadScore.tier",operator:"eq",value:"warm",outputPort:"warm"}],defaultBranch:"cold",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"routeResult"}},create_crm_contact:{type:"http",id:"create_crm_contact",name:"Create CRM Contact",description:"Create or update contact in CRM",method:"POST",url:"{{CRM_BASE_URL}}/crm/v3/objects/contacts",auth:{type:"bearer",bearer:{token:"{{CRM_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "properties": {
    "email": "{{leadData.email}}",
    "firstname": "{{leadAnalysis.contact.name.split(' ')[0]}}",
    "lastname": "{{leadAnalysis.contact.name.split(' ').slice(1).join(' ')}}",
    "company": "{{leadAnalysis.company.name}}",
    "jobtitle": "{{leadAnalysis.contact.role}}",
    "lead_score": "{{leadScore.score}}",
    "lead_tier": "{{leadScore.tier}}"
  }
}`},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"crmResult"}},notify_sales:{type:"notification",id:"notify_sales",name:"Notify Sales Team",description:"Send Slack notification for hot leads",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:` *New Hot Lead!*

*Company:* {{leadAnalysis.company.name}}
*Contact:* {{leadAnalysis.contact.name}} ({{leadAnalysis.contact.role}})
*Score:* {{leadScore.score}}/100
*Intent:* {{leadAnalysis.intent.description}}

_{{leadScore.recommendation}}_`,format:"markdown"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"notificationResult"}}},edges:[{from:"START",to:"webhook_trigger"},{from:"webhook_trigger",to:"enrich_lead"},{from:"enrich_lead",to:"lead_analyzer"},{from:"lead_analyzer",to:"lead_scorer"},{from:"lead_scorer",to:"route_lead"},{from:"route_lead",to:"create_crm_contact",fromPort:"hot"},{from:"route_lead",to:"create_crm_contact",fromPort:"warm"},{from:"route_lead",to:"create_crm_contact",fromPort:"cold"},{from:"create_crm_contact",to:"notify_sales"},{from:"notify_sales",to:"END"}]},H$={id:"intelligent_email_marketing",name:"Intelligent Email Marketing",icon:"",description:"AI-personalized email campaigns with customer segmentation",category:"automation",requiredNodeTypes:["trigger","database","loop","email","wait"],envVars:[{name:"DATABASE_URL",description:"PostgreSQL connection string for customer data",required:!0,example:"postgresql://user:pass@host:5432/db"},{name:"SMTP_HOST",description:"SMTP server host",required:!0,example:"smtp.sendgrid.net"},{name:"SMTP_USER",description:"SMTP username",required:!0,example:"apikey"},{name:"SMTP_PASS",description:"SMTP password or API key",required:!0,example:"SG.xxx"},{name:"FROM_EMAIL",description:"Sender email address",required:!0,example:"marketing@company.com"}],useCase:"Run scheduled email campaigns that fetch customer segments from your database, use AI to personalize each email based on customer profile and purchase history, and track engagement.",customizationTips:["Modify the SQL query to target specific customer segments","Adjust the personalization prompt for your brand voice","Add A/B testing by creating multiple email variants","Implement engagement tracking with webhook callbacks"],agents:{email_personalizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are an expert email marketing copywriter. Create a personalized email for the customer based on their profile.

Customer Data Available:
- Name: {{customer.name}}
- Purchase history: {{customer.purchases}}
- Preferences: {{customer.preferences}}
- Last interaction: {{customer.lastInteraction}}

Campaign Context:
- Campaign type: {{campaign.type}}
- Product/offer: {{campaign.product}}
- Key message: {{campaign.message}}

Write a compelling, personalized email that:
1. Uses the customer's name naturally
2. References their past purchases or interests
3. Presents the offer in a relevant way
4. Has a clear call-to-action
5. Maintains a friendly, professional tone

Output as JSON:
{
  "subject": "Personalized subject line",
  "preheader": "Email preview text",
  "greeting": "Personalized greeting",
  "body": "Main email content (HTML allowed)",
  "cta": {
    "text": "Button text",
    "url": "https://..."
  },
  "signature": "Closing and signature"
}`,tools:[],sub_agents:[],position:{x:500,y:300}}},actionNodes:{schedule_trigger:{type:"trigger",id:"schedule_trigger",name:"Campaign Schedule",description:"Run campaign every Tuesday at 10 AM",triggerType:"schedule",schedule:{cron:"0 10 * * 2",timezone:"America/New_York"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"scheduleData"}},fetch_customers:{type:"database",id:"fetch_customers",name:"Fetch Customer Segment",description:"Get customers for this campaign",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT 
          c.id, c.email, c.name, c.preferences,
          c.last_interaction, c.segment,
          json_agg(p.*) as purchases
        FROM customers c
        LEFT JOIN purchases p ON p.customer_id = c.id
        WHERE c.email_opt_in = true
          AND c.segment = 'active'
          AND c.last_email_sent < NOW() - INTERVAL '7 days'
        GROUP BY c.id
        LIMIT 100`},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"customers"}},set_campaign:{type:"set",id:"set_campaign",name:"Set Campaign Details",description:"Configure campaign parameters",mode:"set",variables:[{key:"campaign.type",value:"promotional",valueType:"string",isSecret:!1},{key:"campaign.product",value:"Summer Collection 2024",valueType:"string",isSecret:!1},{key:"campaign.message",value:"Exclusive 20% off for valued customers",valueType:"string",isSecret:!1},{key:"campaign.trackingId",value:"summer2024-promo",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"campaign"}},process_customers:{type:"loop",id:"process_customers",name:"Process Each Customer",description:"Iterate through customers for personalization",loopType:"forEach",forEach:{sourceArray:"customers",itemVar:"customer",indexVar:"idx"},parallel:{enabled:!0,batchSize:10,delayBetween:1e3},results:{collect:!0,aggregationKey:"emailResults"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e5},mapping:{outputKey:"loopResults"}},send_email:{type:"email",id:"send_email",name:"Send Personalized Email",description:"Send the AI-generated email",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"{{FROM_EMAIL}}",fromName:"Your Company"},recipients:{to:"{{customer.email}}"},content:{subject:"{{personalizedEmail.subject}}",bodyType:"html",body:`<!DOCTYPE html>
<html>
<body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
  <p>{{personalizedEmail.greeting}}</p>
  <div>{{personalizedEmail.body}}</div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{personalizedEmail.cta.url}}?utm_campaign={{campaign.trackingId}}&utm_source=email" 
       style="background: #0066cc; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px;">
      {{personalizedEmail.cta.text}}
    </a>
  </p>
  <p>{{personalizedEmail.signature}}</p>
</body>
</html>`},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emailSent"}},update_customer:{type:"database",id:"update_customer",name:"Update Customer Record",description:"Mark email as sent",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"update",query:`UPDATE customers 
                SET last_email_sent = NOW(), 
                    email_count = email_count + 1 
                WHERE id = $1`,params:{$1:"{{customer.id}}"}},errorHandling:{mode:"continue"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"updateResult"}},wait_for_engagement:{type:"wait",id:"wait_for_engagement",name:"Wait for Engagement",description:"Wait 24 hours to collect engagement data",waitType:"fixed",fixed:{duration:24,unit:"h"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:9e7},mapping:{outputKey:"waitComplete"}}},edges:[{from:"START",to:"schedule_trigger"},{from:"schedule_trigger",to:"fetch_customers"},{from:"fetch_customers",to:"set_campaign"},{from:"set_campaign",to:"process_customers"},{from:"process_customers",to:"email_personalizer"},{from:"email_personalizer",to:"send_email"},{from:"send_email",to:"update_customer"},{from:"update_customer",to:"wait_for_engagement"},{from:"wait_for_engagement",to:"END"}]},V$={id:"social_media_content_creator",name:"Social Media AI Content Creator",icon:"",description:"Auto-generate platform-specific posts from content sources",category:"automation",requiredNodeTypes:["trigger","rss","transform","loop","http"],envVars:[{name:"TWITTER_BEARER_TOKEN",description:"Twitter API Bearer token",required:!1,example:"AAAAAxx"},{name:"LINKEDIN_ACCESS_TOKEN",description:"LinkedIn API access token",required:!1,example:"AQVxx"},{name:"FACEBOOK_PAGE_TOKEN",description:"Facebook Page access token",required:!1,example:"EAAxx"},{name:"FACEBOOK_PAGE_ID",description:"Facebook Page ID",required:!1,example:"123456789"}],useCase:"Monitor your blog RSS feed or receive webhooks for new content, then use AI to adapt the content for each social media platform (Twitter, LinkedIn, Facebook) with appropriate tone, length, and hashtags.",customizationTips:["Add or remove platforms in the platforms array","Customize the AI prompts for your brand voice","Add image generation for visual content","Schedule posts for optimal engagement times"],agents:{content_adapter:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a social media content expert. Adapt the given content for the specified platform.

Source Content:
- Title: {{content.title}}
- Summary: {{content.summary}}
- URL: {{content.url}}
- Key points: {{content.keyPoints}}

Target Platform: {{platform.name}}

Platform Guidelines:
- Twitter: Max 280 chars, use hashtags, engaging hook, include link
- LinkedIn: Professional tone, 1-3 paragraphs, industry hashtags, thought leadership angle
- Facebook: Conversational, can be longer, encourage engagement, use emojis sparingly

Create content that:
1. Captures attention in the first line
2. Conveys the key message
3. Includes appropriate hashtags (3-5)
4. Has a clear call-to-action
5. Fits the platform's character/style limits

Output as JSON:
{
  "platform": "twitter|linkedin|facebook",
  "content": "The post content",
  "hashtags": ["hashtag1", "hashtag2"],
  "characterCount": 150,
  "mediaRecommendation": "Description of ideal accompanying image",
  "bestPostTime": "Recommended posting time"
}`,tools:[],sub_agents:[],position:{x:500,y:300}}},actionNodes:{rss_trigger:{type:"rss",id:"rss_trigger",name:"Blog RSS Feed",description:"Monitor blog for new posts",feedUrl:"https://your-blog.com/feed.xml",pollInterval:36e5,filters:{keywords:[]},seenTracking:{enabled:!0,stateKey:"seenPosts",maxItems:100},maxEntries:5,includeContent:!0,parseMedia:!0,errorHandling:{mode:"retry",retryCount:3,retryDelay:6e4},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"feedEntries"}},extract_content:{type:"transform",id:"extract_content",name:"Extract Content",description:"Parse and structure the content",transformType:"javascript",expression:`const entry = input.feedEntries[0];
return {
  title: entry.title,
  summary: entry.description?.substring(0, 500) || '',
  url: entry.link,
  publishDate: entry.pubDate,
  keyPoints: entry.description?.split('.').slice(0, 3).join('.') || '',
  author: entry.author || 'Unknown',
  categories: entry.categories || []
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{feedEntries:"feedEntries"},outputKey:"content"}},set_platforms:{type:"set",id:"set_platforms",name:"Configure Platforms",description:"Define target social media platforms",mode:"set",variables:[{key:"platforms",value:[{name:"twitter",enabled:!0,apiUrl:"https://api.twitter.com/2/tweets"},{name:"linkedin",enabled:!0,apiUrl:"https://api.linkedin.com/v2/ugcPosts"},{name:"facebook",enabled:!0,apiUrl:"https://graph.facebook.com/v18.0/{{FACEBOOK_PAGE_ID}}/feed"}],valueType:"json",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"platformConfig"}},loop_platforms:{type:"loop",id:"loop_platforms",name:"Process Each Platform",description:"Create content for each platform",loopType:"forEach",forEach:{sourceArray:"platforms",itemVar:"platform",indexVar:"platformIdx"},parallel:{enabled:!1},results:{collect:!0,aggregationKey:"postResults"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:12e4},mapping:{outputKey:"loopResults"}},post_twitter:{type:"http",id:"post_twitter",name:"Post to Twitter",description:"Publish tweet via Twitter API",method:"POST",url:"https://api.twitter.com/2/tweets",auth:{type:"bearer",bearer:{token:"{{TWITTER_BEARER_TOKEN}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:'{"text": "{{adaptedContent.content}}"}'},response:{type:"json"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"twitterResult"}},post_linkedin:{type:"http",id:"post_linkedin",name:"Post to LinkedIn",description:"Publish post via LinkedIn API",method:"POST",url:"https://api.linkedin.com/v2/ugcPosts",auth:{type:"bearer",bearer:{token:"{{LINKEDIN_ACCESS_TOKEN}}"}},headers:{"Content-Type":"application/json","X-Restli-Protocol-Version":"2.0.0"},body:{type:"json",content:`{
  "author": "urn:li:person:{{LINKEDIN_PERSON_ID}}",
  "lifecycleState": "PUBLISHED",
  "specificContent": {
    "com.linkedin.ugc.ShareContent": {
      "shareCommentary": {"text": "{{adaptedContent.content}}"},
      "shareMediaCategory": "ARTICLE",
      "media": [{
        "status": "READY",
        "originalUrl": "{{content.url}}"
      }]
    }
  },
  "visibility": {"com.linkedin.ugc.MemberNetworkVisibility": "PUBLIC"}
}`},response:{type:"json"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"linkedinResult"}}},edges:[{from:"START",to:"rss_trigger"},{from:"rss_trigger",to:"extract_content"},{from:"extract_content",to:"set_platforms"},{from:"set_platforms",to:"loop_platforms"},{from:"loop_platforms",to:"content_adapter"},{from:"content_adapter",to:"post_twitter"},{from:"post_twitter",to:"post_linkedin"},{from:"post_linkedin",to:"END"}]},U$={id:"ai_customer_support",name:"AI Customer Support",icon:"",description:"Intelligent ticket handling with knowledge base integration",category:"automation",requiredNodeTypes:["trigger","switch","http","email","notification"],envVars:[{name:"PINECONE_API_KEY",description:"Pinecone vector database API key",required:!0,example:"pc-xxx"},{name:"PINECONE_INDEX",description:"Pinecone index name",required:!0,example:"support-kb"},{name:"SMTP_HOST",description:"SMTP server for sending responses",required:!0,example:"smtp.sendgrid.net"},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0},{name:"SLACK_WEBHOOK_URL",description:"Slack webhook for escalations",required:!0}],useCase:"Receive support tickets via webhook, classify the issue type, search your knowledge base for relevant articles, generate a helpful response, and either auto-reply or escalate to human agents based on confidence.",customizationTips:["Adjust confidence thresholds for auto-reply vs escalation","Add more issue categories in the classifier prompt","Customize the response tone for your brand","Integrate with your ticketing system (Zendesk, Freshdesk, etc.)"],agents:{ticket_classifier:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a customer support ticket classifier. Analyze the incoming ticket and categorize it.

Ticket Content:
- Subject: {{ticket.subject}}
- Body: {{ticket.body}}
- Customer: {{ticket.customerEmail}}

Classify into one of these categories:
- billing: Payment issues, refunds, subscription questions
- technical: Bugs, errors, how-to questions, integrations
- account: Login issues, password reset, account settings
- feature: Feature requests, suggestions
- general: General inquiries, feedback

Also assess:
- Urgency: low, medium, high, critical
- Sentiment: positive, neutral, negative, angry
- Complexity: simple (FAQ), moderate, complex (needs human)

Output as JSON:
{
  "category": "technical",
  "subcategory": "integration",
  "urgency": "medium",
  "sentiment": "neutral",
  "complexity": "moderate",
  "keywords": ["api", "webhook", "error"],
  "summary": "Brief summary of the issue"
}`,tools:[],sub_agents:[],position:{x:300,y:200}},response_generator:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a helpful customer support agent. Generate a response to the customer's ticket using the knowledge base articles provided.

Ticket:
- Subject: {{ticket.subject}}
- Body: {{ticket.body}}
- Category: {{classification.category}}

Relevant Knowledge Base Articles:
{{kbArticles}}

Guidelines:
1. Be empathetic and acknowledge the customer's issue
2. Provide a clear, step-by-step solution if available
3. Reference specific KB articles when helpful
4. If you can't fully resolve, explain what you can help with
5. End with a clear next step or offer for further assistance

Output as JSON:
{
  "greeting": "Personalized greeting",
  "acknowledgment": "Acknowledge their issue",
  "solution": "Main response with solution/information",
  "nextSteps": ["Step 1", "Step 2"],
  "closing": "Friendly closing",
  "confidence": 0.85,
  "kbArticlesUsed": ["article-id-1", "article-id-2"],
  "needsHumanReview": false,
  "suggestedEscalationReason": null
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{ticket_webhook:{type:"trigger",id:"ticket_webhook",name:"Support Ticket Webhook",description:"Receive incoming support tickets",triggerType:"webhook",webhook:{path:"/api/webhook/support-ticket",method:"POST",auth:"api_key",authConfig:{headerName:"X-Support-Key",tokenEnvVar:"SUPPORT_WEBHOOK_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"ticket"}},search_kb:{type:"http",id:"search_kb",name:"Search Knowledge Base",description:"Vector search for relevant articles",method:"POST",url:"https://{{PINECONE_INDEX}}-xxx.svc.pinecone.io/query",auth:{type:"api_key",apiKey:{headerName:"Api-Key",value:"{{PINECONE_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "vector": "{{ticketEmbedding}}",
  "topK": 5,
  "includeMetadata": true,
  "filter": {
    "category": {"$eq": "{{classification.category}}"}
  }
}`},response:{type:"json",jsonPath:"$.matches"},errorHandling:{mode:"fallback",fallbackValue:[]},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"kbArticles"}},route_confidence:{type:"switch",id:"route_confidence",name:"Route by Confidence",description:"Route based on response confidence",evaluationMode:"first_match",conditions:[{id:"high_conf",name:"High Confidence",field:"response.confidence",operator:"gte",value:.8,outputPort:"auto_reply"},{id:"med_conf",name:"Medium Confidence",field:"response.confidence",operator:"gte",value:.5,outputPort:"review"}],defaultBranch:"escalate",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"routeResult"}},send_auto_reply:{type:"email",id:"send_auto_reply",name:"Send Auto Reply",description:"Send automated response to customer",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"support@company.com",fromName:"Customer Support"},recipients:{to:"{{ticket.customerEmail}}"},content:{subject:"Re: {{ticket.subject}}",bodyType:"html",body:`<p>{{response.greeting}}</p>
<p>{{response.acknowledgment}}</p>
<p>{{response.solution}}</p>
<h4>Next Steps:</h4>
<ul>
{{#each response.nextSteps}}<li>{{this}}</li>{{/each}}
</ul>
<p>{{response.closing}}</p>
<hr>
<p style="color: #666; font-size: 12px;">Ticket ID: {{ticket.id}}</p>`},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emailResult"}},escalate_notification:{type:"notification",id:"escalate_notification",name:"Escalate to Human",description:"Notify support team for manual handling",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:` *Support Ticket Escalation*

*Ticket:* {{ticket.subject}}
*Customer:* {{ticket.customerEmail}}
*Category:* {{classification.category}}
*Urgency:* {{classification.urgency}}
*Sentiment:* {{classification.sentiment}}

*Summary:* {{classification.summary}}

*Reason:* {{response.suggestedEscalationReason || "Low confidence response"}}
*AI Confidence:* {{response.confidence}}`,format:"markdown"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"escalationResult"}}},edges:[{from:"START",to:"ticket_webhook"},{from:"ticket_webhook",to:"ticket_classifier"},{from:"ticket_classifier",to:"search_kb"},{from:"search_kb",to:"response_generator"},{from:"response_generator",to:"route_confidence"},{from:"route_confidence",to:"send_auto_reply",fromPort:"auto_reply"},{from:"route_confidence",to:"send_auto_reply",fromPort:"review"},{from:"route_confidence",to:"escalate_notification",fromPort:"escalate"},{from:"send_auto_reply",to:"END"},{from:"escalate_notification",to:"END"}]},W$={id:"intelligent_data_analysis",name:"Intelligent Data Analysis & Reporting",icon:"",description:"Automated BI reports with AI-powered insights",category:"automation",requiredNodeTypes:["trigger","database","transform","file","email"],envVars:[{name:"DATABASE_URL",description:"Database connection string",required:!0,example:"postgresql://user:pass@host:5432/analytics"},{name:"S3_BUCKET",description:"S3 bucket for report storage",required:!0,example:"company-reports"},{name:"AWS_ACCESS_KEY_ID",description:"AWS access key",required:!0},{name:"AWS_SECRET_ACCESS_KEY",description:"AWS secret key",required:!0},{name:"SMTP_HOST",description:"SMTP server",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0}],useCase:"Run weekly automated reports that extract sales, user, and performance data from your database, use AI to identify trends and anomalies, generate executive summaries, and distribute to stakeholders.",customizationTips:["Modify SQL queries for your specific metrics","Adjust the analysis prompt for your business context","Add visualizations using a charting library","Create different report types for different audiences"],agents:{data_analyst:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a senior data analyst. Analyze the provided business data and identify key insights.

Data Summary:
{{dataSummary}}

Time Period: {{reportPeriod}}

Analyze:
1. Key Performance Indicators (KPIs) and their trends
2. Notable changes from previous period (week-over-week, month-over-month)
3. Anomalies or outliers that need attention
4. Correlations between different metrics
5. Potential causes for significant changes

Output as JSON:
{
  "kpis": [
    {"name": "Revenue", "value": 125000, "change": 12.5, "trend": "up"},
    {"name": "Active Users", "value": 5420, "change": -3.2, "trend": "down"}
  ],
  "insights": [
    {"type": "trend", "title": "Revenue Growth", "description": "...", "importance": "high"},
    {"type": "anomaly", "title": "Spike in Errors", "description": "...", "importance": "critical"}
  ],
  "correlations": [
    {"metrics": ["marketing_spend", "signups"], "correlation": 0.85, "insight": "..."}
  ],
  "recommendations": [
    {"action": "Investigate error spike", "priority": "high", "rationale": "..."}
  ]
}`,tools:[],sub_agents:[],position:{x:500,y:200}},report_writer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a business report writer. Create an executive summary report from the analysis.

Analysis Results:
{{analysis}}

Report Period: {{reportPeriod}}

Create a professional report with:
1. Executive Summary (2-3 sentences)
2. Key Highlights (bullet points)
3. Detailed Findings (organized by category)
4. Recommendations
5. Next Steps

Format the report in clean HTML suitable for email and PDF.

Output as JSON:
{
  "title": "Weekly Business Intelligence Report",
  "subtitle": "Week of {{reportPeriod}}",
  "executiveSummary": "HTML content...",
  "highlights": ["Highlight 1", "Highlight 2"],
  "sections": [
    {"title": "Revenue Performance", "content": "HTML content..."},
    {"title": "User Metrics", "content": "HTML content..."}
  ],
  "recommendations": "HTML content...",
  "nextSteps": ["Step 1", "Step 2"],
  "generatedAt": "ISO timestamp"
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{weekly_schedule:{type:"trigger",id:"weekly_schedule",name:"Weekly Report Schedule",description:"Run every Monday at 6 AM",triggerType:"schedule",schedule:{cron:"0 6 * * 1",timezone:"America/New_York"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"scheduleData"}},extract_sales_data:{type:"database",id:"extract_sales_data",name:"Extract Sales Data",description:"Query sales metrics from database",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`WITH current_week AS (
  SELECT 
    DATE_TRUNC('week', NOW()) as week_start,
    DATE_TRUNC('week', NOW()) + INTERVAL '6 days' as week_end
),
metrics AS (
  SELECT
    COUNT(*) as total_orders,
    SUM(amount) as revenue,
    AVG(amount) as avg_order_value,
    COUNT(DISTINCT customer_id) as unique_customers
  FROM orders
  WHERE created_at >= (SELECT week_start FROM current_week)
    AND created_at <= (SELECT week_end FROM current_week)
),
previous_week AS (
  SELECT
    COUNT(*) as total_orders,
    SUM(amount) as revenue,
    AVG(amount) as avg_order_value,
    COUNT(DISTINCT customer_id) as unique_customers
  FROM orders
  WHERE created_at >= (SELECT week_start FROM current_week) - INTERVAL '7 days'
    AND created_at < (SELECT week_start FROM current_week)
)
SELECT 
  m.*,
  p.total_orders as prev_orders,
  p.revenue as prev_revenue,
  p.avg_order_value as prev_aov,
  p.unique_customers as prev_customers
FROM metrics m, previous_week p`},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"salesData"}},extract_user_data:{type:"database",id:"extract_user_data",name:"Extract User Metrics",description:"Query user engagement data",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT
  COUNT(*) FILTER (WHERE created_at >= NOW() - INTERVAL '7 days') as new_signups,
  COUNT(*) FILTER (WHERE last_active >= NOW() - INTERVAL '7 days') as active_users,
  COUNT(*) FILTER (WHERE last_active < NOW() - INTERVAL '30 days') as churned_users,
  AVG(EXTRACT(EPOCH FROM (last_active - created_at))/86400) as avg_lifetime_days
FROM users`},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"userData"}},transform_data:{type:"transform",id:"transform_data",name:"Combine & Clean Data",description:"Merge all data sources",transformType:"javascript",expression:`const sales = input.salesData[0] || {};
const users = input.userData[0] || {};

return {
  reportPeriod: new Date().toISOString().split('T')[0],
  dataSummary: {
    sales: {
      revenue: sales.revenue || 0,
      orders: sales.total_orders || 0,
      avgOrderValue: sales.avg_order_value || 0,
      uniqueCustomers: sales.unique_customers || 0,
      revenueChange: sales.prev_revenue ? ((sales.revenue - sales.prev_revenue) / sales.prev_revenue * 100).toFixed(1) : 0
    },
    users: {
      newSignups: users.new_signups || 0,
      activeUsers: users.active_users || 0,
      churnedUsers: users.churned_users || 0,
      avgLifetimeDays: Math.round(users.avg_lifetime_days || 0)
    }
  }
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{salesData:"salesData",userData:"userData"},outputKey:"combinedData"}},save_report:{type:"file",id:"save_report",name:"Save Report to S3",description:"Store report in cloud storage",operation:"write",cloud:{provider:"s3",bucket:"{{S3_BUCKET}}",key:"reports/weekly/{{combinedData.reportPeriod}}-report.html",credentials:"AWS_CREDENTIALS",region:"us-east-1",presignedUrl:!0,presignedExpiry:604800},write:{content:"{{reportHtml}}",createDirs:!0},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"savedReport"}},send_report:{type:"email",id:"send_report",name:"Distribute Report",description:"Email report to stakeholders",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"reports@company.com",fromName:"Business Intelligence"},recipients:{to:"executives@company.com",cc:"analytics-team@company.com"},content:{subject:" Weekly Business Report - {{combinedData.reportPeriod}}",bodyType:"html",body:`{{report.executiveSummary}}
<h3>Key Highlights</h3>
<ul>{{#each report.highlights}}<li>{{this}}</li>{{/each}}</ul>
<p><a href="{{savedReport.presignedUrl}}">View Full Report</a></p>`},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emailResult"}}},edges:[{from:"START",to:"weekly_schedule"},{from:"weekly_schedule",to:"extract_sales_data"},{from:"extract_sales_data",to:"extract_user_data"},{from:"extract_user_data",to:"transform_data"},{from:"transform_data",to:"data_analyst"},{from:"data_analyst",to:"report_writer"},{from:"report_writer",to:"save_report"},{from:"save_report",to:"send_report"},{from:"send_report",to:"END"}]},K$={id:"ai_invoice_processing",name:"AI Invoice Processing",icon:"",description:"Automated invoice extraction, categorization, and approval routing",category:"automation",requiredNodeTypes:["email","http","switch","database"],envVars:[{name:"IMAP_HOST",description:"IMAP server for invoice emails",required:!0,example:"imap.gmail.com"},{name:"IMAP_USER",description:"Email account username",required:!0},{name:"IMAP_PASS",description:"Email account password/app password",required:!0},{name:"OCR_API_KEY",description:"Document AI/OCR service API key",required:!0},{name:"DATABASE_URL",description:"Accounting database connection",required:!0},{name:"SMTP_HOST",description:"SMTP server for confirmations",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0}],useCase:"Monitor an invoices email inbox, automatically extract invoice data using OCR, use AI to categorize expenses and validate data, route high-value invoices for approval, and record in your accounting system.",customizationTips:["Adjust approval thresholds for your organization","Add integration with your accounting software (QuickBooks, Xero)","Customize expense categories for your chart of accounts","Add duplicate detection logic"],agents:{invoice_extractor:{type:"llm",model:"gemini-2.0-flash",instruction:`You are an invoice processing expert. Analyze the OCR-extracted text and structure the invoice data.

OCR Text:
{{ocrText}}

Extract and validate:
1. Vendor information (name, address, tax ID)
2. Invoice details (number, date, due date)
3. Line items (description, quantity, unit price, total)
4. Totals (subtotal, tax, total amount)
5. Payment terms and bank details

Also:
- Categorize the expense (office supplies, software, services, travel, etc.)
- Flag any potential issues (missing data, unusual amounts)
- Calculate confidence score for extraction accuracy

Output as JSON:
{
  "vendor": {
    "name": "Vendor Name",
    "address": "Full address",
    "taxId": "Tax ID if present",
    "email": "vendor@email.com"
  },
  "invoice": {
    "number": "INV-001",
    "date": "2024-01-15",
    "dueDate": "2024-02-15",
    "currency": "USD"
  },
  "lineItems": [
    {"description": "Item", "quantity": 1, "unitPrice": 100, "total": 100}
  ],
  "totals": {
    "subtotal": 100,
    "tax": 10,
    "total": 110
  },
  "category": "software",
  "paymentTerms": "Net 30",
  "bankDetails": "If present",
  "confidence": 0.95,
  "flags": ["Missing PO number"],
  "needsReview": false
}`,tools:[],sub_agents:[],position:{x:500,y:200}}},actionNodes:{monitor_inbox:{type:"email",id:"monitor_inbox",name:"Monitor Invoice Inbox",description:"Watch for incoming invoices",mode:"monitor",imap:{host:"{{IMAP_HOST}}",port:993,secure:!0,username:"{{IMAP_USER}}",password:"{{IMAP_PASS}}",folder:"INBOX",markAsRead:!0},filters:{subject:"*invoice*",unreadOnly:!0},errorHandling:{mode:"retry",retryCount:3,retryDelay:6e4},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"incomingEmail"}},extract_attachment:{type:"transform",id:"extract_attachment",name:"Extract PDF Attachment",description:"Get invoice PDF from email",transformType:"javascript",expression:`const attachments = input.incomingEmail.attachments || [];
const pdfAttachment = attachments.find(a => 
  a.filename.toLowerCase().endsWith('.pdf') || 
  a.mimeType === 'application/pdf'
);
if (!pdfAttachment) {
  throw new Error('No PDF attachment found');
}
return {
  filename: pdfAttachment.filename,
  content: pdfAttachment.content,
  mimeType: pdfAttachment.mimeType,
  senderEmail: input.incomingEmail.from,
  receivedAt: input.incomingEmail.date
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{incomingEmail:"incomingEmail"},outputKey:"pdfData"}},ocr_document:{type:"http",id:"ocr_document",name:"OCR Invoice",description:"Extract text from PDF using Document AI",method:"POST",url:"https://documentai.googleapis.com/v1/projects/{{PROJECT_ID}}/locations/us/processors/{{PROCESSOR_ID}}:process",auth:{type:"bearer",bearer:{token:"{{OCR_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "rawDocument": {
    "content": "{{pdfData.content}}",
    "mimeType": "application/pdf"
  }
}`},response:{type:"json",jsonPath:"$.document.text"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"ocrText"}},route_approval:{type:"switch",id:"route_approval",name:"Route for Approval",description:"Route based on invoice amount",evaluationMode:"first_match",conditions:[{id:"high_value",name:"High Value (>$5000)",field:"invoiceData.totals.total",operator:"gt",value:5e3,outputPort:"manager_approval"},{id:"medium_value",name:"Medium Value (>$1000)",field:"invoiceData.totals.total",operator:"gt",value:1e3,outputPort:"team_lead_approval"},{id:"needs_review",name:"Needs Review",field:"invoiceData.needsReview",operator:"eq",value:!0,outputPort:"manual_review"}],defaultBranch:"auto_approve",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"approvalRoute"}},save_to_accounting:{type:"database",id:"save_to_accounting",name:"Save to Accounting",description:"Record invoice in database",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:`INSERT INTO invoices (
          vendor_name, vendor_email, invoice_number, invoice_date, due_date,
          subtotal, tax, total, currency, category, status, 
          line_items, raw_data, created_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, NOW())
        RETURNING id`,params:{$1:"{{invoiceData.vendor.name}}",$2:"{{invoiceData.vendor.email}}",$3:"{{invoiceData.invoice.number}}",$4:"{{invoiceData.invoice.date}}",$5:"{{invoiceData.invoice.dueDate}}",$6:"{{invoiceData.totals.subtotal}}",$7:"{{invoiceData.totals.tax}}",$8:"{{invoiceData.totals.total}}",$9:"{{invoiceData.invoice.currency}}",$10:"{{invoiceData.category}}",$11:"{{approvalRoute}}",$12:"{{invoiceData.lineItems}}",$13:"{{invoiceData}}"}},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"savedInvoice"}},send_confirmation:{type:"email",id:"send_confirmation",name:"Send Confirmation",description:"Confirm invoice receipt to vendor",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"ap@company.com",fromName:"Accounts Payable"},recipients:{to:"{{invoiceData.vendor.email}}"},content:{subject:"Invoice {{invoiceData.invoice.number}} Received",bodyType:"html",body:`<p>Dear {{invoiceData.vendor.name}},</p>
<p>We have received your invoice <strong>{{invoiceData.invoice.number}}</strong> dated {{invoiceData.invoice.date}}.</p>
<p><strong>Amount:</strong> {{invoiceData.invoice.currency}} {{invoiceData.totals.total}}</p>
<p><strong>Due Date:</strong> {{invoiceData.invoice.dueDate}}</p>
<p><strong>Status:</strong> {{approvalRoute}}</p>
<p>You will receive payment confirmation once processed.</p>
<p>Best regards,<br>Accounts Payable Team</p>`},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"confirmationSent"}}},edges:[{from:"START",to:"monitor_inbox"},{from:"monitor_inbox",to:"extract_attachment"},{from:"extract_attachment",to:"ocr_document"},{from:"ocr_document",to:"invoice_extractor"},{from:"invoice_extractor",to:"route_approval"},{from:"route_approval",to:"save_to_accounting",fromPort:"auto_approve"},{from:"route_approval",to:"save_to_accounting",fromPort:"team_lead_approval"},{from:"route_approval",to:"save_to_accounting",fromPort:"manager_approval"},{from:"route_approval",to:"save_to_accounting",fromPort:"manual_review"},{from:"save_to_accounting",to:"send_confirmation"},{from:"send_confirmation",to:"END"}]},G$={id:"ai_job_application_bot",name:"AI Job Application Bot",icon:"",description:"Automated job hunting with AI-powered applications",category:"automation",requiredNodeTypes:["rss","switch","http","database"],envVars:[{name:"DATABASE_URL",description:"Database for tracking applications",required:!0},{name:"LINKEDIN_API_KEY",description:"LinkedIn API key (optional)",required:!1},{name:"RESUME_URL",description:"URL to your resume PDF",required:!0}],useCase:"Automatically monitor job boards and RSS feeds for relevant positions, use AI to analyze job requirements and score match against your profile, generate tailored cover letters, and track all applications.",customizationTips:["Update your profile data in the Set node","Adjust match score thresholds for your preferences","Customize cover letter tone and style","Add more job board RSS feeds"],agents:{job_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a job posting analyst. Analyze the job posting and extract key information.

Job Posting:
{{jobPosting}}

Extract:
1. Job title and level (junior, mid, senior, lead)
2. Company information
3. Required skills (must-have vs nice-to-have)
4. Experience requirements
5. Location and remote policy
6. Salary range if mentioned
7. Key responsibilities
8. Red flags or concerns

Output as JSON:
{
  "title": "Job Title",
  "level": "senior",
  "company": {
    "name": "Company Name",
    "industry": "Tech",
    "size": "startup|mid|enterprise"
  },
  "skills": {
    "required": ["skill1", "skill2"],
    "preferred": ["skill3", "skill4"]
  },
  "experience": {
    "years": 5,
    "type": "relevant field experience"
  },
  "location": {
    "type": "remote|hybrid|onsite",
    "city": "City if applicable"
  },
  "salary": {
    "min": 100000,
    "max": 150000,
    "currency": "USD"
  },
  "responsibilities": ["resp1", "resp2"],
  "redFlags": [],
  "applicationUrl": "URL to apply",
  "deadline": "if mentioned"
}`,tools:[],sub_agents:[],position:{x:300,y:200}},match_scorer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a job match evaluator. Score how well the candidate matches the job requirements.

Job Analysis:
{{jobAnalysis}}

Candidate Profile:
{{candidateProfile}}

Evaluate match on:
1. Skills match (required and preferred)
2. Experience level alignment
3. Industry/domain fit
4. Location compatibility
5. Salary expectations alignment
6. Career trajectory fit

Calculate scores (0-100) for each category and overall.

Output as JSON:
{
  "overallScore": 85,
  "breakdown": {
    "skills": {"score": 90, "matched": ["skill1"], "missing": ["skill2"]},
    "experience": {"score": 80, "notes": "Slightly under required years"},
    "industry": {"score": 95, "notes": "Strong domain match"},
    "location": {"score": 100, "notes": "Remote compatible"},
    "salary": {"score": 75, "notes": "At lower end of range"},
    "trajectory": {"score": 85, "notes": "Good growth opportunity"}
  },
  "recommendation": "strong_apply|apply|maybe|skip",
  "strengths": ["strength1", "strength2"],
  "gaps": ["gap1"],
  "talkingPoints": ["point1", "point2"]
}`,tools:[],sub_agents:[],position:{x:500,y:200}},proposal_writer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are an expert cover letter writer. Create a compelling, personalized cover letter.

Job Analysis:
{{jobAnalysis}}

Match Analysis:
{{matchAnalysis}}

Candidate Profile:
{{candidateProfile}}

Write a cover letter that:
1. Opens with a compelling hook related to the company/role
2. Highlights 2-3 most relevant experiences
3. Addresses any potential gaps proactively
4. Shows genuine interest in the company
5. Ends with a clear call to action
6. Keeps it under 400 words

Output as JSON:
{
  "subject": "Application for [Position] - [Your Name]",
  "greeting": "Dear Hiring Manager,",
  "opening": "Opening paragraph...",
  "body": "Main content paragraphs...",
  "closing": "Closing paragraph...",
  "signature": "Best regards,\\n[Name]",
  "fullText": "Complete cover letter text",
  "wordCount": 350,
  "customizations": ["Mentioned specific project", "Referenced company value"]
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{job_feed:{type:"rss",id:"job_feed",name:"Job Board RSS",description:"Monitor job postings",feedUrl:"https://stackoverflow.com/jobs/feed?q=senior+engineer&r=true",pollInterval:36e5,filters:{keywords:["senior","engineer","developer"]},seenTracking:{enabled:!0,stateKey:"seenJobs",maxItems:500},maxEntries:10,includeContent:!0,parseMedia:!1,errorHandling:{mode:"retry",retryCount:3,retryDelay:6e4},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"jobPostings"}},set_profile:{type:"set",id:"set_profile",name:"Set Candidate Profile",description:"Configure your profile data",mode:"set",variables:[{key:"candidateProfile",value:{name:"Your Name",title:"Senior Software Engineer",yearsExperience:7,skills:["TypeScript","React","Node.js","Python","AWS","PostgreSQL"],industries:["SaaS","FinTech","E-commerce"],preferredLocation:"remote",salaryExpectation:{min:15e4,max:2e5,currency:"USD"},highlights:["Led team of 5 engineers on $2M project","Reduced API latency by 60%","Built ML pipeline processing 1M events/day"]},valueType:"json",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"profile"}},loop_jobs:{type:"loop",id:"loop_jobs",name:"Process Each Job",description:"Analyze each job posting",loopType:"forEach",forEach:{sourceArray:"jobPostings",itemVar:"jobPosting",indexVar:"jobIdx"},parallel:{enabled:!1},results:{collect:!0,aggregationKey:"processedJobs"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e5},mapping:{outputKey:"loopResults"}},filter_match:{type:"switch",id:"filter_match",name:"Filter by Match Score",description:"Only apply to good matches",evaluationMode:"first_match",conditions:[{id:"strong",name:"Strong Match (80+)",field:"matchAnalysis.overallScore",operator:"gte",value:80,outputPort:"apply"},{id:"good",name:"Good Match (60+)",field:"matchAnalysis.overallScore",operator:"gte",value:60,outputPort:"maybe"}],defaultBranch:"skip",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"filterResult"}},track_application:{type:"database",id:"track_application",name:"Track Application",description:"Save application to database",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:`INSERT INTO job_applications (
          job_title, company, job_url, match_score, 
          status, cover_letter, applied_at, job_data, match_data
        ) VALUES ($1, $2, $3, $4, $5, $6, NOW(), $7, $8)
        RETURNING id`,params:{$1:"{{jobAnalysis.title}}",$2:"{{jobAnalysis.company.name}}",$3:"{{jobAnalysis.applicationUrl}}",$4:"{{matchAnalysis.overallScore}}",$5:"{{filterResult}}",$6:"{{coverLetter.fullText}}",$7:"{{jobAnalysis}}",$8:"{{matchAnalysis}}"}},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"trackedApplication"}}},edges:[{from:"START",to:"job_feed"},{from:"job_feed",to:"set_profile"},{from:"set_profile",to:"loop_jobs"},{from:"loop_jobs",to:"job_analyzer"},{from:"job_analyzer",to:"match_scorer"},{from:"match_scorer",to:"filter_match"},{from:"filter_match",to:"proposal_writer",fromPort:"apply"},{from:"filter_match",to:"track_application",fromPort:"maybe"},{from:"filter_match",to:"track_application",fromPort:"skip"},{from:"proposal_writer",to:"track_application"},{from:"track_application",to:"END"}]},Y$={id:"ai_newsletter_digest",name:"AI Newsletter Digest Creator",icon:"",description:"Consolidate multiple newsletters into one AI-curated digest",category:"automation",requiredNodeTypes:["email","loop","transform"],envVars:[{name:"IMAP_HOST",description:"IMAP server",required:!0,example:"imap.gmail.com"},{name:"IMAP_USER",description:"Email username",required:!0},{name:"IMAP_PASS",description:"Email password",required:!0},{name:"SMTP_HOST",description:"SMTP server",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0},{name:"DIGEST_RECIPIENT",description:"Email to send digest to",required:!0}],useCase:"Tired of reading 20+ newsletters? This workflow fetches all newsletters from the past week, uses AI to summarize each one, groups them by topic, and sends you a single curated digest with the most important insights.",customizationTips:["Adjust the email filter to match your newsletter senders","Customize the digest format and sections","Add priority scoring for different newsletters","Include links to original newsletters"],agents:{newsletter_summarizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a newsletter summarization expert. Create a concise summary of the newsletter.

Newsletter:
- From: {{newsletter.from}}
- Subject: {{newsletter.subject}}
- Content: {{newsletter.body}}

Create a summary that:
1. Captures the 2-3 most important points
2. Identifies any actionable insights
3. Notes any time-sensitive information
4. Extracts key links or resources mentioned

Output as JSON:
{
  "source": "Newsletter Name",
  "subject": "Original subject",
  "summary": "2-3 sentence summary",
  "keyPoints": [
    {"point": "Key insight 1", "importance": "high|medium|low"},
    {"point": "Key insight 2", "importance": "high|medium|low"}
  ],
  "actionItems": ["Action 1 if any"],
  "links": [{"title": "Link title", "url": "URL"}],
  "topics": ["topic1", "topic2"],
  "timeSensitive": false,
  "readTime": "2 min"
}`,tools:[],sub_agents:[],position:{x:400,y:200}},digest_creator:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a content curator. Create a weekly digest from the newsletter summaries.

Summaries by Topic:
{{groupedSummaries}}

Date Range: {{dateRange}}

Create a digest that:
1. Opens with a brief overview of the week's themes
2. Groups content by topic with clear headers
3. Highlights the most important insights across all newsletters
4. Includes a "Quick Hits" section for minor updates
5. Ends with recommended reading priorities

Format as a clean, scannable email.

Output as JSON:
{
  "title": "Your Weekly Digest - {{dateRange}}",
  "overview": "This week's key themes...",
  "sections": [
    {
      "topic": "AI & Technology",
      "highlights": ["highlight1", "highlight2"],
      "sources": ["Newsletter 1", "Newsletter 2"]
    }
  ],
  "quickHits": ["Quick update 1", "Quick update 2"],
  "mustRead": [
    {"title": "Article title", "source": "Newsletter", "reason": "Why it's important"}
  ],
  "htmlContent": "Full HTML email content"
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{fetch_newsletters:{type:"email",id:"fetch_newsletters",name:"Fetch Newsletters",description:"Get newsletters from past week",mode:"monitor",imap:{host:"{{IMAP_HOST}}",port:993,secure:!0,username:"{{IMAP_USER}}",password:"{{IMAP_PASS}}",folder:"Newsletters",markAsRead:!1},filters:{dateFrom:"{{sevenDaysAgo}}",unreadOnly:!1},errorHandling:{mode:"retry",retryCount:3,retryDelay:5e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:6e4},mapping:{outputKey:"newsletters"}},set_date_range:{type:"set",id:"set_date_range",name:"Set Date Range",description:"Configure digest date range",mode:"set",variables:[{key:"dateRange",value:`${new Date(Date.now()-10080*60*1e3).toLocaleDateString()} - ${new Date().toLocaleDateString()}`,valueType:"expression",isSecret:!1},{key:"sevenDaysAgo",value:new Date(Date.now()-10080*60*1e3).toISOString(),valueType:"expression",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"dateConfig"}},process_newsletters:{type:"loop",id:"process_newsletters",name:"Process Each Newsletter",description:"Summarize each newsletter",loopType:"forEach",forEach:{sourceArray:"newsletters",itemVar:"newsletter",indexVar:"idx"},parallel:{enabled:!0,batchSize:5},results:{collect:!0,aggregationKey:"summaries"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:18e4},mapping:{outputKey:"loopResults"}},group_by_topic:{type:"transform",id:"group_by_topic",name:"Group by Topic",description:"Cluster summaries by topic",transformType:"javascript",expression:`const summaries = input.summaries || [];
const grouped = {};

summaries.forEach(summary => {
  (summary.topics || ['General']).forEach(topic => {
    if (!grouped[topic]) {
      grouped[topic] = [];
    }
    grouped[topic].push(summary);
  });
});

// Sort topics by number of items
const sortedTopics = Object.entries(grouped)
  .sort((a, b) => b[1].length - a[1].length)
  .reduce((acc, [topic, items]) => {
    acc[topic] = items;
    return acc;
  }, {});

return {
  groupedSummaries: sortedTopics,
  totalNewsletters: summaries.length,
  topicCount: Object.keys(sortedTopics).length
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{summaries:"summaries"},outputKey:"clusteredData"}},send_digest:{type:"email",id:"send_digest",name:"Send Digest",description:"Email the curated digest",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"digest@yourdomain.com",fromName:"Newsletter Digest"},recipients:{to:"{{DIGEST_RECIPIENT}}"},content:{subject:" {{digest.title}}",bodyType:"html",body:"{{digest.htmlContent}}"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"digestSent"}}},edges:[{from:"START",to:"set_date_range"},{from:"set_date_range",to:"fetch_newsletters"},{from:"fetch_newsletters",to:"process_newsletters"},{from:"process_newsletters",to:"newsletter_summarizer"},{from:"newsletter_summarizer",to:"group_by_topic"},{from:"group_by_topic",to:"digest_creator"},{from:"digest_creator",to:"send_digest"},{from:"send_digest",to:"END"}]},X$={id:"ecommerce_order_intelligence",name:"E-commerce AI Order Intelligence",icon:"",description:"Smart order processing with fraud detection and personalization",category:"automation",requiredNodeTypes:["trigger","database","http","email","notification","switch"],envVars:[{name:"DATABASE_URL",description:"E-commerce database connection",required:!0},{name:"SHIPPING_API_KEY",description:"Shipping provider API key",required:!0},{name:"SMTP_HOST",description:"SMTP server",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0},{name:"SLACK_WEBHOOK_URL",description:"Slack webhook for alerts",required:!0}],useCase:"Automatically process new orders with AI fraud detection, check inventory availability, create shipping labels, generate personalized order confirmations, and alert the team to any issues.",customizationTips:["Adjust fraud detection thresholds for your risk tolerance","Integrate with your specific shipping provider","Customize email templates for your brand","Add upsell recommendations based on order contents"],agents:{fraud_detector:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a fraud detection expert. Analyze the order for potential fraud indicators.

Order Data:
{{order}}

Customer History:
{{customerHistory}}

Analyze for:
1. Unusual order patterns (high value, unusual items)
2. Shipping/billing address mismatches
3. New customer with high-value order
4. Multiple failed payment attempts
5. Velocity checks (many orders in short time)
6. Known fraud patterns

Output as JSON:
{
  "riskScore": 25,
  "riskLevel": "low|medium|high|critical",
  "flags": [
    {"type": "address_mismatch", "severity": "medium", "details": "..."}
  ],
  "recommendation": "approve|review|reject",
  "confidence": 0.92,
  "reasoning": "Brief explanation",
  "suggestedActions": ["Verify phone number", "Request ID"]
}`,tools:[],sub_agents:[],position:{x:300,y:200}},message_personalizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a customer communication expert. Create a personalized order confirmation.

Order Details:
{{order}}

Customer Profile:
{{customer}}

Shipping Info:
{{shipping}}

Create a warm, personalized message that:
1. Thanks them by name
2. Confirms their order details
3. Provides shipping timeline
4. Suggests complementary products based on their order
5. Includes any loyalty rewards earned

Output as JSON:
{
  "subject": "Thanks {{customer.firstName}}! Your order #{{order.id}} is confirmed ",
  "greeting": "Personalized greeting",
  "orderSummary": "HTML formatted order summary",
  "shippingInfo": "Shipping details and timeline",
  "recommendations": [
    {"product": "Product name", "reason": "Why they might like it", "url": "..."}
  ],
  "loyaltyMessage": "Points earned or tier status",
  "closing": "Warm closing message",
  "htmlEmail": "Complete HTML email"
}`,tools:[],sub_agents:[],position:{x:700,y:200}}},actionNodes:{order_webhook:{type:"trigger",id:"order_webhook",name:"New Order Webhook",description:"Receive new orders from storefront",triggerType:"webhook",webhook:{path:"/api/webhook/orders",method:"POST",auth:"api_key",authConfig:{headerName:"X-Shop-Webhook-Key",tokenEnvVar:"SHOP_WEBHOOK_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"order"}},get_customer_history:{type:"database",id:"get_customer_history",name:"Get Customer History",description:"Fetch customer order history",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT 
          c.*,
          COUNT(o.id) as total_orders,
          SUM(o.total) as lifetime_value,
          MAX(o.created_at) as last_order_date,
          AVG(o.total) as avg_order_value
        FROM customers c
        LEFT JOIN orders o ON o.customer_id = c.id
        WHERE c.email = $1
        GROUP BY c.id`,params:{$1:"{{order.customer.email}}"}},errorHandling:{mode:"fallback",fallbackValue:{newCustomer:!0}},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"customerHistory"}},route_fraud:{type:"switch",id:"route_fraud",name:"Route by Fraud Risk",description:"Route based on fraud assessment",evaluationMode:"first_match",conditions:[{id:"reject",name:"Reject Order",field:"fraudCheck.recommendation",operator:"eq",value:"reject",outputPort:"reject"},{id:"review",name:"Manual Review",field:"fraudCheck.recommendation",operator:"eq",value:"review",outputPort:"review"}],defaultBranch:"approve",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"fraudRoute"}},check_inventory:{type:"database",id:"check_inventory",name:"Check Inventory",description:"Verify stock availability",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT 
          p.id, p.sku, p.name, 
          i.quantity as available,
          $2::int as requested,
          CASE WHEN i.quantity >= $2::int THEN true ELSE false END as in_stock
        FROM products p
        JOIN inventory i ON i.product_id = p.id
        WHERE p.id = ANY($1::int[])`,params:{$1:"{{order.items.map(i => i.productId)}}",$2:"{{order.items[0].quantity}}"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"inventoryCheck"}},create_shipment:{type:"http",id:"create_shipment",name:"Create Shipment",description:"Generate shipping label",method:"POST",url:"https://api.shippo.com/shipments",auth:{type:"bearer",bearer:{token:"{{SHIPPING_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "address_from": {
    "name": "{{WAREHOUSE_NAME}}",
    "street1": "{{WAREHOUSE_ADDRESS}}",
    "city": "{{WAREHOUSE_CITY}}",
    "state": "{{WAREHOUSE_STATE}}",
    "zip": "{{WAREHOUSE_ZIP}}",
    "country": "US"
  },
  "address_to": {
    "name": "{{order.shipping.name}}",
    "street1": "{{order.shipping.address1}}",
    "city": "{{order.shipping.city}}",
    "state": "{{order.shipping.state}}",
    "zip": "{{order.shipping.zip}}",
    "country": "{{order.shipping.country}}"
  },
  "parcels": [{
    "length": "10",
    "width": "8",
    "height": "4",
    "distance_unit": "in",
    "weight": "{{order.totalWeight}}",
    "mass_unit": "lb"
  }]
}`},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"shipping"}},update_order:{type:"database",id:"update_order",name:"Update Order Status",description:"Save order with shipping info",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"update",query:`UPDATE orders SET 
          status = 'processing',
          fraud_score = $2,
          tracking_number = $3,
          shipping_label_url = $4,
          updated_at = NOW()
        WHERE id = $1`,params:{$1:"{{order.id}}",$2:"{{fraudCheck.riskScore}}",$3:"{{shipping.tracking_number}}",$4:"{{shipping.label_url}}"}},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"orderUpdated"}},send_confirmation:{type:"email",id:"send_confirmation",name:"Send Order Confirmation",description:"Email personalized confirmation",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"orders@store.com",fromName:"Your Store"},recipients:{to:"{{order.customer.email}}"},content:{subject:"{{personalizedMessage.subject}}",bodyType:"html",body:"{{personalizedMessage.htmlEmail}}"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"confirmationSent"}},alert_fraud:{type:"notification",id:"alert_fraud",name:"Alert Fraud Team",description:"Notify team of suspicious order",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:` *Fraud Alert - Order #{{order.id}}*

*Risk Score:* {{fraudCheck.riskScore}}/100
*Risk Level:* {{fraudCheck.riskLevel}}
*Customer:* {{order.customer.email}}
*Order Total:* \${{order.total}}

*Flags:*
{{#each fraudCheck.flags}}- {{flag.type}}: {{flag.details}}
{{/each}}

*Recommendation:* {{fraudCheck.recommendation}}
*Reasoning:* {{fraudCheck.reasoning}}`,format:"markdown"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"fraudAlert"}}},edges:[{from:"START",to:"order_webhook"},{from:"order_webhook",to:"get_customer_history"},{from:"get_customer_history",to:"fraud_detector"},{from:"fraud_detector",to:"route_fraud"},{from:"route_fraud",to:"check_inventory",fromPort:"approve"},{from:"route_fraud",to:"alert_fraud",fromPort:"review"},{from:"route_fraud",to:"alert_fraud",fromPort:"reject"},{from:"check_inventory",to:"create_shipment"},{from:"create_shipment",to:"update_order"},{from:"update_order",to:"message_personalizer"},{from:"message_personalizer",to:"send_confirmation"},{from:"send_confirmation",to:"END"},{from:"alert_fraud",to:"END"}]},Q$={id:"ai_incident_response",name:"AI-Powered Incident Response",icon:"",description:"Intelligent alert analysis with automated runbook generation",category:"automation",requiredNodeTypes:["trigger","http","switch","notification"],envVars:[{name:"PAGERDUTY_API_KEY",description:"PagerDuty API key",required:!0},{name:"PAGERDUTY_SERVICE_ID",description:"PagerDuty service ID",required:!0},{name:"PINECONE_API_KEY",description:"Pinecone API key for incident history",required:!0},{name:"PINECONE_INDEX",description:"Pinecone index name",required:!0},{name:"SLACK_WEBHOOK_URL",description:"Slack webhook for incident channel",required:!0}],useCase:"Receive alerts from monitoring systems, use AI to analyze logs and identify root causes, search past incidents for similar issues, generate incident summaries and runbooks, and route to the right team based on severity.",customizationTips:["Integrate with your monitoring stack (Datadog, New Relic, etc.)","Customize severity thresholds for your SLAs","Add your own runbook templates","Connect to your incident management system"],agents:{log_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a senior SRE analyzing an incident. Examine the alert and logs to identify the issue.

Alert Data:
{{alert}}

Recent Logs:
{{logs}}

Metrics:
{{metrics}}

Analyze:
1. What is the immediate symptom?
2. What service/component is affected?
3. What is the likely root cause?
4. What is the blast radius (affected users/services)?
5. Is this a known issue pattern?

Output as JSON:
{
  "symptom": "Brief description of the symptom",
  "affectedService": "service-name",
  "affectedComponents": ["component1", "component2"],
  "likelyRootCause": "Analysis of probable cause",
  "confidence": 0.85,
  "blastRadius": {
    "users": "estimated affected users",
    "services": ["downstream services"],
    "severity": "critical|high|medium|low"
  },
  "keyLogEntries": ["relevant log line 1", "relevant log line 2"],
  "metrics": {
    "errorRate": "current error rate",
    "latency": "current latency"
  },
  "hypothesis": ["Hypothesis 1", "Hypothesis 2"],
  "immediateActions": ["Action 1", "Action 2"]
}`,tools:[],sub_agents:[],position:{x:300,y:200}},incident_summarizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are creating an incident summary for the on-call team.

Analysis:
{{analysis}}

Similar Past Incidents:
{{pastIncidents}}

Create a clear, actionable incident summary that:
1. Describes the issue in plain language
2. Shows impact and severity
3. References similar past incidents and their resolutions
4. Provides recommended next steps

Output as JSON:
{
  "title": "Incident title",
  "summary": "2-3 sentence summary",
  "severity": "SEV1|SEV2|SEV3|SEV4",
  "impact": {
    "description": "User-facing impact",
    "affectedUsers": "estimate",
    "affectedRegions": ["region1"]
  },
  "timeline": [
    {"time": "timestamp", "event": "What happened"}
  ],
  "similarIncidents": [
    {"id": "INC-123", "similarity": 0.85, "resolution": "How it was fixed"}
  ],
  "recommendedActions": [
    {"action": "What to do", "priority": "immediate|soon|later", "owner": "team"}
  ],
  "escalationPath": ["Team 1", "Team 2"],
  "slackMessage": "Formatted message for Slack"
}`,tools:[],sub_agents:[],position:{x:600,y:200}},runbook_generator:{type:"llm",model:"gemini-2.0-flash",instruction:`You are generating a runbook for incident responders.

Incident Summary:
{{incidentSummary}}

Analysis:
{{analysis}}

Past Incident Resolutions:
{{pastResolutions}}

Create a step-by-step runbook that:
1. Starts with immediate triage steps
2. Includes diagnostic commands
3. Provides mitigation options
4. Lists rollback procedures if applicable
5. Includes escalation criteria

Output as JSON:
{
  "title": "Runbook: {{incidentSummary.title}}",
  "lastUpdated": "timestamp",
  "sections": [
    {
      "name": "Immediate Triage",
      "steps": [
        {"step": 1, "action": "What to do", "command": "command if applicable", "expectedResult": "What you should see"}
      ]
    },
    {
      "name": "Diagnosis",
      "steps": [...]
    },
    {
      "name": "Mitigation",
      "steps": [...]
    },
    {
      "name": "Rollback",
      "steps": [...]
    }
  ],
  "escalationCriteria": ["When to escalate"],
  "usefulLinks": [{"name": "Dashboard", "url": "..."}],
  "contacts": [{"team": "Team name", "slack": "#channel"}]
}`,tools:[],sub_agents:[],position:{x:800,y:200}}},actionNodes:{alert_webhook:{type:"trigger",id:"alert_webhook",name:"Alert Webhook",description:"Receive alerts from monitoring",triggerType:"webhook",webhook:{path:"/api/webhook/alerts",method:"POST",auth:"api_key",authConfig:{headerName:"X-Alert-Key",tokenEnvVar:"ALERT_WEBHOOK_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"alert"}},fetch_logs:{type:"http",id:"fetch_logs",name:"Fetch Recent Logs",description:"Get logs around alert time",method:"POST",url:"https://api.datadoghq.com/api/v2/logs/events/search",auth:{type:"api_key",apiKey:{headerName:"DD-API-KEY",value:"{{DATADOG_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "filter": {
    "query": "service:{{alert.service}} status:error",
    "from": "{{alert.timestamp - 300000}}",
    "to": "{{alert.timestamp}}"
  },
  "sort": "timestamp",
  "page": {"limit": 100}
}`},response:{type:"json",jsonPath:"$.data"},errorHandling:{mode:"fallback",fallbackValue:[]},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"logs"}},search_past_incidents:{type:"http",id:"search_past_incidents",name:"Search Past Incidents",description:"Find similar historical incidents",method:"POST",url:"https://{{PINECONE_INDEX}}-xxx.svc.pinecone.io/query",auth:{type:"api_key",apiKey:{headerName:"Api-Key",value:"{{PINECONE_API_KEY}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:`{
  "vector": "{{analysisEmbedding}}",
  "topK": 5,
  "includeMetadata": true,
  "filter": {
    "service": {"$eq": "{{alert.service}}"}
  }
}`},response:{type:"json",jsonPath:"$.matches"},errorHandling:{mode:"fallback",fallbackValue:[]},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"pastIncidents"}},route_severity:{type:"switch",id:"route_severity",name:"Route by Severity",description:"Route based on incident severity",evaluationMode:"first_match",conditions:[{id:"sev1",name:"SEV1 - Critical",field:"incidentSummary.severity",operator:"eq",value:"SEV1",outputPort:"critical"},{id:"sev2",name:"SEV2 - High",field:"incidentSummary.severity",operator:"eq",value:"SEV2",outputPort:"high"}],defaultBranch:"normal",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"severityRoute"}},page_oncall:{type:"http",id:"page_oncall",name:"Page On-Call",description:"Create PagerDuty incident",method:"POST",url:"https://api.pagerduty.com/incidents",auth:{type:"bearer",bearer:{token:"{{PAGERDUTY_API_KEY}}"}},headers:{"Content-Type":"application/json",From:"incident-bot@company.com"},body:{type:"json",content:`{
  "incident": {
    "type": "incident",
    "title": "{{incidentSummary.title}}",
    "service": {
      "id": "{{PAGERDUTY_SERVICE_ID}}",
      "type": "service_reference"
    },
    "urgency": "{{incidentSummary.severity === 'SEV1' ? 'high' : 'low'}}",
    "body": {
      "type": "incident_body",
      "details": "{{incidentSummary.summary}}\\n\\nImpact: {{incidentSummary.impact.description}}\\n\\nRecommended Actions:\\n{{incidentSummary.recommendedActions.map(a => '- ' + a.action).join('\\n')}}"
    }
  }
}`},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"pagerdutyIncident"}},notify_slack:{type:"notification",id:"notify_slack",name:"Notify Incident Channel",description:"Post to Slack incident channel",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:"{{incidentSummary.slackMessage}}",format:"markdown",blocks:[{type:"header",text:{type:"plain_text",text:" {{incidentSummary.title}}"}},{type:"section",text:{type:"mrkdwn",text:`*Severity:* {{incidentSummary.severity}}
*Impact:* {{incidentSummary.impact.description}}`}}]},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"slackNotification"}},save_incident:{type:"database",id:"save_incident",name:"Save Incident Record",description:"Store incident for future reference",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:`INSERT INTO incidents (
          title, severity, service, summary, analysis,
          runbook, pagerduty_id, created_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, NOW())
        RETURNING id`,params:{$1:"{{incidentSummary.title}}",$2:"{{incidentSummary.severity}}",$3:"{{alert.service}}",$4:"{{incidentSummary}}",$5:"{{analysis}}",$6:"{{runbook}}",$7:"{{pagerdutyIncident.incident.id}}"}},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"savedIncident"}}},edges:[{from:"START",to:"alert_webhook"},{from:"alert_webhook",to:"fetch_logs"},{from:"fetch_logs",to:"log_analyzer"},{from:"log_analyzer",to:"search_past_incidents"},{from:"search_past_incidents",to:"incident_summarizer"},{from:"incident_summarizer",to:"route_severity"},{from:"route_severity",to:"page_oncall",fromPort:"critical"},{from:"route_severity",to:"page_oncall",fromPort:"high"},{from:"route_severity",to:"notify_slack",fromPort:"normal"},{from:"page_oncall",to:"runbook_generator"},{from:"runbook_generator",to:"notify_slack"},{from:"notify_slack",to:"save_incident"},{from:"save_incident",to:"END"}]},J$={id:"ai_code_review",name:"AI Code Review & QA",icon:"",description:"Automated PR review with security scanning and test suggestions",category:"automation",requiredNodeTypes:["trigger","http","notification"],envVars:[{name:"GITHUB_TOKEN",description:"GitHub personal access token",required:!0},{name:"SLACK_WEBHOOK_URL",description:"Slack webhook for notifications",required:!0}],useCase:"Automatically review pull requests when opened, analyze code quality and style, scan for security vulnerabilities, suggest missing tests, and post detailed review comments directly on the PR.",customizationTips:["Customize code style rules for your team","Add language-specific security checks","Integrate with your CI/CD pipeline","Adjust review strictness levels"],agents:{code_reviewer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a senior code reviewer. Analyze the pull request diff and provide constructive feedback.

PR Information:
- Title: {{pr.title}}
- Description: {{pr.body}}
- Author: {{pr.author}}
- Base branch: {{pr.base}}

Diff:
{{diff}}

Review for:
1. Code quality and readability
2. Logic errors or bugs
3. Performance issues
4. Code style consistency
5. Documentation completeness
6. Error handling
7. Edge cases

Output as JSON:
{
  "overallAssessment": "approve|request_changes|comment",
  "summary": "Brief summary of the review",
  "score": {
    "quality": 8,
    "readability": 7,
    "performance": 9,
    "documentation": 6
  },
  "comments": [
    {
      "file": "path/to/file.ts",
      "line": 42,
      "type": "suggestion|issue|praise",
      "severity": "critical|major|minor|info",
      "message": "Review comment",
      "suggestion": "Suggested code change if applicable"
    }
  ],
  "highlights": ["What's done well"],
  "concerns": ["Main concerns"],
  "questionsForAuthor": ["Clarifying questions"]
}`,tools:[],sub_agents:[],position:{x:400,y:150}},security_scanner:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a security expert. Scan the code changes for security vulnerabilities.

Diff:
{{diff}}

Language: {{pr.language}}

Check for:
1. SQL injection vulnerabilities
2. XSS vulnerabilities
3. Authentication/authorization issues
4. Sensitive data exposure
5. Insecure dependencies
6. Hardcoded secrets
7. Input validation issues
8. CSRF vulnerabilities
9. Insecure cryptography
10. Path traversal

Output as JSON:
{
  "securityScore": 85,
  "vulnerabilities": [
    {
      "type": "SQL_INJECTION",
      "severity": "critical|high|medium|low",
      "file": "path/to/file.ts",
      "line": 42,
      "description": "Description of the vulnerability",
      "recommendation": "How to fix it",
      "cweId": "CWE-89",
      "owaspCategory": "A03:2021"
    }
  ],
  "securityPractices": {
    "inputValidation": "pass|fail|partial",
    "authentication": "pass|fail|partial|na",
    "dataProtection": "pass|fail|partial"
  },
  "recommendations": ["General security recommendations"],
  "passedChecks": ["Checks that passed"]
}`,tools:[],sub_agents:[],position:{x:400,y:300}},test_suggester:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a QA engineer. Analyze the code changes and suggest tests that should be written.

Diff:
{{diff}}

Existing Tests:
{{existingTests}}

Code Review:
{{codeReview}}

Suggest:
1. Unit tests for new functions/methods
2. Integration tests for new features
3. Edge case tests
4. Error handling tests
5. Regression tests if fixing bugs

Output as JSON:
{
  "testCoverage": {
    "estimated": 75,
    "recommendation": "Target coverage recommendation"
  },
  "suggestedTests": [
    {
      "type": "unit|integration|e2e",
      "name": "test_function_name",
      "description": "What this test should verify",
      "file": "suggested/test/file.test.ts",
      "priority": "high|medium|low",
      "testCode": "// Suggested test implementation\\ndescribe('...', () => {\\n  it('should...', () => {\\n    // test code\\n  });\\n});"
    }
  ],
  "missingCoverage": [
    {"function": "functionName", "reason": "Why it needs tests"}
  ],
  "testingNotes": ["Additional testing recommendations"]
}`,tools:[],sub_agents:[],position:{x:400,y:450}}},actionNodes:{pr_webhook:{type:"trigger",id:"pr_webhook",name:"PR Webhook",description:"Receive PR events from GitHub",triggerType:"webhook",webhook:{path:"/api/webhook/github/pr",method:"POST",auth:"api_key",authConfig:{headerName:"X-Hub-Signature-256",tokenEnvVar:"GITHUB_WEBHOOK_SECRET"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"pr"}},fetch_diff:{type:"http",id:"fetch_diff",name:"Fetch PR Diff",description:"Get the PR diff from GitHub",method:"GET",url:"https://api.github.com/repos/{{pr.repository.full_name}}/pulls/{{pr.number}}",auth:{type:"bearer",bearer:{token:"{{GITHUB_TOKEN}}"}},headers:{Accept:"application/vnd.github.v3.diff","X-GitHub-Api-Version":"2022-11-28"},body:{type:"none"},response:{type:"text"},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"diff"}},fetch_existing_tests:{type:"http",id:"fetch_existing_tests",name:"Fetch Existing Tests",description:"Get list of test files in the repo",method:"GET",url:"https://api.github.com/repos/{{pr.repository.full_name}}/git/trees/{{pr.head.sha}}?recursive=1",auth:{type:"bearer",bearer:{token:"{{GITHUB_TOKEN}}"}},headers:{Accept:"application/vnd.github.v3+json","X-GitHub-Api-Version":"2022-11-28"},body:{type:"none"},response:{type:"json",jsonPath:"$.tree[?(@.path.match(/test|spec/))]"},errorHandling:{mode:"fallback",fallbackValue:[]},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"existingTests"}},post_review:{type:"http",id:"post_review",name:"Post Review Comments",description:"Submit review to GitHub",method:"POST",url:"https://api.github.com/repos/{{pr.repository.full_name}}/pulls/{{pr.number}}/reviews",auth:{type:"bearer",bearer:{token:"{{GITHUB_TOKEN}}"}},headers:{Accept:"application/vnd.github.v3+json","X-GitHub-Api-Version":"2022-11-28","Content-Type":"application/json"},body:{type:"json",content:'{"body": "##  AI Code Review\\n\\n{{codeReview.summary}}\\n\\n### Scores\\n- Quality: {{codeReview.score.quality}}/10\\n- Readability: {{codeReview.score.readability}}/10\\n- Performance: {{codeReview.score.performance}}/10\\n- Documentation: {{codeReview.score.documentation}}/10\\n\\n### Security\\n{{#if securityScan.vulnerabilities.length}} Found {{securityScan.vulnerabilities.length}} security issue(s){{else}} No security issues found{{/if}}\\n\\n### Test Suggestions\\n{{testSuggestions.suggestedTests.length}} test(s) suggested", "event": "{{codeReview.overallAssessment}}", "comments": []}'},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"reviewPosted"}},notify_team:{type:"notification",id:"notify_team",name:"Notify Team",description:"Send review summary to Slack",channel:"slack",webhookUrl:"{{SLACK_WEBHOOK_URL}}",message:{text:` *AI Code Review Complete*

*PR:* <{{pr.html_url}}|{{pr.title}}>
*Author:* {{pr.author}}
*Verdict:* {{codeReview.overallAssessment}}

*Quality Score:* {{codeReview.score.quality}}/10
*Security Score:* {{securityScan.securityScore}}/100

{{#if securityScan.vulnerabilities.length}} *Security Issues:* {{securityScan.vulnerabilities.length}}{{/if}}
{{#if testSuggestions.suggestedTests.length}} *Suggested Tests:* {{testSuggestions.suggestedTests.length}}{{/if}}`,format:"markdown"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"slackNotification"}}},edges:[{from:"START",to:"pr_webhook"},{from:"pr_webhook",to:"fetch_diff"},{from:"fetch_diff",to:"fetch_existing_tests"},{from:"fetch_existing_tests",to:"code_reviewer"},{from:"code_reviewer",to:"security_scanner"},{from:"security_scanner",to:"test_suggester"},{from:"test_suggester",to:"post_review"},{from:"post_review",to:"notify_team"},{from:"notify_team",to:"END"}]},Z$={id:"ai_customer_onboarding",name:"AI Customer Onboarding Journey",icon:"",description:"Adaptive onboarding with AI personalization and engagement tracking",category:"automation",requiredNodeTypes:["trigger","database","loop","email","wait","switch"],envVars:[{name:"DATABASE_URL",description:"Customer database connection",required:!0},{name:"SMTP_HOST",description:"SMTP server",required:!0},{name:"SMTP_USER",description:"SMTP username",required:!0},{name:"SMTP_PASS",description:"SMTP password",required:!0},{name:"ANALYTICS_API_KEY",description:"Analytics API key for engagement tracking",required:!1}],useCase:"When a new customer signs up, predict their needs based on their profile, create a personalized onboarding sequence, send adaptive emails, monitor engagement, and trigger interventions for at-risk customers.",customizationTips:["Customize the onboarding email sequence for your product","Adjust engagement thresholds based on your metrics","Add product-specific milestones to track","Integrate with your product analytics"],agents:{needs_predictor:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a customer success expert. Analyze the new customer's profile and predict their needs.

Customer Profile:
{{customer}}

Signup Source:
{{signupSource}}

Analyze:
1. What are their likely goals with our product?
2. What features will they need most?
3. What challenges might they face?
4. What's their technical sophistication level?
5. What onboarding path suits them best?

Output as JSON:
{
  "predictedGoals": ["goal1", "goal2"],
  "recommendedFeatures": ["feature1", "feature2"],
  "anticipatedChallenges": ["challenge1"],
  "technicalLevel": "beginner|intermediate|advanced",
  "onboardingPath": "quick_start|guided|self_serve",
  "priorityMilestones": [
    {"milestone": "First project created", "targetDays": 1},
    {"milestone": "Team member invited", "targetDays": 3}
  ],
  "personalizationNotes": "Key things to emphasize",
  "riskFactors": ["Potential churn indicators"],
  "successPrediction": {
    "score": 75,
    "factors": ["positive factor 1", "concern 1"]
  }
}`,tools:[],sub_agents:[],position:{x:300,y:150}},email_personalizer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are an onboarding email specialist. Personalize the email for this customer.

Customer:
{{customer}}

Predicted Needs:
{{predictedNeeds}}

Email Template:
{{emailTemplate}}

Current Step: {{currentStep}} of {{totalSteps}}

Customer Progress:
{{customerProgress}}

Personalize the email to:
1. Address them by name
2. Reference their specific goals
3. Highlight relevant features
4. Provide actionable next steps
5. Match their technical level

Output as JSON:
{
  "subject": "Personalized subject line",
  "preheader": "Email preview text",
  "greeting": "Personalized greeting",
  "body": "Main email content (HTML)",
  "cta": {
    "text": "Button text",
    "url": "https://...",
    "trackingParams": "utm_source=onboarding&utm_campaign=step{{currentStep}}"
  },
  "tips": ["Relevant tip based on their level"],
  "nextMilestone": "What they should do next",
  "supportLink": "Link to relevant help article"
}`,tools:[],sub_agents:[],position:{x:500,y:300}},intervention_creator:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a customer success manager. Create an intervention for an at-risk customer.

Customer:
{{customer}}

Engagement Data:
{{engagementData}}

Predicted Needs:
{{predictedNeeds}}

Risk Indicators:
{{riskIndicators}}

Create an intervention that:
1. Acknowledges their situation empathetically
2. Offers specific help based on their blockers
3. Provides easy next steps
4. Offers human support if needed

Output as JSON:
{
  "interventionType": "email|call|in_app",
  "urgency": "high|medium|low",
  "subject": "We're here to help",
  "message": "Personalized intervention message",
  "offeredHelp": [
    {"type": "1:1 call", "description": "Schedule a call with our team"},
    {"type": "tutorial", "description": "Relevant tutorial link"}
  ],
  "incentive": "Special offer if applicable",
  "escalateTo": "human support if needed",
  "followUpDays": 2
}`,tools:[],sub_agents:[],position:{x:700,y:450}}},actionNodes:{signup_webhook:{type:"trigger",id:"signup_webhook",name:"New Signup Webhook",description:"Receive new customer signups",triggerType:"webhook",webhook:{path:"/api/webhook/signups",method:"POST",auth:"api_key",authConfig:{headerName:"X-Signup-Key",tokenEnvVar:"SIGNUP_WEBHOOK_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"customer"}},create_profile:{type:"database",id:"create_profile",name:"Create Customer Profile",description:"Store customer with predicted needs",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:`INSERT INTO customer_profiles (
          customer_id, email, name, company, 
          predicted_needs, onboarding_path, 
          success_score, created_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, NOW())
        RETURNING id`,params:{$1:"{{customer.id}}",$2:"{{customer.email}}",$3:"{{customer.name}}",$4:"{{customer.company}}",$5:"{{predictedNeeds}}",$6:"{{predictedNeeds.onboardingPath}}",$7:"{{predictedNeeds.successPrediction.score}}"}},errorHandling:{mode:"retry",retryCount:2,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"customerProfile"}},set_email_sequence:{type:"set",id:"set_email_sequence",name:"Set Email Sequence",description:"Configure onboarding email sequence",mode:"set",variables:[{key:"emailSequence",value:[{step:1,delay:0,template:"welcome",subject:"Welcome to {{productName}}!"},{step:2,delay:1,template:"getting_started",subject:"Get started in 5 minutes"},{step:3,delay:3,template:"first_milestone",subject:"Ready for your first {{milestone}}?"},{step:4,delay:7,template:"tips_tricks",subject:"Pro tips from power users"},{step:5,delay:14,template:"check_in",subject:"How's it going, {{firstName}}?"}],valueType:"json",isSecret:!1},{key:"productName",value:"Your Product",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"sequenceConfig"}},process_sequence:{type:"loop",id:"process_sequence",name:"Process Email Sequence",description:"Send each onboarding email",loopType:"forEach",forEach:{sourceArray:"emailSequence",itemVar:"emailTemplate",indexVar:"stepIdx"},parallel:{enabled:!1},results:{collect:!0,aggregationKey:"emailResults"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:18e5},mapping:{outputKey:"loopResults"}},send_onboarding_email:{type:"email",id:"send_onboarding_email",name:"Send Onboarding Email",description:"Send personalized onboarding email",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"onboarding@company.com",fromName:"Your Product Team"},recipients:{to:"{{customer.email}}"},content:{subject:"{{personalizedEmail.subject}}",bodyType:"html",body:`<!DOCTYPE html>
<html>
<body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
  <p>{{personalizedEmail.greeting}}</p>
  <div>{{personalizedEmail.body}}</div>
  <p style="text-align: center; margin: 30px 0;">
    <a href="{{personalizedEmail.cta.url}}?{{personalizedEmail.cta.trackingParams}}" 
       style="background: #0066cc; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px;">
      {{personalizedEmail.cta.text}}
    </a>
  </p>
  {{#if personalizedEmail.tips}}
  <div style="background: #f5f5f5; padding: 15px; border-radius: 4px; margin: 20px 0;">
    <strong> Tip:</strong> {{personalizedEmail.tips[0]}}
  </div>
  {{/if}}
  <p style="color: #666; font-size: 14px;">
    Need help? <a href="{{personalizedEmail.supportLink}}">Check our guides</a> or reply to this email.
  </p>
</body>
</html>`},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emailSent"}},wait_for_engagement:{type:"wait",id:"wait_for_engagement",name:"Wait for Engagement",description:"Wait before checking engagement",waitType:"fixed",fixed:{duration:24,unit:"h"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:9e7},mapping:{outputKey:"waitComplete"}},check_engagement:{type:"database",id:"check_engagement",name:"Check Engagement",description:"Get customer engagement metrics",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"query",query:`SELECT 
          cp.*,
          COUNT(DISTINCT e.id) as email_opens,
          COUNT(DISTINCT c.id) as clicks,
          COUNT(DISTINCT l.id) as logins,
          COUNT(DISTINCT a.id) as actions_taken,
          MAX(l.created_at) as last_login
        FROM customer_profiles cp
        LEFT JOIN email_events e ON e.customer_id = cp.customer_id AND e.event = 'open'
        LEFT JOIN email_events c ON c.customer_id = cp.customer_id AND c.event = 'click'
        LEFT JOIN user_logins l ON l.customer_id = cp.customer_id
        LEFT JOIN user_actions a ON a.customer_id = cp.customer_id
        WHERE cp.customer_id = $1
        GROUP BY cp.id`,params:{$1:"{{customer.id}}"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"engagementData"}},route_engagement:{type:"switch",id:"route_engagement",name:"Route by Engagement",description:"Route based on engagement level",evaluationMode:"first_match",conditions:[{id:"highly_engaged",name:"Highly Engaged",field:"engagementData.logins",operator:"gte",value:5,outputPort:"engaged"},{id:"some_engagement",name:"Some Engagement",field:"engagementData.logins",operator:"gte",value:2,outputPort:"moderate"}],defaultBranch:"at_risk",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"engagementRoute"}},send_intervention:{type:"email",id:"send_intervention",name:"Send Intervention",description:"Send intervention email to at-risk customer",mode:"send",smtp:{host:"{{SMTP_HOST}}",port:587,secure:!1,username:"{{SMTP_USER}}",password:"{{SMTP_PASS}}",fromEmail:"success@company.com",fromName:"Customer Success"},recipients:{to:"{{customer.email}}"},content:{subject:"{{intervention.subject}}",bodyType:"html",body:`<p>Hi {{customer.firstName}},</p><p>{{intervention.message}}</p><h4>We can help:</h4><ul>{{#each intervention.offeredHelp}}<li><strong>{{help.type}}:</strong> {{help.description}}</li>{{/each}}</ul>{{#if intervention.incentive}}<p style="background: #e8f5e9; padding: 15px; border-radius: 4px;"> <strong>Special offer:</strong> {{intervention.incentive}}</p>{{/if}}<p>Just reply to this email or <a href="https://calendly.com/success-team">book a call</a>.</p><p>We're here to help you succeed!</p>`},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"interventionSent"}},update_status:{type:"database",id:"update_status",name:"Update Onboarding Status",description:"Update customer onboarding progress",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"update",query:`UPDATE customer_profiles SET 
          onboarding_status = $2,
          engagement_score = $3,
          last_email_step = $4,
          intervention_sent = $5,
          updated_at = NOW()
        WHERE customer_id = $1`,params:{$1:"{{customer.id}}",$2:"{{engagementRoute}}",$3:"{{engagementData.logins + engagementData.actions_taken}}",$4:"{{stepIdx}}",$5:'{{engagementRoute === "at_risk"}}'}},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:1e4},mapping:{outputKey:"statusUpdated"}}},edges:[{from:"START",to:"signup_webhook"},{from:"signup_webhook",to:"needs_predictor"},{from:"needs_predictor",to:"create_profile"},{from:"create_profile",to:"set_email_sequence"},{from:"set_email_sequence",to:"process_sequence"},{from:"process_sequence",to:"email_personalizer"},{from:"email_personalizer",to:"send_onboarding_email"},{from:"send_onboarding_email",to:"wait_for_engagement"},{from:"wait_for_engagement",to:"check_engagement"},{from:"check_engagement",to:"route_engagement"},{from:"route_engagement",to:"update_status",fromPort:"engaged"},{from:"route_engagement",to:"update_status",fromPort:"moderate"},{from:"route_engagement",to:"intervention_creator",fromPort:"at_risk"},{from:"intervention_creator",to:"send_intervention"},{from:"send_intervention",to:"update_status"},{from:"update_status",to:"END"}]},eH=[$$,H$,V$,U$,W$,K$,G$,Y$,X$,Q$,J$,Z$],h1=[{id:"simple_chat",name:"Simple Chat Agent",icon:"",description:"A basic conversational agent for general Q&A",category:"basic",agents:{chat_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a helpful, friendly assistant. Answer questions clearly and concisely. Be conversational but informative.",tools:[],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"chat_agent"},{from:"chat_agent",to:"END"}]},{id:"research_pipeline",name:"Research Pipeline",icon:"",description:"Sequential workflow: Researcher  Summarizer",category:"basic",agents:{researcher:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a research specialist. Given a topic, search for comprehensive information using Google Search. Gather key facts, statistics, recent developments, and expert opinions. Present your findings in a structured format.",tools:["google_search"],sub_agents:[],position:{x:0,y:0}},summarizer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are an expert summarizer. Take the research findings and create a clear, concise summary with: 1) Key takeaways (3-5 bullet points), 2) Main findings, 3) Conclusions. Make it easy to understand for a general audience.",tools:[],sub_agents:[],position:{x:0,y:0}},research_pipeline:{type:"sequential",instruction:"",tools:[],sub_agents:["researcher","summarizer"],position:{x:250,y:150}}},edges:[{from:"START",to:"research_pipeline"},{from:"research_pipeline",to:"END"}]},{id:"content_refiner",name:"Content Refiner",icon:"",description:"Loop agent that iteratively improves content quality",category:"advanced",agents:{improver:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a content editor. Review the text and improve it by: fixing grammar and spelling errors, enhancing clarity and flow, improving word choice, and strengthening the overall structure. Output the improved version.",tools:[],sub_agents:[],position:{x:0,y:0}},reviewer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a quality reviewer. Evaluate the content for: clarity, grammar, flow, and completeness. If the content is polished and ready (score 8/10 or higher), call exit_loop. Otherwise, briefly note what still needs improvement and let the improver continue.",tools:["exit_loop"],sub_agents:[],position:{x:0,y:0}},content_refiner:{type:"loop",instruction:"",tools:[],sub_agents:["improver","reviewer"],position:{x:250,y:150},max_iterations:3}},edges:[{from:"START",to:"content_refiner"},{from:"content_refiner",to:"END"}]},{id:"parallel_analyzer",name:"Parallel Analyzer",icon:"",description:"Run multiple analyses concurrently for speed",category:"advanced",agents:{sentiment_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:"Analyze the sentiment of the provided text. Identify: 1) Overall sentiment (positive/negative/neutral with confidence %), 2) Emotional tones present (joy, anger, sadness, etc.), 3) Key phrases that indicate sentiment. Format as a brief report.",tools:[],sub_agents:[],position:{x:0,y:0}},entity_extractor:{type:"llm",model:"gemini-2.0-flash",instruction:"Extract key entities from the text. Identify and categorize: 1) People (names, roles), 2) Organizations (companies, institutions), 3) Locations (cities, countries), 4) Dates and times, 5) Key topics/concepts. Format as a structured list.",tools:[],sub_agents:[],position:{x:0,y:0}},parallel_analyzer:{type:"parallel",instruction:"",tools:[],sub_agents:["sentiment_analyzer","entity_extractor"],position:{x:250,y:150}}},edges:[{from:"START",to:"parallel_analyzer"},{from:"parallel_analyzer",to:"END"}]},{id:"support_router",name:"Support Router",icon:"",description:"Route requests to specialized support agents",category:"advanced",agents:{router:{type:"router",model:"gemini-2.0-flash",instruction:'Classify the user request into one category: "technical" for coding, bugs, API issues, or technical problems; "billing" for payments, subscriptions, refunds, or account charges; "general" for all other questions. Respond with just the category word.',tools:[],sub_agents:[],position:{x:250,y:100},routes:[{condition:"technical",target:"tech_support"},{condition:"billing",target:"billing_support"},{condition:"general",target:"general_support"}]},tech_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a senior technical support engineer. Help users with coding issues, bugs, API problems, and technical troubleshooting. Ask clarifying questions if needed. Provide code examples when helpful. Be patient and thorough.",tools:[],sub_agents:[],position:{x:100,y:350}},billing_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a billing specialist. Help users with payment issues, subscription questions, refund requests, and account billing inquiries. Be empathetic and solution-oriented. Explain charges clearly.",tools:[],sub_agents:[],position:{x:250,y:350}},general_support:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a friendly general support agent. Help users with general questions, product information, feature requests, and any inquiries that don't fit technical or billing categories. Be helpful and personable.",tools:[],sub_agents:[],position:{x:400,y:350}}},edges:[{from:"START",to:"router"},{from:"router",to:"tech_support"},{from:"router",to:"billing_support"},{from:"router",to:"general_support"},{from:"tech_support",to:"END"},{from:"billing_support",to:"END"},{from:"general_support",to:"END"}]},{id:"web_researcher",name:"Web Researcher",icon:"",description:"Agent with browser capabilities for web research",category:"tools",agents:{web_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a web research assistant with browser capabilities. When asked a question: 1) Navigate to relevant websites to find accurate, up-to-date information, 2) Read and extract key content from pages, 3) Synthesize findings into a clear answer with sources. Always cite your sources.",tools:["browser"],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"web_agent"},{from:"web_agent",to:"END"}]},{id:"code_assistant",name:"Code Assistant",icon:"",description:"Programming assistant with code execution tools",category:"tools",agents:{code_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are an expert programming assistant. Help users with: 1) Writing clean, efficient code, 2) Debugging issues, 3) Explaining concepts, 4) Code reviews. Use the code execution tool to test and validate code when helpful. Support multiple languages including Python, JavaScript, Rust, and more.",tools:["code_execution"],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"code_agent"},{from:"code_agent",to:"END"}]},{id:"data_analyst",name:"Data Analyst",icon:"",description:"Analyze data with search and computation tools",category:"tools",agents:{analyst:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a data analyst. Help users understand and analyze data by: 1) Searching for relevant datasets and statistics, 2) Performing calculations and analysis, 3) Creating clear visualizations and summaries, 4) Providing actionable insights. Use available tools to gather and process data.",tools:["google_search","code_execution"],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"analyst"},{from:"analyst",to:"END"}]},{id:"writing_team",name:"Writing Team",icon:"",description:"Collaborative team: Writer  Editor  Fact-Checker",category:"teams",agents:{writer:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a creative writer. Given a topic, write engaging, well-structured content. Focus on clarity, flow, and reader engagement. Include relevant examples and explanations.",tools:[],sub_agents:[],position:{x:0,y:0}},editor:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a professional editor. Review the content for: grammar, style, clarity, and structure. Make improvements while preserving the author's voice. Suggest changes and explain your reasoning.",tools:[],sub_agents:[],position:{x:0,y:0}},fact_checker:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a fact-checker. Verify all claims, statistics, and facts in the content. Use search to confirm accuracy. Flag any questionable statements and provide corrections with sources.",tools:["google_search"],sub_agents:[],position:{x:0,y:0}},writing_team:{type:"sequential",instruction:"",tools:[],sub_agents:["writer","editor","fact_checker"],position:{x:250,y:150}}},edges:[{from:"START",to:"writing_team"},{from:"writing_team",to:"END"}]},{id:"eval_loop",name:"Evaluation Loop",icon:"",description:"Generate and evaluate responses iteratively",category:"teams",agents:{generator:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a response generator. Create high-quality, comprehensive responses to user queries. Consider multiple perspectives and provide thorough explanations.",tools:[],sub_agents:[],position:{x:0,y:0}},evaluator:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a response evaluator. Score the response on: accuracy (1-10), completeness (1-10), clarity (1-10). If average score >= 8, call exit_loop. Otherwise, provide specific feedback for improvement.",tools:["exit_loop"],sub_agents:[],position:{x:0,y:0}},eval_loop:{type:"loop",instruction:"",tools:[],sub_agents:["generator","evaluator"],position:{x:250,y:150},max_iterations:3}},edges:[{from:"START",to:"eval_loop"},{from:"eval_loop",to:"END"}]},{id:"voice_assistant",name:"Voice Assistant",icon:"",description:"Real-time voice-enabled conversational agent",category:"realtime",agents:{voice_agent:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a voice assistant. Respond naturally and conversationally. Keep responses concise (1-2 sentences when possible) for smooth voice interaction. Be helpful, friendly, and responsive.",tools:[],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"voice_agent"},{from:"voice_agent",to:"END"}]},{id:"realtime_translator",name:"Realtime Translator",icon:"",description:"Live translation agent for multilingual conversations",category:"realtime",agents:{translator:{type:"llm",model:"gemini-2.0-flash",instruction:"You are a real-time translator. Detect the input language and translate to the target language (default: English). Preserve tone, context, and nuance. For voice input, respond quickly with natural translations.",tools:[],sub_agents:[],position:{x:250,y:150}}},edges:[{from:"START",to:"translator"},{from:"translator",to:"END"}]},{id:"email_sentiment_analysis",name:"Email Sentiment Analysis",icon:"",description:"Analyze email sentiment and update spreadsheet with results",category:"automation",requiredNodeTypes:["trigger","http","transform","loop","switch","set","merge"],envVars:[{name:"GMAIL_TOKEN",description:"Gmail API OAuth token",required:!0,example:"ya29.xxx"},{name:"SHEET_ID",description:"Google Sheets spreadsheet ID",required:!0,example:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"},{name:"SHEETS_TOKEN",description:"Google Sheets API OAuth token",required:!0,example:"ya29.xxx"}],useCase:"Automatically analyze incoming emails for sentiment, categorize them by urgency, and log results to a Google Sheet for tracking and reporting.",customizationTips:["Adjust the cron schedule to match your email checking frequency","Modify sentiment thresholds in the Switch node for your use case","Add additional categories beyond positive/neutral/negative"],agents:{sentiment_analyzer:{type:"llm",model:"gemini-2.0-flash",instruction:`You are a sentiment analysis expert. Analyze the email content provided and determine:
1. Overall sentiment: positive, negative, or neutral
2. Sentiment score: a number from -1.0 (very negative) to 1.0 (very positive)
3. Key phrases that indicate the sentiment
4. Urgency level: low, medium, or high

Output your analysis as JSON:
{
  "sentiment": "positive|negative|neutral",
  "score": 0.75,
  "keyPhrases": ["phrase1", "phrase2"],
  "urgency": "low|medium|high",
  "summary": "Brief summary of the email"
}`,tools:[],sub_agents:[],position:{x:400,y:300}}},actionNodes:{trigger_schedule:{type:"trigger",id:"trigger_schedule",name:"Daily Email Check",description:"Trigger workflow daily at 9 AM",triggerType:"schedule",schedule:{cron:"0 9 * * *",timezone:"America/New_York"},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"triggerData"}},fetch_emails:{type:"http",id:"fetch_emails",name:"Fetch Unread Emails",description:"Fetch unread emails from Gmail API",method:"GET",url:"https://gmail.googleapis.com/gmail/v1/users/me/messages?q=is:unread",auth:{type:"bearer",bearer:{token:"{{GMAIL_TOKEN}}"}},headers:{},body:{type:"none"},response:{type:"json",jsonPath:"$.messages"},errorHandling:{mode:"retry",retryCount:3,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"emails"}},parse_emails:{type:"transform",id:"parse_emails",name:"Parse Email Data",description:"Extract email content for analysis",transformType:"javascript",expression:`return input.emails.map(email => ({
  id: email.id,
  subject: email.payload?.headers?.find(h => h.name === 'Subject')?.value || 'No Subject',
  from: email.payload?.headers?.find(h => h.name === 'From')?.value || 'Unknown',
  body: email.snippet || ''
}));`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{emails:"emails"},outputKey:"parsedEmails"}},process_loop:{type:"loop",id:"process_loop",name:"Process Each Email",description:"Iterate through emails for sentiment analysis",loopType:"forEach",forEach:{sourceArray:"parsedEmails",itemVar:"email",indexVar:"idx"},parallel:{enabled:!0,batchSize:5},results:{collect:!0,aggregationKey:"analysisResults"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:12e4},mapping:{outputKey:"loopResults"}},route_sentiment:{type:"switch",id:"route_sentiment",name:"Route by Sentiment",description:"Route emails based on sentiment score",evaluationMode:"first_match",conditions:[{id:"positive",name:"Positive",field:"sentiment.score",operator:"gt",value:.3,outputPort:"positive"},{id:"negative",name:"Negative",field:"sentiment.score",operator:"lt",value:-.3,outputPort:"negative"}],defaultBranch:"neutral",errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"routeResult"}},set_positive:{type:"set",id:"set_positive",name:"Set Positive Category",description:"Mark email as positive sentiment",mode:"set",variables:[{key:"category",value:"Positive",valueType:"string",isSecret:!1},{key:"color",value:"#22C55E",valueType:"string",isSecret:!1},{key:"priority",value:"low",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"categoryData"}},set_neutral:{type:"set",id:"set_neutral",name:"Set Neutral Category",description:"Mark email as neutral sentiment",mode:"set",variables:[{key:"category",value:"Neutral",valueType:"string",isSecret:!1},{key:"color",value:"#6B7280",valueType:"string",isSecret:!1},{key:"priority",value:"medium",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"categoryData"}},set_negative:{type:"set",id:"set_negative",name:"Set Negative Category",description:"Mark email as negative sentiment - requires attention",mode:"set",variables:[{key:"category",value:"Negative",valueType:"string",isSecret:!1},{key:"color",value:"#EF4444",valueType:"string",isSecret:!1},{key:"priority",value:"high",valueType:"string",isSecret:!1}],errorHandling:{mode:"stop"},tracing:{enabled:!1,logLevel:"none"},callbacks:{},execution:{timeout:5e3},mapping:{outputKey:"categoryData"}},merge_results:{type:"merge",id:"merge_results",name:"Merge All Results",description:"Combine results from all sentiment branches",mode:"wait_all",combineStrategy:"array",timeout:{enabled:!0,ms:3e4,behavior:"continue"},errorHandling:{mode:"continue"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:35e3},mapping:{outputKey:"mergedResults"}},update_sheet:{type:"http",id:"update_sheet",name:"Update Google Sheet",description:"Append analysis results to spreadsheet",method:"POST",url:"https://sheets.googleapis.com/v4/spreadsheets/{{SHEET_ID}}/values/A1:append?valueInputOption=USER_ENTERED",auth:{type:"bearer",bearer:{token:"{{SHEETS_TOKEN}}"}},headers:{"Content-Type":"application/json"},body:{type:"json",content:'{"values": {{mergedResults}}}'},response:{type:"json"},errorHandling:{mode:"retry",retryCount:2,retryDelay:2e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"sheetResponse"}}},edges:[{from:"START",to:"trigger_schedule"},{from:"trigger_schedule",to:"fetch_emails"},{from:"fetch_emails",to:"parse_emails"},{from:"parse_emails",to:"process_loop"},{from:"process_loop",to:"sentiment_analyzer"},{from:"sentiment_analyzer",to:"route_sentiment"},{from:"route_sentiment",to:"set_positive",fromPort:"positive"},{from:"route_sentiment",to:"set_neutral",fromPort:"neutral"},{from:"route_sentiment",to:"set_negative",fromPort:"negative"},{from:"set_positive",to:"merge_results"},{from:"set_neutral",to:"merge_results"},{from:"set_negative",to:"merge_results"},{from:"merge_results",to:"update_sheet"},{from:"update_sheet",to:"END"}]},{id:"api_data_pipeline",name:"API Data Pipeline",icon:"",description:"Fetch, transform, and store data from external APIs",category:"automation",requiredNodeTypes:["trigger","http","transform","database"],envVars:[{name:"WEBHOOK_API_KEY",description:"API key for webhook authentication",required:!0,example:"sk-xxx"},{name:"DATABASE_URL",description:"PostgreSQL connection string",required:!0,example:"postgresql://user:pass@host:5432/db"}],useCase:"Create a webhook endpoint that receives data, fetches additional information from external APIs, transforms it, and stores it in a PostgreSQL database.",customizationTips:["Modify the transform expression to match your data structure","Add additional HTTP nodes for multiple API calls","Change the database type to MySQL or MongoDB if needed"],agents:{},actionNodes:{trigger_webhook:{type:"trigger",id:"trigger_webhook",name:"Webhook Trigger",description:"Receive incoming webhook requests",triggerType:"webhook",webhook:{path:"/api/webhook/data-pipeline",method:"POST",auth:"api_key",authConfig:{headerName:"X-API-Key",tokenEnvVar:"WEBHOOK_API_KEY"}},errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"webhookData"}},fetch_data:{type:"http",id:"fetch_data",name:"Fetch External Data",description:"Retrieve data from external API",method:"GET",url:"{{webhookData.apiUrl}}",auth:{type:"none"},headers:{Accept:"application/json"},body:{type:"none"},response:{type:"json"},errorHandling:{mode:"retry",retryCount:3,retryDelay:1e3},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:3e4},mapping:{outputKey:"rawData"}},transform_data:{type:"transform",id:"transform_data",name:"Transform Data",description:"Clean and transform the fetched data",transformType:"javascript",expression:`const data = input.rawData;
return {
  processed: true,
  timestamp: new Date().toISOString(),
  records: Array.isArray(data) ? data.length : 1,
  data: data
};`,errorHandling:{mode:"stop"},tracing:{enabled:!0,logLevel:"debug"},callbacks:{},execution:{timeout:1e4},mapping:{inputMapping:{rawData:"rawData"},outputKey:"transformedData"}},store_database:{type:"database",id:"store_database",name:"Store in Database",description:"Save transformed data to PostgreSQL",dbType:"postgresql",connection:{connectionString:"{{DATABASE_URL}}",poolSize:5},sql:{operation:"insert",query:"INSERT INTO pipeline_data (payload, processed_at) VALUES ($1, $2)",params:{$1:"{{transformedData}}",$2:"{{transformedData.timestamp}}"}},errorHandling:{mode:"retry",retryCount:2,retryDelay:500},tracing:{enabled:!0,logLevel:"info"},callbacks:{},execution:{timeout:15e3},mapping:{outputKey:"dbResult"}}},edges:[{from:"START",to:"trigger_webhook"},{from:"trigger_webhook",to:"fetch_data"},{from:"fetch_data",to:"transform_data"},{from:"transform_data",to:"store_database"},{from:"store_database",to:"END"}]},...eH];function tH(){return["basic","advanced","tools","teams","realtime","automation"]}const qv={all:"All Templates",basic:"Basic",advanced:"Advanced",tools:"Tool-Heavy",teams:"Agent Teams",realtime:"Realtime",automation:"Automation"},nH={trigger:"",http:"",set:"",transform:"",switch:"",loop:"",merge:"",wait:"",code:"",database:"",email:"",notification:"",rss:"",file:""};function rH({template:e,onSelect:t,onRun:n}){const r=Object.keys(e.agents).length,i=e.actionNodes?Object.keys(e.actionNodes).length:0,a=e.edges.length,c=e.actionNodes?[...new Set(Object.values(e.actionNodes).map(u=>u.type))]:[];return s.jsxs("div",{className:"template-card group cursor-pointer rounded-lg border p-4 transition-all hover:shadow-md",style:{backgroundColor:"var(--surface-card)",borderColor:"var(--border-default)"},onClick:t,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("span",{className:"text-3xl",children:e.icon}),s.jsx("span",{className:"text-xs px-2 py-1 rounded-full",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:qv[e.category]})]}),s.jsx("h3",{className:"font-semibold mb-1",style:{color:"var(--text-primary)"},children:e.name}),s.jsx("p",{className:"text-sm mb-3 line-clamp-2",style:{color:"var(--text-secondary)"},children:e.description}),s.jsxs("div",{className:"flex items-center gap-3 text-xs mb-3",style:{color:"var(--text-muted)"},children:[s.jsxs("span",{children:[r," agent",r!==1?"s":""]}),i>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[i," action",i!==1?"s":""]})]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[a," connection",a!==1?"s":""]})]}),c.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",title:`Uses: ${c.join(", ")}`,children:[c.slice(0,6).map(u=>s.jsx("span",{className:"text-sm px-1.5 py-0.5 rounded",style:{backgroundColor:"var(--bg-tertiary)",fontSize:"12px"},title:u,children:nH[u]||""},u)),c.length>6&&s.jsxs("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--text-muted)"},children:["+",c.length-6]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"flex-1 px-3 py-2 rounded text-sm font-medium transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white"},onClick:u=>{u.stopPropagation(),t()},children:"Use Template"}),n&&s.jsx("button",{className:"p-2 rounded transition-colors",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},onClick:u=>{u.stopPropagation(),n()},title:"Run immediately",children:s.jsx(s2,{size:16})})]})]})}const iH={trigger:" Trigger",http:" HTTP",set:" Set",transform:" Transform",switch:" Switch",loop:" Loop",merge:" Merge",wait:" Wait",code:" Code",database:" Database",email:" Email",notification:" Notification",rss:" RSS",file:" File"};function oH({onSelect:e,onRun:t,onClose:n,isModal:r=!1}){const[i,a]=E.useState("all"),[c,u]=E.useState(""),[d,p]=E.useState(new Set),[f,m]=E.useState(!1),g=E.useMemo(()=>{const N=new Set;return h1.forEach(S=>{S.actionNodes&&Object.values(S.actionNodes).forEach(A=>{N.add(A.type)})}),Array.from(N).sort()},[]),v=N=>{p(S=>{const A=new Set(S);return A.has(N)?A.delete(N):A.add(N),A})},w=()=>{p(new Set)},b=h1.filter(N=>{const S=i==="all"||N.category===i,A=c===""||N.name.toLowerCase().includes(c.toLowerCase())||N.description.toLowerCase().includes(c.toLowerCase());let P=!0;if(d.size>0)if(!N.actionNodes)P=!1;else{const T=new Set(Object.values(N.actionNodes).map(C=>C.type));P=Array.from(d).every(C=>T.has(C))}return S&&A&&P}),k=tH(),_=s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Template Gallery"}),n&&s.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-opacity-10",style:{color:"var(--text-secondary)"},children:s.jsx(Nx,{size:20})})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg border",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)"},children:[s.jsx(F$,{size:16,style:{color:"var(--text-muted)"}}),s.jsx("input",{type:"text",placeholder:"Search templates...",value:c,onChange:N=>u(N.target.value),className:"flex-1 bg-transparent outline-none text-sm",style:{color:"var(--text-primary)"}})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>a("all"),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors",style:{backgroundColor:i==="all"?"var(--accent-primary)":"var(--bg-secondary)",color:i==="all"?"white":"var(--text-secondary)"},children:qv.all}),k.map(N=>s.jsx("button",{onClick:()=>a(N),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors",style:{backgroundColor:i===N?"var(--accent-primary)":"var(--bg-secondary)",color:i===N?"white":"var(--text-secondary)"},children:qv[N]},N)),s.jsxs("button",{onClick:()=>m(!f),className:"px-3 py-1.5 rounded-full text-sm font-medium transition-colors flex items-center gap-1",style:{backgroundColor:d.size>0||f?"var(--accent-secondary)":"var(--bg-secondary)",color:d.size>0||f?"white":"var(--text-secondary)"},title:"Filter by action node types",children:[s.jsx(D$,{size:14}),d.size>0&&s.jsxs("span",{className:"ml-1",children:["(",d.size,")"]})]})]}),f&&s.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:"var(--bg-tertiary)",borderColor:"var(--border-default)"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-medium",style:{color:"var(--text-secondary)"},children:"Filter by Action Node Types"}),d.size>0&&s.jsx("button",{onClick:w,className:"text-xs px-2 py-0.5 rounded",style:{color:"var(--accent-primary)"},children:"Clear all"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:g.map(N=>s.jsx("button",{onClick:()=>v(N),className:"px-2 py-1 rounded text-xs font-medium transition-colors",style:{backgroundColor:d.has(N)?"var(--accent-primary)":"var(--bg-secondary)",color:d.has(N)?"white":"var(--text-secondary)"},children:iH[N]||N},N))})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:b.length===0?s.jsx("div",{className:"text-center py-8",style:{color:"var(--text-muted)"},children:s.jsx("p",{children:"No templates found matching your criteria."})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(N=>s.jsx(rH,{template:N,onSelect:()=>e(N),onRun:t?()=>t(N):void 0},N.id))})}),s.jsxs("div",{className:"p-3 border-t text-center text-sm",style:{borderColor:"var(--border-default)",color:"var(--text-muted)"},children:[b.length," template",b.length!==1?"s":""," available"]})]});return r?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:n,children:s.jsx("div",{className:"w-full max-w-4xl max-h-[80vh] rounded-lg shadow-xl overflow-hidden",style:{backgroundColor:"var(--surface-panel)"},onClick:N=>N.stopPropagation(),children:_})}):s.jsx("div",{className:"h-full",style:{backgroundColor:"var(--surface-panel)"},children:_})}function sH({onExportCode:e,onNewProject:t,onTemplateApplied:n,onRunTemplate:r,buildStatus:i="none",onBuildStatusClick:a}){const[c,u]=E.useState(null),[d,p]=E.useState(!1),f=E.useRef(null),{currentProject:m,addAgent:g,removeAgent:v,addEdge:w,removeEdge:b}=gt(),{mode:k}=vi(),{completed:_,show:N,reset:S}=e2(),{start:A}=t2(),P=k==="light";E.useEffect(()=>{const R=M=>{f.current&&!f.current.contains(M.target)&&u(null)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const T=R=>{m&&((m.workflow?.edges||[]).forEach(M=>b(M.from,M.to)),Object.keys(m.agents).forEach(M=>v(M)),Object.entries(R.agents).forEach(([M,H])=>{g(M,H)}),R.edges.forEach(M=>w(M.from,M.to,M.fromPort,M.toPort)),n&&n(),u(null))},C=R=>{if(!m)return;(m.workflow?.edges||[]).forEach($=>b($.from,$.to)),Object.keys(m.agents).forEach($=>v($));const{removeActionNode:M,addActionNode:H}=gt.getState();Object.keys(m.actionNodes||{}).forEach($=>M($));const X=Object.entries(R.agents);X.forEach(([$,Y],I)=>{const B=Y.position||{x:250+I%3*300,y:150+Math.floor(I/3)*200};g($,{...Y,position:B})}),R.actionNodes&&Object.entries(R.actionNodes).forEach(([Y,I],B)=>{const K=X.length>0?400:150,D={x:100+B%4*250,y:K+Math.floor(B/4)*150};H(Y,{...I,position:D})}),R.edges.forEach($=>w($.from,$.to,$.fromPort,$.toPort)),p(!1),n&&n(),(R.actionNodes||R.envVars||R.useCase)&&setTimeout(()=>{A(R)},300)},z=R=>{C(R),r&&setTimeout(()=>r(),200)},F=P?"hover:bg-gray-200":"hover:bg-gray-700",V=P?"bg-gray-200":"bg-gray-700",L=({name:R,children:M})=>s.jsxs("div",{className:"relative",children:[s.jsx("button",{className:`px-3 py-1 text-sm rounded ${F} ${c===R?V:""}`,style:{color:"var(--text-primary)"},onClick:()=>u(c===R?null:R),children:R}),c===R&&s.jsx("div",{className:"absolute top-full left-0 mt-1 rounded shadow-lg min-w-[200px] z-50",style:{backgroundColor:"var(--surface-panel)",border:"1px solid var(--border-default)"},children:M})]}),q=({onClick:R,children:M,disabled:H})=>s.jsx("button",{className:`w-full text-left px-3 py-2 text-sm ${F} ${H?"opacity-50 cursor-not-allowed":""}`,style:{color:"var(--text-primary)"},onClick:()=>{H||(R(),u(null))},disabled:H,children:M}),G=()=>s.jsx("div",{className:"my-1",style:{borderTop:"1px solid var(--border-default)"}});return s.jsxs("div",{ref:f,className:"flex items-center gap-1 px-2 py-1",style:{backgroundColor:"var(--surface-panel)",borderBottom:"1px solid var(--border-default)"},children:[s.jsxs("span",{className:"text-sm font-semibold mr-4 flex items-center gap-1.5",style:{color:"var(--accent-primary)"},children:[s.jsx("img",{src:"https://adk-rust.com/icon.svg",alt:"ADK",className:"w-5 h-5"}),"ADK Studio"]}),s.jsxs(L,{name:"File",children:[s.jsx(q,{onClick:t,children:" New Project"}),s.jsx(G,{}),s.jsx(q,{onClick:e,disabled:!m,children:" Export Code"})]}),s.jsxs(L,{name:"Templates",children:[s.jsx(q,{onClick:()=>{p(!0),u(null)},disabled:!m,children:" Browse Gallery..."}),s.jsx(G,{}),s.jsx("div",{className:"px-3 py-1 text-xs",style:{color:"var(--text-muted)",borderBottom:"1px solid var(--border-default)"},children:"Quick templates"}),ZA.slice(0,5).map(R=>s.jsxs(q,{onClick:()=>T(R),disabled:!m,children:[R.icon," ",R.name]},R.id))]}),s.jsxs(L,{name:"Help",children:[s.jsx(q,{onClick:()=>window.open("https://github.com/zavora-ai/adk-rust","_blank"),children:" Documentation"}),s.jsx(G,{}),s.jsxs(q,{onClick:()=>{N(),u(null)},children:[" ",_?"Restart Tutorial":"Start Tutorial"]}),_&&s.jsx(q,{onClick:()=>{S(),u(null)},children:" Reset Tutorial Progress"}),s.jsx(G,{}),s.jsxs("div",{className:"px-3 py-2 text-xs",style:{color:"var(--text-secondary)"},children:[s.jsx("div",{className:"font-semibold mb-2",children:" Keyboard Shortcuts"}),["Edit","Canvas"].map(R=>s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"font-medium mb-1",style:{color:"var(--text-muted)"},children:R}),P$.filter(M=>M.category===R).map(M=>s.jsxs("div",{className:"flex justify-between gap-4 py-0.5",children:[s.jsx("span",{style:{color:"var(--text-muted)"},children:M.description}),s.jsx("span",{className:"font-mono text-xs px-1 rounded",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},children:M.key})]},M.key))]},R))]}),s.jsx(G,{}),s.jsx("div",{className:"px-3 py-2 text-xs",style:{color:"var(--text-muted)"},children:"ADK Studio v2.0.0"})]}),s.jsx("div",{className:"flex-1"}),m&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Project: ",s.jsx("span",{style:{color:"var(--text-primary)"},children:m.name})]}),s.jsxs("button",{onClick:a,className:"flex items-center gap-1.5 px-2 py-0.5 rounded text-xs font-medium transition-colors",style:{backgroundColor:i==="building"?"var(--accent-primary)":i==="success"?"#22c55e":i==="error"?"#ef4444":"var(--bg-secondary)",color:i==="none"?"var(--text-muted)":"white",cursor:i==="none"?"default":"pointer"},title:i==="building"?"Building... Click to view progress":i==="success"?"Build succeeded":i==="error"?"Build failed - Click to view errors":"No build yet",children:[i==="building"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin",children:""}),s.jsx("span",{children:"Building..."})]}),i==="success"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Built"})]}),i==="error"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Failed"})]}),i==="none"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Not Built"})]})]})]}),d&&s.jsx(oH,{isModal:!0,onSelect:C,onRun:z,onClose:()=>p(!1)})]})}const aH={sm:{container:14,icon:10},md:{container:18,icon:12},lg:{container:22,icon:14}},jx=E.memo(function({status:t,size:n="md",className:r=""}){if(t==="idle")return null;const{container:i,icon:a}=aH[n];return s.jsxs("div",{className:`status-indicator status-${t} ${r}`,style:{width:i,height:i,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",flexShrink:0},role:"status","aria-label":lH(t),children:[t==="running"&&s.jsx(cH,{size:a}),t==="success"&&s.jsx(uH,{size:a}),t==="error"&&s.jsx(dH,{size:a})]})});function lH(e){switch(e){case"running":return"Running";case"success":return"Completed successfully";case"error":return"Error occurred";default:return"Idle"}}function cH({size:e}){return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",className:"status-spinner",style:{animation:"spin 1s linear infinite"},children:[s.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"31.4 31.4",style:{opacity:.3}}),s.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"31.4 31.4",strokeDashoffset:"23.55"})]})}function uH({size:e}){return s.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"status-success-icon",children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})}function dH({size:e}){return s.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"status-error-icon",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}const pH={agent:"",sequential:"",loop:"",parallel:"",router:"",start:"",end:""},fH={agent:"agent",sequential:"sequential",loop:"loop",parallel:"parallel",router:"router",start:"start",end:"end"},tl=E.memo(function({label:t,icon:n,nodeType:r,isActive:i=!1,isSelected:a=!1,status:c="idle",children:u,showTopHandle:d=!0,showBottomHandle:p=!0,showLeftHandle:f=!0,showRightHandle:m=!0,showTypeBadge:g=!0}){const v=n||pH[r],w=fH[r],b=["node-base",a&&"node-selected",i&&"node-active"].filter(Boolean).join(" "),k=["node-header",`node-header-${r}`].join(" ");return s.jsxs("div",{className:b,children:[d&&s.jsx(sn,{type:"target",position:Se.Top,id:"top",className:"node-handle"}),f&&s.jsx(sn,{type:"target",position:Se.Left,id:"left",className:"node-handle"}),s.jsxs("div",{className:k,children:[s.jsx("span",{className:"node-icon",children:v}),s.jsx("span",{className:"node-label",children:t}),g&&r!=="start"&&r!=="end"&&s.jsx("span",{className:"node-type-badge",children:w}),s.jsx(jx,{status:i?"running":c,size:"sm"})]}),u&&s.jsx("div",{className:"node-body",children:u}),p&&s.jsx(sn,{type:"source",position:Se.Bottom,id:"bottom",className:"node-handle"}),m&&s.jsx(sn,{type:"source",position:Se.Right,id:"right",className:"node-handle"})]})}),m1={google_search:"",search:"",browser:"",web:"",mcp:"",function:"",file:"",code:"",database:"",api:"",email:"",calendar:"",default:""};function hH(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(m1))if(n!=="default"&&t.includes(n))return r;return m1.default}function mH(e,t=12){return e.length<=t?e:e.substring(0,t-1)+""}function gH({name:e}){const t=hH(e),n=mH(e);return s.jsxs("span",{className:"tool-badge",title:e,children:[s.jsx("span",{className:"tool-badge-icon",children:t}),s.jsx("span",{className:"tool-badge-name",children:n})]})}function yH({tools:e}){return!e||e.length===0?null:s.jsx("div",{className:"tool-badges",children:e.map(t=>s.jsx(gH,{name:t},t))})}function vH({model:e}){return s.jsxs("div",{className:"model-info",children:[s.jsx("span",{className:"model-icon",children:""}),s.jsx("span",{className:"model-name",children:e})]})}const l2=E.memo(function({data:t,selected:n}){const r=t.isActive||!1,i=!!t.thought,a=t.model||"gemini-2.0-flash",c=t.tools||[],u=t.status||(r?"running":"idle"),d=i?"":"";return s.jsxs(tl,{label:t.label,icon:d,nodeType:"agent",isActive:r,isSelected:n,status:u,children:[s.jsx(vH,{model:a}),c.length>0&&s.jsx("div",{className:"node-body-section",children:s.jsx(yH,{tools:c})})]})});l2.displayName="LlmAgentNode";const g1={google_search:"",search:"",browser:"",web:"",mcp:"",function:"",file:"",code:"",default:""};function xH(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(g1))if(n!=="default"&&t.includes(n))return r;return g1.default}function bH({name:e,index:t,tools:n,isActive:r}){const i=["sub-agent",r&&"sub-agent-active"].filter(Boolean).join(" ");return s.jsxs("div",{className:i,children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"sub-agent-index",children:r?"":`${t+1}.`}),s.jsx("span",{className:"sub-agent-name",children:e})]}),n.length>0&&s.jsx("div",{className:"mt-1 text-xs opacity-70",children:n.map(a=>xH(a)).join(" ")})]})}const c2=E.memo(function({data:t,selected:n}){const r=t.isActive||!1,i=t.subAgents||[],a=t.subAgentTools||{},c=t.activeSubAgent,u=t.status||(r?"running":"idle");return s.jsx(tl,{label:t.label,nodeType:"sequential",isActive:r,isSelected:n,status:u,children:i.length>0&&s.jsx("div",{className:"space-y-1",children:i.map((d,p)=>s.jsx(bH,{name:d,index:p,tools:a[d]||[],isActive:c===d},d))})})});c2.displayName="SequentialNode";const y1={google_search:"",search:"",browser:"",web:"",mcp:"",function:"",file:"",code:"",default:""};function wH(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(y1))if(n!=="default"&&t.includes(n))return r;return y1.default}function _H({current:e,max:t,isActive:n}){const r=n?`Iteration ${e+1}/${t}`:`Max ${t}`,i=["iteration-badge",n&&"iteration-badge-active"].filter(Boolean).join(" ");return s.jsx("div",{className:"iteration-info",children:s.jsx("span",{className:i,children:r})})}function kH({name:e,index:t,tools:n,isActive:r}){const i=["sub-agent",r&&"sub-agent-active"].filter(Boolean).join(" ");return s.jsxs("div",{className:i,children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"sub-agent-index",children:r?"":`${t+1}.`}),s.jsx("span",{className:"sub-agent-name",children:e})]}),n.length>0&&s.jsx("div",{className:"mt-1 text-xs opacity-70",children:n.map(a=>wH(a)).join(" ")})]})}const u2=E.memo(function({data:t,selected:n}){const r=t.isActive||!1,i=t.subAgents||[],a=t.subAgentTools||{},c=t.activeSubAgent,u=t.maxIterations||3,d=t.currentIteration||0,p=t.status||(r?"running":"idle");return s.jsxs(tl,{label:t.label,nodeType:"loop",isActive:r,isSelected:n,status:p,children:[s.jsx(_H,{current:d,max:u,isActive:r}),i.length>0&&s.jsx("div",{className:"node-body-section space-y-1",children:i.map((f,m)=>s.jsx(kH,{name:f,index:m,tools:a[f]||[],isActive:c===f},f))})]})});u2.displayName="LoopNode";const v1={google_search:"",search:"",browser:"",web:"",mcp:"",function:"",file:"",code:"",default:""};function SH(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(v1))if(n!=="default"&&t.includes(n))return r;return v1.default}function NH({name:e,tools:t,isActive:n}){const r=["sub-agent",n&&"sub-agent-active"].filter(Boolean).join(" ");return s.jsxs("div",{className:r,children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"sub-agent-index",children:""}),s.jsx("span",{className:"sub-agent-name",children:e})]}),t.length>0&&s.jsx("div",{className:"mt-1 text-xs opacity-70",children:t.map(i=>SH(i)).join(" ")})]})}const d2=E.memo(function({data:t,selected:n}){const r=t.isActive||!1,i=t.subAgents||[],a=t.subAgentTools||{},c=t.activeSubAgent,u=t.status||(r?"running":"idle");return s.jsx(tl,{label:t.label,nodeType:"parallel",isActive:r,isSelected:n,status:u,children:i.length>0&&s.jsx("div",{className:"space-y-1",children:i.map(d=>s.jsx(NH,{name:d,tools:a[d]||[],isActive:c===d},d))})})});d2.displayName="ParallelNode";function jH({route:e,isActive:t}){const n=["route",t&&"route-active"].filter(Boolean).join(" ");return s.jsxs("div",{className:n,children:[s.jsx("span",{className:"route-condition",children:e.condition}),s.jsx("span",{className:"route-arrow",children:""}),s.jsx("span",{className:"route-target",children:e.target})]})}const p2=E.memo(function({data:t,selected:n}){const r=t.isActive||!1,i=t.routes||[],a=t.activeRoute,c=t.status||(r?"running":"idle");return s.jsx(tl,{label:t.label,nodeType:"router",isActive:r,isSelected:n,status:c,children:i.length>0&&s.jsx("div",{className:"space-y-1",children:i.map(u=>s.jsx(jH,{route:u,isActive:a===u.condition},u.condition))})})});p2.displayName="RouterNode";const f2=E.memo(function(){return s.jsxs("div",{className:"node-base",style:{minWidth:"auto"},children:[s.jsxs("div",{className:"node-header node-header-start",children:[s.jsx("span",{className:"node-icon",children:""}),s.jsx("span",{className:"node-label",children:"START"})]}),s.jsx(sn,{type:"source",position:Se.Bottom,id:"bottom",className:"node-handle"}),s.jsx(sn,{type:"source",position:Se.Right,id:"right",className:"node-handle"})]})});f2.displayName="StartNode";const h2=E.memo(function(){return s.jsxs("div",{className:"node-base",style:{minWidth:"auto"},children:[s.jsxs("div",{className:"node-header node-header-end",children:[s.jsx("span",{className:"node-icon",children:""}),s.jsx("span",{className:"node-label",children:"END"})]}),s.jsx(sn,{type:"target",position:Se.Top,id:"top",className:"node-handle"}),s.jsx(sn,{type:"target",position:Se.Left,id:"left",className:"node-handle"})]})});h2.displayName="EndNode";function nl({content:e,children:t,position:n="top",delay:r=300,maxWidth:i=250,disabled:a=!1,className:c=""}){const[u,d]=E.useState(!1),[p,f]=E.useState({x:0,y:0}),m=E.useRef(null),g=E.useRef(null),v=E.useRef(null),w=()=>{a||(v.current=setTimeout(()=>{if(m.current){const k=m.current.getBoundingClientRect();f(x1(k,n)),d(!0)}},r))},b=()=>{v.current&&(clearTimeout(v.current),v.current=null),d(!1)};return E.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),E.useEffect(()=>{if(u&&m.current&&g.current){const k=m.current.getBoundingClientRect(),_=g.current.getBoundingClientRect();f(x1(k,n,_))}},[u,n]),s.jsxs("div",{ref:m,className:`tooltip-trigger ${c}`,onMouseEnter:w,onMouseLeave:b,onFocus:w,onBlur:b,children:[t,u&&e&&s.jsxs("div",{ref:g,className:`tooltip tooltip-${n}`,style:{left:p.x,top:p.y,maxWidth:i},role:"tooltip",children:[s.jsx("div",{className:"tooltip-content",children:e}),s.jsx("div",{className:"tooltip-arrow"})]})]})}function x1(e,t,n){const i=n?.width||0,a=n?.height||0;switch(t){case"top":return{x:e.left+e.width/2-i/2,y:e.top-a-8};case"bottom":return{x:e.left+e.width/2-i/2,y:e.bottom+8};case"left":return{x:e.left-i-8,y:e.top+e.height/2-a/2};case"right":return{x:e.right+8,y:e.top+e.height/2-a/2};default:return{x:0,y:0}}}const rn={trigger:"Entry point for workflow execution. Supports manual, webhook, schedule, and event triggers.",http:"Make HTTP requests to external APIs. Supports GET, POST, PUT, PATCH, DELETE methods with authentication.",set:"Define and manipulate workflow state variables. Supports set, merge, and delete operations.",transform:"Transform data using JSONPath, JMESPath, templates, or JavaScript expressions.",switch:"Conditional branching based on field values or expressions. Routes to different output ports.",loop:"Iterate over arrays (forEach), repeat while condition (while), or fixed times. Supports parallel execution.",merge:"Combine multiple branches back into single flow. Wait for all, any, or N branches.",wait:"Pause workflow execution for a duration, until a timestamp, or until a condition is met.",code:"Execute custom JavaScript/TypeScript code in a secure sandbox environment.",database:"Perform database operations on PostgreSQL, MySQL, SQLite, MongoDB, or Redis.",email:"Monitor incoming emails via IMAP or send outgoing emails via SMTP.",notification:"Send notifications to Slack, Discord, Microsoft Teams, or custom webhooks.",rss:"Monitor RSS/Atom feeds for new entries. Supports filtering by keywords, date, and categories.",file:"Read, write, delete, or list files from local storage or cloud providers (S3, GCS, Azure).",errorHandling:"Configure how errors are handled: stop execution, continue, retry, or use fallback value.",tracing:"Enable detailed execution traces and configure log level for debugging.",callbacks:"Define functions to call at different lifecycle stages: onStart, onComplete, onError.",executionControl:"Set timeout and skip conditions for node execution.",inputOutputMapping:"Map state fields to node inputs and define where results are stored.",httpMethod:"HTTP method to use for the request.",httpUrl:"URL to send the request to. Supports {{variable}} interpolation.",httpAuth:"Authentication method: none, bearer token, basic auth, or API key.",httpHeaders:"Custom HTTP headers to include in the request.",httpBody:"Request body content. Supports JSON, form data, or raw text.",httpResponse:"Configure response handling: type, status validation, and JSONPath extraction.",httpRateLimit:"Limit request rate to avoid overwhelming the target API.",triggerType:"How the workflow is triggered: manually, via webhook, on schedule, or by event.",webhookPath:"URL path for the webhook endpoint.",webhookMethod:"HTTP method accepted by the webhook.",webhookAuth:"Authentication required for webhook requests.",cronExpression:"Cron expression defining the schedule (minute hour day month weekday).",timezone:"Timezone for schedule evaluation.",setMode:"Operation mode: set (create/overwrite), merge (deep merge), or delete (remove).",variables:"Variables to set in the workflow state.",envVars:"Load environment variables from .env file.",transformType:"Transformation method: JSONPath, JMESPath, template, or JavaScript.",expression:"Transformation expression or code.",operations:"Built-in operations: pick, omit, rename, flatten, sort, unique.",typeCoercion:"Convert result to a specific type.",evaluationMode:"first_match: stop at first match. all_match: evaluate all conditions.",conditions:"Conditions to evaluate for routing.",defaultBranch:"Output port to use when no conditions match.",expressionMode:"Use JavaScript expression to determine branch.",loopType:"Loop type: forEach (iterate array), while (condition), times (fixed count).",sourceArray:"Path to array in state to iterate over.",itemVar:"Variable name for current item in loop.",indexVar:"Variable name for current index in loop.",parallel:"Execute iterations in parallel for better performance.",batchSize:"Number of items to process in parallel.",collectResults:"Collect results from all iterations into an array.",mergeMode:"wait_all: wait for all branches. wait_any: continue on first. wait_n: wait for N.",combineStrategy:"How to combine branch outputs: array, object, first, or last.",branchTimeout:"Maximum time to wait for branches to complete.",waitType:"Wait type: fixed duration, until timestamp, webhook callback, or condition.",duration:"How long to wait.",pollInterval:"How often to check the condition.",maxWait:"Maximum time to wait for condition.",language:"Programming language: JavaScript or TypeScript.",sandbox:"Security settings for code execution.",networkAccess:"Allow code to make network requests.",fileSystemAccess:"Allow code to access the file system.",memoryLimit:"Maximum memory the code can use.",timeLimit:"Maximum execution time for the code.",dbType:"Database type: PostgreSQL, MySQL, SQLite, MongoDB, or Redis.",connectionString:"Database connection string (stored securely).",sqlOperation:"SQL operation: query, insert, update, delete, or upsert.",sqlQuery:"SQL query with parameter placeholders.",mongoCollection:"MongoDB collection name.",mongoOperation:"MongoDB operation: find, findOne, insert, update, delete.",feedUrl:"URL of the RSS or Atom feed to monitor.",rssPollInterval:"How often to check the feed for new entries.",rssKeywords:"Filter entries that contain any of these keywords in title or description.",rssCategories:"Filter entries by category or tag.",rssDateFilter:"Filter entries by publish date range.",seenTracking:"Track seen items to prevent duplicate processing.",maxEntries:"Maximum number of entries to return per poll.",includeContent:"Include the full content of each entry, not just the summary.",parseMedia:"Extract media attachments and enclosures from feed entries."},m2={trigger:"#6366F1",http:"#3B82F6",set:"#8B5CF6",transform:"#EC4899",switch:"#F59E0B",loop:"#10B981",merge:"#06B6D4",wait:"#6B7280",code:"#EF4444",database:"#14B8A6",email:"#EA580C",notification:"#22D3EE",rss:"#F97316",file:"#A855F7"},g2={trigger:"",http:"",set:"",transform:"",switch:"",loop:"",merge:"",wait:"",code:"",database:"",email:"",notification:"",rss:"",file:""},EH={trigger:"Trigger",http:"HTTP",set:"Set",transform:"Transform",switch:"Switch",loop:"Loop",merge:"Merge",wait:"Wait",code:"Code",database:"Database",email:"Email",notification:"Notification",rss:"RSS/Feed",file:"File"},un=E.memo(function({type:t,label:n,isActive:r=!1,isSelected:i=!1,status:a="idle",hasError:c=!1,children:u,inputPorts:d=1,outputPorts:p=1,inputPortIds:f,outputPortIds:m,showTooltip:g=!0}){const v=m2[t],w=g2[t],b=rn[t],k=["action-node",`action-node-${t}`,i&&"action-node-selected",r&&"action-node-active",c&&"action-node-error",a!=="idle"&&`action-node-status-${a}`].filter(Boolean).join(" "),_=()=>Array.from({length:d}).map((A,P)=>{const T=f?.[P]??`input-${P}`,C=(P+1)*100/(d+1);return s.jsx(sn,{type:"target",position:Se.Top,id:T,className:"action-node-handle action-node-handle-input",style:{left:`${C}%`,background:v}},T)}),N=()=>Array.from({length:p}).map((A,P)=>{const T=m?.[P]??`output-${P}`,C=(P+1)*100/(p+1);return s.jsx(sn,{type:"source",position:Se.Bottom,id:T,className:"action-node-handle action-node-handle-output",style:{left:`${C}%`,background:v}},T)}),S=s.jsxs("div",{className:k,style:{"--action-color":v},children:[_(),s.jsxs("div",{className:"action-node-header",style:{background:v},children:[s.jsx("span",{className:"action-node-icon",children:w}),s.jsx("span",{className:"action-node-label",children:n}),s.jsx("span",{className:"action-node-type-badge",children:t}),s.jsx(jx,{status:r?"running":a,size:"sm"})]}),u&&s.jsx("div",{className:"action-node-body",children:u}),c&&s.jsx("div",{className:"action-node-error-badge",children:"!"}),N()]});return g&&b?s.jsx(nl,{content:b,position:"right",delay:500,children:S}):S}),CH={manual:"Manual",webhook:"Webhook",schedule:"Schedule",event:"Event"},TH={manual:"",webhook:"",schedule:"",event:""},AH=E.memo(function({data:t,selected:n}){const r=CH[t.triggerType]||t.triggerType,i=TH[t.triggerType]||"",a=()=>{switch(t.triggerType){case"webhook":return t.webhook?.path?s.jsxs("div",{className:"action-node-preview",children:[s.jsx("span",{className:"action-node-preview-method",children:t.webhook.method}),s.jsx("span",{className:"action-node-preview-path",children:t.webhook.path}),t.webhook.auth!=="none"&&s.jsx("span",{className:"action-node-preview-auth",title:`Auth: ${t.webhook.auth}`,children:""})]}):null;case"schedule":return t.schedule?.cron?s.jsxs("div",{className:"action-node-preview",children:[s.jsx("span",{className:"action-node-preview-cron",children:t.schedule.cron}),t.schedule.timezone&&s.jsx("span",{className:"action-node-preview-tz",title:t.schedule.timezone,children:""})]}):null;case"event":return t.event?.source?s.jsxs("div",{className:"action-node-preview",children:[s.jsx("span",{className:"action-node-preview-source",children:t.event.source}),t.event.eventType&&s.jsxs("span",{className:"action-node-preview-type",children:[": ",t.event.eventType]})]}):null;default:return s.jsx("div",{className:"action-node-preview action-node-preview-manual",children:"Click to run"})}};return s.jsxs(un,{type:"trigger",label:t.name||"Trigger",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",inputPorts:0,outputPorts:1,children:[s.jsxs("div",{className:"action-node-badge",children:[s.jsx("span",{className:"action-node-badge-icon",children:i}),s.jsx("span",{className:"action-node-badge-label",children:r})]}),a()]})}),PH={GET:"#10B981",POST:"#3B82F6",PUT:"#F59E0B",PATCH:"#8B5CF6",DELETE:"#EF4444"};function IH(e,t=35){if(!e||e.length<=t)return e;try{const n=new URL(e),r=n.hostname,i=n.pathname,a=r.length>20?r.substring(0,17)+"...":r,c=t-a.length-3;if(c>5&&i.length>1){const u=i.length>c?i.substring(0,c-3)+"...":i;return a+u}return a+(i.length>1?"/...":"")}catch{return e.substring(0,t-3)+"..."}}function RH(e){return/\{\{[^}]+\}\}/.test(e)}const OH=E.memo(function({data:t,selected:n}){const r=PH[t.method]||"#6B7280",i=IH(t.url),a=RH(t.url),c=t.auth?.type&&t.auth.type!=="none";return s.jsx(un,{type:"http",label:t.name||"HTTP Request",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"http-node-content",children:[s.jsxs("div",{className:"http-method-row",children:[s.jsx("span",{className:"http-method-badge",style:{backgroundColor:r},children:t.method}),a&&s.jsx("span",{className:"http-vars-indicator",title:"Contains variables",children:"{{}}"})]}),t.url&&s.jsx("div",{className:"http-url-preview",title:t.url,children:i||"No URL configured"}),s.jsxs("div",{className:"http-indicators",children:[c&&s.jsxs("span",{className:"http-auth-badge",title:`Auth: ${t.auth.type}`,children:[" ",t.auth.type]}),t.response?.type&&t.response.type!=="json"&&s.jsx("span",{className:"http-response-badge",title:`Response: ${t.response.type}`,children:t.response.type}),t.response?.jsonPath&&s.jsx("span",{className:"http-jsonpath-badge",title:`Extract: ${t.response.jsonPath}`,children:"$."})]})]})})}),b1={set:{label:"Set",icon:"",color:"#8B5CF6"},merge:{label:"Merge",icon:"",color:"#10B981"},delete:{label:"Delete",icon:"",color:"#EF4444"}};function MH(e,t=20){if(e===null)return"null";if(e===void 0)return"undefined";const n=typeof e=="object"?JSON.stringify(e):String(e);return n.length<=t?n:n.substring(0,t-3)+"..."}const LH=E.memo(function({data:t,selected:n}){const r=b1[t.mode]||b1.set,i=t.variables?.length||0,a=t.variables?.filter(d=>d.isSecret).length||0,c=t.envVars?.loadFromEnv,u=t.variables?.slice(0,2)||[];return s.jsx(un,{type:"set",label:t.name||"Set Variables",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"set-node-content",children:[s.jsxs("div",{className:"set-node-header-row",children:[s.jsxs("span",{className:"set-node-mode-badge",style:{backgroundColor:r.color},children:[s.jsx("span",{className:"set-node-mode-icon",children:r.icon}),s.jsx("span",{className:"set-node-mode-label",children:r.label})]}),s.jsxs("span",{className:"set-node-count-badge",children:[i," var",i!==1?"s":""]})]}),u.length>0&&s.jsxs("div",{className:"set-node-vars-preview",children:[u.map((d,p)=>s.jsxs("div",{className:"set-node-var-row",children:[s.jsxs("span",{className:"set-node-var-key",children:[d.isSecret&&s.jsx("span",{className:"set-node-secret-icon",title:"Secret",children:""}),d.key]}),s.jsx("span",{className:"set-node-var-separator",children:"="}),s.jsx("span",{className:"set-node-var-value",title:String(d.value),children:d.isSecret?"":MH(d.value,15)})]},p)),i>2&&s.jsxs("div",{className:"set-node-more",children:["+",i-2," more"]})]}),s.jsxs("div",{className:"set-node-indicators",children:[a>0&&s.jsxs("span",{className:"set-node-indicator",title:`${a} secret variable${a!==1?"s":""}`,children:[" ",a]}),c&&s.jsxs("span",{className:"set-node-indicator set-node-env-indicator",title:"Loading from .env",children:[" .env",t.envVars?.prefix&&s.jsxs("span",{className:"set-node-env-prefix",children:["(",t.envVars.prefix,"*)"]})]})]})]})})}),DH={jsonpath:"JSONPath",jmespath:"JMESPath",template:"Template",javascript:"JavaScript"},qH={jsonpath:"",jmespath:"",template:"",javascript:""},FH={pick:"Pick",omit:"Omit",rename:"Rename",flatten:"Flatten",sort:"Sort",unique:"Unique"},zH=E.memo(function({data:t,selected:n}){const r=DH[t.transformType]||t.transformType,i=qH[t.transformType]||"",c=(t.operations?.length||0)>0,u=!!t.typeCoercion?.targetType,d=()=>!t.operations||t.operations.length===0?null:t.operations.length===1?FH[t.operations[0].type]||t.operations[0].type:`${t.operations.length} operations`,p=()=>{if(!t.expression)return null;const f=30;return t.expression.length<=f?t.expression:t.expression.substring(0,f)+"..."};return s.jsxs(un,{type:"transform",label:t.name||"Transform",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:[s.jsxs("div",{className:"transform-node-type",children:[s.jsx("span",{className:"transform-node-type-icon",children:i}),s.jsx("span",{className:"transform-node-type-label",children:r})]}),c&&s.jsxs("div",{className:"transform-node-operations",children:[s.jsx("span",{className:"transform-node-operations-icon",children:""}),s.jsx("span",{className:"transform-node-operations-text",children:d()})]}),!c&&t.expression&&s.jsx("div",{className:"transform-node-expression",children:s.jsx("code",{className:"transform-node-expression-code",children:p()})}),u&&s.jsxs("div",{className:"transform-node-coercion",children:[s.jsx("span",{className:"transform-node-coercion-icon",children:""}),s.jsx("span",{className:"transform-node-coercion-type",children:t.typeCoercion.targetType})]})]})}),BH={eq:"=",neq:"",gt:">",lt:"<",gte:"",lte:"",contains:"",startsWith:"^",endsWith:"$",matches:"~",in:"",empty:"",exists:""};function $H(e){const t=BH[e.operator]||e.operator,n=e.field.length>12?e.field.slice(0,10)+"":e.field;if(e.operator==="empty"||e.operator==="exists")return`${n} ${t}`;const r=e.value!==void 0?String(e.value).slice(0,8):"";return`${n} ${t} ${r}`}const HH=E.memo(function({data:t,selected:n}){const r=t.conditions||[],i=r.length,a=!!t.defaultBranch,c=i+(a?1:0),u=t.expressionMode?.enabled,d=[...r.map(p=>p.outputPort),...a?[t.defaultBranch]:[]];return s.jsx(un,{type:"switch",label:t.name||"Switch",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",outputPorts:Math.max(1,c),outputPortIds:d.length>0?d:void 0,children:s.jsxs("div",{className:"switch-node-content",children:[s.jsxs("div",{className:"switch-node-header-row",children:[s.jsxs("span",{className:`switch-node-mode-badge ${t.evaluationMode}`,children:[s.jsx("span",{className:"switch-node-mode-icon",children:t.evaluationMode==="first_match"?"1":""}),s.jsx("span",{className:"switch-node-mode-label",children:t.evaluationMode==="first_match"?"First Match":"All Match"})]}),s.jsxs("span",{className:"switch-node-count-badge",children:[i," branch",i!==1?"es":""]})]}),u&&s.jsxs("div",{className:"switch-node-expression-mode",children:[s.jsx("span",{className:"switch-node-expression-icon",children:""}),s.jsx("span",{className:"switch-node-expression-label",children:"Expression Mode"})]}),!u&&i>0&&s.jsxs("div",{className:"switch-branches",children:[r.slice(0,3).map((p,f)=>s.jsxs("div",{className:"branch-indicator",children:[s.jsx("span",{className:"branch-indicator-name",children:p.name||`Branch ${f+1}`}),s.jsx("span",{className:"branch-indicator-preview",children:$H(p)}),s.jsxs("span",{className:"branch-indicator-port",children:[" ",p.outputPort]})]},p.id||f)),i>3&&s.jsxs("div",{className:"branch-indicator branch-indicator-more",children:["+",i-3," more branch",i-3!==1?"es":""]})]}),u&&t.expressionMode?.expression&&s.jsx("div",{className:"switch-node-expression-preview",children:s.jsx("code",{className:"switch-node-expression-code",children:t.expressionMode.expression.length>30?t.expressionMode.expression.slice(0,28)+"":t.expressionMode.expression})}),a&&s.jsxs("div",{className:"branch-indicator branch-indicator-default",children:[s.jsx("span",{className:"branch-indicator-name",children:"Default"}),s.jsxs("span",{className:"branch-indicator-port",children:[" ",t.defaultBranch]})]}),i===0&&!u&&s.jsx("div",{className:"switch-node-empty",children:"No conditions defined"})]})})}),w1={forEach:{label:"For Each",icon:"",description:"Iterate over array items"},while:{label:"While",icon:"",description:"Loop while condition is true"},times:{label:"Times",icon:"",description:"Repeat N times"}};function VH(e){switch(e.loopType){case"forEach":if(e.forEach?.sourceArray){const t=e.forEach.sourceArray;return t.length>25?t.slice(0,23)+"":t}return null;case"while":if(e.while?.condition){const t=e.while.condition;return t.length>25?t.slice(0,23)+"":t}return null;case"times":if(e.times?.count!==void 0){const t=e.times.count;return typeof t=="number"?`${t}`:`${t}`}return null;default:return null}}function UH(e){if(e.loopType!=="forEach"||!e.forEach)return null;const t=e.forEach.itemVar||"item",n=e.forEach.indexVar||"index";return`${t}, ${n}`}const WH=E.memo(function({data:t,selected:n}){const r=w1[t.loopType]||w1.forEach,i=VH(t),a=UH(t),c=t.parallel?.enabled,u=t.results?.collect;return s.jsx(un,{type:"loop",label:t.name||"Loop",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"loop-node-content",children:[s.jsxs("div",{className:"loop-node-header-row",children:[s.jsxs("span",{className:"loop-node-type-badge",children:[s.jsx("span",{className:"loop-node-type-icon",children:r.icon}),s.jsx("span",{className:"loop-node-type-label",children:r.label})]}),c&&s.jsxs("span",{className:"loop-node-parallel-badge",title:"Parallel execution enabled",children:[s.jsx("span",{className:"loop-node-parallel-icon",children:""}),s.jsx("span",{className:"loop-node-parallel-label",children:"Parallel"})]})]}),i&&s.jsxs("div",{className:"loop-node-preview",children:[t.loopType==="forEach"&&s.jsx("span",{className:"loop-node-preview-label",children:"Source:"}),t.loopType==="while"&&s.jsx("span",{className:"loop-node-preview-label",children:"While:"}),t.loopType==="times"&&s.jsx("span",{className:"loop-node-preview-label",children:"Count:"}),s.jsx("code",{className:"loop-node-preview-value",children:i})]}),a&&s.jsxs("div",{className:"loop-node-vars",children:[s.jsx("span",{className:"loop-node-vars-label",children:"Variables:"}),s.jsx("code",{className:"loop-node-vars-value",children:a})]}),s.jsxs("div",{className:"loop-node-indicators",children:[c&&t.parallel?.batchSize&&s.jsxs("span",{className:"loop-node-indicator",title:"Batch size",children:[s.jsx("span",{className:"loop-node-indicator-icon",children:""}),s.jsxs("span",{className:"loop-node-indicator-text",children:["Batch: ",t.parallel.batchSize]})]}),c&&t.parallel?.delayBetween&&s.jsxs("span",{className:"loop-node-indicator",title:"Delay between batches",children:[s.jsx("span",{className:"loop-node-indicator-icon",children:""}),s.jsxs("span",{className:"loop-node-indicator-text",children:[t.parallel.delayBetween,"ms"]})]}),u&&s.jsxs("span",{className:"loop-node-collect-badge",title:"Collecting results",children:[s.jsx("span",{className:"loop-node-collect-icon",children:""}),s.jsx("span",{className:"loop-node-collect-label",children:t.results?.aggregationKey?` ${t.results.aggregationKey}`:"Collect"})]})]}),!i&&t.loopType==="forEach"&&s.jsx("div",{className:"loop-node-empty",children:"Configure source array"}),!i&&t.loopType==="while"&&s.jsx("div",{className:"loop-node-empty",children:"Configure condition"}),!i&&t.loopType==="times"&&s.jsx("div",{className:"loop-node-empty",children:"Configure iteration count"})]})})}),KH={wait_all:{label:"Wait All",icon:"",description:"Wait for all branches"},wait_any:{label:"Wait Any",icon:"",description:"Continue on first completion"},wait_n:{label:"Wait N",icon:"",description:"Wait for N branches"}},GH={array:{label:"Array",icon:""},object:{label:"Object",icon:""},first:{label:"First",icon:"1"},last:{label:"Last",icon:""}},YH=E.memo(function({data:t,selected:n}){const r=KH[t.mode],i=GH[t.combineStrategy],a=Math.max(2,t.branchKeys?.length||2),c=t.branchKeys&&t.branchKeys.length>0?t.branchKeys:Array.from({length:a},(u,d)=>`input-${d}`);return s.jsx(un,{type:"merge",label:t.name||"Merge",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",inputPorts:a,inputPortIds:c,children:s.jsxs("div",{className:"merge-node-content",children:[s.jsxs("div",{className:"merge-node-header-row",children:[s.jsxs("span",{className:`merge-node-mode-badge ${t.mode}`,children:[s.jsx("span",{className:"merge-node-mode-icon",children:r.icon}),s.jsx("span",{className:"merge-node-mode-label",children:t.mode==="wait_n"?`Wait ${t.waitCount||"N"}`:r.label})]}),s.jsxs("span",{className:"merge-node-count-badge",children:[a," input",a!==1?"s":""]})]}),s.jsxs("div",{className:"merge-node-strategy",children:[s.jsx("span",{className:"merge-node-strategy-icon",children:i.icon}),s.jsx("span",{className:"merge-node-strategy-label",children:i.label})]}),t.combineStrategy==="object"&&t.branchKeys&&t.branchKeys.length>0&&s.jsxs("div",{className:"merge-node-branches",children:[t.branchKeys.slice(0,3).map((u,d)=>s.jsxs("div",{className:"merge-branch-indicator",children:[s.jsxs("span",{className:"merge-branch-index",children:["#",d+1]}),s.jsx("span",{className:"merge-branch-key",children:u})]},d)),t.branchKeys.length>3&&s.jsxs("div",{className:"merge-branch-indicator merge-branch-more",children:["+",t.branchKeys.length-3," more"]})]}),t.timeout?.enabled&&s.jsxs("div",{className:"merge-node-timeout",children:[s.jsx("span",{className:"merge-node-timeout-icon",children:""}),s.jsxs("span",{className:"merge-node-timeout-label",children:[t.timeout.ms,"ms (",t.timeout.behavior,")"]})]})]})})}),XH={fixed:"Fixed",until:"Until",webhook:"Webhook",condition:"Condition"},QH={fixed:"",until:"",webhook:"",condition:""},JH={ms:"ms",s:"sec",m:"min",h:"hr"};function ZH(e,t){return`${e}${JH[t]}`}function e6(e,t){const n=Math.round(e/1e3),r=Math.round(t/1e3);return`Poll: ${n}s, Max: ${r}s`}const t6=E.memo(function({data:t,selected:n}){const r=t.waitType||"fixed",i=XH[r],a=QH[r],u=(()=>{switch(r){case"fixed":return t.fixed?ZH(t.fixed.duration,t.fixed.unit):null;case"until":if(t.until?.timestamp){const d=t.until.timestamp;return d.length>16?d.substring(0,16)+"...":d}return null;case"webhook":if(t.webhook?.path){const d=t.webhook.path;return d.length>20?"..."+d.slice(-17):d}return null;case"condition":return t.condition?e6(t.condition.pollInterval,t.condition.maxWait):null;default:return null}})();return s.jsx(un,{type:"wait",label:t.name||"Wait",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"wait-node-content",children:[s.jsxs("div",{className:"wait-node-type",children:[s.jsx("span",{className:"wait-node-type-icon",children:a}),s.jsx("span",{className:"wait-node-type-badge",children:i})]}),u&&s.jsx("div",{className:"wait-node-preview",children:s.jsx("span",{className:"wait-node-preview-text",children:u})})]})})}),_1={javascript:{label:"JS",icon:"",color:"#F7DF1E"},typescript:{label:"TS",icon:"",color:"#3178C6"}};function n6(e,t=30){if(!e)return"";const n=e.split(`
`).filter(i=>i.trim());if(n.length===0)return"";const r=n[0].trim();return r.length<=t?r:r.substring(0,t-3)+"..."}function r6(e){return e?e.split(`
`).filter(t=>t.trim()).length:0}function i6(e){return!e.networkAccess&&!e.fileSystemAccess?"strict":e.networkAccess&&e.fileSystemAccess?"open":"relaxed"}function o6(e){switch(i6(e)){case"strict":return{icon:"",label:"Strict",className:"code-sandbox-strict"};case"relaxed":return{icon:"",label:"Relaxed",className:"code-sandbox-relaxed"};case"open":return{icon:"",label:"Open",className:"code-sandbox-open"}}}const s6=E.memo(function({data:t,selected:n}){const r=_1[t.language]||_1.javascript,i=o6(t.sandbox),a=r6(t.code),c=n6(t.code),u=t.sandbox.memoryLimit>0||t.sandbox.timeLimit>0;return s.jsx(un,{type:"code",label:t.name||"Code",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"code-node-content",children:[s.jsxs("div",{className:"code-node-header-row",children:[s.jsxs("span",{className:"code-node-language-badge",style:{backgroundColor:r.color},title:`Language: ${t.language}`,children:[s.jsx("span",{className:"code-node-language-icon",children:r.icon}),s.jsx("span",{className:"code-node-language-label",children:r.label})]}),s.jsxs("span",{className:`code-node-sandbox-badge ${i.className}`,title:`Sandbox: ${i.label}`,children:[s.jsx("span",{className:"code-node-sandbox-icon",children:i.icon}),s.jsx("span",{className:"code-node-sandbox-label",children:i.label})]}),a>0&&s.jsxs("span",{className:"code-node-lines-badge",title:`${a} lines of code`,children:[a," ",a===1?"line":"lines"]})]}),c&&s.jsx("div",{className:"code-node-preview",children:s.jsx("code",{className:"code-node-preview-code",children:c})}),u&&s.jsxs("div",{className:"code-node-limits",children:[t.sandbox.memoryLimit>0&&s.jsxs("span",{className:"code-node-limit-badge",title:`Memory limit: ${t.sandbox.memoryLimit}MB`,children:[" ",t.sandbox.memoryLimit,"MB"]}),t.sandbox.timeLimit>0&&s.jsxs("span",{className:"code-node-limit-badge",title:`Time limit: ${t.sandbox.timeLimit}ms`,children:[" ",t.sandbox.timeLimit,"ms"]})]}),s.jsxs("div",{className:"code-node-access",children:[t.sandbox.networkAccess&&s.jsx("span",{className:"code-node-access-badge code-node-access-network",title:"Network access enabled",children:""}),t.sandbox.fileSystemAccess&&s.jsx("span",{className:"code-node-access-badge code-node-access-fs",title:"File system access enabled",children:""})]})]})})}),a6={postgresql:"#336791",mysql:"#4479A1",sqlite:"#003B57",mongodb:"#47A248",redis:"#DC382D"},l6={postgresql:"",mysql:"",sqlite:"",mongodb:"",redis:""},c6={postgresql:"PostgreSQL",mysql:"MySQL",sqlite:"SQLite",mongodb:"MongoDB",redis:"Redis"},u6={query:"SELECT",insert:"INSERT",update:"UPDATE",delete:"DELETE",upsert:"UPSERT"},d6={find:"find()",findOne:"findOne()",insert:"insert()",update:"update()",delete:"delete()"},p6={get:"GET",set:"SET",del:"DEL",hget:"HGET",hset:"HSET",lpush:"LPUSH",rpop:"RPOP"};function f6(e){return e.dbType==="mongodb"&&e.mongodb?.operation?d6[e.mongodb.operation]:e.dbType==="redis"&&e.redis?.operation?p6[e.redis.operation]:e.sql?.operation?u6[e.sql.operation]:null}function h6(e){if(e.dbType==="mongodb"&&e.mongodb?.collection)return e.mongodb.collection;if(e.dbType==="redis"&&e.redis?.key)return m6(e.redis.key,20);if(e.sql?.query){const t=e.sql.query.match(/(?:FROM|INTO|UPDATE)\s+[`"']?(\w+)[`"']?/i);if(t)return t[1]}return null}function m6(e,t){return e.length<=t?e:e.substring(0,t-3)+"..."}function g6(e){return!!(e.connection?.connectionString||e.connection?.credentialRef)}const y6=E.memo(function({data:t,selected:n}){const r=a6[t.dbType]||"#14B8A6",i=l6[t.dbType]||"",a=c6[t.dbType]||t.dbType,c=f6(t),u=h6(t),d=g6(t);return s.jsx(un,{type:"database",label:t.name||"Database",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"database-node-content",children:[s.jsxs("div",{className:"database-type-row",children:[s.jsxs("span",{className:"database-type-badge",style:{backgroundColor:r},title:a,children:[s.jsx("span",{className:"database-type-icon",children:i}),s.jsx("span",{className:"database-type-label",children:a})]}),s.jsx("span",{className:`database-connection-status ${d?"connected":"disconnected"}`,title:d?"Connection configured":"No connection configured",children:d?"":""})]}),c&&s.jsxs("div",{className:"database-operation-row",children:[s.jsx("span",{className:"database-operation-badge",children:c}),u&&s.jsxs("span",{className:"database-target",title:u,children:[" ",u]})]}),s.jsxs("div",{className:"database-indicators",children:[t.connection?.poolSize&&t.connection.poolSize>1&&s.jsxs("span",{className:"database-pool-badge",title:`Pool size: ${t.connection.poolSize}`,children:[" ",t.connection.poolSize]}),t.connection?.credentialRef&&s.jsx("span",{className:"database-cred-badge",title:`Using credentials from: ${t.connection.credentialRef}`,children:" ref"}),t.sql?.params&&Object.keys(t.sql.params).length>0&&s.jsxs("span",{className:"database-params-badge",title:"Has query parameters",children:[" ",Object.keys(t.sql.params).length," params"]}),t.mongodb?.filter&&Object.keys(t.mongodb.filter).length>0&&s.jsx("span",{className:"database-filter-badge",title:"Has filter",children:" filter"}),t.redis?.ttl&&s.jsxs("span",{className:"database-ttl-badge",title:`TTL: ${t.redis.ttl}s`,children:[" ",t.redis.ttl,"s"]})]})]})})}),k1={monitor:{icon:"",label:"Monitor",color:"#3B82F6"},send:{icon:"",label:"Send",color:"#10B981"}};function Fv(e,t=25){if(!e||e.length<=t)return e;const n=e.indexOf("@");if(n>0&&n<t-5){const r=e.substring(n),i=e.substring(0,n),a=t-r.length-3;if(a>3)return i.substring(0,a)+"..."+r}return e.substring(0,t-3)+"..."}function v6(e){if(!e)return"No recipients";const t=e.split(",").map(n=>n.trim()).filter(Boolean);return t.length===0?"No recipients":t.length===1?Fv(t[0]):`${Fv(t[0])} +${t.length-1}`}const x6=E.memo(function({data:t,selected:n}){const r=k1[t.mode]||k1.monitor,i=t.attachments&&t.attachments.length>0,a=t.mode==="monitor"?t.imap?.host:t.smtp?.host,c=t.mode==="monitor"?t.imap?.port:t.smtp?.port;return s.jsx(un,{type:"email",label:t.name||"Email",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"email-node-content",children:[s.jsxs("div",{className:"email-mode-row",children:[s.jsxs("span",{className:"email-mode-badge",style:{backgroundColor:r.color},children:[s.jsx("span",{className:"email-mode-icon",children:r.icon}),s.jsx("span",{className:"email-mode-label",children:r.label})]}),i&&s.jsxs("span",{className:"email-attachment-badge",title:`${t.attachments.length} attachment(s)`,children:[" ",t.attachments.length]})]}),a&&s.jsxs("div",{className:"email-connection-preview",title:`${a}:${c}`,children:[s.jsx("span",{className:"email-connection-icon",children:""}),s.jsxs("span",{className:"email-connection-host",children:[a,c&&s.jsxs("span",{className:"email-connection-port",children:[":",c]})]})]}),t.mode==="monitor"&&s.jsxs("div",{className:"email-monitor-info",children:[t.imap?.folder&&s.jsxs("span",{className:"email-folder-badge",title:`Folder: ${t.imap.folder}`,children:[" ",t.imap.folder]}),t.filters?.unreadOnly&&s.jsx("span",{className:"email-filter-badge",title:"Unread only",children:" Unread"}),t.filters?.from&&s.jsxs("span",{className:"email-filter-badge",title:`From: ${t.filters.from}`,children:[" ",Fv(t.filters.from,15)]})]}),t.mode==="send"&&s.jsxs("div",{className:"email-send-info",children:[t.recipients?.to&&s.jsxs("div",{className:"email-recipients-preview",title:t.recipients.to,children:[s.jsx("span",{className:"email-recipients-icon",children:""}),s.jsx("span",{className:"email-recipients-text",children:v6(t.recipients.to)})]}),t.content?.subject&&s.jsx("div",{className:"email-subject-preview",title:t.content.subject,children:s.jsx("span",{className:"email-subject-text",children:t.content.subject.length>30?t.content.subject.substring(0,27)+"...":t.content.subject})})]}),s.jsxs("div",{className:"email-indicators",children:[t.imap?.secure||t.smtp?.secure?s.jsx("span",{className:"email-secure-badge",title:"SSL/TLS enabled",children:" Secure"}):null,t.content?.bodyType==="html"&&s.jsx("span",{className:"email-html-badge",title:"HTML email",children:"HTML"})]})]})})}),S1={slack:{icon:"",label:"Slack",color:"#4A154B"},discord:{icon:"",label:"Discord",color:"#5865F2"},teams:{icon:"",label:"Teams",color:"#6264A7"},webhook:{icon:"",label:"Webhook",color:"#6B7280"}},b6={plain:"",markdown:"",blocks:""};function Dc(e,t=50){return!e||e.length<=t?e:e.substring(0,t-3)+"..."}function w6(e){if(!e)return"";try{return e.includes("{{")?"{{...}}":new URL(e).hostname}catch{return Dc(e,25)}}function _6(e){if(!e)return 0;const t=e.match(/\{\{[^}]+\}\}/g);return t?t.length:0}const k6=E.memo(function({data:t,selected:n}){const r=S1[t.channel]||S1.webhook,i=b6[t.message?.format||"plain"],a=_6(t.message?.text||""),c=t.message?.blocks&&t.message.blocks.length>0,u=w6(t.webhookUrl||"");return s.jsx(un,{type:"notification",label:t.name||"Notification",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"notification-node-content",children:[s.jsxs("div",{className:"notification-channel-row",children:[s.jsxs("span",{className:"notification-channel-badge",style:{backgroundColor:r.color},children:[s.jsx("span",{className:"notification-channel-icon",children:r.icon}),s.jsx("span",{className:"notification-channel-label",children:r.label})]}),t.message?.format&&t.message.format!=="plain"&&s.jsxs("span",{className:"notification-format-badge",title:`Format: ${t.message.format}`,children:[i," ",t.message.format]})]}),u&&s.jsxs("div",{className:"notification-webhook-preview",title:t.webhookUrl,children:[s.jsx("span",{className:"notification-webhook-icon",children:""}),s.jsx("span",{className:"notification-webhook-domain",children:u}),s.jsx("span",{className:"notification-webhook-masked",children:""})]}),t.message?.text&&s.jsxs("div",{className:"notification-message-preview",children:[s.jsx("span",{className:"notification-message-text",children:Dc(t.message.text,40)}),a>0&&s.jsxs("span",{className:"notification-vars-badge",title:`${a} variable(s)`,children:["{{",a,"}}"]})]}),c&&s.jsxs("div",{className:"notification-blocks-indicator",children:[s.jsx("span",{className:"notification-blocks-icon",children:""}),s.jsxs("span",{className:"notification-blocks-text",children:[t.message.blocks.length," block(s)"]})]}),s.jsxs("div",{className:"notification-indicators",children:[t.username&&s.jsxs("span",{className:"notification-indicator",title:`Username: ${t.username}`,children:[" ",Dc(t.username,12)]}),t.iconUrl&&s.jsx("span",{className:"notification-indicator",title:"Custom icon",children:" Icon"}),t.targetChannel&&s.jsxs("span",{className:"notification-indicator",title:`Channel: ${t.targetChannel}`,children:["#",Dc(t.targetChannel,10)]})]})]})})});function N1(e){return e<1e3?`${e}ms`:e<6e4?`${Math.round(e/1e3)}s`:e<36e5?`${Math.round(e/6e4)}m`:`${Math.round(e/36e5)}h`}function S6(e,t=35){if(!e||e.length<=t)return e;try{const n=new URL(e),r=n.hostname,i=n.pathname;if(r.length+5<t){const a=t-r.length-3;return i.length>a?`${r}${i.substring(0,a)}...`:`${r}${i}`}return r.length>t?r.substring(0,t-3)+"...":r}catch{return e.substring(0,t-3)+"..."}}const N6=E.memo(function({data:t,selected:n}){const r=t.filters&&(t.filters.keywords&&t.filters.keywords.length>0||t.filters.author||t.filters.dateFrom||t.filters.dateTo||t.filters.categories&&t.filters.categories.length>0),i=t.seenTracking?.enabled;return s.jsx(un,{type:"rss",label:t.name||"RSS/Feed",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"rss-node-content",children:[t.feedUrl&&s.jsxs("div",{className:"rss-url-preview",title:t.feedUrl,children:[s.jsx("span",{className:"rss-url-icon",children:""}),s.jsx("span",{className:"rss-url-text",children:S6(t.feedUrl)})]}),s.jsxs("div",{className:"rss-settings-row",children:[s.jsxs("span",{className:"rss-poll-badge",title:`Poll every ${N1(t.pollInterval)}`,children:[" ",N1(t.pollInterval)]}),t.maxEntries&&s.jsxs("span",{className:"rss-max-entries-badge",title:`Max ${t.maxEntries} entries`,children:[" ",t.maxEntries]}),i&&s.jsx("span",{className:"rss-tracking-badge",title:"Tracking seen items",children:""})]}),r&&s.jsxs("div",{className:"rss-filters-row",children:[t.filters?.keywords&&t.filters.keywords.length>0&&s.jsxs("span",{className:"rss-filter-badge",title:`Keywords: ${t.filters.keywords.join(", ")}`,children:[" ",t.filters.keywords.length," keyword",t.filters.keywords.length>1?"s":""]}),t.filters?.author&&s.jsxs("span",{className:"rss-filter-badge",title:`Author: ${t.filters.author}`,children:[" ",t.filters.author.length>10?t.filters.author.substring(0,10)+"...":t.filters.author]}),(t.filters?.dateFrom||t.filters?.dateTo)&&s.jsx("span",{className:"rss-filter-badge",title:"Date filter active",children:" Date"}),t.filters?.categories&&t.filters.categories.length>0&&s.jsxs("span",{className:"rss-filter-badge",title:`Categories: ${t.filters.categories.join(", ")}`,children:[" ",t.filters.categories.length]})]}),s.jsxs("div",{className:"rss-options-row",children:[t.includeContent&&s.jsx("span",{className:"rss-option-badge",title:"Including full content",children:" Full"}),t.parseMedia&&s.jsx("span",{className:"rss-option-badge",title:"Parsing media/enclosures",children:" Media"})]})]})})}),j1={read:{icon:"",label:"Read",color:"#3B82F6"},write:{icon:"",label:"Write",color:"#10B981"},delete:{icon:"",label:"Delete",color:"#EF4444"},list:{icon:"",label:"List",color:"#8B5CF6"}},j6={s3:{icon:"",label:"S3"},gcs:{icon:"",label:"GCS"},azure:{icon:"",label:"Azure"}};function E6(e,t=35){if(!e||e.length<=t)return e;const n=e.lastIndexOf("/"),r=e.lastIndexOf("\\"),i=Math.max(n,r);if(i>0){const a=e.substring(i+1),c=e.substring(0,i);if(a.length<t-5){const u=t-a.length-4;if(u>3)return c.substring(0,u)+".../"+a}}return e.substring(0,t-3)+"..."}function C6(e){if(e.cloud)return`${e.cloud.bucket}/${e.cloud.key}`;if(e.local)return e.local.path;if(e.list)return e.list.path}const T6=E.memo(function({data:t,selected:n}){const r=j1[t.operation]||j1.read,i=C6(t),a=!!t.cloud,c=t.cloud?j6[t.cloud.provider]:null;return s.jsx(un,{type:"file",label:t.name||"File",isActive:t.isActive,isSelected:n,status:t.isActive?"running":"idle",children:s.jsxs("div",{className:"file-node-content",children:[s.jsxs("div",{className:"file-operation-row",children:[s.jsxs("span",{className:"file-operation-badge",style:{backgroundColor:r.color},children:[s.jsx("span",{className:"file-operation-icon",children:r.icon}),s.jsx("span",{className:"file-operation-label",children:r.label})]}),a&&c&&s.jsxs("span",{className:"file-cloud-badge",title:`Cloud: ${c.label}`,children:[c.icon," ",c.label]}),!a&&i&&s.jsx("span",{className:"file-local-badge",title:"Local file system",children:" Local"})]}),i&&s.jsxs("div",{className:"file-path-preview",title:i,children:[s.jsx("span",{className:"file-path-icon",children:""}),s.jsx("span",{className:"file-path-text",children:E6(i)})]}),t.operation==="read"&&t.parse&&s.jsxs("div",{className:"file-format-row",children:[s.jsxs("span",{className:"file-format-badge",title:`Format: ${t.parse.format.toUpperCase()}`,children:[A6(t.parse.format)," ",t.parse.format.toUpperCase()]}),t.parse.format==="csv"&&t.parse.csvOptions?.hasHeader&&s.jsx("span",{className:"file-option-badge",title:"Has header row",children:" Headers"})]}),t.operation==="write"&&t.write&&s.jsxs("div",{className:"file-write-row",children:[t.write.append&&s.jsx("span",{className:"file-option-badge",title:"Append mode",children:" Append"}),t.write.createDirs&&s.jsx("span",{className:"file-option-badge",title:"Create directories",children:" Create dirs"})]}),t.operation==="list"&&t.list&&s.jsxs("div",{className:"file-list-row",children:[t.list.recursive&&s.jsx("span",{className:"file-option-badge",title:"Recursive listing",children:" Recursive"}),t.list.pattern&&s.jsxs("span",{className:"file-option-badge",title:`Pattern: ${t.list.pattern}`,children:[" ",t.list.pattern.length>10?t.list.pattern.substring(0,10)+"...":t.list.pattern]})]}),a&&t.cloud&&s.jsxs("div",{className:"file-cloud-row",children:[t.cloud.presignedUrl&&s.jsx("span",{className:"file-option-badge",title:"Generate presigned URL",children:" Presigned"}),t.cloud.region&&s.jsxs("span",{className:"file-region-badge",title:`Region: ${t.cloud.region}`,children:[" ",t.cloud.region]})]})]})})});function A6(e){switch(e){case"json":return"";case"csv":return"";case"xml":return"";case"text":return"";case"binary":return"";default:return""}}const P6={action_trigger:AH,action_http:OH,action_set:LH,action_transform:zH,action_switch:HH,action_loop:WH,action_merge:YH,action_wait:t6,action_code:s6,action_database:y6,action_email:x6,action_notification:k6,action_rss:N6,action_file:T6},I6={llm:l2,sequential:c2,loop:u2,parallel:d2,router:p2,start:f2,end:h2,...P6},y2=E.memo(function({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:c,targetPosition:u,data:d,selected:p}){const[f]=Gc({sourceX:n,sourceY:r,sourcePosition:c,targetX:i,targetY:a,targetPosition:u}),m=d,g=m?.animated||!1,v=m?.isExecutionPath||!1,w=m?.animationSpeed||1,b=E.useMemo(()=>`${.5/w}s`,[w]),{strokeColor:k,strokeWidth:_,strokeDasharray:N}=E.useMemo(()=>g?{strokeColor:"#ef4444",strokeWidth:3,strokeDasharray:"8 4"}:v?{strokeColor:"#22c55e",strokeWidth:2.5,strokeDasharray:"none"}:p?{strokeColor:"#3b82f6",strokeWidth:2.5,strokeDasharray:"none"}:{strokeColor:"#6b7280",strokeWidth:2,strokeDasharray:"none"},[g,v,p]);return s.jsxs(s.Fragment,{children:[s.jsx("path",{id:t,d:f,fill:"none",stroke:k,strokeWidth:_,strokeDasharray:N,strokeLinecap:"round",className:"react-flow__edge-path",style:{animation:g?`dashFlow ${b} linear infinite`:"none",transition:"stroke 0.2s ease, stroke-width 0.2s ease"}}),s.jsx("path",{d:f,fill:"none",stroke:"transparent",strokeWidth:20,className:"react-flow__edge-interaction"}),g&&s.jsx("path",{d:f,fill:"none",stroke:k,strokeWidth:_+4,strokeDasharray:N,strokeLinecap:"round",style:{animation:`dashFlow ${b} linear infinite`,opacity:.3,filter:"blur(4px)"}}),s.jsx("style",{children:`
        @keyframes dashFlow {
          0% {
            stroke-dashoffset: 0;
          }
          100% {
            stroke-dashoffset: -12;
          }
        }
      `})]})});y2.displayName="AnimatedEdge";const v2=E.memo(function({id:t,sourceX:n,sourceY:r,targetX:i,targetY:a,sourcePosition:c,targetPosition:u,data:d,selected:p}){const[f,m]=E.useState(!1),[g,v,w]=ix({sourceX:n,sourceY:r,sourcePosition:c,targetX:i,targetY:a,targetPosition:u}),b=d,k=b?.animated||!1,_=b?.showOverlay&&b?.stateKeys&&b.stateKeys.length>0,N=b?.stateKeys||[],S=b?.highlightedKey,A=b?.onKeyHover,P=S&&N.includes(S),T=E.useCallback(V=>{m(!0),A?.(V)},[A]),C=E.useCallback(()=>{m(!1),A?.(null)},[A]),z=()=>k?"#ef4444":P?"#0F8A8A":p?"#3b82f6":"#6b7280",F=()=>k||P?3:p?2.5:2;return s.jsxs(s.Fragment,{children:[s.jsx("path",{id:t,d:g,fill:"none",stroke:z(),strokeWidth:F(),strokeDasharray:k?"8 4":"none",style:{animation:k?"dashFlow 0.5s linear infinite":"none",transition:"stroke 0.2s ease, stroke-width 0.2s ease"},className:"react-flow__edge-path"}),s.jsx("path",{d:g,fill:"none",stroke:"transparent",strokeWidth:20,className:"react-flow__edge-interaction"}),_&&s.jsx(n4,{children:s.jsx("div",{className:"data-flow-label",style:{position:"absolute",transform:`translate(-50%, -50%) translate(${v}px, ${w}px)`,pointerEvents:"all",zIndex:f?10:1},onMouseEnter:()=>T(N[0]),onMouseLeave:C,children:s.jsx("div",{className:`
                data-flow-badge
                ${f||P?"data-flow-badge-highlighted":""}
              `,children:N.map((V,L)=>s.jsxs("span",{className:"data-flow-key",onMouseEnter:()=>T(V),children:[V,L<N.length-1&&s.jsx("span",{className:"data-flow-separator",children:", "})]},V))})})}),s.jsx("style",{children:`
        @keyframes dashFlow { 
          to { stroke-dashoffset: -12; } 
        }
        
        .data-flow-badge {
          display: inline-flex;
          align-items: center;
          gap: 2px;
          padding: 3px 8px;
          background: var(--accent-primary, #0F8A8A);
          color: white;
          border-radius: 12px;
          font-size: 11px;
          font-weight: 500;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
          white-space: nowrap;
          transition: all 0.2s ease;
          cursor: pointer;
        }
        
        .data-flow-badge:hover,
        .data-flow-badge-highlighted {
          background: var(--accent-primary, #0F8A8A);
          transform: scale(1.05);
          box-shadow: 0 4px 8px rgba(15, 138, 138, 0.4);
        }
        
        .data-flow-key {
          font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
        }
        
        .data-flow-separator {
          color: rgba(255, 255, 255, 0.7);
        }
        
        /* Dark theme adjustments */
        :root[data-theme="dark"] .data-flow-badge {
          background: var(--accent-primary, #4fd1c5);
          color: #1a1a2e;
        }
        
        :root[data-theme="dark"] .data-flow-badge:hover,
        :root[data-theme="dark"] .data-flow-badge-highlighted {
          box-shadow: 0 4px 8px rgba(79, 209, 197, 0.4);
        }
        
        :root[data-theme="dark"] .data-flow-separator {
          color: rgba(26, 26, 46, 0.7);
        }
      `})]})});v2.displayName="DataFlowEdge";const R6={animated:y2,dataflow:v2},O6=[{type:"llm",label:"LLM Agent",color:"#3182CE"},{type:"sequential",label:"Sequential Agent",color:"#805AD5"},{type:"loop",label:"Loop Agent",color:"#D69E2E"},{type:"parallel",label:"Parallel Agent",color:"#38A169"},{type:"router",label:"Router Agent",color:"#DD6B20"}];function M6({onDragStart:e,onCreate:t}){return s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Agents"}),s.jsx("div",{className:"space-y-1",children:O6.map(({type:n,label:r,color:i})=>s.jsxs("div",{draggable:!0,onDragStart:a=>e(a,n),onClick:()=>t(n),className:"p-1.5 rounded text-xs cursor-grab hover:opacity-80 text-white font-medium",style:{backgroundColor:i},children:[" ",r]},n))})]})}const Jc=[{type:"function",label:"Function Tool",icon:"",configurable:!0},{type:"mcp",label:"MCP Tool",icon:"",configurable:!0},{type:"browser",label:"Browser Tool",icon:"",configurable:!0},{type:"exit_loop",label:"Exit Loop",icon:"",configurable:!0},{type:"google_search",label:"Google Search",icon:"",configurable:!0},{type:"load_artifact",label:"Load Artifact",icon:"",configurable:!0}];function L6({selectedNodeId:e,agentTools:t,onAdd:n,onRemove:r}){const i=(a,c)=>{a.dataTransfer.setData("text/plain",`tool:${c}`),a.dataTransfer.effectAllowed="copy"};return s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Tools"}),s.jsx("div",{className:"space-y-1",children:Jc.map(({type:a,label:c,icon:u})=>{const d=a==="function"||a==="mcp",p=d?t.some(m=>m.startsWith(a)):t.includes(a),f=d?t.filter(m=>m.startsWith(a)).length:0;return s.jsxs("div",{draggable:!0,onDragStart:m=>i(m,a),className:`p-1.5 rounded text-xs cursor-grab flex items-center gap-2 border ${e?"":"opacity-50"}`,style:{backgroundColor:p?"#38A169":"var(--bg-secondary)",color:p?"white":"var(--text-primary)",borderColor:"var(--border-default)"},onClick:()=>{e&&(d||!p?n(a):r(a))},children:[s.jsx("span",{children:u}),s.jsx("span",{className:"text-xs",children:c}),d&&f>0&&s.jsx("span",{className:"ml-auto text-xs bg-blue-600 text-white px-1 rounded",children:f}),!d&&p&&s.jsx("span",{className:"ml-auto text-xs",children:""})]},a)})})]})}function Ex({value:e,onChange:t,compact:n=!1}){const[r,i]=Rt.useState(()=>H4(e)),[a,c]=Rt.useState(!1),[u,d]=Rt.useState(""),p=Rt.useRef(null),f=bn.find(b=>b.id===r)||bn[0],m=f.models.find(b=>b.id===e);Rt.useEffect(()=>{function b(k){p.current&&!p.current.contains(k.target)&&c(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const g=f.models.filter(b=>b.name.toLowerCase().includes(u.toLowerCase())||b.description.toLowerCase().includes(u.toLowerCase())),v=b=>{i(b);const k=bn.find(_=>_.id===b);k&&k.models.length>0&&t(k.models[0].id)},w=b=>{t(b.id),c(!1),d("")};return n?s.jsx(q6,{value:e,provider:f,providers:bn,onProviderChange:v,onModelChange:t}):s.jsxs("div",{className:"space-y-2",ref:p,children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Provider"}),s.jsx("select",{className:"w-full px-3 py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},value:r,onChange:b=>v(b.target.value),children:bn.map(b=>s.jsxs("option",{value:b.id,children:[b.icon," ",b.name]},b.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-muted)"},children:"Model"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>c(!a),className:"w-full px-3 py-2 rounded text-sm text-left flex items-center justify-between",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[s.jsx("span",{className:"truncate",children:m?.name||e||"Select model..."}),m&&s.jsx("span",{className:"text-xs px-1 rounded",style:{backgroundColor:fA(m.tier),color:"white"},children:m.tier})]}),s.jsx("span",{style:{color:"var(--text-muted)"},children:a?"":""})]}),a&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 rounded shadow-lg max-h-80 overflow-hidden",style:{backgroundColor:"var(--surface-panel)",border:"1px solid var(--border-default)"},children:[s.jsx("div",{className:"p-2",style:{borderBottom:"1px solid var(--border-default)"},children:s.jsx("input",{type:"text",placeholder:"Search models...",value:u,onChange:b=>d(b.target.value),className:"w-full px-2 py-1 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},autoFocus:!0})}),s.jsxs("div",{className:"overflow-y-auto max-h-60",children:[g.map(b=>s.jsx(D6,{model:b,isSelected:b.id===e,onClick:()=>w(b)},b.id)),g.length===0&&s.jsx("div",{className:"p-3 text-center text-sm",style:{color:"var(--text-muted)"},children:"No models found"})]}),s.jsxs("div",{className:"p-2 text-xs",style:{borderTop:"1px solid var(--border-default)",color:"var(--text-muted)",backgroundColor:"var(--bg-secondary)"},children:[s.jsx("span",{children:"Requires: "}),s.jsx("code",{style:{color:"var(--accent-primary)"},children:f.envVar}),f.envVarAlt&&s.jsxs("span",{children:[" or ",s.jsx("code",{style:{color:"var(--accent-primary)"},children:f.envVarAlt})]})]})]})]})]}),m&&s.jsxs("div",{className:"text-xs p-2 rounded",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-secondary)"},children:[s.jsx("div",{className:"mb-1",children:m.description}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{title:"Context window",children:[" ",hA(m.contextWindow)]}),m.capabilities.map(b=>s.jsx("span",{title:b,children:pA(b)},b))]})]})]})}function D6({model:e,isSelected:t,onClick:n}){return s.jsxs("button",{onClick:n,className:"w-full px-3 py-2 text-left hover:opacity-90 transition-colors",style:{backgroundColor:t?"var(--accent-primary)":"transparent",color:t?"white":"var(--text-primary)"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-sm",children:e.name}),s.jsx("span",{className:"text-xs px-1 rounded",style:{backgroundColor:t?"rgba(255,255,255,0.2)":fA(e.tier),color:"white"},children:e.tier})]}),s.jsx("div",{className:"text-xs mt-0.5",style:{color:t?"rgba(255,255,255,0.8)":"var(--text-muted)"},children:e.description}),s.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs",style:{color:t?"rgba(255,255,255,0.7)":"var(--text-muted)"},children:[s.jsxs("span",{children:[" ",hA(e.contextWindow)]}),e.capabilities.slice(0,4).map(r=>s.jsx("span",{children:pA(r)},r)),e.capabilities.length>4&&s.jsxs("span",{children:["+",e.capabilities.length-4]})]})]})}function q6({value:e,provider:t,providers:n,onProviderChange:r,onModelChange:i}){return s.jsxs("div",{className:"flex gap-1",children:[s.jsx("select",{className:"px-1 py-1 rounded text-xs",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-default)",color:"var(--text-primary)",width:"70px"},value:t.id,onChange:a=>r(a.target.value),children:n.map(a=>s.jsxs("option",{value:a.id,children:[a.icon," ",a.id]},a.id))}),s.jsx("select",{className:"flex-1 px-1 py-1 rounded text-xs",style:{backgroundColor:"var(--bg-primary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},value:e,onChange:a=>i(a.target.value),children:t.models.map(a=>s.jsx("option",{value:a.id,children:a.name},a.id))})]})}function F6({nodeId:e,agent:t,agents:n,toolConfigs:r,onUpdate:i,onRename:a,onAddSubAgent:c,onClose:u,onSelectTool:d,onRemoveTool:p}){const f=t.type==="sequential"||t.type==="loop"||t.type==="parallel",[m,g]=Rt.useState(!1),[v,w]=Rt.useState(e),b=()=>{const N=v.trim().replace(/\s+/g,"_");N&&N!==e&&!n[N]?a(e,N):w(e),g(!1)},k=(N,S)=>{const A=n[N];A&&i(N,{tools:A.tools.filter(P=>P!==S)})},_=(N,S)=>{const A=n[N];if(A){let P=S;if(S==="function"||S==="mcp"){const T=A.tools.filter(C=>C.startsWith(S));P=`${S}_${T.length+1}`}else if(A.tools.includes(S))return;i(N,{tools:[...A.tools,P]})}};return s.jsxs("div",{className:"w-72 border-l p-4 overflow-y-auto",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m?s.jsx("input",{autoFocus:!0,className:"flex-1 px-2 py-1 border border-blue-500 rounded text-sm font-semibold",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)"},value:v,onChange:N=>w(N.target.value),onBlur:b,onKeyDown:N=>N.key==="Enter"&&b()}):s.jsxs("h3",{className:"font-semibold cursor-pointer hover:text-blue-500",style:{color:"var(--text-primary)"},onClick:()=>g(!0),title:"Click to rename",children:[e," ",s.jsx("span",{style:{color:"var(--text-muted)"},className:"text-xs",children:""})]}),s.jsx("button",{onClick:u,className:"px-2 py-1 rounded text-xs ml-2",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Close"})]}),f?s.jsx(z6,{nodeId:e,agent:t,agents:n,onUpdate:i,onAddSubAgent:c,onSelectTool:d,onRemoveTool:k,onAddTool:_}):t.type==="router"?s.jsx(B6,{nodeId:e,agent:t,onUpdate:i}):s.jsx($6,{nodeId:e,agent:t,toolConfigs:r,onUpdate:i,onSelectTool:d,onRemoveTool:p})]})}function z6({nodeId:e,agent:t,agents:n,onUpdate:r,onAddSubAgent:i,onSelectTool:a,onRemoveTool:c,onAddTool:u}){const[d,p]=Rt.useState(null);return s.jsxs("div",{children:[t.type==="loop"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4 p-2 rounded text-xs",style:{backgroundColor:"rgba(128, 90, 213, 0.15)",border:"1px solid var(--node-loop)",color:"var(--text-primary)"},children:[s.jsx("div",{className:"font-semibold mb-1",style:{color:"var(--node-loop)"},children:" Loop Agent Tips"}),s.jsx("p",{style:{color:"var(--text-secondary)"},children:"Sub-agents run repeatedly until max iterations or exit_loop tool is called."})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Max Iterations"}),s.jsx("input",{type:"number",min:"1",className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.max_iterations||3,onChange:f=>r(e,{max_iterations:parseInt(f.target.value)||3})})]})]}),s.jsxs("label",{className:"block text-sm mb-2",style:{color:"var(--text-secondary)"},children:["Sub-Agents ",t.type==="parallel"?"(run concurrently)":"(in order)"]}),(t.sub_agents||[]).map((f,m)=>{const g=n[f];if(!g)return null;const v=d===f;return s.jsxs("div",{className:"mb-2 rounded overflow-hidden",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)"},children:[s.jsxs("div",{className:"p-2 cursor-pointer flex items-center justify-between",style:{color:"var(--text-primary)"},onClick:()=>p(v?null:f),children:[s.jsxs("span",{className:"text-sm font-medium",children:[t.type==="parallel"?"":`${m+1}.`," ",f]}),s.jsx("span",{style:{color:"var(--text-muted)"},className:"text-xs",children:v?"":""})]}),v&&s.jsxs("div",{className:"p-2 pt-0",style:{borderTop:"1px solid var(--border-default)"},children:[s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Model"}),s.jsx("div",{className:"mb-2",children:s.jsx(Ex,{value:g.model||"",onChange:w=>r(f,{model:w}),compact:!0})}),s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Instruction"}),s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-xs h-16 mb-2",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:g.instruction,onChange:w=>r(f,{instruction:w.target.value})}),s.jsx("label",{className:"block text-xs mb-1",style:{color:"var(--text-secondary)"},children:"Tools"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:(g.tools||[]).map(w=>{const b=w.startsWith("function")?"function":w.startsWith("mcp")?"mcp":w,k=Jc.find(N=>N.type===b),_=`${f}_${w}`;return s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded flex items-center gap-1 cursor-pointer",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:()=>a(_),children:[k?.icon," ",w," ",s.jsx("button",{onClick:N=>{N.stopPropagation(),c(f,w)},style:{color:"var(--accent-error)"},children:""})]},w)})}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Jc.filter(w=>!g.tools?.includes(w.type)||w.type==="function"||w.type==="mcp").map(w=>s.jsxs("button",{onClick:()=>u(f,w.type),className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:["+ ",w.icon]},w.type))})]})]},f)}),s.jsx("button",{onClick:i,className:"w-full py-2 rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"+ Add Sub-Agent"})]})}function B6({nodeId:e,agent:t,onUpdate:n}){return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Model"}),s.jsx("div",{className:"mb-3",children:s.jsx(Ex,{value:t.model||"",onChange:r=>n(e,{model:r})})}),s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Routing Instruction"}),s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-sm h-20 mb-3",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.instruction,onChange:r=>n(e,{instruction:r.target.value})}),s.jsx("label",{className:"block text-sm mb-2",style:{color:"var(--text-secondary)"},children:"Routes"}),(t.routes||[]).map((r,i)=>s.jsxs("div",{className:"flex gap-1 mb-2 items-center",children:[s.jsx("input",{className:"flex-1 px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"condition",value:r.condition,onChange:a=>{const c=[...t.routes||[]];c[i]={...r,condition:a.target.value},n(e,{routes:c})}}),s.jsx("span",{style:{color:"var(--text-muted)"},children:""}),s.jsx("input",{className:"flex-1 px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"target",value:r.target,onChange:a=>{const c=[...t.routes||[]];c[i]={...r,target:a.target.value},n(e,{routes:c})}}),s.jsx("button",{style:{color:"var(--accent-error)"},className:"text-sm",onClick:()=>n(e,{routes:(t.routes||[]).filter((a,c)=>c!==i)}),children:""})]},i)),s.jsx("button",{className:"w-full py-1 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:()=>n(e,{routes:[...t.routes||[],{condition:"",target:""}]}),children:"+ Add Route"})]})}function $6({nodeId:e,agent:t,toolConfigs:n,onUpdate:r,onSelectTool:i,onRemoveTool:a}){const[c,u]=Rt.useState(!1);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs(E1,{title:"Basic",children:[s.jsx(Yi,{label:"Model",children:s.jsx(Ex,{value:t.model||"",onChange:d=>r(e,{model:d})})}),s.jsx(Yi,{label:"Instruction",children:s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-sm h-24",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.instruction,onChange:d=>r(e,{instruction:d.target.value}),placeholder:"You are a helpful assistant..."})}),s.jsx(Yi,{label:"Description",hint:"Optional agent description",children:s.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.description||"",onChange:d=>r(e,{description:d.target.value}),placeholder:"What this agent does"})})]}),t.tools.length>0&&s.jsx(E1,{title:"Tools",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:t.tools.map(d=>{const p=d.startsWith("function")?"function":d.startsWith("mcp")?"mcp":d,f=Jc.find(w=>w.type===p),m=`${e}_${d}`,g=n[m],v=g&&"name"in g&&g.name?g.name:f?.label||d;return s.jsxs("span",{className:"text-xs px-2 py-1 rounded flex items-center gap-1 cursor-pointer hover:opacity-80",style:{backgroundColor:g?"#38A169":"var(--bg-secondary)",color:g?"white":"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:()=>i(m),children:[f?.icon," ",v," ",s.jsx("span",{className:"text-blue-400",children:""}),s.jsx("button",{onClick:w=>{w.stopPropagation(),a(d)},className:"ml-1 text-red-500 hover:text-red-400",children:""})]},d)})})}),s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>u(!c),className:"w-full text-left text-xs flex items-center gap-1",style:{color:"var(--text-secondary)"},children:[s.jsx("span",{children:c?"":""})," Advanced Settings"]}),c&&s.jsxs("div",{className:"mt-2 space-y-3 pl-2 border-l",style:{borderColor:"var(--border-default)"},children:[s.jsx(Yi,{label:"Global Instruction",hint:"System-level instruction prepended to all prompts",children:s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-xs h-16",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.global_instruction||"",onChange:d=>r(e,{global_instruction:d.target.value}),placeholder:"Always respond in JSON format..."})}),s.jsx(Yi,{label:"Output Key",hint:"Custom state key for agent output",children:s.jsx("input",{className:"w-full px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.output_key||"",onChange:d=>r(e,{output_key:d.target.value}),placeholder:"response (default)"})}),s.jsx(Yi,{label:"Output Schema",hint:"JSON Schema for structured output",children:s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-xs h-20 font-mono",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.output_schema||"",onChange:d=>r(e,{output_schema:d.target.value}),placeholder:'{"type": "object", "properties": {...}}'})}),s.jsx(Yi,{label:"Include Contents",children:s.jsxs("select",{className:"w-full px-2 py-1 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:t.include_contents||"all",onChange:d=>r(e,{include_contents:d.target.value}),children:[s.jsx("option",{value:"all",children:"All history"}),s.jsx("option",{value:"last",children:"Last message only"}),s.jsx("option",{value:"none",children:"None"})]})})]})]})]})}function E1({title:e,children:t}){return s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:"var(--text-muted)"},children:e}),s.jsx("div",{className:"space-y-2",children:t})]})}function Yi({label:e,hint:t,children:n}){return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:[e,t&&s.jsxs("span",{className:"text-xs ml-1",style:{color:"var(--text-muted)"},children:["(",t,")"]})]}),n]})}const H6=[{name:"Calculator",icon:"",template:{name:"calculator",description:"Evaluate mathematical expressions with support for +, -, *, /, ^, %, sqrt, sin, cos, tan, log, abs, round, floor, ceil",parameters:[{name:"expression",param_type:"string",description:'Math expression to evaluate (e.g., "2 + 3 * 4", "sqrt(16)", "sin(3.14159/2)")',required:!0}],code:`fn eval_expr(expr: &str) -> Result<f64, String> {
    let expr = expr.trim().to_lowercase();
    
    // Handle functions first
    for func in ["sqrt", "sin", "cos", "tan", "log", "abs", "round", "floor", "ceil"] {
        if expr.starts_with(func) && expr.contains('(') {
            let start = expr.find('(').unwrap();
            let end = expr.rfind(')').ok_or("Missing closing parenthesis")?;
            let inner = eval_expr(&expr[start+1..end])?;
            let result = match func {
                "sqrt" => inner.sqrt(),
                "sin" => inner.sin(),
                "cos" => inner.cos(),
                "tan" => inner.tan(),
                "log" => inner.ln(),
                "abs" => inner.abs(),
                "round" => inner.round(),
                "floor" => inner.floor(),
                "ceil" => inner.ceil(),
                _ => return Err(format!("Unknown function: {}", func)),
            };
            return Ok(result);
        }
    }
    
    // Handle parentheses
    if let (Some(start), Some(end)) = (expr.find('('), expr.rfind(')')) {
        let before = &expr[..start];
        let inner = eval_expr(&expr[start+1..end])?;
        let after = &expr[end+1..];
        return eval_expr(&format!("{}{}{}", before, inner, after));
    }
    
    // Handle operators by precedence (low to high)
    for op in ['+', '-'] {
        if let Some(pos) = expr.rfind(|c| c == op && !expr[..expr.find(c).unwrap_or(0)].ends_with('e')) {
            if pos > 0 {
                let left = eval_expr(&expr[..pos])?;
                let right = eval_expr(&expr[pos+1..])?;
                return Ok(if op == '+' { left + right } else { left - right });
            }
        }
    }
    for op in ['*', '/', '%'] {
        if let Some(pos) = expr.rfind(op) {
            let left = eval_expr(&expr[..pos])?;
            let right = eval_expr(&expr[pos+1..])?;
            return Ok(match op {
                '*' => left * right,
                '/' => if right != 0.0 { left / right } else { return Err("Division by zero".into()) },
                '%' => left % right,
                _ => unreachable!(),
            });
        }
    }
    if let Some(pos) = expr.rfind('^') {
        let left = eval_expr(&expr[..pos])?;
        let right = eval_expr(&expr[pos+1..])?;
        return Ok(left.powf(right));
    }
    
    // Parse number or constant
    match expr.trim() {
        "pi" => Ok(std::f64::consts::PI),
        "e" => Ok(std::f64::consts::E),
        s => s.parse::<f64>().map_err(|_| format!("Invalid number: {}", s)),
    }
}

match eval_expr(expression) {
    Ok(result) => Ok(json!({ "result": result, "expression": expression })),
    Err(e) => Err(AdkError::Tool(e))
}`}},{name:"HTTP Request",icon:"",template:{name:"http_request",description:"Make HTTP GET/POST requests to URLs",parameters:[{name:"url",param_type:"string",description:"URL to request",required:!0},{name:"method",param_type:"string",description:"HTTP method (GET or POST)",required:!1},{name:"body",param_type:"string",description:"Request body for POST",required:!1}],code:`let client = reqwest::Client::new();
let method = if method.is_empty() { "GET" } else { method };
let response = match method.to_uppercase().as_str() {
    "GET" => client.get(url).send().await,
    "POST" => client.post(url).body(body.to_string()).send().await,
    _ => return Err(AdkError::Tool(format!("Unsupported method: {}", method))),
};
match response {
    Ok(resp) => {
        let status = resp.status().as_u16();
        let text = resp.text().await.unwrap_or_default();
        Ok(json!({ "status": status, "body": text }))
    }
    Err(e) => Err(AdkError::Tool(format!("Request failed: {}", e)))
}`}},{name:"Read File",icon:"",template:{name:"read_file",description:"Read contents of a file",parameters:[{name:"path",param_type:"string",description:"File path to read",required:!0}],code:`match std::fs::read_to_string(path) {
    Ok(content) => Ok(json!({ "content": content })),
    Err(e) => Err(AdkError::Tool(format!("Failed to read file: {}", e)))
}`}},{name:"Write File",icon:"",template:{name:"write_file",description:"Write content to a file",parameters:[{name:"path",param_type:"string",description:"File path to write",required:!0},{name:"content",param_type:"string",description:"Content to write",required:!0}],code:`match std::fs::write(path, content) {
    Ok(_) => Ok(json!({ "status": "success", "path": path })),
    Err(e) => Err(AdkError::Tool(format!("Failed to write file: {}", e)))
}`}},{name:"JSON Parser",icon:"",template:{name:"parse_json",description:"Parse JSON string and extract a field",parameters:[{name:"json_str",param_type:"string",description:"JSON string to parse",required:!0},{name:"field",param_type:"string",description:"Field to extract (dot notation)",required:!1}],code:`let parsed: Value = serde_json::from_str(json_str)
    .map_err(|e| AdkError::Tool(format!("Invalid JSON: {}", e)))?;
if field.is_empty() {
    Ok(parsed)
} else {
    let value = field.split('.').fold(Some(&parsed), |acc, key| {
        acc.and_then(|v| v.get(key))
    });
    Ok(value.cloned().unwrap_or(Value::Null))
}`}},{name:"Shell Command",icon:"",template:{name:"run_command",description:"Execute a shell command",parameters:[{name:"command",param_type:"string",description:"Command to execute",required:!0},{name:"args",param_type:"string",description:"Space-separated arguments",required:!1}],code:`use std::process::Command;
let args_vec: Vec<&str> = if args.is_empty() { vec![] } else { args.split_whitespace().collect() };
match Command::new(command).args(&args_vec).output() {
    Ok(output) => Ok(json!({
        "stdout": String::from_utf8_lossy(&output.stdout),
        "stderr": String::from_utf8_lossy(&output.stderr),
        "exit_code": output.status.code()
    })),
    Err(e) => Err(AdkError::Tool(format!("Command failed: {}", e)))
}`}}],V6=[{name:"Time",icon:"",command:"uvx",args:["mcp-server-time"],desc:"Get current time and timezone info"},{name:"Fetch",icon:"",command:"uvx",args:["mcp-server-fetch"],desc:"Fetch and parse web pages"},{name:"Filesystem",icon:"",command:"npx",args:["-y","@modelcontextprotocol/server-filesystem","/tmp"],desc:"Read, write, and manage files"},{name:"GitHub",icon:"",command:"npx",args:["-y","@modelcontextprotocol/server-github"],desc:"GitHub repos, issues, PRs"},{name:"SQLite",icon:"",command:"uvx",args:["mcp-server-sqlite","--db-path","/tmp/data.db"],desc:"Query SQLite databases"},{name:"Memory",icon:"",command:"npx",args:["-y","@modelcontextprotocol/server-memory"],desc:"Persistent key-value store"},{name:"Brave Search",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-brave-search"],desc:"Web search via Brave"},{name:"Puppeteer",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-puppeteer"],desc:"Browser automation"},{name:"Slack",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-slack"],desc:"Slack messaging"},{name:"Google Drive",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-gdrive"],desc:"Google Drive files"},{name:"PostgreSQL",icon:"",command:"npx",args:["-y","@anthropic/mcp-server-postgres"],desc:"PostgreSQL queries"},{name:"Everything",icon:"",command:"npx",args:["-y","@modelcontextprotocol/server-everything"],desc:"Demo server with all features"}];function x2(e){const t=e.name||"my_function",n=e.parameters.map(i=>{const a=i.param_type==="number"?"as_f64().unwrap_or(0.0)":i.param_type==="boolean"?"as_bool().unwrap_or(false)":'as_str().unwrap_or("")';return`    let ${i.name} = args["${i.name}"].${a};`}).join(`
`),r=e.code||'Ok(json!({"status": "ok"}))';return`async fn ${t}_fn(_ctx: Arc<dyn ToolContext>, args: Value) -> Result<Value, AdkError> {
${n}
    ${r}
}`}function U6(e,t){const n=e.split(`
`),r=t.parameters.length+1,i=n.length-1;return r>=i?t.code||"":n.slice(r,i).map(a=>a.replace(/^    /,"")).join(`
`)}function W6({toolId:e,config:t,onUpdate:n,onClose:r,onOpenCodeEditor:i}){const a=e.includes("_mcp")?"mcp":e.includes("_function")?"function":e.includes("_browser")?"browser":e.includes("_exit_loop")?"exit_loop":e.includes("_google_search")?"google_search":"",u=t||(a==="mcp"?{type:"mcp",server_command:"",server_args:[],tool_filter:[]}:a==="function"?{type:"function",name:"",description:"",parameters:[]}:a==="browser"?{type:"browser",headless:!0,timeout_ms:3e4}:null),d=["exit_loop","google_search","load_artifact"].includes(a);return!u&&!d?null:s.jsxs("div",{className:"w-80 border-l p-4 overflow-y-auto",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"font-semibold",style:{color:"var(--text-primary)"},children:"Configure Tool"}),s.jsx("button",{onClick:r,className:"px-2 py-1 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Close"})]}),a==="mcp"&&s.jsx(K6,{config:u,onUpdate:n}),a==="function"&&s.jsx(G6,{config:u,onUpdate:n,onOpenCodeEditor:i}),a==="browser"&&s.jsx(Y6,{config:u,onUpdate:n}),d&&s.jsx(X6,{type:a})]})}function K6({config:e,onUpdate:t}){return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-2",style:{color:"var(--text-secondary)"},children:"Quick Templates"}),s.jsx("div",{className:"grid grid-cols-2 gap-1 mb-3",children:V6.map(n=>s.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},title:n.desc,onClick:()=>t({...e,name:n.name,server_command:n.command,server_args:n.args}),children:[s.jsx("span",{children:n.icon}),s.jsx("span",{className:"truncate",children:n.name})]},n.name))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Server Command"}),s.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"npx, uvx...",value:e.server_command,onChange:n=>t({...e,server_command:n.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Server Args (one per line)"}),s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-sm h-20",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:e.server_args.join(`
`),onChange:n=>t({...e,server_args:n.target.value.split(`
`).filter(Boolean)})})]})]})}function G6({config:e,onUpdate:t,onOpenCodeEditor:n}){const r=()=>t({...e,parameters:[...e.parameters,{name:"",param_type:"string",description:"",required:!1}]}),i=(c,u)=>{const d=[...e.parameters];d[c]={...d[c],...u},t({...e,parameters:d})},a=c=>t({...e,parameters:e.parameters.filter((u,d)=>d!==c)});return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Function Name"}),s.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"get_weather",value:e.name,onChange:c=>t({...e,name:c.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Description"}),s.jsx("textarea",{className:"w-full px-2 py-1 border rounded text-sm h-16",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:e.description,onChange:c=>t({...e,description:c.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Parameters"}),e.parameters.map((c,u)=>s.jsxs("div",{className:"flex gap-1 mb-1 items-center",children:[s.jsx("input",{className:"flex-1 px-1 py-0.5 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},placeholder:"name",value:c.name,onChange:d=>i(u,{name:d.target.value})}),s.jsxs("select",{className:"px-1 py-0.5 border rounded text-xs",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:c.param_type,onChange:d=>i(u,{param_type:d.target.value}),children:[s.jsx("option",{value:"string",children:"string"}),s.jsx("option",{value:"number",children:"number"}),s.jsx("option",{value:"boolean",children:"boolean"})]}),s.jsxs("label",{className:"text-xs flex items-center gap-1",style:{color:"var(--text-secondary)"},children:[s.jsx("input",{type:"checkbox",checked:c.required,onChange:d=>i(u,{required:d.target.checked})}),"req"]}),s.jsx("button",{style:{color:"var(--accent-error)"},className:"text-xs",onClick:()=>a(u),children:""})]},u)),s.jsx("button",{className:"w-full py-1 rounded text-xs mt-1",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:r,children:"+ Add Parameter"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("label",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Code (Rust)"}),s.jsx("button",{className:"text-xs",style:{color:"var(--accent-primary)"},onClick:n,children:" Edit"})]}),s.jsx("textarea",{className:"w-full px-2 py-2 border rounded text-xs font-mono h-32 cursor-pointer",style:{backgroundColor:"var(--bg-primary)",borderColor:"var(--border-default)",color:"var(--text-muted)"},value:x2(e),readOnly:!0,onClick:n})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-2",style:{color:"var(--text-secondary)"},children:"Templates"}),s.jsx("div",{className:"grid grid-cols-2 gap-1",children:H6.map(c=>s.jsxs("button",{className:"px-2 py-1 rounded text-xs flex items-center gap-1",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},onClick:()=>t({...e,...c.template}),children:[s.jsx("span",{children:c.icon}),s.jsx("span",{className:"truncate",children:c.name})]},c.name))})]})]})}function Y6({config:e,onUpdate:t}){return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-2 rounded text-xs",style:{backgroundColor:"rgba(234, 179, 8, 0.15)",border:"1px solid var(--accent-warning)",color:"var(--text-primary)"},children:[s.jsx("div",{className:"font-semibold mb-1",style:{color:"var(--accent-warning)"},children:" Requirements"}),s.jsx("p",{style:{color:"var(--text-secondary)"},children:"Chrome + ChromeDriver required"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"headless",checked:e.headless,onChange:n=>t({...e,headless:n.target.checked})}),s.jsx("label",{htmlFor:"headless",className:"text-sm",style:{color:"var(--text-primary)"},children:"Headless Mode"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Timeout (ms)"}),s.jsx("input",{type:"number",className:"w-full px-2 py-1 border rounded text-sm",style:{backgroundColor:"var(--bg-secondary)",borderColor:"var(--border-default)",color:"var(--text-primary)"},value:e.timeout_ms,onChange:n=>t({...e,timeout_ms:parseInt(n.target.value)||3e4})})]})]})}function X6({type:e}){const t={exit_loop:{title:"Exit Loop Tool",desc:"Allows agent to exit a loop when task is complete."},google_search:{title:"Google Search Tool",desc:"Web search via Google Grounding API."},load_artifact:{title:"Load Artifact Tool",desc:"Load artifacts from session store."}},{title:n,desc:r}=t[e]||{title:"Tool",desc:"No configuration needed."};return s.jsxs("div",{className:"p-2 rounded text-xs",style:{backgroundColor:"rgba(59, 130, 246, 0.15)",border:"1px solid var(--node-agent)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"font-semibold mb-1",style:{color:"var(--node-agent)"},children:[" ",n]}),s.jsx("p",{style:{color:"var(--text-secondary)"},children:r})]})}const Q6=E.memo(function({snapshot:t,previousSnapshot:n,snapshots:r=[],currentIndex:i=-1,onHistorySelect:a,onClose:c}){const u=E.useMemo(()=>!t||!n?new Set:rV(n.outputState,t.outputState),[t,n]),d=E.useMemo(()=>t?r.map((p,f)=>({snapshot:p,index:f})).filter(({snapshot:p})=>p.nodeId===t.nodeId):[],[r,t]);return t?s.jsxs("div",{className:"state-inspector",children:[s.jsx(C1,{onClose:c}),s.jsxs("div",{className:"state-inspector-content",children:[s.jsx(J6,{snapshot:t}),s.jsx(T1,{title:"Input State",data:t.inputState,changedKeys:new Set,emptyMessage:"No input state"}),s.jsx(T1,{title:"Output State",data:t.outputState,changedKeys:u,emptyMessage:"No output state"}),s.jsx(eV,{snapshot:t}),d.length>1&&s.jsx(tV,{history:d,currentIndex:i,onSelect:a})]})]}):s.jsxs("div",{className:"state-inspector",children:[s.jsx(C1,{onClose:c}),s.jsxs("div",{className:"state-inspector-empty",children:[s.jsx("span",{className:"state-inspector-empty-icon",children:""}),s.jsx("span",{className:"state-inspector-empty-text",children:"Run the workflow to inspect state at each node"})]})]})});function C1({onClose:e}){return s.jsxs("div",{className:"state-inspector-header",children:[s.jsxs("span",{className:"state-inspector-title",children:[s.jsx("span",{className:"state-inspector-title-icon",children:""}),"State Inspector"]}),e&&s.jsx("button",{className:"state-inspector-close",onClick:e,"aria-label":"Close state inspector",children:s.jsx(nV,{})})]})}function J6({snapshot:e}){const t=sV(e.nodeId);return s.jsxs("div",{className:"state-node-info",children:[s.jsx("span",{className:"state-node-icon",children:t}),s.jsxs("div",{className:"state-node-details",children:[s.jsx("div",{className:"state-node-name",title:e.nodeLabel||e.nodeId,children:e.nodeLabel||e.nodeId}),e.step!==void 0&&s.jsxs("div",{className:"state-node-step",children:["Step ",e.step]})]})]})}function T1({title:e,data:t,changedKeys:n,emptyMessage:r}){const i=Object.keys(t).length;return s.jsxs("div",{className:"state-section",children:[s.jsx("div",{className:"state-section-header",children:s.jsxs("span",{className:"state-section-title",children:[e,i>0&&s.jsxs("span",{className:"state-section-badge",children:[i," keys"]})]})}),s.jsx(Z6,{data:t,changedKeys:n,emptyMessage:r})]})}function Z6({data:e,changedKeys:t=new Set,emptyMessage:n="Empty"}){return Object.keys(e).length===0?s.jsx("div",{className:"json-viewer",children:s.jsx("span",{className:"json-viewer-empty",children:n})}):s.jsx("div",{className:"json-viewer",children:s.jsx(b2,{data:e,changedKeys:t,depth:0})})}function b2({data:e,changedKeys:t,depth:n,parentKey:r=""}){const[i,a]=E.useState({}),c=E.useCallback(d=>{a(p=>({...p,[d]:!p[d]}))},[]),u=Object.entries(e);return s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"json-bracket",children:"{"}),u.length>0&&s.jsx("div",{className:n>0?"json-nested":"",children:u.map(([d,p],f)=>{const m=r?`${r}.${d}`:d,g=t.has(d)||t.has(m),v=f===u.length-1,w=Zc(p)||Array.isArray(p),b=i[d];return s.jsxs("div",{children:[w?s.jsxs("span",{className:"json-collapsible",onClick:()=>c(d),children:[s.jsx("span",{className:"json-collapse-icon",children:b?"":""}),s.jsxs("span",{className:`json-key ${g?"changed":""}`,children:['"',d,'"']}),s.jsx("span",{className:"json-colon",children:": "}),b?s.jsx("span",{className:"json-collapsed-preview",children:Array.isArray(p)?`[${p.length} items]`:`{${Object.keys(p).length} keys}`}):null]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:`json-key ${g?"changed":""}`,children:['"',d,'"']}),s.jsx("span",{className:"json-colon",children:": "})]}),!b&&s.jsx("span",{className:g?"json-value changed":"",children:s.jsx(w2,{value:p,changedKeys:t,depth:n,parentKey:m})}),!v&&s.jsx("span",{className:"json-comma",children:","})]},d)})}),s.jsx("span",{className:"json-bracket",children:"}"})]})}function w2({value:e,changedKeys:t,depth:n,parentKey:r}){if(e===null)return s.jsx("span",{className:"json-null",children:"null"});if(e===void 0)return s.jsx("span",{className:"json-null",children:"undefined"});if(typeof e=="string"){const i=e.length>100?e.slice(0,100)+"...":e;return s.jsxs("span",{className:"json-string",children:['"',iV(i),'"']})}return typeof e=="number"?s.jsx("span",{className:"json-number",children:e}):typeof e=="boolean"?s.jsx("span",{className:"json-boolean",children:e.toString()}):Array.isArray(e)?e.length===0?s.jsx("span",{className:"json-bracket",children:"[]"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"json-bracket",children:"["}),s.jsx("div",{className:"json-nested",children:e.map((i,a)=>s.jsxs("div",{children:[s.jsx(w2,{value:i,changedKeys:t,depth:n+1,parentKey:`${r}[${a}]`}),a<e.length-1&&s.jsx("span",{className:"json-comma",children:","})]},a))}),s.jsx("span",{className:"json-bracket",children:"]"})]}):Zc(e)?s.jsx(b2,{data:e,changedKeys:t,depth:n+1,parentKey:r}):s.jsx("span",{className:"json-string",children:String(e)})}function eV({snapshot:e}){return s.jsxs("div",{className:"state-meta",children:[s.jsxs("div",{className:"state-meta-item",children:[s.jsx("span",{className:"state-meta-label",children:"Duration:"}),s.jsx("span",{className:"state-meta-value",children:_2(e.duration)})]}),s.jsxs("div",{className:"state-meta-item",children:[s.jsx("span",{className:"state-meta-label",children:"Status:"}),s.jsx("span",{className:`state-meta-value ${e.status}`,children:e.status==="success"?" Success":e.status==="error"?" Error":" Running"})]}),e.iteration!==void 0&&e.iteration>0&&s.jsxs("div",{className:"state-meta-item",children:[s.jsx("span",{className:"state-meta-label",children:"Iteration:"}),s.jsx("span",{className:"state-meta-value",children:e.iteration})]}),e.error&&s.jsxs("div",{className:"state-meta-item",style:{width:"100%"},children:[s.jsx("span",{className:"state-meta-label",children:"Error:"}),s.jsx("span",{className:"state-meta-value error",title:e.error,children:oV(e.error,50)})]})]})}function tV({history:e,currentIndex:t,onSelect:n}){return s.jsxs("div",{className:"state-history",children:[s.jsx("div",{className:"state-history-header",children:s.jsxs("span",{className:"state-history-title",children:["History (",e.length,")"]})}),s.jsx("div",{className:"state-history-list",children:e.map(({snapshot:r,index:i})=>s.jsxs("div",{className:`state-history-item ${i===t?"active":""}`,onClick:()=>n?.(i),role:"button",tabIndex:0,onKeyDown:a=>a.key==="Enter"&&n?.(i),children:[s.jsx("span",{className:"state-history-step",children:r.step!==void 0?`#${r.step}`:`@${i}`}),s.jsx("span",{className:"state-history-node",children:_2(r.duration)}),s.jsx("span",{className:`state-history-status ${r.status}`,children:r.status==="success"?"":r.status==="error"?"":""})]},`${r.nodeId}-${r.timestamp}`))})]})}function nV(){return s.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}function rV(e,t){const n=new Set;if(!e||!t)return n;for(const r of Object.keys(t))r in e&&zv(e[r],t[r])||n.add(r);for(const r of Object.keys(e))r in t||n.add(r);return n}function zv(e,t){if(e===t)return!0;if(e===null||t===null)return e===t;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length!==t.length?!1:e.every((n,r)=>zv(n,t[r]));if(Zc(e)&&Zc(t)){const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:n.every(i=>zv(e[i],t[i]))}return!1}function Zc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function iV(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")}function _2(e){if(e<1e3)return`${e}ms`;if(e<6e4)return`${(e/1e3).toFixed(1)}s`;const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return`${t}m ${n}s`}function oV(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}function sV(e){const t=e.toLowerCase();return t.startsWith("trigger")?"":t.startsWith("http")?"":t.startsWith("set")?"":t.startsWith("transform")?"":t.startsWith("switch")?"":t.startsWith("merge")?"":t.startsWith("wait")?"":t.startsWith("code")?"":t.startsWith("database")?"":t.includes("loop")?"":t.includes("parallel")?"":t.includes("sequential")?"":t.includes("router")?"":t==="start"?"":t==="end"?"":""}function A1(e){return e.type==="trigger"}function P1(e){return e.type==="http"}function I1(e){return e.type==="set"}function R1(e){return e.type==="transform"}function O1(e){return e.type==="switch"}function M1(e){return e.type==="loop"}function L1(e){return e.type==="merge"}function D1(e){return e.type==="wait"}function q1(e){return e.type==="code"}function F1(e){return e.type==="database"}function z1(e){return e.type==="email"}function Yo({title:e,defaultOpen:t=!1,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"standard-props-section",children:[s.jsxs("button",{className:"standard-props-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"standard-props-section-toggle",children:r?"":""}),s.jsx("span",{className:"standard-props-section-title",children:e})]}),r&&s.jsx("div",{className:"standard-props-section-content",children:n})]})}function Gt({label:e,hint:t,tooltip:n,children:r}){const i=s.jsxs("label",{className:"standard-props-label",children:[e,t&&s.jsxs("span",{className:"standard-props-hint",children:["(",t,")"]}),n&&s.jsx("span",{className:"standard-props-tooltip-icon",title:n,children:""})]});return s.jsxs("div",{className:"standard-props-field",children:[n?s.jsx(nl,{content:n,position:"right",delay:300,children:i}):i,r]})}function B1({value:e,options:t,onChange:n,labels:r}){return s.jsx("select",{className:"standard-props-select",value:e,onChange:i=>n(i.target.value),children:t.map(i=>s.jsx("option",{value:i,children:r?.[i]??i},i))})}function $p({value:e,onChange:t,min:n,max:r,step:i=1,placeholder:a}){return s.jsx("input",{type:"number",className:"standard-props-input",value:e,onChange:c=>t(parseInt(c.target.value,10)||0),min:n,max:r,step:i,placeholder:a})}function fi({value:e,onChange:t,placeholder:n,multiline:r=!1}){return r?s.jsx("textarea",{className:"standard-props-textarea",value:e,onChange:i=>t(i.target.value),placeholder:n,rows:3}):s.jsx("input",{type:"text",className:"standard-props-input",value:e,onChange:i=>t(i.target.value),placeholder:n})}function aV({value:e,onChange:t,label:n}){return s.jsxs("label",{className:"standard-props-toggle",children:[s.jsx("input",{type:"checkbox",checked:e,onChange:r=>t(r.target.checked)}),s.jsx("span",{className:"standard-props-toggle-slider"}),n&&s.jsx("span",{className:"standard-props-toggle-label",children:n})]})}function lV({value:e,onChange:t,keyPlaceholder:n="State key",valuePlaceholder:r="Node input"}){const i=Object.entries(e),a=()=>{t({...e,"":""})},c=p=>{const f={...e};delete f[p],t(f)},u=(p,f)=>{const m={};for(const[g,v]of Object.entries(e))g===p?m[f]=v:m[g]=v;t(m)},d=(p,f)=>{t({...e,[p]:f})};return s.jsxs("div",{className:"standard-props-kv-editor",children:[i.map(([p,f],m)=>s.jsxs("div",{className:"standard-props-kv-row",children:[s.jsx("input",{type:"text",className:"standard-props-kv-key",value:p,onChange:g=>u(p,g.target.value),placeholder:n}),s.jsx("span",{className:"standard-props-kv-arrow",children:""}),s.jsx("input",{type:"text",className:"standard-props-kv-value",value:f,onChange:g=>d(p,g.target.value),placeholder:r}),s.jsx("button",{type:"button",className:"standard-props-kv-remove",onClick:()=>c(p),title:"Remove mapping",children:""})]},m)),s.jsx("button",{type:"button",className:"standard-props-kv-add",onClick:a,children:"+ Add Mapping"})]})}const cV=["stop","continue","retry","fallback"],uV={stop:"Stop on Error",continue:"Continue on Error",retry:"Retry on Error",fallback:"Use Fallback Value"},dV=["none","error","info","debug"],pV={none:"None",error:"Error Only",info:"Info",debug:"Debug (Verbose)"};function Gn({properties:e,onChange:t,showIdentity:n=!1}){const r=E.useCallback(d=>{t({...e,errorHandling:{...e.errorHandling,...d}})},[e,t]),i=E.useCallback(d=>{t({...e,tracing:{...e.tracing,...d}})},[e,t]),a=E.useCallback(d=>{t({...e,callbacks:{...e.callbacks,...d}})},[e,t]),c=E.useCallback(d=>{t({...e,execution:{...e.execution,...d}})},[e,t]),u=E.useCallback(d=>{t({...e,mapping:{...e.mapping,...d}})},[e,t]);return s.jsxs("div",{className:"standard-properties-panel",children:[n&&s.jsxs(Yo,{title:"Identity",defaultOpen:!0,children:[s.jsx(Gt,{label:"Name",children:s.jsx(fi,{value:e.name,onChange:d=>t({...e,name:d}),placeholder:"Node name"})}),s.jsx(Gt,{label:"Description",hint:"optional",children:s.jsx(fi,{value:e.description||"",onChange:d=>t({...e,description:d||void 0}),placeholder:"What this node does",multiline:!0})})]}),s.jsxs(Yo,{title:"Error Handling",defaultOpen:!1,children:[s.jsx(Gt,{label:"Error Mode",tooltip:rn.errorHandling,children:s.jsx(B1,{value:e.errorHandling.mode,options:cV,labels:uV,onChange:d=>r({mode:d})})}),e.errorHandling.mode==="retry"&&s.jsxs(s.Fragment,{children:[s.jsx(Gt,{label:"Retry Count",hint:"1-10",children:s.jsx($p,{value:e.errorHandling.retryCount??3,onChange:d=>r({retryCount:d}),min:1,max:10})}),s.jsx(Gt,{label:"Retry Delay",hint:"ms",children:s.jsx($p,{value:e.errorHandling.retryDelay??1e3,onChange:d=>r({retryDelay:d}),min:0,step:100})})]}),e.errorHandling.mode==="fallback"&&s.jsx(Gt,{label:"Fallback Value",hint:"JSON",children:s.jsx(fi,{value:e.errorHandling.fallbackValue!==void 0?JSON.stringify(e.errorHandling.fallbackValue):"",onChange:d=>{try{const p=d?JSON.parse(d):void 0;r({fallbackValue:p})}catch{r({fallbackValue:d||void 0})}},placeholder:'{"default": "value"}',multiline:!0})})]}),s.jsxs(Yo,{title:"Tracing & Logging",defaultOpen:!1,children:[s.jsx(Gt,{label:"Enable Tracing",tooltip:rn.tracing,children:s.jsx(aV,{value:e.tracing.enabled,onChange:d=>i({enabled:d})})}),s.jsx(Gt,{label:"Log Level",children:s.jsx(B1,{value:e.tracing.logLevel,options:dV,labels:pV,onChange:d=>i({logLevel:d})})})]}),s.jsxs(Yo,{title:"Callbacks",defaultOpen:!1,children:[s.jsx(Gt,{label:"onStart",hint:"function name or code",tooltip:rn.callbacks,children:s.jsx(fi,{value:e.callbacks.onStart||"",onChange:d=>a({onStart:d||void 0}),placeholder:"handleStart"})}),s.jsx(Gt,{label:"onComplete",hint:"function name or code",children:s.jsx(fi,{value:e.callbacks.onComplete||"",onChange:d=>a({onComplete:d||void 0}),placeholder:"handleComplete"})}),s.jsx(Gt,{label:"onError",hint:"function name or code",children:s.jsx(fi,{value:e.callbacks.onError||"",onChange:d=>a({onError:d||void 0}),placeholder:"handleError"})})]}),s.jsxs(Yo,{title:"Execution Control",defaultOpen:!1,children:[s.jsx(Gt,{label:"Timeout",hint:"ms",tooltip:rn.executionControl,children:s.jsx($p,{value:e.execution.timeout,onChange:d=>c({timeout:d}),min:0,step:1e3})}),s.jsx(Gt,{label:"Skip Condition",hint:"expression",children:s.jsx(fi,{value:e.execution.condition||"",onChange:d=>c({condition:d||void 0}),placeholder:"state.shouldRun === true"})})]}),s.jsxs(Yo,{title:"Input/Output Mapping",defaultOpen:!0,children:[s.jsx(Gt,{label:"Input Mapping",hint:"state  node",tooltip:rn.inputOutputMapping,children:s.jsx(lV,{value:e.mapping.inputMapping||{},onChange:d=>u({inputMapping:d}),keyPlaceholder:"state.field",valuePlaceholder:"nodeInput"})}),s.jsx(Gt,{label:"Output Key",hint:"where to store result",children:s.jsx(fi,{value:e.mapping.outputKey,onChange:d=>u({outputKey:d}),placeholder:"result"})})]})]})}const fV=["manual","webhook","schedule","event"],hV={manual:"Manual Trigger",webhook:"Webhook",schedule:"Schedule (Cron)",event:"Event Source"},mV={manual:"Triggered manually by user action",webhook:"Triggered by HTTP request to a webhook URL",schedule:"Triggered on a schedule using cron expressions",event:"Triggered by external event sources"},gV=["GET","POST"],yV=["none","bearer","api_key"],vV={none:"No Authentication",bearer:"Bearer Token",api_key:"API Key"},xV=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Asia/Singapore","Australia/Sydney"];function Nc({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"trigger-panel-section",children:[s.jsxs("button",{className:"trigger-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"trigger-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"trigger-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"trigger-panel-section-content",children:n})]})}function or({label:e,hint:t,required:n,tooltip:r,children:i}){const a=s.jsxs("label",{className:"trigger-panel-label",children:[e,n&&s.jsx("span",{className:"trigger-panel-required",children:"*"}),t&&s.jsxs("span",{className:"trigger-panel-hint",children:["(",t,")"]}),r&&s.jsx("span",{className:"trigger-panel-tooltip-icon",title:r,children:""})]});return s.jsxs("div",{className:"trigger-panel-field",children:[r?s.jsx(nl,{content:r,position:"right",delay:300,children:a}):a,i]})}function bV({node:e,onChange:t}){const n=E.useCallback(u=>{const d={triggerType:u};u==="webhook"&&!e.webhook?d.webhook={path:"/api/webhook/trigger",method:"POST",auth:"none"}:u==="schedule"&&!e.schedule?d.schedule={cron:"0 * * * *",timezone:"UTC"}:u==="event"&&!e.event&&(d.event={source:"",eventType:""}),t({...e,...d})},[e,t]),r=E.useCallback(u=>{t({...e,webhook:{...e.webhook,...u}})},[e,t]),i=E.useCallback(u=>{t({...e,schedule:{...e.schedule,...u}})},[e,t]),a=E.useCallback(u=>{t({...e,event:{...e.event,...u}})},[e,t]),c=E.useCallback(u=>{t({...e,...u})},[e,t]);return s.jsxs("div",{className:"trigger-panel",children:[s.jsx(Nc,{title:"Trigger Type",defaultOpen:!0,children:s.jsx("div",{className:"trigger-type-selector",children:fV.map(u=>s.jsxs("button",{type:"button",className:`trigger-type-option ${e.triggerType===u?"selected":""}`,onClick:()=>n(u),children:[s.jsx("span",{className:"trigger-type-label",children:hV[u]}),s.jsx("span",{className:"trigger-type-description",children:mV[u]})]},u))})}),e.triggerType==="webhook"&&e.webhook&&s.jsxs(Nc,{title:"Webhook Configuration",defaultOpen:!0,children:[s.jsx(or,{label:"Webhook Path",required:!0,hint:"e.g., /api/webhook/my-flow",tooltip:rn.webhookPath,children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.webhook.path,onChange:u=>r({path:u.target.value}),placeholder:"/api/webhook/trigger"})}),s.jsx(or,{label:"HTTP Method",required:!0,tooltip:rn.webhookMethod,children:s.jsx("div",{className:"trigger-panel-button-group",children:gV.map(u=>s.jsx("button",{type:"button",className:`trigger-panel-button ${e.webhook?.method===u?"selected":""}`,onClick:()=>r({method:u}),children:u},u))})}),s.jsx(or,{label:"Authentication",tooltip:rn.webhookAuth,children:s.jsx("select",{className:"trigger-panel-select",value:e.webhook.auth,onChange:u=>r({auth:u.target.value}),children:yV.map(u=>s.jsx("option",{value:u,children:vV[u]},u))})}),e.webhook.auth==="bearer"&&s.jsx(or,{label:"Token Environment Variable",hint:"env var name",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.webhook.authConfig?.tokenEnvVar||"",onChange:u=>r({authConfig:{...e.webhook?.authConfig,tokenEnvVar:u.target.value}}),placeholder:"WEBHOOK_TOKEN"})}),e.webhook.auth==="api_key"&&s.jsxs(s.Fragment,{children:[s.jsx(or,{label:"Header Name",hint:"e.g., X-API-Key",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.webhook.authConfig?.headerName||"",onChange:u=>r({authConfig:{...e.webhook?.authConfig,headerName:u.target.value}}),placeholder:"X-API-Key"})}),s.jsx(or,{label:"API Key Environment Variable",hint:"env var name",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.webhook.authConfig?.tokenEnvVar||"",onChange:u=>r({authConfig:{...e.webhook?.authConfig,tokenEnvVar:u.target.value}}),placeholder:"API_KEY"})})]}),s.jsxs("div",{className:"trigger-panel-preview",children:[s.jsx("span",{className:"trigger-panel-preview-label",children:"Webhook URL:"}),s.jsxs("code",{className:"trigger-panel-preview-value",children:[e.webhook.method," ",e.webhook.path]})]})]}),e.triggerType==="schedule"&&e.schedule&&s.jsx(Nc,{title:"Schedule Configuration",defaultOpen:!0,children:s.jsx(wV,{schedule:e.schedule,onChange:i})}),e.triggerType==="event"&&e.event&&s.jsxs(Nc,{title:"Event Configuration",defaultOpen:!0,children:[s.jsx(or,{label:"Event Source",required:!0,hint:"identifier",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.event.source,onChange:u=>a({source:u.target.value}),placeholder:"my-event-source"})}),s.jsx(or,{label:"Event Type",hint:"filter by type",children:s.jsx("input",{type:"text",className:"trigger-panel-input",value:e.event.eventType,onChange:u=>a({eventType:u.target.value}),placeholder:"user.created"})})]}),e.triggerType==="manual"&&s.jsxs("div",{className:"trigger-panel-info",children:[s.jsx("span",{className:"trigger-panel-info-icon",children:""}),s.jsx("span",{className:"trigger-panel-info-text",children:"Manual triggers are started by clicking the Run button or using the API."})]}),s.jsx(Gn,{properties:e,onChange:c,showIdentity:!0})]})}function wV({schedule:e,onChange:t}){const[n,r]=E.useState(null),i=u=>{const d=u.trim().split(/\s+/);return d.length<5||d.length>6?(r("Cron expression must have 5 or 6 fields"),!1):(r(null),!0)},a=u=>{i(u),t({cron:u})},c=u=>{const d=u.trim().split(/\s+/);if(d.length<5)return"Invalid cron expression";const[p,f,m,g,v]=d;if(u==="* * * * *")return"Every minute";if(u==="0 * * * *")return"Every hour";if(u==="0 0 * * *")return"Every day at midnight";if(u==="0 0 * * 0")return"Every Sunday at midnight";if(u==="0 0 1 * *")return"First day of every month at midnight";const w=[];if(p==="*"?w.push("Every minute"):p.includes("/")?w.push(`Every ${p.split("/")[1]} minutes`):w.push(`At minute ${p}`),f!=="*"&&(f.includes("/")?w.push(`every ${f.split("/")[1]} hours`):w.push(`at ${f}:00`)),m!=="*"&&w.push(`on day ${m}`),g!=="*"&&w.push(`in month ${g}`),v!=="*"){const b=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=parseInt(v,10);!isNaN(k)&&k>=0&&k<=6&&w.push(`on ${b[k]}`)}return w.join(" ")||"Custom schedule"};return s.jsxs(s.Fragment,{children:[s.jsxs(or,{label:"Cron Expression",required:!0,hint:"minute hour day month weekday",tooltip:rn.cronExpression,children:[s.jsx("input",{type:"text",className:`trigger-panel-input trigger-panel-input-mono ${n?"error":""}`,value:e.cron,onChange:u=>a(u.target.value),placeholder:"0 * * * *"}),n&&s.jsx("span",{className:"trigger-panel-error",children:n})]}),s.jsxs("div",{className:"trigger-panel-presets",children:[s.jsx("span",{className:"trigger-panel-presets-label",children:"Presets:"}),s.jsxs("div",{className:"trigger-panel-presets-buttons",children:[s.jsx("button",{type:"button",onClick:()=>t({cron:"* * * * *"}),children:"Every minute"}),s.jsx("button",{type:"button",onClick:()=>t({cron:"0 * * * *"}),children:"Hourly"}),s.jsx("button",{type:"button",onClick:()=>t({cron:"0 0 * * *"}),children:"Daily"}),s.jsx("button",{type:"button",onClick:()=>t({cron:"0 0 * * 0"}),children:"Weekly"}),s.jsx("button",{type:"button",onClick:()=>t({cron:"0 0 1 * *"}),children:"Monthly"})]})]}),s.jsx(or,{label:"Timezone",tooltip:rn.timezone,children:s.jsx("select",{className:"trigger-panel-select",value:e.timezone,onChange:u=>t({timezone:u.target.value}),children:xV.map(u=>s.jsx("option",{value:u,children:u},u))})}),s.jsxs("div",{className:"trigger-panel-preview",children:[s.jsx("span",{className:"trigger-panel-preview-label",children:"Schedule:"}),s.jsx("span",{className:"trigger-panel-preview-value",children:c(e.cron)}),s.jsxs("span",{className:"trigger-panel-preview-tz",children:["(",e.timezone,")"]})]})]})}const _V=["GET","POST","PUT","PATCH","DELETE"],kV={GET:"Retrieve data",POST:"Create resource",PUT:"Replace resource",PATCH:"Update resource",DELETE:"Remove resource"},SV=["none","bearer","basic","api_key"],NV={none:"No Authentication",bearer:"Bearer Token",basic:"Basic Auth",api_key:"API Key"},jV=["none","json","form","raw"],EV={none:"No Body",json:"JSON",form:"Form Data",raw:"Raw Text"},CV=["json","text","binary"],TV={json:"JSON",text:"Plain Text",binary:"Binary"};function gs({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"http-panel-section",children:[s.jsxs("button",{className:"http-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"http-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"http-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"http-panel-section-content",children:n})]})}function It({label:e,hint:t,required:n,tooltip:r,children:i}){const a=s.jsxs("label",{className:"http-panel-label",children:[e,n&&s.jsx("span",{className:"http-panel-required",children:"*"}),t&&s.jsxs("span",{className:"http-panel-hint",children:["(",t,")"]}),r&&s.jsx("span",{className:"http-panel-tooltip-icon",title:r,children:""})]});return s.jsxs("div",{className:"http-panel-field",children:[r?s.jsx(nl,{content:r,position:"right",delay:300,children:a}):a,i]})}function AV({node:e,onChange:t}){const n=E.useCallback(f=>{t({...e,method:f})},[e,t]),r=E.useCallback(f=>{t({...e,url:f})},[e,t]),i=E.useCallback(f=>{t({...e,auth:{...e.auth,...f}})},[e,t]),a=E.useCallback(f=>{t({...e,headers:f})},[e,t]),c=E.useCallback(f=>{t({...e,body:{...e.body,...f}})},[e,t]),u=E.useCallback(f=>{t({...e,response:{...e.response,...f}})},[e,t]),d=E.useCallback(f=>{if(f===null){const{rateLimit:m,...g}=e;t(g)}else t({...e,rateLimit:{...e.rateLimit,...f}})},[e,t]),p=E.useCallback(f=>{t({...e,...f})},[e,t]);return s.jsxs("div",{className:"http-panel",children:[s.jsxs(gs,{title:"Request",defaultOpen:!0,children:[s.jsx(It,{label:"HTTP Method",required:!0,tooltip:rn.httpMethod,children:s.jsx("div",{className:"http-method-selector",children:_V.map(f=>s.jsx("button",{type:"button",className:`http-method-option ${e.method===f?"selected":""} http-method-${f.toLowerCase()}`,onClick:()=>n(f),title:kV[f],children:f},f))})}),s.jsxs(It,{label:"URL",required:!0,hint:"supports {{variable}} interpolation",tooltip:rn.httpUrl,children:[s.jsx("input",{type:"text",className:"http-panel-input http-panel-input-mono",value:e.url,onChange:f=>r(f.target.value),placeholder:"https://api.example.com/endpoint"}),e.url&&/\{\{[^}]+\}\}/.test(e.url)&&s.jsxs("div",{className:"http-panel-url-vars",children:[s.jsx("span",{className:"http-panel-url-vars-label",children:"Variables detected:"}),s.jsx("span",{className:"http-panel-url-vars-list",children:(e.url.match(/\{\{([^}]+)\}\}/g)||[]).map((f,m)=>s.jsx("code",{className:"http-panel-url-var",children:f},m))})]})]})]}),s.jsx(PV,{auth:e.auth,onChange:i}),s.jsx(IV,{headers:e.headers,onChange:a}),s.jsx(RV,{body:e.body,method:e.method,onChange:c}),s.jsx(OV,{response:e.response,onChange:u}),s.jsx(MV,{rateLimit:e.rateLimit,onChange:d}),s.jsx(Gn,{properties:e,onChange:p,showIdentity:!0})]})}function PV({auth:e,onChange:t}){return s.jsxs(gs,{title:"Authentication",defaultOpen:e.type!=="none",children:[s.jsx(It,{label:"Auth Type",tooltip:rn.httpAuth,children:s.jsx("select",{className:"http-panel-select",value:e.type,onChange:n=>t({type:n.target.value}),children:SV.map(n=>s.jsx("option",{value:n,children:NV[n]},n))})}),e.type==="bearer"&&s.jsx(It,{label:"Bearer Token",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"http-panel-input",value:e.bearer?.token||"",onChange:n=>t({bearer:{token:n.target.value}}),placeholder:"Enter token or {{TOKEN_VAR}}"})}),e.type==="basic"&&s.jsxs(s.Fragment,{children:[s.jsx(It,{label:"Username",required:!0,children:s.jsx("input",{type:"text",className:"http-panel-input",value:e.basic?.username||"",onChange:n=>t({basic:{...e.basic,username:n.target.value,password:e.basic?.password||""}}),placeholder:"Username"})}),s.jsx(It,{label:"Password",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"http-panel-input",value:e.basic?.password||"",onChange:n=>t({basic:{...e.basic,username:e.basic?.username||"",password:n.target.value}}),placeholder:"Password or {{PASSWORD_VAR}}"})})]}),e.type==="api_key"&&s.jsxs(s.Fragment,{children:[s.jsx(It,{label:"Header Name",required:!0,hint:"e.g., X-API-Key",children:s.jsx("input",{type:"text",className:"http-panel-input",value:e.apiKey?.headerName||"",onChange:n=>t({apiKey:{...e.apiKey,headerName:n.target.value,value:e.apiKey?.value||""}}),placeholder:"X-API-Key"})}),s.jsx(It,{label:"API Key Value",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"http-panel-input",value:e.apiKey?.value||"",onChange:n=>t({apiKey:{...e.apiKey,headerName:e.apiKey?.headerName||"",value:n.target.value}}),placeholder:"API key or {{API_KEY_VAR}}"})})]})]})}function IV({headers:e,onChange:t}){const n=Object.entries(e),r=()=>{t({...e,"":""})},i=u=>{const d={...e};delete d[u],t(d)},a=(u,d)=>{const p={};for(const[f,m]of Object.entries(e))f===u?p[d]=m:p[f]=m;t(p)},c=(u,d)=>{t({...e,[u]:d})};return s.jsxs(gs,{title:"Headers",defaultOpen:n.length>0,children:[s.jsxs("div",{className:"http-panel-kv-editor",children:[n.map(([u,d],p)=>s.jsxs("div",{className:"http-panel-kv-row",children:[s.jsx("input",{type:"text",className:"http-panel-kv-key",value:u,onChange:f=>a(u,f.target.value),placeholder:"Header name"}),s.jsx("span",{className:"http-panel-kv-separator",children:":"}),s.jsx("input",{type:"text",className:"http-panel-kv-value",value:d,onChange:f=>c(u,f.target.value),placeholder:"Header value"}),s.jsx("button",{type:"button",className:"http-panel-kv-remove",onClick:()=>i(u),title:"Remove header",children:""})]},p)),s.jsx("button",{type:"button",className:"http-panel-kv-add",onClick:r,children:"+ Add Header"})]}),s.jsxs("div",{className:"http-panel-quick-headers",children:[s.jsx("span",{className:"http-panel-quick-label",children:"Quick add:"}),s.jsx("button",{type:"button",onClick:()=>t({...e,"Content-Type":"application/json"}),disabled:"Content-Type"in e,children:"Content-Type"}),s.jsx("button",{type:"button",onClick:()=>t({...e,Accept:"application/json"}),disabled:"Accept"in e,children:"Accept"}),s.jsx("button",{type:"button",onClick:()=>t({...e,"User-Agent":"ADK-Studio/1.0"}),disabled:"User-Agent"in e,children:"User-Agent"})]})]})}function RV({body:e,method:t,onChange:n}){const[r,i]=E.useState(null),a=(t==="GET"||t==="DELETE")&&e.type!=="none",c=u=>{if(e.type==="json")try{u.trim()&&JSON.parse(u),i(null)}catch{i("Invalid JSON syntax")}n({content:u})};return s.jsxs(gs,{title:"Body",defaultOpen:e.type!=="none",children:[s.jsx(It,{label:"Body Type",children:s.jsx("div",{className:"http-body-type-selector",children:jV.map(u=>s.jsx("button",{type:"button",className:`http-body-type-option ${e.type===u?"selected":""}`,onClick:()=>n({type:u,content:u==="none"?void 0:e.content}),children:EV[u]},u))})}),a&&s.jsxs("div",{className:"http-panel-warning",children:[" ",t," requests typically don't include a body"]}),e.type==="json"&&s.jsxs(It,{label:"JSON Body",hint:"supports {{variable}}",children:[s.jsx("textarea",{className:`http-panel-textarea http-panel-textarea-mono ${r?"error":""}`,value:typeof e.content=="string"?e.content:JSON.stringify(e.content,null,2),onChange:u=>c(u.target.value),placeholder:'{"key": "value", "data": "{{variable}}"}',rows:6}),r&&s.jsx("span",{className:"http-panel-error",children:r})]}),e.type==="form"&&s.jsx(It,{label:"Form Data",hint:"key=value pairs",children:s.jsx("textarea",{className:"http-panel-textarea",value:typeof e.content=="string"?e.content:"",onChange:u=>n({content:u.target.value}),placeholder:`field1=value1
field2={{variable}}`,rows:4})}),e.type==="raw"&&s.jsx(It,{label:"Raw Body",children:s.jsx("textarea",{className:"http-panel-textarea",value:typeof e.content=="string"?e.content:"",onChange:u=>n({content:u.target.value}),placeholder:"Raw request body content",rows:4})})]})}function OV({response:e,onChange:t}){return s.jsxs(gs,{title:"Response Handling",defaultOpen:!1,children:[s.jsx(It,{label:"Response Type",children:s.jsx("select",{className:"http-panel-select",value:e.type,onChange:n=>t({type:n.target.value}),children:CV.map(n=>s.jsx("option",{value:n,children:TV[n]},n))})}),s.jsxs(It,{label:"Status Validation",hint:"e.g., 200-299, 200,201",children:[s.jsx("input",{type:"text",className:"http-panel-input",value:e.statusValidation||"",onChange:n=>t({statusValidation:n.target.value||void 0}),placeholder:"200-299"}),s.jsx("div",{className:"http-panel-field-help",children:"Leave empty to accept any status. Use ranges (200-299) or comma-separated values (200,201,204)."})]}),e.type==="json"&&s.jsxs(It,{label:"JSONPath Extraction",hint:"extract specific field",children:[s.jsx("input",{type:"text",className:"http-panel-input http-panel-input-mono",value:e.jsonPath||"",onChange:n=>t({jsonPath:n.target.value||void 0}),placeholder:"$.data.items[0].id"}),s.jsx("div",{className:"http-panel-field-help",children:"Use JSONPath syntax to extract a specific value from the response. Leave empty to use full response."})]}),s.jsxs("div",{className:"http-panel-info",children:[s.jsx("span",{className:"http-panel-info-icon",children:""}),s.jsx("span",{className:"http-panel-info-text",children:"The full response (status, headers, body) is available in the output. Use JSONPath to extract specific values."})]})]})}function MV({rateLimit:e,onChange:t}){const[n,r]=E.useState(!!e),i=a=>{r(a),a&&!e?t({requestsPerWindow:10,windowMs:1e3}):a||t(null)};return s.jsxs(gs,{title:"Rate Limiting",defaultOpen:!1,children:[s.jsx(It,{label:"Enable Rate Limiting",children:s.jsxs("label",{className:"http-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:a=>i(a.target.checked)}),s.jsx("span",{className:"http-panel-toggle-slider"}),s.jsx("span",{className:"http-panel-toggle-label",children:n?"Enabled":"Disabled"})]})}),n&&e&&s.jsxs(s.Fragment,{children:[s.jsx(It,{label:"Requests per Window",hint:"max requests",children:s.jsx("input",{type:"number",className:"http-panel-input",value:e.requestsPerWindow,onChange:a=>t({requestsPerWindow:parseInt(a.target.value,10)||1}),min:1,max:1e3})}),s.jsxs(It,{label:"Window Duration",hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"http-panel-input",value:e.windowMs,onChange:a=>t({windowMs:parseInt(a.target.value,10)||1e3}),min:100,step:100}),s.jsxs("div",{className:"http-panel-field-help",children:[e.requestsPerWindow," request",e.requestsPerWindow!==1?"s":""," per ",e.windowMs,"ms = ",Math.round(e.requestsPerWindow/e.windowMs*1e3*60)," requests/minute"]})]})]})]})}const LV=["set","merge","delete"],DV={set:{label:"Set",description:"Create or overwrite variables",icon:""},merge:{label:"Merge",description:"Deep merge with existing values",icon:""},delete:{label:"Delete",description:"Remove variables from state",icon:""}},qV=["string","number","boolean","json","expression"],FV={string:"String",number:"Number",boolean:"Boolean",json:"JSON",expression:"Expression"},$1={string:"Enter text value",number:"0",boolean:"true or false",json:'{"key": "value"}',expression:"{{input.field}}"};function Bv({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"set-panel-section",children:[s.jsxs("button",{className:"set-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"set-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"set-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"set-panel-section-content",children:n})]})}function H1({label:e,hint:t,required:n,children:r}){return s.jsxs("div",{className:"set-panel-field",children:[s.jsxs("label",{className:"set-panel-label",children:[e,n&&s.jsx("span",{className:"set-panel-required",children:"*"}),t&&s.jsxs("span",{className:"set-panel-hint",children:["(",t,")"]})]}),r]})}function zV({node:e,onChange:t}){const n=E.useCallback(c=>{t({...e,mode:c})},[e,t]),r=E.useCallback(c=>{t({...e,variables:c})},[e,t]),i=E.useCallback(c=>{if(c===null){const{envVars:u,...d}=e;t(d)}else t({...e,envVars:{...e.envVars,...c}})},[e,t]),a=E.useCallback(c=>{t({...e,...c})},[e,t]);return s.jsxs("div",{className:"set-panel",children:[s.jsx(Bv,{title:"Operation Mode",defaultOpen:!0,children:s.jsx("div",{className:"set-mode-selector",children:LV.map(c=>{const u=DV[c];return s.jsxs("button",{type:"button",className:`set-mode-option ${e.mode===c?"selected":""}`,onClick:()=>n(c),children:[s.jsx("span",{className:"set-mode-icon",children:u.icon}),s.jsx("span",{className:"set-mode-label",children:u.label}),s.jsx("span",{className:"set-mode-description",children:u.description})]},c)})})}),s.jsx(Bv,{title:"Variables",defaultOpen:!0,children:s.jsx(BV,{variables:e.variables||[],onChange:r,mode:e.mode})}),s.jsx(HV,{envVars:e.envVars,onChange:i}),s.jsx(Gn,{properties:e,onChange:a,showIdentity:!0})]})}function BV({variables:e,onChange:t,mode:n}){const r=()=>{const d={key:"",value:"",valueType:"string",isSecret:!1};t([...e,d])},i=d=>{const p=[...e];p.splice(d,1),t(p)},a=(d,p)=>{const f=[...e];f[d]={...f[d],...p},t(f)},c=d=>{if(d===0)return;const p=[...e];[p[d-1],p[d]]=[p[d],p[d-1]],t(p)},u=d=>{if(d===e.length-1)return;const p=[...e];[p[d],p[d+1]]=[p[d+1],p[d]],t(p)};return s.jsxs("div",{className:"set-panel-var-editor",children:[e.length===0?s.jsxs("div",{className:"set-panel-empty",children:[s.jsx("span",{className:"set-panel-empty-icon",children:""}),s.jsx("span",{className:"set-panel-empty-text",children:"No variables defined"}),s.jsx("span",{className:"set-panel-empty-hint",children:'Click "Add Variable" to create one'})]}):s.jsx("div",{className:"set-panel-var-list",children:e.map((d,p)=>s.jsx($V,{variable:d,index:p,total:e.length,mode:n,onUpdate:f=>a(p,f),onRemove:()=>i(p),onMoveUp:()=>c(p),onMoveDown:()=>u(p)},p))}),s.jsx("button",{type:"button",className:"set-panel-var-add",onClick:r,children:"+ Add Variable"})]})}function $V({variable:e,index:t,total:n,mode:r,onUpdate:i,onRemove:a,onMoveUp:c,onMoveDown:u}){const[d,p]=E.useState(!0),[f,m]=E.useState(null),g=b=>{if(e.valueType==="json")try{b.trim()&&JSON.parse(b),m(null)}catch{m("Invalid JSON")}i({value:b})},v=b=>{let k=e.value;if(b==="number")k=Number(e.value)||0;else if(b==="boolean")k=e.value==="true"||e.value===!0;else if(b==="json")try{k=typeof e.value=="string"?JSON.parse(e.value):e.value}catch{k={}}else k=String(e.value);i({valueType:b,value:k}),m(null)},w=r!=="delete";return s.jsxs("div",{className:`set-panel-var-row ${d?"expanded":"collapsed"}`,children:[s.jsxs("div",{className:"set-panel-var-header",children:[s.jsx("button",{type:"button",className:"set-panel-var-toggle",onClick:()=>p(!d),children:d?"":""}),s.jsx("input",{type:"text",className:"set-panel-var-key",value:e.key,onChange:b=>i({key:b.target.value}),placeholder:"Variable name"}),e.isSecret&&s.jsx("span",{className:"set-panel-var-secret-badge",title:"Secret variable",children:""}),s.jsxs("div",{className:"set-panel-var-actions",children:[s.jsx("button",{type:"button",className:"set-panel-var-action",onClick:c,disabled:t===0,title:"Move up",children:""}),s.jsx("button",{type:"button",className:"set-panel-var-action",onClick:u,disabled:t===n-1,title:"Move down",children:""}),s.jsx("button",{type:"button",className:"set-panel-var-remove",onClick:a,title:"Remove variable",children:""})]})]}),d&&w&&s.jsxs("div",{className:"set-panel-var-body",children:[s.jsxs("div",{className:"set-panel-var-type-row",children:[s.jsx("label",{className:"set-panel-var-type-label",children:"Type:"}),s.jsx("select",{className:"set-panel-var-type-select",value:e.valueType,onChange:b=>v(b.target.value),children:qV.map(b=>s.jsx("option",{value:b,children:FV[b]},b))}),s.jsxs("label",{className:"set-panel-var-secret-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.isSecret,onChange:b=>i({isSecret:b.target.checked})}),s.jsx("span",{className:"set-panel-var-secret-label",children:"Secret"})]})]}),s.jsx("div",{className:"set-panel-var-value-row",children:e.valueType==="boolean"?s.jsxs("select",{className:"set-panel-var-value-select",value:String(e.value),onChange:b=>i({value:b.target.value==="true"}),children:[s.jsx("option",{value:"true",children:"true"}),s.jsx("option",{value:"false",children:"false"})]}):e.valueType==="json"?s.jsxs("div",{className:"set-panel-var-json-wrapper",children:[s.jsx("textarea",{className:`set-panel-var-value-textarea ${f?"error":""}`,value:typeof e.value=="object"?JSON.stringify(e.value,null,2):String(e.value),onChange:b=>g(b.target.value),placeholder:$1[e.valueType],rows:4}),f&&s.jsx("span",{className:"set-panel-var-error",children:f})]}):s.jsx("input",{type:e.valueType==="number"?"number":"text",className:"set-panel-var-value-input",value:String(e.value),onChange:b=>g((e.valueType==="number",b.target.value)),placeholder:$1[e.valueType]})}),e.valueType==="expression"&&s.jsxs("div",{className:"set-panel-var-hint",children:["Use ",s.jsx("code",{children:"{{variable}}"})," syntax to reference state values"]})]})]})}function HV({envVars:e,onChange:t}){const[n,r]=E.useState(e?.loadFromEnv??!1),i=a=>{r(a),t(a?{loadFromEnv:!0}:null)};return s.jsxs(Bv,{title:"Environment Variables",defaultOpen:!1,children:[s.jsx(H1,{label:"Load from .env",children:s.jsxs("label",{className:"set-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:a=>i(a.target.checked)}),s.jsx("span",{className:"set-panel-toggle-slider"}),s.jsx("span",{className:"set-panel-toggle-label",children:n?"Enabled":"Disabled"})]})}),n&&s.jsxs(s.Fragment,{children:[s.jsxs(H1,{label:"Prefix Filter",hint:"optional",children:[s.jsx("input",{type:"text",className:"set-panel-input",value:e?.prefix||"",onChange:a=>t({prefix:a.target.value||void 0}),placeholder:"e.g., APP_, API_"}),s.jsx("div",{className:"set-panel-field-help",children:"Only load environment variables starting with this prefix. Leave empty to load all variables."})]}),s.jsxs("div",{className:"set-panel-info",children:[s.jsx("span",{className:"set-panel-info-icon",children:""}),s.jsx("span",{className:"set-panel-info-text",children:"Environment variables will be loaded at runtime from the .env file. They will be available in the workflow state under their original names."})]})]})]})}const VV=["jsonpath","jmespath","template","javascript"],k2={jsonpath:{label:"JSONPath",description:"Query JSON data using JSONPath expressions",icon:"",placeholder:"$.data.items[*].name"},jmespath:{label:"JMESPath",description:"Query JSON with JMESPath expressions",icon:"",placeholder:"data.items[*].name"},template:{label:"Template",description:"Transform using Handlebars-style templates",icon:"",placeholder:"{{#each items}}{{name}}, {{/each}}"},javascript:{label:"JavaScript",description:"Custom JavaScript transformation (sandboxed)",icon:"",placeholder:"return input.items.map(item => item.name);"}},UV=["pick","omit","rename","flatten","sort","unique"],S2={pick:{label:"Pick",description:"Select specific fields from object",icon:"",configFields:["fields"]},omit:{label:"Omit",description:"Exclude specific fields from object",icon:"",configFields:["fields"]},rename:{label:"Rename",description:"Rename object fields",icon:"",configFields:["from","to"]},flatten:{label:"Flatten",description:"Flatten nested objects",icon:"",configFields:["depth"]},sort:{label:"Sort",description:"Sort array by field",icon:"",configFields:["field","order"]},unique:{label:"Unique",description:"Remove duplicate values from array",icon:"",configFields:["field"]}},WV=["string","number","boolean","array","object"],KV={string:"String",number:"Number",boolean:"Boolean",array:"Array",object:"Object"};function $a({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"transform-panel-section",children:[s.jsxs("button",{className:"transform-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"transform-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"transform-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"transform-panel-section-content",children:n})]})}function Pr({label:e,hint:t,required:n,children:r}){return s.jsxs("div",{className:"transform-panel-field",children:[s.jsxs("label",{className:"transform-panel-label",children:[e,n&&s.jsx("span",{className:"transform-panel-required",children:"*"}),t&&s.jsxs("span",{className:"transform-panel-hint",children:["(",t,")"]})]}),r]})}function GV({node:e,onChange:t}){const[n,r]=E.useState((e.operations?.length??0)>0),i=E.useCallback(f=>{t({...e,transformType:f})},[e,t]),a=E.useCallback(f=>{t({...e,expression:f})},[e,t]),c=E.useCallback(f=>{t({...e,operations:f})},[e,t]),u=E.useCallback(f=>{if(f===void 0){const{typeCoercion:m,...g}=e;t(g)}else t({...e,typeCoercion:f})},[e,t]),d=E.useCallback(f=>{t({...e,...f})},[e,t]),p=E.useCallback(f=>{r(f),t(f?{...e,expression:"",operations:e.operations||[]}:{...e,operations:void 0})},[e,t]);return s.jsxs("div",{className:"transform-panel",children:[s.jsx($a,{title:"Transform Type",defaultOpen:!0,children:s.jsx("div",{className:"transform-type-selector",children:VV.map(f=>{const m=k2[f];return s.jsxs("button",{type:"button",className:`transform-type-option ${e.transformType===f?"selected":""}`,onClick:()=>i(f),children:[s.jsx("span",{className:"transform-type-icon",children:m.icon}),s.jsx("span",{className:"transform-type-label",children:m.label}),s.jsx("span",{className:"transform-type-description",children:m.description})]},f)})})}),s.jsx($a,{title:"Transform Mode",defaultOpen:!0,children:s.jsxs("div",{className:"transform-mode-toggle",children:[s.jsxs("button",{type:"button",className:`transform-mode-option ${n?"":"selected"}`,onClick:()=>p(!1),children:[s.jsx("span",{className:"transform-mode-icon",children:""}),s.jsx("span",{className:"transform-mode-label",children:"Expression"}),s.jsx("span",{className:"transform-mode-hint",children:"Write custom expression"})]}),s.jsxs("button",{type:"button",className:`transform-mode-option ${n?"selected":""}`,onClick:()=>p(!0),children:[s.jsx("span",{className:"transform-mode-icon",children:""}),s.jsx("span",{className:"transform-mode-label",children:"Operations"}),s.jsx("span",{className:"transform-mode-hint",children:"Use built-in operations"})]})]})}),!n&&s.jsx(YV,{transformType:e.transformType,expression:e.expression,onChange:a}),n&&s.jsx(QV,{operations:e.operations||[],onChange:c}),s.jsx(nU,{typeCoercion:e.typeCoercion,onChange:u}),s.jsx(Gn,{properties:e,onChange:d,showIdentity:!0})]})}function YV({transformType:e,expression:t,onChange:n}){const r=k2[e];return s.jsxs($a,{title:"Expression",defaultOpen:!0,children:[s.jsx(Pr,{label:"Transform Expression",required:!0,hint:r.label,children:s.jsx("textarea",{className:"transform-panel-expression",value:t,onChange:i=>n(i.target.value),placeholder:r.placeholder,rows:6,spellCheck:!1})}),s.jsx("div",{className:"transform-panel-hints",children:s.jsx(XV,{transformType:e})})]})}function XV({transformType:e}){switch(e){case"jsonpath":return s.jsxs("div",{className:"transform-hint-box",children:[s.jsx("div",{className:"transform-hint-title",children:"JSONPath Syntax"}),s.jsxs("ul",{className:"transform-hint-list",children:[s.jsxs("li",{children:[s.jsx("code",{children:"$"})," - Root object"]}),s.jsxs("li",{children:[s.jsx("code",{children:"$.field"})," - Access field"]}),s.jsxs("li",{children:[s.jsx("code",{children:"$[0]"})," - Array index"]}),s.jsxs("li",{children:[s.jsx("code",{children:"$[*]"})," - All array elements"]}),s.jsxs("li",{children:[s.jsx("code",{children:"$.items[?(@.price > 10)]"})," - Filter"]})]})]});case"jmespath":return s.jsxs("div",{className:"transform-hint-box",children:[s.jsx("div",{className:"transform-hint-title",children:"JMESPath Syntax"}),s.jsxs("ul",{className:"transform-hint-list",children:[s.jsxs("li",{children:[s.jsx("code",{children:"field"})," - Access field"]}),s.jsxs("li",{children:[s.jsx("code",{children:"field.nested"})," - Nested access"]}),s.jsxs("li",{children:[s.jsx("code",{children:"[0]"})," - Array index"]}),s.jsxs("li",{children:[s.jsx("code",{children:"[*].name"})," - Project field from array"]}),s.jsxs("li",{children:[s.jsx("code",{children:"[?price > `10`]"})," - Filter"]})]})]});case"template":return s.jsxs("div",{className:"transform-hint-box",children:[s.jsx("div",{className:"transform-hint-title",children:"Template Syntax"}),s.jsxs("ul",{className:"transform-hint-list",children:[s.jsxs("li",{children:[s.jsx("code",{children:"{{field}}"})," - Variable"]}),s.jsxs("li",{children:[s.jsx("code",{children:"{{#each items}}...{{/each}}"})," - Loop"]}),s.jsxs("li",{children:[s.jsx("code",{children:"{{#if condition}}...{{/if}}"})," - Conditional"]}),s.jsxs("li",{children:[s.jsx("code",{children:"{{#with object}}...{{/with}}"})," - Context"]})]})]});case"javascript":return s.jsxs("div",{className:"transform-hint-box",children:[s.jsx("div",{className:"transform-hint-title",children:"JavaScript Context"}),s.jsxs("ul",{className:"transform-hint-list",children:[s.jsxs("li",{children:[s.jsx("code",{children:"input"})," - Input data from state"]}),s.jsxs("li",{children:[s.jsx("code",{children:"return value;"})," - Return transformed value"]}),s.jsx("li",{children:"Standard JS methods available"}),s.jsx("li",{children:"Runs in sandboxed environment"})]})]});default:return null}}function QV({operations:e,onChange:t}){const n=u=>{const d={type:u,config:JV(u)};t([...e,d])},r=u=>{const d=[...e];d.splice(u,1),t(d)},i=(u,d)=>{const p=[...e];p[u]={...p[u],config:d},t(p)},a=u=>{if(u===0)return;const d=[...e];[d[u-1],d[u]]=[d[u],d[u-1]],t(d)},c=u=>{if(u===e.length-1)return;const d=[...e];[d[u],d[u+1]]=[d[u+1],d[u]],t(d)};return s.jsxs($a,{title:"Operations",defaultOpen:!0,children:[e.length===0?s.jsxs("div",{className:"transform-panel-empty",children:[s.jsx("span",{className:"transform-panel-empty-icon",children:""}),s.jsx("span",{className:"transform-panel-empty-text",children:"No operations defined"}),s.jsx("span",{className:"transform-panel-empty-hint",children:"Add operations to transform data"})]}):s.jsx("div",{className:"transform-operations-list",children:e.map((u,d)=>s.jsx(ZV,{operation:u,index:d,total:e.length,onUpdate:p=>i(d,p),onRemove:()=>r(d),onMoveUp:()=>a(d),onMoveDown:()=>c(d)},d))}),s.jsxs("div",{className:"transform-add-operation",children:[s.jsx("span",{className:"transform-add-label",children:"Add operation:"}),s.jsx("div",{className:"transform-add-buttons",children:UV.map(u=>{const d=S2[u];return s.jsxs("button",{type:"button",className:"transform-add-button",onClick:()=>n(u),title:d.description,children:[s.jsx("span",{className:"transform-add-icon",children:d.icon}),s.jsx("span",{className:"transform-add-text",children:d.label})]},u)})})]})]})}function JV(e){switch(e){case"pick":case"omit":return{fields:[]};case"rename":return{from:"",to:""};case"flatten":return{depth:1};case"sort":return{field:"",order:"asc"};case"unique":return{field:""};default:return{}}}function ZV({operation:e,index:t,total:n,onUpdate:r,onRemove:i,onMoveUp:a,onMoveDown:c}){const[u,d]=E.useState(!0),p=S2[e.type];return s.jsxs("div",{className:`transform-operation-row ${u?"expanded":"collapsed"}`,children:[s.jsxs("div",{className:"transform-operation-header",children:[s.jsx("button",{type:"button",className:"transform-operation-toggle",onClick:()=>d(!u),children:u?"":""}),s.jsx("span",{className:"transform-operation-icon",children:p.icon}),s.jsx("span",{className:"transform-operation-label",children:p.label}),s.jsxs("span",{className:"transform-operation-index",children:["#",t+1]}),s.jsxs("div",{className:"transform-operation-actions",children:[s.jsx("button",{type:"button",className:"transform-operation-action",onClick:a,disabled:t===0,title:"Move up",children:""}),s.jsx("button",{type:"button",className:"transform-operation-action",onClick:c,disabled:t===n-1,title:"Move down",children:""}),s.jsx("button",{type:"button",className:"transform-operation-remove",onClick:i,title:"Remove operation",children:""})]})]}),u&&s.jsx("div",{className:"transform-operation-body",children:s.jsx(eU,{type:e.type,config:e.config,onChange:r})})]})}function eU({type:e,config:t,onChange:n}){switch(e){case"pick":case"omit":return s.jsx(tU,{label:e==="pick"?"Fields to pick":"Fields to omit",fields:t.fields||[],onChange:r=>n({...t,fields:r})});case"rename":return s.jsxs("div",{className:"transform-config-rename",children:[s.jsx(Pr,{label:"From field",children:s.jsx("input",{type:"text",className:"transform-panel-input",value:t.from||"",onChange:r=>n({...t,from:r.target.value}),placeholder:"originalName"})}),s.jsx("span",{className:"transform-config-arrow",children:""}),s.jsx(Pr,{label:"To field",children:s.jsx("input",{type:"text",className:"transform-panel-input",value:t.to||"",onChange:r=>n({...t,to:r.target.value}),placeholder:"newName"})})]});case"flatten":return s.jsx(Pr,{label:"Depth",hint:"levels to flatten",children:s.jsx("input",{type:"number",className:"transform-panel-input",value:t.depth||1,onChange:r=>n({...t,depth:parseInt(r.target.value,10)||1}),min:1,max:10})});case"sort":return s.jsxs("div",{className:"transform-config-sort",children:[s.jsx(Pr,{label:"Sort by field",children:s.jsx("input",{type:"text",className:"transform-panel-input",value:t.field||"",onChange:r=>n({...t,field:r.target.value}),placeholder:"fieldName"})}),s.jsx(Pr,{label:"Order",children:s.jsxs("select",{className:"transform-panel-select",value:t.order||"asc",onChange:r=>n({...t,order:r.target.value}),children:[s.jsx("option",{value:"asc",children:"Ascending"}),s.jsx("option",{value:"desc",children:"Descending"})]})})]});case"unique":return s.jsx(Pr,{label:"Unique by field",hint:"leave empty for primitive arrays",children:s.jsx("input",{type:"text",className:"transform-panel-input",value:t.field||"",onChange:r=>n({...t,field:r.target.value}),placeholder:"fieldName (optional)"})});default:return null}}function tU({label:e,fields:t,onChange:n}){const[r,i]=E.useState(""),a=()=>{r.trim()&&!t.includes(r.trim())&&(n([...t,r.trim()]),i(""))},c=d=>{const p=[...t];p.splice(d,1),n(p)},u=d=>{d.key==="Enter"&&(d.preventDefault(),a())};return s.jsxs("div",{className:"transform-fields-config",children:[s.jsx("label",{className:"transform-panel-label",children:e}),t.length>0&&s.jsx("div",{className:"transform-fields-list",children:t.map((d,p)=>s.jsxs("span",{className:"transform-field-tag",children:[s.jsx("code",{children:d}),s.jsx("button",{type:"button",className:"transform-field-remove",onClick:()=>c(p),children:""})]},p))}),s.jsxs("div",{className:"transform-field-add",children:[s.jsx("input",{type:"text",className:"transform-panel-input",value:r,onChange:d=>i(d.target.value),onKeyDown:u,placeholder:"Add field name"}),s.jsx("button",{type:"button",className:"transform-field-add-btn",onClick:a,disabled:!r.trim(),children:"+"})]})]})}function nU({typeCoercion:e,onChange:t}){const[n,r]=E.useState(!!e),i=a=>{r(a),t(a?{targetType:"string"}:void 0)};return s.jsxs($a,{title:"Type Coercion",defaultOpen:!1,children:[s.jsx(Pr,{label:"Enable Type Coercion",children:s.jsxs("label",{className:"transform-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:a=>i(a.target.checked)}),s.jsx("span",{className:"transform-panel-toggle-slider"}),s.jsx("span",{className:"transform-panel-toggle-label",children:n?"Enabled":"Disabled"})]})}),n&&e&&s.jsxs(Pr,{label:"Target Type",hint:"convert result to",children:[s.jsx("select",{className:"transform-panel-select",value:e.targetType,onChange:a=>t({targetType:a.target.value}),children:WV.map(a=>s.jsx("option",{value:a,children:KV[a]},a))}),s.jsx("div",{className:"transform-panel-field-help",children:"The transformation result will be coerced to the selected type."})]})]})}const rU=["first_match","all_match"],iU={first_match:{label:"First Match",description:"Stop at first matching condition",icon:"1"},all_match:{label:"All Match",description:"Evaluate all conditions (multi-output)",icon:""}},oU=["eq","neq","gt","lt","gte","lte","contains","startsWith","endsWith","matches","in","empty","exists"],Hp={eq:{label:"=",description:"Equals",requiresValue:!0},neq:{label:"",description:"Not equals",requiresValue:!0},gt:{label:">",description:"Greater than",requiresValue:!0},lt:{label:"<",description:"Less than",requiresValue:!0},gte:{label:"",description:"Greater or equal",requiresValue:!0},lte:{label:"",description:"Less or equal",requiresValue:!0},contains:{label:"contains",description:"Contains substring",requiresValue:!0},startsWith:{label:"starts with",description:"Starts with",requiresValue:!0},endsWith:{label:"ends with",description:"Ends with",requiresValue:!0},matches:{label:"matches",description:"Matches regex",requiresValue:!0},in:{label:"in",description:"In array",requiresValue:!0},empty:{label:"is empty",description:"Is empty/null",requiresValue:!1},exists:{label:"exists",description:"Field exists",requiresValue:!1}};function ga({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"switch-panel-section",children:[s.jsxs("button",{className:"switch-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"switch-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"switch-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"switch-panel-section-content",children:n})]})}function Ji({label:e,hint:t,required:n,children:r}){return s.jsxs("div",{className:"switch-panel-field",children:[s.jsxs("label",{className:"switch-panel-label",children:[e,n&&s.jsx("span",{className:"switch-panel-required",children:"*"}),t&&s.jsxs("span",{className:"switch-panel-hint",children:["(",t,")"]})]}),r]})}function sU({node:e,onChange:t}){const n=E.useCallback(d=>{t({...e,evaluationMode:d})},[e,t]),r=E.useCallback(d=>{t({...e,conditions:d})},[e,t]),i=E.useCallback(d=>{if(d===void 0||d===""){const{defaultBranch:p,...f}=e;t(f)}else t({...e,defaultBranch:d})},[e,t]),a=E.useCallback(d=>{if(d===void 0){const{expressionMode:p,...f}=e;t(f)}else t({...e,expressionMode:d})},[e,t]),c=E.useCallback(d=>{t({...e,...d})},[e,t]),u=e.expressionMode?.enabled??!1;return s.jsxs("div",{className:"switch-panel",children:[s.jsx(ga,{title:"Evaluation Mode",defaultOpen:!0,children:s.jsx(aU,{mode:e.evaluationMode,onChange:n})}),s.jsx(ga,{title:"Routing Mode",defaultOpen:!0,children:s.jsx(lU,{isExpressionMode:u,onToggle:d=>{a(d?{enabled:!0,expression:""}:void 0)}})}),!u&&s.jsx(ga,{title:"Conditions",defaultOpen:!0,children:s.jsx(cU,{conditions:e.conditions,onChange:r})}),u&&s.jsx(ga,{title:"Expression",defaultOpen:!0,children:s.jsx(dU,{expressionMode:e.expressionMode,onChange:a})}),s.jsx(ga,{title:"Default Branch",defaultOpen:!1,children:s.jsx(pU,{defaultBranch:e.defaultBranch,onChange:i})}),s.jsx(Gn,{properties:e,onChange:c,showIdentity:!0})]})}function aU({mode:e,onChange:t}){return s.jsx("div",{className:"switch-evaluation-mode-selector",children:rU.map(n=>{const r=iU[n];return s.jsxs("button",{type:"button",className:`switch-evaluation-mode-option ${e===n?"selected":""}`,onClick:()=>t(n),children:[s.jsx("span",{className:"switch-evaluation-mode-icon",children:r.icon}),s.jsx("span",{className:"switch-evaluation-mode-label",children:r.label}),s.jsx("span",{className:"switch-evaluation-mode-description",children:r.description})]},n)})})}function lU({isExpressionMode:e,onToggle:t}){return s.jsxs("div",{className:"switch-mode-toggle",children:[s.jsxs("button",{type:"button",className:`switch-mode-option ${e?"":"selected"}`,onClick:()=>t(!1),children:[s.jsx("span",{className:"switch-mode-icon",children:""}),s.jsx("span",{className:"switch-mode-label",children:"Condition Builder"}),s.jsx("span",{className:"switch-mode-hint",children:"Visual condition editor"})]}),s.jsxs("button",{type:"button",className:`switch-mode-option ${e?"selected":""}`,onClick:()=>t(!0),children:[s.jsx("span",{className:"switch-mode-icon",children:""}),s.jsx("span",{className:"switch-mode-label",children:"Expression"}),s.jsx("span",{className:"switch-mode-hint",children:"JavaScript expression"})]})]})}function cU({conditions:e,onChange:t}){const n=()=>{const u={id:`cond_${Date.now()}`,name:`Condition ${e.length+1}`,field:"",operator:"eq",value:"",outputPort:`branch_${e.length+1}`};t([...e,u])},r=u=>{const d=[...e];d.splice(u,1),t(d)},i=(u,d)=>{const p=[...e];p[u]={...p[u],...d},t(p)},a=u=>{if(u===0)return;const d=[...e];[d[u-1],d[u]]=[d[u],d[u-1]],t(d)},c=u=>{if(u===e.length-1)return;const d=[...e];[d[u],d[u+1]]=[d[u+1],d[u]],t(d)};return s.jsxs("div",{className:"switch-condition-builder",children:[e.length===0?s.jsxs("div",{className:"switch-panel-empty",children:[s.jsx("span",{className:"switch-panel-empty-icon",children:""}),s.jsx("span",{className:"switch-panel-empty-text",children:"No conditions defined"}),s.jsx("span",{className:"switch-panel-empty-hint",children:"Add conditions to create routing branches"})]}):s.jsx("div",{className:"switch-conditions-list",children:e.map((u,d)=>s.jsx(uU,{condition:u,index:d,total:e.length,onUpdate:p=>i(d,p),onRemove:()=>r(d),onMoveUp:()=>a(d),onMoveDown:()=>c(d)},u.id))}),s.jsx("button",{type:"button",className:"switch-condition-add",onClick:n,children:"+ Add Condition"})]})}function uU({condition:e,index:t,total:n,onUpdate:r,onRemove:i,onMoveUp:a,onMoveDown:c}){const[u,d]=E.useState(!0),p=Hp[e.operator];return s.jsxs("div",{className:`switch-condition-row ${u?"expanded":"collapsed"}`,children:[s.jsxs("div",{className:"switch-condition-header",children:[s.jsx("button",{type:"button",className:"switch-condition-toggle",onClick:()=>d(!u),children:u?"":""}),s.jsxs("span",{className:"switch-condition-index",children:["#",t+1]}),s.jsx("input",{type:"text",className:"switch-condition-name-input",value:e.name,onChange:f=>r({name:f.target.value}),placeholder:"Condition name"}),s.jsxs("div",{className:"switch-condition-actions",children:[s.jsx("button",{type:"button",className:"switch-condition-action",onClick:a,disabled:t===0,title:"Move up",children:""}),s.jsx("button",{type:"button",className:"switch-condition-action",onClick:c,disabled:t===n-1,title:"Move down",children:""}),s.jsx("button",{type:"button",className:"switch-condition-remove",onClick:i,title:"Remove condition",children:""})]})]}),u&&s.jsxs("div",{className:"switch-condition-body",children:[s.jsx(Ji,{label:"Field",required:!0,hint:"state path",children:s.jsx("input",{type:"text",className:"switch-panel-input switch-panel-input-mono",value:e.field,onChange:f=>r({field:f.target.value}),placeholder:"state.field.path"})}),s.jsx(Ji,{label:"Operator",required:!0,children:s.jsx("select",{className:"switch-panel-select",value:e.operator,onChange:f=>r({operator:f.target.value}),children:oU.map(f=>s.jsxs("option",{value:f,children:[Hp[f].label," (",Hp[f].description,")"]},f))})}),p.requiresValue&&s.jsx(Ji,{label:"Value",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"text",className:"switch-panel-input",value:e.value!==void 0?String(e.value):"",onChange:f=>{const m=f.target.value;let g=m;m==="true"?g=!0:m==="false"?g=!1:!isNaN(Number(m))&&m!==""&&(g=Number(m)),r({value:g})},placeholder:"Value to compare"})}),s.jsxs(Ji,{label:"Output Port",required:!0,hint:"branch identifier",children:[s.jsx("input",{type:"text",className:"switch-panel-input",value:e.outputPort,onChange:f=>r({outputPort:f.target.value}),placeholder:"branch_name"}),s.jsx("div",{className:"switch-panel-field-help",children:"This identifier is used to connect edges from this branch."})]})]})]})}function dU({expressionMode:e,onChange:t}){return s.jsxs("div",{className:"switch-expression-section",children:[s.jsx(Ji,{label:"JavaScript Expression",required:!0,hint:"returns branch name",children:s.jsx("textarea",{className:"switch-panel-expression",value:e.expression,onChange:n=>t({...e,expression:n.target.value}),placeholder:`// Return the branch name to route to
// Available: state (full workflow state)

if (state.score > 80) {
  return 'high';
} else if (state.score > 50) {
  return 'medium';
} else {
  return 'low';
}`,rows:10,spellCheck:!1})}),s.jsx("div",{className:"switch-expression-hints",children:s.jsxs("div",{className:"switch-hint-box",children:[s.jsx("div",{className:"switch-hint-title",children:"Expression Context"}),s.jsxs("ul",{className:"switch-hint-list",children:[s.jsxs("li",{children:[s.jsx("code",{children:"state"})," - Full workflow state object"]}),s.jsxs("li",{children:[s.jsx("code",{children:"return 'branchName'"})," - Route to named branch"]}),s.jsx("li",{children:"Standard JavaScript syntax supported"}),s.jsx("li",{children:"Runs in sandboxed environment"})]})]})}),s.jsxs("div",{className:"switch-panel-info",children:[s.jsx("span",{className:"switch-panel-info-icon",children:""}),s.jsx("span",{className:"switch-panel-info-text",children:"The expression should return a string matching one of your output port names. If no match is found, the default branch (if configured) will be used."})]})]})}function pU({defaultBranch:e,onChange:t}){const[n,r]=E.useState(!!e),i=a=>{r(a),t(a?"default":void 0)};return s.jsxs("div",{className:"switch-default-branch-section",children:[s.jsx(Ji,{label:"Enable Default Branch",children:s.jsxs("label",{className:"switch-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:a=>i(a.target.checked)}),s.jsx("span",{className:"switch-panel-toggle-slider"}),s.jsx("span",{className:"switch-panel-toggle-label",children:n?"Enabled":"Disabled"})]})}),n&&s.jsxs(Ji,{label:"Default Port Name",hint:"fallback branch",children:[s.jsx("input",{type:"text",className:"switch-panel-input",value:e||"",onChange:a=>t(a.target.value||void 0),placeholder:"default"}),s.jsx("div",{className:"switch-panel-field-help",children:"This branch is used when no conditions match (condition mode) or when the expression returns an unknown branch name."})]})]})}const fU=["forEach","while","times"],hU={forEach:{label:"For Each",description:"Iterate over each item in an array",icon:""},while:{label:"While",description:"Loop while a condition is true",icon:""},times:{label:"Times",description:"Repeat a fixed number of times",icon:""}};function Xo({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"loop-panel-section",children:[s.jsxs("button",{className:"loop-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"loop-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"loop-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"loop-panel-section-content",children:n})]})}function Pn({label:e,hint:t,required:n,children:r}){return s.jsxs("div",{className:"loop-panel-field",children:[s.jsxs("label",{className:"loop-panel-label",children:[e,n&&s.jsx("span",{className:"loop-panel-required",children:"*"}),t&&s.jsxs("span",{className:"loop-panel-hint",children:["(",t,")"]})]}),r]})}function mU({node:e,onChange:t}){const n=E.useCallback(p=>{const f={loopType:p};p==="forEach"&&!e.forEach?f.forEach={sourceArray:"",itemVar:"item",indexVar:"index"}:p==="while"&&!e.while?f.while={condition:""}:p==="times"&&!e.times&&(f.times={count:10}),t({...e,...f})},[e,t]),r=E.useCallback(p=>{t({...e,forEach:{...e.forEach,...p}})},[e,t]),i=E.useCallback(p=>{t({...e,while:{...e.while,...p}})},[e,t]),a=E.useCallback(p=>{t({...e,times:{...e.times,...p}})},[e,t]),c=E.useCallback(p=>{t({...e,parallel:{...e.parallel,...p}})},[e,t]),u=E.useCallback(p=>{t({...e,results:{...e.results,...p}})},[e,t]),d=E.useCallback(p=>{t({...e,...p})},[e,t]);return s.jsxs("div",{className:"loop-panel",children:[s.jsx(Xo,{title:"Loop Type",defaultOpen:!0,children:s.jsx(gU,{loopType:e.loopType,onChange:n})}),e.loopType==="forEach"&&s.jsx(Xo,{title:"ForEach Configuration",defaultOpen:!0,children:s.jsx(yU,{config:e.forEach||{sourceArray:"",itemVar:"item",indexVar:"index"},onChange:r})}),e.loopType==="while"&&s.jsx(Xo,{title:"While Configuration",defaultOpen:!0,children:s.jsx(vU,{config:e.while||{condition:""},onChange:i})}),e.loopType==="times"&&s.jsx(Xo,{title:"Times Configuration",defaultOpen:!0,children:s.jsx(xU,{config:e.times||{count:10},onChange:a})}),s.jsx(Xo,{title:"Parallel Execution",defaultOpen:!1,children:s.jsx(bU,{config:e.parallel,onChange:c})}),s.jsx(Xo,{title:"Result Aggregation",defaultOpen:!1,children:s.jsx(wU,{config:e.results,onChange:u})}),s.jsx(Gn,{properties:e,onChange:d,showIdentity:!0})]})}function gU({loopType:e,onChange:t}){return s.jsx("div",{className:"loop-type-selector",children:fU.map(n=>{const r=hU[n];return s.jsxs("button",{type:"button",className:`loop-type-option ${e===n?"selected":""}`,onClick:()=>t(n),children:[s.jsx("span",{className:"loop-type-icon",children:r.icon}),s.jsx("span",{className:"loop-type-label",children:r.label}),s.jsx("span",{className:"loop-type-description",children:r.description})]},n)})})}function yU({config:e,onChange:t}){return s.jsxs("div",{className:"loop-foreach-section",children:[s.jsxs(Pn,{label:"Source Array",required:!0,hint:"state path to array",children:[s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:e.sourceArray,onChange:n=>t({sourceArray:n.target.value}),placeholder:"state.items"}),s.jsx("div",{className:"loop-panel-field-help",children:"Path to the array in workflow state to iterate over."})]}),s.jsxs("div",{className:"loop-foreach-vars",children:[s.jsx(Pn,{label:"Item Variable",hint:"default: item",children:s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:e.itemVar,onChange:n=>t({itemVar:n.target.value||"item"}),placeholder:"item"})}),s.jsx(Pn,{label:"Index Variable",hint:"default: index",children:s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:e.indexVar,onChange:n=>t({indexVar:n.target.value||"index"}),placeholder:"index"})})]}),s.jsxs("div",{className:"loop-panel-info",children:[s.jsx("span",{className:"loop-panel-info-icon",children:""}),s.jsxs("span",{className:"loop-panel-info-text",children:["Inside the loop body, access the current item as ",s.jsx("code",{children:e.itemVar||"item"})," and the current index as ",s.jsx("code",{children:e.indexVar||"index"}),"."]})]})]})}function vU({config:e,onChange:t}){return s.jsxs("div",{className:"loop-while-section",children:[s.jsx(Pn,{label:"Condition",required:!0,hint:"JavaScript expression",children:s.jsx("textarea",{className:"loop-panel-expression",value:e.condition,onChange:n=>t({condition:n.target.value}),placeholder:`// Loop while this expression is true
// Available: state (workflow state)

state.counter < 10`,rows:6,spellCheck:!1})}),s.jsxs("div",{className:"loop-panel-info loop-panel-info-warning",children:[s.jsx("span",{className:"loop-panel-info-icon",children:""}),s.jsx("span",{className:"loop-panel-info-text",children:"Ensure your condition eventually becomes false to avoid infinite loops. Consider using a maximum iteration limit in the execution control settings."})]})]})}function xU({config:e,onChange:t}){const n=typeof e.count=="string",[r,i]=E.useState(n),a=c=>{if(i(c),c)t({count:String(e.count)});else{const u=typeof e.count=="string"?parseInt(e.count,10)||10:e.count;t({count:u})}};return s.jsxs("div",{className:"loop-times-section",children:[s.jsx(Pn,{label:"Use Expression",children:s.jsxs("label",{className:"loop-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:r,onChange:c=>a(c.target.checked)}),s.jsx("span",{className:"loop-panel-toggle-slider"}),s.jsx("span",{className:"loop-panel-toggle-label",children:r?"Dynamic count from expression":"Fixed count"})]})}),r?s.jsxs(Pn,{label:"Count Expression",required:!0,hint:"returns number",children:[s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:String(e.count),onChange:c=>t({count:c.target.value}),placeholder:"state.repeatCount"}),s.jsx("div",{className:"loop-panel-field-help",children:"Expression that evaluates to the number of iterations."})]}):s.jsxs(Pn,{label:"Iteration Count",required:!0,children:[s.jsx("input",{type:"number",className:"loop-panel-input",value:typeof e.count=="number"?e.count:10,onChange:c=>t({count:parseInt(c.target.value,10)||1}),min:1,max:1e4}),s.jsx("div",{className:"loop-panel-field-help",children:"Number of times to repeat the loop body."})]})]})}function bU({config:e,onChange:t}){return s.jsxs("div",{className:"loop-parallel-section",children:[s.jsx(Pn,{label:"Enable Parallel Execution",children:s.jsxs("label",{className:"loop-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.enabled,onChange:n=>t({enabled:n.target.checked})}),s.jsx("span",{className:"loop-panel-toggle-slider"}),s.jsx("span",{className:"loop-panel-toggle-label",children:e.enabled?"Enabled":"Disabled"})]})}),e.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs(Pn,{label:"Batch Size",hint:"items per batch",children:[s.jsx("input",{type:"number",className:"loop-panel-input",value:e.batchSize??10,onChange:n=>t({batchSize:parseInt(n.target.value,10)||void 0}),min:1,max:100,placeholder:"10"}),s.jsx("div",{className:"loop-panel-field-help",children:"Number of items to process in parallel. Leave empty for unlimited."})]}),s.jsxs(Pn,{label:"Delay Between Batches",hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"loop-panel-input",value:e.delayBetween??0,onChange:n=>t({delayBetween:parseInt(n.target.value,10)||void 0}),min:0,step:100,placeholder:"0"}),s.jsx("div",{className:"loop-panel-field-help",children:"Delay in milliseconds between processing batches."})]})]}),s.jsxs("div",{className:"loop-panel-info",children:[s.jsx("span",{className:"loop-panel-info-icon",children:""}),s.jsx("span",{className:"loop-panel-info-text",children:"Parallel execution processes multiple items simultaneously, improving performance for I/O-bound operations."})]})]})}function wU({config:e,onChange:t}){return s.jsxs("div",{className:"loop-results-section",children:[s.jsx(Pn,{label:"Collect Results",children:s.jsxs("label",{className:"loop-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.collect,onChange:n=>t({collect:n.target.checked})}),s.jsx("span",{className:"loop-panel-toggle-slider"}),s.jsx("span",{className:"loop-panel-toggle-label",children:e.collect?"Collect into array":"Discard results"})]})}),e.collect&&s.jsxs(Pn,{label:"Aggregation Key",hint:"state key for results",children:[s.jsx("input",{type:"text",className:"loop-panel-input loop-panel-input-mono",value:e.aggregationKey??"",onChange:n=>t({aggregationKey:n.target.value||void 0}),placeholder:"loopResults"}),s.jsx("div",{className:"loop-panel-field-help",children:"State key where the array of results will be stored. If empty, uses the node's output key."})]}),s.jsxs("div",{className:"loop-panel-info",children:[s.jsx("span",{className:"loop-panel-info-icon",children:""}),s.jsx("span",{className:"loop-panel-info-text",children:"When collecting results, each iteration's output is gathered into an array that can be used by subsequent nodes."})]})]})}const _U=["wait_all","wait_any","wait_n"],kU={wait_all:{label:"Wait All",description:"Wait for all incoming branches to complete",icon:""},wait_any:{label:"Wait Any",description:"Continue when first branch completes",icon:""},wait_n:{label:"Wait N",description:"Wait for N branches to complete",icon:""}},SU=["array","object","first","last"],NU={array:{label:"Array",description:"Collect outputs into an array",icon:""},object:{label:"Object",description:"Merge into object with branch keys",icon:""},first:{label:"First",description:"Use first completed branch output",icon:"1"},last:{label:"Last",description:"Use last completed branch output",icon:""}},jU=["continue","error"],EU={continue:"Continue with available results",error:"Throw error on timeout"};function Vp({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"merge-panel-section",children:[s.jsxs("button",{className:"merge-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"merge-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"merge-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"merge-panel-section-content",children:n})]})}function Ta({label:e,hint:t,required:n,children:r}){return s.jsxs("div",{className:"merge-panel-field",children:[s.jsxs("label",{className:"merge-panel-label",children:[e,n&&s.jsx("span",{className:"merge-panel-required",children:"*"}),t&&s.jsxs("span",{className:"merge-panel-hint",children:["(",t,")"]})]}),r]})}function CU({node:e,onChange:t}){const n=E.useCallback(d=>{const p={mode:d};d==="wait_n"&&!e.waitCount&&(p.waitCount=2),t({...e,...p})},[e,t]),r=E.useCallback(d=>{t({...e,waitCount:d})},[e,t]),i=E.useCallback(d=>{const p={combineStrategy:d};d==="object"&&(!e.branchKeys||e.branchKeys.length===0)&&(p.branchKeys=["branch1","branch2"]),t({...e,...p})},[e,t]),a=E.useCallback(d=>{t({...e,branchKeys:d})},[e,t]),c=E.useCallback(d=>{t({...e,timeout:{...e.timeout,...d}})},[e,t]),u=E.useCallback(d=>{t({...e,...d})},[e,t]);return s.jsxs("div",{className:"merge-panel",children:[s.jsx(Vp,{title:"Merge Mode",defaultOpen:!0,children:s.jsx(TU,{mode:e.mode,waitCount:e.waitCount,onChange:n,onWaitCountChange:r})}),s.jsx(Vp,{title:"Combine Strategy",defaultOpen:!0,children:s.jsx(AU,{strategy:e.combineStrategy,branchKeys:e.branchKeys,onChange:i,onBranchKeysChange:a})}),s.jsx(Vp,{title:"Timeout Handling",defaultOpen:!1,children:s.jsx(IU,{timeout:e.timeout,onChange:c})}),s.jsx(Gn,{properties:e,onChange:u,showIdentity:!0})]})}function TU({mode:e,waitCount:t,onChange:n,onWaitCountChange:r}){return s.jsxs("div",{className:"merge-mode-section",children:[s.jsx("div",{className:"merge-mode-selector",children:_U.map(i=>{const a=kU[i];return s.jsxs("button",{type:"button",className:`merge-mode-option ${e===i?"selected":""}`,onClick:()=>n(i),children:[s.jsx("span",{className:"merge-mode-icon",children:a.icon}),s.jsx("span",{className:"merge-mode-label",children:a.label}),s.jsx("span",{className:"merge-mode-description",children:a.description})]},i)})}),e==="wait_n"&&s.jsx("div",{className:"merge-wait-count",children:s.jsxs(Ta,{label:"Wait Count",required:!0,hint:"number of branches",children:[s.jsx("input",{type:"number",className:"merge-panel-input",value:t??2,onChange:i=>r(parseInt(i.target.value,10)||2),min:1,max:100}),s.jsx("div",{className:"merge-panel-field-help",children:"Number of branches that must complete before continuing."})]})}),s.jsxs("div",{className:"merge-panel-info",children:[s.jsx("span",{className:"merge-panel-info-icon",children:""}),s.jsxs("span",{className:"merge-panel-info-text",children:[e==="wait_all"&&"All incoming branches must complete before the workflow continues.",e==="wait_any"&&"The workflow continues as soon as any branch completes. Other branches may still be running.",e==="wait_n"&&`The workflow continues after ${t||2} branches complete.`]})]})]})}function AU({strategy:e,branchKeys:t,onChange:n,onBranchKeysChange:r}){return s.jsxs("div",{className:"merge-strategy-section",children:[s.jsx("div",{className:"merge-strategy-selector",children:SU.map(i=>{const a=NU[i];return s.jsxs("button",{type:"button",className:`merge-strategy-option ${e===i?"selected":""}`,onClick:()=>n(i),children:[s.jsx("span",{className:"merge-strategy-icon",children:a.icon}),s.jsx("span",{className:"merge-strategy-label",children:a.label}),s.jsx("span",{className:"merge-strategy-description",children:a.description})]},i)})}),e==="object"&&s.jsxs("div",{className:"merge-branch-keys",children:[s.jsx(Ta,{label:"Branch Keys",hint:"keys for merged object",children:s.jsx(PU,{keys:t||[],onChange:r})}),s.jsx("div",{className:"merge-panel-field-help",children:"Each branch output will be stored under its corresponding key in the merged object."})]}),s.jsxs("div",{className:"merge-panel-info",children:[s.jsx("span",{className:"merge-panel-info-icon",children:""}),s.jsxs("span",{className:"merge-panel-info-text",children:[e==="array"&&"Branch outputs are collected into an array in completion order.",e==="object"&&"Branch outputs are merged into an object using the specified keys.",e==="first"&&"Only the first completed branch output is used.",e==="last"&&"Only the last completed branch output is used."]})]})]})}function PU({keys:e,onChange:t}){const n=()=>{t([...e,`branch${e.length+1}`])},r=a=>{const c=[...e];c.splice(a,1),t(c)},i=(a,c)=>{const u=[...e];u[a]=c,t(u)};return s.jsxs("div",{className:"merge-branch-keys-editor",children:[e.length===0?s.jsx("div",{className:"merge-panel-empty",children:s.jsx("span",{className:"merge-panel-empty-text",children:"No branch keys defined"})}):s.jsx("div",{className:"merge-branch-keys-list",children:e.map((a,c)=>s.jsxs("div",{className:"merge-branch-key-row",children:[s.jsxs("span",{className:"merge-branch-key-index",children:["#",c+1]}),s.jsx("input",{type:"text",className:"merge-panel-input merge-panel-input-mono",value:a,onChange:u=>i(c,u.target.value),placeholder:`branch${c+1}`}),s.jsx("button",{type:"button",className:"merge-branch-key-remove",onClick:()=>r(c),title:"Remove key",children:""})]},c))}),s.jsx("button",{type:"button",className:"merge-branch-key-add",onClick:n,children:"+ Add Branch Key"})]})}function IU({timeout:e,onChange:t}){return s.jsxs("div",{className:"merge-timeout-section",children:[s.jsx(Ta,{label:"Enable Timeout",children:s.jsxs("label",{className:"merge-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.enabled,onChange:n=>t({enabled:n.target.checked})}),s.jsx("span",{className:"merge-panel-toggle-slider"}),s.jsx("span",{className:"merge-panel-toggle-label",children:e.enabled?"Enabled":"Disabled"})]})}),e.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs(Ta,{label:"Timeout Duration",required:!0,hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"merge-panel-input",value:e.ms,onChange:n=>t({ms:parseInt(n.target.value,10)||3e4}),min:0,step:1e3,placeholder:"30000"}),s.jsx("div",{className:"merge-panel-field-help",children:"Maximum time to wait for branches to complete."})]}),s.jsx(Ta,{label:"Timeout Behavior",required:!0,children:s.jsx("select",{className:"merge-panel-select",value:e.behavior,onChange:n=>t({behavior:n.target.value}),children:jU.map(n=>s.jsx("option",{value:n,children:EU[n]},n))})})]}),s.jsxs("div",{className:"merge-panel-info merge-panel-info-warning",children:[s.jsx("span",{className:"merge-panel-info-icon",children:""}),s.jsx("span",{className:"merge-panel-info-text",children:e.enabled?e.behavior==="continue"?"If timeout occurs, the merge will continue with whatever results are available.":"If timeout occurs, the workflow will fail with a timeout error.":"Without a timeout, the merge will wait indefinitely for all required branches."})]})]})}const RU=["fixed","until","webhook","condition"],OU={fixed:{label:"Fixed Duration",description:"Wait for a specific amount of time",icon:""},until:{label:"Until Timestamp",description:"Wait until a specific date/time",icon:""},webhook:{label:"Webhook Callback",description:"Wait for an external webhook call",icon:""},condition:{label:"Condition Polling",description:"Poll until a condition becomes true",icon:""}},MU=["ms","s","m","h"],LU={ms:"Milliseconds",s:"Seconds",m:"Minutes",h:"Hours"};function ya({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"wait-panel-section",children:[s.jsxs("button",{className:"wait-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"wait-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"wait-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"wait-panel-section-content",children:n})]})}function Rr({label:e,hint:t,required:n,children:r}){return s.jsxs("div",{className:"wait-panel-field",children:[s.jsxs("label",{className:"wait-panel-label",children:[e,n&&s.jsx("span",{className:"wait-panel-required",children:"*"}),t&&s.jsxs("span",{className:"wait-panel-hint",children:["(",t,")"]})]}),r]})}function DU({node:e,onChange:t}){const n=E.useCallback(d=>{const p={waitType:d};d==="fixed"&&!e.fixed?p.fixed={duration:5,unit:"s"}:d==="until"&&!e.until?p.until={timestamp:new Date(Date.now()+36e5).toISOString()}:d==="webhook"&&!e.webhook?p.webhook={path:"/api/webhook/wait-callback",timeout:3e5}:d==="condition"&&!e.condition&&(p.condition={expression:"state.isReady === true",pollInterval:5e3,maxWait:3e5}),t({...e,...p})},[e,t]),r=E.useCallback(d=>{t({...e,fixed:{...e.fixed,...d}})},[e,t]),i=E.useCallback(d=>{t({...e,until:{...e.until,...d}})},[e,t]),a=E.useCallback(d=>{t({...e,webhook:{...e.webhook,...d}})},[e,t]),c=E.useCallback(d=>{t({...e,condition:{...e.condition,...d}})},[e,t]),u=E.useCallback(d=>{t({...e,...d})},[e,t]);return s.jsxs("div",{className:"wait-panel",children:[s.jsx(ya,{title:"Wait Type",defaultOpen:!0,children:s.jsx(qU,{waitType:e.waitType,onChange:n})}),e.waitType==="fixed"&&e.fixed&&s.jsx(ya,{title:"Duration Configuration",defaultOpen:!0,children:s.jsx(FU,{fixed:e.fixed,onChange:r})}),e.waitType==="until"&&e.until&&s.jsx(ya,{title:"Timestamp Configuration",defaultOpen:!0,children:s.jsx(zU,{until:e.until,onChange:i})}),e.waitType==="webhook"&&e.webhook&&s.jsx(ya,{title:"Webhook Configuration",defaultOpen:!0,children:s.jsx(BU,{webhook:e.webhook,onChange:a})}),e.waitType==="condition"&&e.condition&&s.jsx(ya,{title:"Condition Configuration",defaultOpen:!0,children:s.jsx($U,{condition:e.condition,onChange:c})}),s.jsx(Gn,{properties:e,onChange:u,showIdentity:!0})]})}function qU({waitType:e,onChange:t}){return s.jsx("div",{className:"wait-type-section",children:s.jsx("div",{className:"wait-type-selector",children:RU.map(n=>{const r=OU[n];return s.jsxs("button",{type:"button",className:`wait-type-option ${e===n?"selected":""}`,onClick:()=>t(n),children:[s.jsx("span",{className:"wait-type-icon",children:r.icon}),s.jsx("span",{className:"wait-type-label",children:r.label}),s.jsx("span",{className:"wait-type-description",children:r.description})]},n)})})})}function FU({fixed:e,onChange:t}){const n=()=>{const{duration:r,unit:i}=e;let a=r;switch(i){case"s":a=r*1e3;break;case"m":a=r*6e4;break;case"h":a=r*36e5;break}return a<1e3?`${a} milliseconds`:a<6e4?`${a/1e3} seconds`:a<36e5?`${(a/6e4).toFixed(1)} minutes`:`${(a/36e5).toFixed(2)} hours`};return s.jsxs("div",{className:"wait-fixed-section",children:[s.jsxs("div",{className:"wait-duration-row",children:[s.jsx(Rr,{label:"Duration",required:!0,children:s.jsx("input",{type:"number",className:"wait-panel-input wait-duration-input",value:e.duration,onChange:r=>t({duration:parseInt(r.target.value,10)||0}),min:0,step:1})}),s.jsx(Rr,{label:"Unit",required:!0,children:s.jsx("select",{className:"wait-panel-select wait-unit-select",value:e.unit,onChange:r=>t({unit:r.target.value}),children:MU.map(r=>s.jsx("option",{value:r,children:LU[r]},r))})})]}),s.jsxs("div",{className:"wait-panel-presets",children:[s.jsx("span",{className:"wait-panel-presets-label",children:"Presets:"}),s.jsxs("div",{className:"wait-panel-presets-buttons",children:[s.jsx("button",{type:"button",onClick:()=>t({duration:1,unit:"s"}),children:"1s"}),s.jsx("button",{type:"button",onClick:()=>t({duration:5,unit:"s"}),children:"5s"}),s.jsx("button",{type:"button",onClick:()=>t({duration:30,unit:"s"}),children:"30s"}),s.jsx("button",{type:"button",onClick:()=>t({duration:1,unit:"m"}),children:"1m"}),s.jsx("button",{type:"button",onClick:()=>t({duration:5,unit:"m"}),children:"5m"}),s.jsx("button",{type:"button",onClick:()=>t({duration:1,unit:"h"}),children:"1h"})]})]}),s.jsxs("div",{className:"wait-panel-preview",children:[s.jsx("span",{className:"wait-panel-preview-label",children:"Wait for:"}),s.jsx("span",{className:"wait-panel-preview-value",children:n()})]})]})}function zU({until:e,onChange:t}){const[n,r]=E.useState(e.timestamp.startsWith("{{")||e.timestamp.includes("state."));return s.jsxs("div",{className:"wait-until-section",children:[s.jsx("div",{className:"wait-panel-toggle-row",children:s.jsxs("label",{className:"wait-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:i=>r(i.target.checked)}),s.jsx("span",{className:"wait-panel-toggle-slider"}),s.jsx("span",{className:"wait-panel-toggle-label",children:"Use expression"})]})}),n?s.jsxs(Rr,{label:"Timestamp Expression",required:!0,hint:"returns ISO string",children:[s.jsx("input",{type:"text",className:"wait-panel-input wait-panel-input-mono",value:e.timestamp,onChange:i=>t({timestamp:i.target.value}),placeholder:"{{state.targetTime}}"}),s.jsx("div",{className:"wait-panel-field-help",children:"Expression should return an ISO 8601 timestamp string."})]}):s.jsx(Rr,{label:"Target Date/Time",required:!0,children:s.jsx("input",{type:"datetime-local",className:"wait-panel-input",value:e.timestamp.slice(0,16),onChange:i=>t({timestamp:new Date(i.target.value).toISOString()})})}),s.jsxs("div",{className:"wait-panel-info",children:[s.jsx("span",{className:"wait-panel-info-icon",children:""}),s.jsx("span",{className:"wait-panel-info-text",children:"The workflow will pause until the specified timestamp is reached. If the timestamp is in the past, the wait will complete immediately."})]})]})}function BU({webhook:e,onChange:t}){return s.jsxs("div",{className:"wait-webhook-section",children:[s.jsx(Rr,{label:"Callback Path",required:!0,hint:"webhook endpoint",children:s.jsx("input",{type:"text",className:"wait-panel-input wait-panel-input-mono",value:e.path,onChange:n=>t({path:n.target.value}),placeholder:"/api/webhook/callback"})}),s.jsxs(Rr,{label:"Timeout",required:!0,hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"wait-panel-input",value:e.timeout,onChange:n=>t({timeout:parseInt(n.target.value,10)||3e5}),min:0,step:1e3}),s.jsxs("div",{className:"wait-panel-field-help",children:["Maximum time to wait for the webhook callback (",(e.timeout/6e4).toFixed(1)," minutes)."]})]}),s.jsxs("div",{className:"wait-panel-presets",children:[s.jsx("span",{className:"wait-panel-presets-label",children:"Timeout presets:"}),s.jsxs("div",{className:"wait-panel-presets-buttons",children:[s.jsx("button",{type:"button",onClick:()=>t({timeout:6e4}),children:"1m"}),s.jsx("button",{type:"button",onClick:()=>t({timeout:3e5}),children:"5m"}),s.jsx("button",{type:"button",onClick:()=>t({timeout:9e5}),children:"15m"}),s.jsx("button",{type:"button",onClick:()=>t({timeout:36e5}),children:"1h"})]})]}),s.jsxs("div",{className:"wait-panel-info",children:[s.jsx("span",{className:"wait-panel-info-icon",children:""}),s.jsx("span",{className:"wait-panel-info-text",children:"The workflow will pause until an HTTP request is received at the callback path. The request body will be available in the workflow state."})]})]})}function $U({condition:e,onChange:t}){return s.jsxs("div",{className:"wait-condition-section",children:[s.jsxs(Rr,{label:"Condition Expression",required:!0,hint:"JavaScript expression",children:[s.jsx("textarea",{className:"wait-panel-textarea wait-panel-input-mono",value:e.expression,onChange:n=>t({expression:n.target.value}),placeholder:"state.isReady === true",rows:3}),s.jsx("div",{className:"wait-panel-field-help",children:"Expression is evaluated against the workflow state. Wait completes when it returns true."})]}),s.jsxs(Rr,{label:"Poll Interval",required:!0,hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"wait-panel-input",value:e.pollInterval,onChange:n=>t({pollInterval:parseInt(n.target.value,10)||5e3}),min:100,step:1e3}),s.jsxs("div",{className:"wait-panel-field-help",children:["How often to check the condition (",(e.pollInterval/1e3).toFixed(1)," seconds)."]})]}),s.jsxs(Rr,{label:"Maximum Wait",required:!0,hint:"milliseconds",children:[s.jsx("input",{type:"number",className:"wait-panel-input",value:e.maxWait,onChange:n=>t({maxWait:parseInt(n.target.value,10)||3e5}),min:0,step:1e3}),s.jsxs("div",{className:"wait-panel-field-help",children:["Maximum time to wait before timing out (",(e.maxWait/6e4).toFixed(1)," minutes)."]})]}),s.jsxs("div",{className:"wait-panel-presets",children:[s.jsx("span",{className:"wait-panel-presets-label",children:"Poll interval presets:"}),s.jsxs("div",{className:"wait-panel-presets-buttons",children:[s.jsx("button",{type:"button",onClick:()=>t({pollInterval:1e3}),children:"1s"}),s.jsx("button",{type:"button",onClick:()=>t({pollInterval:5e3}),children:"5s"}),s.jsx("button",{type:"button",onClick:()=>t({pollInterval:1e4}),children:"10s"}),s.jsx("button",{type:"button",onClick:()=>t({pollInterval:3e4}),children:"30s"})]})]}),s.jsxs("div",{className:"wait-panel-info wait-panel-info-warning",children:[s.jsx("span",{className:"wait-panel-info-icon",children:""}),s.jsxs("span",{className:"wait-panel-info-text",children:["Frequent polling may impact performance. Use longer intervals when possible. If the condition is never met, the wait will timeout after ",(e.maxWait/6e4).toFixed(1)," minutes."]})]})]})}const HU=["javascript","typescript"],eu={javascript:{label:"JavaScript",description:"Standard JavaScript (ES2020+)",icon:"",defaultCode:`// Access input data via 'input' variable
// Return the transformed result

const result = input.data.map(item => ({
  ...item,
  processed: true
}));

return result;`},typescript:{label:"TypeScript",description:"TypeScript (transpiled to JS)",icon:"",defaultCode:`// Access input data via 'input' variable
// Return the transformed result

interface Item {
  id: string;
  name: string;
}

const result: Item[] = input.data.map((item: Item) => ({
  ...item,
  processed: true
}));

return result;`}},VU={networkAccess:!1,fileSystemAccess:!1,memoryLimit:128,timeLimit:5e3};function vu({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"code-panel-section",children:[s.jsxs("button",{className:"code-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"code-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"code-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"code-panel-section-content",children:n})]})}function Zo({label:e,hint:t,required:n,children:r}){return s.jsxs("div",{className:"code-panel-field",children:[s.jsxs("label",{className:"code-panel-label",children:[e,n&&s.jsx("span",{className:"code-panel-required",children:"*"}),t&&s.jsxs("span",{className:"code-panel-hint",children:["(",t,")"]})]}),r]})}function UU({node:e,onChange:t}){const n=E.useCallback(p=>{t({...e,language:p})},[e,t]),r=E.useCallback(p=>{t({...e,code:p})},[e,t]),i=E.useCallback(p=>{t({...e,sandbox:{...e.sandbox,...p}})},[e,t]),a=E.useCallback(p=>{if(p===void 0||p===""){const{inputType:f,...m}=e;t(m)}else t({...e,inputType:p})},[e,t]),c=E.useCallback(p=>{if(p===void 0||p===""){const{outputType:f,...m}=e;t(m)}else t({...e,outputType:p})},[e,t]),u=E.useCallback(p=>{t({...e,...p})},[e,t]),d=E.useCallback(()=>{const p=eu[e.language];r(p.defaultCode)},[e.language,r]);return s.jsxs("div",{className:"code-panel",children:[s.jsx(vu,{title:"Language",defaultOpen:!0,children:s.jsx("div",{className:"code-language-selector",children:HU.map(p=>{const f=eu[p];return s.jsxs("button",{type:"button",className:`code-language-option ${e.language===p?"selected":""}`,onClick:()=>n(p),children:[s.jsx("span",{className:"code-language-icon",children:f.icon}),s.jsx("span",{className:"code-language-label",children:f.label}),s.jsx("span",{className:"code-language-description",children:f.description})]},p)})})}),s.jsx(WU,{language:e.language,code:e.code,onChange:r,onInsertTemplate:d}),s.jsx(GU,{inputType:e.inputType,outputType:e.outputType,onInputTypeChange:a,onOutputTypeChange:c}),s.jsx(YU,{sandbox:e.sandbox,onChange:i}),s.jsx(Gn,{properties:e,onChange:u,showIdentity:!0})]})}function WU({language:e,code:t,onChange:n,onInsertTemplate:r}){const i=E.useRef(null),[a,c]=E.useState(1);E.useEffect(()=>{const d=t.split(`
`).length;c(Math.max(d,1))},[t]);const u=d=>{if(d.key==="Tab"){d.preventDefault();const p=i.current;if(!p)return;const f=p.selectionStart,m=p.selectionEnd,g=t.substring(0,f)+"  "+t.substring(m);n(g),setTimeout(()=>{p.selectionStart=p.selectionEnd=f+2},0)}};return s.jsx(vu,{title:"Code",defaultOpen:!0,children:s.jsxs("div",{className:"code-editor-container",children:[s.jsxs("div",{className:"code-editor-toolbar",children:[s.jsxs("span",{className:"code-editor-language-badge",children:[eu[e].icon," ",eu[e].label]}),s.jsxs("div",{className:"code-editor-actions",children:[s.jsx("button",{type:"button",className:"code-editor-action",onClick:r,title:"Insert template code",children:" Template"}),s.jsx("button",{type:"button",className:"code-editor-action",onClick:()=>n(""),title:"Clear code",children:" Clear"})]})]}),s.jsxs("div",{className:"code-editor-wrapper",children:[s.jsx("div",{className:"code-editor-line-numbers",children:Array.from({length:a},(d,p)=>s.jsx("span",{className:"code-editor-line-number",children:p+1},p+1))}),s.jsx("textarea",{ref:i,className:"code-editor-textarea",value:t,onChange:d=>n(d.target.value),onKeyDown:u,placeholder:"// Enter your code here...",spellCheck:!1,rows:Math.max(10,a)})]}),s.jsx("div",{className:"code-editor-hints",children:s.jsx(KU,{language:e})})]})})}function KU({language:e}){return s.jsxs("div",{className:"code-hint-box",children:[s.jsx("div",{className:"code-hint-title",children:"Available Context"}),s.jsxs("ul",{className:"code-hint-list",children:[s.jsxs("li",{children:[s.jsx("code",{children:"input"})," - Input data from state mapping"]}),s.jsxs("li",{children:[s.jsx("code",{children:"return value;"})," - Return the result"]}),e==="typescript"&&s.jsxs("li",{children:[s.jsx("code",{children:"interface"})," - Define types for better hints"]}),s.jsxs("li",{children:["Standard ",e==="typescript"?"TypeScript":"JavaScript"," APIs available"]})]}),s.jsx("div",{className:"code-hint-warning",children:" Code runs in a sandboxed environment with configurable restrictions"})]})}function GU({inputType:e,outputType:t,onInputTypeChange:n,onOutputTypeChange:r}){return s.jsxs(vu,{title:"Type Hints",defaultOpen:!1,children:[s.jsx(Zo,{label:"Input Type",hint:"TypeScript type definition",children:s.jsx("textarea",{className:"code-panel-type-input",value:e||"",onChange:i=>n(i.target.value||void 0),placeholder:"{ data: Array<{ id: string; name: string }> }",rows:3,spellCheck:!1})}),s.jsx(Zo,{label:"Output Type",hint:"TypeScript type definition",children:s.jsx("textarea",{className:"code-panel-type-input",value:t||"",onChange:i=>r(i.target.value||void 0),placeholder:"Array<{ id: string; name: string; processed: boolean }>",rows:3,spellCheck:!1})}),s.jsxs("div",{className:"code-panel-info",children:[s.jsx("span",{className:"code-panel-info-icon",children:""}),s.jsx("span",{className:"code-panel-info-text",children:"Type hints improve editor auto-completion and help catch errors early."})]})]})}function YU({sandbox:e,onChange:t}){const r=!e.networkAccess&&!e.fileSystemAccess?"strict":e.networkAccess&&e.fileSystemAccess?"open":"relaxed";return s.jsxs(vu,{title:"Sandbox Security",defaultOpen:!1,children:[s.jsxs("div",{className:`code-sandbox-level code-sandbox-level-${r}`,children:[s.jsx("span",{className:"code-sandbox-level-icon",children:r==="strict"?"":r==="relaxed"?"":""}),s.jsx("span",{className:"code-sandbox-level-label",children:r==="strict"?"Strict Sandbox":r==="relaxed"?"Relaxed Sandbox":"Open Access"}),s.jsx("span",{className:"code-sandbox-level-description",children:r==="strict"?"No network or file system access":r==="relaxed"?"Limited access enabled":"Full access enabled"})]}),s.jsxs("div",{className:"code-sandbox-toggles",children:[s.jsx(Zo,{label:"Network Access",hint:"allow HTTP requests",children:s.jsxs("label",{className:"code-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.networkAccess,onChange:i=>t({networkAccess:i.target.checked})}),s.jsx("span",{className:"code-panel-toggle-slider"}),s.jsx("span",{className:"code-panel-toggle-label",children:e.networkAccess?" Enabled":" Disabled"})]})}),s.jsx(Zo,{label:"File System Access",hint:"allow file operations",children:s.jsxs("label",{className:"code-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:e.fileSystemAccess,onChange:i=>t({fileSystemAccess:i.target.checked})}),s.jsx("span",{className:"code-panel-toggle-slider"}),s.jsx("span",{className:"code-panel-toggle-label",children:e.fileSystemAccess?" Enabled":" Disabled"})]})})]}),s.jsxs("div",{className:"code-sandbox-limits",children:[s.jsxs(Zo,{label:"Memory Limit",hint:"MB",children:[s.jsxs("div",{className:"code-sandbox-limit-input",children:[s.jsx("input",{type:"number",className:"code-panel-input",value:e.memoryLimit,onChange:i=>t({memoryLimit:parseInt(i.target.value,10)||0}),min:0,max:1024,step:32}),s.jsx("span",{className:"code-sandbox-limit-unit",children:"MB"})]}),s.jsx("div",{className:"code-panel-field-help",children:"Maximum memory allocation. Set to 0 for unlimited (not recommended)."})]}),s.jsxs(Zo,{label:"Time Limit",hint:"ms",children:[s.jsxs("div",{className:"code-sandbox-limit-input",children:[s.jsx("input",{type:"number",className:"code-panel-input",value:e.timeLimit,onChange:i=>t({timeLimit:parseInt(i.target.value,10)||0}),min:0,max:6e4,step:1e3}),s.jsx("span",{className:"code-sandbox-limit-unit",children:"ms"})]}),s.jsx("div",{className:"code-panel-field-help",children:"Maximum execution time. Set to 0 for unlimited (not recommended)."})]})]}),r!=="strict"&&s.jsxs("div",{className:"code-sandbox-warning",children:[s.jsx("span",{className:"code-sandbox-warning-icon",children:""}),s.jsx("span",{className:"code-sandbox-warning-text",children:r==="open"?"Full access enabled. Code can make network requests and access the file system. Use with caution.":"Some access restrictions have been relaxed. Ensure the code is trusted."})]}),s.jsx("button",{type:"button",className:"code-sandbox-reset",onClick:()=>t(VU),children:"Reset to Secure Defaults"})]})}const XU=["postgresql","mysql","sqlite","mongodb","redis"],Up={postgresql:{label:"PostgreSQL",icon:"",description:"Advanced open-source relational database"},mysql:{label:"MySQL",icon:"",description:"Popular open-source relational database"},sqlite:{label:"SQLite",icon:"",description:"Lightweight file-based database"},mongodb:{label:"MongoDB",icon:"",description:"Document-oriented NoSQL database"},redis:{label:"Redis",icon:"",description:"In-memory key-value store"}},QU=["query","insert","update","delete","upsert"],Wp={query:{label:"SELECT",description:"Retrieve data from database",template:"SELECT * FROM table_name WHERE condition = $1"},insert:{label:"INSERT",description:"Insert new records",template:"INSERT INTO table_name (column1, column2) VALUES ($1, $2) RETURNING *"},update:{label:"UPDATE",description:"Update existing records",template:"UPDATE table_name SET column1 = $1 WHERE id = $2 RETURNING *"},delete:{label:"DELETE",description:"Delete records",template:"DELETE FROM table_name WHERE id = $1 RETURNING *"},upsert:{label:"UPSERT",description:"Insert or update on conflict",template:"INSERT INTO table_name (id, column1) VALUES ($1, $2) ON CONFLICT (id) DO UPDATE SET column1 = $2 RETURNING *"}},JU=["find","findOne","insert","update","delete"],ZU={find:{label:"find()",description:"Find multiple documents"},findOne:{label:"findOne()",description:"Find a single document"},insert:{label:"insertOne()",description:"Insert a new document"},update:{label:"updateOne()",description:"Update a document"},delete:{label:"deleteOne()",description:"Delete a document"}},e8=["get","set","del","hget","hset","lpush","rpop"],t8={get:{label:"GET",description:"Get string value"},set:{label:"SET",description:"Set string value"},del:{label:"DEL",description:"Delete key"},hget:{label:"HGET",description:"Get hash field"},hset:{label:"HSET",description:"Set hash field"},lpush:{label:"LPUSH",description:"Push to list head"},rpop:{label:"RPOP",description:"Pop from list tail"}};function rl({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"db-panel-section",children:[s.jsxs("button",{className:"db-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"db-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"db-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"db-panel-section-content",children:n})]})}function Yt({label:e,hint:t,required:n,children:r}){return s.jsxs("div",{className:"db-panel-field",children:[s.jsxs("label",{className:"db-panel-label",children:[e,n&&s.jsx("span",{className:"db-panel-required",children:"*"}),t&&s.jsxs("span",{className:"db-panel-hint",children:["(",t,")"]})]}),r]})}function n8({node:e,onChange:t}){const n=E.useCallback(p=>{const f={dbType:p};p==="mongodb"?(f.sql=void 0,f.redis=void 0,e.mongodb||(f.mongodb={collection:"",operation:"find"})):p==="redis"?(f.sql=void 0,f.mongodb=void 0,e.redis||(f.redis={operation:"get",key:""})):(f.mongodb=void 0,f.redis=void 0,e.sql||(f.sql={operation:"query",query:""})),t({...e,...f})},[e,t]),r=E.useCallback(p=>{t({...e,connection:{...e.connection,...p}})},[e,t]),i=E.useCallback(p=>{t({...e,sql:{...e.sql,...p}})},[e,t]),a=E.useCallback(p=>{t({...e,mongodb:{...e.mongodb,...p}})},[e,t]),c=E.useCallback(p=>{t({...e,redis:{...e.redis,...p}})},[e,t]),u=E.useCallback(p=>{t({...e,...p})},[e,t]),d=["postgresql","mysql","sqlite"].includes(e.dbType);return s.jsxs("div",{className:"db-panel",children:[s.jsxs(rl,{title:"Database Type",defaultOpen:!0,children:[s.jsx(Yt,{label:"Select Database",children:s.jsx("div",{className:"db-type-selector",children:XU.map(p=>{const f=Up[p];return s.jsxs("button",{type:"button",className:`db-type-option ${e.dbType===p?"selected":""} db-type-${p}`,onClick:()=>n(p),title:f.description,children:[s.jsx("span",{className:"db-type-icon",children:f.icon}),s.jsx("span",{className:"db-type-label",children:f.label})]},p)})})}),s.jsxs("div",{className:"db-panel-info",children:[s.jsx("span",{className:"db-panel-info-icon",children:Up[e.dbType].icon}),s.jsx("span",{className:"db-panel-info-text",children:Up[e.dbType].description})]})]}),s.jsx(r8,{connection:e.connection,dbType:e.dbType,onChange:r}),d&&e.sql&&s.jsx(i8,{sql:e.sql,onChange:i}),e.dbType==="mongodb"&&e.mongodb&&s.jsx(o8,{mongodb:e.mongodb,onChange:a}),e.dbType==="redis"&&e.redis&&s.jsx(s8,{redis:e.redis,onChange:c}),s.jsx(Gn,{properties:e,onChange:u,showIdentity:!0})]})}function r8({connection:e,dbType:t,onChange:n}){const[r,i]=E.useState(!1),a=()=>{switch(t){case"postgresql":return"postgresql://user:password@localhost:5432/database";case"mysql":return"mysql://user:password@localhost:3306/database";case"sqlite":return"./data/database.sqlite";case"mongodb":return"mongodb://user:password@localhost:27017/database";case"redis":return"redis://localhost:6379";default:return"Connection string"}};return s.jsxs(rl,{title:"Connection",defaultOpen:!0,children:[s.jsxs(Yt,{label:"Connection String",required:!0,hint:"secret - stored securely",children:[s.jsxs("div",{className:"db-connection-input-wrapper",children:[s.jsx("input",{type:r?"text":"password",className:"db-panel-input db-panel-input-mono",value:e.connectionString,onChange:c=>n({connectionString:c.target.value}),placeholder:a()}),s.jsx("button",{type:"button",className:"db-connection-toggle",onClick:()=>i(!r),title:r?"Hide":"Show",children:r?"":""})]}),s.jsx("div",{className:"db-panel-field-help",children:" Connection strings are stored securely and never logged."})]}),s.jsxs(Yt,{label:"Credential Reference",hint:"optional - reference Set node",children:[s.jsx("input",{type:"text",className:"db-panel-input",value:e.credentialRef||"",onChange:c=>n({credentialRef:c.target.value||void 0}),placeholder:"set_node_id.DB_CONNECTION"}),s.jsxs("div",{className:"db-panel-field-help",children:["Reference credentials from a Set node (e.g., ",s.jsx("code",{children:"credentials.DB_URL"}),")"]})]}),t!=="sqlite"&&s.jsxs(Yt,{label:"Pool Size",hint:"connections",children:[s.jsx("input",{type:"number",className:"db-panel-input",value:e.poolSize||5,onChange:c=>n({poolSize:parseInt(c.target.value,10)||5}),min:1,max:100}),s.jsx("div",{className:"db-panel-field-help",children:"Number of connections to maintain in the pool (default: 5)"})]}),s.jsxs("button",{type:"button",className:"db-test-connection-btn",disabled:!0,children:[" Test Connection",s.jsx("span",{className:"db-test-connection-hint",children:"(available at runtime)"})]})]})}function i8({sql:e,onChange:t}){const[n,r]=E.useState(e.params?JSON.stringify(e.params,null,2):"{}"),[i,a]=E.useState(null),c=d=>{t({operation:d,query:Wp[d].template})},u=d=>{r(d);try{if(d.trim()){const p=JSON.parse(d);a(null),t({params:p})}else a(null),t({params:void 0})}catch{a("Invalid JSON")}};return s.jsxs(rl,{title:"SQL Operation",defaultOpen:!0,children:[s.jsx(Yt,{label:"Operation Type",children:s.jsx("div",{className:"db-operation-selector",children:QU.map(d=>{const p=Wp[d];return s.jsx("button",{type:"button",className:`db-operation-option ${e.operation===d?"selected":""}`,onClick:()=>c(d),title:p.description,children:p.label},d)})})}),s.jsxs(Yt,{label:"SQL Query",required:!0,hint:"parameterized with $1, $2, etc.",children:[s.jsx("textarea",{className:"db-panel-textarea db-panel-textarea-mono",value:e.query,onChange:d=>t({query:d.target.value}),placeholder:Wp[e.operation].template,rows:6}),s.jsxs("div",{className:"db-panel-field-help",children:["Use ",s.jsx("code",{children:"$1"}),", ",s.jsx("code",{children:"$2"}),", etc. for parameterized queries to prevent SQL injection."]})]}),s.jsxs(Yt,{label:"Query Parameters",hint:"JSON object",children:[s.jsx("textarea",{className:`db-panel-textarea db-panel-textarea-mono ${i?"error":""}`,value:n,onChange:d=>u(d.target.value),placeholder:'{"$1": "value1", "$2": 123}',rows:4}),i&&s.jsx("span",{className:"db-panel-error",children:i}),s.jsxs("div",{className:"db-panel-field-help",children:["Map parameter placeholders to values. Supports ",s.jsx("code",{children:"{{variable}}"})," interpolation."]})]})]})}function o8({mongodb:e,onChange:t}){const[n,r]=E.useState(e.filter?JSON.stringify(e.filter,null,2):"{}"),[i,a]=E.useState(null),[c,u]=E.useState(e.document?JSON.stringify(e.document,null,2):"{}"),[d,p]=E.useState(null),f=w=>{r(w);try{if(w.trim()){const b=JSON.parse(w);a(null),t({filter:b})}else a(null),t({filter:void 0})}catch{a("Invalid JSON")}},m=w=>{u(w);try{if(w.trim()){const b=JSON.parse(w);p(null),t({document:b})}else p(null),t({document:void 0})}catch{p("Invalid JSON")}},g=["find","findOne","update","delete"].includes(e.operation),v=["insert","update"].includes(e.operation);return s.jsxs(rl,{title:"MongoDB Operation",defaultOpen:!0,children:[s.jsx(Yt,{label:"Collection",required:!0,children:s.jsx("input",{type:"text",className:"db-panel-input",value:e.collection,onChange:w=>t({collection:w.target.value}),placeholder:"users"})}),s.jsx(Yt,{label:"Operation",children:s.jsx("div",{className:"db-operation-selector",children:JU.map(w=>{const b=ZU[w];return s.jsx("button",{type:"button",className:`db-operation-option ${e.operation===w?"selected":""}`,onClick:()=>t({operation:w}),title:b.description,children:b.label},w)})})}),g&&s.jsxs(Yt,{label:"Filter",hint:"MongoDB query",children:[s.jsx("textarea",{className:`db-panel-textarea db-panel-textarea-mono ${i?"error":""}`,value:n,onChange:w=>f(w.target.value),placeholder:'{"status": "active", "age": {"$gte": 18}}',rows:4}),i&&s.jsx("span",{className:"db-panel-error",children:i})]}),v&&s.jsxs(Yt,{label:"Document",hint:"document to insert/update",children:[s.jsx("textarea",{className:`db-panel-textarea db-panel-textarea-mono ${d?"error":""}`,value:c,onChange:w=>m(w.target.value),placeholder:'{"name": "{{input.name}}", "email": "{{input.email}}"}',rows:4}),d&&s.jsx("span",{className:"db-panel-error",children:d})]})]})}function s8({redis:e,onChange:t}){const[n,r]=E.useState(e.value!==void 0?JSON.stringify(e.value,null,2):""),[i,a]=E.useState(null),c=f=>{if(r(f),!f.trim()){a(null),t({value:void 0});return}try{const m=JSON.parse(f);a(null),t({value:m})}catch{a(null),t({value:f})}},u=["set","hset","lpush"].includes(e.operation),d=["set","hset"].includes(e.operation),p=["hget","hset"].includes(e.operation);return s.jsxs(rl,{title:"Redis Operation",defaultOpen:!0,children:[s.jsx(Yt,{label:"Operation",children:s.jsx("div",{className:"db-operation-selector db-operation-selector-wrap",children:e8.map(f=>{const m=t8[f];return s.jsx("button",{type:"button",className:`db-operation-option ${e.operation===f?"selected":""}`,onClick:()=>t({operation:f}),title:m.description,children:m.label},f)})})}),s.jsxs(Yt,{label:"Key",required:!0,children:[s.jsx("input",{type:"text",className:"db-panel-input db-panel-input-mono",value:e.key,onChange:f=>t({key:f.target.value}),placeholder:p?"hash_name:field":"cache:user:123"}),p&&s.jsxs("div",{className:"db-panel-field-help",children:["For hash operations, use format: ",s.jsx("code",{children:"hash_name:field"})]})]}),u&&s.jsxs(Yt,{label:"Value",hint:"string or JSON",children:[s.jsx("textarea",{className:`db-panel-textarea db-panel-textarea-mono ${i?"error":""}`,value:n,onChange:f=>c(f.target.value),placeholder:'{"data": "{{input.data}}"}',rows:3}),i&&s.jsx("span",{className:"db-panel-error",children:i})]}),d&&s.jsx(Yt,{label:"TTL",hint:"seconds, 0 = no expiry",children:s.jsx("input",{type:"number",className:"db-panel-input",value:e.ttl||0,onChange:f=>t({ttl:parseInt(f.target.value,10)||void 0}),min:0,placeholder:"3600"})})]})}const a8=["monitor","send"],l8={monitor:" Monitor Incoming",send:" Send Outgoing"},V1={monitor:"Monitor an email inbox for new messages using IMAP",send:"Send emails using SMTP"},c8=["text","html"],u8={text:"Plain Text",html:"HTML"},$v={host:"",port:993,secure:!0,username:"",password:"",folder:"INBOX",markAsRead:!0},Hv={host:"",port:587,secure:!0,username:"",password:"",fromEmail:"",fromName:""},Vv={unreadOnly:!0},Uv={to:""},Wv={subject:"",bodyType:"text",body:""};function so({title:e,defaultOpen:t=!0,children:n}){const[r,i]=E.useState(t);return s.jsxs("div",{className:"email-panel-section",children:[s.jsxs("button",{className:"email-panel-section-header",onClick:()=>i(!r),type:"button",children:[s.jsx("span",{className:"email-panel-section-toggle",children:r?"":""}),s.jsx("span",{className:"email-panel-section-title",children:e})]}),r&&s.jsx("div",{className:"email-panel-section-content",children:n})]})}function Ze({label:e,hint:t,required:n,tooltip:r,children:i}){const a=s.jsxs("label",{className:"email-panel-label",children:[e,n&&s.jsx("span",{className:"email-panel-required",children:"*"}),t&&s.jsxs("span",{className:"email-panel-hint",children:["(",t,")"]}),r&&s.jsx("span",{className:"email-panel-tooltip-icon",title:r,children:""})]});return s.jsxs("div",{className:"email-panel-field",children:[r?s.jsx(nl,{content:r,position:"right",delay:300,children:a}):a,i]})}function d8({node:e,onChange:t}){const n=E.useCallback(f=>{const m={mode:f};f==="monitor"&&!e.imap?(m.imap={...$v},m.filters={...Vv}):f==="send"&&!e.smtp&&(m.smtp={...Hv},m.recipients={...Uv},m.content={...Wv}),t({...e,...m})},[e,t]),r=E.useCallback(f=>{t({...e,imap:{...e.imap||$v,...f}})},[e,t]),i=E.useCallback(f=>{t({...e,filters:{...e.filters||Vv,...f}})},[e,t]),a=E.useCallback(f=>{t({...e,smtp:{...e.smtp||Hv,...f}})},[e,t]),c=E.useCallback(f=>{t({...e,recipients:{...e.recipients||Uv,...f}})},[e,t]),u=E.useCallback(f=>{t({...e,content:{...e.content||Wv,...f}})},[e,t]),d=E.useCallback(f=>{t({...e,attachments:f})},[e,t]),p=E.useCallback(f=>{t({...e,...f})},[e,t]);return s.jsxs("div",{className:"email-panel",children:[s.jsxs(so,{title:"Email Mode",defaultOpen:!0,children:[s.jsx(Ze,{label:"Mode",required:!0,tooltip:"Choose whether to monitor incoming emails or send outgoing emails",children:s.jsx("div",{className:"email-mode-selector",children:a8.map(f=>s.jsx("button",{type:"button",className:`email-mode-option ${e.mode===f?"selected":""}`,onClick:()=>n(f),title:V1[f],children:l8[f]},f))})}),s.jsx("div",{className:"email-panel-mode-description",children:V1[e.mode]})]}),e.mode==="monitor"&&s.jsx(p8,{imap:e.imap,onChange:r}),e.mode==="monitor"&&s.jsx(f8,{filters:e.filters,onChange:i}),e.mode==="send"&&s.jsx(h8,{smtp:e.smtp,onChange:a}),e.mode==="send"&&s.jsx(m8,{recipients:e.recipients,onChange:c}),e.mode==="send"&&s.jsx(g8,{content:e.content,onChange:u}),s.jsx(y8,{attachments:e.attachments||[],onChange:d,mode:e.mode}),s.jsx(Gn,{properties:e,onChange:p,showIdentity:!0})]})}function p8({imap:e,onChange:t}){const n=e||$v;return s.jsxs(so,{title:"IMAP Connection",defaultOpen:!0,children:[s.jsx(Ze,{label:"Host",required:!0,tooltip:"IMAP server hostname (e.g., imap.gmail.com)",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.host,onChange:r=>t({host:r.target.value}),placeholder:"imap.gmail.com"})}),s.jsxs("div",{className:"email-panel-row",children:[s.jsx(Ze,{label:"Port",required:!0,children:s.jsx("input",{type:"number",className:"email-panel-input email-panel-input-small",value:n.port,onChange:r=>t({port:parseInt(r.target.value,10)||993}),min:1,max:65535})}),s.jsx(Ze,{label:"SSL/TLS",children:s.jsxs("label",{className:"email-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.secure,onChange:r=>t({secure:r.target.checked})}),s.jsx("span",{className:"email-panel-toggle-slider"}),s.jsx("span",{className:"email-panel-toggle-label",children:n.secure?"Enabled":"Disabled"})]})})]}),s.jsx(Ze,{label:"Username",required:!0,hint:"email address",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.username,onChange:r=>t({username:r.target.value}),placeholder:"user@example.com"})}),s.jsx(Ze,{label:"Password",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"email-panel-input",value:n.password,onChange:r=>t({password:r.target.value}),placeholder:"Password or {{EMAIL_PASSWORD}}"})}),s.jsx(Ze,{label:"Folder",tooltip:"IMAP folder to monitor",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.folder,onChange:r=>t({folder:r.target.value}),placeholder:"INBOX"})}),s.jsx(Ze,{label:"Mark as Read",children:s.jsxs("label",{className:"email-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.markAsRead,onChange:r=>t({markAsRead:r.target.checked})}),s.jsx("span",{className:"email-panel-toggle-slider"}),s.jsx("span",{className:"email-panel-toggle-label",children:n.markAsRead?"Yes":"No"})]})}),s.jsxs("div",{className:"email-panel-presets",children:[s.jsx("span",{className:"email-panel-presets-label",children:"Quick setup:"}),s.jsx("button",{type:"button",onClick:()=>t({host:"imap.gmail.com",port:993,secure:!0}),children:"Gmail"}),s.jsx("button",{type:"button",onClick:()=>t({host:"outlook.office365.com",port:993,secure:!0}),children:"Outlook"}),s.jsx("button",{type:"button",onClick:()=>t({host:"imap.mail.yahoo.com",port:993,secure:!0}),children:"Yahoo"})]})]})}function f8({filters:e,onChange:t}){const n=e||Vv;return s.jsxs(so,{title:"Email Filters",defaultOpen:!1,children:[s.jsx(Ze,{label:"Unread Only",children:s.jsxs("label",{className:"email-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.unreadOnly,onChange:r=>t({unreadOnly:r.target.checked})}),s.jsx("span",{className:"email-panel-toggle-slider"}),s.jsx("span",{className:"email-panel-toggle-label",children:n.unreadOnly?"Yes":"No"})]})}),s.jsx(Ze,{label:"From",hint:"sender filter",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.from||"",onChange:r=>t({from:r.target.value||void 0}),placeholder:"sender@example.com or *@company.com"})}),s.jsx(Ze,{label:"Subject",hint:"supports wildcards",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.subject||"",onChange:r=>t({subject:r.target.value||void 0}),placeholder:"*invoice* or Order Confirmation"})}),s.jsxs("div",{className:"email-panel-row",children:[s.jsx(Ze,{label:"Date From",children:s.jsx("input",{type:"date",className:"email-panel-input",value:n.dateFrom||"",onChange:r=>t({dateFrom:r.target.value||void 0})})}),s.jsx(Ze,{label:"Date To",children:s.jsx("input",{type:"date",className:"email-panel-input",value:n.dateTo||"",onChange:r=>t({dateTo:r.target.value||void 0})})})]})]})}function h8({smtp:e,onChange:t}){const n=e||Hv;return s.jsxs(so,{title:"SMTP Connection",defaultOpen:!0,children:[s.jsx(Ze,{label:"Host",required:!0,tooltip:"SMTP server hostname (e.g., smtp.gmail.com)",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.host,onChange:r=>t({host:r.target.value}),placeholder:"smtp.gmail.com"})}),s.jsxs("div",{className:"email-panel-row",children:[s.jsx(Ze,{label:"Port",required:!0,children:s.jsx("input",{type:"number",className:"email-panel-input email-panel-input-small",value:n.port,onChange:r=>t({port:parseInt(r.target.value,10)||587}),min:1,max:65535})}),s.jsx(Ze,{label:"SSL/TLS",children:s.jsxs("label",{className:"email-panel-toggle",children:[s.jsx("input",{type:"checkbox",checked:n.secure,onChange:r=>t({secure:r.target.checked})}),s.jsx("span",{className:"email-panel-toggle-slider"}),s.jsx("span",{className:"email-panel-toggle-label",children:n.secure?"Enabled":"Disabled"})]})})]}),s.jsx(Ze,{label:"Username",required:!0,hint:"email address",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.username,onChange:r=>t({username:r.target.value}),placeholder:"user@example.com"})}),s.jsx(Ze,{label:"Password",required:!0,hint:"or {{variable}}",children:s.jsx("input",{type:"password",className:"email-panel-input",value:n.password,onChange:r=>t({password:r.target.value}),placeholder:"Password or {{EMAIL_PASSWORD}}"})}),s.jsx(Ze,{label:"From Email",required:!0,children:s.jsx("input",{type:"email",className:"email-panel-input",value:n.fromEmail,onChange:r=>t({fromEmail:r.target.value}),placeholder:"noreply@example.com"})}),s.jsx(Ze,{label:"From Name",hint:"display name",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.fromName||"",onChange:r=>t({fromName:r.target.value||void 0}),placeholder:"My Application"})}),s.jsxs("div",{className:"email-panel-presets",children:[s.jsx("span",{className:"email-panel-presets-label",children:"Quick setup:"}),s.jsx("button",{type:"button",onClick:()=>t({host:"smtp.gmail.com",port:587,secure:!0}),children:"Gmail"}),s.jsx("button",{type:"button",onClick:()=>t({host:"smtp.office365.com",port:587,secure:!0}),children:"Outlook"}),s.jsx("button",{type:"button",onClick:()=>t({host:"smtp.sendgrid.net",port:587,secure:!0}),children:"SendGrid"})]})]})}function m8({recipients:e,onChange:t}){const n=e||Uv;return s.jsxs(so,{title:"Recipients",defaultOpen:!0,children:[s.jsx(Ze,{label:"To",required:!0,hint:"comma-separated or {{variable}}",children:s.jsx("textarea",{className:"email-panel-textarea",value:n.to,onChange:r=>t({to:r.target.value}),placeholder:"recipient@example.com, another@example.com",rows:2})}),s.jsx(Ze,{label:"CC",hint:"comma-separated",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.cc||"",onChange:r=>t({cc:r.target.value||void 0}),placeholder:"cc@example.com"})}),s.jsx(Ze,{label:"BCC",hint:"comma-separated",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.bcc||"",onChange:r=>t({bcc:r.target.value||void 0}),placeholder:"bcc@example.com"})})]})}function g8({content:e,onChange:t}){const n=e||Wv;return s.jsxs(so,{title:"Email Content",defaultOpen:!0,children:[s.jsx(Ze,{label:"Subject",required:!0,hint:"supports {{variable}}",children:s.jsx("input",{type:"text",className:"email-panel-input",value:n.subject,onChange:r=>t({subject:r.target.value}),placeholder:"Your order {{orderId}} has shipped"})}),s.jsx(Ze,{label:"Body Type",children:s.jsx("div",{className:"email-body-type-selector",children:c8.map(r=>s.jsx("button",{type:"button",className:`email-body-type-option ${n.bodyType===r?"selected":""}`,onClick:()=>t({bodyType:r}),children:u8[r]},r))})}),s.jsx(Ze,{label:"Body",required:!0,hint:"supports {{variable}}",children:s.jsx("textarea",{className:`email-panel-textarea email-panel-textarea-large ${n.bodyType==="html"?"email-panel-textarea-mono":""}`,value:n.body,onChange:r=>t({body:r.target.value}),placeholder:n.bodyType==="html"?"<html><body><h1>Hello {{name}}</h1></body></html>":`Hello {{name}},

Your order has shipped.

Best regards`,rows:8})}),n.bodyType==="html"&&s.jsxs("div",{className:"email-panel-info",children:[s.jsx("span",{className:"email-panel-info-icon",children:""}),s.jsxs("span",{className:"email-panel-info-text",children:["Use HTML tags for formatting. Variables like ","{{name}}"," will be interpolated from state."]})]})]})}function y8({attachments:e,onChange:t,mode:n}){const r=()=>{t([...e,{filename:"",stateKey:""}])},i=c=>{t(e.filter((u,d)=>d!==c))},a=(c,u)=>{t(e.map((d,p)=>p===c?{...d,...u}:d))};return s.jsxs(so,{title:"Attachments",defaultOpen:e.length>0,children:[n==="monitor"?s.jsxs("div",{className:"email-panel-info",children:[s.jsx("span",{className:"email-panel-info-icon",children:""}),s.jsx("span",{className:"email-panel-info-text",children:"Attachments from monitored emails will be available in the output state. Configure state keys below to map specific attachments."})]}):s.jsxs("div",{className:"email-panel-info",children:[s.jsx("span",{className:"email-panel-info-icon",children:""}),s.jsx("span",{className:"email-panel-info-text",children:"Attach files from workflow state. The state key should contain base64 data or a file path."})]}),s.jsxs("div",{className:"email-attachments-list",children:[e.map((c,u)=>s.jsxs("div",{className:"email-attachment-row",children:[s.jsx("input",{type:"text",className:"email-panel-input email-attachment-filename",value:c.filename,onChange:d=>a(u,{filename:d.target.value}),placeholder:"report.pdf"}),s.jsx("span",{className:"email-attachment-arrow",children:""}),s.jsx("input",{type:"text",className:"email-panel-input email-attachment-statekey",value:c.stateKey,onChange:d=>a(u,{stateKey:d.target.value}),placeholder:"state.fileData"}),s.jsx("input",{type:"text",className:"email-panel-input email-attachment-mime",value:c.mimeType||"",onChange:d=>a(u,{mimeType:d.target.value||void 0}),placeholder:"application/pdf"}),s.jsx("button",{type:"button",className:"email-attachment-remove",onClick:()=>i(u),title:"Remove attachment",children:""})]},u)),s.jsx("button",{type:"button",className:"email-attachment-add",onClick:r,children:"+ Add Attachment"})]})]})}function v8({nodeId:e,onClose:t}){const{currentProject:n,updateActionNode:r,removeActionNode:i}=gt(),a=n?.actionNodes?.[e];if(!a)return s.jsxs("div",{className:"action-properties-panel",children:[s.jsxs("div",{className:"action-properties-panel-header",children:[s.jsx("span",{className:"action-properties-panel-title",children:"Action Node"}),s.jsx("button",{className:"action-properties-panel-close",onClick:t,children:""})]}),s.jsx("div",{className:"action-properties-panel-empty",children:"Node not found"})]});const c=m=>{r(e,m)},u=()=>{i(e),t()},p=A1(a)?{label:"Trigger",icon:"",color:"#6366F1"}:P1(a)?{label:"HTTP",icon:"",color:"#3B82F6"}:I1(a)?{label:"Set",icon:"",color:"#8B5CF6"}:R1(a)?{label:"Transform",icon:"",color:"#EC4899"}:O1(a)?{label:"Switch",icon:"",color:"#F59E0B"}:M1(a)?{label:"Loop",icon:"",color:"#10B981"}:L1(a)?{label:"Merge",icon:"",color:"#06B6D4"}:D1(a)?{label:"Wait",icon:"",color:"#6B7280"}:q1(a)?{label:"Code",icon:"",color:"#EF4444"}:F1(a)?{label:"Database",icon:"",color:"#14B8A6"}:z1(a)?{label:"Email",icon:"",color:"#EA580C"}:{label:"Action",icon:"",color:"#6B7280"},f=()=>A1(a)?s.jsx(bV,{node:a,onChange:c}):P1(a)?s.jsx(AV,{node:a,onChange:c}):I1(a)?s.jsx(zV,{node:a,onChange:c}):R1(a)?s.jsx(GV,{node:a,onChange:c}):O1(a)?s.jsx(sU,{node:a,onChange:c}):M1(a)?s.jsx(mU,{node:a,onChange:c}):L1(a)?s.jsx(CU,{node:a,onChange:c}):D1(a)?s.jsx(DU,{node:a,onChange:c}):q1(a)?s.jsx(UU,{node:a,onChange:c}):F1(a)?s.jsx(n8,{node:a,onChange:c}):z1(a)?s.jsx(d8,{node:a,onChange:c}):s.jsx("div",{className:"action-properties-panel-empty",children:"Unknown node type"});return s.jsxs("div",{className:"action-properties-panel",children:[s.jsxs("div",{className:"action-properties-panel-header",children:[s.jsxs("div",{className:"action-properties-panel-title-row",children:[s.jsx("span",{className:"action-properties-panel-icon",style:{backgroundColor:p.color},children:p.icon}),s.jsx("span",{className:"action-properties-panel-title",children:p.label}),s.jsx("span",{className:"action-properties-panel-id",children:e})]}),s.jsxs("div",{className:"action-properties-panel-actions",children:[s.jsx("button",{className:"action-properties-panel-delete",onClick:u,title:"Delete node",children:""}),s.jsx("button",{className:"action-properties-panel-close",onClick:t,title:"Close panel",children:""})]})]}),s.jsx("div",{className:"action-properties-panel-content",children:f()})]})}const N2=[{name:"Entry",types:["trigger"]},{name:"Data",types:["set","transform"]},{name:"Control",types:["switch","loop","merge","wait"]},{name:"Integration",types:["http","database","email"]},{name:"Code",types:["code"]}];N2.flatMap(e=>e.types);function x8({type:e,onDragStart:t,onCreate:n}){const r=m2[e],i=g2[e],a=EH[e];return s.jsxs("div",{draggable:!0,onDragStart:c=>t(c,e),onClick:()=>n(e),className:"p-1.5 rounded text-xs cursor-grab hover:opacity-80 text-white font-medium",style:{backgroundColor:r},title:`Drag or click to add ${a} node`,children:[i," ",a]})}function b8({category:e,onDragStart:t,onCreate:n}){return s.jsxs("div",{className:"mb-1",children:[s.jsx("div",{className:"text-[10px] font-semibold uppercase tracking-wide mb-1 px-0.5",style:{color:"var(--text-muted)"},children:e.name}),s.jsx("div",{className:"space-y-1",children:e.types.map(r=>s.jsx(x8,{type:r,onDragStart:t,onCreate:n},r))})]})}function w8({onDragStart:e,onCreate:t}){return s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Actions"}),N2.map(n=>s.jsx(b8,{category:n,onDragStart:e,onCreate:t},n.name))]})}const _8={thinking:"",tool:"",decision:""},k8={thinking:"thought-bubble-thinking",tool:"thought-bubble-tool",decision:"thought-bubble-decision"},j2=E.memo(function({text:t,position:n="right",streaming:r=!1,type:i="thinking",visible:a=!0,id:c,sourceNodeId:u,onDismiss:d,maxWidth:p=280,zIndex:f=1e3}){const[m,g]=E.useState(!1),[v,w]=E.useState(a),b=E.useRef(null);if(E.useEffect(()=>{if(a)w(!0),requestAnimationFrame(()=>{g(!0)});else{g(!1);const A=setTimeout(()=>{w(!1),d?.()},200);return()=>clearTimeout(A)}},[a,d]),!v||!t)return null;const k=_8[i],_=k8[i],N=`thought-bubble-${n}`,S=m?"thought-bubble-enter":"thought-bubble-exit";return s.jsxs("div",{ref:b,className:`thought-bubble ${N} ${_} ${S}`,style:{maxWidth:p,zIndex:f},"data-bubble-id":c,"data-source-node":u,role:"status","aria-live":"polite","aria-label":`${i} bubble: ${t}`,children:[s.jsx("div",{className:"thought-bubble-pointer"}),s.jsxs("div",{className:"thought-bubble-content",children:[s.jsx("span",{className:"thought-bubble-icon","aria-hidden":"true",children:k}),s.jsxs("span",{className:"thought-bubble-text",children:[t,r&&s.jsx("span",{className:"thought-bubble-cursor","aria-hidden":"true",children:""})]})]})]})});j2.displayName="ThoughtBubble";const S8=180,N8=100,j8=280,E8=80,jc=16,C8=["right","top","left","bottom"];function E2(e,t,n,r,i){const a=j8,c=E8;switch(i){case"right":return{x:e+n+jc,y:t+(r-c)/2,width:a,height:c};case"left":return{x:e-a-jc,y:t+(r-c)/2,width:a,height:c};case"top":return{x:e+(n-a)/2,y:t-c-jc,width:a,height:c};case"bottom":return{x:e+(n-a)/2,y:t+r+jc,width:a,height:c}}}function U1(e,t){return!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)}function T8(e,t,n){for(const r of C8){const i=E2(e.x,e.y,e.width,e.height,r),a=t.some(u=>U1(i,u)),c=n.some(u=>U1(i,u.bounds));if(!a&&!c)return r}return"right"}const A8=E.memo(function({bubbles:t,onDismiss:n}){const{getNodes:r}=Qa(),i=E.useMemo(()=>r().map(d=>({id:d.id,x:d.position.x,y:d.position.y,width:d.measured?.width??d.width??S8,height:d.measured?.height??d.height??N8})),[r]),a=E.useMemo(()=>{const u=[];return t.map(d=>{const p=i.find(v=>v.id===d.nodeId);if(!p)return{...d,position:"right"};const f=i.filter(v=>v.id!==d.nodeId),m=T8(p,f,u),g=E2(p.x,p.y,p.width,p.height,m);return u.push({position:m,bounds:g}),{...d,position:m}})},[t,i]),c=E.useCallback(u=>{n?.(u)},[n]);return t.length===0?null:s.jsx(s.Fragment,{children:a.map((u,d)=>s.jsx(j2,{id:u.id,text:u.text,type:u.type,position:u.position,streaming:u.streaming,sourceNodeId:u.nodeId,visible:!0,zIndex:1e3+d,onDismiss:()=>c(u.id)},u.id))})});A8.displayName="ThoughtBubbleManager";function P8({onConfirm:e,onClose:t}){const[n,r]=E.useState(""),i=a=>{a.preventDefault(),n.trim()&&e(n.trim())};return s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:t,children:s.jsxs("div",{className:"rounded-lg w-96 flex flex-col shadow-xl",style:{backgroundColor:"var(--surface-panel)",border:"1px solid var(--border-default)"},onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"New Project"}),s.jsx("button",{onClick:t,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsxs("form",{onSubmit:i,className:"p-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm mb-1",style:{color:"var(--text-secondary)"},children:"Project Name"}),s.jsx("input",{autoFocus:!0,type:"text",value:n,onChange:a=>r(a.target.value),className:"w-full px-3 py-2 rounded text-sm focus:outline-none",style:{backgroundColor:"var(--bg-secondary)",border:"1px solid var(--border-default)",color:"var(--text-primary)"},placeholder:"My Awesome Agent"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:t,className:"px-3 py-2 rounded text-sm hover:opacity-80",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!n.trim(),className:"px-3 py-2 rounded text-sm text-white disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90",style:{backgroundColor:"var(--accent-primary)"},children:"Create Project"})]})]})]})})}function W1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function I8(e){if(Array.isArray(e))return e}function R8(e,t,n){return(t=z8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O8(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,a,c,u=[],d=!0,p=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(d=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);d=!0);}catch(f){p=!0,i=f}finally{try{if(!d&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(p)throw i}}return u}}function M8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function G1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K1(Object(n),!0).forEach(function(r){R8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L8(e,t){if(e==null)return{};var n,r,i=D8(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function D8(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function q8(e,t){return I8(e)||O8(e,t)||B8(e,t)||M8()}function F8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z8(e){var t=F8(e,"string");return typeof t=="symbol"?t:t+""}function B8(e,t){if(e){if(typeof e=="string")return W1(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W1(e,t):void 0}}function $8(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function X1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y1(Object(n),!0).forEach(function(r){$8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(i,a){return a(i)},r)}}function ba(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.length>=e.length?e.apply(this,i):function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return t.apply(n,[].concat(i,u))}}}function tu(e){return{}.toString.call(e).includes("Object")}function V8(e){return!Object.keys(e).length}function Ha(e){return typeof e=="function"}function U8(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W8(e,t){return tu(t)||yi("changeType"),Object.keys(t).some(function(n){return!U8(e,n)})&&yi("changeField"),t}function K8(e){Ha(e)||yi("selectorType")}function G8(e){Ha(e)||tu(e)||yi("handlerType"),tu(e)&&Object.values(e).some(function(t){return!Ha(t)})&&yi("handlersType")}function Y8(e){e||yi("initialIsRequired"),tu(e)||yi("initialType"),V8(e)&&yi("initialContent")}function X8(e,t){throw new Error(e[t]||e.default)}var Q8={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},yi=ba(X8)(Q8),Ec={changes:W8,selector:K8,handler:G8,initial:Y8};function J8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ec.initial(e),Ec.handler(t);var n={current:e},r=ba(tW)(n,t),i=ba(eW)(n),a=ba(Ec.changes)(e),c=ba(Z8)(n);function u(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return Ec.selector(p),p(n.current)}function d(p){H8(r,i,a,c)(p)}return[u,d]}function Z8(e,t){return Ha(t)?t(e.current):t}function eW(e,t){return e.current=X1(X1({},e.current),t),t}function tW(e,t,n){return Ha(t)?t(e.current):Object.keys(n).forEach(function(r){var i;return(i=t[r])===null||i===void 0?void 0:i.call(t,e.current[r])}),n}var nW={create:J8},rW={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function iW(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.length>=e.length?e.apply(this,i):function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return t.apply(n,[].concat(i,u))}}}function oW(e){return{}.toString.call(e).includes("Object")}function sW(e){return e||Q1("configIsRequired"),oW(e)||Q1("configType"),e.urls?(aW(),{paths:{vs:e.urls.monacoBase}}):e}function aW(){console.warn(C2.deprecation)}function lW(e,t){throw new Error(e[t]||e.default)}var C2={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Q1=iW(lW)(C2),cW={config:sW},uW=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(a,c){return c(a)},i)}};function T2(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],T2(e[n],t[n]))}),G1(G1({},e),t)}var dW={type:"cancelation",msg:"operation is manually canceled"};function Kp(e){var t=!1,n=new Promise(function(r,i){e.then(function(a){return t?i(dW):r(a)}),e.catch(i)});return n.cancel=function(){return t=!0},n}var pW=["monaco"],fW=nW.create({config:rW,isInitialized:!1,resolve:null,reject:null,monaco:null}),A2=q8(fW,2),il=A2[0],xu=A2[1];function hW(e){var t=cW.config(e),n=t.monaco,r=L8(t,pW);xu(function(i){return{config:T2(i.config,r),monaco:n}})}function mW(){var e=il(function(t){var n=t.monaco,r=t.isInitialized,i=t.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!e.isInitialized){if(xu({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Kp(Gp);if(window.monaco&&window.monaco.editor)return P2(window.monaco),e.resolve(window.monaco),Kp(Gp);uW(gW,vW)(xW)}return Kp(Gp)}function gW(e){return document.body.appendChild(e)}function yW(e){var t=document.createElement("script");return e&&(t.src=e),t}function vW(e){var t=il(function(r){var i=r.config,a=r.reject;return{config:i,reject:a}}),n=yW("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function xW(){var e=il(function(n){var r=n.config,i=n.resolve,a=n.reject;return{config:r,resolve:i,reject:a}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){var r=n.m||n;P2(r),e.resolve(r)},function(n){e.reject(n)})}function P2(e){il().monaco||xu({monaco:e})}function bW(){return il(function(e){var t=e.monaco;return t})}var Gp=new Promise(function(e,t){return xu({resolve:e,reject:t})}),I2={config:hW,init:mW,__getMonacoInstance:bW},wW={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Yp=wW,_W={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},kW=_W;function SW({children:e}){return Rt.createElement("div",{style:kW.container},e)}var NW=SW,jW=NW;function EW({width:e,height:t,isEditorReady:n,loading:r,_ref:i,className:a,wrapperProps:c}){return Rt.createElement("section",{style:{...Yp.wrapper,width:e,height:t},...c},!n&&Rt.createElement(jW,null,r),Rt.createElement("div",{ref:i,style:{...Yp.fullWidth,...!n&&Yp.hide},className:a}))}var CW=EW,R2=E.memo(CW);function TW(e){E.useEffect(e,[])}var O2=TW;function AW(e,t,n=!0){let r=E.useRef(!0);E.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var vn=AW;function Aa(){}function es(e,t,n,r){return PW(e,r)||IW(e,t,n,r)}function PW(e,t){return e.editor.getModel(M2(e,t))}function IW(e,t,n,r){return e.editor.createModel(t,n,r?M2(e,r):void 0)}function M2(e,t){return e.Uri.parse(t)}function RW({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:a,modifiedModelPath:c,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:d=!1,theme:p="light",loading:f="Loading...",options:m={},height:g="100%",width:v="100%",className:w,wrapperProps:b={},beforeMount:k=Aa,onMount:_=Aa}){let[N,S]=E.useState(!1),[A,P]=E.useState(!0),T=E.useRef(null),C=E.useRef(null),z=E.useRef(null),F=E.useRef(_),V=E.useRef(k),L=E.useRef(!1);O2(()=>{let M=I2.init();return M.then(H=>(C.current=H)&&P(!1)).catch(H=>H?.type!=="cancelation"&&console.error("Monaco initialization: error:",H)),()=>T.current?R():M.cancel()}),vn(()=>{if(T.current&&C.current){let M=T.current.getOriginalEditor(),H=es(C.current,e||"",r||n||"text",a||"");H!==M.getModel()&&M.setModel(H)}},[a],N),vn(()=>{if(T.current&&C.current){let M=T.current.getModifiedEditor(),H=es(C.current,t||"",i||n||"text",c||"");H!==M.getModel()&&M.setModel(H)}},[c],N),vn(()=>{let M=T.current.getModifiedEditor();M.getOption(C.current.editor.EditorOption.readOnly)?M.setValue(t||""):t!==M.getValue()&&(M.executeEdits("",[{range:M.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),M.pushUndoStop())},[t],N),vn(()=>{T.current?.getModel()?.original.setValue(e||"")},[e],N),vn(()=>{let{original:M,modified:H}=T.current.getModel();C.current.editor.setModelLanguage(M,r||n||"text"),C.current.editor.setModelLanguage(H,i||n||"text")},[n,r,i],N),vn(()=>{C.current?.editor.setTheme(p)},[p],N),vn(()=>{T.current?.updateOptions(m)},[m],N);let q=E.useCallback(()=>{if(!C.current)return;V.current(C.current);let M=es(C.current,e||"",r||n||"text",a||""),H=es(C.current,t||"",i||n||"text",c||"");T.current?.setModel({original:M,modified:H})},[n,t,i,e,r,a,c]),G=E.useCallback(()=>{!L.current&&z.current&&(T.current=C.current.editor.createDiffEditor(z.current,{automaticLayout:!0,...m}),q(),C.current?.editor.setTheme(p),S(!0),L.current=!0)},[m,p,q]);E.useEffect(()=>{N&&F.current(T.current,C.current)},[N]),E.useEffect(()=>{!A&&!N&&G()},[A,N,G]);function R(){let M=T.current?.getModel();u||M?.original?.dispose(),d||M?.modified?.dispose(),T.current?.dispose()}return Rt.createElement(R2,{width:v,height:g,isEditorReady:N,loading:f,_ref:z,className:w,wrapperProps:b})}var OW=RW;E.memo(OW);function MW(e){let t=E.useRef();return E.useEffect(()=>{t.current=e},[e]),t.current}var LW=MW,Cc=new Map;function DW({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:i,path:a,theme:c="light",line:u,loading:d="Loading...",options:p={},overrideServices:f={},saveViewState:m=!0,keepCurrentModel:g=!1,width:v="100%",height:w="100%",className:b,wrapperProps:k={},beforeMount:_=Aa,onMount:N=Aa,onChange:S,onValidate:A=Aa}){let[P,T]=E.useState(!1),[C,z]=E.useState(!0),F=E.useRef(null),V=E.useRef(null),L=E.useRef(null),q=E.useRef(N),G=E.useRef(_),R=E.useRef(),M=E.useRef(r),H=LW(a),X=E.useRef(!1),$=E.useRef(!1);O2(()=>{let B=I2.init();return B.then(K=>(F.current=K)&&z(!1)).catch(K=>K?.type!=="cancelation"&&console.error("Monaco initialization: error:",K)),()=>V.current?I():B.cancel()}),vn(()=>{let B=es(F.current,e||r||"",t||i||"",a||n||"");B!==V.current?.getModel()&&(m&&Cc.set(H,V.current?.saveViewState()),V.current?.setModel(B),m&&V.current?.restoreViewState(Cc.get(a)))},[a],P),vn(()=>{V.current?.updateOptions(p)},[p],P),vn(()=>{!V.current||r===void 0||(V.current.getOption(F.current.editor.EditorOption.readOnly)?V.current.setValue(r):r!==V.current.getValue()&&($.current=!0,V.current.executeEdits("",[{range:V.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),V.current.pushUndoStop(),$.current=!1))},[r],P),vn(()=>{let B=V.current?.getModel();B&&i&&F.current?.editor.setModelLanguage(B,i)},[i],P),vn(()=>{u!==void 0&&V.current?.revealLine(u)},[u],P),vn(()=>{F.current?.editor.setTheme(c)},[c],P);let Y=E.useCallback(()=>{if(!(!L.current||!F.current)&&!X.current){G.current(F.current);let B=a||n,K=es(F.current,r||e||"",t||i||"",B||"");V.current=F.current?.editor.create(L.current,{model:K,automaticLayout:!0,...p},f),m&&V.current.restoreViewState(Cc.get(B)),F.current.editor.setTheme(c),u!==void 0&&V.current.revealLine(u),T(!0),X.current=!0}},[e,t,n,r,i,a,p,f,m,c,u]);E.useEffect(()=>{P&&q.current(V.current,F.current)},[P]),E.useEffect(()=>{!C&&!P&&Y()},[C,P,Y]),M.current=r,E.useEffect(()=>{P&&S&&(R.current?.dispose(),R.current=V.current?.onDidChangeModelContent(B=>{$.current||S(V.current.getValue(),B)}))},[P,S]),E.useEffect(()=>{if(P){let B=F.current.editor.onDidChangeMarkers(K=>{let D=V.current.getModel()?.uri;if(D&&K.find(U=>U.path===D.path)){let U=F.current.editor.getModelMarkers({resource:D});A?.(U)}});return()=>{B?.dispose()}}return()=>{}},[P,A]);function I(){R.current?.dispose(),g?m&&Cc.set(a,V.current.saveViewState()):V.current.getModel()?.dispose(),V.current.dispose()}return Rt.createElement(R2,{width:v,height:w,isEditorReady:P,loading:d,_ref:L,className:b,wrapperProps:k})}var qW=DW,FW=E.memo(qW),L2=FW;function zW({code:e,onClose:t}){const{mode:n}=vi(),r=n==="light"?"light":"vs-dark";return s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:t,children:s.jsxs("div",{className:"rounded-lg w-4/5 h-4/5 flex flex-col",style:{backgroundColor:"var(--surface-panel)"},onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Generated Rust Code"}),s.jsx("button",{onClick:t,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsx("div",{className:"flex-1 overflow-auto p-4",children:e.files.map(i=>s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h3",{className:"text-sm font-mono",style:{color:"var(--accent-primary)"},children:i.path}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(i.content),className:"text-xs px-2 py-1 rounded hover:opacity-80",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Copy"})]}),s.jsx("div",{className:"rounded overflow-hidden",style:{border:"1px solid var(--border-default)"},children:s.jsx(L2,{height:Math.min(600,i.content.split(`
`).length*19+20),language:i.path.endsWith(".toml")?"toml":"rust",value:i.content,theme:r,options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:12}})})]},i.path))})]})})}function BW({building:e,success:t,output:n,path:r,onClose:i,isAutobuild:a=!1}){const c=E.useRef(null);return E.useEffect(()=>{c.current&&e&&(c.current.scrollTop=c.current.scrollHeight)},[n,e]),s.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:i,children:s.jsxs("div",{className:"rounded-lg w-3/5 max-h-4/5 flex flex-col",style:{backgroundColor:"var(--surface-panel)"},onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsx("h2",{className:`text-lg font-semibold ${e?"text-blue-500":t?"text-green-500":"text-red-500"}`,children:e?a?" Auto Building...":" Building...":t?" Build Successful":" Build Failed"}),s.jsx("button",{onClick:i,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[r&&s.jsxs("div",{className:"mb-4 p-3 rounded border",style:{backgroundColor:"rgba(56, 161, 105, 0.1)",borderColor:"var(--accent-success)"},children:[s.jsx("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:"Binary path:"}),s.jsx("code",{className:"text-sm font-mono",style:{color:"var(--accent-success)"},children:r})]}),s.jsx("pre",{ref:c,className:"p-4 rounded text-xs overflow-auto whitespace-pre max-h-96",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:n})]})]})})}function $W({config:e,onUpdate:t,onClose:n}){const{mode:r}=vi(),i=r==="light"?"light":"vs-dark";return s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:n,children:s.jsxs("div",{className:"rounded-lg w-11/12 h-5/6 flex flex-col",style:{backgroundColor:"var(--surface-panel)"},onClick:a=>a.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:"var(--border-default)"},children:[s.jsxs("h2",{className:"text-lg font-semibold",style:{color:"var(--accent-primary)"},children:[e.name||"function","_fn"]}),s.jsx("button",{onClick:n,className:"text-xl hover:opacity-70",style:{color:"var(--text-muted)"},children:""})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(L2,{height:"100%",defaultLanguage:"rust",theme:i,value:x2(e),onChange:a=>a&&t({...e,code:U6(a,e)}),options:{minimap:{enabled:!1},fontSize:14,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:4}})}),s.jsx("div",{className:"p-4 border-t flex justify-end",style:{borderColor:"var(--border-default)"},children:s.jsx("button",{onClick:n,className:"px-4 py-2 rounded text-sm text-white",style:{backgroundColor:"var(--accent-primary)"},children:"Done"})})]})})}const Tc=[{id:"welcome",title:"Welcome to ADK Studio!",description:"ADK Studio is a visual builder for creating AI agent workflows. Let's walk through the basics to get you started.",icon:"",tips:["Build complex agent systems visually","Test and debug in real-time","Export production-ready Rust code"]},{id:"create-project",title:"Create a Project",description:"Start by creating a new project. Each project contains your agent workflow and configuration.",icon:"",tips:['Click "File  New Project" in the menu',"Give your project a descriptive name","Or select a template to start quickly"]},{id:"add-agents",title:"Add Agents",description:"Drag agents from the left palette onto the canvas. Each agent type has different capabilities.",icon:"",tips:["LLM Agent: Basic AI agent with model access","Sequential: Run agents in order","Parallel: Run agents simultaneously","Loop: Iterate until a condition is met","Router: Route to different agents based on input"]},{id:"connect-nodes",title:"Connect Nodes",description:"Connect agents by dragging from one node's output handle to another's input handle.",icon:"",tips:["Drag from the bottom handle to the top handle","Double-click an edge to remove it","Use the auto-layout button to organize nodes"]},{id:"configure-agents",title:"Configure Agents",description:"Click on an agent to open its properties panel. Configure the model, instructions, and tools.",icon:"",tips:["Set the system instruction for each agent","Add tools like Google Search or Code Execution","Configure model parameters like temperature"]},{id:"run-tests",title:"Build & Test",description:"Build your project and test it in the console. Watch agents execute in real-time!",icon:"",tips:['Click "Build" to compile your workflow',"Use the console to send test messages","Watch the timeline to debug execution","Inspect state at each node"]},{id:"complete",title:"You're Ready!",description:"You now know the basics of ADK Studio. Explore templates, experiment with different agent types, and build amazing AI workflows!",icon:"",tips:["Browse the Template Gallery for inspiration","Export your workflow as Rust code","Check the Help menu for keyboard shortcuts"]}];function HW({onComplete:e,onSkip:t,onClose:n}){const[r,i]=E.useState(0),a=Tc[r],c=r===0,u=r===Tc.length-1,d=()=>{u?e():i(r+1)},p=()=>{c||i(r-1)},f=()=>{t()};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},onClick:n,children:s.jsxs("div",{className:"w-full max-w-lg rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:"var(--surface-panel)"},onClick:m=>m.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(a2,{size:20}),s.jsx("span",{className:"font-semibold",children:"Getting Started"})]}),s.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-white/20 transition-colors",children:s.jsx(Nx,{size:20})})]}),s.jsx("div",{className:"flex gap-1 px-6 py-3",style:{backgroundColor:"var(--bg-secondary)"},children:Tc.map((m,g)=>s.jsx("div",{className:"flex-1 h-1 rounded-full transition-colors",style:{backgroundColor:g<=r?"var(--accent-primary)":"var(--border-default)"}},g))}),s.jsxs("div",{className:"px-6 py-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("span",{className:"text-5xl mb-4 block",children:a.icon}),s.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"var(--text-primary)"},children:a.title}),s.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:a.description})]}),s.jsx("div",{className:"rounded-lg p-4 mb-6",style:{backgroundColor:"var(--bg-secondary)"},children:s.jsx("ul",{className:"space-y-2",children:a.tips.map((m,g)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",style:{color:"var(--text-primary)"},children:[s.jsx(r2,{size:16,className:"mt-0.5 flex-shrink-0",style:{color:"var(--accent-primary)"}}),s.jsx("span",{children:m})]},g))})}),s.jsxs("div",{className:"text-center text-xs mb-4",style:{color:"var(--text-muted)"},children:["Step ",r+1," of ",Tc.length]})]}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",style:{borderTop:"1px solid var(--border-default)",backgroundColor:"var(--bg-secondary)"},children:[s.jsx("button",{onClick:f,className:"px-4 py-2 text-sm rounded transition-colors",style:{color:"var(--text-secondary)"},children:"Skip Tutorial"}),s.jsxs("div",{className:"flex items-center gap-2",children:[!c&&s.jsxs("button",{onClick:p,className:"flex items-center gap-1 px-4 py-2 text-sm rounded transition-colors",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:[s.jsx(i2,{size:16}),"Back"]}),s.jsxs("button",{onClick:d,className:"flex items-center gap-1 px-4 py-2 text-sm font-medium rounded transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:[u?"Get Started":"Next",!u&&s.jsx(o2,{size:16})]})]})]})]})})}function VW({onAction:e}){const{template:t,steps:n,currentStep:r,isVisible:i,next:a,previous:c,goToStep:u,skip:d,complete:p}=t2();if(!i||!t||n.length===0)return null;const f=n[r],m=r===0,g=r===n.length-1,v=()=>{g?p():a()},w=()=>{m||c()},b=()=>{f.action&&e&&e(f.action.type,t.id)},k=_=>{switch(_){case"open-env":return s.jsx(z$,{size:14});case"open-docs":return s.jsx(L$,{size:14});case"run-workflow":return s.jsx(s2,{size:14});default:return null}};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.6)"},onClick:d,children:s.jsxs("div",{className:"w-full max-w-lg rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:"var(--surface-panel)"},onClick:_=>_.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(a2,{size:20}),s.jsx("span",{className:"font-semibold",children:"Template Guide"})]}),s.jsx("button",{onClick:d,className:"p-1 rounded hover:bg-white/20 transition-colors",title:"Close",children:s.jsx(Nx,{size:20})})]}),s.jsx("div",{className:"flex gap-1 px-6 py-3",style:{backgroundColor:"var(--bg-secondary)"},children:n.map((_,N)=>s.jsx("button",{onClick:()=>u(N),className:"flex-1 h-2 rounded-full transition-all hover:opacity-80",style:{backgroundColor:N<=r?"var(--accent-primary)":"var(--border-default)",cursor:"pointer"},title:_.title},_.id))}),s.jsxs("div",{className:"px-6 py-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("span",{className:"text-5xl mb-4 block",children:f.icon}),s.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"var(--text-primary)"},children:f.title}),s.jsx("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:f.description})]}),s.jsx("div",{className:"rounded-lg p-4 mb-4",style:{backgroundColor:"var(--bg-secondary)"},children:s.jsx("ul",{className:"space-y-2",children:f.tips.map((_,N)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm",style:{color:"var(--text-primary)"},children:[s.jsx(r2,{size:16,className:"mt-0.5 flex-shrink-0",style:{color:"var(--accent-primary)"}}),s.jsx("span",{children:_})]},N))})}),f.action&&s.jsx("div",{className:"mb-4",children:s.jsxs("button",{onClick:b,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"var(--bg-tertiary)",color:"var(--accent-primary)",border:"1px solid var(--accent-primary)"},children:[k(f.action.type),f.action.label]})}),s.jsxs("div",{className:"text-center text-xs",style:{color:"var(--text-muted)"},children:["Step ",r+1," of ",n.length]})]}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",style:{borderTop:"1px solid var(--border-default)",backgroundColor:"var(--bg-secondary)"},children:[s.jsx("button",{onClick:d,className:"px-4 py-2 text-sm rounded transition-colors hover:bg-opacity-80",style:{color:"var(--text-secondary)"},children:"Skip Guide"}),s.jsxs("div",{className:"flex items-center gap-2",children:[!m&&s.jsxs("button",{onClick:w,className:"flex items-center gap-1 px-4 py-2 text-sm rounded transition-colors",style:{backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:[s.jsx(i2,{size:16}),"Back"]}),s.jsxs("button",{onClick:v,className:"flex items-center gap-1 px-4 py-2 text-sm font-medium rounded transition-colors",style:{backgroundColor:"var(--accent-primary)",color:"white"},children:[g?"Get Started":"Next",!g&&s.jsx(o2,{size:16})]})]})]})]})})}const UW=E.memo(function({snapshots:t,currentIndex:n,onScrub:r,isCollapsed:i,onToggleCollapse:a}){const c=E.useMemo(()=>t.filter(p=>!p.nodeId.startsWith("__")),[t]),u=E.useCallback(p=>{const f=c[p],m=t.findIndex(g=>g===f);m>=0&&r(m)},[c,t,r]),d=E.useMemo(()=>{if(n<0)return-1;const p=t[n];return c.findIndex(f=>f===p)},[n,t,c]);return s.jsxs("div",{className:`timeline-container ${i?"collapsed":"expanded"}`,children:[s.jsxs("div",{className:"timeline-header",onClick:a,children:[s.jsxs("div",{className:"timeline-header-left",children:[s.jsx("span",{className:"timeline-title",children:"Execution Timeline"}),c.length>0&&s.jsxs("span",{className:"timeline-count",children:[c.length," steps"]})]}),s.jsx(GW,{className:`timeline-toggle-icon ${i?"collapsed":""}`})]}),!i&&s.jsx(s.Fragment,{children:c.length===0?s.jsx(KW,{}):s.jsx("div",{className:"timeline-track",children:c.map((p,f)=>s.jsx(WW,{snapshot:p,index:f,isActive:f===d,onClick:()=>u(f),showConnector:f<c.length-1,isConnectorActive:f<d},`${p.nodeId}-${p.timestamp}`))})})]})}),WW=E.memo(function({snapshot:t,index:n,isActive:r,onClick:i,showConnector:a,isConnectorActive:c}){const u=`status-${t.status}`,d=t.status==="error";return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`timeline-node ${u} ${r?"active":""}`,onClick:i,role:"button",tabIndex:0,onKeyDown:p=>p.key==="Enter"&&i(),"aria-label":`Step ${n+1}: ${t.nodeLabel||t.nodeId}, ${t.status}${d&&t.error?`: ${t.error}`:""}, ${J1(t.duration)}`,title:d&&t.error?`Error: ${t.error}`:void 0,children:[s.jsx("div",{className:"timeline-node-status",children:s.jsx(jx,{status:t.status==="running"?"running":t.status,size:"sm"})}),s.jsx("span",{className:"timeline-node-label",title:t.nodeLabel||t.nodeId,children:t.nodeLabel||t.nodeId}),s.jsx("span",{className:"timeline-node-duration",children:J1(t.duration)}),t.step!==void 0&&s.jsxs("span",{className:"timeline-node-step",children:["Step ",t.step]}),d&&s.jsx("span",{className:"timeline-node-error-badge",title:t.error,children:""})]}),a&&s.jsx("div",{className:`timeline-connector ${c?"active":""}`,children:s.jsx("div",{className:"timeline-connector-line"})})]})});function KW(){return s.jsxs("div",{className:"timeline-empty",children:[s.jsx("span",{className:"timeline-empty-icon",children:""}),s.jsx("span",{className:"timeline-empty-text",children:"Run the workflow to see execution timeline"})]})}function GW({className:e}){return s.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:s.jsx("polyline",{points:"6 9 12 15 18 9"})})}function J1(e){if(e<1e3)return`${e}ms`;if(e<6e4)return`${(e/1e3).toFixed(1)}s`;const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return`${t}m ${n}s`}E.memo(function({snapshots:t,currentIndex:n,onScrub:r,onScrubStart:i,onScrubEnd:a}){const c=E.useRef(null),[u,d]=E.useState(!1),p=t.filter(P=>!P.nodeId.startsWith("__")),f=Math.max(0,p.length-1),m=t[n]?p.findIndex(P=>P===t[n]):-1,g=Math.max(0,m),v=f>0?g/f*100:0,w=E.useCallback(P=>{if(!c.current||f===0)return 0;const T=c.current.getBoundingClientRect(),C=P-T.left,z=Math.max(0,Math.min(1,C/T.width));return Math.round(z*f)},[f]),b=E.useCallback(P=>{if(P<0||P>=p.length)return-1;const T=p[P];return t.findIndex(C=>C===T)},[p,t]),k=E.useCallback(P=>{P.preventDefault(),d(!0),i?.();const T=w(P.clientX),C=b(T);C>=0&&r(C)},[w,b,r,i]);E.useEffect(()=>{if(!u)return;const P=C=>{const z=w(C.clientX),F=b(z);F>=0&&r(F)},T=()=>{d(!1),a?.()};return document.addEventListener("mousemove",P),document.addEventListener("mouseup",T),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",T)}},[u,w,b,r,a]);const _=E.useCallback(P=>{const T=w(P.clientX),C=b(T);C>=0&&r(C)},[w,b,r]),N=E.useCallback(P=>{let T=g;switch(P.key){case"ArrowLeft":case"ArrowDown":T=Math.max(0,g-1);break;case"ArrowRight":case"ArrowUp":T=Math.min(f,g+1);break;case"Home":T=0;break;case"End":T=f;break;default:return}P.preventDefault();const C=b(T);C>=0&&r(C)},[g,f,b,r]);if(p.length===0)return null;const S=p[g],A=S?.nodeLabel||S?.nodeId||"Unknown";return s.jsxs("div",{className:"timeline-scrubber",children:[s.jsxs("div",{ref:c,className:"timeline-scrubber-track",onMouseDown:k,onClick:_,role:"slider","aria-label":"Timeline scrubber","aria-valuemin":0,"aria-valuemax":f,"aria-valuenow":g,"aria-valuetext":`Step ${g+1} of ${p.length}: ${A}`,tabIndex:0,onKeyDown:N,children:[s.jsx("div",{className:"timeline-scrubber-progress",style:{width:`${v}%`}}),s.jsx("div",{className:"timeline-scrubber-thumb",style:{left:`${v}%`}})]}),s.jsxs("div",{className:"timeline-scrubber-labels",children:[s.jsxs("span",{children:["Step ",g+1," / ",p.length]}),s.jsx("span",{title:A,children:YW(A,30)})]})]})});function YW(e,t){return e.length<=t?e:e.slice(0,t-3)+"..."}function Cx(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xp,Z1;function XW(){if(Z1)return Xp;Z1=1;function e(){this.__data__=[],this.size=0}return Xp=e,Xp}var Qp,ek;function ys(){if(ek)return Qp;ek=1;function e(t,n){return t===n||t!==t&&n!==n}return Qp=e,Qp}var Jp,tk;function bu(){if(tk)return Jp;tk=1;var e=ys();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Jp=t,Jp}var Zp,nk;function QW(){if(nk)return Zp;nk=1;var e=bu(),t=Array.prototype,n=t.splice;function r(i){var a=this.__data__,c=e(a,i);if(c<0)return!1;var u=a.length-1;return c==u?a.pop():n.call(a,c,1),--this.size,!0}return Zp=r,Zp}var ef,rk;function JW(){if(rk)return ef;rk=1;var e=bu();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return ef=t,ef}var tf,ik;function ZW(){if(ik)return tf;ik=1;var e=bu();function t(n){return e(this.__data__,n)>-1}return tf=t,tf}var nf,ok;function eK(){if(ok)return nf;ok=1;var e=bu();function t(n,r){var i=this.__data__,a=e(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return nf=t,nf}var rf,sk;function wu(){if(sk)return rf;sk=1;var e=XW(),t=QW(),n=JW(),r=ZW(),i=eK();function a(c){var u=-1,d=c==null?0:c.length;for(this.clear();++u<d;){var p=c[u];this.set(p[0],p[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,rf=a,rf}var of,ak;function tK(){if(ak)return of;ak=1;var e=wu();function t(){this.__data__=new e,this.size=0}return of=t,of}var sf,lk;function nK(){if(lk)return sf;lk=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return sf=e,sf}var af,ck;function rK(){if(ck)return af;ck=1;function e(t){return this.__data__.get(t)}return af=e,af}var lf,uk;function iK(){if(uk)return lf;uk=1;function e(t){return this.__data__.has(t)}return lf=e,lf}var cf,dk;function D2(){if(dk)return cf;dk=1;var e=typeof cc=="object"&&cc&&cc.Object===Object&&cc;return cf=e,cf}var uf,pk;function Yn(){if(pk)return uf;pk=1;var e=D2(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return uf=n,uf}var df,fk;function vs(){if(fk)return df;fk=1;var e=Yn(),t=e.Symbol;return df=t,df}var pf,hk;function oK(){if(hk)return pf;hk=1;var e=vs(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function a(c){var u=n.call(c,i),d=c[i];try{c[i]=void 0;var p=!0}catch{}var f=r.call(c);return p&&(u?c[i]=d:delete c[i]),f}return pf=a,pf}var ff,mk;function sK(){if(mk)return ff;mk=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return ff=n,ff}var hf,gk;function ao(){if(gk)return hf;gk=1;var e=vs(),t=oK(),n=sK(),r="[object Null]",i="[object Undefined]",a=e?e.toStringTag:void 0;function c(u){return u==null?u===void 0?i:r:a&&a in Object(u)?t(u):n(u)}return hf=c,hf}var mf,yk;function Rn(){if(yk)return mf;yk=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return mf=e,mf}var gf,vk;function ol(){if(vk)return gf;vk=1;var e=ao(),t=Rn(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function c(u){if(!t(u))return!1;var d=e(u);return d==r||d==i||d==n||d==a}return gf=c,gf}var yf,xk;function aK(){if(xk)return yf;xk=1;var e=Yn(),t=e["__core-js_shared__"];return yf=t,yf}var vf,bk;function lK(){if(bk)return vf;bk=1;var e=aK(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return vf=n,vf}var xf,wk;function q2(){if(wk)return xf;wk=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return xf=n,xf}var bf,_k;function cK(){if(_k)return bf;_k=1;var e=ol(),t=lK(),n=Rn(),r=q2(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,d=c.toString,p=u.hasOwnProperty,f=RegExp("^"+d.call(p).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(g){if(!n(g)||t(g))return!1;var v=e(g)?f:a;return v.test(r(g))}return bf=m,bf}var wf,kk;function uK(){if(kk)return wf;kk=1;function e(t,n){return t?.[n]}return wf=e,wf}var _f,Sk;function lo(){if(Sk)return _f;Sk=1;var e=cK(),t=uK();function n(r,i){var a=t(r,i);return e(a)?a:void 0}return _f=n,_f}var kf,Nk;function Tx(){if(Nk)return kf;Nk=1;var e=lo(),t=Yn(),n=e(t,"Map");return kf=n,kf}var Sf,jk;function _u(){if(jk)return Sf;jk=1;var e=lo(),t=e(Object,"create");return Sf=t,Sf}var Nf,Ek;function dK(){if(Ek)return Nf;Ek=1;var e=_u();function t(){this.__data__=e?e(null):{},this.size=0}return Nf=t,Nf}var jf,Ck;function pK(){if(Ck)return jf;Ck=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return jf=e,jf}var Ef,Tk;function fK(){if(Tk)return Ef;Tk=1;var e=_u(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var c=this.__data__;if(e){var u=c[a];return u===t?void 0:u}return r.call(c,a)?c[a]:void 0}return Ef=i,Ef}var Cf,Ak;function hK(){if(Ak)return Cf;Ak=1;var e=_u(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var a=this.__data__;return e?a[i]!==void 0:n.call(a,i)}return Cf=r,Cf}var Tf,Pk;function mK(){if(Pk)return Tf;Pk=1;var e=_u(),t="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&i===void 0?t:i,this}return Tf=n,Tf}var Af,Ik;function gK(){if(Ik)return Af;Ik=1;var e=dK(),t=pK(),n=fK(),r=hK(),i=mK();function a(c){var u=-1,d=c==null?0:c.length;for(this.clear();++u<d;){var p=c[u];this.set(p[0],p[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Af=a,Af}var Pf,Rk;function yK(){if(Rk)return Pf;Rk=1;var e=gK(),t=wu(),n=Tx();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Pf=r,Pf}var If,Ok;function vK(){if(Ok)return If;Ok=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return If=e,If}var Rf,Mk;function ku(){if(Mk)return Rf;Mk=1;var e=vK();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Rf=t,Rf}var Of,Lk;function xK(){if(Lk)return Of;Lk=1;var e=ku();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Of=t,Of}var Mf,Dk;function bK(){if(Dk)return Mf;Dk=1;var e=ku();function t(n){return e(this,n).get(n)}return Mf=t,Mf}var Lf,qk;function wK(){if(qk)return Lf;qk=1;var e=ku();function t(n){return e(this,n).has(n)}return Lf=t,Lf}var Df,Fk;function _K(){if(Fk)return Df;Fk=1;var e=ku();function t(n,r){var i=e(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return Df=t,Df}var qf,zk;function Ax(){if(zk)return qf;zk=1;var e=yK(),t=xK(),n=bK(),r=wK(),i=_K();function a(c){var u=-1,d=c==null?0:c.length;for(this.clear();++u<d;){var p=c[u];this.set(p[0],p[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,qf=a,qf}var Ff,Bk;function kK(){if(Bk)return Ff;Bk=1;var e=wu(),t=Tx(),n=Ax(),r=200;function i(a,c){var u=this.__data__;if(u instanceof e){var d=u.__data__;if(!t||d.length<r-1)return d.push([a,c]),this.size=++u.size,this;u=this.__data__=new n(d)}return u.set(a,c),this.size=u.size,this}return Ff=i,Ff}var zf,$k;function Su(){if($k)return zf;$k=1;var e=wu(),t=tK(),n=nK(),r=rK(),i=iK(),a=kK();function c(u){var d=this.__data__=new e(u);this.size=d.size}return c.prototype.clear=t,c.prototype.delete=n,c.prototype.get=r,c.prototype.has=i,c.prototype.set=a,zf=c,zf}var Bf,Hk;function Px(){if(Hk)return Bf;Hk=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Bf=e,Bf}var $f,Vk;function F2(){if(Vk)return $f;Vk=1;var e=lo(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return $f=t,$f}var Hf,Uk;function Nu(){if(Uk)return Hf;Uk=1;var e=F2();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Hf=t,Hf}var Vf,Wk;function ju(){if(Wk)return Vf;Wk=1;var e=Nu(),t=ys(),n=Object.prototype,r=n.hasOwnProperty;function i(a,c,u){var d=a[c];(!(r.call(a,c)&&t(d,u))||u===void 0&&!(c in a))&&e(a,c,u)}return Vf=i,Vf}var Uf,Kk;function sl(){if(Kk)return Uf;Kk=1;var e=ju(),t=Nu();function n(r,i,a,c){var u=!a;a||(a={});for(var d=-1,p=i.length;++d<p;){var f=i[d],m=c?c(a[f],r[f],f,a,r):void 0;m===void 0&&(m=r[f]),u?t(a,f,m):e(a,f,m)}return a}return Uf=n,Uf}var Wf,Gk;function SK(){if(Gk)return Wf;Gk=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Wf=e,Wf}var Kf,Yk;function pr(){if(Yk)return Kf;Yk=1;function e(t){return t!=null&&typeof t=="object"}return Kf=e,Kf}var Gf,Xk;function NK(){if(Xk)return Gf;Xk=1;var e=ao(),t=pr(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Gf=r,Gf}var Yf,Qk;function al(){if(Qk)return Yf;Qk=1;var e=NK(),t=pr(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=e((function(){return arguments})())?e:function(c){return t(c)&&r.call(c,"callee")&&!i.call(c,"callee")};return Yf=a,Yf}var Xf,Jk;function Nt(){if(Jk)return Xf;Jk=1;var e=Array.isArray;return Xf=e,Xf}var wa={exports:{}},Qf,Zk;function jK(){if(Zk)return Qf;Zk=1;function e(){return!1}return Qf=e,Qf}wa.exports;var eS;function xs(){return eS||(eS=1,(function(e,t){var n=Yn(),r=jK(),i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,c=a&&a.exports===i,u=c?n.Buffer:void 0,d=u?u.isBuffer:void 0,p=d||r;e.exports=p})(wa,wa.exports)),wa.exports}var Jf,tS;function Eu(){if(tS)return Jf;tS=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??e,!!i&&(a=="number"||a!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Jf=n,Jf}var Zf,nS;function Ix(){if(nS)return Zf;nS=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Zf=t,Zf}var eh,rS;function EK(){if(rS)return eh;rS=1;var e=ao(),t=Ix(),n=pr(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",p="[object Map]",f="[object Number]",m="[object Object]",g="[object RegExp]",v="[object Set]",w="[object String]",b="[object WeakMap]",k="[object ArrayBuffer]",_="[object DataView]",N="[object Float32Array]",S="[object Float64Array]",A="[object Int8Array]",P="[object Int16Array]",T="[object Int32Array]",C="[object Uint8Array]",z="[object Uint8ClampedArray]",F="[object Uint16Array]",V="[object Uint32Array]",L={};L[N]=L[S]=L[A]=L[P]=L[T]=L[C]=L[z]=L[F]=L[V]=!0,L[r]=L[i]=L[k]=L[a]=L[_]=L[c]=L[u]=L[d]=L[p]=L[f]=L[m]=L[g]=L[v]=L[w]=L[b]=!1;function q(G){return n(G)&&t(G.length)&&!!L[e(G)]}return eh=q,eh}var th,iS;function Cu(){if(iS)return th;iS=1;function e(t){return function(n){return t(n)}}return th=e,th}var _a={exports:{}};_a.exports;var oS;function Rx(){return oS||(oS=1,(function(e,t){var n=D2(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,c=a&&n.process,u=(function(){try{var d=i&&i.require&&i.require("util").types;return d||c&&c.binding&&c.binding("util")}catch{}})();e.exports=u})(_a,_a.exports)),_a.exports}var nh,sS;function ll(){if(sS)return nh;sS=1;var e=EK(),t=Cu(),n=Rx(),r=n&&n.isTypedArray,i=r?t(r):e;return nh=i,nh}var rh,aS;function z2(){if(aS)return rh;aS=1;var e=SK(),t=al(),n=Nt(),r=xs(),i=Eu(),a=ll(),c=Object.prototype,u=c.hasOwnProperty;function d(p,f){var m=n(p),g=!m&&t(p),v=!m&&!g&&r(p),w=!m&&!g&&!v&&a(p),b=m||g||v||w,k=b?e(p.length,String):[],_=k.length;for(var N in p)(f||u.call(p,N))&&!(b&&(N=="length"||v&&(N=="offset"||N=="parent")||w&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,_)))&&k.push(N);return k}return rh=d,rh}var ih,lS;function Tu(){if(lS)return ih;lS=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return ih=t,ih}var oh,cS;function B2(){if(cS)return oh;cS=1;function e(t,n){return function(r){return t(n(r))}}return oh=e,oh}var sh,uS;function CK(){if(uS)return sh;uS=1;var e=B2(),t=e(Object.keys,Object);return sh=t,sh}var ah,dS;function Ox(){if(dS)return ah;dS=1;var e=Tu(),t=CK(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!e(a))return t(a);var c=[];for(var u in Object(a))r.call(a,u)&&u!="constructor"&&c.push(u);return c}return ah=i,ah}var lh,pS;function Lr(){if(pS)return lh;pS=1;var e=ol(),t=Ix();function n(r){return r!=null&&t(r.length)&&!e(r)}return lh=n,lh}var ch,fS;function bi(){if(fS)return ch;fS=1;var e=z2(),t=Ox(),n=Lr();function r(i){return n(i)?e(i):t(i)}return ch=r,ch}var uh,hS;function TK(){if(hS)return uh;hS=1;var e=sl(),t=bi();function n(r,i){return r&&e(i,t(i),r)}return uh=n,uh}var dh,mS;function AK(){if(mS)return dh;mS=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return dh=e,dh}var ph,gS;function PK(){if(gS)return ph;gS=1;var e=Rn(),t=Tu(),n=AK(),r=Object.prototype,i=r.hasOwnProperty;function a(c){if(!e(c))return n(c);var u=t(c),d=[];for(var p in c)p=="constructor"&&(u||!i.call(c,p))||d.push(p);return d}return ph=a,ph}var fh,yS;function co(){if(yS)return fh;yS=1;var e=z2(),t=PK(),n=Lr();function r(i){return n(i)?e(i,!0):t(i)}return fh=r,fh}var hh,vS;function IK(){if(vS)return hh;vS=1;var e=sl(),t=co();function n(r,i){return r&&e(i,t(i),r)}return hh=n,hh}var ka={exports:{}};ka.exports;var xS;function $2(){return xS||(xS=1,(function(e,t){var n=Yn(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,c=a?n.Buffer:void 0,u=c?c.allocUnsafe:void 0;function d(p,f){if(f)return p.slice();var m=p.length,g=u?u(m):new p.constructor(m);return p.copy(g),g}e.exports=d})(ka,ka.exports)),ka.exports}var mh,bS;function H2(){if(bS)return mh;bS=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return mh=e,mh}var gh,wS;function V2(){if(wS)return gh;wS=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=0,c=[];++r<i;){var u=t[r];n(u,r,t)&&(c[a++]=u)}return c}return gh=e,gh}var yh,_S;function U2(){if(_S)return yh;_S=1;function e(){return[]}return yh=e,yh}var vh,kS;function Mx(){if(kS)return vh;kS=1;var e=V2(),t=U2(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(c){return c==null?[]:(c=Object(c),e(i(c),function(u){return r.call(c,u)}))}:t;return vh=a,vh}var xh,SS;function RK(){if(SS)return xh;SS=1;var e=sl(),t=Mx();function n(r,i){return e(r,t(r),i)}return xh=n,xh}var bh,NS;function Lx(){if(NS)return bh;NS=1;function e(t,n){for(var r=-1,i=n.length,a=t.length;++r<i;)t[a+r]=n[r];return t}return bh=e,bh}var wh,jS;function Au(){if(jS)return wh;jS=1;var e=B2(),t=e(Object.getPrototypeOf,Object);return wh=t,wh}var _h,ES;function W2(){if(ES)return _h;ES=1;var e=Lx(),t=Au(),n=Mx(),r=U2(),i=Object.getOwnPropertySymbols,a=i?function(c){for(var u=[];c;)e(u,n(c)),c=t(c);return u}:r;return _h=a,_h}var kh,CS;function OK(){if(CS)return kh;CS=1;var e=sl(),t=W2();function n(r,i){return e(r,t(r),i)}return kh=n,kh}var Sh,TS;function K2(){if(TS)return Sh;TS=1;var e=Lx(),t=Nt();function n(r,i,a){var c=i(r);return t(r)?c:e(c,a(r))}return Sh=n,Sh}var Nh,AS;function G2(){if(AS)return Nh;AS=1;var e=K2(),t=Mx(),n=bi();function r(i){return e(i,n,t)}return Nh=r,Nh}var jh,PS;function MK(){if(PS)return jh;PS=1;var e=K2(),t=W2(),n=co();function r(i){return e(i,n,t)}return jh=r,jh}var Eh,IS;function LK(){if(IS)return Eh;IS=1;var e=lo(),t=Yn(),n=e(t,"DataView");return Eh=n,Eh}var Ch,RS;function DK(){if(RS)return Ch;RS=1;var e=lo(),t=Yn(),n=e(t,"Promise");return Ch=n,Ch}var Th,OS;function Y2(){if(OS)return Th;OS=1;var e=lo(),t=Yn(),n=e(t,"Set");return Th=n,Th}var Ah,MS;function qK(){if(MS)return Ah;MS=1;var e=lo(),t=Yn(),n=e(t,"WeakMap");return Ah=n,Ah}var Ph,LS;function bs(){if(LS)return Ph;LS=1;var e=LK(),t=Tx(),n=DK(),r=Y2(),i=qK(),a=ao(),c=q2(),u="[object Map]",d="[object Object]",p="[object Promise]",f="[object Set]",m="[object WeakMap]",g="[object DataView]",v=c(e),w=c(t),b=c(n),k=c(r),_=c(i),N=a;return(e&&N(new e(new ArrayBuffer(1)))!=g||t&&N(new t)!=u||n&&N(n.resolve())!=p||r&&N(new r)!=f||i&&N(new i)!=m)&&(N=function(S){var A=a(S),P=A==d?S.constructor:void 0,T=P?c(P):"";if(T)switch(T){case v:return g;case w:return u;case b:return p;case k:return f;case _:return m}return A}),Ph=N,Ph}var Ih,DS;function FK(){if(DS)return Ih;DS=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return Ih=n,Ih}var Rh,qS;function X2(){if(qS)return Rh;qS=1;var e=Yn(),t=e.Uint8Array;return Rh=t,Rh}var Oh,FS;function Dx(){if(FS)return Oh;FS=1;var e=X2();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Oh=t,Oh}var Mh,zS;function zK(){if(zS)return Mh;zS=1;var e=Dx();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Mh=t,Mh}var Lh,BS;function BK(){if(BS)return Lh;BS=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Lh=t,Lh}var Dh,$S;function $K(){if($S)return Dh;$S=1;var e=vs(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Dh=r,Dh}var qh,HS;function Q2(){if(HS)return qh;HS=1;var e=Dx();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return qh=t,qh}var Fh,VS;function HK(){if(VS)return Fh;VS=1;var e=Dx(),t=zK(),n=BK(),r=$K(),i=Q2(),a="[object Boolean]",c="[object Date]",u="[object Map]",d="[object Number]",p="[object RegExp]",f="[object Set]",m="[object String]",g="[object Symbol]",v="[object ArrayBuffer]",w="[object DataView]",b="[object Float32Array]",k="[object Float64Array]",_="[object Int8Array]",N="[object Int16Array]",S="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",T="[object Uint16Array]",C="[object Uint32Array]";function z(F,V,L){var q=F.constructor;switch(V){case v:return e(F);case a:case c:return new q(+F);case w:return t(F,L);case b:case k:case _:case N:case S:case A:case P:case T:case C:return i(F,L);case u:return new q;case d:case m:return new q(F);case p:return n(F);case f:return new q;case g:return r(F)}}return Fh=z,Fh}var zh,US;function J2(){if(US)return zh;US=1;var e=Rn(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}})();return zh=n,zh}var Bh,WS;function Z2(){if(WS)return Bh;WS=1;var e=J2(),t=Au(),n=Tu();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Bh=r,Bh}var $h,KS;function VK(){if(KS)return $h;KS=1;var e=bs(),t=pr(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return $h=r,$h}var Hh,GS;function UK(){if(GS)return Hh;GS=1;var e=VK(),t=Cu(),n=Rx(),r=n&&n.isMap,i=r?t(r):e;return Hh=i,Hh}var Vh,YS;function WK(){if(YS)return Vh;YS=1;var e=bs(),t=pr(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Vh=r,Vh}var Uh,XS;function KK(){if(XS)return Uh;XS=1;var e=WK(),t=Cu(),n=Rx(),r=n&&n.isSet,i=r?t(r):e;return Uh=i,Uh}var Wh,QS;function eP(){if(QS)return Wh;QS=1;var e=Su(),t=Px(),n=ju(),r=TK(),i=IK(),a=$2(),c=H2(),u=RK(),d=OK(),p=G2(),f=MK(),m=bs(),g=FK(),v=HK(),w=Z2(),b=Nt(),k=xs(),_=UK(),N=Rn(),S=KK(),A=bi(),P=co(),T=1,C=2,z=4,F="[object Arguments]",V="[object Array]",L="[object Boolean]",q="[object Date]",G="[object Error]",R="[object Function]",M="[object GeneratorFunction]",H="[object Map]",X="[object Number]",$="[object Object]",Y="[object RegExp]",I="[object Set]",B="[object String]",K="[object Symbol]",D="[object WeakMap]",U="[object ArrayBuffer]",te="[object DataView]",Z="[object Float32Array]",ee="[object Float64Array]",Q="[object Int8Array]",ae="[object Int16Array]",pe="[object Int32Array]",ye="[object Uint8Array]",Ne="[object Uint8ClampedArray]",xe="[object Uint16Array]",Ae="[object Uint32Array]",be={};be[F]=be[V]=be[U]=be[te]=be[L]=be[q]=be[Z]=be[ee]=be[Q]=be[ae]=be[pe]=be[H]=be[X]=be[$]=be[Y]=be[I]=be[B]=be[K]=be[ye]=be[Ne]=be[xe]=be[Ae]=!0,be[G]=be[R]=be[D]=!1;function De(Ce,ot,Ye,dt,pt,Be){var Ve,yt=ot&T,ge=ot&C,oe=ot&z;if(Ye&&(Ve=pt?Ye(Ce,dt,pt,Be):Ye(Ce)),Ve!==void 0)return Ve;if(!N(Ce))return Ce;var de=b(Ce);if(de){if(Ve=g(Ce),!yt)return c(Ce,Ve)}else{var je=m(Ce),Me=je==R||je==M;if(k(Ce))return a(Ce,yt);if(je==$||je==F||Me&&!pt){if(Ve=ge||Me?{}:w(Ce),!yt)return ge?d(Ce,i(Ve,Ce)):u(Ce,r(Ve,Ce))}else{if(!be[je])return pt?Ce:{};Ve=v(Ce,je,yt)}}Be||(Be=new e);var Le=Be.get(Ce);if(Le)return Le;Be.set(Ce,Ve),S(Ce)?Ce.forEach(function(He){Ve.add(De(He,ot,Ye,He,Ce,Be))}):_(Ce)&&Ce.forEach(function(He,bt){Ve.set(bt,De(He,ot,Ye,bt,Ce,Be))});var st=oe?ge?f:p:ge?P:A,qt=de?void 0:st(Ce);return t(qt||Ce,function(He,bt){qt&&(bt=He,He=Ce[bt]),n(Ve,bt,De(He,ot,Ye,bt,Ce,Be))}),Ve}return Wh=De,Wh}var Kh,JS;function GK(){if(JS)return Kh;JS=1;var e=eP(),t=4;function n(r){return e(r,t)}return Kh=n,Kh}var Gh,ZS;function qx(){if(ZS)return Gh;ZS=1;function e(t){return function(){return t}}return Gh=e,Gh}var Yh,eN;function YK(){if(eN)return Yh;eN=1;function e(t){return function(n,r,i){for(var a=-1,c=Object(n),u=i(n),d=u.length;d--;){var p=u[t?d:++a];if(r(c[p],p,c)===!1)break}return n}}return Yh=e,Yh}var Xh,tN;function Fx(){if(tN)return Xh;tN=1;var e=YK(),t=e();return Xh=t,Xh}var Qh,nN;function zx(){if(nN)return Qh;nN=1;var e=Fx(),t=bi();function n(r,i){return r&&e(r,i,t)}return Qh=n,Qh}var Jh,rN;function XK(){if(rN)return Jh;rN=1;var e=Lr();function t(n,r){return function(i,a){if(i==null)return i;if(!e(i))return n(i,a);for(var c=i.length,u=r?c:-1,d=Object(i);(r?u--:++u<c)&&a(d[u],u,d)!==!1;);return i}}return Jh=t,Jh}var Zh,iN;function Pu(){if(iN)return Zh;iN=1;var e=zx(),t=XK(),n=t(e);return Zh=n,Zh}var em,oN;function uo(){if(oN)return em;oN=1;function e(t){return t}return em=e,em}var tm,sN;function tP(){if(sN)return tm;sN=1;var e=uo();function t(n){return typeof n=="function"?n:e}return tm=t,tm}var nm,aN;function nP(){if(aN)return nm;aN=1;var e=Px(),t=Pu(),n=tP(),r=Nt();function i(a,c){var u=r(a)?e:t;return u(a,n(c))}return nm=i,nm}var rm,lN;function rP(){return lN||(lN=1,rm=nP()),rm}var im,cN;function QK(){if(cN)return im;cN=1;var e=Pu();function t(n,r){var i=[];return e(n,function(a,c,u){r(a,c,u)&&i.push(a)}),i}return im=t,im}var om,uN;function JK(){if(uN)return om;uN=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return om=t,om}var sm,dN;function ZK(){if(dN)return sm;dN=1;function e(t){return this.__data__.has(t)}return sm=e,sm}var am,pN;function iP(){if(pN)return am;pN=1;var e=Ax(),t=JK(),n=ZK();function r(i){var a=-1,c=i==null?0:i.length;for(this.__data__=new e;++a<c;)this.add(i[a])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,am=r,am}var lm,fN;function eG(){if(fN)return lm;fN=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return lm=e,lm}var cm,hN;function oP(){if(hN)return cm;hN=1;function e(t,n){return t.has(n)}return cm=e,cm}var um,mN;function sP(){if(mN)return um;mN=1;var e=iP(),t=eG(),n=oP(),r=1,i=2;function a(c,u,d,p,f,m){var g=d&r,v=c.length,w=u.length;if(v!=w&&!(g&&w>v))return!1;var b=m.get(c),k=m.get(u);if(b&&k)return b==u&&k==c;var _=-1,N=!0,S=d&i?new e:void 0;for(m.set(c,u),m.set(u,c);++_<v;){var A=c[_],P=u[_];if(p)var T=g?p(P,A,_,u,c,m):p(A,P,_,c,u,m);if(T!==void 0){if(T)continue;N=!1;break}if(S){if(!t(u,function(C,z){if(!n(S,z)&&(A===C||f(A,C,d,p,m)))return S.push(z)})){N=!1;break}}else if(!(A===P||f(A,P,d,p,m))){N=!1;break}}return m.delete(c),m.delete(u),N}return um=a,um}var dm,gN;function tG(){if(gN)return dm;gN=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,a){r[++n]=[a,i]}),r}return dm=e,dm}var pm,yN;function Bx(){if(yN)return pm;yN=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return pm=e,pm}var fm,vN;function nG(){if(vN)return fm;vN=1;var e=vs(),t=X2(),n=ys(),r=sP(),i=tG(),a=Bx(),c=1,u=2,d="[object Boolean]",p="[object Date]",f="[object Error]",m="[object Map]",g="[object Number]",v="[object RegExp]",w="[object Set]",b="[object String]",k="[object Symbol]",_="[object ArrayBuffer]",N="[object DataView]",S=e?e.prototype:void 0,A=S?S.valueOf:void 0;function P(T,C,z,F,V,L,q){switch(z){case N:if(T.byteLength!=C.byteLength||T.byteOffset!=C.byteOffset)return!1;T=T.buffer,C=C.buffer;case _:return!(T.byteLength!=C.byteLength||!L(new t(T),new t(C)));case d:case p:case g:return n(+T,+C);case f:return T.name==C.name&&T.message==C.message;case v:case b:return T==C+"";case m:var G=i;case w:var R=F&c;if(G||(G=a),T.size!=C.size&&!R)return!1;var M=q.get(T);if(M)return M==C;F|=u,q.set(T,C);var H=r(G(T),G(C),F,V,L,q);return q.delete(T),H;case k:if(A)return A.call(T)==A.call(C)}return!1}return fm=P,fm}var hm,xN;function rG(){if(xN)return hm;xN=1;var e=G2(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,c,u,d,p,f){var m=u&t,g=e(a),v=g.length,w=e(c),b=w.length;if(v!=b&&!m)return!1;for(var k=v;k--;){var _=g[k];if(!(m?_ in c:r.call(c,_)))return!1}var N=f.get(a),S=f.get(c);if(N&&S)return N==c&&S==a;var A=!0;f.set(a,c),f.set(c,a);for(var P=m;++k<v;){_=g[k];var T=a[_],C=c[_];if(d)var z=m?d(C,T,_,c,a,f):d(T,C,_,a,c,f);if(!(z===void 0?T===C||p(T,C,u,d,f):z)){A=!1;break}P||(P=_=="constructor")}if(A&&!P){var F=a.constructor,V=c.constructor;F!=V&&"constructor"in a&&"constructor"in c&&!(typeof F=="function"&&F instanceof F&&typeof V=="function"&&V instanceof V)&&(A=!1)}return f.delete(a),f.delete(c),A}return hm=i,hm}var mm,bN;function iG(){if(bN)return mm;bN=1;var e=Su(),t=sP(),n=nG(),r=rG(),i=bs(),a=Nt(),c=xs(),u=ll(),d=1,p="[object Arguments]",f="[object Array]",m="[object Object]",g=Object.prototype,v=g.hasOwnProperty;function w(b,k,_,N,S,A){var P=a(b),T=a(k),C=P?f:i(b),z=T?f:i(k);C=C==p?m:C,z=z==p?m:z;var F=C==m,V=z==m,L=C==z;if(L&&c(b)){if(!c(k))return!1;P=!0,F=!1}if(L&&!F)return A||(A=new e),P||u(b)?t(b,k,_,N,S,A):n(b,k,C,_,N,S,A);if(!(_&d)){var q=F&&v.call(b,"__wrapped__"),G=V&&v.call(k,"__wrapped__");if(q||G){var R=q?b.value():b,M=G?k.value():k;return A||(A=new e),S(R,M,_,N,A)}}return L?(A||(A=new e),r(b,k,_,N,S,A)):!1}return mm=w,mm}var gm,wN;function aP(){if(wN)return gm;wN=1;var e=iG(),t=pr();function n(r,i,a,c,u){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,a,c,n,u)}return gm=n,gm}var ym,_N;function oG(){if(_N)return ym;_N=1;var e=Su(),t=aP(),n=1,r=2;function i(a,c,u,d){var p=u.length,f=p,m=!d;if(a==null)return!f;for(a=Object(a);p--;){var g=u[p];if(m&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++p<f;){g=u[p];var v=g[0],w=a[v],b=g[1];if(m&&g[2]){if(w===void 0&&!(v in a))return!1}else{var k=new e;if(d)var _=d(w,b,v,a,c,k);if(!(_===void 0?t(b,w,n|r,d,k):_))return!1}}return!0}return ym=i,ym}var vm,kN;function lP(){if(kN)return vm;kN=1;var e=Rn();function t(n){return n===n&&!e(n)}return vm=t,vm}var xm,SN;function sG(){if(SN)return xm;SN=1;var e=lP(),t=bi();function n(r){for(var i=t(r),a=i.length;a--;){var c=i[a],u=r[c];i[a]=[c,u,e(u)]}return i}return xm=n,xm}var bm,NN;function cP(){if(NN)return bm;NN=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return bm=e,bm}var wm,jN;function aG(){if(jN)return wm;jN=1;var e=oG(),t=sG(),n=cP();function r(i){var a=t(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(c){return c===i||e(c,i,a)}}return wm=r,wm}var _m,EN;function ws(){if(EN)return _m;EN=1;var e=ao(),t=pr(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return _m=r,_m}var km,CN;function $x(){if(CN)return km;CN=1;var e=Nt(),t=ws(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,c){if(e(a))return!1;var u=typeof a;return u=="number"||u=="symbol"||u=="boolean"||a==null||t(a)?!0:r.test(a)||!n.test(a)||c!=null&&a in Object(c)}return km=i,km}var Sm,TN;function lG(){if(TN)return Sm;TN=1;var e=Ax(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var a=function(){var c=arguments,u=i?i.apply(this,c):c[0],d=a.cache;if(d.has(u))return d.get(u);var p=r.apply(this,c);return a.cache=d.set(u,p)||d,p};return a.cache=new(n.Cache||e),a}return n.Cache=e,Sm=n,Sm}var Nm,AN;function cG(){if(AN)return Nm;AN=1;var e=lG(),t=500;function n(r){var i=e(r,function(c){return a.size===t&&a.clear(),c}),a=i.cache;return i}return Nm=n,Nm}var jm,PN;function uG(){if(PN)return jm;PN=1;var e=cG(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(t,function(c,u,d,p){a.push(d?p.replace(n,"$1"):u||c)}),a});return jm=r,jm}var Em,IN;function Iu(){if(IN)return Em;IN=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,a=Array(i);++r<i;)a[r]=n(t[r],r,t);return a}return Em=e,Em}var Cm,RN;function dG(){if(RN)return Cm;RN=1;var e=vs(),t=Iu(),n=Nt(),r=ws(),i=e?e.prototype:void 0,a=i?i.toString:void 0;function c(u){if(typeof u=="string")return u;if(n(u))return t(u,c)+"";if(r(u))return a?a.call(u):"";var d=u+"";return d=="0"&&1/u==-1/0?"-0":d}return Cm=c,Cm}var Tm,ON;function uP(){if(ON)return Tm;ON=1;var e=dG();function t(n){return n==null?"":e(n)}return Tm=t,Tm}var Am,MN;function Ru(){if(MN)return Am;MN=1;var e=Nt(),t=$x(),n=uG(),r=uP();function i(a,c){return e(a)?a:t(a,c)?[a]:n(r(a))}return Am=i,Am}var Pm,LN;function cl(){if(LN)return Pm;LN=1;var e=ws();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Pm=t,Pm}var Im,DN;function Ou(){if(DN)return Im;DN=1;var e=Ru(),t=cl();function n(r,i){i=e(i,r);for(var a=0,c=i.length;r!=null&&a<c;)r=r[t(i[a++])];return a&&a==c?r:void 0}return Im=n,Im}var Rm,qN;function pG(){if(qN)return Rm;qN=1;var e=Ou();function t(n,r,i){var a=n==null?void 0:e(n,r);return a===void 0?i:a}return Rm=t,Rm}var Om,FN;function fG(){if(FN)return Om;FN=1;function e(t,n){return t!=null&&n in Object(t)}return Om=e,Om}var Mm,zN;function dP(){if(zN)return Mm;zN=1;var e=Ru(),t=al(),n=Nt(),r=Eu(),i=Ix(),a=cl();function c(u,d,p){d=e(d,u);for(var f=-1,m=d.length,g=!1;++f<m;){var v=a(d[f]);if(!(g=u!=null&&p(u,v)))break;u=u[v]}return g||++f!=m?g:(m=u==null?0:u.length,!!m&&i(m)&&r(v,m)&&(n(u)||t(u)))}return Mm=c,Mm}var Lm,BN;function pP(){if(BN)return Lm;BN=1;var e=fG(),t=dP();function n(r,i){return r!=null&&t(r,i,e)}return Lm=n,Lm}var Dm,$N;function hG(){if($N)return Dm;$N=1;var e=aP(),t=pG(),n=pP(),r=$x(),i=lP(),a=cP(),c=cl(),u=1,d=2;function p(f,m){return r(f)&&i(m)?a(c(f),m):function(g){var v=t(g,f);return v===void 0&&v===m?n(g,f):e(m,v,u|d)}}return Dm=p,Dm}var qm,HN;function fP(){if(HN)return qm;HN=1;function e(t){return function(n){return n?.[t]}}return qm=e,qm}var Fm,VN;function mG(){if(VN)return Fm;VN=1;var e=Ou();function t(n){return function(r){return e(r,n)}}return Fm=t,Fm}var zm,UN;function gG(){if(UN)return zm;UN=1;var e=fP(),t=mG(),n=$x(),r=cl();function i(a){return n(a)?e(r(a)):t(a)}return zm=i,zm}var Bm,WN;function Dr(){if(WN)return Bm;WN=1;var e=aG(),t=hG(),n=uo(),r=Nt(),i=gG();function a(c){return typeof c=="function"?c:c==null?n:typeof c=="object"?r(c)?t(c[0],c[1]):e(c):i(c)}return Bm=a,Bm}var $m,KN;function hP(){if(KN)return $m;KN=1;var e=V2(),t=QK(),n=Dr(),r=Nt();function i(a,c){var u=r(a)?e:t;return u(a,n(c,3))}return $m=i,$m}var Hm,GN;function yG(){if(GN)return Hm;GN=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Hm=n,Hm}var Vm,YN;function mP(){if(YN)return Vm;YN=1;var e=yG(),t=dP();function n(r,i){return r!=null&&t(r,i,e)}return Vm=n,Vm}var Um,XN;function vG(){if(XN)return Um;XN=1;var e=Ox(),t=bs(),n=al(),r=Nt(),i=Lr(),a=xs(),c=Tu(),u=ll(),d="[object Map]",p="[object Set]",f=Object.prototype,m=f.hasOwnProperty;function g(v){if(v==null)return!0;if(i(v)&&(r(v)||typeof v=="string"||typeof v.splice=="function"||a(v)||u(v)||n(v)))return!v.length;var w=t(v);if(w==d||w==p)return!v.size;if(c(v))return!e(v).length;for(var b in v)if(m.call(v,b))return!1;return!0}return Um=g,Um}var Wm,QN;function gP(){if(QN)return Wm;QN=1;function e(t){return t===void 0}return Wm=e,Wm}var Km,JN;function yP(){if(JN)return Km;JN=1;var e=Pu(),t=Lr();function n(r,i){var a=-1,c=t(r)?Array(r.length):[];return e(r,function(u,d,p){c[++a]=i(u,d,p)}),c}return Km=n,Km}var Gm,ZN;function vP(){if(ZN)return Gm;ZN=1;var e=Iu(),t=Dr(),n=yP(),r=Nt();function i(a,c){var u=r(a)?e:n;return u(a,t(c,3))}return Gm=i,Gm}var Ym,ej;function xG(){if(ej)return Ym;ej=1;function e(t,n,r,i){var a=-1,c=t==null?0:t.length;for(i&&c&&(r=t[++a]);++a<c;)r=n(r,t[a],a,t);return r}return Ym=e,Ym}var Xm,tj;function bG(){if(tj)return Xm;tj=1;function e(t,n,r,i,a){return a(t,function(c,u,d){r=i?(i=!1,c):n(r,c,u,d)}),r}return Xm=e,Xm}var Qm,nj;function xP(){if(nj)return Qm;nj=1;var e=xG(),t=Pu(),n=Dr(),r=bG(),i=Nt();function a(c,u,d){var p=i(c)?e:r,f=arguments.length<3;return p(c,n(u,4),d,f,t)}return Qm=a,Qm}var Jm,rj;function wG(){if(rj)return Jm;rj=1;var e=ao(),t=Nt(),n=pr(),r="[object String]";function i(a){return typeof a=="string"||!t(a)&&n(a)&&e(a)==r}return Jm=i,Jm}var Zm,ij;function _G(){if(ij)return Zm;ij=1;var e=fP(),t=e("length");return Zm=t,Zm}var eg,oj;function kG(){if(oj)return eg;oj=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",c="\\u200d",u=RegExp("["+c+e+i+a+"]");function d(p){return u.test(p)}return eg=d,eg}var tg,sj;function SG(){if(sj)return tg;sj=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,a="\\ufe0e\\ufe0f",c="["+e+"]",u="["+i+"]",d="\\ud83c[\\udffb-\\udfff]",p="(?:"+u+"|"+d+")",f="[^"+e+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",w=p+"?",b="["+a+"]?",k="(?:"+v+"(?:"+[f,m,g].join("|")+")"+b+w+")*",_=b+w+k,N="(?:"+[f+u+"?",u,m,g,c].join("|")+")",S=RegExp(d+"(?="+d+")|"+N+_,"g");function A(P){for(var T=S.lastIndex=0;S.test(P);)++T;return T}return tg=A,tg}var ng,aj;function NG(){if(aj)return ng;aj=1;var e=_G(),t=kG(),n=SG();function r(i){return t(i)?n(i):e(i)}return ng=r,ng}var rg,lj;function jG(){if(lj)return rg;lj=1;var e=Ox(),t=bs(),n=Lr(),r=wG(),i=NG(),a="[object Map]",c="[object Set]";function u(d){if(d==null)return 0;if(n(d))return r(d)?i(d):d.length;var p=t(d);return p==a||p==c?d.size:e(d).length}return rg=u,rg}var ig,cj;function EG(){if(cj)return ig;cj=1;var e=Px(),t=J2(),n=zx(),r=Dr(),i=Au(),a=Nt(),c=xs(),u=ol(),d=Rn(),p=ll();function f(m,g,v){var w=a(m),b=w||c(m)||p(m);if(g=r(g,4),v==null){var k=m&&m.constructor;b?v=w?new k:[]:d(m)?v=u(k)?t(i(m)):{}:v={}}return(b?e:n)(m,function(_,N,S){return g(v,_,N,S)}),v}return ig=f,ig}var og,uj;function CG(){if(uj)return og;uj=1;var e=vs(),t=al(),n=Nt(),r=e?e.isConcatSpreadable:void 0;function i(a){return n(a)||t(a)||!!(r&&a&&a[r])}return og=i,og}var sg,dj;function Hx(){if(dj)return sg;dj=1;var e=Lx(),t=CG();function n(r,i,a,c,u){var d=-1,p=r.length;for(a||(a=t),u||(u=[]);++d<p;){var f=r[d];i>0&&a(f)?i>1?n(f,i-1,a,c,u):e(u,f):c||(u[u.length]=f)}return u}return sg=n,sg}var ag,pj;function TG(){if(pj)return ag;pj=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return ag=e,ag}var lg,fj;function bP(){if(fj)return lg;fj=1;var e=TG(),t=Math.max;function n(r,i,a){return i=t(i===void 0?r.length-1:i,0),function(){for(var c=arguments,u=-1,d=t(c.length-i,0),p=Array(d);++u<d;)p[u]=c[i+u];u=-1;for(var f=Array(i+1);++u<i;)f[u]=c[u];return f[i]=a(p),e(r,this,f)}}return lg=n,lg}var cg,hj;function AG(){if(hj)return cg;hj=1;var e=qx(),t=F2(),n=uo(),r=t?function(i,a){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:n;return cg=r,cg}var ug,mj;function PG(){if(mj)return ug;mj=1;var e=800,t=16,n=Date.now;function r(i){var a=0,c=0;return function(){var u=n(),d=t-(u-c);if(c=u,d>0){if(++a>=e)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return ug=r,ug}var dg,gj;function wP(){if(gj)return dg;gj=1;var e=AG(),t=PG(),n=t(e);return dg=n,dg}var pg,yj;function Mu(){if(yj)return pg;yj=1;var e=uo(),t=bP(),n=wP();function r(i,a){return n(t(i,a,e),i+"")}return pg=r,pg}var fg,vj;function _P(){if(vj)return fg;vj=1;function e(t,n,r,i){for(var a=t.length,c=r+(i?1:-1);i?c--:++c<a;)if(n(t[c],c,t))return c;return-1}return fg=e,fg}var hg,xj;function IG(){if(xj)return hg;xj=1;function e(t){return t!==t}return hg=e,hg}var mg,bj;function RG(){if(bj)return mg;bj=1;function e(t,n,r){for(var i=r-1,a=t.length;++i<a;)if(t[i]===n)return i;return-1}return mg=e,mg}var gg,wj;function OG(){if(wj)return gg;wj=1;var e=_P(),t=IG(),n=RG();function r(i,a,c){return a===a?n(i,a,c):e(i,t,c)}return gg=r,gg}var yg,_j;function MG(){if(_j)return yg;_j=1;var e=OG();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return yg=t,yg}var vg,kj;function LG(){if(kj)return vg;kj=1;function e(t,n,r){for(var i=-1,a=t==null?0:t.length;++i<a;)if(r(n,t[i]))return!0;return!1}return vg=e,vg}var xg,Sj;function DG(){if(Sj)return xg;Sj=1;function e(){}return xg=e,xg}var bg,Nj;function qG(){if(Nj)return bg;Nj=1;var e=Y2(),t=DG(),n=Bx(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(a){return new e(a)}:t;return bg=i,bg}var wg,jj;function FG(){if(jj)return wg;jj=1;var e=iP(),t=MG(),n=LG(),r=oP(),i=qG(),a=Bx(),c=200;function u(d,p,f){var m=-1,g=t,v=d.length,w=!0,b=[],k=b;if(f)w=!1,g=n;else if(v>=c){var _=p?null:i(d);if(_)return a(_);w=!1,g=r,k=new e}else k=p?[]:b;e:for(;++m<v;){var N=d[m],S=p?p(N):N;if(N=f||N!==0?N:0,w&&S===S){for(var A=k.length;A--;)if(k[A]===S)continue e;p&&k.push(S),b.push(N)}else g(k,S,f)||(k!==b&&k.push(S),b.push(N))}return b}return wg=u,wg}var _g,Ej;function kP(){if(Ej)return _g;Ej=1;var e=Lr(),t=pr();function n(r){return t(r)&&e(r)}return _g=n,_g}var kg,Cj;function zG(){if(Cj)return kg;Cj=1;var e=Hx(),t=Mu(),n=FG(),r=kP(),i=t(function(a){return n(e(a,1,r,!0))});return kg=i,kg}var Sg,Tj;function BG(){if(Tj)return Sg;Tj=1;var e=Iu();function t(n,r){return e(r,function(i){return n[i]})}return Sg=t,Sg}var Ng,Aj;function SP(){if(Aj)return Ng;Aj=1;var e=BG(),t=bi();function n(r){return r==null?[]:e(r,t(r))}return Ng=n,Ng}var jg,Pj;function On(){if(Pj)return jg;Pj=1;var e;if(typeof Cx=="function")try{e={clone:GK(),constant:qx(),each:rP(),filter:hP(),has:mP(),isArray:Nt(),isEmpty:vG(),isFunction:ol(),isUndefined:gP(),keys:bi(),map:vP(),reduce:xP(),size:jG(),transform:EG(),union:zG(),values:SP()}}catch{}return e||(e=window._),jg=e,jg}var Eg,Ij;function Vx(){if(Ij)return Eg;Ij=1;var e=On();Eg=i;var t="\0",n="\0",r="";function i(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(m){return e.isEmpty(f._in[m])})},i.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(m){return e.isEmpty(f._out[m])})},i.prototype.setNodes=function(f,m){var g=arguments,v=this;return e.each(f,function(w){g.length>1?v.setNode(w,m):v.setNode(w)}),this},i.prototype.setNode=function(f,m){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=m),this):(this._nodes[f]=arguments.length>1?m:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=n,this._children[f]={},this._children[n][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return e.has(this._nodes,f)},i.prototype.removeNode=function(f){var m=this;if(e.has(this._nodes,f)){var g=function(v){m.removeEdge(m._edgeObjs[v])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(v){m.setParent(v)}),delete this._children[f]),e.each(e.keys(this._in[f]),g),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),g),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,m){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(m))m=n;else{m+="";for(var g=m;!e.isUndefined(g);g=this.parent(g))if(g===f)throw new Error("Setting "+m+" as parent of "+f+" would create a cycle");this.setNode(m)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=m,this._children[m][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var m=this._parent[f];if(m!==n)return m}},i.prototype.children=function(f){if(e.isUndefined(f)&&(f=n),this._isCompound){var m=this._children[f];if(m)return e.keys(m)}else{if(f===n)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var m=this._preds[f];if(m)return e.keys(m)},i.prototype.successors=function(f){var m=this._sucs[f];if(m)return e.keys(m)},i.prototype.neighbors=function(f){var m=this.predecessors(f);if(m)return e.union(m,this.successors(f))},i.prototype.isLeaf=function(f){var m;return this.isDirected()?m=this.successors(f):m=this.neighbors(f),m.length===0},i.prototype.filterNodes=function(f){var m=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});m.setGraph(this.graph());var g=this;e.each(this._nodes,function(b,k){f(k)&&m.setNode(k,b)}),e.each(this._edgeObjs,function(b){m.hasNode(b.v)&&m.hasNode(b.w)&&m.setEdge(b,g.edge(b))});var v={};function w(b){var k=g.parent(b);return k===void 0||m.hasNode(k)?(v[b]=k,k):k in v?v[k]:w(k)}return this._isCompound&&e.each(m.nodes(),function(b){m.setParent(b,w(b))}),m},i.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(f,m){var g=this,v=arguments;return e.reduce(f,function(w,b){return v.length>1?g.setEdge(w,b,m):g.setEdge(w,b),b}),this},i.prototype.setEdge=function(){var f,m,g,v,w=!1,b=arguments[0];typeof b=="object"&&b!==null&&"v"in b?(f=b.v,m=b.w,g=b.name,arguments.length===2&&(v=arguments[1],w=!0)):(f=b,m=arguments[1],g=arguments[3],arguments.length>2&&(v=arguments[2],w=!0)),f=""+f,m=""+m,e.isUndefined(g)||(g=""+g);var k=u(this._isDirected,f,m,g);if(e.has(this._edgeLabels,k))return w&&(this._edgeLabels[k]=v),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(m),this._edgeLabels[k]=w?v:this._defaultEdgeLabelFn(f,m,g);var _=d(this._isDirected,f,m,g);return f=_.v,m=_.w,Object.freeze(_),this._edgeObjs[k]=_,a(this._preds[m],f),a(this._sucs[f],m),this._in[m][k]=_,this._out[f][k]=_,this._edgeCount++,this},i.prototype.edge=function(f,m,g){var v=arguments.length===1?p(this._isDirected,arguments[0]):u(this._isDirected,f,m,g);return this._edgeLabels[v]},i.prototype.hasEdge=function(f,m,g){var v=arguments.length===1?p(this._isDirected,arguments[0]):u(this._isDirected,f,m,g);return e.has(this._edgeLabels,v)},i.prototype.removeEdge=function(f,m,g){var v=arguments.length===1?p(this._isDirected,arguments[0]):u(this._isDirected,f,m,g),w=this._edgeObjs[v];return w&&(f=w.v,m=w.w,delete this._edgeLabels[v],delete this._edgeObjs[v],c(this._preds[m],f),c(this._sucs[f],m),delete this._in[m][v],delete this._out[f][v],this._edgeCount--),this},i.prototype.inEdges=function(f,m){var g=this._in[f];if(g){var v=e.values(g);return m?e.filter(v,function(w){return w.v===m}):v}},i.prototype.outEdges=function(f,m){var g=this._out[f];if(g){var v=e.values(g);return m?e.filter(v,function(w){return w.w===m}):v}},i.prototype.nodeEdges=function(f,m){var g=this.inEdges(f,m);if(g)return g.concat(this.outEdges(f,m))};function a(f,m){f[m]?f[m]++:f[m]=1}function c(f,m){--f[m]||delete f[m]}function u(f,m,g,v){var w=""+m,b=""+g;if(!f&&w>b){var k=w;w=b,b=k}return w+r+b+r+(e.isUndefined(v)?t:v)}function d(f,m,g,v){var w=""+m,b=""+g;if(!f&&w>b){var k=w;w=b,b=k}var _={v:w,w:b};return v&&(_.name=v),_}function p(f,m){return u(f,m.v,m.w,m.name)}return Eg}var Cg,Rj;function $G(){return Rj||(Rj=1,Cg="2.1.8"),Cg}var Tg,Oj;function HG(){return Oj||(Oj=1,Tg={Graph:Vx(),version:$G()}),Tg}var Ag,Mj;function VG(){if(Mj)return Ag;Mj=1;var e=On(),t=Vx();Ag={write:n,read:a};function n(c){var u={options:{directed:c.isDirected(),multigraph:c.isMultigraph(),compound:c.isCompound()},nodes:r(c),edges:i(c)};return e.isUndefined(c.graph())||(u.value=e.clone(c.graph())),u}function r(c){return e.map(c.nodes(),function(u){var d=c.node(u),p=c.parent(u),f={v:u};return e.isUndefined(d)||(f.value=d),e.isUndefined(p)||(f.parent=p),f})}function i(c){return e.map(c.edges(),function(u){var d=c.edge(u),p={v:u.v,w:u.w};return e.isUndefined(u.name)||(p.name=u.name),e.isUndefined(d)||(p.value=d),p})}function a(c){var u=new t(c.options).setGraph(c.value);return e.each(c.nodes,function(d){u.setNode(d.v,d.value),d.parent&&u.setParent(d.v,d.parent)}),e.each(c.edges,function(d){u.setEdge({v:d.v,w:d.w,name:d.name},d.value)}),u}return Ag}var Pg,Lj;function UG(){if(Lj)return Pg;Lj=1;var e=On();Pg=t;function t(n){var r={},i=[],a;function c(u){e.has(r,u)||(r[u]=!0,a.push(u),e.each(n.successors(u),c),e.each(n.predecessors(u),c))}return e.each(n.nodes(),function(u){a=[],c(u),a.length&&i.push(a)}),i}return Pg}var Ig,Dj;function NP(){if(Dj)return Ig;Dj=1;var e=On();Ig=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var a=this._arr,c=a.length;return i[n]=c,a.push({key:n,priority:r}),this._decrease(c),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,c=n;i<r.length&&(c=r[i].priority<r[c].priority?i:c,a<r.length&&(c=r[a].priority<r[c].priority?a:c),c!==n&&(this._swap(n,c),this._heapify(c)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},t.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,c=i[n],u=i[r];i[n]=u,i[r]=c,a[u.key]=n,a[c.key]=r},Ig}var Rg,qj;function jP(){if(qj)return Rg;qj=1;var e=On(),t=NP();Rg=r;var n=e.constant(1);function r(a,c,u,d){return i(a,String(c),u||n,d||function(p){return a.outEdges(p)})}function i(a,c,u,d){var p={},f=new t,m,g,v=function(w){var b=w.v!==m?w.v:w.w,k=p[b],_=u(w),N=g.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+w+" Weight: "+_);N<k.distance&&(k.distance=N,k.predecessor=m,f.decrease(b,N))};for(a.nodes().forEach(function(w){var b=w===c?0:Number.POSITIVE_INFINITY;p[w]={distance:b},f.add(w,b)});f.size()>0&&(m=f.removeMin(),g=p[m],g.distance!==Number.POSITIVE_INFINITY);)d(m).forEach(v);return p}return Rg}var Og,Fj;function WG(){if(Fj)return Og;Fj=1;var e=jP(),t=On();Og=n;function n(r,i,a){return t.transform(r.nodes(),function(c,u){c[u]=e(r,u,i,a)},{})}return Og}var Mg,zj;function EP(){if(zj)return Mg;zj=1;var e=On();Mg=t;function t(n){var r=0,i=[],a={},c=[];function u(d){var p=a[d]={onStack:!0,lowlink:r,index:r++};if(i.push(d),n.successors(d).forEach(function(g){e.has(a,g)?a[g].onStack&&(p.lowlink=Math.min(p.lowlink,a[g].index)):(u(g),p.lowlink=Math.min(p.lowlink,a[g].lowlink))}),p.lowlink===p.index){var f=[],m;do m=i.pop(),a[m].onStack=!1,f.push(m);while(d!==m);c.push(f)}}return n.nodes().forEach(function(d){e.has(a,d)||u(d)}),c}return Mg}var Lg,Bj;function KG(){if(Bj)return Lg;Bj=1;var e=On(),t=EP();Lg=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Lg}var Dg,$j;function GG(){if($j)return Dg;$j=1;var e=On();Dg=n;var t=e.constant(1);function n(i,a,c){return r(i,a||t,c||function(u){return i.outEdges(u)})}function r(i,a,c){var u={},d=i.nodes();return d.forEach(function(p){u[p]={},u[p][p]={distance:0},d.forEach(function(f){p!==f&&(u[p][f]={distance:Number.POSITIVE_INFINITY})}),c(p).forEach(function(f){var m=f.v===p?f.w:f.v,g=a(f);u[p][m]={distance:g,predecessor:p}})}),d.forEach(function(p){var f=u[p];d.forEach(function(m){var g=u[m];d.forEach(function(v){var w=g[p],b=f[v],k=g[v],_=w.distance+b.distance;_<k.distance&&(k.distance=_,k.predecessor=b.predecessor)})})}),u}return Dg}var qg,Hj;function CP(){if(Hj)return qg;Hj=1;var e=On();qg=t,t.CycleException=n;function t(r){var i={},a={},c=[];function u(d){if(e.has(a,d))throw new n;e.has(i,d)||(a[d]=!0,i[d]=!0,e.each(r.predecessors(d),u),delete a[d],c.push(d))}if(e.each(r.sinks(),u),e.size(i)!==r.nodeCount())throw new n;return c}function n(){}return n.prototype=new Error,qg}var Fg,Vj;function YG(){if(Vj)return Fg;Vj=1;var e=CP();Fg=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Fg}var zg,Uj;function TP(){if(Uj)return zg;Uj=1;var e=On();zg=t;function t(r,i,a){e.isArray(i)||(i=[i]);var c=(r.isDirected()?r.successors:r.neighbors).bind(r),u=[],d={};return e.each(i,function(p){if(!r.hasNode(p))throw new Error("Graph does not have node: "+p);n(r,p,a==="post",d,c,u)}),u}function n(r,i,a,c,u,d){e.has(c,i)||(c[i]=!0,a||d.push(i),e.each(u(i),function(p){n(r,p,a,c,u,d)}),a&&d.push(i))}return zg}var Bg,Wj;function XG(){if(Wj)return Bg;Wj=1;var e=TP();Bg=t;function t(n,r){return e(n,r,"post")}return Bg}var $g,Kj;function QG(){if(Kj)return $g;Kj=1;var e=TP();$g=t;function t(n,r){return e(n,r,"pre")}return $g}var Hg,Gj;function JG(){if(Gj)return Hg;Gj=1;var e=On(),t=Vx(),n=NP();Hg=r;function r(i,a){var c=new t,u={},d=new n,p;function f(g){var v=g.v===p?g.w:g.v,w=d.priority(v);if(w!==void 0){var b=a(g);b<w&&(u[v]=p,d.decrease(v,b))}}if(i.nodeCount()===0)return c;e.each(i.nodes(),function(g){d.add(g,Number.POSITIVE_INFINITY),c.setNode(g)}),d.decrease(i.nodes()[0],0);for(var m=!1;d.size()>0;){if(p=d.removeMin(),e.has(u,p))c.setEdge(p,u[p]);else{if(m)throw new Error("Input graph is not connected: "+i);m=!0}i.nodeEdges(p).forEach(f)}return c}return Hg}var Vg,Yj;function ZG(){return Yj||(Yj=1,Vg={components:UG(),dijkstra:jP(),dijkstraAll:WG(),findCycles:KG(),floydWarshall:GG(),isAcyclic:YG(),postorder:XG(),preorder:QG(),prim:JG(),tarjan:EP(),topsort:CP()}),Vg}var Ug,Xj;function e9(){if(Xj)return Ug;Xj=1;var e=HG();return Ug={Graph:e.Graph,json:VG(),alg:ZG(),version:e.version},Ug}var Wg,Qj;function Wn(){if(Qj)return Wg;Qj=1;var e;if(typeof Cx=="function")try{e=e9()}catch{}return e||(e=window.graphlib),Wg=e,Wg}var Kg,Jj;function t9(){if(Jj)return Kg;Jj=1;var e=eP(),t=1,n=4;function r(i){return e(i,t|n)}return Kg=r,Kg}var Gg,Zj;function Lu(){if(Zj)return Gg;Zj=1;var e=ys(),t=Lr(),n=Eu(),r=Rn();function i(a,c,u){if(!r(u))return!1;var d=typeof c;return(d=="number"?t(u)&&n(c,u.length):d=="string"&&c in u)?e(u[c],a):!1}return Gg=i,Gg}var Yg,eE;function n9(){if(eE)return Yg;eE=1;var e=Mu(),t=ys(),n=Lu(),r=co(),i=Object.prototype,a=i.hasOwnProperty,c=e(function(u,d){u=Object(u);var p=-1,f=d.length,m=f>2?d[2]:void 0;for(m&&n(d[0],d[1],m)&&(f=1);++p<f;)for(var g=d[p],v=r(g),w=-1,b=v.length;++w<b;){var k=v[w],_=u[k];(_===void 0||t(_,i[k])&&!a.call(u,k))&&(u[k]=g[k])}return u});return Yg=c,Yg}var Xg,tE;function r9(){if(tE)return Xg;tE=1;var e=Dr(),t=Lr(),n=bi();function r(i){return function(a,c,u){var d=Object(a);if(!t(a)){var p=e(c,3);a=n(a),c=function(m){return p(d[m],m,d)}}var f=i(a,c,u);return f>-1?d[p?a[f]:f]:void 0}}return Xg=r,Xg}var Qg,nE;function i9(){if(nE)return Qg;nE=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Qg=t,Qg}var Jg,rE;function o9(){if(rE)return Jg;rE=1;var e=i9(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Jg=n,Jg}var Zg,iE;function s9(){if(iE)return Zg;iE=1;var e=o9(),t=Rn(),n=ws(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;function d(p){if(typeof p=="number")return p;if(n(p))return r;if(t(p)){var f=typeof p.valueOf=="function"?p.valueOf():p;p=t(f)?f+"":f}if(typeof p!="string")return p===0?p:+p;p=e(p);var m=a.test(p);return m||c.test(p)?u(p.slice(2),m?2:8):i.test(p)?r:+p}return Zg=d,Zg}var ey,oE;function AP(){if(oE)return ey;oE=1;var e=s9(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var a=i<0?-1:1;return a*n}return i===i?i:0}return ey=r,ey}var ty,sE;function a9(){if(sE)return ty;sE=1;var e=AP();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return ty=t,ty}var ny,aE;function l9(){if(aE)return ny;aE=1;var e=_P(),t=Dr(),n=a9(),r=Math.max;function i(a,c,u){var d=a==null?0:a.length;if(!d)return-1;var p=u==null?0:n(u);return p<0&&(p=r(d+p,0)),e(a,t(c,3),p)}return ny=i,ny}var ry,lE;function c9(){if(lE)return ry;lE=1;var e=r9(),t=l9(),n=e(t);return ry=n,ry}var iy,cE;function PP(){if(cE)return iy;cE=1;var e=Hx();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return iy=t,iy}var oy,uE;function u9(){if(uE)return oy;uE=1;var e=Fx(),t=tP(),n=co();function r(i,a){return i==null?i:e(i,t(a),n)}return oy=r,oy}var sy,dE;function d9(){if(dE)return sy;dE=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return sy=e,sy}var ay,pE;function p9(){if(pE)return ay;pE=1;var e=Nu(),t=zx(),n=Dr();function r(i,a){var c={};return a=n(a,3),t(i,function(u,d,p){e(c,d,a(u,d,p))}),c}return ay=r,ay}var ly,fE;function Ux(){if(fE)return ly;fE=1;var e=ws();function t(n,r,i){for(var a=-1,c=n.length;++a<c;){var u=n[a],d=r(u);if(d!=null&&(p===void 0?d===d&&!e(d):i(d,p)))var p=d,f=u}return f}return ly=t,ly}var cy,hE;function f9(){if(hE)return cy;hE=1;function e(t,n){return t>n}return cy=e,cy}var uy,mE;function h9(){if(mE)return uy;mE=1;var e=Ux(),t=f9(),n=uo();function r(i){return i&&i.length?e(i,n,t):void 0}return uy=r,uy}var dy,gE;function IP(){if(gE)return dy;gE=1;var e=Nu(),t=ys();function n(r,i,a){(a!==void 0&&!t(r[i],a)||a===void 0&&!(i in r))&&e(r,i,a)}return dy=n,dy}var py,yE;function m9(){if(yE)return py;yE=1;var e=ao(),t=Au(),n=pr(),r="[object Object]",i=Function.prototype,a=Object.prototype,c=i.toString,u=a.hasOwnProperty,d=c.call(Object);function p(f){if(!n(f)||e(f)!=r)return!1;var m=t(f);if(m===null)return!0;var g=u.call(m,"constructor")&&m.constructor;return typeof g=="function"&&g instanceof g&&c.call(g)==d}return py=p,py}var fy,vE;function RP(){if(vE)return fy;vE=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return fy=e,fy}var hy,xE;function g9(){if(xE)return hy;xE=1;var e=sl(),t=co();function n(r){return e(r,t(r))}return hy=n,hy}var my,bE;function y9(){if(bE)return my;bE=1;var e=IP(),t=$2(),n=Q2(),r=H2(),i=Z2(),a=al(),c=Nt(),u=kP(),d=xs(),p=ol(),f=Rn(),m=m9(),g=ll(),v=RP(),w=g9();function b(k,_,N,S,A,P,T){var C=v(k,N),z=v(_,N),F=T.get(z);if(F){e(k,N,F);return}var V=P?P(C,z,N+"",k,_,T):void 0,L=V===void 0;if(L){var q=c(z),G=!q&&d(z),R=!q&&!G&&g(z);V=z,q||G||R?c(C)?V=C:u(C)?V=r(C):G?(L=!1,V=t(z,!0)):R?(L=!1,V=n(z,!0)):V=[]:m(z)||a(z)?(V=C,a(C)?V=w(C):(!f(C)||p(C))&&(V=i(z))):L=!1}L&&(T.set(z,V),A(V,z,S,P,T),T.delete(z)),e(k,N,V)}return my=b,my}var gy,wE;function v9(){if(wE)return gy;wE=1;var e=Su(),t=IP(),n=Fx(),r=y9(),i=Rn(),a=co(),c=RP();function u(d,p,f,m,g){d!==p&&n(p,function(v,w){if(g||(g=new e),i(v))r(d,p,w,f,u,m,g);else{var b=m?m(c(d,w),v,w+"",d,p,g):void 0;b===void 0&&(b=v),t(d,w,b)}},a)}return gy=u,gy}var yy,_E;function x9(){if(_E)return yy;_E=1;var e=Mu(),t=Lu();function n(r){return e(function(i,a){var c=-1,u=a.length,d=u>1?a[u-1]:void 0,p=u>2?a[2]:void 0;for(d=r.length>3&&typeof d=="function"?(u--,d):void 0,p&&t(a[0],a[1],p)&&(d=u<3?void 0:d,u=1),i=Object(i);++c<u;){var f=a[c];f&&r(i,f,c,d)}return i})}return yy=n,yy}var vy,kE;function b9(){if(kE)return vy;kE=1;var e=v9(),t=x9(),n=t(function(r,i,a){e(r,i,a)});return vy=n,vy}var xy,SE;function OP(){if(SE)return xy;SE=1;function e(t,n){return t<n}return xy=e,xy}var by,NE;function w9(){if(NE)return by;NE=1;var e=Ux(),t=OP(),n=uo();function r(i){return i&&i.length?e(i,n,t):void 0}return by=r,by}var wy,jE;function _9(){if(jE)return wy;jE=1;var e=Ux(),t=Dr(),n=OP();function r(i,a){return i&&i.length?e(i,t(a,2),n):void 0}return wy=r,wy}var _y,EE;function k9(){if(EE)return _y;EE=1;var e=Yn(),t=function(){return e.Date.now()};return _y=t,_y}var ky,CE;function S9(){if(CE)return ky;CE=1;var e=ju(),t=Ru(),n=Eu(),r=Rn(),i=cl();function a(c,u,d,p){if(!r(c))return c;u=t(u,c);for(var f=-1,m=u.length,g=m-1,v=c;v!=null&&++f<m;){var w=i(u[f]),b=d;if(w==="__proto__"||w==="constructor"||w==="prototype")return c;if(f!=g){var k=v[w];b=p?p(k,w,v):void 0,b===void 0&&(b=r(k)?k:n(u[f+1])?[]:{})}e(v,w,b),v=v[w]}return c}return ky=a,ky}var Sy,TE;function N9(){if(TE)return Sy;TE=1;var e=Ou(),t=S9(),n=Ru();function r(i,a,c){for(var u=-1,d=a.length,p={};++u<d;){var f=a[u],m=e(i,f);c(m,f)&&t(p,n(f,i),m)}return p}return Sy=r,Sy}var Ny,AE;function j9(){if(AE)return Ny;AE=1;var e=N9(),t=pP();function n(r,i){return e(r,i,function(a,c){return t(r,c)})}return Ny=n,Ny}var jy,PE;function E9(){if(PE)return jy;PE=1;var e=PP(),t=bP(),n=wP();function r(i){return n(t(i,void 0,e),i+"")}return jy=r,jy}var Ey,IE;function C9(){if(IE)return Ey;IE=1;var e=j9(),t=E9(),n=t(function(r,i){return r==null?{}:e(r,i)});return Ey=n,Ey}var Cy,RE;function T9(){if(RE)return Cy;RE=1;var e=Math.ceil,t=Math.max;function n(r,i,a,c){for(var u=-1,d=t(e((i-r)/(a||1)),0),p=Array(d);d--;)p[c?d:++u]=r,r+=a;return p}return Cy=n,Cy}var Ty,OE;function A9(){if(OE)return Ty;OE=1;var e=T9(),t=Lu(),n=AP();function r(i){return function(a,c,u){return u&&typeof u!="number"&&t(a,c,u)&&(c=u=void 0),a=n(a),c===void 0?(c=a,a=0):c=n(c),u=u===void 0?a<c?1:-1:n(u),e(a,c,u,i)}}return Ty=r,Ty}var Ay,ME;function P9(){if(ME)return Ay;ME=1;var e=A9(),t=e();return Ay=t,Ay}var Py,LE;function I9(){if(LE)return Py;LE=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Py=e,Py}var Iy,DE;function R9(){if(DE)return Iy;DE=1;var e=ws();function t(n,r){if(n!==r){var i=n!==void 0,a=n===null,c=n===n,u=e(n),d=r!==void 0,p=r===null,f=r===r,m=e(r);if(!p&&!m&&!u&&n>r||u&&d&&f&&!p&&!m||a&&d&&f||!i&&f||!c)return 1;if(!a&&!u&&!m&&n<r||m&&i&&c&&!a&&!u||p&&i&&c||!d&&c||!f)return-1}return 0}return Iy=t,Iy}var Ry,qE;function O9(){if(qE)return Ry;qE=1;var e=R9();function t(n,r,i){for(var a=-1,c=n.criteria,u=r.criteria,d=c.length,p=i.length;++a<d;){var f=e(c[a],u[a]);if(f){if(a>=p)return f;var m=i[a];return f*(m=="desc"?-1:1)}}return n.index-r.index}return Ry=t,Ry}var Oy,FE;function M9(){if(FE)return Oy;FE=1;var e=Iu(),t=Ou(),n=Dr(),r=yP(),i=I9(),a=Cu(),c=O9(),u=uo(),d=Nt();function p(f,m,g){m.length?m=e(m,function(b){return d(b)?function(k){return t(k,b.length===1?b[0]:b)}:b}):m=[u];var v=-1;m=e(m,a(n));var w=r(f,function(b,k,_){var N=e(m,function(S){return S(b)});return{criteria:N,index:++v,value:b}});return i(w,function(b,k){return c(b,k,g)})}return Oy=p,Oy}var My,zE;function L9(){if(zE)return My;zE=1;var e=Hx(),t=M9(),n=Mu(),r=Lu(),i=n(function(a,c){if(a==null)return[];var u=c.length;return u>1&&r(a,c[0],c[1])?c=[]:u>2&&r(c[0],c[1],c[2])&&(c=[c[0]]),t(a,e(c,1),[])});return My=i,My}var Ly,BE;function D9(){if(BE)return Ly;BE=1;var e=uP(),t=0;function n(r){var i=++t;return e(r)+i}return Ly=n,Ly}var Dy,$E;function q9(){if($E)return Dy;$E=1;function e(t,n,r){for(var i=-1,a=t.length,c=n.length,u={};++i<a;){var d=i<c?n[i]:void 0;r(u,t[i],d)}return u}return Dy=e,Dy}var qy,HE;function F9(){if(HE)return qy;HE=1;var e=ju(),t=q9();function n(r,i){return t(r||[],i||[],e)}return qy=n,qy}var Fy,VE;function ut(){if(VE)return Fy;VE=1;var e;if(typeof Cx=="function")try{e={cloneDeep:t9(),constant:qx(),defaults:n9(),each:rP(),filter:hP(),find:c9(),flatten:PP(),forEach:nP(),forIn:u9(),has:mP(),isUndefined:gP(),last:d9(),map:vP(),mapValues:p9(),max:h9(),merge:b9(),min:w9(),minBy:_9(),now:k9(),pick:C9(),range:P9(),reduce:xP(),sortBy:L9(),uniqueId:D9(),values:SP(),zipObject:F9()}}catch{}return e||(e=window._),Fy=e,Fy}var zy,UE;function z9(){if(UE)return zy;UE=1,zy=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,a=i._prev;a!==i;)r.push(JSON.stringify(a,n)),a=a._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return zy}var By,WE;function B9(){if(WE)return By;WE=1;var e=ut(),t=Wn().Graph,n=z9();By=i;var r=e.constant(1);function i(p,f){if(p.nodeCount()<=1)return[];var m=u(p,f||r),g=a(m.graph,m.buckets,m.zeroIdx);return e.flatten(e.map(g,function(v){return p.outEdges(v.v,v.w)}),!0)}function a(p,f,m){for(var g=[],v=f[f.length-1],w=f[0],b;p.nodeCount();){for(;b=w.dequeue();)c(p,f,m,b);for(;b=v.dequeue();)c(p,f,m,b);if(p.nodeCount()){for(var k=f.length-2;k>0;--k)if(b=f[k].dequeue(),b){g=g.concat(c(p,f,m,b,!0));break}}}return g}function c(p,f,m,g,v){var w=v?[]:void 0;return e.forEach(p.inEdges(g.v),function(b){var k=p.edge(b),_=p.node(b.v);v&&w.push({v:b.v,w:b.w}),_.out-=k,d(f,m,_)}),e.forEach(p.outEdges(g.v),function(b){var k=p.edge(b),_=b.w,N=p.node(_);N.in-=k,d(f,m,N)}),p.removeNode(g.v),w}function u(p,f){var m=new t,g=0,v=0;e.forEach(p.nodes(),function(k){m.setNode(k,{v:k,in:0,out:0})}),e.forEach(p.edges(),function(k){var _=m.edge(k.v,k.w)||0,N=f(k),S=_+N;m.setEdge(k.v,k.w,S),v=Math.max(v,m.node(k.v).out+=N),g=Math.max(g,m.node(k.w).in+=N)});var w=e.range(v+g+3).map(function(){return new n}),b=g+1;return e.forEach(m.nodes(),function(k){d(w,b,m.node(k))}),{graph:m,buckets:w,zeroIdx:b}}function d(p,f,m){m.out?m.in?p[m.out-m.in+f].enqueue(m):p[p.length-1].enqueue(m):p[0].enqueue(m)}return By}var $y,KE;function $9(){if(KE)return $y;KE=1;var e=ut(),t=B9();$y={run:n,undo:i};function n(a){var c=a.graph().acyclicer==="greedy"?t(a,u(a)):r(a);e.forEach(c,function(d){var p=a.edge(d);a.removeEdge(d),p.forwardName=d.name,p.reversed=!0,a.setEdge(d.w,d.v,p,e.uniqueId("rev"))});function u(d){return function(p){return d.edge(p).weight}}}function r(a){var c=[],u={},d={};function p(f){e.has(d,f)||(d[f]=!0,u[f]=!0,e.forEach(a.outEdges(f),function(m){e.has(u,m.w)?c.push(m):p(m.w)}),delete u[f])}return e.forEach(a.nodes(),p),c}function i(a){e.forEach(a.edges(),function(c){var u=a.edge(c);if(u.reversed){a.removeEdge(c);var d=u.forwardName;delete u.reversed,delete u.forwardName,a.setEdge(c.w,c.v,u,d)}})}return $y}var Hy,GE;function ln(){if(GE)return Hy;GE=1;var e=ut(),t=Wn().Graph;Hy={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:c,intersectRect:u,buildLayerMatrix:d,normalizeRanks:p,removeEmptyRanks:f,addBorderNode:m,maxRank:g,partition:v,time:w,notime:b};function n(k,_,N,S){var A;do A=e.uniqueId(S);while(k.hasNode(A));return N.dummy=_,k.setNode(A,N),A}function r(k){var _=new t().setGraph(k.graph());return e.forEach(k.nodes(),function(N){_.setNode(N,k.node(N))}),e.forEach(k.edges(),function(N){var S=_.edge(N.v,N.w)||{weight:0,minlen:1},A=k.edge(N);_.setEdge(N.v,N.w,{weight:S.weight+A.weight,minlen:Math.max(S.minlen,A.minlen)})}),_}function i(k){var _=new t({multigraph:k.isMultigraph()}).setGraph(k.graph());return e.forEach(k.nodes(),function(N){k.children(N).length||_.setNode(N,k.node(N))}),e.forEach(k.edges(),function(N){_.setEdge(N,k.edge(N))}),_}function a(k){var _=e.map(k.nodes(),function(N){var S={};return e.forEach(k.outEdges(N),function(A){S[A.w]=(S[A.w]||0)+k.edge(A).weight}),S});return e.zipObject(k.nodes(),_)}function c(k){var _=e.map(k.nodes(),function(N){var S={};return e.forEach(k.inEdges(N),function(A){S[A.v]=(S[A.v]||0)+k.edge(A).weight}),S});return e.zipObject(k.nodes(),_)}function u(k,_){var N=k.x,S=k.y,A=_.x-N,P=_.y-S,T=k.width/2,C=k.height/2;if(!A&&!P)throw new Error("Not possible to find intersection inside of the rectangle");var z,F;return Math.abs(P)*T>Math.abs(A)*C?(P<0&&(C=-C),z=C*A/P,F=C):(A<0&&(T=-T),z=T,F=T*P/A),{x:N+z,y:S+F}}function d(k){var _=e.map(e.range(g(k)+1),function(){return[]});return e.forEach(k.nodes(),function(N){var S=k.node(N),A=S.rank;e.isUndefined(A)||(_[A][S.order]=N)}),_}function p(k){var _=e.min(e.map(k.nodes(),function(N){return k.node(N).rank}));e.forEach(k.nodes(),function(N){var S=k.node(N);e.has(S,"rank")&&(S.rank-=_)})}function f(k){var _=e.min(e.map(k.nodes(),function(P){return k.node(P).rank})),N=[];e.forEach(k.nodes(),function(P){var T=k.node(P).rank-_;N[T]||(N[T]=[]),N[T].push(P)});var S=0,A=k.graph().nodeRankFactor;e.forEach(N,function(P,T){e.isUndefined(P)&&T%A!==0?--S:S&&e.forEach(P,function(C){k.node(C).rank+=S})})}function m(k,_,N,S){var A={width:0,height:0};return arguments.length>=4&&(A.rank=N,A.order=S),n(k,"border",A,_)}function g(k){return e.max(e.map(k.nodes(),function(_){var N=k.node(_).rank;if(!e.isUndefined(N))return N}))}function v(k,_){var N={lhs:[],rhs:[]};return e.forEach(k,function(S){_(S)?N.lhs.push(S):N.rhs.push(S)}),N}function w(k,_){var N=e.now();try{return _()}finally{console.log(k+" time: "+(e.now()-N)+"ms")}}function b(k,_){return _()}return Hy}var Vy,YE;function H9(){if(YE)return Vy;YE=1;var e=ut(),t=ln();Vy={run:n,undo:i};function n(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(c){r(a,c)})}function r(a,c){var u=c.v,d=a.node(u).rank,p=c.w,f=a.node(p).rank,m=c.name,g=a.edge(c),v=g.labelRank;if(f!==d+1){a.removeEdge(c);var w,b,k;for(k=0,++d;d<f;++k,++d)g.points=[],b={width:0,height:0,edgeLabel:g,edgeObj:c,rank:d},w=t.addDummyNode(a,"edge",b,"_d"),d===v&&(b.width=g.width,b.height=g.height,b.dummy="edge-label",b.labelpos=g.labelpos),a.setEdge(u,w,{weight:g.weight},m),k===0&&a.graph().dummyChains.push(w),u=w;a.setEdge(u,p,{weight:g.weight},m)}}function i(a){e.forEach(a.graph().dummyChains,function(c){var u=a.node(c),d=u.edgeLabel,p;for(a.setEdge(u.edgeObj,d);u.dummy;)p=a.successors(c)[0],a.removeNode(c),d.points.push({x:u.x,y:u.y}),u.dummy==="edge-label"&&(d.x=u.x,d.y=u.y,d.width=u.width,d.height=u.height),c=p,u=a.node(c)})}return Vy}var Uy,XE;function nu(){if(XE)return Uy;XE=1;var e=ut();Uy={longestPath:t,slack:n};function t(r){var i={};function a(c){var u=r.node(c);if(e.has(i,c))return u.rank;i[c]=!0;var d=e.min(e.map(r.outEdges(c),function(p){return a(p.w)-r.edge(p).minlen}));return(d===Number.POSITIVE_INFINITY||d===void 0||d===null)&&(d=0),u.rank=d}e.forEach(r.sources(),a)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return Uy}var Wy,QE;function MP(){if(QE)return Wy;QE=1;var e=ut(),t=Wn().Graph,n=nu().slack;Wy=r;function r(u){var d=new t({directed:!1}),p=u.nodes()[0],f=u.nodeCount();d.setNode(p,{});for(var m,g;i(d,u)<f;)m=a(d,u),g=d.hasNode(m.v)?n(u,m):-n(u,m),c(d,u,g);return d}function i(u,d){function p(f){e.forEach(d.nodeEdges(f),function(m){var g=m.v,v=f===g?m.w:g;!u.hasNode(v)&&!n(d,m)&&(u.setNode(v,{}),u.setEdge(f,v,{}),p(v))})}return e.forEach(u.nodes(),p),u.nodeCount()}function a(u,d){return e.minBy(d.edges(),function(p){if(u.hasNode(p.v)!==u.hasNode(p.w))return n(d,p)})}function c(u,d,p){e.forEach(u.nodes(),function(f){d.node(f).rank+=p})}return Wy}var Ky,JE;function V9(){if(JE)return Ky;JE=1;var e=ut(),t=MP(),n=nu().slack,r=nu().longestPath,i=Wn().alg.preorder,a=Wn().alg.postorder,c=ln().simplify;Ky=u,u.initLowLimValues=m,u.initCutValues=d,u.calcCutValue=f,u.leaveEdge=v,u.enterEdge=w,u.exchangeEdges=b;function u(S){S=c(S),r(S);var A=t(S);m(A),d(A,S);for(var P,T;P=v(A);)T=w(A,S,P),b(A,S,P,T)}function d(S,A){var P=a(S,S.nodes());P=P.slice(0,P.length-1),e.forEach(P,function(T){p(S,A,T)})}function p(S,A,P){var T=S.node(P),C=T.parent;S.edge(P,C).cutvalue=f(S,A,P)}function f(S,A,P){var T=S.node(P),C=T.parent,z=!0,F=A.edge(P,C),V=0;return F||(z=!1,F=A.edge(C,P)),V=F.weight,e.forEach(A.nodeEdges(P),function(L){var q=L.v===P,G=q?L.w:L.v;if(G!==C){var R=q===z,M=A.edge(L).weight;if(V+=R?M:-M,_(S,P,G)){var H=S.edge(P,G).cutvalue;V+=R?-H:H}}}),V}function m(S,A){arguments.length<2&&(A=S.nodes()[0]),g(S,{},1,A)}function g(S,A,P,T,C){var z=P,F=S.node(T);return A[T]=!0,e.forEach(S.neighbors(T),function(V){e.has(A,V)||(P=g(S,A,P,V,T))}),F.low=z,F.lim=P++,C?F.parent=C:delete F.parent,P}function v(S){return e.find(S.edges(),function(A){return S.edge(A).cutvalue<0})}function w(S,A,P){var T=P.v,C=P.w;A.hasEdge(T,C)||(T=P.w,C=P.v);var z=S.node(T),F=S.node(C),V=z,L=!1;z.lim>F.lim&&(V=F,L=!0);var q=e.filter(A.edges(),function(G){return L===N(S,S.node(G.v),V)&&L!==N(S,S.node(G.w),V)});return e.minBy(q,function(G){return n(A,G)})}function b(S,A,P,T){var C=P.v,z=P.w;S.removeEdge(C,z),S.setEdge(T.v,T.w,{}),m(S),d(S,A),k(S,A)}function k(S,A){var P=e.find(S.nodes(),function(C){return!A.node(C).parent}),T=i(S,P);T=T.slice(1),e.forEach(T,function(C){var z=S.node(C).parent,F=A.edge(C,z),V=!1;F||(F=A.edge(z,C),V=!0),A.node(C).rank=A.node(z).rank+(V?F.minlen:-F.minlen)})}function _(S,A,P){return S.hasEdge(A,P)}function N(S,A,P){return P.low<=A.lim&&A.lim<=P.lim}return Ky}var Gy,ZE;function U9(){if(ZE)return Gy;ZE=1;var e=nu(),t=e.longestPath,n=MP(),r=V9();Gy=i;function i(d){switch(d.graph().ranker){case"network-simplex":u(d);break;case"tight-tree":c(d);break;case"longest-path":a(d);break;default:u(d)}}var a=t;function c(d){t(d),n(d)}function u(d){r(d)}return Gy}var Yy,eC;function W9(){if(eC)return Yy;eC=1;var e=ut();Yy=t;function t(i){var a=r(i);e.forEach(i.graph().dummyChains,function(c){for(var u=i.node(c),d=u.edgeObj,p=n(i,a,d.v,d.w),f=p.path,m=p.lca,g=0,v=f[g],w=!0;c!==d.w;){if(u=i.node(c),w){for(;(v=f[g])!==m&&i.node(v).maxRank<u.rank;)g++;v===m&&(w=!1)}if(!w){for(;g<f.length-1&&i.node(v=f[g+1]).minRank<=u.rank;)g++;v=f[g]}i.setParent(c,v),c=i.successors(c)[0]}})}function n(i,a,c,u){var d=[],p=[],f=Math.min(a[c].low,a[u].low),m=Math.max(a[c].lim,a[u].lim),g,v;g=c;do g=i.parent(g),d.push(g);while(g&&(a[g].low>f||m>a[g].lim));for(v=g,g=u;(g=i.parent(g))!==v;)p.push(g);return{path:d.concat(p.reverse()),lca:v}}function r(i){var a={},c=0;function u(d){var p=c;e.forEach(i.children(d),u),a[d]={low:p,lim:c++}}return e.forEach(i.children(),u),a}return Yy}var Xy,tC;function K9(){if(tC)return Xy;tC=1;var e=ut(),t=ln();Xy={run:n,cleanup:c};function n(u){var d=t.addDummyNode(u,"root",{},"_root"),p=i(u),f=e.max(e.values(p))-1,m=2*f+1;u.graph().nestingRoot=d,e.forEach(u.edges(),function(v){u.edge(v).minlen*=m});var g=a(u)+1;e.forEach(u.children(),function(v){r(u,d,m,g,f,p,v)}),u.graph().nodeRankFactor=m}function r(u,d,p,f,m,g,v){var w=u.children(v);if(!w.length){v!==d&&u.setEdge(d,v,{weight:0,minlen:p});return}var b=t.addBorderNode(u,"_bt"),k=t.addBorderNode(u,"_bb"),_=u.node(v);u.setParent(b,v),_.borderTop=b,u.setParent(k,v),_.borderBottom=k,e.forEach(w,function(N){r(u,d,p,f,m,g,N);var S=u.node(N),A=S.borderTop?S.borderTop:N,P=S.borderBottom?S.borderBottom:N,T=S.borderTop?f:2*f,C=A!==P?1:m-g[v]+1;u.setEdge(b,A,{weight:T,minlen:C,nestingEdge:!0}),u.setEdge(P,k,{weight:T,minlen:C,nestingEdge:!0})}),u.parent(v)||u.setEdge(d,b,{weight:0,minlen:m+g[v]})}function i(u){var d={};function p(f,m){var g=u.children(f);g&&g.length&&e.forEach(g,function(v){p(v,m+1)}),d[f]=m}return e.forEach(u.children(),function(f){p(f,1)}),d}function a(u){return e.reduce(u.edges(),function(d,p){return d+u.edge(p).weight},0)}function c(u){var d=u.graph();u.removeNode(d.nestingRoot),delete d.nestingRoot,e.forEach(u.edges(),function(p){var f=u.edge(p);f.nestingEdge&&u.removeEdge(p)})}return Xy}var Qy,nC;function G9(){if(nC)return Qy;nC=1;var e=ut(),t=ln();Qy=n;function n(i){function a(c){var u=i.children(c),d=i.node(c);if(u.length&&e.forEach(u,a),e.has(d,"minRank")){d.borderLeft=[],d.borderRight=[];for(var p=d.minRank,f=d.maxRank+1;p<f;++p)r(i,"borderLeft","_bl",c,d,p),r(i,"borderRight","_br",c,d,p)}}e.forEach(i.children(),a)}function r(i,a,c,u,d,p){var f={width:0,height:0,rank:p,borderType:a},m=d[a][p-1],g=t.addDummyNode(i,"border",f,c);d[a][p]=g,i.setParent(g,u),m&&i.setEdge(m,g,{weight:1})}return Qy}var Jy,rC;function Y9(){if(rC)return Jy;rC=1;var e=ut();Jy={adjust:t,undo:n};function t(p){var f=p.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&r(p)}function n(p){var f=p.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&a(p),(f==="lr"||f==="rl")&&(u(p),r(p))}function r(p){e.forEach(p.nodes(),function(f){i(p.node(f))}),e.forEach(p.edges(),function(f){i(p.edge(f))})}function i(p){var f=p.width;p.width=p.height,p.height=f}function a(p){e.forEach(p.nodes(),function(f){c(p.node(f))}),e.forEach(p.edges(),function(f){var m=p.edge(f);e.forEach(m.points,c),e.has(m,"y")&&c(m)})}function c(p){p.y=-p.y}function u(p){e.forEach(p.nodes(),function(f){d(p.node(f))}),e.forEach(p.edges(),function(f){var m=p.edge(f);e.forEach(m.points,d),e.has(m,"x")&&d(m)})}function d(p){var f=p.x;p.x=p.y,p.y=f}return Jy}var Zy,iC;function X9(){if(iC)return Zy;iC=1;var e=ut();Zy=t;function t(n){var r={},i=e.filter(n.nodes(),function(p){return!n.children(p).length}),a=e.max(e.map(i,function(p){return n.node(p).rank})),c=e.map(e.range(a+1),function(){return[]});function u(p){if(!e.has(r,p)){r[p]=!0;var f=n.node(p);c[f.rank].push(p),e.forEach(n.successors(p),u)}}var d=e.sortBy(i,function(p){return n.node(p).rank});return e.forEach(d,u),c}return Zy}var ev,oC;function Q9(){if(oC)return ev;oC=1;var e=ut();ev=t;function t(r,i){for(var a=0,c=1;c<i.length;++c)a+=n(r,i[c-1],i[c]);return a}function n(r,i,a){for(var c=e.zipObject(a,e.map(a,function(g,v){return v})),u=e.flatten(e.map(i,function(g){return e.sortBy(e.map(r.outEdges(g),function(v){return{pos:c[v.w],weight:r.edge(v).weight}}),"pos")}),!0),d=1;d<a.length;)d<<=1;var p=2*d-1;d-=1;var f=e.map(new Array(p),function(){return 0}),m=0;return e.forEach(u.forEach(function(g){var v=g.pos+d;f[v]+=g.weight;for(var w=0;v>0;)v%2&&(w+=f[v+1]),v=v-1>>1,f[v]+=g.weight;m+=g.weight*w})),m}return ev}var tv,sC;function J9(){if(sC)return tv;sC=1;var e=ut();tv=t;function t(n,r){return e.map(r,function(i){var a=n.inEdges(i);if(a.length){var c=e.reduce(a,function(u,d){var p=n.edge(d),f=n.node(d.v);return{sum:u.sum+p.weight*f.order,weight:u.weight+p.weight}},{sum:0,weight:0});return{v:i,barycenter:c.sum/c.weight,weight:c.weight}}else return{v:i}})}return tv}var nv,aC;function Z9(){if(aC)return nv;aC=1;var e=ut();nv=t;function t(i,a){var c={};e.forEach(i,function(d,p){var f=c[d.v]={indegree:0,in:[],out:[],vs:[d.v],i:p};e.isUndefined(d.barycenter)||(f.barycenter=d.barycenter,f.weight=d.weight)}),e.forEach(a.edges(),function(d){var p=c[d.v],f=c[d.w];!e.isUndefined(p)&&!e.isUndefined(f)&&(f.indegree++,p.out.push(c[d.w]))});var u=e.filter(c,function(d){return!d.indegree});return n(u)}function n(i){var a=[];function c(p){return function(f){f.merged||(e.isUndefined(f.barycenter)||e.isUndefined(p.barycenter)||f.barycenter>=p.barycenter)&&r(p,f)}}function u(p){return function(f){f.in.push(p),--f.indegree===0&&i.push(f)}}for(;i.length;){var d=i.pop();a.push(d),e.forEach(d.in.reverse(),c(d)),e.forEach(d.out,u(d))}return e.map(e.filter(a,function(p){return!p.merged}),function(p){return e.pick(p,["vs","i","barycenter","weight"])})}function r(i,a){var c=0,u=0;i.weight&&(c+=i.barycenter*i.weight,u+=i.weight),a.weight&&(c+=a.barycenter*a.weight,u+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=c/u,i.weight=u,i.i=Math.min(a.i,i.i),a.merged=!0}return nv}var rv,lC;function e7(){if(lC)return rv;lC=1;var e=ut(),t=ln();rv=n;function n(a,c){var u=t.partition(a,function(b){return e.has(b,"barycenter")}),d=u.lhs,p=e.sortBy(u.rhs,function(b){return-b.i}),f=[],m=0,g=0,v=0;d.sort(i(!!c)),v=r(f,p,v),e.forEach(d,function(b){v+=b.vs.length,f.push(b.vs),m+=b.barycenter*b.weight,g+=b.weight,v=r(f,p,v)});var w={vs:e.flatten(f,!0)};return g&&(w.barycenter=m/g,w.weight=g),w}function r(a,c,u){for(var d;c.length&&(d=e.last(c)).i<=u;)c.pop(),a.push(d.vs),u++;return u}function i(a){return function(c,u){return c.barycenter<u.barycenter?-1:c.barycenter>u.barycenter?1:a?u.i-c.i:c.i-u.i}}return rv}var iv,cC;function t7(){if(cC)return iv;cC=1;var e=ut(),t=J9(),n=Z9(),r=e7();iv=i;function i(u,d,p,f){var m=u.children(d),g=u.node(d),v=g?g.borderLeft:void 0,w=g?g.borderRight:void 0,b={};v&&(m=e.filter(m,function(P){return P!==v&&P!==w}));var k=t(u,m);e.forEach(k,function(P){if(u.children(P.v).length){var T=i(u,P.v,p,f);b[P.v]=T,e.has(T,"barycenter")&&c(P,T)}});var _=n(k,p);a(_,b);var N=r(_,f);if(v&&(N.vs=e.flatten([v,N.vs,w],!0),u.predecessors(v).length)){var S=u.node(u.predecessors(v)[0]),A=u.node(u.predecessors(w)[0]);e.has(N,"barycenter")||(N.barycenter=0,N.weight=0),N.barycenter=(N.barycenter*N.weight+S.order+A.order)/(N.weight+2),N.weight+=2}return N}function a(u,d){e.forEach(u,function(p){p.vs=e.flatten(p.vs.map(function(f){return d[f]?d[f].vs:f}),!0)})}function c(u,d){e.isUndefined(u.barycenter)?(u.barycenter=d.barycenter,u.weight=d.weight):(u.barycenter=(u.barycenter*u.weight+d.barycenter*d.weight)/(u.weight+d.weight),u.weight+=d.weight)}return iv}var ov,uC;function n7(){if(uC)return ov;uC=1;var e=ut(),t=Wn().Graph;ov=n;function n(i,a,c){var u=r(i),d=new t({compound:!0}).setGraph({root:u}).setDefaultNodeLabel(function(p){return i.node(p)});return e.forEach(i.nodes(),function(p){var f=i.node(p),m=i.parent(p);(f.rank===a||f.minRank<=a&&a<=f.maxRank)&&(d.setNode(p),d.setParent(p,m||u),e.forEach(i[c](p),function(g){var v=g.v===p?g.w:g.v,w=d.edge(v,p),b=e.isUndefined(w)?0:w.weight;d.setEdge(v,p,{weight:i.edge(g).weight+b})}),e.has(f,"minRank")&&d.setNode(p,{borderLeft:f.borderLeft[a],borderRight:f.borderRight[a]}))}),d}function r(i){for(var a;i.hasNode(a=e.uniqueId("_root")););return a}return ov}var sv,dC;function r7(){if(dC)return sv;dC=1;var e=ut();sv=t;function t(n,r,i){var a={},c;e.forEach(i,function(u){for(var d=n.parent(u),p,f;d;){if(p=n.parent(d),p?(f=a[p],a[p]=d):(f=c,c=d),f&&f!==d){r.setEdge(f,d);return}d=p}})}return sv}var av,pC;function i7(){if(pC)return av;pC=1;var e=ut(),t=X9(),n=Q9(),r=t7(),i=n7(),a=r7(),c=Wn().Graph,u=ln();av=d;function d(g){var v=u.maxRank(g),w=p(g,e.range(1,v+1),"inEdges"),b=p(g,e.range(v-1,-1,-1),"outEdges"),k=t(g);m(g,k);for(var _=Number.POSITIVE_INFINITY,N,S=0,A=0;A<4;++S,++A){f(S%2?w:b,S%4>=2),k=u.buildLayerMatrix(g);var P=n(g,k);P<_&&(A=0,N=e.cloneDeep(k),_=P)}m(g,N)}function p(g,v,w){return e.map(v,function(b){return i(g,b,w)})}function f(g,v){var w=new c;e.forEach(g,function(b){var k=b.graph().root,_=r(b,k,w,v);e.forEach(_.vs,function(N,S){b.node(N).order=S}),a(b,w,_.vs)})}function m(g,v){e.forEach(v,function(w){e.forEach(w,function(b,k){g.node(b).order=k})})}return av}var lv,fC;function o7(){if(fC)return lv;fC=1;var e=ut(),t=Wn().Graph,n=ln();lv={positionX:w,findType1Conflicts:r,findType2Conflicts:i,addConflict:c,hasConflict:u,verticalAlignment:d,horizontalCompaction:p,alignCoordinates:g,findSmallestWidthAlignment:m,balance:v};function r(_,N){var S={};function A(P,T){var C=0,z=0,F=P.length,V=e.last(T);return e.forEach(T,function(L,q){var G=a(_,L),R=G?_.node(G).order:F;(G||L===V)&&(e.forEach(T.slice(z,q+1),function(M){e.forEach(_.predecessors(M),function(H){var X=_.node(H),$=X.order;($<C||R<$)&&!(X.dummy&&_.node(M).dummy)&&c(S,H,M)})}),z=q+1,C=R)}),T}return e.reduce(N,A),S}function i(_,N){var S={};function A(T,C,z,F,V){var L;e.forEach(e.range(C,z),function(q){L=T[q],_.node(L).dummy&&e.forEach(_.predecessors(L),function(G){var R=_.node(G);R.dummy&&(R.order<F||R.order>V)&&c(S,G,L)})})}function P(T,C){var z=-1,F,V=0;return e.forEach(C,function(L,q){if(_.node(L).dummy==="border"){var G=_.predecessors(L);G.length&&(F=_.node(G[0]).order,A(C,V,q,z,F),V=q,z=F)}A(C,V,C.length,F,T.length)}),C}return e.reduce(N,P),S}function a(_,N){if(_.node(N).dummy)return e.find(_.predecessors(N),function(S){return _.node(S).dummy})}function c(_,N,S){if(N>S){var A=N;N=S,S=A}var P=_[N];P||(_[N]=P={}),P[S]=!0}function u(_,N,S){if(N>S){var A=N;N=S,S=A}return e.has(_[N],S)}function d(_,N,S,A){var P={},T={},C={};return e.forEach(N,function(z){e.forEach(z,function(F,V){P[F]=F,T[F]=F,C[F]=V})}),e.forEach(N,function(z){var F=-1;e.forEach(z,function(V){var L=A(V);if(L.length){L=e.sortBy(L,function(H){return C[H]});for(var q=(L.length-1)/2,G=Math.floor(q),R=Math.ceil(q);G<=R;++G){var M=L[G];T[V]===V&&F<C[M]&&!u(S,V,M)&&(T[M]=V,T[V]=P[V]=P[M],F=C[M])}}})}),{root:P,align:T}}function p(_,N,S,A,P){var T={},C=f(_,N,S,P),z=P?"borderLeft":"borderRight";function F(q,G){for(var R=C.nodes(),M=R.pop(),H={};M;)H[M]?q(M):(H[M]=!0,R.push(M),R=R.concat(G(M))),M=R.pop()}function V(q){T[q]=C.inEdges(q).reduce(function(G,R){return Math.max(G,T[R.v]+C.edge(R))},0)}function L(q){var G=C.outEdges(q).reduce(function(M,H){return Math.min(M,T[H.w]-C.edge(H))},Number.POSITIVE_INFINITY),R=_.node(q);G!==Number.POSITIVE_INFINITY&&R.borderType!==z&&(T[q]=Math.max(T[q],G))}return F(V,C.predecessors.bind(C)),F(L,C.successors.bind(C)),e.forEach(A,function(q){T[q]=T[S[q]]}),T}function f(_,N,S,A){var P=new t,T=_.graph(),C=b(T.nodesep,T.edgesep,A);return e.forEach(N,function(z){var F;e.forEach(z,function(V){var L=S[V];if(P.setNode(L),F){var q=S[F],G=P.edge(q,L);P.setEdge(q,L,Math.max(C(_,V,F),G||0))}F=V})}),P}function m(_,N){return e.minBy(e.values(N),function(S){var A=Number.NEGATIVE_INFINITY,P=Number.POSITIVE_INFINITY;return e.forIn(S,function(T,C){var z=k(_,C)/2;A=Math.max(T+z,A),P=Math.min(T-z,P)}),A-P})}function g(_,N){var S=e.values(N),A=e.min(S),P=e.max(S);e.forEach(["u","d"],function(T){e.forEach(["l","r"],function(C){var z=T+C,F=_[z],V;if(F!==N){var L=e.values(F);V=C==="l"?A-e.min(L):P-e.max(L),V&&(_[z]=e.mapValues(F,function(q){return q+V}))}})})}function v(_,N){return e.mapValues(_.ul,function(S,A){if(N)return _[N.toLowerCase()][A];var P=e.sortBy(e.map(_,A));return(P[1]+P[2])/2})}function w(_){var N=n.buildLayerMatrix(_),S=e.merge(r(_,N),i(_,N)),A={},P;e.forEach(["u","d"],function(C){P=C==="u"?N:e.values(N).reverse(),e.forEach(["l","r"],function(z){z==="r"&&(P=e.map(P,function(q){return e.values(q).reverse()}));var F=(C==="u"?_.predecessors:_.successors).bind(_),V=d(_,P,S,F),L=p(_,P,V.root,V.align,z==="r");z==="r"&&(L=e.mapValues(L,function(q){return-q})),A[C+z]=L})});var T=m(_,A);return g(A,T),v(A,_.graph().align)}function b(_,N,S){return function(A,P,T){var C=A.node(P),z=A.node(T),F=0,V;if(F+=C.width/2,e.has(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":V=-C.width/2;break;case"r":V=C.width/2;break}if(V&&(F+=S?V:-V),V=0,F+=(C.dummy?N:_)/2,F+=(z.dummy?N:_)/2,F+=z.width/2,e.has(z,"labelpos"))switch(z.labelpos.toLowerCase()){case"l":V=z.width/2;break;case"r":V=-z.width/2;break}return V&&(F+=S?V:-V),V=0,F}}function k(_,N){return _.node(N).width}return lv}var cv,hC;function s7(){if(hC)return cv;hC=1;var e=ut(),t=ln(),n=o7().positionX;cv=r;function r(a){a=t.asNonCompoundGraph(a),i(a),e.forEach(n(a),function(c,u){a.node(u).x=c})}function i(a){var c=t.buildLayerMatrix(a),u=a.graph().ranksep,d=0;e.forEach(c,function(p){var f=e.max(e.map(p,function(m){return a.node(m).height}));e.forEach(p,function(m){a.node(m).y=d+f/2}),d+=f+u})}return cv}var uv,mC;function a7(){if(mC)return uv;mC=1;var e=ut(),t=$9(),n=H9(),r=U9(),i=ln().normalizeRanks,a=W9(),c=ln().removeEmptyRanks,u=K9(),d=G9(),p=Y9(),f=i7(),m=s7(),g=ln(),v=Wn().Graph;uv=w;function w(U,te){var Z=te&&te.debugTiming?g.time:g.notime;Z("layout",function(){var ee=Z("  buildLayoutGraph",function(){return F(U)});Z("  runLayout",function(){b(ee,Z)}),Z("  updateInputGraph",function(){k(U,ee)})})}function b(U,te){te("    makeSpaceForEdgeLabels",function(){V(U)}),te("    removeSelfEdges",function(){Y(U)}),te("    acyclic",function(){t.run(U)}),te("    nestingGraph.run",function(){u.run(U)}),te("    rank",function(){r(g.asNonCompoundGraph(U))}),te("    injectEdgeLabelProxies",function(){L(U)}),te("    removeEmptyRanks",function(){c(U)}),te("    nestingGraph.cleanup",function(){u.cleanup(U)}),te("    normalizeRanks",function(){i(U)}),te("    assignRankMinMax",function(){q(U)}),te("    removeEdgeLabelProxies",function(){G(U)}),te("    normalize.run",function(){n.run(U)}),te("    parentDummyChains",function(){a(U)}),te("    addBorderSegments",function(){d(U)}),te("    order",function(){f(U)}),te("    insertSelfEdges",function(){I(U)}),te("    adjustCoordinateSystem",function(){p.adjust(U)}),te("    position",function(){m(U)}),te("    positionSelfEdges",function(){B(U)}),te("    removeBorderNodes",function(){$(U)}),te("    normalize.undo",function(){n.undo(U)}),te("    fixupEdgeLabelCoords",function(){H(U)}),te("    undoCoordinateSystem",function(){p.undo(U)}),te("    translateGraph",function(){R(U)}),te("    assignNodeIntersects",function(){M(U)}),te("    reversePoints",function(){X(U)}),te("    acyclic.undo",function(){t.undo(U)})}function k(U,te){e.forEach(U.nodes(),function(Z){var ee=U.node(Z),Q=te.node(Z);ee&&(ee.x=Q.x,ee.y=Q.y,te.children(Z).length&&(ee.width=Q.width,ee.height=Q.height))}),e.forEach(U.edges(),function(Z){var ee=U.edge(Z),Q=te.edge(Z);ee.points=Q.points,e.has(Q,"x")&&(ee.x=Q.x,ee.y=Q.y)}),U.graph().width=te.graph().width,U.graph().height=te.graph().height}var _=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},S=["acyclicer","ranker","rankdir","align"],A=["width","height"],P={width:0,height:0},T=["minlen","weight","width","height","labeloffset"],C={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},z=["labelpos"];function F(U){var te=new v({multigraph:!0,compound:!0}),Z=D(U.graph());return te.setGraph(e.merge({},N,K(Z,_),e.pick(Z,S))),e.forEach(U.nodes(),function(ee){var Q=D(U.node(ee));te.setNode(ee,e.defaults(K(Q,A),P)),te.setParent(ee,U.parent(ee))}),e.forEach(U.edges(),function(ee){var Q=D(U.edge(ee));te.setEdge(ee,e.merge({},C,K(Q,T),e.pick(Q,z)))}),te}function V(U){var te=U.graph();te.ranksep/=2,e.forEach(U.edges(),function(Z){var ee=U.edge(Z);ee.minlen*=2,ee.labelpos.toLowerCase()!=="c"&&(te.rankdir==="TB"||te.rankdir==="BT"?ee.width+=ee.labeloffset:ee.height+=ee.labeloffset)})}function L(U){e.forEach(U.edges(),function(te){var Z=U.edge(te);if(Z.width&&Z.height){var ee=U.node(te.v),Q=U.node(te.w),ae={rank:(Q.rank-ee.rank)/2+ee.rank,e:te};g.addDummyNode(U,"edge-proxy",ae,"_ep")}})}function q(U){var te=0;e.forEach(U.nodes(),function(Z){var ee=U.node(Z);ee.borderTop&&(ee.minRank=U.node(ee.borderTop).rank,ee.maxRank=U.node(ee.borderBottom).rank,te=e.max(te,ee.maxRank))}),U.graph().maxRank=te}function G(U){e.forEach(U.nodes(),function(te){var Z=U.node(te);Z.dummy==="edge-proxy"&&(U.edge(Z.e).labelRank=Z.rank,U.removeNode(te))})}function R(U){var te=Number.POSITIVE_INFINITY,Z=0,ee=Number.POSITIVE_INFINITY,Q=0,ae=U.graph(),pe=ae.marginx||0,ye=ae.marginy||0;function Ne(xe){var Ae=xe.x,be=xe.y,De=xe.width,Ce=xe.height;te=Math.min(te,Ae-De/2),Z=Math.max(Z,Ae+De/2),ee=Math.min(ee,be-Ce/2),Q=Math.max(Q,be+Ce/2)}e.forEach(U.nodes(),function(xe){Ne(U.node(xe))}),e.forEach(U.edges(),function(xe){var Ae=U.edge(xe);e.has(Ae,"x")&&Ne(Ae)}),te-=pe,ee-=ye,e.forEach(U.nodes(),function(xe){var Ae=U.node(xe);Ae.x-=te,Ae.y-=ee}),e.forEach(U.edges(),function(xe){var Ae=U.edge(xe);e.forEach(Ae.points,function(be){be.x-=te,be.y-=ee}),e.has(Ae,"x")&&(Ae.x-=te),e.has(Ae,"y")&&(Ae.y-=ee)}),ae.width=Z-te+pe,ae.height=Q-ee+ye}function M(U){e.forEach(U.edges(),function(te){var Z=U.edge(te),ee=U.node(te.v),Q=U.node(te.w),ae,pe;Z.points?(ae=Z.points[0],pe=Z.points[Z.points.length-1]):(Z.points=[],ae=Q,pe=ee),Z.points.unshift(g.intersectRect(ee,ae)),Z.points.push(g.intersectRect(Q,pe))})}function H(U){e.forEach(U.edges(),function(te){var Z=U.edge(te);if(e.has(Z,"x"))switch((Z.labelpos==="l"||Z.labelpos==="r")&&(Z.width-=Z.labeloffset),Z.labelpos){case"l":Z.x-=Z.width/2+Z.labeloffset;break;case"r":Z.x+=Z.width/2+Z.labeloffset;break}})}function X(U){e.forEach(U.edges(),function(te){var Z=U.edge(te);Z.reversed&&Z.points.reverse()})}function $(U){e.forEach(U.nodes(),function(te){if(U.children(te).length){var Z=U.node(te),ee=U.node(Z.borderTop),Q=U.node(Z.borderBottom),ae=U.node(e.last(Z.borderLeft)),pe=U.node(e.last(Z.borderRight));Z.width=Math.abs(pe.x-ae.x),Z.height=Math.abs(Q.y-ee.y),Z.x=ae.x+Z.width/2,Z.y=ee.y+Z.height/2}}),e.forEach(U.nodes(),function(te){U.node(te).dummy==="border"&&U.removeNode(te)})}function Y(U){e.forEach(U.edges(),function(te){if(te.v===te.w){var Z=U.node(te.v);Z.selfEdges||(Z.selfEdges=[]),Z.selfEdges.push({e:te,label:U.edge(te)}),U.removeEdge(te)}})}function I(U){var te=g.buildLayerMatrix(U);e.forEach(te,function(Z){var ee=0;e.forEach(Z,function(Q,ae){var pe=U.node(Q);pe.order=ae+ee,e.forEach(pe.selfEdges,function(ye){g.addDummyNode(U,"selfedge",{width:ye.label.width,height:ye.label.height,rank:pe.rank,order:ae+ ++ee,e:ye.e,label:ye.label},"_se")}),delete pe.selfEdges})})}function B(U){e.forEach(U.nodes(),function(te){var Z=U.node(te);if(Z.dummy==="selfedge"){var ee=U.node(Z.e.v),Q=ee.x+ee.width/2,ae=ee.y,pe=Z.x-Q,ye=ee.height/2;U.setEdge(Z.e,Z.label),U.removeNode(te),Z.label.points=[{x:Q+2*pe/3,y:ae-ye},{x:Q+5*pe/6,y:ae-ye},{x:Q+pe,y:ae},{x:Q+5*pe/6,y:ae+ye},{x:Q+2*pe/3,y:ae+ye}],Z.label.x=Z.x,Z.label.y=Z.y}})}function K(U,te){return e.mapValues(e.pick(U,te),Number)}function D(U){var te={};return e.forEach(U,function(Z,ee){te[ee.toLowerCase()]=Z}),te}return uv}var dv,gC;function l7(){if(gC)return dv;gC=1;var e=ut(),t=ln(),n=Wn().Graph;dv={debugOrdering:r};function r(i){var a=t.buildLayerMatrix(i),c=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(u){c.setNode(u,{label:u}),c.setParent(u,"layer"+i.node(u).rank)}),e.forEach(i.edges(),function(u){c.setEdge(u.v,u.w,{},u.name)}),e.forEach(a,function(u,d){var p="layer"+d;c.setNode(p,{rank:"same"}),e.reduce(u,function(f,m){return c.setEdge(f,m,{style:"invis"}),m})}),c}return dv}var pv,yC;function c7(){return yC||(yC=1,pv="0.8.5"),pv}var fv,vC;function u7(){return vC||(vC=1,fv={graphlib:Wn(),layout:a7(),debug:l7(),util:{time:ln().time,notime:ln().notime},version:c7()}),fv}var d7=u7();const xC=ps(d7);function LP(){const{getNodes:e,getEdges:t,setNodes:n,fitView:r,zoomIn:i,zoomOut:a,getZoom:c}=Qa(),u=gt(L=>L.layoutMode),d=gt(L=>L.layoutDirection),p=gt(L=>L.snapToGrid),f=gt(L=>L.gridSize),m=gt(L=>L.selectedNodeId),g=gt(L=>L.setLayoutMode),v=gt(L=>L.setLayoutDirection),w=gt(L=>L.setSnapToGrid),b=gt(L=>L.setGridSize),k=E.useCallback(()=>({top:.15,left:.1,bottom:.1,right:m?.35:.1}),[m]),_=E.useCallback(L=>{const q=e(),G=t();if(q.length===0)return;const R=new xC.graphlib.Graph;R.setGraph({rankdir:L,nodesep:40,ranksep:100}),R.setDefaultEdgeLabel(()=>({})),q.forEach(M=>R.setNode(M.id,{width:180,height:100})),G.forEach(M=>R.setEdge(M.source,M.target)),xC.layout(R),n(q.map(M=>{const H=R.node(M.id);return{...M,position:{x:H.x-90,y:H.y-50}}})),setTimeout(()=>r({padding:k(),maxZoom:.9}),50)},[e,t,n,r,k]),N=E.useCallback(()=>{const L=d==="LR"?"TB":"LR";v(L),_(L)},[d,v,_]),S=E.useCallback(()=>{const L=u==="free"?"fixed":"free";g(L),L==="fixed"&&_(d)},[u,d,g,_]),A=E.useCallback(()=>{N()},[N]),P=E.useCallback(()=>{_(d)},[_,d]),T=E.useCallback(()=>{r({padding:k(),duration:300,maxZoom:.9,includeHiddenNodes:!1})},[r,k]),C=E.useCallback((L,q)=>p?{x:Math.round(L/f)*f,y:Math.round(q/f)*f}:{x:L,y:q},[p,f]),z=E.useCallback(()=>{i({duration:200})},[i]),F=E.useCallback(()=>{a({duration:200})},[a]),V=E.useCallback(()=>c(),[c]);return{layoutMode:u,layoutDirection:d,snapToGrid:p,gridSize:f,setLayoutMode:g,toggleMode:S,setLayoutDirection:v,toggleDirection:N,toggleLayout:A,setSnapToGrid:w,setGridSize:b,snapPosition:C,applyLayout:P,fitToView:T,zoomIn:z,zoomOut:F,getZoom:V}}function p7({onFitView:e,showDataFlowOverlay:t,onToggleDataFlowOverlay:n,isRunning:r,onRun:i,onStop:a,showMinimap:c,onToggleMinimap:u}){const{layoutDirection:d,toggleDirection:p,snapToGrid:f,setSnapToGrid:m,gridSize:g,setGridSize:v}=LP(),w=i4(),b=Math.round(w.zoom*100),k=d==="LR",_={backgroundColor:"var(--surface-card)",borderColor:"var(--border-default)",color:"var(--text-primary)"},N={backgroundColor:"var(--accent-primary)",borderColor:"var(--accent-primary)",color:"white"},S=[10,20,40];return s.jsxs("div",{className:"absolute top-2 left-2 z-10 flex gap-2",children:[s.jsxs("button",{onClick:p,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:_,title:`Layout: ${k?"Horizontal (Left to Right)":"Vertical (Top to Bottom)"}
Click to switch and auto-arrange nodes`,children:[s.jsx("span",{children:k?"":""}),k?"LR":"TB"]}),s.jsxs("button",{onClick:()=>m(!f),className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:f?N:_,title:`Snap to Grid: ${f?"On":"Off"} (${g}px)
Click to ${f?"disable":"enable"} grid snapping`,children:[s.jsx("span",{children:f?"":""}),"Snap"]}),f&&s.jsx("select",{value:g,onChange:A=>v(Number(A.target.value)),className:"px-2 py-1.5 border rounded text-sm",style:_,title:"Grid size in pixels",children:S.map(A=>s.jsxs("option",{value:A,children:[A,"px"]},A))}),n&&s.jsxs("button",{onClick:n,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:t?N:_,title:`Data Flow Overlay: ${t?"On":"Off"}
Shows state keys flowing between nodes during execution`,children:[s.jsx("span",{children:""}),t?"Flow On":"Flow Off"]}),s.jsxs("button",{onClick:e,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:_,title:"Fit all nodes in view (Ctrl+0)",children:[s.jsx("span",{children:""})," Fit"]}),u&&s.jsxs("button",{onClick:u,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:c?N:_,title:`Minimap: ${c?"On":"Off"}
Shows overview of entire workflow`,children:[s.jsx("span",{children:""}),"Map"]}),s.jsxs("div",{className:"px-3 py-1.5 border rounded text-sm flex items-center gap-1 cursor-default",style:_,title:"Current zoom level (Ctrl+Plus/Minus to zoom)",children:[s.jsx("span",{children:""}),b,"%"]}),s.jsx("div",{className:"w-px h-6 self-center",style:{backgroundColor:"var(--border-default)"}}),i&&!r&&s.jsxs("button",{onClick:i,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--accent-success)",borderColor:"var(--accent-success)",color:"white"},title:"Run the workflow",children:[s.jsx("span",{children:""})," Run"]}),a&&r&&s.jsxs("button",{onClick:a,className:"px-3 py-1.5 border rounded text-sm flex items-center gap-2 hover:opacity-80 transition-opacity",style:{backgroundColor:"var(--accent-error)",borderColor:"var(--accent-error)",color:"white"},title:"Stop execution",children:[s.jsx("span",{children:""})," Stop"]})]})}function f7(e){return`action_${e}`}function h7(e){if(!e)return"";const t=Object.keys(e.agents).sort().join(","),n=Object.keys(e.actionNodes||{}).sort().join(","),r=Object.entries(e.agents).map(([a,c])=>`${a}:${(c.tools||[]).join("+")}`).sort().join("|"),i=e.workflow.edges.map(a=>`${a.from}->${a.to}`).sort().join(",");return`${t}|${n}|${r}|${i}`}function m7(e,t){const[n,r,i]=o4([]),[a,c,u]=s4([]),{activeAgent:d,iteration:p,flowPhase:f,thoughts:m={},stateKeys:g,showDataFlowOverlay:v,highlightedKey:w,onKeyHover:b,executionPath:k=[],isExecuting:_=!1}=t,N=gt(T=>T.layoutDirection),S=N==="LR"||N==="RL",A=E.useRef(""),P=E.useMemo(()=>h7(e),[e]);return E.useEffect(()=>{if(!e){r([]);return}if(P===A.current)return;A.current=P;const T=Object.keys(e.agents),C=Object.keys(e.actionNodes||{});if(T.length===0&&C.length===0){r([]);return}const z=new Set(T.flatMap(M=>e.agents[M].sub_agents||[])),V=[...T.filter(M=>!z.has(M)),...C],L=[];let q="START";const G=new Set;for(;L.length<V.length;){const M=e.workflow.edges.find(H=>H.from===q&&H.to!=="END"&&V.includes(H.to)&&!G.has(H.to));if(M)L.push(M.to),G.add(M.to),q=M.to;else{const H=e.workflow.edges.find(X=>V.includes(X.to)&&!G.has(X.to));if(H)L.push(H.to),G.add(H.to),q=H.to;else break}}V.forEach(M=>{L.includes(M)||L.push(M)});const R=[];L.length>0&&R.push({id:"START",position:{x:50,y:50},data:{},type:"start"},{id:"END",position:{x:50,y:150+L.length*150},data:{},type:"end"}),L.forEach((M,H)=>{const X={x:50,y:150+H*150},$=e.agents[M];if($){const I=($.sub_agents||[]).reduce((B,K)=>(B[K]=e.agents[K]?.tools||[],B),{});$.type==="sequential"?R.push({id:M,type:"sequential",position:X,data:{label:M,subAgents:$.sub_agents,subAgentTools:I}}):$.type==="loop"?R.push({id:M,type:"loop",position:X,data:{label:M,subAgents:$.sub_agents,subAgentTools:I,maxIterations:$.max_iterations||3}}):$.type==="parallel"?R.push({id:M,type:"parallel",position:X,data:{label:M,subAgents:$.sub_agents,subAgentTools:I}}):$.type==="router"?R.push({id:M,type:"router",position:X,data:{label:M,routes:$.routes||[]}}):R.push({id:M,type:"llm",position:X,data:{label:M,model:$.model,tools:$.tools||[]}});return}const Y=e.actionNodes?.[M];if(Y){const I=f7(Y.type);R.push({id:M,type:I,position:X,data:{...Y}})}}),r(R)},[e,P,r]),E.useEffect(()=>{e&&r(T=>T.map(C=>{if(C.id==="START"||C.id==="END"){const G=k.includes(C.id);return{...C,data:{...C.data,isInExecutionPath:G},className:G?"node-execution-path":void 0}}const z=e.actionNodes?.[C.id];if(z){const G=d===C.id,R=k.includes(C.id);return{...C,data:{...C.data,...z,isActive:G,isInExecutionPath:R},className:G?"node-active":R?"node-execution-path":void 0}}const F=e.agents[C.id];if(!F)return C;const V=d===C.id||d&&F.sub_agents?.includes(d),L=d&&F.sub_agents?.includes(d)?d:void 0,q=k.includes(C.id);return{...C,data:{...C.data,isActive:V,activeSubAgent:L,currentIteration:F.type==="loop"?p:void 0,thought:C.type==="llm"?m[C.id]:void 0,isInExecutionPath:q},className:V?"node-active":q?"node-execution-path":void 0}}))},[e,d,p,m,k,r]),E.useEffect(()=>{e&&c(e.workflow.edges.map((T,C)=>{const z=d&&T.to===d||f==="input"&&T.from==="START"||f==="output"&&T.to==="END",F=g?.get(T.from)||[],V=k.indexOf(T.from),L=k.indexOf(T.to),q=V!==-1&&L!==-1&&L===V+1,G=_&&z,R=e.actionNodes?.[T.from]!==void 0,M=e.actionNodes?.[T.to]!==void 0,H=R?"output-0":S?"right":"bottom",X=M?"input-0":S?"left":"top";return{id:`e${C}-${N}`,source:T.from,target:T.to,type:v?"dataflow":"animated",data:{animated:z||G,stateKeys:F,showOverlay:v,highlightedKey:w,onKeyHover:b,isExecutionPath:q&&!G},sourceHandle:T.fromPort||H,targetHandle:T.toPort||X}}))},[e?.workflow.edges,f,d,c,N,S,g,v,w,b,k,_]),{nodes:n,edges:a,setNodes:r,setEdges:c,onNodesChange:i,onEdgesChange:u}}function g7(){const{currentProject:e,addAgent:t,removeAgent:n,addEdge:r,removeEdge:i,selectNode:a}=gt(),c=E.useCallback((d="llm")=>{if(!e)return;const p=Object.keys(e.agents).length,m=`${{sequential:"seq",loop:"loop",parallel:"par",router:"router"}[d]||"agent"}_${p+1}`;if(["sequential","loop","parallel"].includes(d)){const v=`${m}_agent_1`,w=`${m}_agent_2`,b=d==="loop";t(v,{type:"llm",model:"gemini-2.0-flash",instruction:b?"Process and refine.":"Agent 1.",tools:[],sub_agents:[],position:{x:0,y:0}}),t(w,{type:"llm",model:"gemini-2.0-flash",instruction:b?"Review. Call exit_loop when done.":"Agent 2.",tools:b?["exit_loop"]:[],sub_agents:[],position:{x:0,y:0}}),t(m,{type:d,instruction:"",tools:[],sub_agents:[v,w],position:{x:50,y:150+p*180},max_iterations:b?3:void 0})}else d==="router"?t(m,{type:"router",model:"gemini-2.0-flash",instruction:"Route based on intent.",tools:[],sub_agents:[],position:{x:50,y:150+p*120},routes:[{condition:"default",target:"END"}]}):t(m,{type:"llm",model:"gemini-2.0-flash",instruction:"You are a helpful assistant.",tools:[],sub_agents:[],position:{x:50,y:150+p*120}});const g=e.workflow.edges.find(v=>v.to==="END");g?(i(g.from,"END"),r(g.from,m)):r("START",m),r(m,"END"),a(m)},[e,t,r,i,a]),u=E.useCallback(d=>{if(!e)return null;const p=e.agents[d];if(!p)return null;const f=`${d}_copy`;return t(f,{...p,position:{x:(p.position?.x||50)+50,y:(p.position?.y||50)+50}}),f},[e,t]);return{createAgent:c,duplicateAgent:u,removeAgent:n}}function y7(e,t){const n=fs(),r={showMinimap:e?.showMinimap??n.showMinimap,showDataFlowOverlay:e?.showDataFlowOverlay??n.showDataFlowOverlay,showTimeline:e?.showTimeline??n.showTimeline,showConsole:!0},[i,a]=E.useState({x:0,y:0,zoom:1}),[c,u]=E.useState(r);E.useEffect(()=>{e&&u(_=>({..._,showMinimap:e.showMinimap??_.showMinimap,showDataFlowOverlay:e.showDataFlowOverlay??_.showDataFlowOverlay,showTimeline:e.showTimeline??_.showTimeline}))},[e?.showMinimap,e?.showDataFlowOverlay,e?.showTimeline]);const d=E.useCallback(()=>{u(_=>{const N=!_.showMinimap;return t?.("showMinimap",N),{..._,showMinimap:N}})},[t]),p=E.useCallback(()=>{u(_=>{const N=!_.showDataFlowOverlay;return t?.("showDataFlowOverlay",N),{..._,showDataFlowOverlay:N}})},[t]),f=E.useCallback(()=>{u(_=>{const N=!_.showTimeline;return t?.("showTimeline",N),{..._,showTimeline:N}})},[t]),m=E.useCallback(()=>{u(_=>({..._,showConsole:!_.showConsole}))},[]),g=E.useCallback(_=>{u(N=>({...N,showMinimap:_})),t?.("showMinimap",_)},[t]),v=E.useCallback(_=>{u(N=>({...N,showDataFlowOverlay:_})),t?.("showDataFlowOverlay",_)},[t]),w=E.useCallback(_=>{u(N=>({...N,showTimeline:_})),t?.("showTimeline",_)},[t]),b=E.useCallback(_=>{u(N=>({...N,showConsole:_}))},[]),k=E.useCallback(_=>{a(_)},[]);return{viewport:i,setViewport:a,onViewportChange:k,showMinimap:c.showMinimap,showDataFlowOverlay:c.showDataFlowOverlay,showTimeline:c.showTimeline,showConsole:c.showConsole,toggleMinimap:d,toggleDataFlowOverlay:p,toggleTimeline:f,toggleConsole:m,setShowMinimap:g,setShowDataFlowOverlay:v,setShowTimeline:w,setShowConsole:b}}function v7(){return fs().autobuildTriggers}const DP="adk-studio-autobuild";function x7(){try{const e=localStorage.getItem(DP);return e!==null?e==="true":fs().autobuildEnabled}catch{return!0}}function b7(e){try{localStorage.setItem(DP,String(e))}catch{}}function w7(e,t,n,r){const[i,a]=E.useState(!1),[c,u]=E.useState(null),[d,p]=E.useState(null),[f,m]=E.useState(null),[g,v]=E.useState(()=>n!==void 0?n:x7()),[w,b]=E.useState(!1),k=E.useRef(null),_=E.useRef(null);E.useEffect(()=>{n!==void 0&&v(n)},[n]);const N=E.useCallback(async()=>{if(!e)return null;try{const q=await mi.projects.compile(e);return m(q),q}catch(q){return alert("Compile failed: "+q.message),null}},[e]),S=E.useCallback(async q=>{if(!e||i||r&&!r())return;a(!0),b(q),q||u({success:!1,output:"",path:null}),_.current&&_.current.close();const G=new EventSource(`/api/projects/${e}/build-stream`);_.current=G;let R="";G.addEventListener("status",M=>{R+=M.data+`
`,(!q||A.current)&&u({success:!1,output:R,path:null})}),G.addEventListener("output",M=>{R+=M.data+`
`,(!q||A.current)&&u({success:!1,output:R,path:null})}),G.addEventListener("done",M=>{(!q||A.current)&&u({success:!0,output:R,path:M.data}),p(M.data),a(!1),b(!1),G.close(),_.current=null}),G.addEventListener("error",M=>{R+=`
Error: `+(M.data||"Build failed"),u({success:!1,output:R,path:null}),a(!1),b(!1),G.close(),_.current=null}),G.onerror=()=>{a(!1),b(!1),G.close(),_.current=null}},[e,i,r]),A=E.useRef(!1);E.useEffect(()=>{A.current=c!==null},[c]);const P=E.useCallback(async()=>{await S(!1)},[S]),T=E.useCallback(q=>{!g||i||q&&!(t||v7())[q]||(k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{S(!0)},1e3))},[g,i,S,t]),C=E.useCallback(()=>{u(null)},[]),z=E.useCallback(()=>{m(null)},[]),F=E.useCallback(q=>{p(null),T(q)},[T]),V=E.useCallback(()=>{const q=!g;v(q),b7(q),q&&!d&&!i&&T()},[g,d,i,T]),L=E.useCallback(()=>{i&&w&&u({success:!1,output:"Build in progress...",path:null})},[i,w]);return E.useEffect(()=>()=>{k.current&&clearTimeout(k.current),_.current&&_.current.close()},[]),{building:i,buildOutput:c,builtBinaryPath:d,compiledCode:f,autobuildEnabled:g,isAutobuild:w,build:P,compile:N,clearBuildOutput:C,clearCompiledCode:z,invalidateBuild:F,toggleAutobuild:V,showBuildProgress:L,needsBuild:!d}}const bC={path:[],activeNodeId:null,isExecuting:!1};function _7(){const[e,t]=E.useState(bC),n=E.useCallback(()=>{t({path:["START"],activeNodeId:"START",isExecuting:!0})},[]),r=E.useCallback(v=>{t(w=>({...w,path:[...w.path,v],activeNodeId:v}))},[]),i=E.useCallback(()=>{t(v=>({...v,path:[...v.path,"END"],activeNodeId:null,isExecuting:!1}))},[]),a=E.useCallback(()=>{t(bC)},[]),c=E.useCallback(v=>e.path.includes(v),[e.path]),u=E.useCallback(v=>e.activeNodeId===v,[e.activeNodeId]),d=E.useCallback((v,w)=>{const b=e.path.indexOf(v),k=e.path.indexOf(w);return b!==-1&&k!==-1&&k===b+1},[e.path]),p=E.useCallback((v,w)=>e.isExecuting&&w===e.activeNodeId&&e.path.includes(v),[e.isExecuting,e.activeNodeId,e.path]),f=E.useCallback(v=>v.filter(w=>d(w.from,w.to)),[d]),m=E.useCallback(v=>u(v)?"active":c(v)?"path":"none",[u,c]),g=E.useCallback((v,w)=>p(v,w)?"animated":d(v,w)?"path":"none",[p,d]);return{...e,startExecution:n,moveToNode:r,completeExecution:i,resetPath:a,isNodeInPath:c,isNodeActive:u,isEdgeInPath:d,isEdgeAnimated:p,getPathEdges:f,getNodeStatus:m,getEdgeStatus:g}}const Ac=20,qP=Ja((e,t)=>({undoStack:[],redoStack:[],canUndo:!1,canRedo:!1,recordAddNode:(n,r,i,a)=>{const c={type:"add_node",timestamp:Date.now(),nodeId:n,agent:r,edges:i,edgesBefore:a};e(u=>{const d=[...u.undoStack,c];return d.length>Ac&&d.shift(),{undoStack:d,redoStack:[],canUndo:!0,canRedo:!1}})},recordDeleteNode:(n,r,i,a)=>{const c={type:"delete_node",timestamp:Date.now(),nodeId:n,agent:r,edges:i,edgesBefore:a};e(u=>{const d=[...u.undoStack,c];return d.length>Ac&&d.shift(),{undoStack:d,redoStack:[],canUndo:!0,canRedo:!1}})},popUndo:()=>{const{undoStack:n}=t();if(n.length===0)return null;const r=n[n.length-1];return e(i=>({undoStack:i.undoStack.slice(0,-1),canUndo:i.undoStack.length>1})),r},popRedo:()=>{const{redoStack:n}=t();if(n.length===0)return null;const r=n[n.length-1];return e(i=>({redoStack:i.redoStack.slice(0,-1),canRedo:i.redoStack.length>1})),r},pushRedo:n=>{e(r=>{const i=[...r.redoStack,n];return i.length>Ac&&i.shift(),{redoStack:i,canRedo:!0}})},pushUndo:n=>{e(r=>{const i=[...r.undoStack,n];return i.length>Ac&&i.shift(),{undoStack:i,canUndo:!0}})},clearHistory:()=>{e({undoStack:[],redoStack:[],canUndo:!1,canRedo:!1})}}));function k7(e){const t=qP();return{undo:()=>{const c=t.popUndo();c&&(c.type==="add_node"?(e.onRemoveNode(c.nodeId),e.onSetEdges(c.edgesBefore)):c.type==="delete_node"&&(e.onAddNode(c.nodeId,c.agent),e.onSetEdges(c.edgesBefore)),t.pushRedo(c))},redo:()=>{const c=t.popRedo();if(c){if(c.type==="add_node"){e.onAddNode(c.nodeId,c.agent);const u=[...c.edgesBefore];c.edges.forEach(d=>{const p=u.findIndex(f=>d.from===c.nodeId&&f.to===d.to||d.to===c.nodeId&&f.from===d.from);p>=0&&u.splice(p,1)}),c.edges.forEach(d=>{u.some(p=>p.from===d.from&&p.to===d.to)||u.push(d)}),e.onSetEdges(u)}else if(c.type==="delete_node"){e.onRemoveNode(c.nodeId);const u=c.edgesBefore.filter(d=>d.from!==c.nodeId&&d.to!==c.nodeId);e.onSetEdges(u)}t.pushUndo(c)}},recordAddNode:(c,u,d,p)=>{t.recordAddNode(c,u,d,p)},recordDeleteNode:(c,u)=>{const d=e.getAgent(c);if(!d)return;const p=e.getEdgesForNode(c);t.recordDeleteNode(c,d,p,u)},canUndo:t.canUndo,canRedo:t.canRedo,clearHistory:t.clearHistory}}const S7={mode:"stop",retryCount:3,retryDelay:1e3},N7={enabled:!1,logLevel:"error"},j7={},E7={timeout:3e4};function C7(e,t,n){return{id:e,name:t,errorHandling:{...S7},tracing:{...N7},callbacks:{...j7},execution:{...E7},mapping:{outputKey:n}}}function T7(e,t){if(e==="START")return!1;const n=t[e];return!(n&&n.type==="trigger")}function A7(e){return e!=="END"}function P7(e,t){if(e==="START")return 0;const n=t[e];if(n){if(n.type==="trigger")return 0;if(n.type==="merge")return 1/0}return 1}function I7(e,t,n,r,i){if(e===t)return{valid:!1,reason:"Cannot connect a node to itself"};if(!A7(e))return{valid:!1,reason:"Source node cannot have outgoing connections"};if(!T7(t,r))return r[t]?.type==="trigger"?{valid:!1,reason:"Trigger nodes are entry points and cannot have incoming connections"}:{valid:!1,reason:"Target node cannot have incoming connections"};if(i.some(u=>u.from===e&&u.to===t))return{valid:!1,reason:"Connection already exists"};const c=P7(t,r);return c!==1/0&&i.filter(d=>d.to===t).length>=c?{valid:!1,reason:`Target node already has maximum inputs (${c})`}:{valid:!0}}function R7(){const{currentProject:e,openProject:t,closeProject:n,saveProject:r,selectNode:i,selectedNodeId:a,updateAgent:c,renameAgent:u,addEdge:d,removeEdge:p,addToolToAgent:f,removeToolFromAgent:m,addSubAgentToContainer:g,selectedToolId:v,selectTool:w,updateToolConfig:b,addAgent:k,snapToGrid:_,gridSize:N,addActionNode:S,removeActionNode:A,selectedActionNodeId:P,selectActionNode:T,showDataFlowOverlay:C,setShowDataFlowOverlay:z,updateProjectMeta:F,updateProjectSettings:V}=gt(),L=E.useCallback((le,_e)=>{V({[le]:_e})},[V]),{showConsole:q,toggleConsole:G,showMinimap:R,toggleMinimap:M,showTimeline:H}=y7(e?.settings,L),X=E.useCallback(()=>{if(!e)return!1;const le=Object.keys(e.agents).length,_e=e.workflow.edges.length;return le>0&&_e>0},[e]),{building:$,buildOutput:Y,builtBinaryPath:I,compiledCode:B,autobuildEnabled:K,isAutobuild:D,build:U,compile:te,clearBuildOutput:Z,clearCompiledCode:ee,invalidateBuild:Q,toggleAutobuild:ae,showBuildProgress:pe}=w7(e?.id,e?.settings?.autobuildTriggers,e?.settings?.autobuildEnabled,X),ye=$?"building":Y?.success?"success":Y&&!Y.success?"error":I?"success":"none",[Ne,xe]=E.useState(!1),[Ae,be]=E.useState("idle"),[De,Ce]=E.useState(null),[ot,Ye]=E.useState(0),[dt,pt]=E.useState({}),Be=_7(),Ve=E.useCallback(le=>{be(le),le==="input"?Be.startExecution():le==="idle"&&Be.isExecuting&&Be.completeExecution()},[Be]),yt=E.useCallback(le=>{Ce(le),le&&Be.isExecuting&&!Be.path.includes(le)&&Be.moveToNode(le)},[Be]),[ge,oe]=E.useState(!1),[de,je]=E.useState(!1),[Me,Le]=E.useState(!1),[st,qt]=E.useState(!1),[He,bt]=E.useState([]),[Ct,vt]=E.useState(-1),[Ot,Mt]=E.useState(null),[fr,qr]=E.useState(!0),[Xn,Qn]=E.useState(new Map),[po,fo]=E.useState(null),ho=E.useCallback(le=>{fo(le)},[]),mo=E.useCallback(()=>{z(!C)},[C,z]),go=E.useCallback((le,_e,at,qe)=>{if(bt(le),vt(_e),Mt(()=>at),qe&&Qn(qe),le.length>0){Be.resetPath(),Be.startExecution(),le.forEach(pn=>{Be.moveToNode(pn.nodeId)});const tt=le[le.length-1];tt&&tt.status==="success"&&le.length-1}},[Be]),wi=E.useMemo(()=>Ct<0||Ct>=He.length?null:He[Ct],[He,Ct]),yo=E.useMemo(()=>{const le=Ct-1;return le<0||le>=He.length?null:He[le]},[He,Ct]),hr=E.useCallback(le=>{Ot&&Ot(le)},[Ot]),{nodes:_i,edges:mr,onNodesChange:_s,onEdgesChange:gr}=m7(e,{activeAgent:De,iteration:ot,flowPhase:Ae,thoughts:dt,stateKeys:Xn,showDataFlowOverlay:C,highlightedKey:po,onKeyHover:ho,executionPath:Be.path,isExecuting:Be.isExecuting}),{applyLayout:wt,fitToView:yr,zoomIn:ki,zoomOut:ks}=LP(),{createAgent:Si,duplicateAgent:Ss,removeAgent:dn}=g7(),{clearHistory:Ni}=qP(),ji=E.useCallback(le=>e?e.workflow.edges.filter(_e=>_e.from===le||_e.to===le):[],[e]),Ns=E.useCallback(()=>e?.workflow.edges||[],[e]),vo=E.useCallback(le=>e?.agents[le],[e]),xo=E.useCallback(le=>{gt.getState().setEdges(le)},[]),Mn=k7({onAddNode:(le,_e)=>{k(le,_e)},onRemoveNode:le=>{gt.getState().removeAgent(le)},onAddEdge:d,onRemoveEdge:p,onSetEdges:xo,getAgent:vo,getEdgesForNode:ji,getAllEdges:Ns}),Ei=E.useCallback(le=>{const _e=[...e?.workflow.edges||[]];Si(le),setTimeout(()=>{const qe=gt.getState().currentProject;if(!qe)return;const tt=qe.workflow.edges.filter(Zn=>!_e.some(Ii=>Ii.from===Zn.from&&Ii.to===Zn.to)),pn=tt.find(Zn=>Zn.to==="END")?.from;pn&&qe.agents[pn]&&Mn.recordAddNode(pn,qe.agents[pn],tt,_e)},0)},[Si,e,Mn]),Ci=E.useCallback(le=>{if(le==="START"||le==="END")return;const _e=[...e?.workflow.edges||[]];Mn.recordDeleteNode(le,_e),dn(le),Q("onAgentDelete"),setTimeout(()=>wt(),100)},[dn,Mn,e,Q,wt]),bo=E.useCallback(le=>{A(le),Q("onAgentDelete"),setTimeout(()=>wt(),100)},[A,Q,wt]),Xe=E.useRef(null);e?.id!==Xe.current&&(Xe.current=e?.id||null,Ni());const js=E.useCallback((le,_e)=>{pt(at=>_e?{...at,[le]:_e}:Object.fromEntries(Object.entries(at).filter(([qe])=>qe!==le)))},[]),vr=E.useRef(null),xr=E.useCallback(()=>{vr.current&&clearTimeout(vr.current),vr.current=setTimeout(()=>r(),500)},[r]),Fr=E.useCallback((le,_e)=>{c(le,_e),Q("onAgentUpdate"),xr()},[c,Q,xr]),wo=E.useCallback((le,_e)=>{b(le,_e),Q("onToolUpdate"),xr()},[b,Q,xr]);I$({selectedNodeId:a,selectedToolId:v,selectedActionNodeId:P,onDeleteNode:Ci,onDeleteActionNode:bo,onDeleteTool:m,onDuplicateNode:Ss,onSelectNode:i,onSelectActionNode:T,onSelectTool:w,onAutoLayout:wt,onFitView:yr,onZoomIn:ki,onZoomOut:ks,onUndo:Mn.undo,onRedo:Mn.redo});const _o=(le,_e)=>{le.dataTransfer.setData("application/reactflow",_e),le.dataTransfer.effectAllowed="move"},br=(le,_e)=>{le.dataTransfer.setData("application/actionnode",_e),le.dataTransfer.effectAllowed="move"},Ft=E.useCallback(le=>{if(!e)return;const _e=`${le}_${Date.now()}`,at=le.charAt(0).toUpperCase()+le.slice(1),qe=C7(_e,at,`${le}Result`);let tt;switch(le){case"trigger":tt={...qe,type:"trigger",triggerType:"manual"};break;case"http":tt={...qe,type:"http",method:"GET",url:"https://api.example.com",auth:{type:"none"},headers:{},body:{type:"none"},response:{type:"json"}};break;case"set":tt={...qe,type:"set",mode:"set",variables:[]};break;case"transform":tt={...qe,type:"transform",transformType:"jsonpath",expression:""};break;case"switch":tt={...qe,type:"switch",evaluationMode:"first_match",conditions:[]};break;case"loop":tt={...qe,type:"loop",loopType:"forEach",forEach:{sourceArray:"",itemVar:"item",indexVar:"index"},parallel:{enabled:!1},results:{collect:!0}};break;case"merge":tt={...qe,type:"merge",mode:"wait_all",combineStrategy:"array",timeout:{enabled:!1,ms:3e4,behavior:"error"}};break;case"wait":tt={...qe,type:"wait",waitType:"fixed",fixed:{duration:1e3,unit:"ms"}};break;case"code":tt={...qe,type:"code",language:"javascript",code:`// Your code here
return input;`,sandbox:{networkAccess:!1,fileSystemAccess:!1,memoryLimit:128,timeLimit:5e3}};break;case"database":tt={...qe,type:"database",dbType:"postgresql",connection:{connectionString:""}};break;case"email":tt={...qe,type:"email",mode:"send",smtp:{host:"smtp.example.com",port:587,secure:!0,username:"",password:"",fromEmail:""},recipients:{to:""},content:{subject:"",body:"",bodyType:"text"},attachments:[]};break;default:return}S(_e,tt);const pn=e.workflow.edges.find(Zn=>Zn.to==="END");pn?(p(pn.from,"END"),d(pn.from,_e)):d("START",_e),d(_e,"END"),T(_e),Q("onAgentAdd"),setTimeout(()=>wt(),100)},[e,S,d,p,T,wt,Q]),Es=E.useCallback(le=>{le.preventDefault(),le.dataTransfer.dropEffect=le.dataTransfer.types.includes("text/plain")?"copy":"move"},[]),Ut=E.useCallback(le=>{le.preventDefault();const _e=le.dataTransfer.getData("text/plain");if(_e.startsWith("tool:")&&a&&e?.agents[a]){f(a,_e.slice(5)),Q("onToolAdd");return}const at=le.dataTransfer.getData("application/actionnode");if(at){Ft(at);return}const qe=le.dataTransfer.getData("application/reactflow");qe&&(Ei(qe),Q("onAgentAdd"),setTimeout(()=>wt(),100))},[Ei,Ft,a,e,f,wt,Q]),Cs=E.useCallback(le=>{if(le.source&&le.target&&e){const _e=I7(le.source,le.target,e.agents,e.actionNodes||{},e.workflow.edges);if(!_e.valid){console.warn("Invalid connection:",_e.reason);return}d(le.source,le.target),Q("onEdgeAdd")}},[d,Q,e]),Ts=E.useCallback(le=>{le.forEach(_e=>p(_e.source,_e.target)),le.length>0&&Q("onEdgeDelete")},[p,Q]),As=E.useCallback(le=>{let _e=!1,at=!1;le.forEach(qe=>{qe.id==="START"||qe.id==="END"||(qe.type?.startsWith("action_")?(A(qe.id),_e=!0):(Ci(qe.id),at=!0))}),_e&&!at&&(Q("onAgentDelete"),setTimeout(()=>wt(),100))},[Ci,A,Q,wt]),zr=E.useCallback((le,_e)=>{p(_e.source,_e.target),Q("onEdgeDelete")},[p,Q]),Br=E.useCallback((le,_e)=>{if(_e.id==="START"||_e.id==="END"){i(null),T(null);return}_e.type?.startsWith("action_")?(T(_e.id),i(null)):(i(_e.id),T(null))},[i,T]),Jn=E.useCallback(()=>{i(null),T(null)},[i,T]),$r=E.useCallback(le=>{if(!a)return;f(a,le);const _e=e?.agents[a]?.tools||[],qe=le==="function"||le==="mcp"?`${a}_${le}_${_e.filter(tt=>tt.startsWith(le)).length+1}`:`${a}_${le}`;setTimeout(()=>w(qe),0)},[a,e,f,w]);if(!e)return null;const Ti=a?e.agents[a]:null,Hr=Object.keys(e.agents).length>0,Ai=a?e.agents[a]?.tools||[]:[],wr=v&&e.tool_configs?.[v]?.type==="function"?e.tool_configs[v]:null,{mode:Pi}=vi(),kn=Pi==="light",ko=kn?"#E3E6EA":"#333",Ps="#4ade80",Ke=kn?"#94a3b8":"#666";return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx(sH,{onExportCode:()=>oe(!0),onNewProject:()=>je(!0),onTemplateApplied:()=>setTimeout(()=>wt(),100),onRunTemplate:()=>{q||G(),I||U()},buildStatus:ye,onBuildStatusClick:()=>{$&&D?pe():Y||I||U()}}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsxs("div",{className:"w-48 border-r p-2 flex flex-col overflow-y-auto",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsx(M6,{onDragStart:_o,onCreate:Si}),s.jsx("div",{className:"my-2"}),s.jsx(w8,{onDragStart:br,onCreate:Ft}),s.jsx("div",{className:"my-2"}),s.jsx(L6,{selectedNodeId:a,agentTools:Ai,onAdd:$r,onRemove:le=>a&&m(a,le)}),s.jsxs("div",{className:"mt-auto space-y-1.5 pt-2",children:[s.jsx("button",{onClick:te,className:"w-full px-2 py-1.5 bg-blue-600 hover:bg-blue-700 rounded text-xs text-white font-medium",children:" View Code"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>{$&&D?pe():U()},disabled:$&&!D,className:`flex-1 px-2 py-1.5 rounded text-xs text-white font-medium ${$?"cursor-pointer":I?"bg-green-600 hover:bg-green-700":"bg-orange-500 hover:bg-orange-600 animate-pulse"}`,style:$?{backgroundColor:"#3B82F6"}:void 0,title:$&&D?"Click to view build progress":void 0,children:$?" Building...":I?" Build":" Build Required"}),s.jsx("button",{onClick:ae,className:`px-2 py-1.5 rounded text-xs font-medium transition-colors ${K?"bg-green-600 hover:bg-green-700 text-white":""}`,style:K?void 0:{backgroundColor:"var(--bg-secondary)",color:"var(--text-muted)",border:"1px solid var(--border-default)"},title:K?"Autobuild ON - builds automatically on changes":"Autobuild OFF - click to enable",children:""})]}),s.jsx("button",{onClick:G,className:"w-full px-2 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:q?"Hide Console":"Show Console"}),q&&He.length>0&&s.jsx("button",{onClick:()=>qr(!fr),className:"w-full px-2 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:fr?" Hide Inspector":" Show Inspector"}),s.jsx("button",{onClick:()=>Le(!0),className:"w-full px-2 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:" Settings"}),s.jsx("button",{onClick:n,className:"w-full px-2 py-1.5 rounded text-xs font-medium",style:{backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",border:"1px solid var(--border-default)"},children:"Back"})]})]}),s.jsxs("div",{className:"flex-1 relative",children:[s.jsxs(e4,{nodes:_i,edges:mr,nodeTypes:I6,edgeTypes:R6,onNodesChange:_s,onEdgesChange:gr,onEdgesDelete:Ts,onNodesDelete:As,onEdgeDoubleClick:zr,onConnect:Cs,onNodeClick:Br,onPaneClick:Jn,onDrop:Ut,onDragOver:Es,deleteKeyCode:["Backspace","Delete"],defaultViewport:{x:0,y:0,zoom:1},minZoom:.1,maxZoom:2,snapToGrid:_,snapGrid:[N,N],children:[s.jsx(d4,{color:ko,gap:N}),s.jsx(v4,{}),R&&s.jsx(P4,{nodeColor:le=>le.data?.isActive?Ps:Ke,maskColor:kn?"rgba(247, 248, 250, 0.8)":"rgba(0, 0, 0, 0.8)",style:{background:kn?"#F7F8FA":"#1a1a2e"}})]}),s.jsx(p7,{onFitView:yr,showDataFlowOverlay:C,onToggleDataFlowOverlay:mo,showMinimap:R,onToggleMinimap:M,isRunning:Ae!=="idle",onRun:()=>{q||G()},onStop:()=>{}})]}),Ti&&a&&s.jsx(F6,{nodeId:a,agent:Ti,agents:e.agents,toolConfigs:e.tool_configs||{},onUpdate:Fr,onRename:u,onAddSubAgent:()=>g(a),onClose:()=>i(null),onSelectTool:w,onRemoveTool:le=>m(a,le)}),P&&e&&s.jsx(v8,{nodeId:P,onClose:()=>T(null)}),v&&e&&s.jsx(W6,{toolId:v,config:e.tool_configs?.[v]||null,onUpdate:le=>wo(v,le),onClose:()=>w(null),onOpenCodeEditor:()=>oe(!0)}),q&&fr&&He.length>0&&s.jsx("div",{className:"w-72 flex-shrink-0",children:s.jsx(Q6,{snapshot:wi,previousSnapshot:yo,snapshots:He,currentIndex:Ct,onHistorySelect:hr,onClose:()=>qr(!1)})})]}),q&&H&&Hr&&I&&He.length>0&&s.jsx(UW,{snapshots:He,currentIndex:Ct,onScrub:Ot||(()=>{}),isCollapsed:st,onToggleCollapse:()=>qt(!st)}),q&&Hr&&I&&s.jsx("div",{className:Ne?"":"h-64",children:s.jsx(C$,{onFlowPhase:Ve,onActiveAgent:yt,onIteration:Ye,onThought:js,binaryPath:I,onSnapshotsChange:go,buildStatus:ye,isCollapsed:Ne,onCollapseChange:xe})}),q&&Hr&&!I&&s.jsx("div",{className:"h-32 border-t flex items-center justify-center",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-muted)"},children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{children:"Build the project first to test it"}),s.jsx("button",{onClick:U,className:"mt-2 px-4 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm font-medium",children:"Build Project"})]})}),q&&!Hr&&s.jsx("div",{className:"h-32 border-t flex items-center justify-center",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-muted)"},children:'Drag "LLM Agent" onto the canvas to get started'}),B&&s.jsx(zW,{code:B,onClose:ee}),Y&&s.jsx(BW,{building:$,success:Y.success,output:Y.output,path:Y.path,onClose:Z,isAutobuild:D}),ge&&wr&&s.jsx($W,{config:wr,onUpdate:le=>wo(v,le),onClose:()=>oe(!1)}),de&&s.jsx(P8,{onConfirm:async le=>{je(!1);const _e=await mi.projects.create(le);await t(_e.id);const at=ZA.find(qe=>qe.id==="simple_chat");at&&(Object.entries(at.agents).forEach(([qe,tt])=>{k(qe,tt)}),at.edges.forEach(qe=>d(qe.from,qe.to)),setTimeout(()=>wt(),100))},onClose:()=>je(!1)}),Me&&e&&s.jsx(mA,{settings:e.settings,projectName:e.name,projectDescription:e.description,onSave:(le,_e,at)=>{F(_e,at),V(le),Le(!1)},onClose:()=>Le(!1)})]})}function O7({children:e}){const t=vi(n=>n.mode);return E.useEffect(()=>{document.documentElement.setAttribute("data-theme",t);const n=document.querySelector('meta[name="theme-color"]');n&&n.setAttribute("content",t==="light"?"#F7F8FA":"#1a1a2e")},[t]),s.jsx(s.Fragment,{children:e})}function M7({className:e="",size:t=18}){const{mode:n,toggle:r}=vi(),i=n==="light";return s.jsx("button",{onClick:r,className:`p-2 rounded-md transition-colors ${e}`,style:{color:"var(--text-secondary)"},onMouseEnter:a=>a.currentTarget.style.backgroundColor="var(--bg-secondary)",onMouseLeave:a=>a.currentTarget.style.backgroundColor="transparent",title:i?"Switch to dark mode":"Switch to light mode","aria-label":i?"Switch to dark mode":"Switch to light mode",children:i?s.jsx(q$,{size:t,className:"transition-transform"}):s.jsx(B$,{size:t,className:"transition-transform"})})}function L7(){const{setMode:e}=vi();return E.useEffect(()=>{const t=fs();if(t.theme==="system"){const n=window.matchMedia("(prefers-color-scheme: dark)").matches;e(n?"dark":"light")}else e(t.theme)},[e]),null}function D7(){const{currentProject:e,fetchProjects:t}=gt(),[n,r]=E.useState(!1),{isVisible:i,complete:a,skip:c,hide:u,shouldShowOnFirstRun:d,show:p}=e2();return E.useEffect(()=>{t()},[t]),E.useEffect(()=>{d()&&p()},[d,p]),s.jsxs(O7,{children:[s.jsx(L7,{}),s.jsxs("div",{className:"h-screen flex flex-col",style:{backgroundColor:"var(--bg-primary)"},children:[s.jsxs("header",{className:"h-12 border-b flex items-center justify-between px-4",style:{backgroundColor:"var(--surface-panel)",borderColor:"var(--border-default)",color:"var(--text-primary)"},children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("h1",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx("img",{src:"https://adk-rust.com/icon.svg",alt:"ADK",className:"w-7 h-7"})," ADK Studio"]}),e&&s.jsxs("span",{className:"ml-4",style:{color:"var(--text-secondary)"},children:["/ ",e.name]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>r(!0),className:"p-1.5 rounded hover:opacity-80 transition-opacity",style:{color:"var(--text-secondary)"},title:"Global Settings",children:""}),s.jsx(M7,{size:20})]})]}),s.jsx("main",{className:"flex-1 overflow-hidden",style:{backgroundColor:"var(--bg-canvas)"},children:e?s.jsx(sA,{children:s.jsx(R7,{})}):s.jsx(rF,{})}),i&&s.jsx(HW,{onComplete:a,onSkip:c,onClose:u}),n&&s.jsx(yA,{onClose:()=>r(!1)}),s.jsx(VW,{onAction:(f,m)=>{f==="open-env"?r(!0):f==="open-docs"&&window.open(`https://github.com/zavora-ai/adk-rust/blob/main/adk-studio/ui/src/components/Templates/docs/${m}.md`,"_blank")}})]})]})}NR.createRoot(document.getElementById("root")).render(s.jsx(Rt.StrictMode,{children:s.jsx(D7,{})}));
